import{j as e}from"./vendor-three-pXgRM845.js";import{b as s,f as Le,u as Ie}from"./vendor-react-DGfbrl1l.js";import{a as M}from"./vendor-ui-B9ygI19o.js";import{C as E}from"./Card-ByQtE_JY.js";import{B as m}from"./Button-POFR3cy9.js";import{A as _e,F as fe,M as Ge}from"./index-DgLtObAt.js";import{F as Ve,D as ze}from"./DiscordTagBadge-D77r93vV.js";import{F as Pe}from"./XMarkIcon-ghU6kRhd.js";import{F as Oe}from"./FunnelIcon-DeSn05Zy.js";import"./usePersonalColor-DIYl9Z9e.js";function Ue({title:a,titleId:l,...o},x){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":l},o),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const We=s.forwardRef(Ue);function He({title:a,titleId:l,...o},x){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":l},o),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const Ye=s.forwardRef(He),Ze=["Lush","Toxic","Scorched","Radioactive","Frozen","Barren","Dead","Exotic","Marsh","Volcanic","Waterworld","Gas Giant","Infested","Mega Exotic","Chromatic Red","Chromatic Green","Chromatic Blue"],J={Lush:"Lush",Paradise:"Lush",Temperate:"Lush",Tropical:"Lush",Verdant:"Lush",Viridescent:"Lush",Humid:"Lush",Overgrown:"Lush",Flourishing:"Lush",Grassy:"Lush",Bountiful:"Lush",Rainy:"Lush",Frozen:"Frozen",Icy:"Frozen",Arctic:"Frozen",Glacial:"Frozen",Icebound:"Frozen",Frostbound:"Frozen",Freezing:"Frozen","Sub-Zero":"Frozen","Sub-zero":"Frozen",Hiemal:"Frozen",Hyperborean:"Frozen",Toxic:"Toxic",Poisonous:"Toxic",Noxious:"Toxic",Corrosive:"Toxic",Acidic:"Toxic",Caustic:"Toxic",Acrid:"Toxic",Blighted:"Toxic",Miasmatic:"Toxic",Rotting:"Toxic",Scorched:"Scorched",Hot:"Scorched",Fiery:"Scorched",Boiling:"Scorched",Torrid:"Scorched",Incandescent:"Scorched",Scalding:"Scorched",Charred:"Scorched",Arid:"Scorched","High Temperature":"Scorched",Radioactive:"Radioactive",Irradiated:"Radioactive",Nuclear:"Radioactive",Isotopic:"Radioactive",Contaminated:"Radioactive","Decaying Nuclear":"Radioactive","Gamma Intensive":"Radioactive","Gamma-Intensive":"Radioactive","High Radio Source":"Radioactive",Supercritical:"Radioactive","High Energy":"Radioactive",Barren:"Barren",Desert:"Barren",Rocky:"Barren",Bleak:"Barren",Parched:"Barren",Dusty:"Barren",Desolate:"Barren","Wind-Swept":"Barren","Wind-swept":"Barren",Abandoned:"Barren",Dead:"Dead",Empty:"Dead",Lifeless:"Dead",Forsaken:"Dead","Life-Incompatible":"Dead","Low Atmosphere":"Dead",Airless:"Dead","Terraforming Catastrophe":"Dead",Marsh:"Marsh",Marshy:"Marsh",Swamp:"Marsh",Boggy:"Marsh",Foggy:"Marsh",Misty:"Marsh",Hazy:"Marsh",Murky:"Marsh",Damp:"Marsh",Quagmire:"Marsh",Reeking:"Marsh",Vapour:"Marsh",Cloudy:"Marsh","Endless Morass":"Marsh",Volcanic:"Volcanic",Lava:"Volcanic",Magma:"Volcanic",Erupting:"Volcanic",Molten:"Volcanic",Ashen:"Volcanic","Ash-shrouded":"Volcanic","Ash-Shrouded":"Volcanic",Tectonic:"Volcanic",Basalt:"Volcanic","Flame-Ruptured":"Volcanic",Unstable:"Volcanic",Violent:"Volcanic","Imminent Core Detonation":"Volcanic","Obsidian Bead":"Volcanic",Exotic:"Exotic",Weird:"Exotic",Fissured:"Exotic","Of Light":"Exotic",Breached:"Exotic",Rattling:"Exotic",Spined:"Exotic",Skeletal:"Exotic",Bubbling:"Exotic",Frothing:"Exotic",Foaming:"Exotic",Contoured:"Exotic",Cabled:"Exotic",Webbed:"Exotic",Mechanical:"Exotic",Metallic:"Exotic",Metallurgic:"Exotic",Hexagonal:"Exotic",Plated:"Exotic",Scaly:"Exotic",Fungal:"Exotic",Sporal:"Exotic",Capped:"Exotic",Finned:"Exotic",Bladed:"Exotic","Shell-Strewn":"Exotic",Ossified:"Exotic",Petrified:"Exotic",Calcified:"Exotic",Columned:"Exotic",Sharded:"Exotic",Pillared:"Exotic",Shattered:"Exotic",Fractured:"Exotic",Fragmented:"Exotic","Planetary Anomaly":"Exotic",Malfunctioning:"Exotic","[REDACTED]":"Exotic",Glassy:"Exotic",Thirsty:"Exotic",Doomed:"Exotic",Erased:"Exotic",Temporary:"Exotic",Corrupted:"Exotic",Crimson:"Chromatic Red","Lost Red":"Chromatic Red","Vermillion Globe":"Chromatic Red",Scarlet:"Chromatic Red",Blood:"Chromatic Red","Wine Dark":"Chromatic Red","Lost Green":"Chromatic Green","Vile Anomaly":"Chromatic Green","Toxic Anomaly":"Chromatic Green","Doomed Jade":"Chromatic Green","Haunted Emeril":"Chromatic Green","Deathly Green Anomaly":"Chromatic Green","Lost Blue":"Chromatic Blue","Harsh Blue Globe":"Chromatic Blue","Frozen Anomaly":"Chromatic Blue",Azure:"Chromatic Blue",Cerulean:"Chromatic Blue",Ultramarine:"Chromatic Blue","Chromatic Fog":"Mega Exotic","Stellar Corruption":"Mega Exotic","Stellar Corruption Detected":"Mega Exotic",Infested:"Infested","The Nest":"Infested","Xeno-Colony":"Infested","Worm-Ridden":"Infested","Worm-ridden":"Infested","Infested Paradise":"Infested","Boiling Doom":"Infested","Fiery Dreadworld":"Infested","Icy Abhorrence":"Infested","Frozen Hell":"Infested","Caustic Nightmare":"Infested","Toxic Horror":"Infested","Radioactive Abomination":"Infested",Mutated:"Infested","Mutating Relic":"Infested",Terrorsphere:"Infested","Infected Dustbowl":"Infested",Tainted:"Infested",Waterworld:"Waterworld",Drowning:"Waterworld",Endless:"Waterworld","Gas Giant":"Gas Giant",Ruined:"Dead","Ruined Dustbowl":"Barren","Bleached Ruin":"Dead","Scorched Relic":"Scorched","Overgrown Relic":"Lush","Abandoned Crucible":"Scorched","Abandoned Paradise":"Lush","Claimed By Decay":"Dead","Lost To Fire":"Scorched"},ye={Lush:"bg-green-500",Frozen:"bg-cyan-400",Toxic:"bg-lime-500",Scorched:"bg-orange-500",Radioactive:"bg-yellow-400",Barren:"bg-amber-600",Dead:"bg-gray-500",Marsh:"bg-teal-500",Volcanic:"bg-red-600",Exotic:"bg-purple-500","Mega Exotic":"bg-pink-500","Chromatic Red":"bg-red-500","Chromatic Green":"bg-emerald-500","Chromatic Blue":"bg-blue-500",Infested:"bg-rose-700",Waterworld:"bg-sky-500","Gas Giant":"bg-indigo-400",Unknown:"bg-gray-600"};function qe(a){if(!a)return"Unknown";if(J[a])return J[a];const l=a.trim();for(const[o,x]of Object.entries(J))if(o.toLowerCase()===l.toLowerCase())return x;return Ze.includes(l)?l:(l.startsWith("Unknown"),"Unknown")}function Qe(a){return ye[a]||ye.Unknown}function Je(a){const l={};for(const[o,x]of Object.entries(a)){const d=qe(o);l[d]=(l[d]||0)+x}return l}function Xe(a,l){const[o,x]=s.useState(a);return s.useEffect(()=>{const d=setTimeout(()=>x(a),l);return()=>clearTimeout(d)},[a,l]),o}function Ke(a){if(!a)return null;if(a.startsWith("http"))return a;const o=a.replace(/\\/g,"/").split("/"),x=o[o.length-1];return`/haven-ui-photos/${encodeURIComponent(x)}`}function et(a){if(!a)return null;const o={Yellow:"bg-yellow-500 text-black",Red:"bg-red-500 text-white",Green:"bg-green-500 text-white",Blue:"bg-blue-500 text-white",Purple:"bg-purple-500 text-white"}[a]||"bg-gray-500 text-white";return e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${o}`,children:a})}function tt({system:a,isSelected:l,onSelect:o,showCheckbox:x,onClick:d}){const u=Ke(a.photo||a.planets?.[0]?.photo);return e.jsxs("div",{className:`relative rounded-lg border transition-all cursor-pointer hover:shadow-lg ${l?"border-indigo-500 bg-indigo-900/30 ring-2 ring-indigo-400":"border-gray-700 bg-gray-800/50 hover:bg-gray-700/50 hover:border-gray-600"}`,onClick:d,children:[x&&e.jsx("div",{className:"absolute top-2 left-2 z-10",onClick:O=>O.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:l,onChange:o,className:"w-5 h-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),e.jsx("div",{className:"h-32 bg-gray-900 rounded-t-lg overflow-hidden",children:u?e.jsx("img",{src:u,alt:a.name,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600",children:e.jsx(fe,{className:"w-12 h-12"})})}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-semibold text-lg truncate mb-2",title:a.name,children:a.name}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[et(a.star_type),e.jsx("span",{className:"text-xs bg-blue-600/50 text-blue-200 px-1.5 py-0.5 rounded",children:a.galaxy||"Euclid"}),e.jsx(ze,{tag:a.discord_tag})]}),e.jsxs("div",{className:"text-sm text-gray-400 flex items-center gap-3",children:[e.jsxs("span",{children:[a.planets?.length||a.planet_count||0," planets"]}),a.glyph_code&&e.jsxs("span",{className:"font-mono text-purple-400 text-xs truncate",title:a.glyph_code,children:[a.glyph_code.substring(0,8),"..."]})]})]})]})}function mt(){const{rx:a,ry:l,rz:o}=Le(),x=Ie(),d=s.useContext(_e),[u,O]=s.useState(null),[f,X]=s.useState([]),[je,K]=s.useState(!0),[ee,te]=s.useState(null),[g,S]=s.useState(1),[C,ae]=s.useState(0),T=100,[U,ve]=s.useState([]),[se,Ne]=s.useState(""),k=Xe(se,300),[j,W]=s.useState("all"),[v,H]=s.useState("all"),[y,Y]=s.useState("all"),[A,re]=s.useState("name"),[$,ne]=s.useState("asc"),[B,we]=s.useState(!1),[N,le]=s.useState(!1),[R,L]=s.useState(new Set),[Z,Se]=s.useState(!1),[Ce,I]=s.useState(!1),[D,q]=s.useState(""),[_,ie]=s.useState(null),[G,oe]=s.useState(""),[Q,ce]=s.useState(!1);s.useEffect(()=>{S(1),de()},[a,l,o]),s.useEffect(()=>{xe()},[a,l,o,g]),s.useEffect(()=>{M.get("/api/discord_tags").then(t=>{ve(t.data.tags||[])}).catch(()=>{})},[]);async function de(){K(!0),te(null);try{const t=await M.get(`/api/regions/${a}/${l}/${o}`);O(t.data)}catch(t){te(t.response?.data?.detail||"Failed to load region data")}finally{K(!1)}}async function xe(){try{const t=await M.get(`/api/regions/${a}/${l}/${o}/systems?include_planets=true&limit=${T}&page=${g}`);X(t.data.systems||[]),ae(t.data.total||0)}catch(t){console.error("Failed to load systems:",t),X([]),ae(0)}}async function Ee(){await Promise.all([de(),xe()])}const w=s.useMemo(()=>{let t=0,n=0,r=0;const i=new Set,c={},h={},p={};f.forEach(F=>{i.add(F.galaxy||"Euclid");const ue=F.star_type||"Unknown";p[ue]=(p[ue]||0)+1;const ge=F.economy_type||"Unknown";h[ge]=(h[ge]||0)+1,r+=F.discoveries?.length||0;const he=F.planets||[];t+=he.length,he.forEach(pe=>{n+=pe.moons?.length||0;const be=pe.biome||"Unknown";c[be]=(c[be]||0)+1})});const $e=Je(c);return{systemCount:f.length,planetCount:t,moonCount:n,discoveryCount:r,galaxies:Array.from(i),biomeDistribution:$e,rawBiomeDistribution:c,economyDistribution:h,starTypeDistribution:p}},[f]),V=s.useMemo(()=>{const t=new Set,n=new Set;return f.forEach(r=>{r.galaxy&&t.add(r.galaxy),r.star_type&&n.add(r.star_type)}),{galaxies:Array.from(t).sort(),starTypes:Array.from(n).sort()}},[f]),z=s.useMemo(()=>{let t=0;return j!=="all"&&t++,v!=="all"&&t++,y!=="all"&&t++,t},[j,v,y]),b=Math.ceil(C/T),ke=C===0?0:(g-1)*T+1,Be=Math.min(g*T,C),P=s.useMemo(()=>{let t=[...f];if(k.trim()){const n=k.toLowerCase();t=t.filter(r=>r.name?.toLowerCase().includes(n)||r.glyph_code?.toLowerCase().includes(n)||r.description?.toLowerCase().includes(n))}return j!=="all"&&(t=t.filter(n=>n.galaxy===j)),v!=="all"&&(t=t.filter(n=>n.star_type===v)),y!=="all"&&(y==="untagged"?t=t.filter(n=>!n.discord_tag):t=t.filter(n=>n.discord_tag===y)),t.sort((n,r)=>{let i=0;switch(A){case"name":i=(n.name||"").localeCompare(r.name||"");break;case"date":i=new Date(n.created_at||0)-new Date(r.created_at||0);break;case"planets":i=(n.planets?.length||0)-(r.planets?.length||0);break;default:i=0}return $==="asc"?i:-i}),t},[f,k,j,v,y,A,$]);function Re(t){L(n=>{const r=new Set(n);return r.has(t)?r.delete(t):r.add(t),r})}function De(){L(new Set(P.map(t=>t.id)))}function Fe(){L(new Set)}function Me(){le(!1),L(new Set)}async function Te(t){if(t.preventDefault(),!D.trim())return;const n=d?.isAdmin&&!d?.isSuperAdmin,r=n?d?.user?.username:G.trim();if(!d?.isSuperAdmin){if(!_){alert("Please select a Discord Community");return}if(!n&&!G.trim()){alert("Please enter your Discord Username");return}}ce(!0);try{d?.isSuperAdmin?await M.put(`/api/regions/${a}/${l}/${o}`,{custom_name:D.trim()}):await M.post(`/api/regions/${a}/${l}/${o}/submit`,{proposed_name:D.trim(),discord_tag:_,personal_discord_username:r}),I(!1),q(""),ie(null),oe(""),Ee(),alert(d?.isSuperAdmin?"Region name updated!":"Name submitted for approval!")}catch(i){alert("Failed: "+(i.response?.data?.detail||i.message))}finally{ce(!1)}}function me({title:t,data:n,colorFn:r}){const i=Object.entries(n).sort((h,p)=>p[1]-h[1]),c=i.reduce((h,[,p])=>h+p,0);return c===0?null:e.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-300",children:t}),e.jsxs("div",{className:"space-y-1",children:[i.slice(0,5).map(([h,p])=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-0.5",children:[e.jsx("span",{className:"text-gray-400",children:h}),e.jsx("span",{className:"text-gray-500",children:p})]}),e.jsx("div",{className:"h-1.5 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${r?r(h):"bg-cyan-500"}`,style:{width:`${p/c*100}%`}})})]})},h)),i.length>5&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["+",i.length-5," more"]})]})]})}function Ae({data:t}){const n=Object.entries(t).sort((i,c)=>c[1]-i[1]),r=n.reduce((i,[,c])=>i+c,0);return r===0?null:e.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-300",children:"Biomes"}),e.jsx("div",{className:"max-h-64 overflow-y-auto pr-1 space-y-1 scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800",children:n.map(([i,c])=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-0.5",children:[e.jsx("span",{className:"text-gray-400",children:i}),e.jsx("span",{className:"text-gray-500",children:c})]}),e.jsx("div",{className:"h-1.5 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${Qe(i)}`,style:{width:`${c/r*100}%`}})})]})},i))}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2 pt-2 border-t border-gray-700",children:[n.length," biome categories | ",r," total planets"]})]})}return je?e.jsx("div",{className:"p-6",children:e.jsx(E,{children:e.jsx("div",{className:"text-center py-8",children:"Loading region..."})})}):ee?e.jsx("div",{className:"p-6",children:e.jsxs(E,{children:[e.jsx("div",{className:"text-center py-8 text-red-500",children:ee}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(m,{onClick:()=>x("/systems"),children:"Back to Systems"})})]})}):(u?.custom_name||`${a}${l}${o}`,e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx(E,{className:"mb-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-1",children:u?.custom_name?e.jsx("span",{className:"text-purple-400",children:u.custom_name}):e.jsxs("span",{className:"text-gray-300",children:["Region (",a,", ",l,", ",o,")"]})}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Coordinates: [",a,", ",l,", ",o,"]",u?.pending_name&&e.jsxs("span",{className:"ml-3 text-yellow-400",children:['Pending name: "',u.pending_name.proposed_name,'"']})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("a",{href:`/map/region?rx=${a}&ry=${l}&rz=${o}`,target:"_blank",rel:"noopener noreferrer",children:e.jsxs(m,{className:"bg-cyan-600 hover:bg-cyan-700",children:[e.jsx(fe,{className:"w-4 h-4 mr-1 inline"}),"3D Map"]})}),e.jsxs(m,{className:"bg-purple-600 hover:bg-purple-700",onClick:()=>{q(u?.custom_name||""),I(!0)},children:[e.jsx(Ve,{className:"w-4 h-4 mr-1 inline"}),u?.custom_name?"Edit Name":"Set Name"]}),e.jsx(m,{className:"bg-gray-600 hover:bg-gray-700",onClick:()=>x("/systems"),children:"Back"})]})]})}),e.jsxs(E,{className:"mb-4",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:C}),e.jsx("div",{className:"text-xs text-gray-400",children:"Systems"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:w.planetCount}),e.jsx("div",{className:"text-xs text-gray-400",children:"Planets"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:w.moonCount}),e.jsx("div",{className:"text-xs text-gray-400",children:"Moons"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:w.discoveryCount}),e.jsx("div",{className:"text-xs text-gray-400",children:"Discoveries"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-blue-400",children:w.galaxies.join(", ")}),e.jsx("div",{className:"text-xs text-gray-400",children:"Galaxies"})]})]}),e.jsx("button",{className:"w-full mt-3 py-2 text-sm text-gray-400 hover:text-white flex items-center justify-center gap-1",onClick:()=>Se(!Z),children:Z?e.jsxs(e.Fragment,{children:["Hide Breakdown ",e.jsx(Ye,{className:"w-4 h-4"})]}):e.jsxs(e.Fragment,{children:["Show Breakdown ",e.jsx(We,{className:"w-4 h-4"})]})}),Z&&e.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(Ae,{data:w.biomeDistribution}),e.jsx(me,{title:"Star Types",data:w.starTypeDistribution,colorFn:t=>({Yellow:"bg-yellow-500",Red:"bg-red-500",Green:"bg-green-500",Blue:"bg-blue-500",Purple:"bg-purple-500"})[t]||"bg-gray-500"}),e.jsx(me,{title:"Economy Types",data:w.economyDistribution,colorFn:()=>"bg-emerald-500"})]})]}),e.jsxs(E,{className:"mb-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search systems...",value:se,onChange:t=>Ne(t.target.value),className:"w-full px-3 py-2 rounded bg-gray-800 border border-gray-700 focus:border-cyan-500 focus:outline-none"})}),e.jsxs("button",{className:`lg:hidden px-3 py-2 rounded border transition-colors flex items-center gap-1.5 ${B||z>0?"bg-cyan-600 border-cyan-500 text-white":"bg-gray-700 border-gray-600 text-gray-300"}`,onClick:()=>we(!B),children:[B?e.jsx(Pe,{className:"w-5 h-5"}):e.jsx(Oe,{className:"w-5 h-5"}),z>0&&!B&&e.jsx("span",{className:"bg-white text-cyan-600 text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:z})]}),e.jsxs("div",{className:"hidden lg:flex flex-wrap gap-2",children:[e.jsxs("select",{value:j,onChange:t=>W(t.target.value),className:"px-3 py-2 rounded bg-gray-800 border border-gray-700 text-sm",children:[e.jsx("option",{value:"all",children:"All Galaxies"}),V.galaxies.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:v,onChange:t=>H(t.target.value),className:"px-3 py-2 rounded bg-gray-800 border border-gray-700 text-sm",children:[e.jsx("option",{value:"all",children:"All Stars"}),V.starTypes.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:y,onChange:t=>Y(t.target.value),className:"px-3 py-2 rounded bg-gray-800 border border-gray-700 text-sm",children:[e.jsx("option",{value:"all",children:"All Tags"}),e.jsx("option",{value:"untagged",children:"Untagged"}),U.map(t=>e.jsx("option",{value:t.tag,children:t.name},t.tag))]}),e.jsxs("select",{value:`${A}-${$}`,onChange:t=>{const[n,r]=t.target.value.split("-");re(n),ne(r)},className:"px-3 py-2 rounded bg-gray-800 border border-gray-700 text-sm",children:[e.jsx("option",{value:"name-asc",children:"Name A-Z"}),e.jsx("option",{value:"name-desc",children:"Name Z-A"}),e.jsx("option",{value:"date-desc",children:"Newest First"}),e.jsx("option",{value:"date-asc",children:"Oldest First"}),e.jsx("option",{value:"planets-desc",children:"Most Planets"}),e.jsx("option",{value:"planets-asc",children:"Fewest Planets"})]})]})]}),B&&e.jsxs("div",{className:"lg:hidden bg-gray-800/50 rounded-lg p-4 space-y-4 border border-gray-700",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Sort By"}),e.jsxs("select",{value:`${A}-${$}`,onChange:t=>{const[n,r]=t.target.value.split("-");re(n),ne(r)},className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-sm",children:[e.jsx("option",{value:"name-asc",children:"Name A-Z"}),e.jsx("option",{value:"name-desc",children:"Name Z-A"}),e.jsx("option",{value:"date-desc",children:"Newest First"}),e.jsx("option",{value:"date-asc",children:"Oldest First"}),e.jsx("option",{value:"planets-desc",children:"Most Planets"}),e.jsx("option",{value:"planets-asc",children:"Fewest Planets"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Galaxy"}),e.jsxs("select",{value:j,onChange:t=>W(t.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-sm",children:[e.jsx("option",{value:"all",children:"All Galaxies"}),V.galaxies.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Star Type"}),e.jsxs("select",{value:v,onChange:t=>H(t.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-sm",children:[e.jsx("option",{value:"all",children:"All Stars"}),V.starTypes.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Community Tag"}),e.jsxs("select",{value:y,onChange:t=>Y(t.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-sm",children:[e.jsx("option",{value:"all",children:"All Tags"}),e.jsx("option",{value:"untagged",children:"Untagged"}),U.map(t=>e.jsx("option",{value:t.tag,children:t.name},t.tag))]})]}),z>0&&e.jsx("button",{onClick:()=>{W("all"),H("all"),Y("all")},className:"w-full py-2 text-sm text-cyan-400 hover:text-cyan-300 border border-gray-600 rounded",children:"Clear All Filters"})]})]}),d?.isAdmin&&e.jsxs("div",{className:"mt-3 flex items-center justify-between border-t border-gray-700 pt-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m,{className:N?"bg-amber-600 hover:bg-amber-700":"bg-indigo-600 hover:bg-indigo-700",onClick:()=>N?Me():le(!0),children:N?"Exit Bulk Mode":"Bulk Mode"}),N&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-sm text-gray-400",children:[R.size," selected"]}),e.jsx("button",{onClick:De,className:"text-sm text-indigo-400 hover:text-indigo-300 underline",children:"Select All"}),R.size>0&&e.jsx("button",{onClick:Fe,className:"text-sm text-gray-400 hover:text-white underline",children:"Clear"})]})]}),N&&R.size>0&&e.jsx("div",{className:"flex gap-2",children:e.jsxs(m,{className:"bg-red-600 hover:bg-red-700 text-sm",children:["Delete (",R.size,")"]})})]})]}),e.jsxs("div",{className:"mb-3 text-sm text-gray-400 flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("span",{children:["Showing ",ke,"-",Be," of ",C," systems",k&&` (${P.length} matching "${k}")`]}),b>1&&e.jsxs("span",{className:"text-cyan-400",children:["Page ",g," of ",b]})]}),P.length===0?e.jsx(E,{children:e.jsx("div",{className:"text-center py-8 text-gray-400",children:C===0?"No systems in this region":"No systems match your filters"})}):e.jsx("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5",children:P.map(t=>e.jsx(tt,{system:t,isSelected:R.has(t.id),onSelect:()=>Re(t.id),showCheckbox:N,onClick:()=>{N||x(`/systems/${encodeURIComponent(t.id)}`)}},t.id))}),b>1&&e.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-center gap-2",children:[e.jsx(m,{variant:"ghost",className:"px-3 py-2",onClick:()=>S(1),disabled:g===1,children:"« First"}),e.jsx(m,{variant:"ghost",className:"px-3 py-2",onClick:()=>S(t=>Math.max(1,t-1)),disabled:g===1,children:"‹ Prev"}),e.jsx("div",{className:"flex items-center gap-1",children:(()=>{const t=[];let r=Math.max(1,g-Math.floor(2.5)),i=Math.min(b,r+5-1);i-r+1<5&&(r=Math.max(1,i-5+1)),r>1&&t.push(e.jsx("span",{className:"px-2 text-gray-500",children:"..."},"start-ellipsis"));for(let c=r;c<=i;c++)t.push(e.jsx("button",{onClick:()=>S(c),className:`px-3 py-1 rounded transition-colors ${c===g?"bg-cyan-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:c},c));return i<b&&t.push(e.jsx("span",{className:"px-2 text-gray-500",children:"..."},"end-ellipsis")),t})()}),e.jsx(m,{variant:"ghost",className:"px-3 py-2",onClick:()=>S(t=>Math.min(b,t+1)),disabled:g===b,children:"Next ›"}),e.jsx(m,{variant:"ghost",className:"px-3 py-2",onClick:()=>S(b),disabled:g===b,children:"Last »"})]}),Ce&&e.jsx(Ge,{title:u?.custom_name?"Edit Region Name":"Set Region Name",onClose:()=>I(!1),children:e.jsxs("form",{onSubmit:Te,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Region Name"}),e.jsx("input",{type:"text",value:D,onChange:t=>q(t.target.value),placeholder:"Enter region name...",className:"w-full px-3 py-2 rounded border border-gray-600 bg-gray-800 focus:border-purple-500 focus:outline-none",autoFocus:!0}),!d?.isSuperAdmin&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Your submission will be reviewed before approval."})]}),!d?.isSuperAdmin&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["Discord Community ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{className:`w-full px-3 py-2 rounded border bg-gray-800 focus:outline-none ${_?"border-gray-600 focus:border-purple-500":"border-red-500"}`,value:_||"",onChange:t=>ie(t.target.value||null),required:!0,children:[e.jsx("option",{value:"",children:"-- Select Community (Required) --"}),U.map(t=>e.jsxs("option",{value:t.tag,children:[t.name," (",t.tag,")"]},t.tag))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Which Discord community will review this region name?"})]}),d?.isAdmin?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Submitting As"}),e.jsx("div",{className:"w-full px-3 py-2 rounded border border-gray-600 bg-gray-700 text-gray-300",children:d?.user?.username||"Unknown"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Your logged-in username will be used for tracking"})]}):e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["Your Discord Username ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",value:G,onChange:t=>oe(t.target.value),placeholder:"e.g., YourName#1234",className:`w-full px-3 py-2 rounded border bg-gray-800 focus:outline-none ${G.trim()?"border-gray-600 focus:border-purple-500":"border-red-500"}`,required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"So we can contact you if needed"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{type:"submit",className:"bg-purple-600 hover:bg-purple-700",disabled:Q||!D.trim(),children:Q?"Submitting...":d?.isSuperAdmin?"Save":"Submit for Approval"}),e.jsx(m,{type:"button",className:"bg-gray-600 hover:bg-gray-700",onClick:()=>I(!1),disabled:Q,children:"Cancel"})]})]})})]}))}export{mt as default};
