function aY(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Zl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var YE={exports:{}},r0={},qE={exports:{}},An={};var nj;function sY(){if(nj)return An;nj=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function p(j){return j===null||typeof j!="object"?null:(j=f&&j[f]||j["@@iterator"],typeof j=="function"?j:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,_={};function v(j,B,ae){this.props=j,this.context=B,this.refs=_,this.updater=ae||m}v.prototype.isReactComponent={},v.prototype.setState=function(j,B){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,B,"setState")},v.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function w(){}w.prototype=v.prototype;function M(j,B,ae){this.props=j,this.context=B,this.refs=_,this.updater=ae||m}var C=M.prototype=new w;C.constructor=M,y(C,v.prototype),C.isPureReactComponent=!0;var N=Array.isArray,P=Object.prototype.hasOwnProperty,R={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function U(j,B,ae){var re,de={},ce=null,ie=null;if(B!=null)for(re in B.ref!==void 0&&(ie=B.ref),B.key!==void 0&&(ce=""+B.key),B)P.call(B,re)&&!k.hasOwnProperty(re)&&(de[re]=B[re]);var le=arguments.length-2;if(le===1)de.children=ae;else if(1<le){for(var fe=Array(le),Ne=0;Ne<le;Ne++)fe[Ne]=arguments[Ne+2];de.children=fe}if(j&&j.defaultProps)for(re in le=j.defaultProps,le)de[re]===void 0&&(de[re]=le[re]);return{$$typeof:t,type:j,key:ce,ref:ie,props:de,_owner:R.current}}function I(j,B){return{$$typeof:t,type:j.type,key:B,ref:j.ref,props:j.props,_owner:j._owner}}function L(j){return typeof j=="object"&&j!==null&&j.$$typeof===t}function z(j){var B={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ae){return B[ae]})}var O=/\/+/g;function q(j,B){return typeof j=="object"&&j!==null&&j.key!=null?z(""+j.key):B.toString(36)}function Y(j,B,ae,re,de){var ce=typeof j;(ce==="undefined"||ce==="boolean")&&(j=null);var ie=!1;if(j===null)ie=!0;else switch(ce){case"string":case"number":ie=!0;break;case"object":switch(j.$$typeof){case t:case e:ie=!0}}if(ie)return ie=j,de=de(ie),j=re===""?"."+q(ie,0):re,N(de)?(ae="",j!=null&&(ae=j.replace(O,"$&/")+"/"),Y(de,B,ae,"",function(Ne){return Ne})):de!=null&&(L(de)&&(de=I(de,ae+(!de.key||ie&&ie.key===de.key?"":(""+de.key).replace(O,"$&/")+"/")+j)),B.push(de)),1;if(ie=0,re=re===""?".":re+":",N(j))for(var le=0;le<j.length;le++){ce=j[le];var fe=re+q(ce,le);ie+=Y(ce,B,ae,fe,de)}else if(fe=p(j),typeof fe=="function")for(j=fe.call(j),le=0;!(ce=j.next()).done;)ce=ce.value,fe=re+q(ce,le++),ie+=Y(ce,B,ae,fe,de);else if(ce==="object")throw B=String(j),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return ie}function X(j,B,ae){if(j==null)return j;var re=[],de=0;return Y(j,re,"","",function(ce){return B.call(ae,ce,de++)}),re}function ee(j){if(j._status===-1){var B=j._result;B=B(),B.then(function(ae){(j._status===0||j._status===-1)&&(j._status=1,j._result=ae)},function(ae){(j._status===0||j._status===-1)&&(j._status=2,j._result=ae)}),j._status===-1&&(j._status=0,j._result=B)}if(j._status===1)return j._result.default;throw j._result}var se={current:null},W={transition:null},$={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:W,ReactCurrentOwner:R};function G(){throw Error("act(...) is not supported in production builds of React.")}return An.Children={map:X,forEach:function(j,B,ae){X(j,function(){B.apply(this,arguments)},ae)},count:function(j){var B=0;return X(j,function(){B++}),B},toArray:function(j){return X(j,function(B){return B})||[]},only:function(j){if(!L(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},An.Component=v,An.Fragment=n,An.Profiler=i,An.PureComponent=M,An.StrictMode=r,An.Suspense=l,An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,An.act=G,An.cloneElement=function(j,B,ae){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var re=y({},j.props),de=j.key,ce=j.ref,ie=j._owner;if(B!=null){if(B.ref!==void 0&&(ce=B.ref,ie=R.current),B.key!==void 0&&(de=""+B.key),j.type&&j.type.defaultProps)var le=j.type.defaultProps;for(fe in B)P.call(B,fe)&&!k.hasOwnProperty(fe)&&(re[fe]=B[fe]===void 0&&le!==void 0?le[fe]:B[fe])}var fe=arguments.length-2;if(fe===1)re.children=ae;else if(1<fe){le=Array(fe);for(var Ne=0;Ne<fe;Ne++)le[Ne]=arguments[Ne+2];re.children=le}return{$$typeof:t,type:j.type,key:de,ref:ce,props:re,_owner:ie}},An.createContext=function(j){return j={$$typeof:s,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:a,_context:j},j.Consumer=j},An.createElement=U,An.createFactory=function(j){var B=U.bind(null,j);return B.type=j,B},An.createRef=function(){return{current:null}},An.forwardRef=function(j){return{$$typeof:o,render:j}},An.isValidElement=L,An.lazy=function(j){return{$$typeof:d,_payload:{_status:-1,_result:j},_init:ee}},An.memo=function(j,B){return{$$typeof:u,type:j,compare:B===void 0?null:B}},An.startTransition=function(j){var B=W.transition;W.transition={};try{j()}finally{W.transition=B}},An.unstable_act=G,An.useCallback=function(j,B){return se.current.useCallback(j,B)},An.useContext=function(j){return se.current.useContext(j)},An.useDebugValue=function(){},An.useDeferredValue=function(j){return se.current.useDeferredValue(j)},An.useEffect=function(j,B){return se.current.useEffect(j,B)},An.useId=function(){return se.current.useId()},An.useImperativeHandle=function(j,B,ae){return se.current.useImperativeHandle(j,B,ae)},An.useInsertionEffect=function(j,B){return se.current.useInsertionEffect(j,B)},An.useLayoutEffect=function(j,B){return se.current.useLayoutEffect(j,B)},An.useMemo=function(j,B){return se.current.useMemo(j,B)},An.useReducer=function(j,B,ae){return se.current.useReducer(j,B,ae)},An.useRef=function(j){return se.current.useRef(j)},An.useState=function(j){return se.current.useState(j)},An.useSyncExternalStore=function(j,B,ae){return se.current.useSyncExternalStore(j,B,ae)},An.useTransition=function(){return se.current.useTransition()},An.version="18.3.1",An}var rj;function Ap(){return rj||(rj=1,qE.exports=sY()),qE.exports}var ij;function oY(){if(ij)return r0;ij=1;var t=Ap(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function s(o,l,u){var d,f={},p=null,m=null;u!==void 0&&(p=""+u),l.key!==void 0&&(p=""+l.key),l.ref!==void 0&&(m=l.ref);for(d in l)r.call(l,d)&&!a.hasOwnProperty(d)&&(f[d]=l[d]);if(o&&o.defaultProps)for(d in l=o.defaultProps,l)f[d]===void 0&&(f[d]=l[d]);return{$$typeof:e,type:o,key:p,ref:m,props:f,_owner:i.current}}return r0.Fragment=n,r0.jsx=s,r0.jsxs=s,r0}var aj;function lY(){return aj||(aj=1,YE.exports=oY()),YE.exports}var c=lY(),E=Ap();const Ze=Zl(E),wg=aY({__proto__:null,default:Ze},[E]);function RB(t,e){return function(){return t.apply(e,arguments)}}const{toString:cY}=Object.prototype,{getPrototypeOf:rP}=Object,{iterator:TS,toStringTag:DB}=Symbol,PS=(t=>e=>{const n=cY.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ql=t=>(t=t.toLowerCase(),e=>PS(e)===t),RS=t=>e=>typeof e===t,{isArray:Wg}=Array,Sg=RS("undefined");function Yy(t){return t!==null&&!Sg(t)&&t.constructor!==null&&!Sg(t.constructor)&&Zs(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const kB=Ql("ArrayBuffer");function uY(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&kB(t.buffer),e}const dY=RS("string"),Zs=RS("function"),jB=RS("number"),qy=t=>t!==null&&typeof t=="object",fY=t=>t===!0||t===!1,aw=t=>{if(PS(t)!=="object")return!1;const e=rP(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(DB in t)&&!(TS in t)},hY=t=>{if(!qy(t)||Yy(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},pY=Ql("Date"),mY=Ql("File"),gY=Ql("Blob"),vY=Ql("FileList"),yY=t=>qy(t)&&Zs(t.pipe),xY=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Zs(t.append)&&((e=PS(t))==="formdata"||e==="object"&&Zs(t.toString)&&t.toString()==="[object FormData]"))},bY=Ql("URLSearchParams"),[_Y,wY,SY,EY]=["ReadableStream","Request","Response","Headers"].map(Ql),MY=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xy(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Wg(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{if(Yy(t))return;const a=n?Object.getOwnPropertyNames(t):Object.keys(t),s=a.length;let o;for(r=0;r<s;r++)o=a[r],e.call(null,t[o],o,t)}}function OB(t,e){if(Yy(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Fh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,IB=t=>!Sg(t)&&t!==Fh;function hA(){const{caseless:t,skipUndefined:e}=IB(this)&&this||{},n={},r=(i,a)=>{const s=t&&OB(n,a)||a;aw(n[s])&&aw(i)?n[s]=hA(n[s],i):aw(i)?n[s]=hA({},i):Wg(i)?n[s]=i.slice():(!e||!Sg(i))&&(n[s]=i)};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&Xy(arguments[i],r);return n}const CY=(t,e,n,{allOwnKeys:r}={})=>(Xy(e,(i,a)=>{n&&Zs(i)?t[a]=RB(i,n):t[a]=i},{allOwnKeys:r}),t),NY=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),AY=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},TY=(t,e,n,r)=>{let i,a,s;const o={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),a=i.length;a-- >0;)s=i[a],(!r||r(s,t,e))&&!o[s]&&(e[s]=t[s],o[s]=!0);t=n!==!1&&rP(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},PY=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},RY=t=>{if(!t)return null;if(Wg(t))return t;let e=t.length;if(!jB(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},DY=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&rP(Uint8Array)),kY=(t,e)=>{const r=(t&&t[TS]).call(t);let i;for(;(i=r.next())&&!i.done;){const a=i.value;e.call(t,a[0],a[1])}},jY=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},OY=Ql("HTMLFormElement"),IY=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),sj=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),LY=Ql("RegExp"),LB=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Xy(n,(i,a)=>{let s;(s=e(i,a,t))!==!1&&(r[a]=s||i)}),Object.defineProperties(t,r)},FY=t=>{LB(t,(e,n)=>{if(Zs(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Zs(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},UY=(t,e)=>{const n={},r=i=>{i.forEach(a=>{n[a]=!0})};return Wg(t)?r(t):r(String(t).split(e)),n},BY=()=>{},zY=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function HY(t){return!!(t&&Zs(t.append)&&t[DB]==="FormData"&&t[TS])}const VY=t=>{const e=new Array(10),n=(r,i)=>{if(qy(r)){if(e.indexOf(r)>=0)return;if(Yy(r))return r;if(!("toJSON"in r)){e[i]=r;const a=Wg(r)?[]:{};return Xy(r,(s,o)=>{const l=n(s,i+1);!Sg(l)&&(a[o]=l)}),e[i]=void 0,a}}return r};return n(t,0)},WY=Ql("AsyncFunction"),GY=t=>t&&(qy(t)||Zs(t))&&Zs(t.then)&&Zs(t.catch),FB=((t,e)=>t?setImmediate:e?((n,r)=>(Fh.addEventListener("message",({source:i,data:a})=>{i===Fh&&a===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Fh.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Zs(Fh.postMessage)),$Y=typeof queueMicrotask<"u"?queueMicrotask.bind(Fh):typeof process<"u"&&process.nextTick||FB,YY=t=>t!=null&&Zs(t[TS]),Xe={isArray:Wg,isArrayBuffer:kB,isBuffer:Yy,isFormData:xY,isArrayBufferView:uY,isString:dY,isNumber:jB,isBoolean:fY,isObject:qy,isPlainObject:aw,isEmptyObject:hY,isReadableStream:_Y,isRequest:wY,isResponse:SY,isHeaders:EY,isUndefined:Sg,isDate:pY,isFile:mY,isBlob:gY,isRegExp:LY,isFunction:Zs,isStream:yY,isURLSearchParams:bY,isTypedArray:DY,isFileList:vY,forEach:Xy,merge:hA,extend:CY,trim:MY,stripBOM:NY,inherits:AY,toFlatObject:TY,kindOf:PS,kindOfTest:Ql,endsWith:PY,toArray:RY,forEachEntry:kY,matchAll:jY,isHTMLForm:OY,hasOwnProperty:sj,hasOwnProp:sj,reduceDescriptors:LB,freezeMethods:FY,toObjectSet:UY,toCamelCase:IY,noop:BY,toFiniteNumber:zY,findKey:OB,global:Fh,isContextDefined:IB,isSpecCompliantForm:HY,toJSONObject:VY,isAsyncFn:WY,isThenable:GY,setImmediate:FB,asap:$Y,isIterable:YY};function wn(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Xe.inherits(wn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Xe.toJSONObject(this.config),code:this.code,status:this.status}}});const UB=wn.prototype,BB={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{BB[t]={value:t}});Object.defineProperties(wn,BB);Object.defineProperty(UB,"isAxiosError",{value:!0});wn.from=(t,e,n,r,i,a)=>{const s=Object.create(UB);Xe.toFlatObject(t,s,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const o=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return wn.call(s,o,l,n,r,i),t&&s.cause==null&&Object.defineProperty(s,"cause",{value:t,configurable:!0}),s.name=t&&t.name||"Error",a&&Object.assign(s,a),s};const qY=null;function pA(t){return Xe.isPlainObject(t)||Xe.isArray(t)}function zB(t){return Xe.endsWith(t,"[]")?t.slice(0,-2):t}function oj(t,e,n){return t?t.concat(e).map(function(i,a){return i=zB(i),!n&&a?"["+i+"]":i}).join(n?".":""):e}function XY(t){return Xe.isArray(t)&&!t.some(pA)}const KY=Xe.toFlatObject(Xe,{},null,function(e){return/^is[A-Z]/.test(e)});function DS(t,e,n){if(!Xe.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Xe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,v){return!Xe.isUndefined(v[_])});const r=n.metaTokens,i=n.visitor||d,a=n.dots,s=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Xe.isSpecCompliantForm(e);if(!Xe.isFunction(i))throw new TypeError("visitor must be a function");function u(y){if(y===null)return"";if(Xe.isDate(y))return y.toISOString();if(Xe.isBoolean(y))return y.toString();if(!l&&Xe.isBlob(y))throw new wn("Blob is not supported. Use a Buffer instead.");return Xe.isArrayBuffer(y)||Xe.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,_,v){let w=y;if(y&&!v&&typeof y=="object"){if(Xe.endsWith(_,"{}"))_=r?_:_.slice(0,-2),y=JSON.stringify(y);else if(Xe.isArray(y)&&XY(y)||(Xe.isFileList(y)||Xe.endsWith(_,"[]"))&&(w=Xe.toArray(y)))return _=zB(_),w.forEach(function(C,N){!(Xe.isUndefined(C)||C===null)&&e.append(s===!0?oj([_],N,a):s===null?_:_+"[]",u(C))}),!1}return pA(y)?!0:(e.append(oj(v,_,a),u(y)),!1)}const f=[],p=Object.assign(KY,{defaultVisitor:d,convertValue:u,isVisitable:pA});function m(y,_){if(!Xe.isUndefined(y)){if(f.indexOf(y)!==-1)throw Error("Circular reference detected in "+_.join("."));f.push(y),Xe.forEach(y,function(w,M){(!(Xe.isUndefined(w)||w===null)&&i.call(e,w,Xe.isString(M)?M.trim():M,_,p))===!0&&m(w,_?_.concat(M):[M])}),f.pop()}}if(!Xe.isObject(t))throw new TypeError("data must be an object");return m(t),e}function lj(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function iP(t,e){this._pairs=[],t&&DS(t,this,e)}const HB=iP.prototype;HB.append=function(e,n){this._pairs.push([e,n])};HB.toString=function(e){const n=e?function(r){return e.call(this,r,lj)}:lj;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function ZY(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function VB(t,e,n){if(!e)return t;const r=n&&n.encode||ZY;Xe.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let a;if(i?a=i(e,n):a=Xe.isURLSearchParams(e)?e.toString():new iP(e,n).toString(r),a){const s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class cj{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Xe.forEach(this.handlers,function(r){r!==null&&e(r)})}}const WB={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},QY=typeof URLSearchParams<"u"?URLSearchParams:iP,JY=typeof FormData<"u"?FormData:null,eq=typeof Blob<"u"?Blob:null,tq={isBrowser:!0,classes:{URLSearchParams:QY,FormData:JY,Blob:eq},protocols:["http","https","file","blob","url","data"]},aP=typeof window<"u"&&typeof document<"u",mA=typeof navigator=="object"&&navigator||void 0,nq=aP&&(!mA||["ReactNative","NativeScript","NS"].indexOf(mA.product)<0),rq=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",iq=aP&&window.location.href||"http://localhost",aq=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:aP,hasStandardBrowserEnv:nq,hasStandardBrowserWebWorkerEnv:rq,navigator:mA,origin:iq},Symbol.toStringTag,{value:"Module"})),Za={...aq,...tq};function sq(t,e){return DS(t,new Za.classes.URLSearchParams,{visitor:function(n,r,i,a){return Za.isNode&&Xe.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function oq(t){return Xe.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function lq(t){const e={},n=Object.keys(t);let r;const i=n.length;let a;for(r=0;r<i;r++)a=n[r],e[a]=t[a];return e}function GB(t){function e(n,r,i,a){let s=n[a++];if(s==="__proto__")return!0;const o=Number.isFinite(+s),l=a>=n.length;return s=!s&&Xe.isArray(i)?i.length:s,l?(Xe.hasOwnProp(i,s)?i[s]=[i[s],r]:i[s]=r,!o):((!i[s]||!Xe.isObject(i[s]))&&(i[s]=[]),e(n,r,i[s],a)&&Xe.isArray(i[s])&&(i[s]=lq(i[s])),!o)}if(Xe.isFormData(t)&&Xe.isFunction(t.entries)){const n={};return Xe.forEachEntry(t,(r,i)=>{e(oq(r),i,n,0)}),n}return null}function cq(t,e,n){if(Xe.isString(t))try{return(e||JSON.parse)(t),Xe.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Ky={transitional:WB,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,a=Xe.isObject(e);if(a&&Xe.isHTMLForm(e)&&(e=new FormData(e)),Xe.isFormData(e))return i?JSON.stringify(GB(e)):e;if(Xe.isArrayBuffer(e)||Xe.isBuffer(e)||Xe.isStream(e)||Xe.isFile(e)||Xe.isBlob(e)||Xe.isReadableStream(e))return e;if(Xe.isArrayBufferView(e))return e.buffer;if(Xe.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return sq(e,this.formSerializer).toString();if((o=Xe.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return DS(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return a||i?(n.setContentType("application/json",!1),cq(e)):e}],transformResponse:[function(e){const n=this.transitional||Ky.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Xe.isResponse(e)||Xe.isReadableStream(e))return e;if(e&&Xe.isString(e)&&(r&&!this.responseType||i)){const s=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(o){if(s)throw o.name==="SyntaxError"?wn.from(o,wn.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Za.classes.FormData,Blob:Za.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Xe.forEach(["delete","get","head","post","put","patch"],t=>{Ky.headers[t]={}});const uq=Xe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dq=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(s){i=s.indexOf(":"),n=s.substring(0,i).trim().toLowerCase(),r=s.substring(i+1).trim(),!(!n||e[n]&&uq[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},uj=Symbol("internals");function i0(t){return t&&String(t).trim().toLowerCase()}function sw(t){return t===!1||t==null?t:Xe.isArray(t)?t.map(sw):String(t)}function fq(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const hq=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function XE(t,e,n,r,i){if(Xe.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Xe.isString(e)){if(Xe.isString(r))return e.indexOf(r)!==-1;if(Xe.isRegExp(r))return r.test(e)}}function pq(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function mq(t,e){const n=Xe.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,a,s){return this[r].call(this,e,i,a,s)},configurable:!0})})}let Qs=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function a(o,l,u){const d=i0(l);if(!d)throw new Error("header name must be a non-empty string");const f=Xe.findKey(i,d);(!f||i[f]===void 0||u===!0||u===void 0&&i[f]!==!1)&&(i[f||l]=sw(o))}const s=(o,l)=>Xe.forEach(o,(u,d)=>a(u,d,l));if(Xe.isPlainObject(e)||e instanceof this.constructor)s(e,n);else if(Xe.isString(e)&&(e=e.trim())&&!hq(e))s(dq(e),n);else if(Xe.isObject(e)&&Xe.isIterable(e)){let o={},l,u;for(const d of e){if(!Xe.isArray(d))throw TypeError("Object iterator must return a key-value pair");o[u=d[0]]=(l=o[u])?Xe.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}s(o,n)}else e!=null&&a(n,e,r);return this}get(e,n){if(e=i0(e),e){const r=Xe.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return fq(i);if(Xe.isFunction(n))return n.call(this,i,r);if(Xe.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=i0(e),e){const r=Xe.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||XE(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function a(s){if(s=i0(s),s){const o=Xe.findKey(r,s);o&&(!n||XE(r,r[o],o,n))&&(delete r[o],i=!0)}}return Xe.isArray(e)?e.forEach(a):a(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const a=n[r];(!e||XE(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){const n=this,r={};return Xe.forEach(this,(i,a)=>{const s=Xe.findKey(r,a);if(s){n[s]=sw(i),delete n[a];return}const o=e?pq(a):String(a).trim();o!==a&&delete n[a],n[o]=sw(i),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Xe.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Xe.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[uj]=this[uj]={accessors:{}}).accessors,i=this.prototype;function a(s){const o=i0(s);r[o]||(mq(i,s),r[o]=!0)}return Xe.isArray(e)?e.forEach(a):a(e),this}};Qs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Xe.reduceDescriptors(Qs.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Xe.freezeMethods(Qs);function KE(t,e){const n=this||Ky,r=e||n,i=Qs.from(r.headers);let a=r.data;return Xe.forEach(t,function(o){a=o.call(n,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function $B(t){return!!(t&&t.__CANCEL__)}function Gg(t,e,n){wn.call(this,t??"canceled",wn.ERR_CANCELED,e,n),this.name="CanceledError"}Xe.inherits(Gg,wn,{__CANCEL__:!0});function YB(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new wn("Request failed with status code "+n.status,[wn.ERR_BAD_REQUEST,wn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function gq(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function vq(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,a=0,s;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),d=r[a];s||(s=u),n[i]=l,r[i]=u;let f=a,p=0;for(;f!==i;)p+=n[f++],f=f%t;if(i=(i+1)%t,i===a&&(a=(a+1)%t),u-s<e)return;const m=d&&u-d;return m?Math.round(p*1e3/m):void 0}}function yq(t,e){let n=0,r=1e3/e,i,a;const s=(u,d=Date.now())=>{n=d,i=null,a&&(clearTimeout(a),a=null),t(...u)};return[(...u)=>{const d=Date.now(),f=d-n;f>=r?s(u,d):(i=u,a||(a=setTimeout(()=>{a=null,s(i)},r-f)))},()=>i&&s(i)]}const Aw=(t,e,n=3)=>{let r=0;const i=vq(50,250);return yq(a=>{const s=a.loaded,o=a.lengthComputable?a.total:void 0,l=s-r,u=i(l),d=s<=o;r=s;const f={loaded:s,total:o,progress:o?s/o:void 0,bytes:l,rate:u||void 0,estimated:u&&o&&d?(o-s)/u:void 0,event:a,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(f)},n)},dj=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},fj=t=>(...e)=>Xe.asap(()=>t(...e)),xq=Za.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Za.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Za.origin),Za.navigator&&/(msie|trident)/i.test(Za.navigator.userAgent)):()=>!0,bq=Za.hasStandardBrowserEnv?{write(t,e,n,r,i,a,s){if(typeof document>"u")return;const o=[`${t}=${encodeURIComponent(e)}`];Xe.isNumber(n)&&o.push(`expires=${new Date(n).toUTCString()}`),Xe.isString(r)&&o.push(`path=${r}`),Xe.isString(i)&&o.push(`domain=${i}`),a===!0&&o.push("secure"),Xe.isString(s)&&o.push(`SameSite=${s}`),document.cookie=o.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function _q(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function wq(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function qB(t,e,n){let r=!_q(e);return t&&(r||n==!1)?wq(t,e):e}const hj=t=>t instanceof Qs?{...t}:t;function up(t,e){e=e||{};const n={};function r(u,d,f,p){return Xe.isPlainObject(u)&&Xe.isPlainObject(d)?Xe.merge.call({caseless:p},u,d):Xe.isPlainObject(d)?Xe.merge({},d):Xe.isArray(d)?d.slice():d}function i(u,d,f,p){if(Xe.isUndefined(d)){if(!Xe.isUndefined(u))return r(void 0,u,f,p)}else return r(u,d,f,p)}function a(u,d){if(!Xe.isUndefined(d))return r(void 0,d)}function s(u,d){if(Xe.isUndefined(d)){if(!Xe.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function o(u,d,f){if(f in e)return r(u,d);if(f in t)return r(void 0,u)}const l={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(u,d,f)=>i(hj(u),hj(d),f,!0)};return Xe.forEach(Object.keys({...t,...e}),function(d){const f=l[d]||i,p=f(t[d],e[d],d);Xe.isUndefined(p)&&f!==o||(n[d]=p)}),n}const XB=t=>{const e=up({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:o}=e;if(e.headers=s=Qs.from(s),e.url=VB(qB(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&s.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),Xe.isFormData(n)){if(Za.hasStandardBrowserEnv||Za.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(Xe.isFunction(n.getHeaders)){const l=n.getHeaders(),u=["content-type","content-length"];Object.entries(l).forEach(([d,f])=>{u.includes(d.toLowerCase())&&s.set(d,f)})}}if(Za.hasStandardBrowserEnv&&(r&&Xe.isFunction(r)&&(r=r(e)),r||r!==!1&&xq(e.url))){const l=i&&a&&bq.read(a);l&&s.set(i,l)}return e},Sq=typeof XMLHttpRequest<"u",Eq=Sq&&function(t){return new Promise(function(n,r){const i=XB(t);let a=i.data;const s=Qs.from(i.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:u}=i,d,f,p,m,y;function _(){m&&m(),y&&y(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function w(){if(!v)return;const C=Qs.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),P={data:!o||o==="text"||o==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:C,config:t,request:v};YB(function(k){n(k),_()},function(k){r(k),_()},P),v=null}"onloadend"in v?v.onloadend=w:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(w)},v.onabort=function(){v&&(r(new wn("Request aborted",wn.ECONNABORTED,t,v)),v=null)},v.onerror=function(N){const P=N&&N.message?N.message:"Network Error",R=new wn(P,wn.ERR_NETWORK,t,v);R.event=N||null,r(R),v=null},v.ontimeout=function(){let N=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const P=i.transitional||WB;i.timeoutErrorMessage&&(N=i.timeoutErrorMessage),r(new wn(N,P.clarifyTimeoutError?wn.ETIMEDOUT:wn.ECONNABORTED,t,v)),v=null},a===void 0&&s.setContentType(null),"setRequestHeader"in v&&Xe.forEach(s.toJSON(),function(N,P){v.setRequestHeader(P,N)}),Xe.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),o&&o!=="json"&&(v.responseType=i.responseType),u&&([p,y]=Aw(u,!0),v.addEventListener("progress",p)),l&&v.upload&&([f,m]=Aw(l),v.upload.addEventListener("progress",f),v.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(d=C=>{v&&(r(!C||C.type?new Gg(null,t,v):C),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const M=gq(i.url);if(M&&Za.protocols.indexOf(M)===-1){r(new wn("Unsupported protocol "+M+":",wn.ERR_BAD_REQUEST,t));return}v.send(a||null)})},Mq=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const a=function(u){if(!i){i=!0,o();const d=u instanceof Error?u:this.reason;r.abort(d instanceof wn?d:new Gg(d instanceof Error?d.message:d))}};let s=e&&setTimeout(()=>{s=null,a(new wn(`timeout ${e} of ms exceeded`,wn.ETIMEDOUT))},e);const o=()=>{t&&(s&&clearTimeout(s),s=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(a):u.removeEventListener("abort",a)}),t=null)};t.forEach(u=>u.addEventListener("abort",a));const{signal:l}=r;return l.unsubscribe=()=>Xe.asap(o),l}},Cq=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},Nq=async function*(t,e){for await(const n of Aq(t))yield*Cq(n,e)},Aq=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},pj=(t,e,n,r)=>{const i=Nq(t,e);let a=0,s,o=l=>{s||(s=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:u,value:d}=await i.next();if(u){o(),l.close();return}let f=d.byteLength;if(n){let p=a+=f;n(p)}l.enqueue(new Uint8Array(d))}catch(u){throw o(u),u}},cancel(l){return o(l),i.return()}},{highWaterMark:2})},mj=64*1024,{isFunction:Nb}=Xe,Tq=(({Request:t,Response:e})=>({Request:t,Response:e}))(Xe.global),{ReadableStream:gj,TextEncoder:vj}=Xe.global,yj=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Pq=t=>{t=Xe.merge.call({skipUndefined:!0},Tq,t);const{fetch:e,Request:n,Response:r}=t,i=e?Nb(e):typeof fetch=="function",a=Nb(n),s=Nb(r);if(!i)return!1;const o=i&&Nb(gj),l=i&&(typeof vj=="function"?(y=>_=>y.encode(_))(new vj):async y=>new Uint8Array(await new n(y).arrayBuffer())),u=a&&o&&yj(()=>{let y=!1;const _=new n(Za.origin,{body:new gj,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!_}),d=s&&o&&yj(()=>Xe.isReadableStream(new r("").body)),f={stream:d&&(y=>y.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!f[y]&&(f[y]=(_,v)=>{let w=_&&_[y];if(w)return w.call(_);throw new wn(`Response type '${y}' is not supported`,wn.ERR_NOT_SUPPORT,v)})});const p=async y=>{if(y==null)return 0;if(Xe.isBlob(y))return y.size;if(Xe.isSpecCompliantForm(y))return(await new n(Za.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(Xe.isArrayBufferView(y)||Xe.isArrayBuffer(y))return y.byteLength;if(Xe.isURLSearchParams(y)&&(y=y+""),Xe.isString(y))return(await l(y)).byteLength},m=async(y,_)=>{const v=Xe.toFiniteNumber(y.getContentLength());return v??p(_)};return async y=>{let{url:_,method:v,data:w,signal:M,cancelToken:C,timeout:N,onDownloadProgress:P,onUploadProgress:R,responseType:k,headers:U,withCredentials:I="same-origin",fetchOptions:L}=XB(y),z=e||fetch;k=k?(k+"").toLowerCase():"text";let O=Mq([M,C&&C.toAbortSignal()],N),q=null;const Y=O&&O.unsubscribe&&(()=>{O.unsubscribe()});let X;try{if(R&&u&&v!=="get"&&v!=="head"&&(X=await m(U,w))!==0){let j=new n(_,{method:"POST",body:w,duplex:"half"}),B;if(Xe.isFormData(w)&&(B=j.headers.get("content-type"))&&U.setContentType(B),j.body){const[ae,re]=dj(X,Aw(fj(R)));w=pj(j.body,mj,ae,re)}}Xe.isString(I)||(I=I?"include":"omit");const ee=a&&"credentials"in n.prototype,se={...L,signal:O,method:v.toUpperCase(),headers:U.normalize().toJSON(),body:w,duplex:"half",credentials:ee?I:void 0};q=a&&new n(_,se);let W=await(a?z(q,L):z(_,se));const $=d&&(k==="stream"||k==="response");if(d&&(P||$&&Y)){const j={};["status","statusText","headers"].forEach(de=>{j[de]=W[de]});const B=Xe.toFiniteNumber(W.headers.get("content-length")),[ae,re]=P&&dj(B,Aw(fj(P),!0))||[];W=new r(pj(W.body,mj,ae,()=>{re&&re(),Y&&Y()}),j)}k=k||"text";let G=await f[Xe.findKey(f,k)||"text"](W,y);return!$&&Y&&Y(),await new Promise((j,B)=>{YB(j,B,{data:G,headers:Qs.from(W.headers),status:W.status,statusText:W.statusText,config:y,request:q})})}catch(ee){throw Y&&Y(),ee&&ee.name==="TypeError"&&/Load failed|fetch/i.test(ee.message)?Object.assign(new wn("Network Error",wn.ERR_NETWORK,y,q),{cause:ee.cause||ee}):wn.from(ee,ee&&ee.code,y,q)}}},Rq=new Map,KB=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:i}=e,a=[r,i,n];let s=a.length,o=s,l,u,d=Rq;for(;o--;)l=a[o],u=d.get(l),u===void 0&&d.set(l,u=o?new Map:Pq(e)),d=u;return u};KB();const sP={http:qY,xhr:Eq,fetch:{get:KB}};Xe.forEach(sP,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const xj=t=>`- ${t}`,Dq=t=>Xe.isFunction(t)||t===null||t===!1;function kq(t,e){t=Xe.isArray(t)?t:[t];const{length:n}=t;let r,i;const a={};for(let s=0;s<n;s++){r=t[s];let o;if(i=r,!Dq(r)&&(i=sP[(o=String(r)).toLowerCase()],i===void 0))throw new wn(`Unknown adapter '${o}'`);if(i&&(Xe.isFunction(i)||(i=i.get(e))))break;a[o||"#"+s]=i}if(!i){const s=Object.entries(a).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=n?s.length>1?`since :
`+s.map(xj).join(`
`):" "+xj(s[0]):"as no adapter specified";throw new wn("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i}const ZB={getAdapter:kq,adapters:sP};function ZE(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Gg(null,t)}function bj(t){return ZE(t),t.headers=Qs.from(t.headers),t.data=KE.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ZB.getAdapter(t.adapter||Ky.adapter,t)(t).then(function(r){return ZE(t),r.data=KE.call(t,t.transformResponse,r),r.headers=Qs.from(r.headers),r},function(r){return $B(r)||(ZE(t),r&&r.response&&(r.response.data=KE.call(t,t.transformResponse,r.response),r.response.headers=Qs.from(r.response.headers))),Promise.reject(r)})}const QB="1.13.2",kS={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{kS[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const _j={};kS.transitional=function(e,n,r){function i(a,s){return"[Axios v"+QB+"] Transitional option '"+a+"'"+s+(r?". "+r:"")}return(a,s,o)=>{if(e===!1)throw new wn(i(s," has been removed"+(n?" in "+n:"")),wn.ERR_DEPRECATED);return n&&!_j[s]&&(_j[s]=!0,console.warn(i(s," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(a,s,o):!0}};kS.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function jq(t,e,n){if(typeof t!="object")throw new wn("options must be an object",wn.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const a=r[i],s=e[a];if(s){const o=t[a],l=o===void 0||s(o,a,t);if(l!==!0)throw new wn("option "+a+" must be "+l,wn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new wn("Unknown option "+a,wn.ERR_BAD_OPTION)}}const ow={assertOptions:jq,validators:kS},_c=ow.validators;let Kh=class{constructor(e){this.defaults=e||{},this.interceptors={request:new cj,response:new cj}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=up(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:a}=n;r!==void 0&&ow.assertOptions(r,{silentJSONParsing:_c.transitional(_c.boolean),forcedJSONParsing:_c.transitional(_c.boolean),clarifyTimeoutError:_c.transitional(_c.boolean)},!1),i!=null&&(Xe.isFunction(i)?n.paramsSerializer={serialize:i}:ow.assertOptions(i,{encode:_c.function,serialize:_c.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ow.assertOptions(n,{baseUrl:_c.spelling("baseURL"),withXsrfToken:_c.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=a&&Xe.merge(a.common,a[n.method]);a&&Xe.forEach(["delete","get","head","post","put","patch","common"],y=>{delete a[y]}),n.headers=Qs.concat(s,a);const o=[];let l=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(n)===!1||(l=l&&_.synchronous,o.unshift(_.fulfilled,_.rejected))});const u=[];this.interceptors.response.forEach(function(_){u.push(_.fulfilled,_.rejected)});let d,f=0,p;if(!l){const y=[bj.bind(this),void 0];for(y.unshift(...o),y.push(...u),p=y.length,d=Promise.resolve(n);f<p;)d=d.then(y[f++],y[f++]);return d}p=o.length;let m=n;for(;f<p;){const y=o[f++],_=o[f++];try{m=y(m)}catch(v){_.call(this,v);break}}try{d=bj.call(this,m)}catch(y){return Promise.reject(y)}for(f=0,p=u.length;f<p;)d=d.then(u[f++],u[f++]);return d}getUri(e){e=up(this.defaults,e);const n=qB(e.baseURL,e.url,e.allowAbsoluteUrls);return VB(n,e.params,e.paramsSerializer)}};Xe.forEach(["delete","get","head","options"],function(e){Kh.prototype[e]=function(n,r){return this.request(up(r||{},{method:e,url:n,data:(r||{}).data}))}});Xe.forEach(["post","put","patch"],function(e){function n(r){return function(a,s,o){return this.request(up(o||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}Kh.prototype[e]=n(),Kh.prototype[e+"Form"]=n(!0)});let Oq=class JB{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(i=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](i);r._listeners=null}),this.promise.then=i=>{let a;const s=new Promise(o=>{r.subscribe(o),a=o}).then(i);return s.cancel=function(){r.unsubscribe(a)},s},e(function(a,s,o){r.reason||(r.reason=new Gg(a,s,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new JB(function(i){e=i}),cancel:e}}};function Iq(t){return function(n){return t.apply(null,n)}}function Lq(t){return Xe.isObject(t)&&t.isAxiosError===!0}const gA={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(gA).forEach(([t,e])=>{gA[e]=t});function ez(t){const e=new Kh(t),n=RB(Kh.prototype.request,e);return Xe.extend(n,Kh.prototype,e,{allOwnKeys:!0}),Xe.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return ez(up(t,i))},n}const qe=ez(Ky);qe.Axios=Kh;qe.CanceledError=Gg;qe.CancelToken=Oq;qe.isCancel=$B;qe.VERSION=QB;qe.toFormData=DS;qe.AxiosError=wn;qe.Cancel=qe.CanceledError;qe.all=function(e){return Promise.all(e)};qe.spread=Iq;qe.isAxiosError=Lq;qe.mergeConfig=up;qe.AxiosHeaders=Qs;qe.formToJSON=t=>GB(Xe.isHTMLForm(t)?new FormData(t):t);qe.getAdapter=ZB.getAdapter;qe.HttpStatusCode=gA;qe.default=qe;const{Axios:oDe,AxiosError:lDe,CanceledError:cDe,isCancel:uDe,CancelToken:dDe,VERSION:fDe,all:hDe,Cancel:pDe,isAxiosError:mDe,spread:gDe,toFormData:vDe,AxiosHeaders:yDe,HttpStatusCode:xDe,formToJSON:bDe,getAdapter:_De,mergeConfig:wDe}=qe;var Ab={},QE={exports:{}},Fs={},JE={exports:{}},eM={};var wj;function Fq(){return wj||(wj=1,(function(t){function e(W,$){var G=W.length;W.push($);e:for(;0<G;){var j=G-1>>>1,B=W[j];if(0<i(B,$))W[j]=$,W[G]=B,G=j;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var $=W[0],G=W.pop();if(G!==$){W[0]=G;e:for(var j=0,B=W.length,ae=B>>>1;j<ae;){var re=2*(j+1)-1,de=W[re],ce=re+1,ie=W[ce];if(0>i(de,G))ce<B&&0>i(ie,de)?(W[j]=ie,W[ce]=G,j=ce):(W[j]=de,W[re]=G,j=re);else if(ce<B&&0>i(ie,G))W[j]=ie,W[ce]=G,j=ce;else break e}}return $}function i(W,$){var G=W.sortIndex-$.sortIndex;return G!==0?G:W.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],u=[],d=1,f=null,p=3,m=!1,y=!1,_=!1,v=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(W){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=W)r(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(u)}}function N(W){if(_=!1,C(W),!y)if(n(l)!==null)y=!0,ee(P);else{var $=n(u);$!==null&&se(N,$.startTime-W)}}function P(W,$){y=!1,_&&(_=!1,w(U),U=-1),m=!0;var G=p;try{for(C($),f=n(l);f!==null&&(!(f.expirationTime>$)||W&&!z());){var j=f.callback;if(typeof j=="function"){f.callback=null,p=f.priorityLevel;var B=j(f.expirationTime<=$);$=t.unstable_now(),typeof B=="function"?f.callback=B:f===n(l)&&r(l),C($)}else r(l);f=n(l)}if(f!==null)var ae=!0;else{var re=n(u);re!==null&&se(N,re.startTime-$),ae=!1}return ae}finally{f=null,p=G,m=!1}}var R=!1,k=null,U=-1,I=5,L=-1;function z(){return!(t.unstable_now()-L<I)}function O(){if(k!==null){var W=t.unstable_now();L=W;var $=!0;try{$=k(!0,W)}finally{$?q():(R=!1,k=null)}}else R=!1}var q;if(typeof M=="function")q=function(){M(O)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,X=Y.port2;Y.port1.onmessage=O,q=function(){X.postMessage(null)}}else q=function(){v(O,0)};function ee(W){k=W,R||(R=!0,q())}function se(W,$){U=v(function(){W(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,ee(P))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var G=p;p=$;try{return W()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,$){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var G=p;p=W;try{return $()}finally{p=G}},t.unstable_scheduleCallback=function(W,$,G){var j=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?j+G:j):G=j,W){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=G+B,W={id:d++,callback:$,priorityLevel:W,startTime:G,expirationTime:B,sortIndex:-1},G>j?(W.sortIndex=G,e(u,W),n(l)===null&&W===n(u)&&(_?(w(U),U=-1):_=!0,se(N,G-j))):(W.sortIndex=B,e(l,W),y||m||(y=!0,ee(P))),W},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(W){var $=p;return function(){var G=p;p=$;try{return W.apply(this,arguments)}finally{p=G}}}})(eM)),eM}var Sj;function Uq(){return Sj||(Sj=1,JE.exports=Fq()),JE.exports}var Ej;function Bq(){if(Ej)return Fs;Ej=1;var t=Ap(),e=Uq();function n(h){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+h,S=1;S<arguments.length;S++)g+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(h,g){s(h,g),s(h+"Capture",g)}function s(h,g){for(i[h]=g,h=0;h<g.length;h++)r.add(g[h])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function p(h){return l.call(f,h)?!0:l.call(d,h)?!1:u.test(h)?f[h]=!0:(d[h]=!0,!1)}function m(h,g,S,T){if(S!==null&&S.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return T?!1:S!==null?!S.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function y(h,g,S,T){if(g===null||typeof g>"u"||m(h,g,S,T))return!0;if(T)return!1;if(S!==null)switch(S.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function _(h,g,S,T,F,V,ne){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=T,this.attributeNamespace=F,this.mustUseProperty=S,this.propertyName=h,this.type=g,this.sanitizeURL=V,this.removeEmptyString=ne}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){v[h]=new _(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var g=h[0];v[g]=new _(g,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){v[h]=new _(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){v[h]=new _(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){v[h]=new _(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){v[h]=new _(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){v[h]=new _(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){v[h]=new _(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){v[h]=new _(h,5,!1,h.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function M(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var g=h.replace(w,M);v[g]=new _(g,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var g=h.replace(w,M);v[g]=new _(g,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var g=h.replace(w,M);v[g]=new _(g,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){v[h]=new _(h,1,!1,h.toLowerCase(),null,!1,!1)}),v.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){v[h]=new _(h,1,!1,h.toLowerCase(),null,!0,!0)});function C(h,g,S,T){var F=v.hasOwnProperty(g)?v[g]:null;(F!==null?F.type!==0:T||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(y(g,S,F,T)&&(S=null),T||F===null?p(g)&&(S===null?h.removeAttribute(g):h.setAttribute(g,""+S)):F.mustUseProperty?h[F.propertyName]=S===null?F.type===3?!1:"":S:(g=F.attributeName,T=F.attributeNamespace,S===null?h.removeAttribute(g):(F=F.type,S=F===3||F===4&&S===!0?"":""+S,T?h.setAttributeNS(T,g,S):h.setAttribute(g,S))))}var N=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),R=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),z=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),W=Symbol.iterator;function $(h){return h===null||typeof h!="object"?null:(h=W&&h[W]||h["@@iterator"],typeof h=="function"?h:null)}var G=Object.assign,j;function B(h){if(j===void 0)try{throw Error()}catch(S){var g=S.stack.trim().match(/\n( *(at )?)/);j=g&&g[1]||""}return`
`+j+h}var ae=!1;function re(h,g){if(!h||ae)return"";ae=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(Ye){var T=Ye}Reflect.construct(h,[],g)}else{try{g.call()}catch(Ye){T=Ye}h.call(g.prototype)}else{try{throw Error()}catch(Ye){T=Ye}h()}}catch(Ye){if(Ye&&T&&typeof Ye.stack=="string"){for(var F=Ye.stack.split(`
`),V=T.stack.split(`
`),ne=F.length-1,ve=V.length-1;1<=ne&&0<=ve&&F[ne]!==V[ve];)ve--;for(;1<=ne&&0<=ve;ne--,ve--)if(F[ne]!==V[ve]){if(ne!==1||ve!==1)do if(ne--,ve--,0>ve||F[ne]!==V[ve]){var _e=`
`+F[ne].replace(" at new "," at ");return h.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",h.displayName)),_e}while(1<=ne&&0<=ve);break}}}finally{ae=!1,Error.prepareStackTrace=S}return(h=h?h.displayName||h.name:"")?B(h):""}function de(h){switch(h.tag){case 5:return B(h.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return h=re(h.type,!1),h;case 11:return h=re(h.type.render,!1),h;case 1:return h=re(h.type,!0),h;default:return""}}function ce(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case k:return"Fragment";case R:return"Portal";case I:return"Profiler";case U:return"StrictMode";case q:return"Suspense";case Y:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case z:return(h.displayName||"Context")+".Consumer";case L:return(h._context.displayName||"Context")+".Provider";case O:var g=h.render;return h=h.displayName,h||(h=g.displayName||g.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case X:return g=h.displayName||null,g!==null?g:ce(h.type)||"Memo";case ee:g=h._payload,h=h._init;try{return ce(h(g))}catch{}}return null}function ie(h){var g=h.type;switch(h.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=g.render,h=h.displayName||h.name||"",g.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(g);case 8:return g===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function le(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function fe(h){var g=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Ne(h){var g=fe(h)?"checked":"value",S=Object.getOwnPropertyDescriptor(h.constructor.prototype,g),T=""+h[g];if(!h.hasOwnProperty(g)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var F=S.get,V=S.set;return Object.defineProperty(h,g,{configurable:!0,get:function(){return F.call(this)},set:function(ne){T=""+ne,V.call(this,ne)}}),Object.defineProperty(h,g,{enumerable:S.enumerable}),{getValue:function(){return T},setValue:function(ne){T=""+ne},stopTracking:function(){h._valueTracker=null,delete h[g]}}}}function Se(h){h._valueTracker||(h._valueTracker=Ne(h))}function Z(h){if(!h)return!1;var g=h._valueTracker;if(!g)return!0;var S=g.getValue(),T="";return h&&(T=fe(h)?h.checked?"true":"false":h.value),h=T,h!==S?(g.setValue(h),!0):!1}function xe(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function oe(h,g){var S=g.checked;return G({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:S??h._wrapperState.initialChecked})}function tt(h,g){var S=g.defaultValue==null?"":g.defaultValue,T=g.checked!=null?g.checked:g.defaultChecked;S=le(g.value!=null?g.value:S),h._wrapperState={initialChecked:T,initialValue:S,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function ke(h,g){g=g.checked,g!=null&&C(h,"checked",g,!1)}function st(h,g){ke(h,g);var S=le(g.value),T=g.type;if(S!=null)T==="number"?(S===0&&h.value===""||h.value!=S)&&(h.value=""+S):h.value!==""+S&&(h.value=""+S);else if(T==="submit"||T==="reset"){h.removeAttribute("value");return}g.hasOwnProperty("value")?ct(h,g.type,S):g.hasOwnProperty("defaultValue")&&ct(h,g.type,le(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(h.defaultChecked=!!g.defaultChecked)}function Ce(h,g,S){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var T=g.type;if(!(T!=="submit"&&T!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+h._wrapperState.initialValue,S||g===h.value||(h.value=g),h.defaultValue=g}S=h.name,S!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,S!==""&&(h.name=S)}function ct(h,g,S){(g!=="number"||xe(h.ownerDocument)!==h)&&(S==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+S&&(h.defaultValue=""+S))}var $e=Array.isArray;function J(h,g,S,T){if(h=h.options,g){g={};for(var F=0;F<S.length;F++)g["$"+S[F]]=!0;for(S=0;S<h.length;S++)F=g.hasOwnProperty("$"+h[S].value),h[S].selected!==F&&(h[S].selected=F),F&&T&&(h[S].defaultSelected=!0)}else{for(S=""+le(S),g=null,F=0;F<h.length;F++){if(h[F].value===S){h[F].selected=!0,T&&(h[F].defaultSelected=!0);return}g!==null||h[F].disabled||(g=h[F])}g!==null&&(g.selected=!0)}}function Q(h,g){if(g.dangerouslySetInnerHTML!=null)throw Error(n(91));return G({},g,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function ye(h,g){var S=g.value;if(S==null){if(S=g.children,g=g.defaultValue,S!=null){if(g!=null)throw Error(n(92));if($e(S)){if(1<S.length)throw Error(n(93));S=S[0]}g=S}g==null&&(g=""),S=g}h._wrapperState={initialValue:le(S)}}function we(h,g){var S=le(g.value),T=le(g.defaultValue);S!=null&&(S=""+S,S!==h.value&&(h.value=S),g.defaultValue==null&&h.defaultValue!==S&&(h.defaultValue=S)),T!=null&&(h.defaultValue=""+T)}function De(h){var g=h.textContent;g===h._wrapperState.initialValue&&g!==""&&g!==null&&(h.value=g)}function Ue(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function it(h,g){return h==null||h==="http://www.w3.org/1999/xhtml"?Ue(g):h==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var nt,ot=(function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,S,T,F){MSApp.execUnsafeLocalFunction(function(){return h(g,S,T,F)})}:h})(function(h,g){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=g;else{for(nt=nt||document.createElement("div"),nt.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=nt.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;g.firstChild;)h.appendChild(g.firstChild)}});function xt(h,g){if(g){var S=h.firstChild;if(S&&S===h.lastChild&&S.nodeType===3){S.nodeValue=g;return}}h.textContent=g}var rt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];Object.keys(rt).forEach(function(h){be.forEach(function(g){g=g+h.charAt(0).toUpperCase()+h.substring(1),rt[g]=rt[h]})});function Je(h,g,S){return g==null||typeof g=="boolean"||g===""?"":S||typeof g!="number"||g===0||rt.hasOwnProperty(h)&&rt[h]?(""+g).trim():g+"px"}function Qe(h,g){h=h.style;for(var S in g)if(g.hasOwnProperty(S)){var T=S.indexOf("--")===0,F=Je(S,g[S],T);S==="float"&&(S="cssFloat"),T?h.setProperty(S,F):h[S]=F}}var Oe=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pe(h,g){if(g){if(Oe[h]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(n(137,h));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(n(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(n(61))}if(g.style!=null&&typeof g.style!="object")throw Error(n(62))}}function je(h,g){if(h.indexOf("-")===-1)return typeof g.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ut=null;function ge(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var Be=null,Pe=null,Ke=null;function te(h){if(h=yl(h)){if(typeof Be!="function")throw Error(n(280));var g=h.stateNode;g&&(g=cm(g),Be(h.stateNode,h.type,g))}}function Le(h){Pe?Ke?Ke.push(h):Ke=[h]:Pe=h}function dt(){if(Pe){var h=Pe,g=Ke;if(Ke=Pe=null,te(h),g)for(h=0;h<g.length;h++)te(g[h])}}function kt(h,g){return h(g)}function Mt(){}var Pt=!1;function mn(h,g,S){if(Pt)return h(g,S);Pt=!0;try{return kt(h,g,S)}finally{Pt=!1,(Pe!==null||Ke!==null)&&(Mt(),dt())}}function Mn(h,g){var S=h.stateNode;if(S===null)return null;var T=cm(S);if(T===null)return null;S=T[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(T=!T.disabled)||(h=h.type,T=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!T;break e;default:h=!1}if(h)return null;if(S&&typeof S!="function")throw Error(n(231,g,typeof S));return S}var ar=!1;if(o)try{var Wr={};Object.defineProperty(Wr,"passive",{get:function(){ar=!0}}),window.addEventListener("test",Wr,Wr),window.removeEventListener("test",Wr,Wr)}catch{ar=!1}function ii(h,g,S,T,F,V,ne,ve,_e){var Ye=Array.prototype.slice.call(arguments,3);try{g.apply(S,Ye)}catch(pt){this.onError(pt)}}var Or=!1,Qi=null,ai=!1,yi=null,Gr={onError:function(h){Or=!0,Qi=h}};function ja(h,g,S,T,F,V,ne,ve,_e){Or=!1,Qi=null,ii.apply(Gr,arguments)}function Qc(h,g,S,T,F,V,ne,ve,_e){if(ja.apply(this,arguments),Or){if(Or){var Ye=Qi;Or=!1,Qi=null}else throw Error(n(198));ai||(ai=!0,yi=Ye)}}function Oa(h){var g=h,S=h;if(h.alternate)for(;g.return;)g=g.return;else{h=g;do g=h,(g.flags&4098)!==0&&(S=g.return),h=g.return;while(h)}return g.tag===3?S:null}function Ed(h){if(h.tag===13){var g=h.memoizedState;if(g===null&&(h=h.alternate,h!==null&&(g=h.memoizedState)),g!==null)return g.dehydrated}return null}function Jc(h){if(Oa(h)!==h)throw Error(n(188))}function sl(h){var g=h.alternate;if(!g){if(g=Oa(h),g===null)throw Error(n(188));return g!==h?null:h}for(var S=h,T=g;;){var F=S.return;if(F===null)break;var V=F.alternate;if(V===null){if(T=F.return,T!==null){S=T;continue}break}if(F.child===V.child){for(V=F.child;V;){if(V===S)return Jc(F),h;if(V===T)return Jc(F),g;V=V.sibling}throw Error(n(188))}if(S.return!==T.return)S=F,T=V;else{for(var ne=!1,ve=F.child;ve;){if(ve===S){ne=!0,S=F,T=V;break}if(ve===T){ne=!0,T=F,S=V;break}ve=ve.sibling}if(!ne){for(ve=V.child;ve;){if(ve===S){ne=!0,S=V,T=F;break}if(ve===T){ne=!0,T=V,S=F;break}ve=ve.sibling}if(!ne)throw Error(n(189))}}if(S.alternate!==T)throw Error(n(190))}if(S.tag!==3)throw Error(n(188));return S.stateNode.current===S?h:g}function ue(h){return h=sl(h),h!==null?Ae(h):null}function Ae(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var g=Ae(h);if(g!==null)return g;h=h.sibling}return null}var We=e.unstable_scheduleCallback,Ve=e.unstable_cancelCallback,Te=e.unstable_shouldYield,gt=e.unstable_requestPaint,He=e.unstable_now,At=e.unstable_getCurrentPriorityLevel,Rt=e.unstable_ImmediatePriority,$t=e.unstable_UserBlockingPriority,Zt=e.unstable_NormalPriority,jt=e.unstable_LowPriority,ln=e.unstable_IdlePriority,fn=null,Ot=null;function cn(h){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(fn,h,void 0,(h.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:gn,_t=Math.log,$n=Math.LN2;function gn(h){return h>>>=0,h===0?32:31-(_t(h)/$n|0)|0}var Zn=64,Yn=4194304;function Hn(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function ha(h,g){var S=h.pendingLanes;if(S===0)return 0;var T=0,F=h.suspendedLanes,V=h.pingedLanes,ne=S&268435455;if(ne!==0){var ve=ne&~F;ve!==0?T=Hn(ve):(V&=ne,V!==0&&(T=Hn(V)))}else ne=S&~F,ne!==0?T=Hn(ne):V!==0&&(T=Hn(V));if(T===0)return 0;if(g!==0&&g!==T&&(g&F)===0&&(F=T&-T,V=g&-g,F>=V||F===16&&(V&4194240)!==0))return g;if((T&4)!==0&&(T|=S&16),g=h.entangledLanes,g!==0)for(h=h.entanglements,g&=T;0<g;)S=31-Yt(g),F=1<<S,T|=h[S],g&=~F;return T}function jn(h,g){switch(h){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function si(h,g){for(var S=h.suspendedLanes,T=h.pingedLanes,F=h.expirationTimes,V=h.pendingLanes;0<V;){var ne=31-Yt(V),ve=1<<ne,_e=F[ne];_e===-1?((ve&S)===0||(ve&T)!==0)&&(F[ne]=jn(ve,g)):_e<=g&&(h.expiredLanes|=ve),V&=~ve}}function Ir(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function Qn(){var h=Zn;return Zn<<=1,(Zn&4194240)===0&&(Zn=64),h}function Oi(h){for(var g=[],S=0;31>S;S++)g.push(h);return g}function $r(h,g,S){h.pendingLanes|=g,g!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,g=31-Yt(g),h[g]=S}function eu(h,g){var S=h.pendingLanes&~g;h.pendingLanes=g,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=g,h.mutableReadLanes&=g,h.entangledLanes&=g,g=h.entanglements;var T=h.eventTimes;for(h=h.expirationTimes;0<S;){var F=31-Yt(S),V=1<<F;g[F]=0,T[F]=-1,h[F]=-1,S&=~V}}function ro(h,g){var S=h.entangledLanes|=g;for(h=h.entanglements;S;){var T=31-Yt(S),F=1<<T;F&g|h[T]&g&&(h[T]|=g),S&=~F}}var Cn=0;function ko(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var rc,Md,Cd,jo,tu,Cs=!1,io=[],Ii=null,sn=null,Ns=null,ns=new Map,Oo=new Map,As=[],Fp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hr(h,g){switch(h){case"focusin":case"focusout":Ii=null;break;case"dragenter":case"dragleave":sn=null;break;case"mouseover":case"mouseout":Ns=null;break;case"pointerover":case"pointerout":ns.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oo.delete(g.pointerId)}}function ao(h,g,S,T,F,V){return h===null||h.nativeEvent!==V?(h={blockedOn:g,domEventName:S,eventSystemFlags:T,nativeEvent:V,targetContainers:[F]},g!==null&&(g=yl(g),g!==null&&Md(g)),h):(h.eventSystemFlags|=T,g=h.targetContainers,F!==null&&g.indexOf(F)===-1&&g.push(F),h)}function Up(h,g,S,T,F){switch(g){case"focusin":return Ii=ao(Ii,h,g,S,T,F),!0;case"dragenter":return sn=ao(sn,h,g,S,T,F),!0;case"mouseover":return Ns=ao(Ns,h,g,S,T,F),!0;case"pointerover":var V=F.pointerId;return ns.set(V,ao(ns.get(V)||null,h,g,S,T,F)),!0;case"gotpointercapture":return V=F.pointerId,Oo.set(V,ao(Oo.get(V)||null,h,g,S,T,F)),!0}return!1}function Ji(h){var g=mc(h.target);if(g!==null){var S=Oa(g);if(S!==null){if(g=S.tag,g===13){if(g=Ed(S),g!==null){h.blockedOn=g,tu(h.priority,function(){Cd(S)});return}}else if(g===3&&S.stateNode.current.memoizedState.isDehydrated){h.blockedOn=S.tag===3?S.stateNode.containerInfo:null;return}}}h.blockedOn=null}function ic(h){if(h.blockedOn!==null)return!1;for(var g=h.targetContainers;0<g.length;){var S=ea(h.domEventName,h.eventSystemFlags,g[0],h.nativeEvent);if(S===null){S=h.nativeEvent;var T=new S.constructor(S.type,S);ut=T,S.target.dispatchEvent(T),ut=null}else return g=yl(S),g!==null&&Md(g),h.blockedOn=S,!1;g.shift()}return!0}function ac(h,g,S){ic(h)&&S.delete(g)}function rs(){Cs=!1,Ii!==null&&ic(Ii)&&(Ii=null),sn!==null&&ic(sn)&&(sn=null),Ns!==null&&ic(Ns)&&(Ns=null),ns.forEach(ac),Oo.forEach(ac)}function ol(h,g){h.blockedOn===g&&(h.blockedOn=null,Cs||(Cs=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,rs)))}function sc(h){function g(F){return ol(F,h)}if(0<io.length){ol(io[0],h);for(var S=1;S<io.length;S++){var T=io[S];T.blockedOn===h&&(T.blockedOn=null)}}for(Ii!==null&&ol(Ii,h),sn!==null&&ol(sn,h),Ns!==null&&ol(Ns,h),ns.forEach(g),Oo.forEach(g),S=0;S<As.length;S++)T=As[S],T.blockedOn===h&&(T.blockedOn=null);for(;0<As.length&&(S=As[0],S.blockedOn===null);)Ji(S),S.blockedOn===null&&As.shift()}var xi=N.ReactCurrentBatchConfig,bi=!0;function Io(h,g,S,T){var F=Cn,V=xi.transition;xi.transition=null;try{Cn=1,nu(h,g,S,T)}finally{Cn=F,xi.transition=V}}function Ts(h,g,S,T){var F=Cn,V=xi.transition;xi.transition=null;try{Cn=4,nu(h,g,S,T)}finally{Cn=F,xi.transition=V}}function nu(h,g,S,T){if(bi){var F=ea(h,g,S,T);if(F===null)rm(h,g,T,oc,S),hr(h,T);else if(Up(F,h,g,S,T))T.stopPropagation();else if(hr(h,T),g&4&&-1<Fp.indexOf(h)){for(;F!==null;){var V=yl(F);if(V!==null&&rc(V),V=ea(h,g,S,T),V===null&&rm(h,g,T,oc,S),V===F)break;F=V}F!==null&&T.stopPropagation()}else rm(h,g,T,null,S)}}var oc=null;function ea(h,g,S,T){if(oc=null,h=ge(T),h=mc(h),h!==null)if(g=Oa(h),g===null)h=null;else if(S=g.tag,S===13){if(h=Ed(g),h!==null)return h;h=null}else if(S===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;h=null}else g!==h&&(h=null);return oc=h,null}function lc(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(At()){case Rt:return 1;case $t:return 4;case Zt:case jt:return 16;case ln:return 536870912;default:return 16}default:return 16}}var Ia=null,ll=null,_i=null;function oi(){if(_i)return _i;var h,g=ll,S=g.length,T,F="value"in Ia?Ia.value:Ia.textContent,V=F.length;for(h=0;h<S&&g[h]===F[h];h++);var ne=S-h;for(T=1;T<=ne&&g[S-T]===F[V-T];T++);return _i=F.slice(h,1<T?1-T:void 0)}function cl(h){var g=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&g===13&&(h=13)):h=g,h===10&&(h=13),32<=h||h===13?h:0}function La(){return!0}function ul(){return!1}function wi(h){function g(S,T,F,V,ne){this._reactName=S,this._targetInst=F,this.type=T,this.nativeEvent=V,this.target=ne,this.currentTarget=null;for(var ve in h)h.hasOwnProperty(ve)&&(S=h[ve],this[ve]=S?S(V):V[ve]);return this.isDefaultPrevented=(V.defaultPrevented!=null?V.defaultPrevented:V.returnValue===!1)?La:ul,this.isPropagationStopped=ul,this}return G(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var S=this.nativeEvent;S&&(S.preventDefault?S.preventDefault():typeof S.returnValue!="unknown"&&(S.returnValue=!1),this.isDefaultPrevented=La)},stopPropagation:function(){var S=this.nativeEvent;S&&(S.stopPropagation?S.stopPropagation():typeof S.cancelBubble!="unknown"&&(S.cancelBubble=!0),this.isPropagationStopped=La)},persist:function(){},isPersistent:La}),g}var dl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yr=wi(dl),li=G({},dl,{view:0,detail:0}),Lr=wi(li),yr,pa,Ps,Nd=G({},li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uc,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==Ps&&(Ps&&h.type==="mousemove"?(yr=h.screenX-Ps.screenX,pa=h.screenY-Ps.screenY):pa=yr=0,Ps=h),yr)},movementY:function(h){return"movementY"in h?h.movementY:pa}}),fv=wi(Nd),fl=G({},Nd,{dataTransfer:0}),cc=wi(fl),Bp=G({},li,{relatedTarget:0}),zp=wi(Bp),Hp=G({},dl,{animationName:0,elapsedTime:0,pseudoElement:0}),Lx=wi(Hp),Fx=G({},dl,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),hv=wi(Fx),Vp=G({},dl,{data:0}),pv=wi(Vp),Ux={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ad(h){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(h):(h=mv[h])?!!g[h]:!1}function uc(){return Ad}var Wp=G({},li,{key:function(h){if(h.key){var g=Ux[h.key]||h.key;if(g!=="Unidentified")return g}return h.type==="keypress"?(h=cl(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?Bx[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uc,charCode:function(h){return h.type==="keypress"?cl(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?cl(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),Gp=wi(Wp),Rs=G({},Nd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),is=wi(Rs),ru=G({},li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uc}),hl=wi(ru),pl=G({},dl,{propertyName:0,elapsedTime:0,pseudoElement:0}),iu=wi(pl),zx=G({},Nd,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),gv=wi(zx),vv=[9,13,27,32],ma=o&&"CompositionEvent"in window,Li=null;o&&"documentMode"in document&&(Li=document.documentMode);var pr=o&&"TextEvent"in window&&!Li,Td=o&&(!ma||Li&&8<Li&&11>=Li),Ds=" ",yv=!1;function xv(h,g){switch(h){case"keyup":return vv.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $p(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var dc=!1;function Hx(h,g){switch(h){case"compositionend":return $p(g);case"keypress":return g.which!==32?null:(yv=!0,Ds);case"textInput":return h=g.data,h===Ds&&yv?null:h;default:return null}}function jf(h,g){if(dc)return h==="compositionend"||!ma&&xv(h,g)?(h=oi(),_i=ll=Ia=null,dc=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return Td&&g.locale!=="ko"?null:g.data;default:return null}}var Pd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yp(h){var g=h&&h.nodeName&&h.nodeName.toLowerCase();return g==="input"?!!Pd[h.type]:g==="textarea"}function Rd(h,g,S,T){Le(T),g=im(g,"onChange"),0<g.length&&(S=new Yr("onChange","change",null,S,T),h.push({event:S,listeners:g}))}var fc=null,Dd=null;function Vx(h){Id(h,0)}function ml(h){var g=Fr(h);if(Z(g))return h}function Wx(h,g){if(h==="change")return g}var kd=!1;if(o){var Fa;if(o){var au="oninput"in document;if(!au){var su=document.createElement("div");su.setAttribute("oninput","return;"),au=typeof su.oninput=="function"}Fa=au}else Fa=!1;kd=Fa&&(!document.documentMode||9<document.documentMode)}function so(){fc&&(fc.detachEvent("onpropertychange",qp),Dd=fc=null)}function qp(h){if(h.propertyName==="value"&&ml(Dd)){var g=[];Rd(g,Dd,h,ge(h)),mn(Vx,g)}}function jd(h,g,S){h==="focusin"?(so(),fc=g,Dd=S,fc.attachEvent("onpropertychange",qp)):h==="focusout"&&so()}function Gx(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return ml(Dd)}function bv(h,g){if(h==="click")return ml(g)}function xr(h,g){if(h==="input"||h==="change")return ml(g)}function Xp(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var as=typeof Object.is=="function"?Object.is:Xp;function ou(h,g){if(as(h,g))return!0;if(typeof h!="object"||h===null||typeof g!="object"||g===null)return!1;var S=Object.keys(h),T=Object.keys(g);if(S.length!==T.length)return!1;for(T=0;T<S.length;T++){var F=S[T];if(!l.call(g,F)||!as(h[F],g[F]))return!1}return!0}function Of(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function ss(h,g){var S=Of(h);h=0;for(var T;S;){if(S.nodeType===3){if(T=h+S.textContent.length,h<=g&&T>=g)return{node:S,offset:g-h};h=T}e:{for(;S;){if(S.nextSibling){S=S.nextSibling;break e}S=S.parentNode}S=void 0}S=Of(S)}}function lu(h,g){return h&&g?h===g?!0:h&&h.nodeType===3?!1:g&&g.nodeType===3?lu(h,g.parentNode):"contains"in h?h.contains(g):h.compareDocumentPosition?!!(h.compareDocumentPosition(g)&16):!1:!1}function br(){for(var h=window,g=xe();g instanceof h.HTMLIFrameElement;){try{var S=typeof g.contentWindow.location.href=="string"}catch{S=!1}if(S)h=g.contentWindow;else break;g=xe(h.document)}return g}function Si(h){var g=h&&h.nodeName&&h.nodeName.toLowerCase();return g&&(g==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||g==="textarea"||h.contentEditable==="true")}function Ei(h){var g=br(),S=h.focusedElem,T=h.selectionRange;if(g!==S&&S&&S.ownerDocument&&lu(S.ownerDocument.documentElement,S)){if(T!==null&&Si(S)){if(g=T.start,h=T.end,h===void 0&&(h=g),"selectionStart"in S)S.selectionStart=g,S.selectionEnd=Math.min(h,S.value.length);else if(h=(g=S.ownerDocument||document)&&g.defaultView||window,h.getSelection){h=h.getSelection();var F=S.textContent.length,V=Math.min(T.start,F);T=T.end===void 0?V:Math.min(T.end,F),!h.extend&&V>T&&(F=T,T=V,V=F),F=ss(S,V);var ne=ss(S,T);F&&ne&&(h.rangeCount!==1||h.anchorNode!==F.node||h.anchorOffset!==F.offset||h.focusNode!==ne.node||h.focusOffset!==ne.offset)&&(g=g.createRange(),g.setStart(F.node,F.offset),h.removeAllRanges(),V>T?(h.addRange(g),h.extend(ne.node,ne.offset)):(g.setEnd(ne.node,ne.offset),h.addRange(g)))}}for(g=[],h=S;h=h.parentNode;)h.nodeType===1&&g.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<g.length;S++)h=g[S],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var Kp=o&&"documentMode"in document&&11>=document.documentMode,Lo=null,cu=null,If=null,Mi=!1;function Zp(h,g,S){var T=S.window===S?S.document:S.nodeType===9?S:S.ownerDocument;Mi||Lo==null||Lo!==xe(T)||(T=Lo,"selectionStart"in T&&Si(T)?T={start:T.selectionStart,end:T.selectionEnd}:(T=(T.ownerDocument&&T.ownerDocument.defaultView||window).getSelection(),T={anchorNode:T.anchorNode,anchorOffset:T.anchorOffset,focusNode:T.focusNode,focusOffset:T.focusOffset}),If&&ou(If,T)||(If=T,T=im(cu,"onSelect"),0<T.length&&(g=new Yr("onSelect","select",null,g,S),h.push({event:g,listeners:T}),g.target=Lo)))}function Od(h,g){var S={};return S[h.toLowerCase()]=g.toLowerCase(),S["Webkit"+h]="webkit"+g,S["Moz"+h]="moz"+g,S}var hc={animationend:Od("Animation","AnimationEnd"),animationiteration:Od("Animation","AnimationIteration"),animationstart:Od("Animation","AnimationStart"),transitionend:Od("Transition","TransitionEnd")},oo={},lo={};o&&(lo=document.createElement("div").style,"AnimationEvent"in window||(delete hc.animationend.animation,delete hc.animationiteration.animation,delete hc.animationstart.animation),"TransitionEvent"in window||delete hc.transitionend.transition);function Fo(h){if(oo[h])return oo[h];if(!hc[h])return h;var g=hc[h],S;for(S in g)if(g.hasOwnProperty(S)&&S in lo)return oo[h]=g[S];return h}var Lf=Fo("animationend"),Ff=Fo("animationiteration"),_v=Fo("animationstart"),wv=Fo("transitionend"),Sv=new Map,Ev="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gl(h,g){Sv.set(h,g),a(g,[h])}for(var Qp=0;Qp<Ev.length;Qp++){var Uf=Ev[Qp],Bf=Uf.toLowerCase(),$x=Uf[0].toUpperCase()+Uf.slice(1);gl(Bf,"on"+$x)}gl(Lf,"onAnimationEnd"),gl(Ff,"onAnimationIteration"),gl(_v,"onAnimationStart"),gl("dblclick","onDoubleClick"),gl("focusin","onFocus"),gl("focusout","onBlur"),gl(wv,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jp=new Set("cancel close invalid load scroll toggle".split(" ").concat(pc));function em(h,g,S){var T=h.type||"unknown-event";h.currentTarget=S,Qc(T,g,void 0,h),h.currentTarget=null}function Id(h,g){g=(g&4)!==0;for(var S=0;S<h.length;S++){var T=h[S],F=T.event;T=T.listeners;e:{var V=void 0;if(g)for(var ne=T.length-1;0<=ne;ne--){var ve=T[ne],_e=ve.instance,Ye=ve.currentTarget;if(ve=ve.listener,_e!==V&&F.isPropagationStopped())break e;em(F,ve,Ye),V=_e}else for(ne=0;ne<T.length;ne++){if(ve=T[ne],_e=ve.instance,Ye=ve.currentTarget,ve=ve.listener,_e!==V&&F.isPropagationStopped())break e;em(F,ve,Ye),V=_e}}}if(ai)throw h=yi,ai=!1,yi=null,h}function sr(h,g){var S=g[fu];S===void 0&&(S=g[fu]=new Set);var T=h+"__bubble";S.has(T)||(nm(g,h,2,!1),S.add(T))}function tm(h,g,S){var T=0;g&&(T|=4),nm(S,h,T,g)}var zf="_reactListening"+Math.random().toString(36).slice(2);function Ld(h){if(!h[zf]){h[zf]=!0,r.forEach(function(S){S!=="selectionchange"&&(Jp.has(S)||tm(S,!1,h),tm(S,!0,h))});var g=h.nodeType===9?h:h.ownerDocument;g===null||g[zf]||(g[zf]=!0,tm("selectionchange",!1,g))}}function nm(h,g,S,T){switch(lc(g)){case 1:var F=Io;break;case 4:F=Ts;break;default:F=nu}S=F.bind(null,g,S,h),F=void 0,!ar||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(F=!0),T?F!==void 0?h.addEventListener(g,S,{capture:!0,passive:F}):h.addEventListener(g,S,!0):F!==void 0?h.addEventListener(g,S,{passive:F}):h.addEventListener(g,S,!1)}function rm(h,g,S,T,F){var V=T;if((g&1)===0&&(g&2)===0&&T!==null)e:for(;;){if(T===null)return;var ne=T.tag;if(ne===3||ne===4){var ve=T.stateNode.containerInfo;if(ve===F||ve.nodeType===8&&ve.parentNode===F)break;if(ne===4)for(ne=T.return;ne!==null;){var _e=ne.tag;if((_e===3||_e===4)&&(_e=ne.stateNode.containerInfo,_e===F||_e.nodeType===8&&_e.parentNode===F))return;ne=ne.return}for(;ve!==null;){if(ne=mc(ve),ne===null)return;if(_e=ne.tag,_e===5||_e===6){T=V=ne;continue e}ve=ve.parentNode}}T=T.return}mn(function(){var Ye=V,pt=ge(S),mt=[];e:{var ht=Sv.get(h);if(ht!==void 0){var Tt=Yr,Ut=h;switch(h){case"keypress":if(cl(S)===0)break e;case"keydown":case"keyup":Tt=Gp;break;case"focusin":Ut="focus",Tt=zp;break;case"focusout":Ut="blur",Tt=zp;break;case"beforeblur":case"afterblur":Tt=zp;break;case"click":if(S.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Tt=fv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Tt=cc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Tt=hl;break;case Lf:case Ff:case _v:Tt=Lx;break;case wv:Tt=iu;break;case"scroll":Tt=Lr;break;case"wheel":Tt=gv;break;case"copy":case"cut":case"paste":Tt=hv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Tt=is}var zt=(g&4)!==0,ui=!zt&&h==="scroll",Ie=zt?ht!==null?ht+"Capture":null:ht;zt=[];for(var Ee=Ye,Fe;Ee!==null;){Fe=Ee;var yt=Fe.stateNode;if(Fe.tag===5&&yt!==null&&(Fe=yt,Ie!==null&&(yt=Mn(Ee,Ie),yt!=null&&zt.push(Fd(Ee,yt,Fe)))),ui)break;Ee=Ee.return}0<zt.length&&(ht=new Tt(ht,Ut,null,S,pt),mt.push({event:ht,listeners:zt}))}}if((g&7)===0){e:{if(ht=h==="mouseover"||h==="pointerover",Tt=h==="mouseout"||h==="pointerout",ht&&S!==ut&&(Ut=S.relatedTarget||S.fromElement)&&(mc(Ut)||Ut[os]))break e;if((Tt||ht)&&(ht=pt.window===pt?pt:(ht=pt.ownerDocument)?ht.defaultView||ht.parentWindow:window,Tt?(Ut=S.relatedTarget||S.toElement,Tt=Ye,Ut=Ut?mc(Ut):null,Ut!==null&&(ui=Oa(Ut),Ut!==ui||Ut.tag!==5&&Ut.tag!==6)&&(Ut=null)):(Tt=null,Ut=Ye),Tt!==Ut)){if(zt=fv,yt="onMouseLeave",Ie="onMouseEnter",Ee="mouse",(h==="pointerout"||h==="pointerover")&&(zt=is,yt="onPointerLeave",Ie="onPointerEnter",Ee="pointer"),ui=Tt==null?ht:Fr(Tt),Fe=Ut==null?ht:Fr(Ut),ht=new zt(yt,Ee+"leave",Tt,S,pt),ht.target=ui,ht.relatedTarget=Fe,yt=null,mc(pt)===Ye&&(zt=new zt(Ie,Ee+"enter",Ut,S,pt),zt.target=Fe,zt.relatedTarget=ui,yt=zt),ui=yt,Tt&&Ut)t:{for(zt=Tt,Ie=Ut,Ee=0,Fe=zt;Fe;Fe=uu(Fe))Ee++;for(Fe=0,yt=Ie;yt;yt=uu(yt))Fe++;for(;0<Ee-Fe;)zt=uu(zt),Ee--;for(;0<Fe-Ee;)Ie=uu(Ie),Fe--;for(;Ee--;){if(zt===Ie||Ie!==null&&zt===Ie.alternate)break t;zt=uu(zt),Ie=uu(Ie)}zt=null}else zt=null;Tt!==null&&Yx(mt,ht,Tt,zt,!1),Ut!==null&&ui!==null&&Yx(mt,ui,Ut,zt,!0)}}e:{if(ht=Ye?Fr(Ye):window,Tt=ht.nodeName&&ht.nodeName.toLowerCase(),Tt==="select"||Tt==="input"&&ht.type==="file")var Vt=Wx;else if(Yp(ht))if(kd)Vt=xr;else{Vt=Gx;var Qt=jd}else(Tt=ht.nodeName)&&Tt.toLowerCase()==="input"&&(ht.type==="checkbox"||ht.type==="radio")&&(Vt=bv);if(Vt&&(Vt=Vt(h,Ye))){Rd(mt,Vt,S,pt);break e}Qt&&Qt(h,ht,Ye),h==="focusout"&&(Qt=ht._wrapperState)&&Qt.controlled&&ht.type==="number"&&ct(ht,"number",ht.value)}switch(Qt=Ye?Fr(Ye):window,h){case"focusin":(Yp(Qt)||Qt.contentEditable==="true")&&(Lo=Qt,cu=Ye,If=null);break;case"focusout":If=cu=Lo=null;break;case"mousedown":Mi=!0;break;case"contextmenu":case"mouseup":case"dragend":Mi=!1,Zp(mt,S,pt);break;case"selectionchange":if(Kp)break;case"keydown":case"keyup":Zp(mt,S,pt)}var Jt;if(ma)e:{switch(h){case"compositionstart":var on="onCompositionStart";break e;case"compositionend":on="onCompositionEnd";break e;case"compositionupdate":on="onCompositionUpdate";break e}on=void 0}else dc?xv(h,S)&&(on="onCompositionEnd"):h==="keydown"&&S.keyCode===229&&(on="onCompositionStart");on&&(Td&&S.locale!=="ko"&&(dc||on!=="onCompositionStart"?on==="onCompositionEnd"&&dc&&(Jt=oi()):(Ia=pt,ll="value"in Ia?Ia.value:Ia.textContent,dc=!0)),Qt=im(Ye,on),0<Qt.length&&(on=new pv(on,h,null,S,pt),mt.push({event:on,listeners:Qt}),Jt?on.data=Jt:(Jt=$p(S),Jt!==null&&(on.data=Jt)))),(Jt=pr?Hx(h,S):jf(h,S))&&(Ye=im(Ye,"onBeforeInput"),0<Ye.length&&(pt=new pv("onBeforeInput","beforeinput",null,S,pt),mt.push({event:pt,listeners:Ye}),pt.data=Jt))}Id(mt,g)})}function Fd(h,g,S){return{instance:h,listener:g,currentTarget:S}}function im(h,g){for(var S=g+"Capture",T=[];h!==null;){var F=h,V=F.stateNode;F.tag===5&&V!==null&&(F=V,V=Mn(h,S),V!=null&&T.unshift(Fd(h,V,F)),V=Mn(h,g),V!=null&&T.push(Fd(h,V,F))),h=h.return}return T}function uu(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function Yx(h,g,S,T,F){for(var V=g._reactName,ne=[];S!==null&&S!==T;){var ve=S,_e=ve.alternate,Ye=ve.stateNode;if(_e!==null&&_e===T)break;ve.tag===5&&Ye!==null&&(ve=Ye,F?(_e=Mn(S,V),_e!=null&&ne.unshift(Fd(S,_e,ve))):F||(_e=Mn(S,V),_e!=null&&ne.push(Fd(S,_e,ve)))),S=S.return}ne.length!==0&&h.push({event:g,listeners:ne})}var bE=/\r\n?/g,qx=/\u0000|\uFFFD/g;function Mv(h){return(typeof h=="string"?h:""+h).replace(bE,`
`).replace(qx,"")}function Hf(h,g,S){if(g=Mv(g),Mv(h)!==g&&S)throw Error(n(425))}function Vf(){}var Ud=null,Cv=null;function Nv(h,g){return h==="textarea"||h==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var Av=typeof setTimeout=="function"?setTimeout:void 0,Tv=typeof clearTimeout=="function"?clearTimeout:void 0,am=typeof Promise=="function"?Promise:void 0,_E=typeof queueMicrotask=="function"?queueMicrotask:typeof am<"u"?function(h){return am.resolve(null).then(h).catch(Xx)}:Av;function Xx(h){setTimeout(function(){throw h})}function sm(h,g){var S=g,T=0;do{var F=S.nextSibling;if(h.removeChild(S),F&&F.nodeType===8)if(S=F.data,S==="/$"){if(T===0){h.removeChild(F),sc(g);return}T--}else S!=="$"&&S!=="$?"&&S!=="$!"||T++;S=F}while(S);sc(g)}function vl(h){for(;h!=null;h=h.nextSibling){var g=h.nodeType;if(g===1||g===3)break;if(g===8){if(g=h.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return h}function Pv(h){h=h.previousSibling;for(var g=0;h;){if(h.nodeType===8){var S=h.data;if(S==="$"||S==="$!"||S==="$?"){if(g===0)return h;g--}else S==="/$"&&g++}h=h.previousSibling}return null}var du=Math.random().toString(36).slice(2),ci="__reactFiber$"+du,Bd="__reactProps$"+du,os="__reactContainer$"+du,fu="__reactEvents$"+du,om="__reactListeners$"+du,lm="__reactHandles$"+du;function mc(h){var g=h[ci];if(g)return g;for(var S=h.parentNode;S;){if(g=S[os]||S[ci]){if(S=g.alternate,g.child!==null||S!==null&&S.child!==null)for(h=Pv(h);h!==null;){if(S=h[ci])return S;h=Pv(h)}return g}h=S,S=h.parentNode}return null}function yl(h){return h=h[ci]||h[os],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function Fr(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(n(33))}function cm(h){return h[Bd]||null}var Rv=[],Ci=-1;function Mr(h){return{current:h}}function or(h){0>Ci||(h.current=Rv[Ci],Rv[Ci]=null,Ci--)}function Jn(h,g){Ci++,Rv[Ci]=h.current,h.current=g}var xl={},Fi=Mr(xl),ga=Mr(!1),bl=xl;function hu(h,g){var S=h.type.contextTypes;if(!S)return xl;var T=h.stateNode;if(T&&T.__reactInternalMemoizedUnmaskedChildContext===g)return T.__reactInternalMemoizedMaskedChildContext;var F={},V;for(V in S)F[V]=g[V];return T&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=g,h.__reactInternalMemoizedMaskedChildContext=F),F}function ta(h){return h=h.childContextTypes,h!=null}function Wf(){or(ga),or(Fi)}function Dv(h,g,S){if(Fi.current!==xl)throw Error(n(168));Jn(Fi,g),Jn(ga,S)}function Gf(h,g,S){var T=h.stateNode;if(g=g.childContextTypes,typeof T.getChildContext!="function")return S;T=T.getChildContext();for(var F in T)if(!(F in g))throw Error(n(108,ie(h)||"Unknown",F));return G({},S,T)}function pu(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||xl,bl=Fi.current,Jn(Fi,h),Jn(ga,ga.current),!0}function kv(h,g,S){var T=h.stateNode;if(!T)throw Error(n(169));S?(h=Gf(h,g,bl),T.__reactInternalMemoizedMergedChildContext=h,or(ga),or(Fi),Jn(Fi,h)):or(ga),Jn(ga,S)}var co=null,$f=!1,um=!1;function Yf(h){co===null?co=[h]:co.push(h)}function Kx(h){$f=!0,Yf(h)}function Uo(){if(!um&&co!==null){um=!0;var h=0,g=Cn;try{var S=co;for(Cn=1;h<S.length;h++){var T=S[h];do T=T(!0);while(T!==null)}co=null,$f=!1}catch(F){throw co!==null&&(co=co.slice(h+1)),We(Rt,Uo),F}finally{Cn=g,um=!1}}return null}var mu=[],Ua=0,dm=null,fm=0,va=[],Ni=0,gu=null,bt=1,ks="";function _l(h,g){mu[Ua++]=fm,mu[Ua++]=dm,dm=h,fm=g}function jv(h,g,S){va[Ni++]=bt,va[Ni++]=ks,va[Ni++]=gu,gu=h;var T=bt;h=ks;var F=32-Yt(T)-1;T&=~(1<<F),S+=1;var V=32-Yt(g)+F;if(30<V){var ne=F-F%5;V=(T&(1<<ne)-1).toString(32),T>>=ne,F-=ne,bt=1<<32-Yt(g)+F|S<<F|T,ks=V+h}else bt=1<<V|S<<F|T,ks=h}function Ov(h){h.return!==null&&(_l(h,1),jv(h,1,0))}function wl(h){for(;h===dm;)dm=mu[--Ua],mu[Ua]=null,fm=mu[--Ua],mu[Ua]=null;for(;h===gu;)gu=va[--Ni],va[Ni]=null,ks=va[--Ni],va[Ni]=null,bt=va[--Ni],va[Ni]=null}var Ui=null,ya=null,ur=!1,js=null;function Iv(h,g){var S=Wo(5,null,null,0);S.elementType="DELETED",S.stateNode=g,S.return=h,g=h.deletions,g===null?(h.deletions=[S],h.flags|=16):g.push(S)}function Lv(h,g){switch(h.tag){case 5:var S=h.type;return g=g.nodeType!==1||S.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(h.stateNode=g,Ui=h,ya=vl(g.firstChild),!0):!1;case 6:return g=h.pendingProps===""||g.nodeType!==3?null:g,g!==null?(h.stateNode=g,Ui=h,ya=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(S=gu!==null?{id:bt,overflow:ks}:null,h.memoizedState={dehydrated:g,treeContext:S,retryLane:1073741824},S=Wo(18,null,null,0),S.stateNode=g,S.return=h,h.child=S,Ui=h,ya=null,!0):!1;default:return!1}}function hm(h){return(h.mode&1)!==0&&(h.flags&128)===0}function pm(h){if(ur){var g=ya;if(g){var S=g;if(!Lv(h,g)){if(hm(h))throw Error(n(418));g=vl(S.nextSibling);var T=Ui;g&&Lv(h,g)?Iv(T,S):(h.flags=h.flags&-4097|2,ur=!1,Ui=h)}}else{if(hm(h))throw Error(n(418));h.flags=h.flags&-4097|2,ur=!1,Ui=h}}}function mm(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Ui=h}function zd(h){if(h!==Ui)return!1;if(!ur)return mm(h),ur=!0,!1;var g;if((g=h.tag!==3)&&!(g=h.tag!==5)&&(g=h.type,g=g!=="head"&&g!=="body"&&!Nv(h.type,h.memoizedProps)),g&&(g=ya)){if(hm(h))throw Fv(),Error(n(418));for(;g;)Iv(h,g),g=vl(g.nextSibling)}if(mm(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(317));e:{for(h=h.nextSibling,g=0;h;){if(h.nodeType===8){var S=h.data;if(S==="/$"){if(g===0){ya=vl(h.nextSibling);break e}g--}else S!=="$"&&S!=="$!"&&S!=="$?"||g++}h=h.nextSibling}ya=null}}else ya=Ui?vl(h.stateNode.nextSibling):null;return!0}function Fv(){for(var h=ya;h;)h=vl(h.nextSibling)}function gc(){ya=Ui=null,ur=!1}function Hd(h){js===null?js=[h]:js.push(h)}var wE=N.ReactCurrentBatchConfig;function qf(h,g,S){if(h=S.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(S._owner){if(S=S._owner,S){if(S.tag!==1)throw Error(n(309));var T=S.stateNode}if(!T)throw Error(n(147,h));var F=T,V=""+h;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===V?g.ref:(g=function(ne){var ve=F.refs;ne===null?delete ve[V]:ve[V]=ne},g._stringRef=V,g)}if(typeof h!="string")throw Error(n(284));if(!S._owner)throw Error(n(290,h))}return h}function Xf(h,g){throw h=Object.prototype.toString.call(g),Error(n(31,h==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":h))}function Uv(h){var g=h._init;return g(h._payload)}function Bv(h){function g(Ie,Ee){if(h){var Fe=Ie.deletions;Fe===null?(Ie.deletions=[Ee],Ie.flags|=16):Fe.push(Ee)}}function S(Ie,Ee){if(!h)return null;for(;Ee!==null;)g(Ie,Ee),Ee=Ee.sibling;return null}function T(Ie,Ee){for(Ie=new Map;Ee!==null;)Ee.key!==null?Ie.set(Ee.key,Ee):Ie.set(Ee.index,Ee),Ee=Ee.sibling;return Ie}function F(Ie,Ee){return Ie=Jd(Ie,Ee),Ie.index=0,Ie.sibling=null,Ie}function V(Ie,Ee,Fe){return Ie.index=Fe,h?(Fe=Ie.alternate,Fe!==null?(Fe=Fe.index,Fe<Ee?(Ie.flags|=2,Ee):Fe):(Ie.flags|=2,Ee)):(Ie.flags|=1048576,Ee)}function ne(Ie){return h&&Ie.alternate===null&&(Ie.flags|=2),Ie}function ve(Ie,Ee,Fe,yt){return Ee===null||Ee.tag!==6?(Ee=zE(Fe,Ie.mode,yt),Ee.return=Ie,Ee):(Ee=F(Ee,Fe),Ee.return=Ie,Ee)}function _e(Ie,Ee,Fe,yt){var Vt=Fe.type;return Vt===k?pt(Ie,Ee,Fe.props.children,yt,Fe.key):Ee!==null&&(Ee.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===ee&&Uv(Vt)===Ee.type)?(yt=F(Ee,Fe.props),yt.ref=qf(Ie,Ee,Fe),yt.return=Ie,yt):(yt=xb(Fe.type,Fe.key,Fe.props,null,Ie.mode,yt),yt.ref=qf(Ie,Ee,Fe),yt.return=Ie,yt)}function Ye(Ie,Ee,Fe,yt){return Ee===null||Ee.tag!==4||Ee.stateNode.containerInfo!==Fe.containerInfo||Ee.stateNode.implementation!==Fe.implementation?(Ee=HE(Fe,Ie.mode,yt),Ee.return=Ie,Ee):(Ee=F(Ee,Fe.children||[]),Ee.return=Ie,Ee)}function pt(Ie,Ee,Fe,yt,Vt){return Ee===null||Ee.tag!==7?(Ee=fh(Fe,Ie.mode,yt,Vt),Ee.return=Ie,Ee):(Ee=F(Ee,Fe),Ee.return=Ie,Ee)}function mt(Ie,Ee,Fe){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return Ee=zE(""+Ee,Ie.mode,Fe),Ee.return=Ie,Ee;if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case P:return Fe=xb(Ee.type,Ee.key,Ee.props,null,Ie.mode,Fe),Fe.ref=qf(Ie,null,Ee),Fe.return=Ie,Fe;case R:return Ee=HE(Ee,Ie.mode,Fe),Ee.return=Ie,Ee;case ee:var yt=Ee._init;return mt(Ie,yt(Ee._payload),Fe)}if($e(Ee)||$(Ee))return Ee=fh(Ee,Ie.mode,Fe,null),Ee.return=Ie,Ee;Xf(Ie,Ee)}return null}function ht(Ie,Ee,Fe,yt){var Vt=Ee!==null?Ee.key:null;if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return Vt!==null?null:ve(Ie,Ee,""+Fe,yt);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case P:return Fe.key===Vt?_e(Ie,Ee,Fe,yt):null;case R:return Fe.key===Vt?Ye(Ie,Ee,Fe,yt):null;case ee:return Vt=Fe._init,ht(Ie,Ee,Vt(Fe._payload),yt)}if($e(Fe)||$(Fe))return Vt!==null?null:pt(Ie,Ee,Fe,yt,null);Xf(Ie,Fe)}return null}function Tt(Ie,Ee,Fe,yt,Vt){if(typeof yt=="string"&&yt!==""||typeof yt=="number")return Ie=Ie.get(Fe)||null,ve(Ee,Ie,""+yt,Vt);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case P:return Ie=Ie.get(yt.key===null?Fe:yt.key)||null,_e(Ee,Ie,yt,Vt);case R:return Ie=Ie.get(yt.key===null?Fe:yt.key)||null,Ye(Ee,Ie,yt,Vt);case ee:var Qt=yt._init;return Tt(Ie,Ee,Fe,Qt(yt._payload),Vt)}if($e(yt)||$(yt))return Ie=Ie.get(Fe)||null,pt(Ee,Ie,yt,Vt,null);Xf(Ee,yt)}return null}function Ut(Ie,Ee,Fe,yt){for(var Vt=null,Qt=null,Jt=Ee,on=Ee=0,aa=null;Jt!==null&&on<Fe.length;on++){Jt.index>on?(aa=Jt,Jt=null):aa=Jt.sibling;var Bn=ht(Ie,Jt,Fe[on],yt);if(Bn===null){Jt===null&&(Jt=aa);break}h&&Jt&&Bn.alternate===null&&g(Ie,Jt),Ee=V(Bn,Ee,on),Qt===null?Vt=Bn:Qt.sibling=Bn,Qt=Bn,Jt=aa}if(on===Fe.length)return S(Ie,Jt),ur&&_l(Ie,on),Vt;if(Jt===null){for(;on<Fe.length;on++)Jt=mt(Ie,Fe[on],yt),Jt!==null&&(Ee=V(Jt,Ee,on),Qt===null?Vt=Jt:Qt.sibling=Jt,Qt=Jt);return ur&&_l(Ie,on),Vt}for(Jt=T(Ie,Jt);on<Fe.length;on++)aa=Tt(Jt,Ie,on,Fe[on],yt),aa!==null&&(h&&aa.alternate!==null&&Jt.delete(aa.key===null?on:aa.key),Ee=V(aa,Ee,on),Qt===null?Vt=aa:Qt.sibling=aa,Qt=aa);return h&&Jt.forEach(function(ef){return g(Ie,ef)}),ur&&_l(Ie,on),Vt}function zt(Ie,Ee,Fe,yt){var Vt=$(Fe);if(typeof Vt!="function")throw Error(n(150));if(Fe=Vt.call(Fe),Fe==null)throw Error(n(151));for(var Qt=Vt=null,Jt=Ee,on=Ee=0,aa=null,Bn=Fe.next();Jt!==null&&!Bn.done;on++,Bn=Fe.next()){Jt.index>on?(aa=Jt,Jt=null):aa=Jt.sibling;var ef=ht(Ie,Jt,Bn.value,yt);if(ef===null){Jt===null&&(Jt=aa);break}h&&Jt&&ef.alternate===null&&g(Ie,Jt),Ee=V(ef,Ee,on),Qt===null?Vt=ef:Qt.sibling=ef,Qt=ef,Jt=aa}if(Bn.done)return S(Ie,Jt),ur&&_l(Ie,on),Vt;if(Jt===null){for(;!Bn.done;on++,Bn=Fe.next())Bn=mt(Ie,Bn.value,yt),Bn!==null&&(Ee=V(Bn,Ee,on),Qt===null?Vt=Bn:Qt.sibling=Bn,Qt=Bn);return ur&&_l(Ie,on),Vt}for(Jt=T(Ie,Jt);!Bn.done;on++,Bn=Fe.next())Bn=Tt(Jt,Ie,on,Bn.value,yt),Bn!==null&&(h&&Bn.alternate!==null&&Jt.delete(Bn.key===null?on:Bn.key),Ee=V(Bn,Ee,on),Qt===null?Vt=Bn:Qt.sibling=Bn,Qt=Bn);return h&&Jt.forEach(function(iY){return g(Ie,iY)}),ur&&_l(Ie,on),Vt}function ui(Ie,Ee,Fe,yt){if(typeof Fe=="object"&&Fe!==null&&Fe.type===k&&Fe.key===null&&(Fe=Fe.props.children),typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case P:e:{for(var Vt=Fe.key,Qt=Ee;Qt!==null;){if(Qt.key===Vt){if(Vt=Fe.type,Vt===k){if(Qt.tag===7){S(Ie,Qt.sibling),Ee=F(Qt,Fe.props.children),Ee.return=Ie,Ie=Ee;break e}}else if(Qt.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===ee&&Uv(Vt)===Qt.type){S(Ie,Qt.sibling),Ee=F(Qt,Fe.props),Ee.ref=qf(Ie,Qt,Fe),Ee.return=Ie,Ie=Ee;break e}S(Ie,Qt);break}else g(Ie,Qt);Qt=Qt.sibling}Fe.type===k?(Ee=fh(Fe.props.children,Ie.mode,yt,Fe.key),Ee.return=Ie,Ie=Ee):(yt=xb(Fe.type,Fe.key,Fe.props,null,Ie.mode,yt),yt.ref=qf(Ie,Ee,Fe),yt.return=Ie,Ie=yt)}return ne(Ie);case R:e:{for(Qt=Fe.key;Ee!==null;){if(Ee.key===Qt)if(Ee.tag===4&&Ee.stateNode.containerInfo===Fe.containerInfo&&Ee.stateNode.implementation===Fe.implementation){S(Ie,Ee.sibling),Ee=F(Ee,Fe.children||[]),Ee.return=Ie,Ie=Ee;break e}else{S(Ie,Ee);break}else g(Ie,Ee);Ee=Ee.sibling}Ee=HE(Fe,Ie.mode,yt),Ee.return=Ie,Ie=Ee}return ne(Ie);case ee:return Qt=Fe._init,ui(Ie,Ee,Qt(Fe._payload),yt)}if($e(Fe))return Ut(Ie,Ee,Fe,yt);if($(Fe))return zt(Ie,Ee,Fe,yt);Xf(Ie,Fe)}return typeof Fe=="string"&&Fe!==""||typeof Fe=="number"?(Fe=""+Fe,Ee!==null&&Ee.tag===6?(S(Ie,Ee.sibling),Ee=F(Ee,Fe),Ee.return=Ie,Ie=Ee):(S(Ie,Ee),Ee=zE(Fe,Ie.mode,yt),Ee.return=Ie,Ie=Ee),ne(Ie)):S(Ie,Ee)}return ui}var vu=Bv(!0),Kf=Bv(!1),yu=Mr(null),xu=null,Sl=null,Vd=null;function bu(){Vd=Sl=xu=null}function Zf(h){var g=yu.current;or(yu),h._currentValue=g}function Qf(h,g,S){for(;h!==null;){var T=h.alternate;if((h.childLanes&g)!==g?(h.childLanes|=g,T!==null&&(T.childLanes|=g)):T!==null&&(T.childLanes&g)!==g&&(T.childLanes|=g),h===S)break;h=h.return}}function vc(h,g){xu=h,Vd=Sl=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&g)!==0&&(xn=!0),h.firstContext=null)}function ls(h){var g=h._currentValue;if(Vd!==h)if(h={context:h,memoizedValue:g,next:null},Sl===null){if(xu===null)throw Error(n(308));Sl=h,xu.dependencies={lanes:0,firstContext:h}}else Sl=Sl.next=h;return g}var El=null;function zv(h){El===null?El=[h]:El.push(h)}function Jf(h,g,S,T){var F=g.interleaved;return F===null?(S.next=S,zv(g)):(S.next=F.next,F.next=S),g.interleaved=S,uo(h,T)}function uo(h,g){h.lanes|=g;var S=h.alternate;for(S!==null&&(S.lanes|=g),S=h,h=h.return;h!==null;)h.childLanes|=g,S=h.alternate,S!==null&&(S.childLanes|=g),S=h,h=h.return;return S.tag===3?S.stateNode:null}var qn=!1;function vn(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ur(h,g){h=h.updateQueue,g.updateQueue===h&&(g.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Xn(h,g){return{eventTime:h,lane:g,tag:0,payload:null,callback:null,next:null}}function mr(h,g,S){var T=h.updateQueue;if(T===null)return null;if(T=T.shared,(In&2)!==0){var F=T.pending;return F===null?g.next=g:(g.next=F.next,F.next=g),T.pending=g,uo(h,S)}return F=T.interleaved,F===null?(g.next=g,zv(T)):(g.next=F.next,F.next=g),T.interleaved=g,uo(h,S)}function na(h,g,S){if(g=g.updateQueue,g!==null&&(g=g.shared,(S&4194240)!==0)){var T=g.lanes;T&=h.pendingLanes,S|=T,g.lanes=S,ro(h,S)}}function _u(h,g){var S=h.updateQueue,T=h.alternate;if(T!==null&&(T=T.updateQueue,S===T)){var F=null,V=null;if(S=S.firstBaseUpdate,S!==null){do{var ne={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};V===null?F=V=ne:V=V.next=ne,S=S.next}while(S!==null);V===null?F=V=g:V=V.next=g}else F=V=g;S={baseState:T.baseState,firstBaseUpdate:F,lastBaseUpdate:V,shared:T.shared,effects:T.effects},h.updateQueue=S;return}h=S.lastBaseUpdate,h===null?S.firstBaseUpdate=g:h.next=g,S.lastBaseUpdate=g}function Cr(h,g,S,T){var F=h.updateQueue;qn=!1;var V=F.firstBaseUpdate,ne=F.lastBaseUpdate,ve=F.shared.pending;if(ve!==null){F.shared.pending=null;var _e=ve,Ye=_e.next;_e.next=null,ne===null?V=Ye:ne.next=Ye,ne=_e;var pt=h.alternate;pt!==null&&(pt=pt.updateQueue,ve=pt.lastBaseUpdate,ve!==ne&&(ve===null?pt.firstBaseUpdate=Ye:ve.next=Ye,pt.lastBaseUpdate=_e))}if(V!==null){var mt=F.baseState;ne=0,pt=Ye=_e=null,ve=V;do{var ht=ve.lane,Tt=ve.eventTime;if((T&ht)===ht){pt!==null&&(pt=pt.next={eventTime:Tt,lane:0,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null});e:{var Ut=h,zt=ve;switch(ht=g,Tt=S,zt.tag){case 1:if(Ut=zt.payload,typeof Ut=="function"){mt=Ut.call(Tt,mt,ht);break e}mt=Ut;break e;case 3:Ut.flags=Ut.flags&-65537|128;case 0:if(Ut=zt.payload,ht=typeof Ut=="function"?Ut.call(Tt,mt,ht):Ut,ht==null)break e;mt=G({},mt,ht);break e;case 2:qn=!0}}ve.callback!==null&&ve.lane!==0&&(h.flags|=64,ht=F.effects,ht===null?F.effects=[ve]:ht.push(ve))}else Tt={eventTime:Tt,lane:ht,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null},pt===null?(Ye=pt=Tt,_e=mt):pt=pt.next=Tt,ne|=ht;if(ve=ve.next,ve===null){if(ve=F.shared.pending,ve===null)break;ht=ve,ve=ht.next,ht.next=null,F.lastBaseUpdate=ht,F.shared.pending=null}}while(!0);if(pt===null&&(_e=mt),F.baseState=_e,F.firstBaseUpdate=Ye,F.lastBaseUpdate=pt,g=F.shared.interleaved,g!==null){F=g;do ne|=F.lane,F=F.next;while(F!==g)}else V===null&&(F.shared.lanes=0);lh|=ne,h.lanes=ne,h.memoizedState=mt}}function Wd(h,g,S){if(h=g.effects,g.effects=null,h!==null)for(g=0;g<h.length;g++){var T=h[g],F=T.callback;if(F!==null){if(T.callback=null,T=S,typeof F!="function")throw Error(n(191,F));F.call(T)}}}var Bo={},cs=Mr(Bo),wu=Mr(Bo),Ml=Mr(Bo);function qr(h){if(h===Bo)throw Error(n(174));return h}function eh(h,g){switch(Jn(Ml,g),Jn(wu,h),Jn(cs,Bo),h=g.nodeType,h){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:it(null,"");break;default:h=h===8?g.parentNode:g,g=h.namespaceURI||null,h=h.tagName,g=it(g,h)}or(cs),Jn(cs,g)}function yc(){or(cs),or(wu),or(Ml)}function Su(h){qr(Ml.current);var g=qr(cs.current),S=it(g,h.type);g!==S&&(Jn(wu,h),Jn(cs,S))}function Gd(h){wu.current===h&&(or(cs),or(wu))}var dr=Mr(0);function fo(h){for(var g=h;g!==null;){if(g.tag===13){var S=g.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||S.data==="$?"||S.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var $d=[];function zo(){for(var h=0;h<$d.length;h++)$d[h]._workInProgressVersionPrimary=null;$d.length=0}var Eu=N.ReactCurrentDispatcher,Mu=N.ReactCurrentBatchConfig,Cl=0,lr=null,Nr=null,On=null,ho=!1,ra=!1,xc=0,Ba=0;function Bi(){throw Error(n(321))}function th(h,g){if(g===null)return!1;for(var S=0;S<g.length&&S<h.length;S++)if(!as(h[S],g[S]))return!1;return!0}function nh(h,g,S,T,F,V){if(Cl=V,lr=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Eu.current=h===null||h.memoizedState===null?rb:ib,h=S(T,F),ra){V=0;do{if(ra=!1,xc=0,25<=V)throw Error(n(301));V+=1,On=Nr=null,g.updateQueue=null,Eu.current=ab,h=S(T,F)}while(ra)}if(Eu.current=wm,g=Nr!==null&&Nr.next!==null,Cl=0,On=Nr=lr=null,ho=!1,g)throw Error(n(300));return h}function Hv(){var h=xc!==0;return xc=0,h}function zi(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?lr.memoizedState=On=h:On=On.next=h,On}function us(){if(Nr===null){var h=lr.alternate;h=h!==null?h.memoizedState:null}else h=Nr.next;var g=On===null?lr.memoizedState:On.next;if(g!==null)On=g,Nr=h;else{if(h===null)throw Error(n(310));Nr=h,h={memoizedState:Nr.memoizedState,baseState:Nr.baseState,baseQueue:Nr.baseQueue,queue:Nr.queue,next:null},On===null?lr.memoizedState=On=h:On=On.next=h}return On}function Yd(h,g){return typeof g=="function"?g(h):g}function rh(h){var g=us(),S=g.queue;if(S===null)throw Error(n(311));S.lastRenderedReducer=h;var T=Nr,F=T.baseQueue,V=S.pending;if(V!==null){if(F!==null){var ne=F.next;F.next=V.next,V.next=ne}T.baseQueue=F=V,S.pending=null}if(F!==null){V=F.next,T=T.baseState;var ve=ne=null,_e=null,Ye=V;do{var pt=Ye.lane;if((Cl&pt)===pt)_e!==null&&(_e=_e.next={lane:0,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),T=Ye.hasEagerState?Ye.eagerState:h(T,Ye.action);else{var mt={lane:pt,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null};_e===null?(ve=_e=mt,ne=T):_e=_e.next=mt,lr.lanes|=pt,lh|=pt}Ye=Ye.next}while(Ye!==null&&Ye!==V);_e===null?ne=T:_e.next=ve,as(T,g.memoizedState)||(xn=!0),g.memoizedState=T,g.baseState=ne,g.baseQueue=_e,S.lastRenderedState=T}if(h=S.interleaved,h!==null){F=h;do V=F.lane,lr.lanes|=V,lh|=V,F=F.next;while(F!==h)}else F===null&&(S.lanes=0);return[g.memoizedState,S.dispatch]}function Nl(h){var g=us(),S=g.queue;if(S===null)throw Error(n(311));S.lastRenderedReducer=h;var T=S.dispatch,F=S.pending,V=g.memoizedState;if(F!==null){S.pending=null;var ne=F=F.next;do V=h(V,ne.action),ne=ne.next;while(ne!==F);as(V,g.memoizedState)||(xn=!0),g.memoizedState=V,g.baseQueue===null&&(g.baseState=V),S.lastRenderedState=V}return[V,T]}function Vv(){}function Wv(h,g){var S=lr,T=us(),F=g(),V=!as(T.memoizedState,F);if(V&&(T.memoizedState=F,xn=!0),T=T.queue,Yv(Zx.bind(null,S,T,h),[h]),T.getSnapshot!==g||V||On!==null&&On.memoizedState.tag&1){if(S.flags|=2048,po(9,ih.bind(null,S,T,F,g),void 0,null),ia===null)throw Error(n(349));(Cl&30)!==0||gm(S,g,F)}return F}function gm(h,g,S){h.flags|=16384,h={getSnapshot:g,value:S},g=lr.updateQueue,g===null?(g={lastEffect:null,stores:null},lr.updateQueue=g,g.stores=[h]):(S=g.stores,S===null?g.stores=[h]:S.push(h))}function ih(h,g,S,T){g.value=S,g.getSnapshot=T,Qx(g)&&Gv(h)}function Zx(h,g,S){return S(function(){Qx(g)&&Gv(h)})}function Qx(h){var g=h.getSnapshot;h=h.value;try{var S=g();return!as(h,S)}catch{return!0}}function Gv(h){var g=uo(h,1);g!==null&&Dl(g,h,1,-1)}function $v(h){var g=zi();return typeof h=="function"&&(h=h()),g.memoizedState=g.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yd,lastRenderedState:h},g.queue=h,h=h.dispatch=Cu.bind(null,lr,h),[g.memoizedState,h]}function po(h,g,S,T){return h={tag:h,create:g,destroy:S,deps:T,next:null},g=lr.updateQueue,g===null?(g={lastEffect:null,stores:null},lr.updateQueue=g,g.lastEffect=h.next=h):(S=g.lastEffect,S===null?g.lastEffect=h.next=h:(T=S.next,S.next=h,h.next=T,g.lastEffect=h)),h}function Jx(){return us().memoizedState}function Ho(h,g,S,T){var F=zi();lr.flags|=h,F.memoizedState=po(1|g,S,void 0,T===void 0?null:T)}function ah(h,g,S,T){var F=us();T=T===void 0?null:T;var V=void 0;if(Nr!==null){var ne=Nr.memoizedState;if(V=ne.destroy,T!==null&&th(T,ne.deps)){F.memoizedState=po(g,S,V,T);return}}lr.flags|=h,F.memoizedState=po(1|g,S,V,T)}function xa(h,g){return Ho(8390656,8,h,g)}function Yv(h,g){return ah(2048,8,h,g)}function qv(h,g){return ah(4,2,h,g)}function eb(h,g){return ah(4,4,h,g)}function tb(h,g){if(typeof g=="function")return h=h(),g(h),function(){g(null)};if(g!=null)return h=h(),g.current=h,function(){g.current=null}}function Xv(h,g,S){return S=S!=null?S.concat([h]):null,ah(4,4,tb.bind(null,g,h),S)}function vm(){}function nb(h,g){var S=us();g=g===void 0?null:g;var T=S.memoizedState;return T!==null&&g!==null&&th(g,T[1])?T[0]:(S.memoizedState=[h,g],h)}function ds(h,g){var S=us();g=g===void 0?null:g;var T=S.memoizedState;return T!==null&&g!==null&&th(g,T[1])?T[0]:(h=h(),S.memoizedState=[h,g],h)}function ym(h,g,S){return(Cl&21)===0?(h.baseState&&(h.baseState=!1,xn=!0),h.memoizedState=S):(as(S,g)||(S=Qn(),lr.lanes|=S,lh|=S,h.baseState=!0),g)}function SE(h,g){var S=Cn;Cn=S!==0&&4>S?S:4,h(!0);var T=Mu.transition;Mu.transition={};try{h(!1),g()}finally{Cn=S,Mu.transition=T}}function Al(){return us().memoizedState}function xm(h,g,S){var T=Zd(h);if(S={lane:T,action:S,hasEagerState:!1,eagerState:null,next:null},sh(h))bm(g,S);else if(S=Jf(h,g,S,T),S!==null){var F=hs();Dl(S,h,T,F),_m(S,g,T)}}function Cu(h,g,S){var T=Zd(h),F={lane:T,action:S,hasEagerState:!1,eagerState:null,next:null};if(sh(h))bm(g,F);else{var V=h.alternate;if(h.lanes===0&&(V===null||V.lanes===0)&&(V=g.lastRenderedReducer,V!==null))try{var ne=g.lastRenderedState,ve=V(ne,S);if(F.hasEagerState=!0,F.eagerState=ve,as(ve,ne)){var _e=g.interleaved;_e===null?(F.next=F,zv(g)):(F.next=_e.next,_e.next=F),g.interleaved=F;return}}catch{}finally{}S=Jf(h,g,F,T),S!==null&&(F=hs(),Dl(S,h,T,F),_m(S,g,T))}}function sh(h){var g=h.alternate;return h===lr||g!==null&&g===lr}function bm(h,g){ra=ho=!0;var S=h.pending;S===null?g.next=g:(g.next=S.next,S.next=g),h.pending=g}function _m(h,g,S){if((S&4194240)!==0){var T=g.lanes;T&=h.pendingLanes,S|=T,g.lanes=S,ro(h,S)}}var wm={readContext:ls,useCallback:Bi,useContext:Bi,useEffect:Bi,useImperativeHandle:Bi,useInsertionEffect:Bi,useLayoutEffect:Bi,useMemo:Bi,useReducer:Bi,useRef:Bi,useState:Bi,useDebugValue:Bi,useDeferredValue:Bi,useTransition:Bi,useMutableSource:Bi,useSyncExternalStore:Bi,useId:Bi,unstable_isNewReconciler:!1},rb={readContext:ls,useCallback:function(h,g){return zi().memoizedState=[h,g===void 0?null:g],h},useContext:ls,useEffect:xa,useImperativeHandle:function(h,g,S){return S=S!=null?S.concat([h]):null,Ho(4194308,4,tb.bind(null,g,h),S)},useLayoutEffect:function(h,g){return Ho(4194308,4,h,g)},useInsertionEffect:function(h,g){return Ho(4,2,h,g)},useMemo:function(h,g){var S=zi();return g=g===void 0?null:g,h=h(),S.memoizedState=[h,g],h},useReducer:function(h,g,S){var T=zi();return g=S!==void 0?S(g):g,T.memoizedState=T.baseState=g,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:g},T.queue=h,h=h.dispatch=xm.bind(null,lr,h),[T.memoizedState,h]},useRef:function(h){var g=zi();return h={current:h},g.memoizedState=h},useState:$v,useDebugValue:vm,useDeferredValue:function(h){return zi().memoizedState=h},useTransition:function(){var h=$v(!1),g=h[0];return h=SE.bind(null,h[1]),zi().memoizedState=h,[g,h]},useMutableSource:function(){},useSyncExternalStore:function(h,g,S){var T=lr,F=zi();if(ur){if(S===void 0)throw Error(n(407));S=S()}else{if(S=g(),ia===null)throw Error(n(349));(Cl&30)!==0||gm(T,g,S)}F.memoizedState=S;var V={value:S,getSnapshot:g};return F.queue=V,xa(Zx.bind(null,T,V,h),[h]),T.flags|=2048,po(9,ih.bind(null,T,V,S,g),void 0,null),S},useId:function(){var h=zi(),g=ia.identifierPrefix;if(ur){var S=ks,T=bt;S=(T&~(1<<32-Yt(T)-1)).toString(32)+S,g=":"+g+"R"+S,S=xc++,0<S&&(g+="H"+S.toString(32)),g+=":"}else S=Ba++,g=":"+g+"r"+S.toString(32)+":";return h.memoizedState=g},unstable_isNewReconciler:!1},ib={readContext:ls,useCallback:nb,useContext:ls,useEffect:Yv,useImperativeHandle:Xv,useInsertionEffect:qv,useLayoutEffect:eb,useMemo:ds,useReducer:rh,useRef:Jx,useState:function(){return rh(Yd)},useDebugValue:vm,useDeferredValue:function(h){var g=us();return ym(g,Nr.memoizedState,h)},useTransition:function(){var h=rh(Yd)[0],g=us().memoizedState;return[h,g]},useMutableSource:Vv,useSyncExternalStore:Wv,useId:Al,unstable_isNewReconciler:!1},ab={readContext:ls,useCallback:nb,useContext:ls,useEffect:Yv,useImperativeHandle:Xv,useInsertionEffect:qv,useLayoutEffect:eb,useMemo:ds,useReducer:Nl,useRef:Jx,useState:function(){return Nl(Yd)},useDebugValue:vm,useDeferredValue:function(h){var g=us();return Nr===null?g.memoizedState=h:ym(g,Nr.memoizedState,h)},useTransition:function(){var h=Nl(Yd)[0],g=us().memoizedState;return[h,g]},useMutableSource:Vv,useSyncExternalStore:Wv,useId:Al,unstable_isNewReconciler:!1};function Os(h,g){if(h&&h.defaultProps){g=G({},g),h=h.defaultProps;for(var S in h)g[S]===void 0&&(g[S]=h[S]);return g}return g}function oh(h,g,S,T){g=h.memoizedState,S=S(T,g),S=S==null?g:G({},g,S),h.memoizedState=S,h.lanes===0&&(h.updateQueue.baseState=S)}var Sm={isMounted:function(h){return(h=h._reactInternals)?Oa(h)===h:!1},enqueueSetState:function(h,g,S){h=h._reactInternals;var T=hs(),F=Zd(h),V=Xn(T,F);V.payload=g,S!=null&&(V.callback=S),g=mr(h,V,F),g!==null&&(Dl(g,h,F,T),na(g,h,F))},enqueueReplaceState:function(h,g,S){h=h._reactInternals;var T=hs(),F=Zd(h),V=Xn(T,F);V.tag=1,V.payload=g,S!=null&&(V.callback=S),g=mr(h,V,F),g!==null&&(Dl(g,h,F,T),na(g,h,F))},enqueueForceUpdate:function(h,g){h=h._reactInternals;var S=hs(),T=Zd(h),F=Xn(S,T);F.tag=2,g!=null&&(F.callback=g),g=mr(h,F,T),g!==null&&(Dl(g,h,T,S),na(g,h,T))}};function sb(h,g,S,T,F,V,ne){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(T,V,ne):g.prototype&&g.prototype.isPureReactComponent?!ou(S,T)||!ou(F,V):!0}function x(h,g,S){var T=!1,F=xl,V=g.contextType;return typeof V=="object"&&V!==null?V=ls(V):(F=ta(g)?bl:Fi.current,T=g.contextTypes,V=(T=T!=null)?hu(h,F):xl),g=new g(S,V),h.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Sm,h.stateNode=g,g._reactInternals=h,T&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=F,h.__reactInternalMemoizedMaskedChildContext=V),g}function b(h,g,S,T){h=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(S,T),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(S,T),g.state!==h&&Sm.enqueueReplaceState(g,g.state,null)}function A(h,g,S,T){var F=h.stateNode;F.props=S,F.state=h.memoizedState,F.refs={},vn(h);var V=g.contextType;typeof V=="object"&&V!==null?F.context=ls(V):(V=ta(g)?bl:Fi.current,F.context=hu(h,V)),F.state=h.memoizedState,V=g.getDerivedStateFromProps,typeof V=="function"&&(oh(h,g,V,S),F.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(g=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),g!==F.state&&Sm.enqueueReplaceState(F,F.state,null),Cr(h,S,F,T),F.state=h.memoizedState),typeof F.componentDidMount=="function"&&(h.flags|=4194308)}function D(h,g){try{var S="",T=g;do S+=de(T),T=T.return;while(T);var F=S}catch(V){F=`
Error generating stack: `+V.message+`
`+V.stack}return{value:h,source:g,stack:F,digest:null}}function H(h,g,S){return{value:h,source:null,stack:S??null,digest:g??null}}function K(h,g){try{console.error(g.value)}catch(S){setTimeout(function(){throw S})}}var me=typeof WeakMap=="function"?WeakMap:Map;function Me(h,g,S){S=Xn(-1,S),S.tag=3,S.payload={element:null};var T=g.value;return S.callback=function(){hb||(hb=!0,kE=T),K(h,g)},S}function at(h,g,S){S=Xn(-1,S),S.tag=3;var T=h.type.getDerivedStateFromError;if(typeof T=="function"){var F=g.value;S.payload=function(){return T(F)},S.callback=function(){K(h,g)}}var V=h.stateNode;return V!==null&&typeof V.componentDidCatch=="function"&&(S.callback=function(){K(h,g),typeof T!="function"&&(Xd===null?Xd=new Set([this]):Xd.add(this));var ne=g.stack;this.componentDidCatch(g.value,{componentStack:ne!==null?ne:""})}),S}function vt(h,g,S){var T=h.pingCache;if(T===null){T=h.pingCache=new me;var F=new Set;T.set(g,F)}else F=T.get(g),F===void 0&&(F=new Set,T.set(g,F));F.has(S)||(F.add(S),h=Y$.bind(null,h,g,S),g.then(h,h))}function Dt(h){do{var g;if((g=h.tag===13)&&(g=h.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return h;h=h.return}while(h!==null);return null}function un(h,g,S,T,F){return(h.mode&1)===0?(h===g?h.flags|=65536:(h.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:(g=Xn(-1,1),g.tag=2,mr(S,g,1))),S.lanes|=1),h):(h.flags|=65536,h.lanes=F,h)}var Xt=N.ReactCurrentOwner,xn=!1;function Nt(h,g,S,T){g.child=h===null?Kf(g,null,S,T):vu(g,h.child,S,T)}function Hi(h,g,S,T,F){S=S.render;var V=g.ref;return vc(g,F),T=nh(h,g,S,T,V,F),S=Hv(),h!==null&&!xn?(g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~F,Nu(h,g,F)):(ur&&S&&Ov(g),g.flags|=1,Nt(h,g,T,F),g.child)}function fs(h,g,S,T,F){if(h===null){var V=S.type;return typeof V=="function"&&!BE(V)&&V.defaultProps===void 0&&S.compare===null&&S.defaultProps===void 0?(g.tag=15,g.type=V,ze(h,g,V,T,F)):(h=xb(S.type,null,T,g,g.mode,F),h.ref=g.ref,h.return=g,g.child=h)}if(V=h.child,(h.lanes&F)===0){var ne=V.memoizedProps;if(S=S.compare,S=S!==null?S:ou,S(ne,T)&&h.ref===g.ref)return Nu(h,g,F)}return g.flags|=1,h=Jd(V,T),h.ref=g.ref,h.return=g,g.child=h}function ze(h,g,S,T,F){if(h!==null){var V=h.memoizedProps;if(ou(V,T)&&h.ref===g.ref)if(xn=!1,g.pendingProps=T=V,(h.lanes&F)!==0)(h.flags&131072)!==0&&(xn=!0);else return g.lanes=h.lanes,Nu(h,g,F)}return Et(h,g,S,T,F)}function Re(h,g,S){var T=g.pendingProps,F=T.children,V=h!==null?h.memoizedState:null;if(T.mode==="hidden")if((g.mode&1)===0)g.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jn(Mm,mo),mo|=S;else{if((S&1073741824)===0)return h=V!==null?V.baseLanes|S:S,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:h,cachePool:null,transitions:null},g.updateQueue=null,Jn(Mm,mo),mo|=h,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},T=V!==null?V.baseLanes:S,Jn(Mm,mo),mo|=T}else V!==null?(T=V.baseLanes|S,g.memoizedState=null):T=S,Jn(Mm,mo),mo|=T;return Nt(h,g,F,S),g.child}function et(h,g){var S=g.ref;(h===null&&S!==null||h!==null&&h.ref!==S)&&(g.flags|=512,g.flags|=2097152)}function Et(h,g,S,T,F){var V=ta(S)?bl:Fi.current;return V=hu(g,V),vc(g,F),S=nh(h,g,S,T,V,F),T=Hv(),h!==null&&!xn?(g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~F,Nu(h,g,F)):(ur&&T&&Ov(g),g.flags|=1,Nt(h,g,S,F),g.child)}function Ht(h,g,S,T,F){if(ta(S)){var V=!0;pu(g)}else V=!1;if(vc(g,F),g.stateNode===null)lb(h,g),x(g,S,T),A(g,S,T,F),T=!0;else if(h===null){var ne=g.stateNode,ve=g.memoizedProps;ne.props=ve;var _e=ne.context,Ye=S.contextType;typeof Ye=="object"&&Ye!==null?Ye=ls(Ye):(Ye=ta(S)?bl:Fi.current,Ye=hu(g,Ye));var pt=S.getDerivedStateFromProps,mt=typeof pt=="function"||typeof ne.getSnapshotBeforeUpdate=="function";mt||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(ve!==T||_e!==Ye)&&b(g,ne,T,Ye),qn=!1;var ht=g.memoizedState;ne.state=ht,Cr(g,T,ne,F),_e=g.memoizedState,ve!==T||ht!==_e||ga.current||qn?(typeof pt=="function"&&(oh(g,S,pt,T),_e=g.memoizedState),(ve=qn||sb(g,S,ve,T,ht,_e,Ye))?(mt||typeof ne.UNSAFE_componentWillMount!="function"&&typeof ne.componentWillMount!="function"||(typeof ne.componentWillMount=="function"&&ne.componentWillMount(),typeof ne.UNSAFE_componentWillMount=="function"&&ne.UNSAFE_componentWillMount()),typeof ne.componentDidMount=="function"&&(g.flags|=4194308)):(typeof ne.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=T,g.memoizedState=_e),ne.props=T,ne.state=_e,ne.context=Ye,T=ve):(typeof ne.componentDidMount=="function"&&(g.flags|=4194308),T=!1)}else{ne=g.stateNode,Ur(h,g),ve=g.memoizedProps,Ye=g.type===g.elementType?ve:Os(g.type,ve),ne.props=Ye,mt=g.pendingProps,ht=ne.context,_e=S.contextType,typeof _e=="object"&&_e!==null?_e=ls(_e):(_e=ta(S)?bl:Fi.current,_e=hu(g,_e));var Tt=S.getDerivedStateFromProps;(pt=typeof Tt=="function"||typeof ne.getSnapshotBeforeUpdate=="function")||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(ve!==mt||ht!==_e)&&b(g,ne,T,_e),qn=!1,ht=g.memoizedState,ne.state=ht,Cr(g,T,ne,F);var Ut=g.memoizedState;ve!==mt||ht!==Ut||ga.current||qn?(typeof Tt=="function"&&(oh(g,S,Tt,T),Ut=g.memoizedState),(Ye=qn||sb(g,S,Ye,T,ht,Ut,_e)||!1)?(pt||typeof ne.UNSAFE_componentWillUpdate!="function"&&typeof ne.componentWillUpdate!="function"||(typeof ne.componentWillUpdate=="function"&&ne.componentWillUpdate(T,Ut,_e),typeof ne.UNSAFE_componentWillUpdate=="function"&&ne.UNSAFE_componentWillUpdate(T,Ut,_e)),typeof ne.componentDidUpdate=="function"&&(g.flags|=4),typeof ne.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof ne.componentDidUpdate!="function"||ve===h.memoizedProps&&ht===h.memoizedState||(g.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||ve===h.memoizedProps&&ht===h.memoizedState||(g.flags|=1024),g.memoizedProps=T,g.memoizedState=Ut),ne.props=T,ne.state=Ut,ne.context=_e,T=Ye):(typeof ne.componentDidUpdate!="function"||ve===h.memoizedProps&&ht===h.memoizedState||(g.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||ve===h.memoizedProps&&ht===h.memoizedState||(g.flags|=1024),T=!1)}return hn(h,g,S,T,V,F)}function hn(h,g,S,T,F,V){et(h,g);var ne=(g.flags&128)!==0;if(!T&&!ne)return F&&kv(g,S,!1),Nu(h,g,V);T=g.stateNode,Xt.current=g;var ve=ne&&typeof S.getDerivedStateFromError!="function"?null:T.render();return g.flags|=1,h!==null&&ne?(g.child=vu(g,h.child,null,V),g.child=vu(g,null,ve,V)):Nt(h,g,ve,V),g.memoizedState=T.state,F&&kv(g,S,!0),g.child}function dn(h){var g=h.stateNode;g.pendingContext?Dv(h,g.pendingContext,g.pendingContext!==g.context):g.context&&Dv(h,g.context,!1),eh(h,g.containerInfo)}function Dn(h,g,S,T,F){return gc(),Hd(F),g.flags|=256,Nt(h,g,S,T),g.child}var Xr={dehydrated:null,treeContext:null,retryLane:0};function Pn(h){return{baseLanes:h,cachePool:null,transitions:null}}function Tl(h,g,S){var T=g.pendingProps,F=dr.current,V=!1,ne=(g.flags&128)!==0,ve;if((ve=ne)||(ve=h!==null&&h.memoizedState===null?!1:(F&2)!==0),ve?(V=!0,g.flags&=-129):(h===null||h.memoizedState!==null)&&(F|=1),Jn(dr,F&1),h===null)return pm(g),h=g.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((g.mode&1)===0?g.lanes=1:h.data==="$!"?g.lanes=8:g.lanes=1073741824,null):(ne=T.children,h=T.fallback,V?(T=g.mode,V=g.child,ne={mode:"hidden",children:ne},(T&1)===0&&V!==null?(V.childLanes=0,V.pendingProps=ne):V=bb(ne,T,0,null),h=fh(h,T,S,null),V.return=g,h.return=g,V.sibling=h,g.child=V,g.child.memoizedState=Pn(S),g.memoizedState=Xr,h):Kv(g,ne));if(F=h.memoizedState,F!==null&&(ve=F.dehydrated,ve!==null))return O$(h,g,ne,T,ve,F,S);if(V){V=T.fallback,ne=g.mode,F=h.child,ve=F.sibling;var _e={mode:"hidden",children:T.children};return(ne&1)===0&&g.child!==F?(T=g.child,T.childLanes=0,T.pendingProps=_e,g.deletions=null):(T=Jd(F,_e),T.subtreeFlags=F.subtreeFlags&14680064),ve!==null?V=Jd(ve,V):(V=fh(V,ne,S,null),V.flags|=2),V.return=g,T.return=g,T.sibling=V,g.child=T,T=V,V=g.child,ne=h.child.memoizedState,ne=ne===null?Pn(S):{baseLanes:ne.baseLanes|S,cachePool:null,transitions:ne.transitions},V.memoizedState=ne,V.childLanes=h.childLanes&~S,g.memoizedState=Xr,T}return V=h.child,h=V.sibling,T=Jd(V,{mode:"visible",children:T.children}),(g.mode&1)===0&&(T.lanes=S),T.return=g,T.sibling=null,h!==null&&(S=g.deletions,S===null?(g.deletions=[h],g.flags|=16):S.push(h)),g.child=T,g.memoizedState=null,T}function Kv(h,g){return g=bb({mode:"visible",children:g},h.mode,0,null),g.return=h,h.child=g}function ob(h,g,S,T){return T!==null&&Hd(T),vu(g,h.child,null,S),h=Kv(g,g.pendingProps.children),h.flags|=2,g.memoizedState=null,h}function O$(h,g,S,T,F,V,ne){if(S)return g.flags&256?(g.flags&=-257,T=H(Error(n(422))),ob(h,g,ne,T)):g.memoizedState!==null?(g.child=h.child,g.flags|=128,null):(V=T.fallback,F=g.mode,T=bb({mode:"visible",children:T.children},F,0,null),V=fh(V,F,ne,null),V.flags|=2,T.return=g,V.return=g,T.sibling=V,g.child=T,(g.mode&1)!==0&&vu(g,h.child,null,ne),g.child.memoizedState=Pn(ne),g.memoizedState=Xr,V);if((g.mode&1)===0)return ob(h,g,ne,null);if(F.data==="$!"){if(T=F.nextSibling&&F.nextSibling.dataset,T)var ve=T.dgst;return T=ve,V=Error(n(419)),T=H(V,T,void 0),ob(h,g,ne,T)}if(ve=(ne&h.childLanes)!==0,xn||ve){if(T=ia,T!==null){switch(ne&-ne){case 4:F=2;break;case 16:F=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:F=32;break;case 536870912:F=268435456;break;default:F=0}F=(F&(T.suspendedLanes|ne))!==0?0:F,F!==0&&F!==V.retryLane&&(V.retryLane=F,uo(h,F),Dl(T,h,F,-1))}return UE(),T=H(Error(n(421))),ob(h,g,ne,T)}return F.data==="$?"?(g.flags|=128,g.child=h.child,g=q$.bind(null,h),F._reactRetry=g,null):(h=V.treeContext,ya=vl(F.nextSibling),Ui=g,ur=!0,js=null,h!==null&&(va[Ni++]=bt,va[Ni++]=ks,va[Ni++]=gu,bt=h.id,ks=h.overflow,gu=g),g=Kv(g,T.children),g.flags|=4096,g)}function Mk(h,g,S){h.lanes|=g;var T=h.alternate;T!==null&&(T.lanes|=g),Qf(h.return,g,S)}function EE(h,g,S,T,F){var V=h.memoizedState;V===null?h.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:T,tail:S,tailMode:F}:(V.isBackwards=g,V.rendering=null,V.renderingStartTime=0,V.last=T,V.tail=S,V.tailMode=F)}function Ck(h,g,S){var T=g.pendingProps,F=T.revealOrder,V=T.tail;if(Nt(h,g,T.children,S),T=dr.current,(T&2)!==0)T=T&1|2,g.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=g.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&Mk(h,S,g);else if(h.tag===19)Mk(h,S,g);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===g)break e;for(;h.sibling===null;){if(h.return===null||h.return===g)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}T&=1}if(Jn(dr,T),(g.mode&1)===0)g.memoizedState=null;else switch(F){case"forwards":for(S=g.child,F=null;S!==null;)h=S.alternate,h!==null&&fo(h)===null&&(F=S),S=S.sibling;S=F,S===null?(F=g.child,g.child=null):(F=S.sibling,S.sibling=null),EE(g,!1,F,S,V);break;case"backwards":for(S=null,F=g.child,g.child=null;F!==null;){if(h=F.alternate,h!==null&&fo(h)===null){g.child=F;break}h=F.sibling,F.sibling=S,S=F,F=h}EE(g,!0,S,null,V);break;case"together":EE(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function lb(h,g){(g.mode&1)===0&&h!==null&&(h.alternate=null,g.alternate=null,g.flags|=2)}function Nu(h,g,S){if(h!==null&&(g.dependencies=h.dependencies),lh|=g.lanes,(S&g.childLanes)===0)return null;if(h!==null&&g.child!==h.child)throw Error(n(153));if(g.child!==null){for(h=g.child,S=Jd(h,h.pendingProps),g.child=S,S.return=g;h.sibling!==null;)h=h.sibling,S=S.sibling=Jd(h,h.pendingProps),S.return=g;S.sibling=null}return g.child}function I$(h,g,S){switch(g.tag){case 3:dn(g),gc();break;case 5:Su(g);break;case 1:ta(g.type)&&pu(g);break;case 4:eh(g,g.stateNode.containerInfo);break;case 10:var T=g.type._context,F=g.memoizedProps.value;Jn(yu,T._currentValue),T._currentValue=F;break;case 13:if(T=g.memoizedState,T!==null)return T.dehydrated!==null?(Jn(dr,dr.current&1),g.flags|=128,null):(S&g.child.childLanes)!==0?Tl(h,g,S):(Jn(dr,dr.current&1),h=Nu(h,g,S),h!==null?h.sibling:null);Jn(dr,dr.current&1);break;case 19:if(T=(S&g.childLanes)!==0,(h.flags&128)!==0){if(T)return Ck(h,g,S);g.flags|=128}if(F=g.memoizedState,F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),Jn(dr,dr.current),T)break;return null;case 22:case 23:return g.lanes=0,Re(h,g,S)}return Nu(h,g,S)}var Nk,ME,Ak,Tk;Nk=function(h,g){for(var S=g.child;S!==null;){if(S.tag===5||S.tag===6)h.appendChild(S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===g)break;for(;S.sibling===null;){if(S.return===null||S.return===g)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},ME=function(){},Ak=function(h,g,S,T){var F=h.memoizedProps;if(F!==T){h=g.stateNode,qr(cs.current);var V=null;switch(S){case"input":F=oe(h,F),T=oe(h,T),V=[];break;case"select":F=G({},F,{value:void 0}),T=G({},T,{value:void 0}),V=[];break;case"textarea":F=Q(h,F),T=Q(h,T),V=[];break;default:typeof F.onClick!="function"&&typeof T.onClick=="function"&&(h.onclick=Vf)}pe(S,T);var ne;S=null;for(Ye in F)if(!T.hasOwnProperty(Ye)&&F.hasOwnProperty(Ye)&&F[Ye]!=null)if(Ye==="style"){var ve=F[Ye];for(ne in ve)ve.hasOwnProperty(ne)&&(S||(S={}),S[ne]="")}else Ye!=="dangerouslySetInnerHTML"&&Ye!=="children"&&Ye!=="suppressContentEditableWarning"&&Ye!=="suppressHydrationWarning"&&Ye!=="autoFocus"&&(i.hasOwnProperty(Ye)?V||(V=[]):(V=V||[]).push(Ye,null));for(Ye in T){var _e=T[Ye];if(ve=F?.[Ye],T.hasOwnProperty(Ye)&&_e!==ve&&(_e!=null||ve!=null))if(Ye==="style")if(ve){for(ne in ve)!ve.hasOwnProperty(ne)||_e&&_e.hasOwnProperty(ne)||(S||(S={}),S[ne]="");for(ne in _e)_e.hasOwnProperty(ne)&&ve[ne]!==_e[ne]&&(S||(S={}),S[ne]=_e[ne])}else S||(V||(V=[]),V.push(Ye,S)),S=_e;else Ye==="dangerouslySetInnerHTML"?(_e=_e?_e.__html:void 0,ve=ve?ve.__html:void 0,_e!=null&&ve!==_e&&(V=V||[]).push(Ye,_e)):Ye==="children"?typeof _e!="string"&&typeof _e!="number"||(V=V||[]).push(Ye,""+_e):Ye!=="suppressContentEditableWarning"&&Ye!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ye)?(_e!=null&&Ye==="onScroll"&&sr("scroll",h),V||ve===_e||(V=[])):(V=V||[]).push(Ye,_e))}S&&(V=V||[]).push("style",S);var Ye=V;(g.updateQueue=Ye)&&(g.flags|=4)}},Tk=function(h,g,S,T){S!==T&&(g.flags|=4)};function Zv(h,g){if(!ur)switch(h.tailMode){case"hidden":g=h.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?h.tail=null:S.sibling=null;break;case"collapsed":S=h.tail;for(var T=null;S!==null;)S.alternate!==null&&(T=S),S=S.sibling;T===null?g||h.tail===null?h.tail=null:h.tail.sibling=null:T.sibling=null}}function za(h){var g=h.alternate!==null&&h.alternate.child===h.child,S=0,T=0;if(g)for(var F=h.child;F!==null;)S|=F.lanes|F.childLanes,T|=F.subtreeFlags&14680064,T|=F.flags&14680064,F.return=h,F=F.sibling;else for(F=h.child;F!==null;)S|=F.lanes|F.childLanes,T|=F.subtreeFlags,T|=F.flags,F.return=h,F=F.sibling;return h.subtreeFlags|=T,h.childLanes=S,g}function L$(h,g,S){var T=g.pendingProps;switch(wl(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return za(g),null;case 1:return ta(g.type)&&Wf(),za(g),null;case 3:return T=g.stateNode,yc(),or(ga),or(Fi),zo(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(h===null||h.child===null)&&(zd(g)?g.flags|=4:h===null||h.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,js!==null&&(IE(js),js=null))),ME(h,g),za(g),null;case 5:Gd(g);var F=qr(Ml.current);if(S=g.type,h!==null&&g.stateNode!=null)Ak(h,g,S,T,F),h.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!T){if(g.stateNode===null)throw Error(n(166));return za(g),null}if(h=qr(cs.current),zd(g)){T=g.stateNode,S=g.type;var V=g.memoizedProps;switch(T[ci]=g,T[Bd]=V,h=(g.mode&1)!==0,S){case"dialog":sr("cancel",T),sr("close",T);break;case"iframe":case"object":case"embed":sr("load",T);break;case"video":case"audio":for(F=0;F<pc.length;F++)sr(pc[F],T);break;case"source":sr("error",T);break;case"img":case"image":case"link":sr("error",T),sr("load",T);break;case"details":sr("toggle",T);break;case"input":tt(T,V),sr("invalid",T);break;case"select":T._wrapperState={wasMultiple:!!V.multiple},sr("invalid",T);break;case"textarea":ye(T,V),sr("invalid",T)}pe(S,V),F=null;for(var ne in V)if(V.hasOwnProperty(ne)){var ve=V[ne];ne==="children"?typeof ve=="string"?T.textContent!==ve&&(V.suppressHydrationWarning!==!0&&Hf(T.textContent,ve,h),F=["children",ve]):typeof ve=="number"&&T.textContent!==""+ve&&(V.suppressHydrationWarning!==!0&&Hf(T.textContent,ve,h),F=["children",""+ve]):i.hasOwnProperty(ne)&&ve!=null&&ne==="onScroll"&&sr("scroll",T)}switch(S){case"input":Se(T),Ce(T,V,!0);break;case"textarea":Se(T),De(T);break;case"select":case"option":break;default:typeof V.onClick=="function"&&(T.onclick=Vf)}T=F,g.updateQueue=T,T!==null&&(g.flags|=4)}else{ne=F.nodeType===9?F:F.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=Ue(S)),h==="http://www.w3.org/1999/xhtml"?S==="script"?(h=ne.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof T.is=="string"?h=ne.createElement(S,{is:T.is}):(h=ne.createElement(S),S==="select"&&(ne=h,T.multiple?ne.multiple=!0:T.size&&(ne.size=T.size))):h=ne.createElementNS(h,S),h[ci]=g,h[Bd]=T,Nk(h,g,!1,!1),g.stateNode=h;e:{switch(ne=je(S,T),S){case"dialog":sr("cancel",h),sr("close",h),F=T;break;case"iframe":case"object":case"embed":sr("load",h),F=T;break;case"video":case"audio":for(F=0;F<pc.length;F++)sr(pc[F],h);F=T;break;case"source":sr("error",h),F=T;break;case"img":case"image":case"link":sr("error",h),sr("load",h),F=T;break;case"details":sr("toggle",h),F=T;break;case"input":tt(h,T),F=oe(h,T),sr("invalid",h);break;case"option":F=T;break;case"select":h._wrapperState={wasMultiple:!!T.multiple},F=G({},T,{value:void 0}),sr("invalid",h);break;case"textarea":ye(h,T),F=Q(h,T),sr("invalid",h);break;default:F=T}pe(S,F),ve=F;for(V in ve)if(ve.hasOwnProperty(V)){var _e=ve[V];V==="style"?Qe(h,_e):V==="dangerouslySetInnerHTML"?(_e=_e?_e.__html:void 0,_e!=null&&ot(h,_e)):V==="children"?typeof _e=="string"?(S!=="textarea"||_e!=="")&&xt(h,_e):typeof _e=="number"&&xt(h,""+_e):V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&V!=="autoFocus"&&(i.hasOwnProperty(V)?_e!=null&&V==="onScroll"&&sr("scroll",h):_e!=null&&C(h,V,_e,ne))}switch(S){case"input":Se(h),Ce(h,T,!1);break;case"textarea":Se(h),De(h);break;case"option":T.value!=null&&h.setAttribute("value",""+le(T.value));break;case"select":h.multiple=!!T.multiple,V=T.value,V!=null?J(h,!!T.multiple,V,!1):T.defaultValue!=null&&J(h,!!T.multiple,T.defaultValue,!0);break;default:typeof F.onClick=="function"&&(h.onclick=Vf)}switch(S){case"button":case"input":case"select":case"textarea":T=!!T.autoFocus;break e;case"img":T=!0;break e;default:T=!1}}T&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return za(g),null;case 6:if(h&&g.stateNode!=null)Tk(h,g,h.memoizedProps,T);else{if(typeof T!="string"&&g.stateNode===null)throw Error(n(166));if(S=qr(Ml.current),qr(cs.current),zd(g)){if(T=g.stateNode,S=g.memoizedProps,T[ci]=g,(V=T.nodeValue!==S)&&(h=Ui,h!==null))switch(h.tag){case 3:Hf(T.nodeValue,S,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&Hf(T.nodeValue,S,(h.mode&1)!==0)}V&&(g.flags|=4)}else T=(S.nodeType===9?S:S.ownerDocument).createTextNode(T),T[ci]=g,g.stateNode=T}return za(g),null;case 13:if(or(dr),T=g.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(ur&&ya!==null&&(g.mode&1)!==0&&(g.flags&128)===0)Fv(),gc(),g.flags|=98560,V=!1;else if(V=zd(g),T!==null&&T.dehydrated!==null){if(h===null){if(!V)throw Error(n(318));if(V=g.memoizedState,V=V!==null?V.dehydrated:null,!V)throw Error(n(317));V[ci]=g}else gc(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;za(g),V=!1}else js!==null&&(IE(js),js=null),V=!0;if(!V)return g.flags&65536?g:null}return(g.flags&128)!==0?(g.lanes=S,g):(T=T!==null,T!==(h!==null&&h.memoizedState!==null)&&T&&(g.child.flags|=8192,(g.mode&1)!==0&&(h===null||(dr.current&1)!==0?Vi===0&&(Vi=3):UE())),g.updateQueue!==null&&(g.flags|=4),za(g),null);case 4:return yc(),ME(h,g),h===null&&Ld(g.stateNode.containerInfo),za(g),null;case 10:return Zf(g.type._context),za(g),null;case 17:return ta(g.type)&&Wf(),za(g),null;case 19:if(or(dr),V=g.memoizedState,V===null)return za(g),null;if(T=(g.flags&128)!==0,ne=V.rendering,ne===null)if(T)Zv(V,!1);else{if(Vi!==0||h!==null&&(h.flags&128)!==0)for(h=g.child;h!==null;){if(ne=fo(h),ne!==null){for(g.flags|=128,Zv(V,!1),T=ne.updateQueue,T!==null&&(g.updateQueue=T,g.flags|=4),g.subtreeFlags=0,T=S,S=g.child;S!==null;)V=S,h=T,V.flags&=14680066,ne=V.alternate,ne===null?(V.childLanes=0,V.lanes=h,V.child=null,V.subtreeFlags=0,V.memoizedProps=null,V.memoizedState=null,V.updateQueue=null,V.dependencies=null,V.stateNode=null):(V.childLanes=ne.childLanes,V.lanes=ne.lanes,V.child=ne.child,V.subtreeFlags=0,V.deletions=null,V.memoizedProps=ne.memoizedProps,V.memoizedState=ne.memoizedState,V.updateQueue=ne.updateQueue,V.type=ne.type,h=ne.dependencies,V.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),S=S.sibling;return Jn(dr,dr.current&1|2),g.child}h=h.sibling}V.tail!==null&&He()>Cm&&(g.flags|=128,T=!0,Zv(V,!1),g.lanes=4194304)}else{if(!T)if(h=fo(ne),h!==null){if(g.flags|=128,T=!0,S=h.updateQueue,S!==null&&(g.updateQueue=S,g.flags|=4),Zv(V,!0),V.tail===null&&V.tailMode==="hidden"&&!ne.alternate&&!ur)return za(g),null}else 2*He()-V.renderingStartTime>Cm&&S!==1073741824&&(g.flags|=128,T=!0,Zv(V,!1),g.lanes=4194304);V.isBackwards?(ne.sibling=g.child,g.child=ne):(S=V.last,S!==null?S.sibling=ne:g.child=ne,V.last=ne)}return V.tail!==null?(g=V.tail,V.rendering=g,V.tail=g.sibling,V.renderingStartTime=He(),g.sibling=null,S=dr.current,Jn(dr,T?S&1|2:S&1),g):(za(g),null);case 22:case 23:return FE(),T=g.memoizedState!==null,h!==null&&h.memoizedState!==null!==T&&(g.flags|=8192),T&&(g.mode&1)!==0?(mo&1073741824)!==0&&(za(g),g.subtreeFlags&6&&(g.flags|=8192)):za(g),null;case 24:return null;case 25:return null}throw Error(n(156,g.tag))}function F$(h,g){switch(wl(g),g.tag){case 1:return ta(g.type)&&Wf(),h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 3:return yc(),or(ga),or(Fi),zo(),h=g.flags,(h&65536)!==0&&(h&128)===0?(g.flags=h&-65537|128,g):null;case 5:return Gd(g),null;case 13:if(or(dr),h=g.memoizedState,h!==null&&h.dehydrated!==null){if(g.alternate===null)throw Error(n(340));gc()}return h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 19:return or(dr),null;case 4:return yc(),null;case 10:return Zf(g.type._context),null;case 22:case 23:return FE(),null;case 24:return null;default:return null}}var cb=!1,Ha=!1,U$=typeof WeakSet=="function"?WeakSet:Set,It=null;function Em(h,g){var S=h.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(T){Kr(h,g,T)}else S.current=null}function CE(h,g,S){try{S()}catch(T){Kr(h,g,T)}}var Pk=!1;function B$(h,g){if(Ud=bi,h=br(),Si(h)){if("selectionStart"in h)var S={start:h.selectionStart,end:h.selectionEnd};else e:{S=(S=h.ownerDocument)&&S.defaultView||window;var T=S.getSelection&&S.getSelection();if(T&&T.rangeCount!==0){S=T.anchorNode;var F=T.anchorOffset,V=T.focusNode;T=T.focusOffset;try{S.nodeType,V.nodeType}catch{S=null;break e}var ne=0,ve=-1,_e=-1,Ye=0,pt=0,mt=h,ht=null;t:for(;;){for(var Tt;mt!==S||F!==0&&mt.nodeType!==3||(ve=ne+F),mt!==V||T!==0&&mt.nodeType!==3||(_e=ne+T),mt.nodeType===3&&(ne+=mt.nodeValue.length),(Tt=mt.firstChild)!==null;)ht=mt,mt=Tt;for(;;){if(mt===h)break t;if(ht===S&&++Ye===F&&(ve=ne),ht===V&&++pt===T&&(_e=ne),(Tt=mt.nextSibling)!==null)break;mt=ht,ht=mt.parentNode}mt=Tt}S=ve===-1||_e===-1?null:{start:ve,end:_e}}else S=null}S=S||{start:0,end:0}}else S=null;for(Cv={focusedElem:h,selectionRange:S},bi=!1,It=g;It!==null;)if(g=It,h=g.child,(g.subtreeFlags&1028)!==0&&h!==null)h.return=g,It=h;else for(;It!==null;){g=It;try{var Ut=g.alternate;if((g.flags&1024)!==0)switch(g.tag){case 0:case 11:case 15:break;case 1:if(Ut!==null){var zt=Ut.memoizedProps,ui=Ut.memoizedState,Ie=g.stateNode,Ee=Ie.getSnapshotBeforeUpdate(g.elementType===g.type?zt:Os(g.type,zt),ui);Ie.__reactInternalSnapshotBeforeUpdate=Ee}break;case 3:var Fe=g.stateNode.containerInfo;Fe.nodeType===1?Fe.textContent="":Fe.nodeType===9&&Fe.documentElement&&Fe.removeChild(Fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(yt){Kr(g,g.return,yt)}if(h=g.sibling,h!==null){h.return=g.return,It=h;break}It=g.return}return Ut=Pk,Pk=!1,Ut}function Qv(h,g,S){var T=g.updateQueue;if(T=T!==null?T.lastEffect:null,T!==null){var F=T=T.next;do{if((F.tag&h)===h){var V=F.destroy;F.destroy=void 0,V!==void 0&&CE(g,S,V)}F=F.next}while(F!==T)}}function ub(h,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var S=g=g.next;do{if((S.tag&h)===h){var T=S.create;S.destroy=T()}S=S.next}while(S!==g)}}function NE(h){var g=h.ref;if(g!==null){var S=h.stateNode;switch(h.tag){case 5:h=S;break;default:h=S}typeof g=="function"?g(h):g.current=h}}function Rk(h){var g=h.alternate;g!==null&&(h.alternate=null,Rk(g)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(g=h.stateNode,g!==null&&(delete g[ci],delete g[Bd],delete g[fu],delete g[om],delete g[lm])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function Dk(h){return h.tag===5||h.tag===3||h.tag===4}function kk(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||Dk(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function AE(h,g,S){var T=h.tag;if(T===5||T===6)h=h.stateNode,g?S.nodeType===8?S.parentNode.insertBefore(h,g):S.insertBefore(h,g):(S.nodeType===8?(g=S.parentNode,g.insertBefore(h,S)):(g=S,g.appendChild(h)),S=S._reactRootContainer,S!=null||g.onclick!==null||(g.onclick=Vf));else if(T!==4&&(h=h.child,h!==null))for(AE(h,g,S),h=h.sibling;h!==null;)AE(h,g,S),h=h.sibling}function TE(h,g,S){var T=h.tag;if(T===5||T===6)h=h.stateNode,g?S.insertBefore(h,g):S.appendChild(h);else if(T!==4&&(h=h.child,h!==null))for(TE(h,g,S),h=h.sibling;h!==null;)TE(h,g,S),h=h.sibling}var ba=null,Pl=!1;function qd(h,g,S){for(S=S.child;S!==null;)jk(h,g,S),S=S.sibling}function jk(h,g,S){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(fn,S)}catch{}switch(S.tag){case 5:Ha||Em(S,g);case 6:var T=ba,F=Pl;ba=null,qd(h,g,S),ba=T,Pl=F,ba!==null&&(Pl?(h=ba,S=S.stateNode,h.nodeType===8?h.parentNode.removeChild(S):h.removeChild(S)):ba.removeChild(S.stateNode));break;case 18:ba!==null&&(Pl?(h=ba,S=S.stateNode,h.nodeType===8?sm(h.parentNode,S):h.nodeType===1&&sm(h,S),sc(h)):sm(ba,S.stateNode));break;case 4:T=ba,F=Pl,ba=S.stateNode.containerInfo,Pl=!0,qd(h,g,S),ba=T,Pl=F;break;case 0:case 11:case 14:case 15:if(!Ha&&(T=S.updateQueue,T!==null&&(T=T.lastEffect,T!==null))){F=T=T.next;do{var V=F,ne=V.destroy;V=V.tag,ne!==void 0&&((V&2)!==0||(V&4)!==0)&&CE(S,g,ne),F=F.next}while(F!==T)}qd(h,g,S);break;case 1:if(!Ha&&(Em(S,g),T=S.stateNode,typeof T.componentWillUnmount=="function"))try{T.props=S.memoizedProps,T.state=S.memoizedState,T.componentWillUnmount()}catch(ve){Kr(S,g,ve)}qd(h,g,S);break;case 21:qd(h,g,S);break;case 22:S.mode&1?(Ha=(T=Ha)||S.memoizedState!==null,qd(h,g,S),Ha=T):qd(h,g,S);break;default:qd(h,g,S)}}function Ok(h){var g=h.updateQueue;if(g!==null){h.updateQueue=null;var S=h.stateNode;S===null&&(S=h.stateNode=new U$),g.forEach(function(T){var F=X$.bind(null,h,T);S.has(T)||(S.add(T),T.then(F,F))})}}function Rl(h,g){var S=g.deletions;if(S!==null)for(var T=0;T<S.length;T++){var F=S[T];try{var V=h,ne=g,ve=ne;e:for(;ve!==null;){switch(ve.tag){case 5:ba=ve.stateNode,Pl=!1;break e;case 3:ba=ve.stateNode.containerInfo,Pl=!0;break e;case 4:ba=ve.stateNode.containerInfo,Pl=!0;break e}ve=ve.return}if(ba===null)throw Error(n(160));jk(V,ne,F),ba=null,Pl=!1;var _e=F.alternate;_e!==null&&(_e.return=null),F.return=null}catch(Ye){Kr(F,g,Ye)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)Ik(g,h),g=g.sibling}function Ik(h,g){var S=h.alternate,T=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(Rl(g,h),bc(h),T&4){try{Qv(3,h,h.return),ub(3,h)}catch(zt){Kr(h,h.return,zt)}try{Qv(5,h,h.return)}catch(zt){Kr(h,h.return,zt)}}break;case 1:Rl(g,h),bc(h),T&512&&S!==null&&Em(S,S.return);break;case 5:if(Rl(g,h),bc(h),T&512&&S!==null&&Em(S,S.return),h.flags&32){var F=h.stateNode;try{xt(F,"")}catch(zt){Kr(h,h.return,zt)}}if(T&4&&(F=h.stateNode,F!=null)){var V=h.memoizedProps,ne=S!==null?S.memoizedProps:V,ve=h.type,_e=h.updateQueue;if(h.updateQueue=null,_e!==null)try{ve==="input"&&V.type==="radio"&&V.name!=null&&ke(F,V),je(ve,ne);var Ye=je(ve,V);for(ne=0;ne<_e.length;ne+=2){var pt=_e[ne],mt=_e[ne+1];pt==="style"?Qe(F,mt):pt==="dangerouslySetInnerHTML"?ot(F,mt):pt==="children"?xt(F,mt):C(F,pt,mt,Ye)}switch(ve){case"input":st(F,V);break;case"textarea":we(F,V);break;case"select":var ht=F._wrapperState.wasMultiple;F._wrapperState.wasMultiple=!!V.multiple;var Tt=V.value;Tt!=null?J(F,!!V.multiple,Tt,!1):ht!==!!V.multiple&&(V.defaultValue!=null?J(F,!!V.multiple,V.defaultValue,!0):J(F,!!V.multiple,V.multiple?[]:"",!1))}F[Bd]=V}catch(zt){Kr(h,h.return,zt)}}break;case 6:if(Rl(g,h),bc(h),T&4){if(h.stateNode===null)throw Error(n(162));F=h.stateNode,V=h.memoizedProps;try{F.nodeValue=V}catch(zt){Kr(h,h.return,zt)}}break;case 3:if(Rl(g,h),bc(h),T&4&&S!==null&&S.memoizedState.isDehydrated)try{sc(g.containerInfo)}catch(zt){Kr(h,h.return,zt)}break;case 4:Rl(g,h),bc(h);break;case 13:Rl(g,h),bc(h),F=h.child,F.flags&8192&&(V=F.memoizedState!==null,F.stateNode.isHidden=V,!V||F.alternate!==null&&F.alternate.memoizedState!==null||(DE=He())),T&4&&Ok(h);break;case 22:if(pt=S!==null&&S.memoizedState!==null,h.mode&1?(Ha=(Ye=Ha)||pt,Rl(g,h),Ha=Ye):Rl(g,h),bc(h),T&8192){if(Ye=h.memoizedState!==null,(h.stateNode.isHidden=Ye)&&!pt&&(h.mode&1)!==0)for(It=h,pt=h.child;pt!==null;){for(mt=It=pt;It!==null;){switch(ht=It,Tt=ht.child,ht.tag){case 0:case 11:case 14:case 15:Qv(4,ht,ht.return);break;case 1:Em(ht,ht.return);var Ut=ht.stateNode;if(typeof Ut.componentWillUnmount=="function"){T=ht,S=ht.return;try{g=T,Ut.props=g.memoizedProps,Ut.state=g.memoizedState,Ut.componentWillUnmount()}catch(zt){Kr(T,S,zt)}}break;case 5:Em(ht,ht.return);break;case 22:if(ht.memoizedState!==null){Uk(mt);continue}}Tt!==null?(Tt.return=ht,It=Tt):Uk(mt)}pt=pt.sibling}e:for(pt=null,mt=h;;){if(mt.tag===5){if(pt===null){pt=mt;try{F=mt.stateNode,Ye?(V=F.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none"):(ve=mt.stateNode,_e=mt.memoizedProps.style,ne=_e!=null&&_e.hasOwnProperty("display")?_e.display:null,ve.style.display=Je("display",ne))}catch(zt){Kr(h,h.return,zt)}}}else if(mt.tag===6){if(pt===null)try{mt.stateNode.nodeValue=Ye?"":mt.memoizedProps}catch(zt){Kr(h,h.return,zt)}}else if((mt.tag!==22&&mt.tag!==23||mt.memoizedState===null||mt===h)&&mt.child!==null){mt.child.return=mt,mt=mt.child;continue}if(mt===h)break e;for(;mt.sibling===null;){if(mt.return===null||mt.return===h)break e;pt===mt&&(pt=null),mt=mt.return}pt===mt&&(pt=null),mt.sibling.return=mt.return,mt=mt.sibling}}break;case 19:Rl(g,h),bc(h),T&4&&Ok(h);break;case 21:break;default:Rl(g,h),bc(h)}}function bc(h){var g=h.flags;if(g&2){try{e:{for(var S=h.return;S!==null;){if(Dk(S)){var T=S;break e}S=S.return}throw Error(n(160))}switch(T.tag){case 5:var F=T.stateNode;T.flags&32&&(xt(F,""),T.flags&=-33);var V=kk(h);TE(h,V,F);break;case 3:case 4:var ne=T.stateNode.containerInfo,ve=kk(h);AE(h,ve,ne);break;default:throw Error(n(161))}}catch(_e){Kr(h,h.return,_e)}h.flags&=-3}g&4096&&(h.flags&=-4097)}function z$(h,g,S){It=h,Lk(h)}function Lk(h,g,S){for(var T=(h.mode&1)!==0;It!==null;){var F=It,V=F.child;if(F.tag===22&&T){var ne=F.memoizedState!==null||cb;if(!ne){var ve=F.alternate,_e=ve!==null&&ve.memoizedState!==null||Ha;ve=cb;var Ye=Ha;if(cb=ne,(Ha=_e)&&!Ye)for(It=F;It!==null;)ne=It,_e=ne.child,ne.tag===22&&ne.memoizedState!==null?Bk(F):_e!==null?(_e.return=ne,It=_e):Bk(F);for(;V!==null;)It=V,Lk(V),V=V.sibling;It=F,cb=ve,Ha=Ye}Fk(h)}else(F.subtreeFlags&8772)!==0&&V!==null?(V.return=F,It=V):Fk(h)}}function Fk(h){for(;It!==null;){var g=It;if((g.flags&8772)!==0){var S=g.alternate;try{if((g.flags&8772)!==0)switch(g.tag){case 0:case 11:case 15:Ha||ub(5,g);break;case 1:var T=g.stateNode;if(g.flags&4&&!Ha)if(S===null)T.componentDidMount();else{var F=g.elementType===g.type?S.memoizedProps:Os(g.type,S.memoizedProps);T.componentDidUpdate(F,S.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var V=g.updateQueue;V!==null&&Wd(g,V,T);break;case 3:var ne=g.updateQueue;if(ne!==null){if(S=null,g.child!==null)switch(g.child.tag){case 5:S=g.child.stateNode;break;case 1:S=g.child.stateNode}Wd(g,ne,S)}break;case 5:var ve=g.stateNode;if(S===null&&g.flags&4){S=ve;var _e=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":_e.autoFocus&&S.focus();break;case"img":_e.src&&(S.src=_e.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var Ye=g.alternate;if(Ye!==null){var pt=Ye.memoizedState;if(pt!==null){var mt=pt.dehydrated;mt!==null&&sc(mt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ha||g.flags&512&&NE(g)}catch(ht){Kr(g,g.return,ht)}}if(g===h){It=null;break}if(S=g.sibling,S!==null){S.return=g.return,It=S;break}It=g.return}}function Uk(h){for(;It!==null;){var g=It;if(g===h){It=null;break}var S=g.sibling;if(S!==null){S.return=g.return,It=S;break}It=g.return}}function Bk(h){for(;It!==null;){var g=It;try{switch(g.tag){case 0:case 11:case 15:var S=g.return;try{ub(4,g)}catch(_e){Kr(g,S,_e)}break;case 1:var T=g.stateNode;if(typeof T.componentDidMount=="function"){var F=g.return;try{T.componentDidMount()}catch(_e){Kr(g,F,_e)}}var V=g.return;try{NE(g)}catch(_e){Kr(g,V,_e)}break;case 5:var ne=g.return;try{NE(g)}catch(_e){Kr(g,ne,_e)}}}catch(_e){Kr(g,g.return,_e)}if(g===h){It=null;break}var ve=g.sibling;if(ve!==null){ve.return=g.return,It=ve;break}It=g.return}}var H$=Math.ceil,db=N.ReactCurrentDispatcher,PE=N.ReactCurrentOwner,Vo=N.ReactCurrentBatchConfig,In=0,ia=null,Ai=null,_a=0,mo=0,Mm=Mr(0),Vi=0,Jv=null,lh=0,fb=0,RE=0,e0=null,Is=null,DE=0,Cm=1/0,Au=null,hb=!1,kE=null,Xd=null,pb=!1,Kd=null,mb=0,t0=0,jE=null,gb=-1,vb=0;function hs(){return(In&6)!==0?He():gb!==-1?gb:gb=He()}function Zd(h){return(h.mode&1)===0?1:(In&2)!==0&&_a!==0?_a&-_a:wE.transition!==null?(vb===0&&(vb=Qn()),vb):(h=Cn,h!==0||(h=window.event,h=h===void 0?16:lc(h.type)),h)}function Dl(h,g,S,T){if(50<t0)throw t0=0,jE=null,Error(n(185));$r(h,S,T),((In&2)===0||h!==ia)&&(h===ia&&((In&2)===0&&(fb|=S),Vi===4&&Qd(h,_a)),Ls(h,T),S===1&&In===0&&(g.mode&1)===0&&(Cm=He()+500,$f&&Uo()))}function Ls(h,g){var S=h.callbackNode;si(h,g);var T=ha(h,h===ia?_a:0);if(T===0)S!==null&&Ve(S),h.callbackNode=null,h.callbackPriority=0;else if(g=T&-T,h.callbackPriority!==g){if(S!=null&&Ve(S),g===1)h.tag===0?Kx(Hk.bind(null,h)):Yf(Hk.bind(null,h)),_E(function(){(In&6)===0&&Uo()}),S=null;else{switch(ko(T)){case 1:S=Rt;break;case 4:S=$t;break;case 16:S=Zt;break;case 536870912:S=ln;break;default:S=Zt}S=Kk(S,zk.bind(null,h))}h.callbackPriority=g,h.callbackNode=S}}function zk(h,g){if(gb=-1,vb=0,(In&6)!==0)throw Error(n(327));var S=h.callbackNode;if(Nm()&&h.callbackNode!==S)return null;var T=ha(h,h===ia?_a:0);if(T===0)return null;if((T&30)!==0||(T&h.expiredLanes)!==0||g)g=yb(h,T);else{g=T;var F=In;In|=2;var V=Wk();(ia!==h||_a!==g)&&(Au=null,Cm=He()+500,uh(h,g));do try{G$();break}catch(ve){Vk(h,ve)}while(!0);bu(),db.current=V,In=F,Ai!==null?g=0:(ia=null,_a=0,g=Vi)}if(g!==0){if(g===2&&(F=Ir(h),F!==0&&(T=F,g=OE(h,F))),g===1)throw S=Jv,uh(h,0),Qd(h,T),Ls(h,He()),S;if(g===6)Qd(h,T);else{if(F=h.current.alternate,(T&30)===0&&!V$(F)&&(g=yb(h,T),g===2&&(V=Ir(h),V!==0&&(T=V,g=OE(h,V))),g===1))throw S=Jv,uh(h,0),Qd(h,T),Ls(h,He()),S;switch(h.finishedWork=F,h.finishedLanes=T,g){case 0:case 1:throw Error(n(345));case 2:dh(h,Is,Au);break;case 3:if(Qd(h,T),(T&130023424)===T&&(g=DE+500-He(),10<g)){if(ha(h,0)!==0)break;if(F=h.suspendedLanes,(F&T)!==T){hs(),h.pingedLanes|=h.suspendedLanes&F;break}h.timeoutHandle=Av(dh.bind(null,h,Is,Au),g);break}dh(h,Is,Au);break;case 4:if(Qd(h,T),(T&4194240)===T)break;for(g=h.eventTimes,F=-1;0<T;){var ne=31-Yt(T);V=1<<ne,ne=g[ne],ne>F&&(F=ne),T&=~V}if(T=F,T=He()-T,T=(120>T?120:480>T?480:1080>T?1080:1920>T?1920:3e3>T?3e3:4320>T?4320:1960*H$(T/1960))-T,10<T){h.timeoutHandle=Av(dh.bind(null,h,Is,Au),T);break}dh(h,Is,Au);break;case 5:dh(h,Is,Au);break;default:throw Error(n(329))}}}return Ls(h,He()),h.callbackNode===S?zk.bind(null,h):null}function OE(h,g){var S=e0;return h.current.memoizedState.isDehydrated&&(uh(h,g).flags|=256),h=yb(h,g),h!==2&&(g=Is,Is=S,g!==null&&IE(g)),h}function IE(h){Is===null?Is=h:Is.push.apply(Is,h)}function V$(h){for(var g=h;;){if(g.flags&16384){var S=g.updateQueue;if(S!==null&&(S=S.stores,S!==null))for(var T=0;T<S.length;T++){var F=S[T],V=F.getSnapshot;F=F.value;try{if(!as(V(),F))return!1}catch{return!1}}}if(S=g.child,g.subtreeFlags&16384&&S!==null)S.return=g,g=S;else{if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Qd(h,g){for(g&=~RE,g&=~fb,h.suspendedLanes|=g,h.pingedLanes&=~g,h=h.expirationTimes;0<g;){var S=31-Yt(g),T=1<<S;h[S]=-1,g&=~T}}function Hk(h){if((In&6)!==0)throw Error(n(327));Nm();var g=ha(h,0);if((g&1)===0)return Ls(h,He()),null;var S=yb(h,g);if(h.tag!==0&&S===2){var T=Ir(h);T!==0&&(g=T,S=OE(h,T))}if(S===1)throw S=Jv,uh(h,0),Qd(h,g),Ls(h,He()),S;if(S===6)throw Error(n(345));return h.finishedWork=h.current.alternate,h.finishedLanes=g,dh(h,Is,Au),Ls(h,He()),null}function LE(h,g){var S=In;In|=1;try{return h(g)}finally{In=S,In===0&&(Cm=He()+500,$f&&Uo())}}function ch(h){Kd!==null&&Kd.tag===0&&(In&6)===0&&Nm();var g=In;In|=1;var S=Vo.transition,T=Cn;try{if(Vo.transition=null,Cn=1,h)return h()}finally{Cn=T,Vo.transition=S,In=g,(In&6)===0&&Uo()}}function FE(){mo=Mm.current,or(Mm)}function uh(h,g){h.finishedWork=null,h.finishedLanes=0;var S=h.timeoutHandle;if(S!==-1&&(h.timeoutHandle=-1,Tv(S)),Ai!==null)for(S=Ai.return;S!==null;){var T=S;switch(wl(T),T.tag){case 1:T=T.type.childContextTypes,T!=null&&Wf();break;case 3:yc(),or(ga),or(Fi),zo();break;case 5:Gd(T);break;case 4:yc();break;case 13:or(dr);break;case 19:or(dr);break;case 10:Zf(T.type._context);break;case 22:case 23:FE()}S=S.return}if(ia=h,Ai=h=Jd(h.current,null),_a=mo=g,Vi=0,Jv=null,RE=fb=lh=0,Is=e0=null,El!==null){for(g=0;g<El.length;g++)if(S=El[g],T=S.interleaved,T!==null){S.interleaved=null;var F=T.next,V=S.pending;if(V!==null){var ne=V.next;V.next=F,T.next=ne}S.pending=T}El=null}return h}function Vk(h,g){do{var S=Ai;try{if(bu(),Eu.current=wm,ho){for(var T=lr.memoizedState;T!==null;){var F=T.queue;F!==null&&(F.pending=null),T=T.next}ho=!1}if(Cl=0,On=Nr=lr=null,ra=!1,xc=0,PE.current=null,S===null||S.return===null){Vi=1,Jv=g,Ai=null;break}e:{var V=h,ne=S.return,ve=S,_e=g;if(g=_a,ve.flags|=32768,_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){var Ye=_e,pt=ve,mt=pt.tag;if((pt.mode&1)===0&&(mt===0||mt===11||mt===15)){var ht=pt.alternate;ht?(pt.updateQueue=ht.updateQueue,pt.memoizedState=ht.memoizedState,pt.lanes=ht.lanes):(pt.updateQueue=null,pt.memoizedState=null)}var Tt=Dt(ne);if(Tt!==null){Tt.flags&=-257,un(Tt,ne,ve,V,g),Tt.mode&1&&vt(V,Ye,g),g=Tt,_e=Ye;var Ut=g.updateQueue;if(Ut===null){var zt=new Set;zt.add(_e),g.updateQueue=zt}else Ut.add(_e);break e}else{if((g&1)===0){vt(V,Ye,g),UE();break e}_e=Error(n(426))}}else if(ur&&ve.mode&1){var ui=Dt(ne);if(ui!==null){(ui.flags&65536)===0&&(ui.flags|=256),un(ui,ne,ve,V,g),Hd(D(_e,ve));break e}}V=_e=D(_e,ve),Vi!==4&&(Vi=2),e0===null?e0=[V]:e0.push(V),V=ne;do{switch(V.tag){case 3:V.flags|=65536,g&=-g,V.lanes|=g;var Ie=Me(V,_e,g);_u(V,Ie);break e;case 1:ve=_e;var Ee=V.type,Fe=V.stateNode;if((V.flags&128)===0&&(typeof Ee.getDerivedStateFromError=="function"||Fe!==null&&typeof Fe.componentDidCatch=="function"&&(Xd===null||!Xd.has(Fe)))){V.flags|=65536,g&=-g,V.lanes|=g;var yt=at(V,ve,g);_u(V,yt);break e}}V=V.return}while(V!==null)}$k(S)}catch(Vt){g=Vt,Ai===S&&S!==null&&(Ai=S=S.return);continue}break}while(!0)}function Wk(){var h=db.current;return db.current=wm,h===null?wm:h}function UE(){(Vi===0||Vi===3||Vi===2)&&(Vi=4),ia===null||(lh&268435455)===0&&(fb&268435455)===0||Qd(ia,_a)}function yb(h,g){var S=In;In|=2;var T=Wk();(ia!==h||_a!==g)&&(Au=null,uh(h,g));do try{W$();break}catch(F){Vk(h,F)}while(!0);if(bu(),In=S,db.current=T,Ai!==null)throw Error(n(261));return ia=null,_a=0,Vi}function W$(){for(;Ai!==null;)Gk(Ai)}function G$(){for(;Ai!==null&&!Te();)Gk(Ai)}function Gk(h){var g=Xk(h.alternate,h,mo);h.memoizedProps=h.pendingProps,g===null?$k(h):Ai=g,PE.current=null}function $k(h){var g=h;do{var S=g.alternate;if(h=g.return,(g.flags&32768)===0){if(S=L$(S,g,mo),S!==null){Ai=S;return}}else{if(S=F$(S,g),S!==null){S.flags&=32767,Ai=S;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Vi=6,Ai=null;return}}if(g=g.sibling,g!==null){Ai=g;return}Ai=g=h}while(g!==null);Vi===0&&(Vi=5)}function dh(h,g,S){var T=Cn,F=Vo.transition;try{Vo.transition=null,Cn=1,$$(h,g,S,T)}finally{Vo.transition=F,Cn=T}return null}function $$(h,g,S,T){do Nm();while(Kd!==null);if((In&6)!==0)throw Error(n(327));S=h.finishedWork;var F=h.finishedLanes;if(S===null)return null;if(h.finishedWork=null,h.finishedLanes=0,S===h.current)throw Error(n(177));h.callbackNode=null,h.callbackPriority=0;var V=S.lanes|S.childLanes;if(eu(h,V),h===ia&&(Ai=ia=null,_a=0),(S.subtreeFlags&2064)===0&&(S.flags&2064)===0||pb||(pb=!0,Kk(Zt,function(){return Nm(),null})),V=(S.flags&15990)!==0,(S.subtreeFlags&15990)!==0||V){V=Vo.transition,Vo.transition=null;var ne=Cn;Cn=1;var ve=In;In|=4,PE.current=null,B$(h,S),Ik(S,h),Ei(Cv),bi=!!Ud,Cv=Ud=null,h.current=S,z$(S),gt(),In=ve,Cn=ne,Vo.transition=V}else h.current=S;if(pb&&(pb=!1,Kd=h,mb=F),V=h.pendingLanes,V===0&&(Xd=null),cn(S.stateNode),Ls(h,He()),g!==null)for(T=h.onRecoverableError,S=0;S<g.length;S++)F=g[S],T(F.value,{componentStack:F.stack,digest:F.digest});if(hb)throw hb=!1,h=kE,kE=null,h;return(mb&1)!==0&&h.tag!==0&&Nm(),V=h.pendingLanes,(V&1)!==0?h===jE?t0++:(t0=0,jE=h):t0=0,Uo(),null}function Nm(){if(Kd!==null){var h=ko(mb),g=Vo.transition,S=Cn;try{if(Vo.transition=null,Cn=16>h?16:h,Kd===null)var T=!1;else{if(h=Kd,Kd=null,mb=0,(In&6)!==0)throw Error(n(331));var F=In;for(In|=4,It=h.current;It!==null;){var V=It,ne=V.child;if((It.flags&16)!==0){var ve=V.deletions;if(ve!==null){for(var _e=0;_e<ve.length;_e++){var Ye=ve[_e];for(It=Ye;It!==null;){var pt=It;switch(pt.tag){case 0:case 11:case 15:Qv(8,pt,V)}var mt=pt.child;if(mt!==null)mt.return=pt,It=mt;else for(;It!==null;){pt=It;var ht=pt.sibling,Tt=pt.return;if(Rk(pt),pt===Ye){It=null;break}if(ht!==null){ht.return=Tt,It=ht;break}It=Tt}}}var Ut=V.alternate;if(Ut!==null){var zt=Ut.child;if(zt!==null){Ut.child=null;do{var ui=zt.sibling;zt.sibling=null,zt=ui}while(zt!==null)}}It=V}}if((V.subtreeFlags&2064)!==0&&ne!==null)ne.return=V,It=ne;else e:for(;It!==null;){if(V=It,(V.flags&2048)!==0)switch(V.tag){case 0:case 11:case 15:Qv(9,V,V.return)}var Ie=V.sibling;if(Ie!==null){Ie.return=V.return,It=Ie;break e}It=V.return}}var Ee=h.current;for(It=Ee;It!==null;){ne=It;var Fe=ne.child;if((ne.subtreeFlags&2064)!==0&&Fe!==null)Fe.return=ne,It=Fe;else e:for(ne=Ee;It!==null;){if(ve=It,(ve.flags&2048)!==0)try{switch(ve.tag){case 0:case 11:case 15:ub(9,ve)}}catch(Vt){Kr(ve,ve.return,Vt)}if(ve===ne){It=null;break e}var yt=ve.sibling;if(yt!==null){yt.return=ve.return,It=yt;break e}It=ve.return}}if(In=F,Uo(),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(fn,h)}catch{}T=!0}return T}finally{Cn=S,Vo.transition=g}}return!1}function Yk(h,g,S){g=D(S,g),g=Me(h,g,1),h=mr(h,g,1),g=hs(),h!==null&&($r(h,1,g),Ls(h,g))}function Kr(h,g,S){if(h.tag===3)Yk(h,h,S);else for(;g!==null;){if(g.tag===3){Yk(g,h,S);break}else if(g.tag===1){var T=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(Xd===null||!Xd.has(T))){h=D(S,h),h=at(g,h,1),g=mr(g,h,1),h=hs(),g!==null&&($r(g,1,h),Ls(g,h));break}}g=g.return}}function Y$(h,g,S){var T=h.pingCache;T!==null&&T.delete(g),g=hs(),h.pingedLanes|=h.suspendedLanes&S,ia===h&&(_a&S)===S&&(Vi===4||Vi===3&&(_a&130023424)===_a&&500>He()-DE?uh(h,0):RE|=S),Ls(h,g)}function qk(h,g){g===0&&((h.mode&1)===0?g=1:(g=Yn,Yn<<=1,(Yn&130023424)===0&&(Yn=4194304)));var S=hs();h=uo(h,g),h!==null&&($r(h,g,S),Ls(h,S))}function q$(h){var g=h.memoizedState,S=0;g!==null&&(S=g.retryLane),qk(h,S)}function X$(h,g){var S=0;switch(h.tag){case 13:var T=h.stateNode,F=h.memoizedState;F!==null&&(S=F.retryLane);break;case 19:T=h.stateNode;break;default:throw Error(n(314))}T!==null&&T.delete(g),qk(h,S)}var Xk;Xk=function(h,g,S){if(h!==null)if(h.memoizedProps!==g.pendingProps||ga.current)xn=!0;else{if((h.lanes&S)===0&&(g.flags&128)===0)return xn=!1,I$(h,g,S);xn=(h.flags&131072)!==0}else xn=!1,ur&&(g.flags&1048576)!==0&&jv(g,fm,g.index);switch(g.lanes=0,g.tag){case 2:var T=g.type;lb(h,g),h=g.pendingProps;var F=hu(g,Fi.current);vc(g,S),F=nh(null,g,T,h,F,S);var V=Hv();return g.flags|=1,typeof F=="object"&&F!==null&&typeof F.render=="function"&&F.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,ta(T)?(V=!0,pu(g)):V=!1,g.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,vn(g),F.updater=Sm,g.stateNode=F,F._reactInternals=g,A(g,T,h,S),g=hn(null,g,T,!0,V,S)):(g.tag=0,ur&&V&&Ov(g),Nt(null,g,F,S),g=g.child),g;case 16:T=g.elementType;e:{switch(lb(h,g),h=g.pendingProps,F=T._init,T=F(T._payload),g.type=T,F=g.tag=Z$(T),h=Os(T,h),F){case 0:g=Et(null,g,T,h,S);break e;case 1:g=Ht(null,g,T,h,S);break e;case 11:g=Hi(null,g,T,h,S);break e;case 14:g=fs(null,g,T,Os(T.type,h),S);break e}throw Error(n(306,T,""))}return g;case 0:return T=g.type,F=g.pendingProps,F=g.elementType===T?F:Os(T,F),Et(h,g,T,F,S);case 1:return T=g.type,F=g.pendingProps,F=g.elementType===T?F:Os(T,F),Ht(h,g,T,F,S);case 3:e:{if(dn(g),h===null)throw Error(n(387));T=g.pendingProps,V=g.memoizedState,F=V.element,Ur(h,g),Cr(g,T,null,S);var ne=g.memoizedState;if(T=ne.element,V.isDehydrated)if(V={element:T,isDehydrated:!1,cache:ne.cache,pendingSuspenseBoundaries:ne.pendingSuspenseBoundaries,transitions:ne.transitions},g.updateQueue.baseState=V,g.memoizedState=V,g.flags&256){F=D(Error(n(423)),g),g=Dn(h,g,T,S,F);break e}else if(T!==F){F=D(Error(n(424)),g),g=Dn(h,g,T,S,F);break e}else for(ya=vl(g.stateNode.containerInfo.firstChild),Ui=g,ur=!0,js=null,S=Kf(g,null,T,S),g.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(gc(),T===F){g=Nu(h,g,S);break e}Nt(h,g,T,S)}g=g.child}return g;case 5:return Su(g),h===null&&pm(g),T=g.type,F=g.pendingProps,V=h!==null?h.memoizedProps:null,ne=F.children,Nv(T,F)?ne=null:V!==null&&Nv(T,V)&&(g.flags|=32),et(h,g),Nt(h,g,ne,S),g.child;case 6:return h===null&&pm(g),null;case 13:return Tl(h,g,S);case 4:return eh(g,g.stateNode.containerInfo),T=g.pendingProps,h===null?g.child=vu(g,null,T,S):Nt(h,g,T,S),g.child;case 11:return T=g.type,F=g.pendingProps,F=g.elementType===T?F:Os(T,F),Hi(h,g,T,F,S);case 7:return Nt(h,g,g.pendingProps,S),g.child;case 8:return Nt(h,g,g.pendingProps.children,S),g.child;case 12:return Nt(h,g,g.pendingProps.children,S),g.child;case 10:e:{if(T=g.type._context,F=g.pendingProps,V=g.memoizedProps,ne=F.value,Jn(yu,T._currentValue),T._currentValue=ne,V!==null)if(as(V.value,ne)){if(V.children===F.children&&!ga.current){g=Nu(h,g,S);break e}}else for(V=g.child,V!==null&&(V.return=g);V!==null;){var ve=V.dependencies;if(ve!==null){ne=V.child;for(var _e=ve.firstContext;_e!==null;){if(_e.context===T){if(V.tag===1){_e=Xn(-1,S&-S),_e.tag=2;var Ye=V.updateQueue;if(Ye!==null){Ye=Ye.shared;var pt=Ye.pending;pt===null?_e.next=_e:(_e.next=pt.next,pt.next=_e),Ye.pending=_e}}V.lanes|=S,_e=V.alternate,_e!==null&&(_e.lanes|=S),Qf(V.return,S,g),ve.lanes|=S;break}_e=_e.next}}else if(V.tag===10)ne=V.type===g.type?null:V.child;else if(V.tag===18){if(ne=V.return,ne===null)throw Error(n(341));ne.lanes|=S,ve=ne.alternate,ve!==null&&(ve.lanes|=S),Qf(ne,S,g),ne=V.sibling}else ne=V.child;if(ne!==null)ne.return=V;else for(ne=V;ne!==null;){if(ne===g){ne=null;break}if(V=ne.sibling,V!==null){V.return=ne.return,ne=V;break}ne=ne.return}V=ne}Nt(h,g,F.children,S),g=g.child}return g;case 9:return F=g.type,T=g.pendingProps.children,vc(g,S),F=ls(F),T=T(F),g.flags|=1,Nt(h,g,T,S),g.child;case 14:return T=g.type,F=Os(T,g.pendingProps),F=Os(T.type,F),fs(h,g,T,F,S);case 15:return ze(h,g,g.type,g.pendingProps,S);case 17:return T=g.type,F=g.pendingProps,F=g.elementType===T?F:Os(T,F),lb(h,g),g.tag=1,ta(T)?(h=!0,pu(g)):h=!1,vc(g,S),x(g,T,F),A(g,T,F,S),hn(null,g,T,!0,h,S);case 19:return Ck(h,g,S);case 22:return Re(h,g,S)}throw Error(n(156,g.tag))};function Kk(h,g){return We(h,g)}function K$(h,g,S,T){this.tag=h,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wo(h,g,S,T){return new K$(h,g,S,T)}function BE(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Z$(h){if(typeof h=="function")return BE(h)?1:0;if(h!=null){if(h=h.$$typeof,h===O)return 11;if(h===X)return 14}return 2}function Jd(h,g){var S=h.alternate;return S===null?(S=Wo(h.tag,g,h.key,h.mode),S.elementType=h.elementType,S.type=h.type,S.stateNode=h.stateNode,S.alternate=h,h.alternate=S):(S.pendingProps=g,S.type=h.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=h.flags&14680064,S.childLanes=h.childLanes,S.lanes=h.lanes,S.child=h.child,S.memoizedProps=h.memoizedProps,S.memoizedState=h.memoizedState,S.updateQueue=h.updateQueue,g=h.dependencies,S.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},S.sibling=h.sibling,S.index=h.index,S.ref=h.ref,S}function xb(h,g,S,T,F,V){var ne=2;if(T=h,typeof h=="function")BE(h)&&(ne=1);else if(typeof h=="string")ne=5;else e:switch(h){case k:return fh(S.children,F,V,g);case U:ne=8,F|=8;break;case I:return h=Wo(12,S,g,F|2),h.elementType=I,h.lanes=V,h;case q:return h=Wo(13,S,g,F),h.elementType=q,h.lanes=V,h;case Y:return h=Wo(19,S,g,F),h.elementType=Y,h.lanes=V,h;case se:return bb(S,F,V,g);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case L:ne=10;break e;case z:ne=9;break e;case O:ne=11;break e;case X:ne=14;break e;case ee:ne=16,T=null;break e}throw Error(n(130,h==null?h:typeof h,""))}return g=Wo(ne,S,g,F),g.elementType=h,g.type=T,g.lanes=V,g}function fh(h,g,S,T){return h=Wo(7,h,T,g),h.lanes=S,h}function bb(h,g,S,T){return h=Wo(22,h,T,g),h.elementType=se,h.lanes=S,h.stateNode={isHidden:!1},h}function zE(h,g,S){return h=Wo(6,h,null,g),h.lanes=S,h}function HE(h,g,S){return g=Wo(4,h.children!==null?h.children:[],h.key,g),g.lanes=S,g.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},g}function Q$(h,g,S,T,F){this.tag=g,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oi(0),this.expirationTimes=Oi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oi(0),this.identifierPrefix=T,this.onRecoverableError=F,this.mutableSourceEagerHydrationData=null}function VE(h,g,S,T,F,V,ne,ve,_e){return h=new Q$(h,g,S,ve,_e),g===1?(g=1,V===!0&&(g|=8)):g=0,V=Wo(3,null,null,g),h.current=V,V.stateNode=h,V.memoizedState={element:T,isDehydrated:S,cache:null,transitions:null,pendingSuspenseBoundaries:null},vn(V),h}function J$(h,g,S){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:T==null?null:""+T,children:h,containerInfo:g,implementation:S}}function Zk(h){if(!h)return xl;h=h._reactInternals;e:{if(Oa(h)!==h||h.tag!==1)throw Error(n(170));var g=h;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(ta(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(n(171))}if(h.tag===1){var S=h.type;if(ta(S))return Gf(h,S,g)}return g}function Qk(h,g,S,T,F,V,ne,ve,_e){return h=VE(S,T,!0,h,F,V,ne,ve,_e),h.context=Zk(null),S=h.current,T=hs(),F=Zd(S),V=Xn(T,F),V.callback=g??null,mr(S,V,F),h.current.lanes=F,$r(h,F,T),Ls(h,T),h}function _b(h,g,S,T){var F=g.current,V=hs(),ne=Zd(F);return S=Zk(S),g.context===null?g.context=S:g.pendingContext=S,g=Xn(V,ne),g.payload={element:h},T=T===void 0?null:T,T!==null&&(g.callback=T),h=mr(F,g,ne),h!==null&&(Dl(h,F,ne,V),na(h,F,ne)),ne}function wb(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return h.child.stateNode;default:return h.child.stateNode}}function Jk(h,g){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var S=h.retryLane;h.retryLane=S!==0&&S<g?S:g}}function WE(h,g){Jk(h,g),(h=h.alternate)&&Jk(h,g)}function eY(){return null}var ej=typeof reportError=="function"?reportError:function(h){console.error(h)};function GE(h){this._internalRoot=h}Sb.prototype.render=GE.prototype.render=function(h){var g=this._internalRoot;if(g===null)throw Error(n(409));_b(h,g,null,null)},Sb.prototype.unmount=GE.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var g=h.containerInfo;ch(function(){_b(null,h,null,null)}),g[os]=null}};function Sb(h){this._internalRoot=h}Sb.prototype.unstable_scheduleHydration=function(h){if(h){var g=jo();h={blockedOn:null,target:h,priority:g};for(var S=0;S<As.length&&g!==0&&g<As[S].priority;S++);As.splice(S,0,h),S===0&&Ji(h)}};function $E(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function Eb(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function tj(){}function tY(h,g,S,T,F){if(F){if(typeof T=="function"){var V=T;T=function(){var Ye=wb(ne);V.call(Ye)}}var ne=Qk(g,T,h,0,null,!1,!1,"",tj);return h._reactRootContainer=ne,h[os]=ne.current,Ld(h.nodeType===8?h.parentNode:h),ch(),ne}for(;F=h.lastChild;)h.removeChild(F);if(typeof T=="function"){var ve=T;T=function(){var Ye=wb(_e);ve.call(Ye)}}var _e=VE(h,0,!1,null,null,!1,!1,"",tj);return h._reactRootContainer=_e,h[os]=_e.current,Ld(h.nodeType===8?h.parentNode:h),ch(function(){_b(g,_e,S,T)}),_e}function Mb(h,g,S,T,F){var V=S._reactRootContainer;if(V){var ne=V;if(typeof F=="function"){var ve=F;F=function(){var _e=wb(ne);ve.call(_e)}}_b(g,ne,h,F)}else ne=tY(S,g,h,F,T);return wb(ne)}rc=function(h){switch(h.tag){case 3:var g=h.stateNode;if(g.current.memoizedState.isDehydrated){var S=Hn(g.pendingLanes);S!==0&&(ro(g,S|1),Ls(g,He()),(In&6)===0&&(Cm=He()+500,Uo()))}break;case 13:ch(function(){var T=uo(h,1);if(T!==null){var F=hs();Dl(T,h,1,F)}}),WE(h,1)}},Md=function(h){if(h.tag===13){var g=uo(h,134217728);if(g!==null){var S=hs();Dl(g,h,134217728,S)}WE(h,134217728)}},Cd=function(h){if(h.tag===13){var g=Zd(h),S=uo(h,g);if(S!==null){var T=hs();Dl(S,h,g,T)}WE(h,g)}},jo=function(){return Cn},tu=function(h,g){var S=Cn;try{return Cn=h,g()}finally{Cn=S}},Be=function(h,g,S){switch(g){case"input":if(st(h,S),g=S.name,S.type==="radio"&&g!=null){for(S=h;S.parentNode;)S=S.parentNode;for(S=S.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<S.length;g++){var T=S[g];if(T!==h&&T.form===h.form){var F=cm(T);if(!F)throw Error(n(90));Z(T),st(T,F)}}}break;case"textarea":we(h,S);break;case"select":g=S.value,g!=null&&J(h,!!S.multiple,g,!1)}},kt=LE,Mt=ch;var nY={usingClientEntryPoint:!1,Events:[yl,Fr,cm,Le,dt,LE]},n0={findFiberByHostInstance:mc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rY={bundleType:n0.bundleType,version:n0.version,rendererPackageName:n0.rendererPackageName,rendererConfig:n0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=ue(h),h===null?null:h.stateNode},findFiberByHostInstance:n0.findFiberByHostInstance||eY,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cb.isDisabled&&Cb.supportsFiber)try{fn=Cb.inject(rY),Ot=Cb}catch{}}return Fs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nY,Fs.createPortal=function(h,g){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$E(g))throw Error(n(200));return J$(h,g,null,S)},Fs.createRoot=function(h,g){if(!$E(h))throw Error(n(299));var S=!1,T="",F=ej;return g!=null&&(g.unstable_strictMode===!0&&(S=!0),g.identifierPrefix!==void 0&&(T=g.identifierPrefix),g.onRecoverableError!==void 0&&(F=g.onRecoverableError)),g=VE(h,1,!1,null,null,S,!1,T,F),h[os]=g.current,Ld(h.nodeType===8?h.parentNode:h),new GE(g)},Fs.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var g=h._reactInternals;if(g===void 0)throw typeof h.render=="function"?Error(n(188)):(h=Object.keys(h).join(","),Error(n(268,h)));return h=ue(g),h=h===null?null:h.stateNode,h},Fs.flushSync=function(h){return ch(h)},Fs.hydrate=function(h,g,S){if(!Eb(g))throw Error(n(200));return Mb(null,h,g,!0,S)},Fs.hydrateRoot=function(h,g,S){if(!$E(h))throw Error(n(405));var T=S!=null&&S.hydratedSources||null,F=!1,V="",ne=ej;if(S!=null&&(S.unstable_strictMode===!0&&(F=!0),S.identifierPrefix!==void 0&&(V=S.identifierPrefix),S.onRecoverableError!==void 0&&(ne=S.onRecoverableError)),g=Qk(g,null,h,1,S??null,F,!1,V,ne),h[os]=g.current,Ld(h),T)for(h=0;h<T.length;h++)S=T[h],F=S._getVersion,F=F(S._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[S,F]:g.mutableSourceEagerHydrationData.push(S,F);return new Sb(g)},Fs.render=function(h,g,S){if(!Eb(g))throw Error(n(200));return Mb(null,h,g,!1,S)},Fs.unmountComponentAtNode=function(h){if(!Eb(h))throw Error(n(40));return h._reactRootContainer?(ch(function(){Mb(null,null,h,!1,function(){h._reactRootContainer=null,h[os]=null})}),!0):!1},Fs.unstable_batchedUpdates=LE,Fs.unstable_renderSubtreeIntoContainer=function(h,g,S,T){if(!Eb(S))throw Error(n(200));if(h==null||h._reactInternals===void 0)throw Error(n(38));return Mb(h,g,S,!1,T)},Fs.version="18.3.1-next-f1338f8080-20240426",Fs}var Mj;function tz(){if(Mj)return QE.exports;Mj=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),QE.exports=Bq(),QE.exports}var Cj;function zq(){if(Cj)return Ab;Cj=1;var t=tz();return Ab.createRoot=t.createRoot,Ab.hydrateRoot=t.hydrateRoot,Ab}var Hq=zq(),$g=tz();const Vq=Zl($g);function iy(){return iy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iy.apply(this,arguments)}var mf;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(mf||(mf={}));const Nj="popstate";function Wq(t){t===void 0&&(t={});function e(r,i){let{pathname:a,search:s,hash:o}=r.location;return vA("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Tw(i)}return $q(e,n,null,t)}function vi(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function oP(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Gq(){return Math.random().toString(36).substr(2,8)}function Aj(t,e){return{usr:t.state,key:t.key,idx:e}}function vA(t,e,n,r){return n===void 0&&(n=null),iy({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Yg(e):e,{state:n,key:e&&e.key||r||Gq()})}function Tw(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Yg(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function $q(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o=mf.Pop,l=null,u=d();u==null&&(u=0,s.replaceState(iy({},s.state,{idx:u}),""));function d(){return(s.state||{idx:null}).idx}function f(){o=mf.Pop;let v=d(),w=v==null?null:v-u;u=v,l&&l({action:o,location:_.location,delta:w})}function p(v,w){o=mf.Push;let M=vA(_.location,v,w);u=d()+1;let C=Aj(M,u),N=_.createHref(M);try{s.pushState(C,"",N)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(N)}a&&l&&l({action:o,location:_.location,delta:1})}function m(v,w){o=mf.Replace;let M=vA(_.location,v,w);u=d();let C=Aj(M,u),N=_.createHref(M);s.replaceState(C,"",N),a&&l&&l({action:o,location:_.location,delta:0})}function y(v){let w=i.location.origin!=="null"?i.location.origin:i.location.href,M=typeof v=="string"?v:Tw(v);return M=M.replace(/ $/,"%20"),vi(w,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,w)}let _={get action(){return o},get location(){return t(i,s)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Nj,f),l=v,()=>{i.removeEventListener(Nj,f),l=null}},createHref(v){return e(i,v)},createURL:y,encodeLocation(v){let w=y(v);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:m,go(v){return s.go(v)}};return _}var Tj;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Tj||(Tj={}));function Yq(t,e,n){return n===void 0&&(n="/"),qq(t,e,n)}function qq(t,e,n,r){let i=typeof e=="string"?Yg(e):e,a=lP(i.pathname||"/",n);if(a==null)return null;let s=nz(t);Xq(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let u=oX(a);o=iX(s[l],u)}return o}function nz(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,s,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};l.relativePath.startsWith("/")&&(vi(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=yf([r,l.relativePath]),d=n.concat(l);a.children&&a.children.length>0&&(vi(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),nz(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:nX(u,a.index),routesMeta:d})};return t.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let l of rz(a.path))i(a,s,l)}),e}function rz(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=rz(r.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...s),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function Xq(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:rX(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Kq=/^:[\w-]+$/,Zq=3,Qq=2,Jq=1,eX=10,tX=-2,Pj=t=>t==="*";function nX(t,e){let n=t.split("/"),r=n.length;return n.some(Pj)&&(r+=tX),e&&(r+=Qq),n.filter(i=>!Pj(i)).reduce((i,a)=>i+(Kq.test(a)?Zq:a===""?Jq:eX),r)}function rX(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function iX(t,e,n){let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,d=a==="/"?e:e.slice(a.length)||"/",f=aX({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),p=l.route;if(!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:yf([a,f.pathname]),pathnameBase:fX(yf([a,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(a=yf([a,f.pathnameBase]))}return s}function aX(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=sX(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,d,f)=>{let{paramName:p,isOptional:m}=d;if(p==="*"){let _=o[f]||"";s=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const y=o[f];return m&&!y?u[p]=void 0:u[p]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:t}}function sX(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),oP(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function oX(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return oP(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function lP(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const lX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cX=t=>lX.test(t);function uX(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Yg(t):t,a;if(n)if(cX(n))a=n;else{if(n.includes("//")){let s=n;n=n.replace(/\/\/+/g,"/"),oP(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+n))}n.startsWith("/")?a=Rj(n.substring(1),"/"):a=Rj(n,e)}else a=e;return{pathname:a,search:hX(r),hash:pX(i)}}function Rj(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function tM(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dX(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function cP(t,e){let n=dX(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function uP(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Yg(t):(i=iy({},t),vi(!i.pathname||!i.pathname.includes("?"),tM("?","pathname","search",i)),vi(!i.pathname||!i.pathname.includes("#"),tM("#","pathname","hash",i)),vi(!i.search||!i.search.includes("#"),tM("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let f=e.length-1;if(!r&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}o=f>=0?e[f]:"/"}let l=uX(i,o),u=s&&s!=="/"&&s.endsWith("/"),d=(a||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const yf=t=>t.join("/").replace(/\/\/+/g,"/"),fX=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),hX=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pX=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function mX(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const iz=["post","put","patch","delete"];new Set(iz);const gX=["get",...iz];new Set(gX);function ay(){return ay=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ay.apply(this,arguments)}const dP=E.createContext(null),vX=E.createContext(null),Af=E.createContext(null),jS=E.createContext(null),dd=E.createContext({outlet:null,matches:[],isDataRoute:!1}),az=E.createContext(null);function yX(t,e){let{relative:n}=e===void 0?{}:e;qg()||vi(!1);let{basename:r,navigator:i}=E.useContext(Af),{hash:a,pathname:s,search:o}=oz(t,{relative:n}),l=s;return r!=="/"&&(l=s==="/"?r:yf([r,s])),i.createHref({pathname:l,search:o,hash:a})}function qg(){return E.useContext(jS)!=null}function Tp(){return qg()||vi(!1),E.useContext(jS).location}function sz(t){E.useContext(Af).static||E.useLayoutEffect(t)}function Es(){let{isDataRoute:t}=E.useContext(dd);return t?RX():xX()}function xX(){qg()||vi(!1);let t=E.useContext(dP),{basename:e,future:n,navigator:r}=E.useContext(Af),{matches:i}=E.useContext(dd),{pathname:a}=Tp(),s=JSON.stringify(cP(i,n.v7_relativeSplatPath)),o=E.useRef(!1);return sz(()=>{o.current=!0}),E.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let f=uP(u,JSON.parse(s),a,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:yf([e,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[e,r,s,a,t])}function fP(){let{matches:t}=E.useContext(dd),e=t[t.length-1];return e?e.params:{}}function oz(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=E.useContext(Af),{matches:i}=E.useContext(dd),{pathname:a}=Tp(),s=JSON.stringify(cP(i,r.v7_relativeSplatPath));return E.useMemo(()=>uP(t,JSON.parse(s),a,n==="path"),[t,s,a,n])}function bX(t,e){return _X(t,e)}function _X(t,e,n,r){qg()||vi(!1);let{navigator:i}=E.useContext(Af),{matches:a}=E.useContext(dd),s=a[a.length-1],o=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let u=Tp(),d;if(e){var f;let v=typeof e=="string"?Yg(e):e;l==="/"||(f=v.pathname)!=null&&f.startsWith(l)||vi(!1),d=v}else d=u;let p=d.pathname||"/",m=p;if(l!=="/"){let v=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=Yq(t,{pathname:m}),_=CX(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:yf([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:yf([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,n,r);return e&&_?E.createElement(jS.Provider,{value:{location:ay({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:mf.Pop}},_):_}function wX(){let t=PX(),e=mX(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),n?E.createElement("pre",{style:i},n):null,null)}const SX=E.createElement(wX,null);class EX extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?E.createElement(dd.Provider,{value:this.props.routeContext},E.createElement(az.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function MX(t){let{routeContext:e,match:n,children:r}=t,i=E.useContext(dP);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(dd.Provider,{value:e},r)}function CX(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let d=s.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);d>=0||vi(!1),s=s.slice(0,Math.min(s.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:p,errors:m}=n,y=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||y){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,f,p)=>{let m,y=!1,_=null,v=null;n&&(m=o&&f.route.id?o[f.route.id]:void 0,_=f.route.errorElement||SX,l&&(u<0&&p===0?(DX("route-fallback"),y=!0,v=null):u===p&&(y=!0,v=f.route.hydrateFallbackElement||null)));let w=e.concat(s.slice(0,p+1)),M=()=>{let C;return m?C=_:y?C=v:f.route.Component?C=E.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=d,E.createElement(MX,{match:f,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:C})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?E.createElement(EX,{location:n.location,revalidation:n.revalidation,component:_,error:m,children:M(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):M()},null)}var lz=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(lz||{}),cz=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(cz||{});function NX(t){let e=E.useContext(dP);return e||vi(!1),e}function AX(t){let e=E.useContext(vX);return e||vi(!1),e}function TX(t){let e=E.useContext(dd);return e||vi(!1),e}function uz(t){let e=TX(),n=e.matches[e.matches.length-1];return n.route.id||vi(!1),n.route.id}function PX(){var t;let e=E.useContext(az),n=AX(),r=uz();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function RX(){let{router:t}=NX(lz.UseNavigateStable),e=uz(cz.UseNavigateStable),n=E.useRef(!1);return sz(()=>{n.current=!0}),E.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ay({fromRouteId:e},a)))},[t,e])}const Dj={};function DX(t,e,n){Dj[t]||(Dj[t]=!0)}function kX(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function sy(t){let{to:e,replace:n,state:r,relative:i}=t;qg()||vi(!1);let{future:a,static:s}=E.useContext(Af),{matches:o}=E.useContext(dd),{pathname:l}=Tp(),u=Es(),d=uP(e,cP(o,a.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(d);return E.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:i}),[u,f,i,n,r]),null}function Qr(t){vi(!1)}function jX(t){let{basename:e="/",children:n=null,location:r,navigationType:i=mf.Pop,navigator:a,static:s=!1,future:o}=t;qg()&&vi(!1);let l=e.replace(/^\/*/,"/"),u=E.useMemo(()=>({basename:l,navigator:a,static:s,future:ay({v7_relativeSplatPath:!1},o)}),[l,o,a,s]);typeof r=="string"&&(r=Yg(r));let{pathname:d="/",search:f="",hash:p="",state:m=null,key:y="default"}=r,_=E.useMemo(()=>{let v=lP(d,l);return v==null?null:{location:{pathname:v,search:f,hash:p,state:m,key:y},navigationType:i}},[l,d,f,p,m,y,i]);return _==null?null:E.createElement(Af.Provider,{value:u},E.createElement(jS.Provider,{children:n,value:_}))}function OX(t){let{children:e,location:n}=t;return bX(yA(e),n)}new Promise(()=>{});function yA(t,e){e===void 0&&(e=[]);let n=[];return E.Children.forEach(t,(r,i)=>{if(!E.isValidElement(r))return;let a=[...e,i];if(r.type===E.Fragment){n.push.apply(n,yA(r.props.children,a));return}r.type!==Qr&&vi(!1),!r.props.index||!r.props.children||vi(!1);let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=yA(r.props.children,a)),n.push(s)}),n}function xA(){return xA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xA.apply(this,arguments)}function IX(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function LX(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function FX(t,e){return t.button===0&&(!e||e==="_self")&&!LX(t)}function bA(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function UX(t,e){let n=bA(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}const BX=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zX="6";try{window.__reactRouterVersion=zX}catch{}const HX="startTransition",kj=wg[HX];function VX(t){let{basename:e,children:n,future:r,window:i}=t,a=E.useRef();a.current==null&&(a.current=Wq({window:i,v5Compat:!0}));let s=a.current,[o,l]=E.useState({action:s.action,location:s.location}),{v7_startTransition:u}=r||{},d=E.useCallback(f=>{u&&kj?kj(()=>l(f)):l(f)},[l,u]);return E.useLayoutEffect(()=>s.listen(d),[s,d]),E.useEffect(()=>kX(r),[r]),E.createElement(jX,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:s,future:r})}const WX=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",GX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yn=E.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:s,state:o,target:l,to:u,preventScrollReset:d,viewTransition:f}=e,p=IX(e,BX),{basename:m}=E.useContext(Af),y,_=!1;if(typeof u=="string"&&GX.test(u)&&(y=u,WX))try{let C=new URL(window.location.href),N=u.startsWith("//")?new URL(C.protocol+u):new URL(u),P=lP(N.pathname,m);N.origin===C.origin&&P!=null?u=P+N.search+N.hash:_=!0}catch{}let v=yX(u,{relative:i}),w=$X(u,{replace:s,state:o,target:l,preventScrollReset:d,relative:i,viewTransition:f});function M(C){r&&r(C),C.defaultPrevented||w(C)}return E.createElement("a",xA({},p,{href:y||v,onClick:_||a?r:M,ref:n,target:l}))});var jj;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(jj||(jj={}));var Oj;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Oj||(Oj={}));function $X(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:s,viewTransition:o}=e===void 0?{}:e,l=Es(),u=Tp(),d=oz(t,{relative:s});return E.useCallback(f=>{if(FX(f,n)){f.preventDefault();let p=r!==void 0?r:Tw(u)===Tw(d);l(t,{replace:p,state:i,preventScrollReset:a,relative:s,viewTransition:o})}},[u,l,d,r,i,n,t,a,s,o])}function YX(t){let e=E.useRef(bA(t)),n=E.useRef(!1),r=Tp(),i=E.useMemo(()=>UX(r.search,n.current?null:e.current),[r.search]),a=Es(),s=E.useCallback((o,l)=>{const u=bA(typeof o=="function"?o(i):o);n.current=!0,a("?"+u,l)},[a,i]);return[i,s]}function qX({value:t,duration:e=1e3,prefix:n="",suffix:r=""}){const[i,a]=E.useState(0),s=E.useRef(0),o=E.useRef(null);E.useEffect(()=>{const u=typeof t=="number"?t:parseInt(t)||0,d=s.current,f=performance.now(),p=m=>{const y=m-f,_=Math.min(y/e,1),v=1-Math.pow(1-_,4),w=Math.floor(d+(u-d)*v);a(w),_<1?o.current=requestAnimationFrame(p):s.current=u};return o.current=requestAnimationFrame(p),()=>{o.current&&cancelAnimationFrame(o.current)}},[t,e]);const l=u=>u>=1e6?(u/1e6).toFixed(1)+"M":u>=1e3?(u/1e3).toFixed(1)+"K":u.toLocaleString();return c.jsxs("span",{className:"tabular-nums",children:[n,l(i),r]})}const Ij=["mousemove","mousedown","keydown","scroll","touchstart","click"],XX=1e3,dz=3600*1e3,fz=E.createContext({isDisconnected:!1,disconnect:()=>{},reconnect:()=>{},registerConnection:()=>{},unregisterConnection:()=>{},timeoutMs:dz});function KX({children:t,timeout:e=dz}){const[n,r]=E.useState(!1),i=E.useRef(new Map),a=E.useRef(null),s=E.useRef(null),o=E.useCallback(()=>{a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{r(!0),i.current.forEach((m,y)=>{try{m.cleanup?.()}catch(_){console.error(`Inactivity cleanup error for ${y}:`,_)}})},e)},[e]);E.useEffect(()=>{const m=()=>{s.current||(s.current=setTimeout(()=>{s.current=null,n||o()},XX))};return Ij.forEach(y=>{window.addEventListener(y,m,{passive:!0})}),o(),()=>{Ij.forEach(y=>{window.removeEventListener(y,m)}),a.current&&clearTimeout(a.current),s.current&&clearTimeout(s.current)}},[n,o]);const l=E.useCallback(()=>{r(!1),o(),i.current.forEach((m,y)=>{try{m.restore?.()}catch(_){console.error(`Inactivity restore error for ${y}:`,_)}})},[o]),u=E.useCallback((m,y)=>{i.current.set(m,y)},[]),d=E.useCallback(m=>{i.current.delete(m)},[]),f=E.useCallback(()=>{r(!0),i.current.forEach((m,y)=>{try{m.cleanup?.()}catch(_){console.error(`Inactivity cleanup error for ${y}:`,_)}})},[]),p={isDisconnected:n,disconnect:f,reconnect:l,registerConnection:u,unregisterConnection:d,timeoutMs:e};return c.jsx(fz.Provider,{value:p,children:t})}function hP(){const t=E.useContext(fz);return t||{isDisconnected:!1,disconnect:()=>{},reconnect:()=>{},registerConnection:()=>{},unregisterConnection:()=>{},timeoutMs:0}}function ZX({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const oy=E.forwardRef(ZX);function QX({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const Lj=E.forwardRef(QX);function JX({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const eK=E.forwardRef(JX);function tK({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const nK=E.forwardRef(tK);function rK({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const hz=E.forwardRef(rK);function iK({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const pP=E.forwardRef(iK);function aK({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const sK=E.forwardRef(aK);function oK({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const lK=E.forwardRef(oK);function cK({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const uK=E.forwardRef(cK);function dK({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const pz=E.forwardRef(dK);function fK({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const dp=E.forwardRef(fK);function hK({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Fj=E.forwardRef(hK);function pK({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const mz=E.forwardRef(pK);function mK({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const nM=E.forwardRef(mK);function gK({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const gz=E.forwardRef(gK);function vK({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const yK=E.forwardRef(vK);function xK({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m0-10.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.25-8.25-3.286Zm0 13.036h.008v.008H12v-.008Z"}))}const bK=E.forwardRef(xK);function _K({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const wK=E.forwardRef(_K);function SK({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const Pw=E.forwardRef(SK);function EK({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const vz=E.forwardRef(EK),MK={system_submitted:{icon:"",color:"#00C2B3",label:"Submitted"},system_approved:{icon:"",color:"#4ade80",label:"Approved"},system_rejected:{icon:"",color:"#ef4444",label:"Rejected"},system_saved:{icon:"",color:"#00C2B3",label:"Saved"},system_deleted:{icon:"",color:"#ef4444",label:"Deleted"},system_edited:{icon:"",color:"#f0ad4e",label:"Edited"},region_submitted:{icon:"",color:"#9d4edd",label:"Region"},region_approved:{icon:"",color:"#4ade80",label:"Region"},region_rejected:{icon:"",color:"#ef4444",label:"Region"},discovery_added:{icon:"",color:"#9d4edd",label:"Discovery"},map_generated:{icon:"",color:"#00C2B3",label:"Map"},watcher_upload:{icon:"",color:"#f0ad4e",label:"Watcher"}};function CK(){const[t,e]=E.useState(null),[n,r]=E.useState(null),[i,a]=E.useState([]),[s,o]=E.useState({systems:0,regions:0}),[l,u]=E.useState([]),[d,f]=E.useState(!0),[p,m]=E.useState([]),[y,_]=E.useState(!1),v=E.useRef(null),w=E.useRef(null),{isDisconnected:M,registerConnection:C,unregisterConnection:N}=hP();E.useEffect(()=>{(async()=>{try{const[Y,X,ee,se]=await Promise.all([qe.get("/api/stats").catch(()=>({data:null})),qe.get("/api/db_stats").catch(()=>({data:{stats:{}}})),qe.get("/api/regions/grouped?include_systems=false&limit=5").catch(()=>({data:{regions:[]}})),qe.get("/api/systems/recent?limit=10").catch(()=>({data:{systems:[]}}))]);e(Y.data),r(X.data?.stats||{}),a(se.data?.systems||[]);const $=(ee.data?.regions||[]).map(G=>({name:G.display_name||G.custom_name||`Region (${G.region_x}, ${G.region_y}, ${G.region_z})`,count:G.system_count||0,hasCustomName:!!G.custom_name}));u($),f(!0)}catch(Y){console.error("Failed to fetch dashboard data:",Y),f(!1)}})(),qe.get("/api/pending_systems/count").then(Y=>{const X=Y.data||{};o({systems:X.systems||0,regions:X.regions||0})}).catch(()=>{});const O=async()=>{try{const Y=await qe.get("/api/activity_logs?limit=50");m(Y.data?.logs||[]),f(!0)}catch(Y){console.error("Failed to fetch activity logs:",Y)}};if(M)return;O();const q=()=>{w.current=setInterval(()=>{y||O()},6e4)};return q(),C("dashboard-activity-polling",{cleanup:()=>{w.current&&(clearInterval(w.current),w.current=null)},restore:()=>{O(),q()}}),()=>{N("dashboard-activity-polling"),w.current&&clearInterval(w.current)}},[y,M,C,N]),E.useEffect(()=>{!y&&v.current&&(v.current.scrollTop=v.current.scrollHeight)},[p,y]);const P=t?.total||n?.systems||0,R=n?.planets||0,k=n?.moons||0,U=n?.regions||t?.regions?.length||0,I=n?.discoveries||0,L=z=>{const O=typeof z=="string"?new Date(z):z,Y=Math.floor((new Date-O)/1e3);return Y<60?"now":Y<3600?`${Math.floor(Y/60)}m ago`:Y<86400?`${Math.floor(Y/3600)}h ago`:`${Math.floor(Y/86400)}d ago`};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"relative overflow-hidden rounded-2xl",style:{background:"linear-gradient(135deg, rgba(20, 27, 61, 0.95) 0%, rgba(10, 14, 39, 0.98) 100%)",border:"1px solid rgba(0, 194, 179, 0.2)",boxShadow:"0 0 60px rgba(0, 194, 179, 0.1), inset 0 1px 0 rgba(255,255,255,0.05)"},children:[c.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[c.jsx("div",{className:"absolute -top-1/2 -left-1/4 w-1/2 h-full rounded-full opacity-20",style:{background:"radial-gradient(circle, rgba(0, 194, 179, 0.4) 0%, transparent 70%)"}}),c.jsx("div",{className:"absolute -bottom-1/2 -right-1/4 w-1/2 h-full rounded-full opacity-15",style:{background:"radial-gradient(circle, rgba(157, 78, 221, 0.4) 0%, transparent 70%)"}})]}),c.jsxs("div",{className:"relative p-6 lg:p-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h1",{className:"text-2xl lg:text-3xl font-bold tracking-tight",style:{color:"var(--app-text)"},children:"Haven Control Room"}),c.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium",style:{background:d?"rgba(0, 194, 179, 0.15)":"rgba(239, 68, 68, 0.15)",color:d?"#00C2B3":"#ef4444"},children:[c.jsxs("span",{className:"relative flex h-2 w-2",children:[c.jsx("span",{className:`absolute inline-flex h-full w-full rounded-full opacity-75 ${d?"animate-ping":""}`,style:{background:d?"#00C2B3":"#ef4444"}}),c.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2",style:{background:d?"#00C2B3":"#ef4444"}})]}),d?"Systems Online":"Connection Lost"]})]}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4 lg:gap-6 mb-8",children:[{icon:"",label:"Systems",value:P,change:"+12"},{icon:"",label:"Planets",value:R,change:"+45"},{icon:"",label:"Moons",value:k,change:"+18"},{icon:"",label:"Regions",value:U,change:"+3"},{icon:"",label:"Discoveries",value:I,change:"+24"}].map((z,O)=>c.jsxs("div",{className:"text-center p-4 rounded-xl transition-all duration-300 hover:scale-105",style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.06)"},children:[c.jsx("div",{className:"text-2xl mb-1",children:z.icon}),c.jsx("div",{className:"text-2xl lg:text-3xl font-bold",style:{color:"#00C2B3"},children:c.jsx(qX,{value:z.value,duration:1200})}),c.jsx("div",{className:"text-xs uppercase tracking-wider mt-1",style:{color:"var(--muted)"},children:z.label}),c.jsxs("div",{className:"text-xs mt-1",style:{color:"#4ade80"},children:[" ",z.change]})]},O))}),c.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:c.jsxs(yn,{to:"/wizard",className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl font-semibold text-white transition-all duration-300 hover:scale-105",style:{background:"linear-gradient(135deg, #00C2B3 0%, #00a89a 100%)",boxShadow:"0 4px 20px rgba(0, 194, 179, 0.4)"},children:[c.jsx(yK,{className:"w-5 h-5"}),"Add New System"]})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2 rounded-xl overflow-hidden",style:{background:"var(--app-card)",border:"1px solid rgba(255, 255, 255, 0.06)"},children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b",style:{borderColor:"rgba(255,255,255,0.06)"},children:[c.jsxs("h2",{className:"font-semibold flex items-center gap-2",style:{color:"#00C2B3"},children:[c.jsx(dp,{className:"w-5 h-5"}),"Galaxy Overview"]}),c.jsx("a",{href:"/map/latest",target:"_blank",rel:"noreferrer",className:"text-sm hover:underline",style:{color:"var(--muted)"},children:"Open Full Map "})]}),c.jsxs("div",{className:"relative",style:{height:"320px"},children:[c.jsx("iframe",{src:"/map/latest?embed=true&hideUI=true",className:"w-full h-full border-0",title:"Galaxy Map Preview",style:{background:"#050810"}}),c.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"linear-gradient(to bottom, transparent 80%, var(--app-card) 100%)",borderRadius:"0 0 12px 12px"}}),c.jsx("a",{href:"/map/latest",target:"_blank",rel:"noreferrer",className:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-300 cursor-pointer",style:{background:"rgba(0, 0, 0, 0.5)"},children:c.jsx("span",{className:"px-6 py-3 rounded-xl font-semibold text-white",style:{background:"rgba(0, 194, 179, 0.9)"},children:"Click to Open Full Map"})})]})]}),c.jsxs("div",{className:"rounded-xl p-5",style:{background:"var(--app-card)",border:"1px solid rgba(255, 255, 255, 0.06)"},children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center gap-2",style:{color:"#f0ad4e"},children:[c.jsx(uK,{className:"w-5 h-5"}),"Pending Review"]}),s.systems+s.regions>0?c.jsxs("div",{className:"space-y-3",children:[s.systems>0&&c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg",style:{background:"rgba(240, 173, 78, 0.1)",border:"1px solid rgba(240, 173, 78, 0.2)"},children:[c.jsx("span",{className:"text-sm",children:"Systems awaiting approval"}),c.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-bold",style:{background:"rgba(240, 173, 78, 0.2)",color:"#f0ad4e"},children:s.systems})]}),s.regions>0&&c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg",style:{background:"rgba(240, 173, 78, 0.1)",border:"1px solid rgba(240, 173, 78, 0.2)"},children:[c.jsx("span",{className:"text-sm",children:"Region names pending"}),c.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-bold",style:{background:"rgba(240, 173, 78, 0.2)",color:"#f0ad4e"},children:s.regions})]}),c.jsx(yn,{to:"/pending-approvals",className:"block w-full text-center py-2 rounded-lg text-sm font-medium transition-colors",style:{background:"rgba(240, 173, 78, 0.15)",color:"#f0ad4e"},children:"Review All "})]}):c.jsxs("div",{className:"text-center py-8",children:[c.jsx(eK,{className:"w-12 h-12 mx-auto mb-2",style:{color:"#4ade80"}}),c.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"All caught up!"}),c.jsx("p",{className:"text-xs mt-1",style:{color:"var(--muted)"},children:"No pending approvals"})]}),c.jsxs("div",{className:"mt-6 pt-4 border-t",style:{borderColor:"rgba(255,255,255,0.06)"},children:[c.jsx("h3",{className:"text-xs uppercase tracking-wider mb-3",style:{color:"var(--muted)"},children:"Quick Actions"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs(yn,{to:"/systems",className:"flex items-center gap-2 p-2 rounded-lg text-xs transition-colors hover:bg-white/5",children:[c.jsx(Lj,{className:"w-4 h-4",style:{color:"#00C2B3"}}),c.jsx("span",{children:"Systems"})]}),c.jsxs(yn,{to:"/discoveries",className:"flex items-center gap-2 p-2 rounded-lg text-xs transition-colors hover:bg-white/5",children:[c.jsx(mz,{className:"w-4 h-4",style:{color:"#9d4edd"}}),c.jsx("span",{children:"Discoveries"})]}),c.jsxs(yn,{to:"/db_stats",className:"flex items-center gap-2 p-2 rounded-lg text-xs transition-colors hover:bg-white/5",children:[c.jsx(Lj,{className:"w-4 h-4",style:{color:"#00C2B3"}}),c.jsx("span",{children:"DB Stats"})]})]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"rounded-xl p-5",style:{background:"var(--app-card)",border:"1px solid rgba(255, 255, 255, 0.06)"},children:[c.jsx("h2",{className:"font-semibold mb-4 flex items-center gap-2",style:{color:"#00C2B3"},children:" Top Regions"}),c.jsx("div",{className:"space-y-2",children:l.length>0?l.map((z,O)=>c.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg",style:{background:"rgba(255, 255, 255, 0.02)"},children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"w-5 h-5 flex items-center justify-center rounded text-xs font-bold",style:{background:O===0?"rgba(255, 215, 0, 0.2)":O===1?"rgba(192, 192, 192, 0.2)":O===2?"rgba(205, 127, 50, 0.2)":"rgba(255,255,255,0.05)",color:O===0?"#ffd700":O===1?"#c0c0c0":O===2?"#cd7f32":"var(--muted)"},children:O+1}),c.jsx("span",{className:"text-sm truncate max-w-[140px]",style:{color:z.hasCustomName?"#9d4edd":"var(--muted)"},children:z.name})]}),c.jsxs("span",{className:"text-xs px-2 py-1 rounded",style:{background:"rgba(0, 194, 179, 0.1)",color:"#00C2B3"},children:[z.count," sys"]})]},O)):c.jsx("p",{className:"text-sm text-center py-4",style:{color:"var(--muted)"},children:"No regions yet"})})]}),c.jsxs("div",{className:"rounded-xl p-5",style:{background:"var(--app-card)",border:"1px solid rgba(255, 255, 255, 0.06)"},children:[c.jsxs("h2",{className:"font-semibold mb-4 flex items-center gap-2",style:{color:"#9d4edd"},children:[c.jsx(lK,{className:"w-5 h-5"}),"Recent Activity"]}),c.jsx("div",{className:"space-y-2",children:i.length>0?i.slice(0,6).map((z,O)=>c.jsxs("div",{className:"flex items-start gap-2 p-2 rounded-lg",style:{background:"rgba(255, 255, 255, 0.02)"},children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full mt-1.5 flex-shrink-0",style:{background:"#00C2B3"}}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm truncate",children:z.name}),c.jsxs("p",{className:"text-xs",style:{color:"var(--muted)"},children:[z.galaxy||"Euclid","  ",z.planets?.length||0," planets"]})]})]},z.id||O)):c.jsx("p",{className:"text-sm text-center py-4",style:{color:"var(--muted)"},children:"No recent activity"})}),c.jsx(yn,{to:"/systems",className:"block text-center text-sm mt-3 pt-3 border-t",style:{borderColor:"rgba(255,255,255,0.06)",color:"var(--muted)"},children:"View All Systems "})]}),c.jsxs("div",{className:"rounded-xl overflow-hidden flex flex-col self-start",style:{background:"var(--app-card)",border:"1px solid rgba(255, 255, 255, 0.06)",height:"290px"},children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b flex-shrink-0",style:{borderColor:"rgba(255,255,255,0.06)"},children:[c.jsxs("h2",{className:"font-semibold text-sm flex items-center gap-2",children:[" Activity Log",!y&&c.jsx("span",{className:"w-2 h-2 rounded-full animate-pulse",style:{background:"#4ade80"}})]}),c.jsx("div",{className:"flex gap-2",children:c.jsx("button",{onClick:()=>_(!y),className:"px-2 py-1 rounded text-xs transition-colors",style:{background:y?"rgba(239, 68, 68, 0.2)":"rgba(255,255,255,0.05)",color:y?"#ef4444":"var(--app-text)"},children:y?" Paused":" Live"})})]}),c.jsx("div",{ref:v,className:"p-3 overflow-y-auto text-xs flex-1",style:{background:"rgba(0,0,0,0.2)"},children:p.length>0?[...p].reverse().map(z=>{const O=MK[z.event_type]||{icon:"",color:"var(--muted)"};return c.jsxs("div",{className:"py-1.5 flex items-start gap-2 border-b border-white/5 last:border-0",children:[c.jsx("span",{className:"flex-shrink-0",children:O.icon}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"truncate",style:{color:O.color},children:z.message}),c.jsxs("div",{className:"flex items-center gap-2 mt-0.5",style:{color:"var(--muted)"},children:[c.jsx("span",{children:L(z.timestamp)}),z.user_name&&c.jsxs("span",{children:[" ",z.user_name]})]})]})]},z.id)}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full",style:{color:"var(--muted)"},children:[c.jsx("span",{className:"text-2xl mb-2",children:""}),c.jsx("p",{children:"No activity yet..."}),c.jsx("p",{className:"text-xs mt-1",children:"Activity will appear here as it happens"})]})})]})]})]})}function an({children:t,className:e="",thin:n=!1,...r}){return c.jsx("div",{...r,className:`bg-card p-4 sm:p-6 rounded-lg shadow-sm border border-gray-100 ${e}`,style:{backgroundColor:"var(--app-card)"},children:t})}function ft({children:t,onClick:e,className:n="",type:r="button",variant:i="primary",...a}){const s="px-4 py-2 rounded inline-flex items-center justify-center",o={primary:"btn-primary",ghost:"bg-transparent border border-white/10",neutral:"bg-gray-700 text-white"},l=o[i]||o.primary;return c.jsx("button",{type:r,onClick:e,className:`${s} ${l} ${n}`,...a,children:t})}function Il({label:t,children:e,hint:n,className:r=""}){return c.jsxs("div",{className:`mb-4 ${r}`,children:[t&&c.jsx("label",{className:"block text-sm font-medium mb-1",children:t}),c.jsx("div",{children:e}),n&&c.jsx("div",{className:"text-xs muted mt-1",children:n})]})}function NK({onSelect:t,selectedReality:e}){const[n,r]=E.useState([]),[i,a]=E.useState(!0),[s,o]=E.useState(null);E.useEffect(()=>{l()},[]);async function l(){a(!0),o(null);try{const p=await qe.get("/api/realities/summary");r(p.data.realities||[])}catch(p){console.error("Failed to load realities:",p),o("Failed to load reality data"),r([{reality:"Normal",galaxy_count:0,system_count:0},{reality:"Permadeath",galaxy_count:0,system_count:0}])}finally{a(!1)}}const u={Normal:dp,Permadeath:bK},d={Normal:{bg:"bg-cyan-600",hoverBg:"hover:bg-cyan-500",border:"border-cyan-500",text:"text-cyan-400",ring:"ring-cyan-500"},Permadeath:{bg:"bg-red-600",hoverBg:"hover:bg-red-500",border:"border-red-500",text:"text-red-400",ring:"ring-red-500"}};if(i)return c.jsx(an,{children:c.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading realities..."})});const f=["Normal","Permadeath"].map(p=>n.find(y=>y.reality===p)||{reality:p,galaxy_count:0,system_count:0});return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-lg font-semibold text-white",children:"Select Reality"}),s&&c.jsx("span",{className:"text-sm text-red-400",children:s})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:f.map(p=>{const m=u[p.reality]||dp,y=d[p.reality]||d.Normal,_=e===p.reality;return c.jsxs("button",{onClick:()=>t(p.reality),className:`
                relative p-6 rounded-lg border-2 transition-all duration-200
                text-left group
                ${_?`${y.bg} ${y.border} text-white ring-2 ${y.ring} ring-offset-2 ring-offset-gray-900`:`bg-gray-800 border-gray-700 ${y.hoverBg.replace("hover:","")} hover:border-gray-600`}
              `,children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:`
                  p-3 rounded-lg transition-colors
                  ${_?"bg-white/20":"bg-gray-700 group-hover:bg-gray-600"}
                `,children:c.jsx(m,{className:`w-8 h-8 ${_?"text-white":y.text}`})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:`text-xl font-bold ${_?"text-white":"text-gray-100"}`,children:p.reality}),c.jsx("p",{className:`text-sm mt-1 ${_?"text-white/80":"text-gray-400"}`,children:p.reality==="Normal"?"Standard survival mode":"One life, permanent death"})]})]}),c.jsxs("div",{className:`
                mt-4 pt-4 border-t flex justify-between
                ${_?"border-white/20":"border-gray-700"}
              `,children:[c.jsxs("div",{children:[c.jsx("div",{className:`text-2xl font-bold ${_?"text-white":y.text}`,children:p.system_count.toLocaleString()}),c.jsx("div",{className:`text-xs ${_?"text-white/70":"text-gray-500"}`,children:"Systems"})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:`text-2xl font-bold ${_?"text-white":y.text}`,children:p.galaxy_count}),c.jsx("div",{className:`text-xs ${_?"text-white/70":"text-gray-500"}`,children:"Galaxies"})]})]}),_&&c.jsx("div",{className:"absolute top-2 right-2",children:c.jsx("span",{className:"bg-white text-gray-900 text-xs font-bold px-2 py-1 rounded",children:"Selected"})})]},p.reality)})})]})}const rM={Euclid:{num:1,type:"norm",desc:"The starting galaxy - most explored"},"Hilbert Dimension":{num:2,type:"norm",desc:"Second galaxy reached via center"},Calypso:{num:3,type:"harsh",desc:"Raging Galaxy - high conflict"},"Hesperius Dimension":{num:4,type:"norm",desc:"Fourth galaxy"},Hyades:{num:5,type:"norm",desc:"Fifth galaxy"},Ickjamatew:{num:6,type:"norm",desc:"Sixth galaxy"},Budullangr:{num:7,type:"lush",desc:"Ancestral Galaxy - more lush planets"},Kikolgallr:{num:8,type:"norm",desc:"Eighth galaxy"},Eltiensleen:{num:9,type:"norm",desc:"Ninth galaxy"},Eissentam:{num:10,type:"lush",desc:"Tranquil Galaxy - paradise planets"},Elkupalos:{num:11,type:"norm",desc:"Eleventh galaxy"},Aptarkaba:{num:12,type:"norm",desc:"Twelfth galaxy"},Ontiniangp:{num:13,type:"norm",desc:"Thirteenth galaxy"},Odiwagiri:{num:14,type:"norm",desc:"Fourteenth galaxy"},Ogtialabi:{num:15,type:"norm",desc:"Fifteenth galaxy"},Muhacksonto:{num:16,type:"norm",desc:"Sixteenth galaxy"},Hitonskyer:{num:17,type:"norm",desc:"Seventeenth galaxy"},Rerasmutul:{num:18,type:"norm",desc:"Eighteenth galaxy"},Isdoraijung:{num:19,type:"lush",desc:"Halcyon Galaxy - more lush planets"},Doctinawyra:{num:20,type:"norm",desc:"Twentieth galaxy"},Loychazinq:{num:21,type:"norm",desc:"Twenty-first galaxy"},Zukasizawa:{num:22,type:"norm",desc:"Twenty-second galaxy"},Ekwathore:{num:23,type:"norm",desc:"Twenty-third galaxy"},Yeberhahne:{num:24,type:"norm",desc:"Twenty-fourth galaxy"},Twerbetek:{num:25,type:"norm",desc:"Twenty-fifth galaxy"},Sivarates:{num:26,type:"norm",desc:"Twenty-sixth galaxy"},Eajerandal:{num:27,type:"norm",desc:"Twenty-seventh galaxy"},Aldukesci:{num:28,type:"norm",desc:"Twenty-eighth galaxy"},Wotyarogii:{num:29,type:"norm",desc:"Twenty-ninth galaxy"},Sudzerbal:{num:30,type:"norm",desc:"Thirtieth galaxy"},Maupenzhay:{num:31,type:"norm",desc:"Thirty-first galaxy"},Sugueziume:{num:32,type:"norm",desc:"Thirty-second galaxy"},Brogoweldian:{num:33,type:"norm",desc:"Thirty-third galaxy"},Ehbogdenbu:{num:34,type:"norm",desc:"Thirty-fourth galaxy"},Ijsenufryos:{num:35,type:"norm",desc:"Thirty-fifth galaxy"},Nipikulha:{num:36,type:"norm",desc:"Thirty-sixth galaxy"},Autsurabin:{num:37,type:"norm",desc:"Thirty-seventh galaxy"},Lusontrygiamh:{num:38,type:"norm",desc:"Thirty-eighth galaxy"},Rewmanawa:{num:39,type:"norm",desc:"Thirty-ninth galaxy"},Ethiophodhe:{num:40,type:"norm",desc:"Fortieth galaxy"},Urastrykle:{num:41,type:"norm",desc:"Forty-first galaxy"},Xobeurindj:{num:42,type:"norm",desc:"Forty-second galaxy"},Oniijialdu:{num:43,type:"norm",desc:"Forty-third galaxy"},Wucetosucc:{num:44,type:"norm",desc:"Forty-fourth galaxy"},Ebyeloof:{num:45,type:"norm",desc:"Forty-fifth galaxy"},Odyavanta:{num:46,type:"norm",desc:"Forty-sixth galaxy"},Milekistri:{num:47,type:"norm",desc:"Forty-seventh galaxy"},Waferganh:{num:48,type:"norm",desc:"Forty-eighth galaxy"},Agnusopwit:{num:49,type:"norm",desc:"Forty-ninth galaxy"},Teyaypilny:{num:50,type:"norm",desc:"Fiftieth galaxy"},Zalienkosm:{num:51,type:"norm",desc:"Fifty-first galaxy"},Ladgudiraf:{num:52,type:"norm",desc:"Fifty-second galaxy"},Mushonponte:{num:53,type:"norm",desc:"Fifty-third galaxy"},Amsentisz:{num:54,type:"norm",desc:"Fifty-fourth galaxy"},Fladiselm:{num:55,type:"norm",desc:"Fifty-fifth galaxy"},Laanawemb:{num:56,type:"norm",desc:"Fifty-sixth galaxy"},Ilkerloor:{num:57,type:"norm",desc:"Fifty-seventh galaxy"},Davanossi:{num:58,type:"norm",desc:"Fifty-eighth galaxy"},Ploehrliou:{num:59,type:"norm",desc:"Fifty-ninth galaxy"},Corpinyaya:{num:60,type:"norm",desc:"Sixtieth galaxy"},Leckandmeram:{num:61,type:"norm",desc:"Sixty-first galaxy"},Quulngais:{num:62,type:"norm",desc:"Sixty-second galaxy"},Nokokipsechl:{num:63,type:"norm",desc:"Sixty-third galaxy"},Rinblodesa:{num:64,type:"norm",desc:"Sixty-fourth galaxy"},Loydporpen:{num:65,type:"norm",desc:"Sixty-fifth galaxy"},Ibtrevskip:{num:66,type:"norm",desc:"Sixty-sixth galaxy"},Elkowaldb:{num:67,type:"norm",desc:"Sixty-seventh galaxy"},Heholhofsko:{num:68,type:"norm",desc:"Sixty-eighth galaxy"},Yebrilowisod:{num:69,type:"norm",desc:"Sixty-ninth galaxy"},Husalvangewi:{num:70,type:"norm",desc:"Seventieth galaxy"},"Ovna'uesed":{num:71,type:"norm",desc:"Seventy-first galaxy"},Bahibusey:{num:72,type:"norm",desc:"Seventy-second galaxy"},Nuybeliaure:{num:73,type:"norm",desc:"Seventy-third galaxy"},Doshawchuc:{num:74,type:"norm",desc:"Seventy-fourth galaxy"},Ruckinarkh:{num:75,type:"norm",desc:"Seventy-fifth galaxy"},Thorettac:{num:76,type:"norm",desc:"Seventy-sixth galaxy"},Nuponoparau:{num:77,type:"norm",desc:"Seventy-seventh galaxy"},Moglaschil:{num:78,type:"norm",desc:"Seventy-eighth galaxy"},Uiweupose:{num:79,type:"norm",desc:"Seventy-ninth galaxy"},Nasmilete:{num:80,type:"norm",desc:"Eightieth galaxy"},Ekdaluskin:{num:81,type:"norm",desc:"Eighty-first galaxy"},Hakapanasy:{num:82,type:"norm",desc:"Eighty-second galaxy"},Dimonimba:{num:83,type:"norm",desc:"Eighty-third galaxy"},Cajaccari:{num:84,type:"norm",desc:"Eighty-fourth galaxy"},Olonerovo:{num:85,type:"norm",desc:"Eighty-fifth galaxy"},Umlanswick:{num:86,type:"norm",desc:"Eighty-sixth galaxy"},Henayliszm:{num:87,type:"norm",desc:"Eighty-seventh galaxy"},Utzenmate:{num:88,type:"norm",desc:"Eighty-eighth galaxy"},Umirpaiya:{num:89,type:"norm",desc:"Eighty-ninth galaxy"},Paholiang:{num:90,type:"norm",desc:"Ninetieth galaxy"},Iaereznika:{num:91,type:"norm",desc:"Ninety-first galaxy"},Yudukagath:{num:92,type:"norm",desc:"Ninety-second galaxy"},Boealalosnj:{num:93,type:"norm",desc:"Ninety-third galaxy"},Yaevarcko:{num:94,type:"norm",desc:"Ninety-fourth galaxy"},Coellosipp:{num:95,type:"norm",desc:"Ninety-fifth galaxy"},Wayndohalou:{num:96,type:"norm",desc:"Ninety-sixth galaxy"},Smoduraykl:{num:97,type:"norm",desc:"Ninety-seventh galaxy"},Apmaneessu:{num:98,type:"norm",desc:"Ninety-eighth galaxy"},Hicanpaav:{num:99,type:"norm",desc:"Ninety-ninth galaxy"},Akvasanta:{num:100,type:"norm",desc:"One hundredth galaxy"},Tuychelisaor:{num:101,type:"norm",desc:"Galaxy #101"},Rivskimbe:{num:102,type:"norm",desc:"Galaxy #102"},Daksanquix:{num:103,type:"norm",desc:"Galaxy #103"},Kissonlin:{num:104,type:"norm",desc:"Galaxy #104"},Aediabiel:{num:105,type:"norm",desc:"Galaxy #105"},Ulosaginyik:{num:106,type:"norm",desc:"Galaxy #106"},Roclaytonycar:{num:107,type:"norm",desc:"Galaxy #107"},Kichiaroa:{num:108,type:"norm",desc:"Galaxy #108"},Irceauffey:{num:109,type:"norm",desc:"Galaxy #109"},Nudquathsenfe:{num:110,type:"norm",desc:"Galaxy #110"},Getaizakaal:{num:111,type:"norm",desc:"Galaxy #111"},Hansolmien:{num:112,type:"norm",desc:"Galaxy #112"},Bloytisagra:{num:113,type:"norm",desc:"Galaxy #113"},Ladsenlay:{num:114,type:"norm",desc:"Galaxy #114"},Luyugoslasr:{num:115,type:"norm",desc:"Galaxy #115"},Ubredhatk:{num:116,type:"norm",desc:"Galaxy #116"},Cidoniana:{num:117,type:"norm",desc:"Galaxy #117"},Jasinessa:{num:118,type:"norm",desc:"Galaxy #118"},Torweierf:{num:119,type:"norm",desc:"Galaxy #119"},Saffneckm:{num:120,type:"norm",desc:"Galaxy #120"},Thnistner:{num:121,type:"norm",desc:"Galaxy #121"},Dotusingg:{num:122,type:"norm",desc:"Galaxy #122"},Luleukous:{num:123,type:"norm",desc:"Galaxy #123"},Jelmandan:{num:124,type:"norm",desc:"Galaxy #124"},Otimanaso:{num:125,type:"norm",desc:"Galaxy #125"},Enjaxusanto:{num:126,type:"norm",desc:"Galaxy #126"},Sezviktorew:{num:127,type:"norm",desc:"Galaxy #127"},Zikehpm:{num:128,type:"norm",desc:"Galaxy #128"},Bephembah:{num:129,type:"norm",desc:"Galaxy #129"},Broomerrai:{num:130,type:"norm",desc:"Galaxy #130"},Meximicka:{num:131,type:"norm",desc:"Galaxy #131"},Venessika:{num:132,type:"norm",desc:"Galaxy #132"},Gaiteseling:{num:133,type:"norm",desc:"Galaxy #133"},Zosakasiro:{num:134,type:"norm",desc:"Galaxy #134"},Drajayanes:{num:135,type:"norm",desc:"Galaxy #135"},Ooibekuar:{num:136,type:"norm",desc:"Galaxy #136"},Urckiansi:{num:137,type:"norm",desc:"Galaxy #137"},Dozivadido:{num:138,type:"norm",desc:"Galaxy #138"},Emiekereks:{num:139,type:"norm",desc:"Galaxy #139"},Meykinunukur:{num:140,type:"norm",desc:"Galaxy #140"},Kimycuristh:{num:141,type:"norm",desc:"Galaxy #141"},Roansfien:{num:142,type:"norm",desc:"Galaxy #142"},Isgarmeso:{num:143,type:"norm",desc:"Galaxy #143"},Daitibeli:{num:144,type:"norm",desc:"Galaxy #144"},Gucuttarik:{num:145,type:"norm",desc:"Galaxy #145"},Enlaythie:{num:146,type:"norm",desc:"Galaxy #146"},Drewweste:{num:147,type:"norm",desc:"Galaxy #147"},Akbulkabi:{num:148,type:"norm",desc:"Galaxy #148"},Homskiw:{num:149,type:"norm",desc:"Galaxy #149"},Zavainlani:{num:150,type:"norm",desc:"Galaxy #150"},Jewijkmas:{num:151,type:"norm",desc:"Galaxy #151"},Itlhotagra:{num:152,type:"norm",desc:"Galaxy #152"},Podalicess:{num:153,type:"norm",desc:"Galaxy #153"},Hiviusauer:{num:154,type:"norm",desc:"Galaxy #154"},Halsebenk:{num:155,type:"norm",desc:"Galaxy #155"},Puikitoac:{num:156,type:"norm",desc:"Galaxy #156"},Gaybakuaria:{num:157,type:"norm",desc:"Galaxy #157"},Grbodubhe:{num:158,type:"norm",desc:"Galaxy #158"},Rycempler:{num:159,type:"norm",desc:"Galaxy #159"},Indjalala:{num:160,type:"norm",desc:"Galaxy #160"},Fontenikk:{num:161,type:"norm",desc:"Galaxy #161"},Pasycihelwhee:{num:162,type:"norm",desc:"Galaxy #162"},Ikbaksmit:{num:163,type:"norm",desc:"Galaxy #163"},Telicianses:{num:164,type:"norm",desc:"Galaxy #164"},Oyleyzhan:{num:165,type:"norm",desc:"Galaxy #165"},Uagerosat:{num:166,type:"norm",desc:"Galaxy #166"},Impoxectin:{num:167,type:"norm",desc:"Galaxy #167"},Twoodmand:{num:168,type:"norm",desc:"Galaxy #168"},Hilfsesorbs:{num:169,type:"norm",desc:"Galaxy #169"},Ezdaranit:{num:170,type:"norm",desc:"Galaxy #170"},Wiensanshe:{num:171,type:"norm",desc:"Galaxy #171"},Ewheelonc:{num:172,type:"norm",desc:"Galaxy #172"},Litzmantufa:{num:173,type:"norm",desc:"Galaxy #173"},Emarmatosi:{num:174,type:"norm",desc:"Galaxy #174"},Mufimbomacvi:{num:175,type:"norm",desc:"Galaxy #175"},Wongquarum:{num:176,type:"norm",desc:"Galaxy #176"},Hapirajua:{num:177,type:"norm",desc:"Galaxy #177"},Igbinduina:{num:178,type:"norm",desc:"Galaxy #178"},Wepaitvas:{num:179,type:"norm",desc:"Galaxy #179"},Sthatigudi:{num:180,type:"norm",desc:"Galaxy #180"},Yekathsebehn:{num:181,type:"norm",desc:"Galaxy #181"},Ebedeagurst:{num:182,type:"norm",desc:"Galaxy #182"},Nolisonia:{num:183,type:"norm",desc:"Galaxy #183"},Ulexovitab:{num:184,type:"norm",desc:"Galaxy #184"},Iodhinxois:{num:185,type:"norm",desc:"Galaxy #185"},Irroswitzs:{num:186,type:"norm",desc:"Galaxy #186"},Bifredait:{num:187,type:"norm",desc:"Galaxy #187"},Beiraghedwe:{num:188,type:"norm",desc:"Galaxy #188"},Yeonatlak:{num:189,type:"norm",desc:"Galaxy #189"},Cugnatachh:{num:190,type:"norm",desc:"Galaxy #190"},Nozoryenki:{num:191,type:"norm",desc:"Galaxy #191"},Ebralduri:{num:192,type:"norm",desc:"Galaxy #192"},Evcickcandj:{num:193,type:"norm",desc:"Galaxy #193"},Ziybosswin:{num:194,type:"norm",desc:"Galaxy #194"},Heperclait:{num:195,type:"norm",desc:"Galaxy #195"},Sugiuniam:{num:196,type:"norm",desc:"Galaxy #196"},Aaseertush:{num:197,type:"norm",desc:"Galaxy #197"},Uglyestemaa:{num:198,type:"norm",desc:"Galaxy #198"},Horeroedsh:{num:199,type:"norm",desc:"Galaxy #199"},Drundemiso:{num:200,type:"norm",desc:"Galaxy #200"},Ityanianat:{num:201,type:"norm",desc:"Galaxy #201"},Purneyrine:{num:202,type:"norm",desc:"Galaxy #202"},Dokiessmat:{num:203,type:"norm",desc:"Galaxy #203"},Nupiacheh:{num:204,type:"norm",desc:"Galaxy #204"},Dihewsonj:{num:205,type:"norm",desc:"Galaxy #205"},Rudrailhik:{num:206,type:"norm",desc:"Galaxy #206"},Tweretnort:{num:207,type:"norm",desc:"Galaxy #207"},Snatreetze:{num:208,type:"norm",desc:"Galaxy #208"},Iwundaracos:{num:209,type:"norm",desc:"Galaxy #209"},Digarlewena:{num:210,type:"norm",desc:"Galaxy #210"},Erquagsta:{num:211,type:"norm",desc:"Galaxy #211"},Logovoloin:{num:212,type:"norm",desc:"Galaxy #212"},Boyaghosganh:{num:213,type:"norm",desc:"Galaxy #213"},Kuolungau:{num:214,type:"norm",desc:"Galaxy #214"},Pehneldept:{num:215,type:"norm",desc:"Galaxy #215"},Yevettiiqidcon:{num:216,type:"norm",desc:"Galaxy #216"},Sahliacabru:{num:217,type:"norm",desc:"Galaxy #217"},Noggalterpor:{num:218,type:"norm",desc:"Galaxy #218"},Chmageaki:{num:219,type:"norm",desc:"Galaxy #219"},Veticueca:{num:220,type:"norm",desc:"Galaxy #220"},Vittesbursul:{num:221,type:"norm",desc:"Galaxy #221"},Nootanore:{num:222,type:"norm",desc:"Galaxy #222"},Innebdjerah:{num:223,type:"norm",desc:"Galaxy #223"},Kisvarcini:{num:224,type:"norm",desc:"Galaxy #224"},Cuzcogipper:{num:225,type:"norm",desc:"Galaxy #225"},Pamanhermonsu:{num:226,type:"norm",desc:"Galaxy #226"},Brotoghek:{num:227,type:"norm",desc:"Galaxy #227"},Mibittara:{num:228,type:"norm",desc:"Galaxy #228"},Huruahili:{num:229,type:"norm",desc:"Galaxy #229"},Raldwicarn:{num:230,type:"norm",desc:"Galaxy #230"},Ezdartlic:{num:231,type:"norm",desc:"Galaxy #231"},Badesclema:{num:232,type:"norm",desc:"Galaxy #232"},Isenkeyan:{num:233,type:"norm",desc:"Galaxy #233"},Iadoitesu:{num:234,type:"norm",desc:"Galaxy #234"},Yagrovoisi:{num:235,type:"norm",desc:"Galaxy #235"},Ewcomechio:{num:236,type:"norm",desc:"Galaxy #236"},Inunnunnoda:{num:237,type:"norm",desc:"Galaxy #237"},Dischiutun:{num:238,type:"norm",desc:"Galaxy #238"},Yuwarugha:{num:239,type:"norm",desc:"Galaxy #239"},Ialmendra:{num:240,type:"norm",desc:"Galaxy #240"},Reponudrle:{num:241,type:"norm",desc:"Galaxy #241"},Rinjanagrbo:{num:242,type:"norm",desc:"Galaxy #242"},Zeziceloh:{num:243,type:"norm",desc:"Galaxy #243"},Oeileutasc:{num:244,type:"norm",desc:"Galaxy #244"},Zicniijinis:{num:245,type:"norm",desc:"Galaxy #245"},Dugnowarilda:{num:246,type:"norm",desc:"Galaxy #246"},Neuxoisan:{num:247,type:"norm",desc:"Galaxy #247"},Ilmenhorn:{num:248,type:"norm",desc:"Galaxy #248"},Rukwatsuku:{num:249,type:"norm",desc:"Galaxy #249"},Nepitzaspru:{num:250,type:"norm",desc:"Galaxy #250"},Chcehoemig:{num:251,type:"norm",desc:"Galaxy #251"},Haffneyrin:{num:252,type:"norm",desc:"Galaxy #252"},Uliciawai:{num:253,type:"norm",desc:"Galaxy #253"},Tuhgrespod:{num:254,type:"norm",desc:"Galaxy #254"},Iousongola:{num:255,type:"norm",desc:"Galaxy #255"},Odyalutai:{num:256,type:"norm",desc:"Galaxy #256 - Final galaxy"}},Uj={lush:{label:"Lush",color:"from-emerald-600 to-green-700",border:"border-emerald-500",badge:"bg-emerald-500 text-white",icon:""},harsh:{label:"Harsh",color:"from-red-600 to-orange-700",border:"border-red-500",badge:"bg-red-500 text-white",icon:""},norm:{label:"Normal",color:"from-cyan-600 to-blue-700",border:"border-cyan-500",badge:"bg-cyan-500 text-white",icon:""},empty:{label:"Empty",color:"from-gray-600 to-gray-700",border:"border-gray-500",badge:"bg-gray-500 text-white",icon:""}};function AK({reality:t,onSelect:e,selectedGalaxy:n}){const[r,i]=E.useState([]),[a,s]=E.useState(!0),[o,l]=E.useState(null);E.useEffect(()=>{t&&u()},[t]);async function u(){s(!0),l(null);try{const y=await qe.get(`/api/galaxies/summary?reality=${encodeURIComponent(t)}`);i(y.data.galaxies||[])}catch(y){console.error("Failed to load galaxies:",y),l("Failed to load galaxy data"),i([])}finally{s(!1)}}const d=E.useMemo(()=>[...r].sort((y,_)=>{const v=rM[y.galaxy]?.num||999,w=rM[_.galaxy]?.num||999;return v-w}),[r]);function f(y){return rM[y]||{num:"?",type:"norm",desc:"Uncharted galaxy"}}if(a)return c.jsx(an,{children:c.jsxs("div",{className:"text-center py-8 text-gray-400",children:[c.jsx(oy,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading galaxies for ",t,"..."]})});if(o)return c.jsx(an,{children:c.jsxs("div",{className:"text-center py-8",children:[c.jsx("p",{className:"text-red-400 mb-4",children:o}),c.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-white",children:"Retry"})]})});if(r.length===0)return c.jsx(an,{children:c.jsxs("div",{className:"text-center py-8 text-gray-400",children:[c.jsx(wK,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),c.jsxs("p",{children:["No galaxies found in ",t," mode."]}),c.jsx("p",{className:"text-sm mt-2",children:"Systems need to be added to see galaxies here."})]})});const p=d.reduce((y,_)=>y+_.system_count,0),m=d.reduce((y,_)=>y+_.region_count,0);return c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex items-center justify-between flex-wrap gap-2",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[c.jsx(dp,{className:"w-6 h-6 text-cyan-400"}),"Galaxies in ",t]}),c.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[d.length," galaxies with data  ",p.toLocaleString()," systems  ",m.toLocaleString()," regions"]})]})}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:d.map(y=>{const _=f(y.galaxy),v=Uj[_.type]||Uj.norm,w=n===y.galaxy;return c.jsxs("button",{onClick:()=>e(y.galaxy),className:`
                relative overflow-hidden rounded-xl transition-all duration-300
                text-left group
                ${w?"ring-2 ring-cyan-400 ring-offset-2 ring-offset-gray-900 scale-[1.02]":"hover:scale-[1.02] hover:shadow-lg hover:shadow-cyan-500/10"}
              `,children:[c.jsx("div",{className:`
                absolute inset-0 bg-gradient-to-br opacity-90
                ${w?"from-cyan-600 to-blue-700":`${v.color}`}
              `}),c.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"16px 16px"}}),c.jsxs("div",{className:"relative p-4",children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:`
                      w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold
                      ${w?"bg-white/30 text-white":"bg-black/30 text-white"}
                    `,children:_.num}),c.jsx("span",{className:`
                      text-xs px-2 py-0.5 rounded-full font-medium
                      ${w?"bg-white/20 text-white":v.badge}
                    `,children:v.label})]}),w&&c.jsx("span",{className:"bg-white text-cyan-600 text-xs font-bold px-2 py-1 rounded-full shadow",children:"Selected"})]}),c.jsx("h3",{className:"font-bold text-lg text-white truncate mb-1",children:y.galaxy}),c.jsx("p",{className:"text-xs text-white/70 mb-4 line-clamp-2 min-h-[2rem]",children:_.desc}),c.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-white/20",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-xl font-bold text-white",children:y.system_count.toLocaleString()}),c.jsx("div",{className:"text-xs text-white/60 uppercase tracking-wide",children:"Systems"})]}),c.jsx("div",{className:"w-px h-8 bg-white/20"}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-xl font-bold text-white",children:y.region_count}),c.jsx("div",{className:"text-xs text-white/60 uppercase tracking-wide",children:"Regions"})]})]})]}),c.jsx("div",{className:`
                absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300
                bg-gradient-to-t from-cyan-500/20 to-transparent pointer-events-none
              `})]},y.galaxy)})})]})}function Tr({title:t,children:e,onClose:n,isOpen:r=!0}){return r?c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-40 p-2 sm:p-4 overflow-y-auto",children:c.jsxs("div",{className:"p-4 sm:p-6 rounded shadow w-full max-w-[95vw] sm:max-w-xl md:max-w-2xl lg:max-w-3xl my-2 sm:my-4 max-h-[95vh] sm:max-h-[90vh] flex flex-col",style:{backgroundColor:"var(--app-card)"},children:[c.jsxs("div",{className:"flex items-center justify-between mb-3 flex-shrink-0 gap-2",children:[c.jsx("div",{className:"font-semibold text-base sm:text-lg flex-1 min-w-0 truncate",children:t}),c.jsx("button",{onClick:n,className:"px-3 py-1.5 sm:px-2 sm:py-1 rounded text-sm flex-shrink-0",style:{backgroundColor:"var(--app-accent-3)",color:"#fff"},children:"Close"})]}),c.jsx("div",{className:"overflow-y-auto flex-1 -mx-4 px-4 sm:-mx-6 sm:px-6",children:e})]})}):null}const yo={APPROVALS:"approvals",SETTINGS:"settings",CSV_IMPORT:"csv_import",BATCH_APPROVALS:"batch_approvals",WAR_ROOM:"war_room"},kr=E.createContext({isAdmin:!1,isSuperAdmin:!1,isPartner:!1,isSubAdmin:!1,isHavenSubAdmin:!1,isCorrespondent:!1,user:null,loading:!0,login:async()=>{},logout:async()=>{},canAccess:()=>!1,refreshAuth:async()=>{}});function TK({children:t}){const[e,n]=E.useState(null),[r,i]=E.useState(!0);async function a(){try{const w=await(await fetch("/api/admin/status",{credentials:"include"})).json();w.logged_in?n({type:w.user_type,username:w.username,discordTag:w.discord_tag,displayName:w.display_name,enabledFeatures:w.enabled_features||[],accountId:w.account_id,parentDisplayName:w.parent_display_name,isHavenSubAdmin:w.is_haven_sub_admin||!1}):n(null)}catch(v){console.error("Auth check failed:",v),n(null)}finally{i(!1)}}E.useEffect(()=>{a()},[]);const s=!!e,o=e?.type==="super_admin",l=e?.type==="partner",u=e?.type==="sub_admin",d=e?.isHavenSubAdmin||!1,f=e?.type==="correspondent";function p(v){if(!e)return!1;if(o)return!0;const w=e.enabledFeatures||[];return w.includes("all")?!0:w.includes(v)}async function m(v,w){const M=await fetch("/api/admin/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:v,password:w})});if(!M.ok){const N=await M.json().catch(()=>({}));throw new Error(N.detail||"Login failed")}const C=await M.json();return n({type:C.user_type,username:C.username,discordTag:C.discord_tag,displayName:C.display_name,enabledFeatures:C.enabled_features||[],accountId:C.account_id,parentDisplayName:C.parent_display_name,isHavenSubAdmin:C.is_haven_sub_admin||!1}),C}async function y(){await fetch("/api/admin/logout",{method:"POST",credentials:"include"}),n(null)}async function _(){await a()}return c.jsx(kr.Provider,{value:{isAdmin:s,isSuperAdmin:o,isPartner:l,isSubAdmin:u,isHavenSubAdmin:d,isCorrespondent:f,user:e,loading:r,login:m,logout:y,canAccess:p,refreshAuth:_},children:t})}function PK({reality:t,galaxy:e,onSelect:n,selectedRegion:r,discordTag:i="all",onViewAllSystems:a}){const s=E.useContext(kr),[o,l]=E.useState([]),[u,d]=E.useState(!0),[f,p]=E.useState(null),[m,y]=E.useState(0),[_,v]=E.useState(0),w=50,[M,C]=E.useState([]),[N,P]=E.useState(!1),[R,k]=E.useState(null),[U,I]=E.useState(""),[L,z]=E.useState(null),[O,q]=E.useState(""),[Y,X]=E.useState(!1);E.useEffect(()=>{t&&e&&ee()},[t,e,m,i]),E.useEffect(()=>{qe.get("/api/discord_tags").then(ie=>{C(ie.data.tags||[])}).catch(()=>{})},[]);async function ee(){d(!0),p(null);try{const ie=new URLSearchParams({reality:t,galaxy:e,include_systems:"false",page:m.toString(),limit:w.toString()});i&&i!=="all"&&ie.append("discord_tag",i);const le=await qe.get(`/api/regions/grouped?${ie.toString()}`);l(le.data.regions||[]),v(le.data.total_regions||0)}catch(ie){console.error("Failed to load regions:",ie),p("Failed to load region data"),l([])}finally{d(!1)}}function se(ie,le){ie.stopPropagation(),k(le),I(le.display_name||le.custom_name||""),z(null),q(""),P(!0)}async function W(ie){if(ie.preventDefault(),!U.trim()||!R)return;const le=s?.isAdmin&&!s?.isSuperAdmin,fe=le?s?.user?.username:O.trim();if(!s?.isSuperAdmin){if(!L){alert("Please select a Discord Community");return}if(!le&&!O.trim()){alert("Please enter your Discord Username");return}}const{region_x:Ne,region_y:Se,region_z:Z}=R;X(!0);try{s?.isSuperAdmin?await qe.put(`/api/regions/${Ne}/${Se}/${Z}`,{custom_name:U.trim()}):await qe.post(`/api/regions/${Ne}/${Se}/${Z}/submit`,{proposed_name:U.trim(),discord_tag:L,personal_discord_username:fe}),P(!1),k(null),I(""),z(null),q(""),ee(),alert(s?.isSuperAdmin?"Region name updated!":"Name submitted for approval!")}catch(xe){alert("Failed: "+(xe.response?.data?.detail||xe.message))}finally{X(!1)}}const $=Math.ceil(_/w),G=m>0,j=m<$-1;function B(){const ie=[],le=m+1;if($<=7)for(let fe=1;fe<=$;fe++)ie.push(fe);else{ie.push(1),le>3&&ie.push("...");const fe=Math.max(2,le-1),Ne=Math.min($-1,le+1);for(let Se=fe;Se<=Ne;Se++)ie.includes(Se)||ie.push(Se);le<$-2&&ie.push("..."),ie.includes($)||ie.push($)}return ie}const ae=i&&!["all","untagged","personal"].includes(i);function re(ie){return`${ie.region_x}-${ie.region_y}-${ie.region_z}`}function de(ie){return r?r.region_x===ie.region_x&&r.region_y===ie.region_y&&r.region_z===ie.region_z:!1}if(u&&o.length===0)return c.jsx(an,{children:c.jsxs("div",{className:"text-center py-8 text-gray-400",children:[c.jsx(oy,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading regions in ",e,"..."]})});if(f)return c.jsx(an,{children:c.jsxs("div",{className:"text-center py-8",children:[c.jsx("p",{className:"text-red-400 mb-4",children:f}),c.jsx("button",{onClick:ee,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-white",children:"Retry"})]})});if(o.length===0)return c.jsx(an,{children:c.jsxs("div",{className:"text-center py-8 text-gray-400",children:[c.jsx(nM,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),c.jsxs("p",{children:["No regions found in ",e,"."]}),c.jsx("p",{className:"text-sm mt-2",children:"Systems need to be added to see regions here."})]})});const ce=o.reduce((ie,le)=>ie+(le.system_count||0),0);return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[c.jsx(nM,{className:"w-6 h-6 text-purple-400"}),"Regions in ",e]}),c.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[_," regions total  Showing ",o.length," (",ce.toLocaleString()," systems)"]})]}),$>1&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:()=>y(ie=>Math.max(0,ie-1)),disabled:!G,className:`p-2 rounded ${G?"bg-gray-700 hover:bg-gray-600":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,children:c.jsx(hz,{className:"w-5 h-5"})}),B().map((ie,le)=>ie==="..."?c.jsx("span",{className:"px-2 text-gray-500",children:"..."},`ellipsis-${le}`):c.jsx("button",{onClick:()=>y(ie-1),className:`px-3 py-1 rounded text-sm ${m+1===ie?"bg-purple-600 text-white font-medium":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:ie},ie)),c.jsx("button",{onClick:()=>y(ie=>Math.min($-1,ie+1)),disabled:!j,className:`p-2 rounded ${j?"bg-gray-700 hover:bg-gray-600":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,children:c.jsx(pP,{className:"w-5 h-5"})})]})]}),u&&c.jsxs("div",{className:"text-center py-2 text-cyan-400 text-sm",children:[c.jsx(oy,{className:"w-4 h-4 animate-spin inline mr-2"}),"Updating..."]}),ae&&a&&c.jsx("div",{className:"mb-4",children:c.jsxs("button",{onClick:a,className:"w-full p-4 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 rounded-xl text-white font-semibold transition-all flex items-center justify-center gap-2 shadow-lg hover:shadow-cyan-500/25",children:[c.jsx(Pw,{className:"w-5 h-5"}),"View All ",i," Systems (",_>0?"across all regions":"none found",")"]})}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:o.map(ie=>{const le=de(ie),fe=ie.display_name&&ie.display_name!==`Region (${ie.region_x}, ${ie.region_y}, ${ie.region_z})`;return c.jsxs("div",{className:`
                relative overflow-hidden rounded-xl transition-all duration-300
                group
                ${le?"ring-2 ring-purple-400 ring-offset-2 ring-offset-gray-900 scale-[1.02]":"hover:scale-[1.02] hover:shadow-lg hover:shadow-purple-500/10"}
              `,children:[c.jsx("div",{className:`
                absolute inset-0 bg-gradient-to-br
                ${le?"from-purple-600 to-indigo-700":fe?"from-purple-700/80 to-indigo-800/80":"from-gray-700 to-gray-800"}
              `}),c.jsx("div",{className:"absolute inset-0 opacity-5",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"12px 12px"}}),c.jsxs("button",{onClick:()=>n(ie),className:"relative p-4 w-full text-left",children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsx("div",{className:`
                    p-2 rounded-lg
                    ${le?"bg-white/20":fe?"bg-purple-500/30":"bg-gray-600/50"}
                  `,children:fe?c.jsx(Pw,{className:"w-5 h-5 text-yellow-400 fill-yellow-400"}):c.jsx(nM,{className:`w-5 h-5 ${le?"text-white":"text-purple-400"}`})}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("a",{href:`/map/region?rx=${ie.region_x}&ry=${ie.region_y}&rz=${ie.region_z}`,target:"_blank",rel:"noopener noreferrer",onClick:Ne=>Ne.stopPropagation(),className:`
                        px-2 py-1 rounded-lg text-xs font-medium transition-colors
                        ${le?"bg-white/20 hover:bg-white/30 text-white":"bg-cyan-600/80 hover:bg-cyan-500 text-white"}
                      `,title:"View in 3D Map",children:"View"}),c.jsx("button",{onClick:Ne=>se(Ne,ie),className:`
                        p-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity
                        ${le?"bg-white/20 hover:bg-white/30":"bg-gray-600/50 hover:bg-gray-500/50"}
                      `,title:fe?"Edit name":"Set name",children:c.jsx(gz,{className:"w-4 h-4 text-white"})})]})]}),c.jsx("h3",{className:"font-bold text-white truncate mb-1",children:fe?c.jsx("span",{className:"text-purple-200",children:ie.display_name}):c.jsx("span",{className:"text-gray-300",children:"Unnamed Region"})}),c.jsxs("p",{className:"text-xs font-mono text-white/50 mb-3",children:["(",ie.region_x,", ",ie.region_y,", ",ie.region_z,")"]}),c.jsxs("div",{className:`
                  flex items-center justify-between pt-3 border-t
                  ${le?"border-white/20":"border-white/10"}
                `,children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-2xl font-bold text-white",children:ie.system_count}),c.jsx("span",{className:"text-xs ml-1.5 text-white/60",children:ie.system_count===1?"system":"systems"})]}),fe&&c.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-purple-500/30 text-purple-200",children:"Named"})]}),le&&c.jsx("div",{className:"absolute -top-1 -right-1",children:c.jsx("span",{className:"bg-white text-purple-600 text-xs font-bold px-2 py-1 rounded-full shadow",children:"Selected"})})]}),c.jsx("div",{className:`
                absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300
                bg-gradient-to-t from-purple-500/20 to-transparent pointer-events-none
              `})]},re(ie))})}),$>1&&c.jsxs("div",{className:"flex justify-center items-center gap-1 pt-4 flex-wrap",children:[c.jsx("button",{onClick:()=>y(ie=>Math.max(0,ie-1)),disabled:!G,className:`px-3 py-2 rounded ${G?"bg-gray-700 hover:bg-gray-600":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,children:"Previous"}),B().map((ie,le)=>ie==="..."?c.jsx("span",{className:"px-2 text-gray-500",children:"..."},`ellipsis-bottom-${le}`):c.jsx("button",{onClick:()=>y(ie-1),className:`px-3 py-2 rounded text-sm ${m+1===ie?"bg-purple-600 text-white font-medium":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:ie},`bottom-${ie}`)),c.jsx("button",{onClick:()=>y(ie=>Math.min($-1,ie+1)),disabled:!j,className:`px-3 py-2 rounded ${j?"bg-gray-700 hover:bg-gray-600":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,children:"Next"})]}),N&&R&&c.jsx(Tr,{title:R.display_name?"Edit Region Name":"Set Region Name",onClose:()=>P(!1),children:c.jsxs("form",{onSubmit:W,className:"space-y-4",children:[c.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 text-center",children:[c.jsx("span",{className:"text-xs text-gray-400",children:"Coordinates"}),c.jsxs("p",{className:"font-mono text-purple-400",children:["(",R.region_x,", ",R.region_y,", ",R.region_z,")"]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Region Name"}),c.jsx("input",{type:"text",value:U,onChange:ie=>I(ie.target.value),placeholder:"Enter region name...",className:"w-full px-3 py-2 rounded border border-gray-600 bg-gray-800 focus:border-purple-500 focus:outline-none",autoFocus:!0,maxLength:50}),!s?.isSuperAdmin&&c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Your submission will be reviewed before approval."})]}),!s?.isSuperAdmin&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["Discord Community ",c.jsx("span",{className:"text-red-400",children:"*"})]}),c.jsxs("select",{className:`w-full px-3 py-2 rounded border bg-gray-800 focus:outline-none ${L?"border-gray-600 focus:border-purple-500":"border-red-500/50"}`,value:L||"",onChange:ie=>z(ie.target.value||null),required:!0,children:[c.jsx("option",{value:"",children:"-- Select Community (Required) --"}),M.map(ie=>c.jsxs("option",{value:ie.tag,children:[ie.name," (",ie.tag,")"]},ie.tag))]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Which Discord community will review this region name?"})]}),s?.isAdmin?c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Submitting As"}),c.jsx("div",{className:"w-full px-3 py-2 rounded border border-gray-600 bg-gray-700 text-gray-300",children:s?.user?.username||"Unknown"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Your logged-in username will be used for tracking"})]}):c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["Your Discord Username ",c.jsx("span",{className:"text-red-400",children:"*"})]}),c.jsx("input",{type:"text",value:O,onChange:ie=>q(ie.target.value),placeholder:"e.g., YourName#1234",className:`w-full px-3 py-2 rounded border bg-gray-800 focus:outline-none ${O.trim()?"border-gray-600 focus:border-purple-500":"border-red-500/50"}`,required:!0}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"So we can contact you if needed"})]})]}),c.jsxs("div",{className:"flex gap-2 pt-2",children:[c.jsx(ft,{type:"submit",className:"flex-1 bg-purple-600 hover:bg-purple-700",disabled:Y||!U.trim(),children:Y?"Submitting...":s?.isSuperAdmin?"Save":"Submit for Approval"}),c.jsx(ft,{type:"button",className:"bg-gray-600 hover:bg-gray-700",onClick:()=>P(!1),disabled:Y,children:"Cancel"})]})]})})]})}function RK({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{fillRule:"evenodd",d:"M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"}))}const DK=E.forwardRef(RK);function kK({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{fillRule:"evenodd",d:"M9 4.5a.75.75 0 0 1 .721.544l.813 2.846a3.75 3.75 0 0 0 2.576 2.576l2.846.813a.75.75 0 0 1 0 1.442l-2.846.813a3.75 3.75 0 0 0-2.576 2.576l-.813 2.846a.75.75 0 0 1-1.442 0l-.813-2.846a3.75 3.75 0 0 0-2.576-2.576l-2.846-.813a.75.75 0 0 1 0-1.442l2.846-.813A3.75 3.75 0 0 0 7.466 7.89l.813-2.846A.75.75 0 0 1 9 4.5ZM18 1.5a.75.75 0 0 1 .728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 0 1 0 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 0 1-1.456 0l-.258-1.036a2.625 2.625 0 0 0-1.91-1.91l-1.036-.258a.75.75 0 0 1 0-1.456l1.036-.258a2.625 2.625 0 0 0 1.91-1.91l.258-1.036A.75.75 0 0 1 18 1.5ZM16.5 15a.75.75 0 0 1 .712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 0 1 0 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 0 1-1.422 0l-.395-1.183a1.5 1.5 0 0 0-.948-.948l-1.183-.395a.75.75 0 0 1 0-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0 1 16.5 15Z",clipRule:"evenodd"}))}const jK=E.forwardRef(kK);function OK({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z",clipRule:"evenodd"}))}const IK=E.forwardRef(OK);function LK({title:t,titleId:e,...n},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?E.createElement("title",{id:e},t):null,E.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const FK=E.forwardRef(LK);function Bj({reality:t,galaxy:e,region:n,discordTag:r="all",globalMode:i=!1,globalModeTitle:a=null}){const[s,o]=E.useState([]),[l,u]=E.useState(!0),[d,f]=E.useState(null),[p,m]=E.useState(1),[y,_]=E.useState({total:0,pages:0}),v=50;E.useEffect(()=>{(i||t&&e&&n)&&w()},[t,e,n,p,r,i]);async function w(){u(!0),f(null);try{const O=new URLSearchParams({page:p.toString(),limit:v.toString(),include_planets:"false"});!i&&n?(O.append("reality",t),O.append("galaxy",e),O.append("region_x",n.region_x.toString()),O.append("region_y",n.region_y.toString()),O.append("region_z",n.region_z.toString())):i&&(t&&O.append("reality",t),e&&O.append("galaxy",e)),r&&r!=="all"&&O.append("discord_tag",r);const q=await qe.get(`/api/systems?${O.toString()}`);o(q.data.systems||[]),_(q.data.pagination||{total:0,pages:0})}catch(O){console.error("Failed to load systems:",O),f("Failed to load system data"),o([])}finally{u(!1)}}const M={Yellow:"text-yellow-400",Red:"text-red-400",Green:"text-green-400",Blue:"text-blue-400",Purple:"text-purple-400"};function C(O){if(!O)return"text-gray-300";switch(O[0]?.toUpperCase()){case"O":case"B":return"text-blue-300";case"F":case"G":return"text-yellow-300";case"K":case"M":return"text-red-400";case"E":return"text-green-400";case"X":case"Y":return"text-purple-400";default:return"text-gray-300"}}const N={Trading:"bg-emerald-600",Mining:"bg-amber-600",Technology:"bg-blue-600",Manufacturing:"bg-orange-600",Scientific:"bg-purple-600","Power Generation":"bg-yellow-600"};function P(O){if(!O)return null;if(O==="personal")return c.jsx("span",{className:"text-xs bg-fuchsia-600 text-white px-1.5 py-0.5 rounded",children:"Personal"});const Y={Haven:"bg-cyan-500 text-white",IEA:"bg-green-500 text-white","B.E.S":"bg-orange-500 text-white",ARCH:"bg-purple-500 text-white",TBH:"bg-yellow-500 text-black",EVRN:"bg-pink-500 text-white"}[O]||"bg-indigo-500 text-white";return c.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${Y}`,children:O})}const R=p>1,k=p<y.pages,U=y.pages||0;function I(){const O=[],q=p;if(U<=7)for(let Y=1;Y<=U;Y++)O.push(Y);else{O.push(1),q>3&&O.push("...");const Y=Math.max(2,q-1),X=Math.min(U-1,q+1);for(let ee=Y;ee<=X;ee++)O.includes(ee)||O.push(ee);q<U-2&&O.push("..."),O.includes(U)||O.push(U)}return O}if(l&&s.length===0)return c.jsx(an,{children:c.jsxs("div",{className:"text-center py-8 text-gray-400",children:[c.jsx(oy,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading systems..."]})});if(d)return c.jsx(an,{children:c.jsxs("div",{className:"text-center py-8",children:[c.jsx("p",{className:"text-red-400 mb-4",children:d}),c.jsx("button",{onClick:w,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-white",children:"Retry"})]})});if(s.length===0)return c.jsx(an,{children:c.jsxs("div",{className:"text-center py-8 text-gray-400",children:[c.jsx(Pw,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"No systems found in this region."})]})});const L=n?.display_name||n?.custom_name||(n?`Region (${n.region_x}, ${n.region_y}, ${n.region_z})`:""),z=i?a||`All ${r} Systems`:`Systems in ${L}`;return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-white",children:z}),c.jsxs("p",{className:"text-sm text-gray-400",children:[y.total," systems total  Page ",p," of ",y.pages||1]})]}),!i&&n&&c.jsxs("a",{href:`/map/region?rx=${n.region_x}&ry=${n.region_y}&rz=${n.region_z}`,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-cyan-600 hover:bg-cyan-500 rounded-lg text-white text-sm font-medium transition-colors flex items-center gap-1.5",title:"View region in 3D map",children:[c.jsx(dp,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden sm:inline",children:"3D Map"})]})]}),U>1&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:()=>m(O=>Math.max(1,O-1)),disabled:!R,className:`p-2 rounded ${R?"bg-gray-700 hover:bg-gray-600":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,children:c.jsx(hz,{className:"w-5 h-5"})}),I().map((O,q)=>O==="..."?c.jsx("span",{className:"px-2 text-gray-500",children:"..."},`ellipsis-${q}`):c.jsx("button",{onClick:()=>m(O),className:`px-3 py-1 rounded text-sm ${p===O?"bg-cyan-600 text-white font-medium":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:O},O)),c.jsx("button",{onClick:()=>m(O=>Math.min(y.pages,O+1)),disabled:!k,className:`p-2 rounded ${k?"bg-gray-700 hover:bg-gray-600":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,children:c.jsx(pP,{className:"w-5 h-5"})})]})]}),l&&c.jsxs("div",{className:"text-center py-2 text-cyan-400 text-sm",children:[c.jsx(oy,{className:"w-4 h-4 animate-spin inline mr-2"}),"Updating..."]}),c.jsx("div",{className:"space-y-2",children:s.map(O=>{const q=M[O.star_type]||"text-gray-400",Y=N[O.economy_type]||"bg-gray-600";return c.jsx(yn,{to:`/systems/${O.id}`,className:"block p-4 bg-gray-800 border border-gray-700 rounded-lg hover:border-cyan-500 hover:bg-gray-750 transition-all group",children:c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{className:"flex items-start gap-3 min-w-0 flex-1",children:[c.jsx("div",{className:"shrink-0 mt-1",children:O.star_type?c.jsx(IK,{className:`w-6 h-6 ${q}`}):c.jsx(Pw,{className:"w-6 h-6 text-gray-500"})}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsx("h3",{className:"font-semibold text-white group-hover:text-cyan-400 transition-colors truncate",children:O.name||"Unnamed System"}),P(O.discord_tag)]}),O.glyph_code&&c.jsx("p",{className:"text-xs font-mono text-gray-500 mt-0.5",children:O.glyph_code}),c.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[O.star_type&&c.jsx("span",{className:`text-xs px-2 py-0.5 rounded bg-gray-700 ${q}`,children:O.star_type}),O.economy_type&&c.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${Y} text-white`,children:O.economy_type}),O.conflict_level&&c.jsxs("span",{className:`text-xs px-2 py-0.5 rounded ${O.conflict_level==="High"?"bg-red-600":O.conflict_level==="Medium"?"bg-yellow-600":"bg-green-600"} text-white`,children:[O.conflict_level," Conflict"]}),O.dominant_lifeform&&c.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-gray-700 text-gray-300",children:O.dominant_lifeform}),O.stellar_classification&&c.jsx("span",{className:`text-xs px-2 py-0.5 rounded bg-gray-700 font-mono ${C(O.stellar_classification)}`,children:O.stellar_classification})]})]})]}),c.jsx("a",{href:`/map/system/${O.id}`,target:"_blank",rel:"noopener noreferrer",onClick:X=>X.stopPropagation(),className:"shrink-0 px-3 py-2 rounded bg-cyan-600 hover:bg-cyan-500 transition-colors text-white text-xs font-medium",title:"View system in 3D",children:"View"})]})},O.id)})}),U>1&&c.jsxs("div",{className:"flex justify-center items-center gap-1 pt-4 flex-wrap",children:[c.jsx("button",{onClick:()=>m(O=>Math.max(1,O-1)),disabled:!R,className:`px-3 py-2 rounded ${R?"bg-gray-700 hover:bg-gray-600":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,children:"Previous"}),I().map((O,q)=>O==="..."?c.jsx("span",{className:"px-2 text-gray-500",children:"..."},`ellipsis-bottom-${q}`):c.jsx("button",{onClick:()=>m(O),className:`px-3 py-2 rounded text-sm ${p===O?"bg-cyan-600 text-white font-medium":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:O},`bottom-${O}`)),c.jsx("button",{onClick:()=>m(O=>Math.min(y.pages,O+1)),disabled:!k,className:`px-3 py-2 rounded ${k?"bg-gray-700 hover:bg-gray-600":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,children:"Next"})]})]})}function UK(t,e){const[n,r]=E.useState(t);return E.useEffect(()=>{const i=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(i)}},[t,e]),n}function BK(t){if(!t)return null;if(t==="personal")return c.jsx("span",{className:"text-xs bg-fuchsia-600 text-white px-1.5 py-0.5 rounded",children:"Personal"});const n={Haven:"bg-cyan-500 text-white",IEA:"bg-green-500 text-white","B.E.S":"bg-orange-500 text-white",ARCH:"bg-purple-500 text-white",TBH:"bg-yellow-500 text-black",EVRN:"bg-pink-500 text-white"}[t]||"bg-indigo-500 text-white";return c.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${n}`,children:t})}function zK(){const t=Es();E.useContext(kr);const[e,n]=YX(),[r,i]=E.useState(e.get("reality")||null),[a,s]=E.useState(e.get("galaxy")||null),[o,l]=E.useState(()=>{const X=e.get("rx"),ee=e.get("ry"),se=e.get("rz");return X&&ee&&se?{region_x:parseInt(X),region_y:parseInt(ee),region_z:parseInt(se),display_name:e.get("rname")||null}:null}),[u,d]=E.useState(""),f=UK(u,300),[p,m]=E.useState([]),[y,_]=E.useState(!1),[v,w]=E.useState([]),[M,C]=E.useState("all"),[N,P]=E.useState(!1),[R,k]=E.useState(!1);E.useEffect(()=>{qe.get("/api/discord_tags").then(X=>{w(X.data.tags||[])}).catch(()=>{})},[]),E.useEffect(()=>{if(!f.trim()){m([]);return}_(!0),qe.get(`/api/systems/search?q=${encodeURIComponent(f)}&limit=20`).then(X=>m(X.data.results||[])).catch(()=>m([])).finally(()=>_(!1))},[f]),E.useEffect(()=>{const X=new URLSearchParams;r&&X.set("reality",r),a&&X.set("galaxy",a),o&&(X.set("rx",o.region_x.toString()),X.set("ry",o.region_y.toString()),X.set("rz",o.region_z.toString()),o.display_name&&X.set("rname",o.display_name)),n(X,{replace:!0})},[r,a,o]);function U(X){i(X),s(null),l(null)}function I(X){s(X),l(null)}function L(X){l(X),P(!1)}function z(){P(!0),l(null)}function O(X){X==="root"?(i(null),s(null),l(null),P(!1)):X==="reality"?(s(null),l(null),P(!1)):X==="galaxy"?(l(null),P(!1)):X==="viewAll"&&P(!1)}const q=E.useMemo(()=>N?"viewAllSystems":o?"systems":a?"regions":r?"galaxies":"realities",[r,a,o,N]),Y=E.useMemo(()=>{const X=[{label:"Systems",level:"root",active:q==="realities"}];if(r&&X.push({label:r,level:"reality",active:q==="galaxies"}),a&&X.push({label:a,level:"galaxy",active:q==="regions"}),N)X.push({label:`All ${M} Systems`,level:"viewAll",active:q==="viewAllSystems"});else if(o){const ee=o.display_name||o.custom_name||`(${o.region_x}, ${o.region_y}, ${o.region_z})`;X.push({label:ee,level:"region",active:q==="systems"})}return X},[r,a,o,q,N,M]);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Il,{className:"flex-1",children:c.jsxs("div",{className:"relative",children:[c.jsx(mz,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),c.jsx("input",{"aria-label":"Search systems",className:"w-full pl-10 pr-3 py-2 rounded bg-gray-800 border border-gray-700 focus:border-cyan-500 focus:outline-none",value:u,onChange:X=>d(X.target.value),placeholder:"Search all systems..."}),y&&c.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-cyan-400 text-sm",children:"..."})]})}),c.jsx("button",{className:`lg:hidden px-3 py-2 rounded border transition-colors flex items-center gap-1.5 ${R||M!=="all"?"bg-cyan-600 border-cyan-500 text-white":"bg-gray-700 border-gray-600 text-gray-300"}`,onClick:()=>k(!R),children:R?c.jsx(vz,{className:"w-5 h-5"}):c.jsx(pz,{className:"w-5 h-5"})}),c.jsxs("div",{className:"hidden lg:flex gap-2",children:[c.jsxs("select",{className:"px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",value:M,onChange:X=>C(X.target.value),children:[c.jsx("option",{value:"all",children:"All Communities"}),c.jsx("option",{value:"untagged",children:"Untagged Only"}),c.jsx("option",{value:"personal",children:"Personal Only"}),v.map(X=>c.jsx("option",{value:X.tag,children:X.name},X.tag))]}),c.jsx(yn,{to:"/wizard",children:c.jsx(ft,{variant:"neutral",children:"New System"})})]})]}),R&&c.jsxs("div",{className:"lg:hidden bg-gray-800/50 rounded-lg p-4 space-y-4 border border-gray-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Community Filter"}),c.jsxs("select",{className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",value:M,onChange:X=>C(X.target.value),children:[c.jsx("option",{value:"all",children:"All Communities"}),c.jsx("option",{value:"untagged",children:"Untagged Only"}),c.jsx("option",{value:"personal",children:"Personal Only"}),v.map(X=>c.jsx("option",{value:X.tag,children:X.name},X.tag))]})]}),c.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-700",children:[c.jsx(ft,{onClick:()=>C("all"),variant:"ghost",className:"flex-1",children:"Clear Filter"}),c.jsx(yn,{to:"/wizard",className:"flex-1",children:c.jsx(ft,{variant:"neutral",className:"w-full",children:"New System"})})]})]}),c.jsx("nav",{className:"flex items-center gap-1 text-sm flex-wrap",children:Y.map((X,ee)=>c.jsxs(Ze.Fragment,{children:[ee>0&&c.jsx(pP,{className:"w-4 h-4 text-gray-500 shrink-0"}),X.active?c.jsxs("span",{className:"px-2 py-1 rounded bg-cyan-600 text-white font-medium",children:[ee===0&&c.jsx(Fj,{className:"w-4 h-4 inline mr-1"}),X.label]}):c.jsxs("button",{onClick:()=>O(X.level),className:"px-2 py-1 rounded hover:bg-gray-700 text-gray-400 hover:text-white transition-colors",children:[ee===0&&c.jsx(Fj,{className:"w-4 h-4 inline mr-1"}),X.label]})]},X.level))})]}),f.trim()&&(p.length>0||y)&&c.jsxs(an,{className:"border-cyan-500/50",children:[c.jsxs("h3",{className:"text-lg font-semibold mb-3 text-cyan-400",children:["Search Results ",p.length>0&&`(${p.length})`]}),y?c.jsx("div",{className:"text-gray-400 py-4 text-center",children:"Searching..."}):c.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:p.map(X=>c.jsxs("div",{className:"p-3 bg-gray-800 rounded hover:bg-gray-700 cursor-pointer flex items-center justify-between transition-colors",onClick:()=>t(`/systems/${encodeURIComponent(X.id)}`),children:[c.jsxs("div",{children:[c.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[X.name,BK(X.discord_tag),X.star_type&&c.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${X.star_type==="Yellow"?"bg-yellow-500 text-black":X.star_type==="Red"?"bg-red-500 text-white":X.star_type==="Blue"?"bg-blue-500 text-white":X.star_type==="Green"?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:X.star_type})]}),c.jsxs("div",{className:"text-sm text-gray-400",children:[X.region_name?c.jsx("span",{className:"text-purple-400",children:X.region_name}):c.jsxs("span",{children:["Region (",X.region_x,", ",X.region_y,", ",X.region_z,")"]}),c.jsxs("span",{className:"ml-2",children:[" ",X.galaxy||"Euclid"]}),c.jsxs("span",{className:"ml-2",children:[" ",X.reality||"Normal"]}),X.glyph_code&&c.jsxs("span",{className:"ml-2 font-mono text-purple-400",children:["(",X.glyph_code,")"]})]})]}),c.jsx(ft,{variant:"ghost",className:"text-sm shrink-0",children:"View "})]},X.id))})]}),c.jsxs("div",{className:"min-h-[400px]",children:[q==="realities"&&c.jsx(NK,{onSelect:U,selectedReality:r}),q==="galaxies"&&c.jsx(AK,{reality:r,onSelect:I,selectedGalaxy:a}),q==="regions"&&c.jsx(PK,{reality:r,galaxy:a,onSelect:L,selectedRegion:o,discordTag:M,onViewAllSystems:z}),q==="systems"&&c.jsx(Bj,{reality:r,galaxy:a,region:o,discordTag:M}),q==="viewAllSystems"&&c.jsx(Bj,{reality:r,galaxy:a,discordTag:M,globalMode:!0,globalModeTitle:`All ${M} Systems in ${a}`})]})]})}const yz=({glyphCode:t,size:e="medium"})=>{const[n,r]=E.useState({}),i={small:"w-5 h-5",medium:"w-7 h-7",large:"w-10 h-10"},a=i[e]||i.medium;E.useEffect(()=>{qe.get("/api/glyph_images").then(l=>{r(l.data)}).catch(l=>{console.error("Failed to load glyph images:",l)})},[]);const s={0:"Sunset",1:"Bird",2:"Face",3:"Diplo",4:"Eclipse",5:"Balloon",6:"Boat",7:"Bug",8:"Dragonfly",9:"Galaxy",A:"Voxel",B:"Fish",C:"Tent",D:"Rocket",E:"Tree",F:"Atlas"};if(!t||t.length!==12)return c.jsx("span",{className:"font-mono text-gray-400",children:t||"No glyph code"});const o=t.toUpperCase().split("");return c.jsx("div",{className:"flex items-center gap-0.5 flex-wrap",children:o.map((l,u)=>c.jsx("div",{className:`${a} flex items-center justify-center bg-gray-800 rounded border border-purple-600/50 overflow-hidden`,title:`${s[l]} (${l})`,children:n[l]?c.jsx("img",{src:`/haven-ui-photos/${n[l]}`,alt:s[l],className:"w-full h-full object-contain p-0.5"}):c.jsx("span",{className:"text-purple-300 font-mono text-xs",children:l})},u))})},_A={Trading:[{id:"teleport_coordinators",name:"Teleport Coordinators",tier:1,description:"High-end navigation devices"},{id:"ion_sphere",name:"Ion Sphere",tier:2,description:"Charged particle container"},{id:"comet_droplets",name:"Comet Droplets",tier:3,description:"Rare cosmic liquid"},{id:"star_silk",name:"Star Silk",tier:4,description:"Luxurious woven fabric"},{id:"decrypted_user_data",name:"Decrypted User Data",tier:5,description:"Encrypted information packages"}],Scientific:[{id:"neural_duct",name:"Neural Duct",tier:1,description:"Bio-electronic conduit"},{id:"organic_piping",name:"Organic Piping",tier:2,description:"Biological tubing system"},{id:"instability_injector",name:"Instability Injector",tier:3,description:"Chaos-inducing device"},{id:"neutron_microscope",name:"Neutron Microscope",tier:4,description:"Subatomic imaging device"},{id:"de_scented_pheromone_bottles",name:"De-Scented Pheromone Bottles",tier:5,description:"Processed biological compounds"}],"Advanced Materials":[{id:"superconducting_fibre",name:"Superconducting Fibre",tier:1,description:"Zero-resistance wire"},{id:"five_dimensional_torus",name:"Five Dimensional Torus",tier:2,description:"Exotic geometric construct"},{id:"optical_solvent",name:"Optical Solvent",tier:3,description:"Light-reactive chemical"},{id:"self_repairing_heridium",name:"Self-Repairing Heridium",tier:4,description:"Regenerating mineral"},{id:"nanotube_crate",name:"Nanotube Crate",tier:5,description:"Carbon nanotube container"}],Mining:[{id:"re_latticed_arc_crystal",name:"Re-Latticed Arc Crystal",tier:1,description:"Restructured crystal"},{id:"polychromatic_zirconium",name:"Polychromatic Zirconium",tier:2,description:"Precious mineral"},{id:"bromide_salt",name:"Bromide Salt",tier:3,description:"Chemical compound"},{id:"unrefined_pyrite_grease",name:"Unrefined Pyrite Grease",tier:4,description:"Industrial lubricant"},{id:"dirt",name:"Dirt",tier:5,description:"Industrial soil compound"}],"Power Generation":[{id:"fusion_core",name:"Fusion Core",tier:1,description:"Compact power cell"},{id:"experimental_power_fluid",name:"Experimental Power Fluid",tier:2,description:"Research energy source"},{id:"ohmic_gel",name:"Ohmic Gel",tier:3,description:"Conductive material"},{id:"industrial_grade_battery",name:"Industrial-Grade Battery",tier:4,description:"Heavy-duty power cell"},{id:"spark_canister",name:"Spark Canister",tier:5,description:"Electrical storage unit"}],Manufacturing:[{id:"high_capacity_vector_compressor",name:"High Capacity Vector Compressor",tier:1,description:"Advanced compression device"},{id:"holographic_crankshaft",name:"Holographic Crankshaft",tier:2,description:"Light-based mechanical part"},{id:"six_pronged_mesh_decoupler",name:"Six-Pronged Mesh Decoupler",tier:3,description:"Circuit separation device"},{id:"non_stick_piston",name:"Non-Stick Piston",tier:4,description:"Friction-free component"},{id:"enormous_metal_cog",name:"Enormous Metal Cog",tier:5,description:"Large mechanical gear"}],Technology:[{id:"quantum_accelerator",name:"Quantum Accelerator",tier:1,description:"High-tech component"},{id:"autonomous_positioning_unit",name:"Autonomous Positioning Unit",tier:2,description:"Navigation component"},{id:"ion_capacitor",name:"Ion Capacitor",tier:3,description:"Energy storage device"},{id:"welding_soap",name:"Welding Soap",tier:4,description:"Metal bonding agent"},{id:"decommissioned_circuit_board",name:"Decommissioned Circuit Board",tier:5,description:"Salvaged electronics"}],"Mass Production":[{id:"high_capacity_vector_compressor",name:"High Capacity Vector Compressor",tier:1,description:"Advanced compression device"},{id:"holographic_crankshaft",name:"Holographic Crankshaft",tier:2,description:"Light-based mechanical part"},{id:"six_pronged_mesh_decoupler",name:"Six-Pronged Mesh Decoupler",tier:3,description:"Circuit separation device"},{id:"non_stick_piston",name:"Non-Stick Piston",tier:4,description:"Friction-free component"},{id:"enormous_metal_cog",name:"Enormous Metal Cog",tier:5,description:"Large mechanical gear"}],Pirate:[{id:"contraband",name:"Contraband",tier:3,description:"Illegal goods"},{id:"stolen_goods",name:"Stolen Goods",tier:4,description:"Pilfered merchandise"},{id:"suspicious_package",name:"Suspicious Package",tier:5,description:"Unknown contents"}],None:[],Abandoned:[]};function zj(t,e){const n=_A[t]||[];switch(e){case"T3":return n;case"T2":return n.filter(r=>r.tier>=3);case"T1":return n.filter(r=>r.tier>=4);case"T4":return _A.Pirate||[];default:return n}}function HK(t){for(const e of Object.values(_A)){const n=e.find(r=>r.id===t);if(n)return n}return null}function VK(t){if(!t)return null;if(t.startsWith("http"))return t;const n=t.replace(/\\/g,"/").split("/"),r=n[n.length-1];return`/haven-ui-photos/${encodeURIComponent(r)}`}function Hj(t){if(!t)return null;try{return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return t}}function WK({system:t,onClose:e}){if(!t)return null;let n=[];if(t.contributors)try{n=typeof t.contributors=="string"?JSON.parse(t.contributors):t.contributors}catch{n=[]}return c.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:e,children:c.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6 border border-gray-700",onClick:r=>r.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-purple-400",children:"System Contributors"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white text-2xl leading-none",children:""})]}),c.jsxs("div",{className:"mb-4 p-3 bg-gray-900 rounded",children:[c.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Original Discoverer"}),c.jsx("div",{className:"text-lg text-yellow-400 font-medium",children:t.discovered_by||"Unknown"}),t.discovered_at&&c.jsx("div",{className:"text-sm text-gray-400 mt-1",children:Hj(t.discovered_at)})]}),t.last_updated_by&&c.jsxs("div",{className:"mb-4 p-3 bg-gray-900 rounded",children:[c.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Last Updated By"}),c.jsx("div",{className:"text-lg text-blue-400 font-medium",children:t.last_updated_by}),t.last_updated_at&&c.jsx("div",{className:"text-sm text-gray-400 mt-1",children:Hj(t.last_updated_at)})]}),n.length>0&&c.jsxs("div",{className:"p-3 bg-gray-900 rounded",children:[c.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:"All Contributors"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((r,i)=>c.jsxs("span",{className:`px-3 py-1 rounded-full text-sm ${i===0?"bg-yellow-600/30 text-yellow-400 border border-yellow-600/50":"bg-gray-700 text-gray-300"}`,children:[r,i===0&&c.jsx("span",{className:"ml-1 text-xs",children:"(OG)"})]},i))})]}),!t.discovered_by&&!t.last_updated_by&&n.length===0&&c.jsx("div",{className:"text-center text-gray-500 py-4",children:"No contributor information available for this system."}),c.jsx("div",{className:"mt-6 text-center",children:c.jsx("button",{onClick:e,className:"px-6 py-2 bg-gray-700 hover:bg-gray-600 rounded text-white transition-colors",children:"Close"})})]})})}function GK(){const{id:t}=fP(),e=Es(),n=E.useContext(kr),[r,i]=E.useState(null),[a,s]=E.useState(!0),[o,l]=E.useState(null),[u,d]=E.useState({}),[f,p]=E.useState(!1);E.useEffect(()=>{m()},[t]);async function m(){try{s(!0);const v=await qe.get(`/api/systems/${encodeURIComponent(t)}`);i(v.data),l(null)}catch(v){l(v.response?.data?.detail||"Failed to load system")}finally{s(!1)}}async function y(){if(confirm(`Are you sure you want to delete the system "${r.name}"?`))try{await qe.delete(`/api/systems/${encodeURIComponent(t)}`),alert("System deleted successfully"),e("/systems")}catch(v){alert(`Failed to delete system: ${v.response?.data?.detail||v.message}`)}}function _(v){d(w=>({...w,[v]:!w[v]}))}return a?c.jsx("div",{className:"p-6",children:c.jsx(an,{children:c.jsx("div",{className:"text-center py-8",children:"Loading system..."})})}):o?c.jsx("div",{className:"p-6",children:c.jsxs(an,{children:[c.jsx("div",{className:"text-center py-8 text-red-500",children:o}),c.jsx("div",{className:"text-center mt-4",children:c.jsx(ft,{onClick:()=>e("/systems"),children:"Back to Systems"})})]})}):r?c.jsxs("div",{className:"p-4 sm:p-6 max-w-6xl mx-auto",children:[c.jsxs(an,{className:"mb-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-3 mb-4",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-2 break-words",children:r.name}),c.jsxs("div",{className:"text-sm text-gray-400",children:[c.jsxs("span",{className:"mr-4",children:["Galaxy: ",r.galaxy||"Euclid"]}),r.region_x!==null&&r.region_x!==void 0&&c.jsxs("span",{className:"mr-4",children:["Region: [",r.region_x,", ",r.region_y,", ",r.region_z,"]"]}),c.jsxs("span",{className:"block sm:inline mt-1 sm:mt-0",children:["ID: ",r.id]})]}),r.glyph_code&&c.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[c.jsx(yz,{glyphCode:r.glyph_code,size:"large"}),c.jsxs("span",{className:"text-purple-400 font-mono text-sm",children:["(",r.glyph_code,")"]})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto flex-shrink-0",children:[c.jsx("a",{href:`/map/system/${r.id}`,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 rounded text-white text-center font-medium transition-colors w-full sm:w-auto",children:"3D Map"}),c.jsx(ft,{className:"bg-blue-600 hover:bg-blue-700 w-full sm:w-auto",onClick:()=>e(`/create?edit=${encodeURIComponent(r.id||r.name)}`),children:"Edit"}),c.jsx(ft,{className:"bg-purple-600 hover:bg-purple-700 w-full sm:w-auto",onClick:()=>p(!0),children:"Contributors"}),n?.isAdmin&&c.jsx(ft,{className:"bg-red-600 hover:bg-red-700 w-full sm:w-auto",onClick:y,children:"Delete"}),c.jsx(ft,{className:"bg-gray-600 hover:bg-gray-700 w-full sm:w-auto",onClick:()=>e("/systems"),children:"Back"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4 p-4 bg-gray-800 rounded",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"X Coordinate"}),c.jsx("div",{className:"text-lg font-mono",children:r.x||"0"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Y Coordinate"}),c.jsx("div",{className:"text-lg font-mono",children:r.y||"0"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Z Coordinate"}),c.jsx("div",{className:"text-lg font-mono",children:r.z||"0"})]})]}),(r.star_type||r.economy_type||r.economy_level||r.conflict_level||r.dominant_lifeform||r.stellar_classification)&&c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-4 mb-4 p-4 bg-gray-800 rounded",children:[r.star_type&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Star Type"}),c.jsx("div",{className:"text-yellow-400",children:r.star_type})]}),r.stellar_classification&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Spectral Class"}),c.jsx("div",{className:`font-mono ${(()=>{switch(r.stellar_classification[0]?.toUpperCase()){case"O":case"B":return"text-blue-300";case"F":case"G":return"text-yellow-300";case"K":case"M":return"text-red-400";case"E":return"text-green-400";case"X":case"Y":return"text-purple-400";default:return"text-gray-300"}})()}`,children:r.stellar_classification})]}),r.economy_type&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Economy"}),c.jsx("div",{className:"text-green-400",children:r.economy_type})]}),r.economy_level&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Wealth"}),c.jsx("div",{className:r.economy_level==="High"?"text-yellow-400":r.economy_level==="Medium"?"text-blue-400":"text-gray-300",children:r.economy_level})]}),r.conflict_level&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Conflict"}),c.jsx("div",{className:r.conflict_level==="High"?"text-red-400":r.conflict_level==="Medium"?"text-orange-400":"text-green-400",children:r.conflict_level})]}),r.dominant_lifeform&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Dominant Lifeform"}),c.jsx("div",{className:r.dominant_lifeform==="Vy'keen"?"text-red-400":r.dominant_lifeform==="Gek"?"text-yellow-400":r.dominant_lifeform==="Korvax"?"text-cyan-400":"text-gray-300",children:r.dominant_lifeform})]})]}),r.description&&c.jsxs("div",{className:"mt-4",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),c.jsx("p",{className:"text-gray-300",children:r.description})]})]}),r.space_station&&c.jsxs(an,{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Space Station"}),c.jsxs("div",{className:"bg-purple-900/30 border border-purple-600 rounded p-4",children:[c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Name"}),c.jsx("div",{className:"font-semibold",children:r.space_station.name})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Race"}),c.jsx("div",{children:r.space_station.race||"Unknown"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Economy"}),c.jsx("div",{children:r.economy_type||"Unknown"})]})]}),r.space_station.trade_goods&&r.space_station.trade_goods.length>0&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Trade Goods Available"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:r.space_station.trade_goods.map(v=>{const w=HK(v);return c.jsx("span",{className:"px-2 py-1 bg-purple-800/50 border border-purple-500 rounded text-sm",title:w?.description||"",children:w?.name||v},v)})})]}),(!r.space_station.trade_goods||r.space_station.trade_goods.length===0)&&c.jsx("div",{className:"text-xs text-gray-500 italic",children:"No trade goods recorded for this station"})]})]}),c.jsxs(an,{children:[c.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Planets (",r.planets?.length||0,")"]}),!r.planets||r.planets.length===0?c.jsx("div",{className:"text-center py-8 text-gray-400",children:"No planets in this system"}):c.jsx("div",{className:"space-y-4",children:r.planets.map((v,w)=>c.jsxs("div",{className:"border border-gray-700 rounded overflow-hidden",children:[c.jsx("div",{className:"bg-gray-800 p-4 cursor-pointer hover:bg-gray-750 transition-colors",onClick:()=>_(w),children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xl font-semibold flex items-center gap-2",children:[v.name,v.is_moon===1&&c.jsx("span",{className:"text-sm text-purple-400",children:"(Moon)"}),v.data_source==="remote"&&c.jsx("span",{className:"text-xs bg-amber-500 text-white px-1.5 py-0.5 rounded",title:"Remote data - visit for full detail (weather, flora, fauna, sentinels)",children:" Remote"})]}),c.jsxs("div",{className:"text-sm text-gray-400 mt-1 flex flex-wrap gap-x-4",children:[v.biome&&c.jsx("span",{className:"text-green-400",children:v.biome}),v.planet_size&&c.jsx("span",{children:v.planet_size}),v.moons&&v.moons.length>0&&c.jsxs("span",{children:[v.moons.length," moon",v.moons.length!==1?"s":""]}),c.jsxs("span",{className:(v.sentinel||v.sentinel_level)==="Aggressive"?"text-red-400":(v.sentinel||v.sentinel_level)==="Low"?"text-green-400":"",children:["Sentinel: ",v.sentinel||v.sentinel_level||"Unknown"]}),v.fauna&&v.fauna!=="N/A"&&v.fauna!=="None"&&c.jsxs("span",{className:v.fauna==="Rich"?"text-yellow-400":"",children:["Fauna: ",v.fauna]}),v.flora&&v.flora!=="N/A"&&v.flora!=="None"&&c.jsxs("span",{className:v.flora==="Rich"?"text-green-400":"",children:["Flora: ",v.flora]})]})]}),c.jsx("div",{className:"flex items-center gap-3",children:c.jsx("div",{className:"text-2xl",children:u[w]?"":"+"})})]})}),u[w]&&c.jsxs("div",{className:"p-4 bg-gray-900/50",children:[c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[v.biome&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Biome"}),c.jsx("div",{className:"text-green-400 font-medium",children:v.biome})]}),v.biome_subtype&&v.biome_subtype!=="None_"&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Biome Subtype"}),c.jsx("div",{children:v.biome_subtype})]}),v.planet_size&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Size"}),c.jsx("div",{children:v.planet_size})]}),v.is_moon===1&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Type"}),c.jsx("div",{className:"text-purple-400",children:"Moon"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Sentinel Level"}),c.jsx("div",{className:(v.sentinel||v.sentinel_level)==="Aggressive"?"text-red-400":(v.sentinel||v.sentinel_level)==="High"?"text-orange-400":(v.sentinel||v.sentinel_level)==="Low"?"text-green-400":"",children:v.sentinel||v.sentinel_level||"Unknown"})]}),v.sentinels_text&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Sentinel Info"}),c.jsx("div",{className:"text-sm",children:v.sentinels_text})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Fauna"}),c.jsxs("div",{className:v.fauna==="Rich"?"text-yellow-400":v.fauna==="Average"?"text-blue-300":"",children:[v.fauna||"N/A",v.fauna_count>0&&` (${v.fauna_count} species)`]})]}),v.fauna_text&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Fauna Info"}),c.jsx("div",{className:"text-sm",children:v.fauna_text})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Flora"}),c.jsxs("div",{className:v.flora==="Rich"?"text-green-400":v.flora==="Average"?"text-blue-300":"",children:[v.flora||"N/A",v.flora_count>0&&` (${v.flora_count} species)`]})]}),v.flora_text&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Flora Info"}),c.jsx("div",{className:"text-sm",children:v.flora_text})]}),v.climate&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Climate"}),c.jsx("div",{children:v.climate})]}),v.weather&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Weather"}),c.jsx("div",{className:"text-blue-300",children:v.weather})]}),v.weather_text&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Weather Info"}),c.jsx("div",{className:"text-sm",children:v.weather_text})]}),v.storm_frequency&&v.storm_frequency!=="Unknown"&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Storm Frequency"}),c.jsx("div",{className:v.storm_frequency==="Always"?"text-red-400":v.storm_frequency==="High"?"text-orange-400":v.storm_frequency==="Low"?"text-yellow-400":"",children:v.storm_frequency})]}),v.weather_intensity&&v.weather_intensity!=="Unknown"&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Weather Intensity"}),c.jsx("div",{className:v.weather_intensity==="Extreme"?"text-red-400":"",children:v.weather_intensity})]}),v.building_density&&v.building_density!=="Unknown"&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Building Density"}),c.jsx("div",{children:v.building_density})]}),v.has_water===1&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Water"}),c.jsx("div",{className:"text-cyan-400",children:"Present"})]})]}),(v.hazard_temperature!==0||v.hazard_radiation!==0||v.hazard_toxicity!==0)&&c.jsxs("div",{className:"mb-4 p-3 bg-red-900/20 border border-red-800/50 rounded",children:[c.jsx("div",{className:"text-xs text-gray-400 mb-2 font-semibold",children:"Environmental Hazards"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[v.hazard_temperature!==0&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Temperature"}),c.jsxs("div",{className:v.hazard_temperature>0?"text-orange-400":"text-cyan-400",children:[v.hazard_temperature>0?"+":"",v.hazard_temperature?.toFixed(1),""]})]}),v.hazard_radiation!==0&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Radiation"}),c.jsxs("div",{className:"text-yellow-400",children:[v.hazard_radiation?.toFixed(1)," rad"]})]}),v.hazard_toxicity!==0&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Toxicity"}),c.jsxs("div",{className:"text-green-500",children:[v.hazard_toxicity?.toFixed(1)," tox"]})]})]})]}),(v.common_resource||v.uncommon_resource||v.rare_resource||v.materials)&&c.jsxs("div",{className:"mb-4 p-3 bg-blue-900/20 border border-blue-800/50 rounded",children:[c.jsx("div",{className:"text-xs text-gray-400 mb-2 font-semibold",children:"Resources"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[v.common_resource&&v.common_resource!=="Unknown"&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Common"}),c.jsx("div",{className:"text-gray-300",children:v.common_resource})]}),v.uncommon_resource&&v.uncommon_resource!=="Unknown"&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Uncommon"}),c.jsx("div",{className:"text-blue-300",children:v.uncommon_resource})]}),v.rare_resource&&v.rare_resource!=="Unknown"&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Rare"}),c.jsx("div",{className:"text-purple-400",children:v.rare_resource})]}),v.materials&&c.jsxs("div",{className:"col-span-2 md:col-span-3",children:[c.jsx("div",{className:"text-xs text-gray-400",children:"All Materials"}),c.jsx("div",{children:v.materials})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-4",children:[v.base_location&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Base Location"}),c.jsx("div",{children:v.base_location})]}),v.description&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Description"}),c.jsx("div",{className:"text-gray-300",children:v.description})]})]}),v.notes&&c.jsxs("div",{className:"mb-4",children:[c.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Notes"}),c.jsx("div",{className:"text-sm text-gray-300",children:v.notes})]}),v.photo&&c.jsxs("div",{className:"mb-4",children:[c.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Photo"}),c.jsx("img",{src:VK(v.photo),alt:v.name,className:"w-full max-w-md rounded border border-gray-700"})]}),v.moons&&v.moons.length>0&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("h4",{className:"font-semibold mb-2 text-cyan-400",children:["Moons (",v.moons.length,")"]}),c.jsx("div",{className:"space-y-2",children:v.moons.map((M,C)=>c.jsxs("div",{className:"bg-gray-800 p-3 rounded border border-cyan-800",children:[c.jsx("div",{className:"font-medium mb-2",children:M.name}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Sentinel"}),c.jsx("div",{children:M.sentinel||"Unknown"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Fauna"}),c.jsx("div",{children:M.fauna||"N/A"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Flora"}),c.jsx("div",{children:M.flora||"N/A"})]}),M.climate&&c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Climate"}),c.jsx("div",{children:M.climate})]}),M.materials&&c.jsxs("div",{className:"col-span-2",children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Materials"}),c.jsx("div",{children:M.materials})]})]}),M.description&&c.jsxs("div",{className:"mt-2",children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Description"}),c.jsx("div",{className:"text-sm text-gray-300",children:M.description})]}),M.notes&&c.jsxs("div",{className:"mt-2",children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Notes"}),c.jsx("div",{className:"text-sm text-gray-300",children:M.notes})]})]},C))})]})]})]},w))})]}),f&&c.jsx(WK,{system:r,onClose:()=>p(!1)})]}):c.jsx("div",{className:"p-6",children:c.jsxs(an,{children:[c.jsx("div",{className:"text-center py-8",children:"System not found"}),c.jsx("div",{className:"text-center mt-4",children:c.jsx(ft,{onClick:()=>e("/systems"),children:"Back to Systems"})})]})})}const $K=["Lush","Toxic","Scorched","Radioactive","Frozen","Barren","Dead","Exotic","Marsh","Volcanic","Waterworld","Gas Giant","Infested","Mega Exotic","Chromatic Red","Chromatic Green","Chromatic Blue"],iM={Lush:"Lush",Paradise:"Lush",Temperate:"Lush",Tropical:"Lush",Verdant:"Lush",Viridescent:"Lush",Humid:"Lush",Overgrown:"Lush",Flourishing:"Lush",Grassy:"Lush",Bountiful:"Lush",Rainy:"Lush",Frozen:"Frozen",Icy:"Frozen",Arctic:"Frozen",Glacial:"Frozen",Icebound:"Frozen",Frostbound:"Frozen",Freezing:"Frozen","Sub-Zero":"Frozen","Sub-zero":"Frozen",Hiemal:"Frozen",Hyperborean:"Frozen",Toxic:"Toxic",Poisonous:"Toxic",Noxious:"Toxic",Corrosive:"Toxic",Acidic:"Toxic",Caustic:"Toxic",Acrid:"Toxic",Blighted:"Toxic",Miasmatic:"Toxic",Rotting:"Toxic",Scorched:"Scorched",Hot:"Scorched",Fiery:"Scorched",Boiling:"Scorched",Torrid:"Scorched",Incandescent:"Scorched",Scalding:"Scorched",Charred:"Scorched",Arid:"Scorched","High Temperature":"Scorched",Radioactive:"Radioactive",Irradiated:"Radioactive",Nuclear:"Radioactive",Isotopic:"Radioactive",Contaminated:"Radioactive","Decaying Nuclear":"Radioactive","Gamma Intensive":"Radioactive","Gamma-Intensive":"Radioactive","High Radio Source":"Radioactive",Supercritical:"Radioactive","High Energy":"Radioactive",Barren:"Barren",Desert:"Barren",Rocky:"Barren",Bleak:"Barren",Parched:"Barren",Dusty:"Barren",Desolate:"Barren","Wind-Swept":"Barren","Wind-swept":"Barren",Abandoned:"Barren",Dead:"Dead",Empty:"Dead",Lifeless:"Dead",Forsaken:"Dead","Life-Incompatible":"Dead","Low Atmosphere":"Dead",Airless:"Dead","Terraforming Catastrophe":"Dead",Marsh:"Marsh",Marshy:"Marsh",Swamp:"Marsh",Boggy:"Marsh",Foggy:"Marsh",Misty:"Marsh",Hazy:"Marsh",Murky:"Marsh",Damp:"Marsh",Quagmire:"Marsh",Reeking:"Marsh",Vapour:"Marsh",Cloudy:"Marsh","Endless Morass":"Marsh",Volcanic:"Volcanic",Lava:"Volcanic",Magma:"Volcanic",Erupting:"Volcanic",Molten:"Volcanic",Ashen:"Volcanic","Ash-shrouded":"Volcanic","Ash-Shrouded":"Volcanic",Tectonic:"Volcanic",Basalt:"Volcanic","Flame-Ruptured":"Volcanic",Unstable:"Volcanic",Violent:"Volcanic","Imminent Core Detonation":"Volcanic","Obsidian Bead":"Volcanic",Exotic:"Exotic",Weird:"Exotic",Fissured:"Exotic","Of Light":"Exotic",Breached:"Exotic",Rattling:"Exotic",Spined:"Exotic",Skeletal:"Exotic",Bubbling:"Exotic",Frothing:"Exotic",Foaming:"Exotic",Contoured:"Exotic",Cabled:"Exotic",Webbed:"Exotic",Mechanical:"Exotic",Metallic:"Exotic",Metallurgic:"Exotic",Hexagonal:"Exotic",Plated:"Exotic",Scaly:"Exotic",Fungal:"Exotic",Sporal:"Exotic",Capped:"Exotic",Finned:"Exotic",Bladed:"Exotic","Shell-Strewn":"Exotic",Ossified:"Exotic",Petrified:"Exotic",Calcified:"Exotic",Columned:"Exotic",Sharded:"Exotic",Pillared:"Exotic",Shattered:"Exotic",Fractured:"Exotic",Fragmented:"Exotic","Planetary Anomaly":"Exotic",Malfunctioning:"Exotic","[REDACTED]":"Exotic",Glassy:"Exotic",Thirsty:"Exotic",Doomed:"Exotic",Erased:"Exotic",Temporary:"Exotic",Corrupted:"Exotic",Crimson:"Chromatic Red","Lost Red":"Chromatic Red","Vermillion Globe":"Chromatic Red",Scarlet:"Chromatic Red",Blood:"Chromatic Red","Wine Dark":"Chromatic Red","Lost Green":"Chromatic Green","Vile Anomaly":"Chromatic Green","Toxic Anomaly":"Chromatic Green","Doomed Jade":"Chromatic Green","Haunted Emeril":"Chromatic Green","Deathly Green Anomaly":"Chromatic Green","Lost Blue":"Chromatic Blue","Harsh Blue Globe":"Chromatic Blue","Frozen Anomaly":"Chromatic Blue",Azure:"Chromatic Blue",Cerulean:"Chromatic Blue",Ultramarine:"Chromatic Blue","Chromatic Fog":"Mega Exotic","Stellar Corruption":"Mega Exotic","Stellar Corruption Detected":"Mega Exotic",Infested:"Infested","The Nest":"Infested","Xeno-Colony":"Infested","Worm-Ridden":"Infested","Worm-ridden":"Infested","Infested Paradise":"Infested","Boiling Doom":"Infested","Fiery Dreadworld":"Infested","Icy Abhorrence":"Infested","Frozen Hell":"Infested","Caustic Nightmare":"Infested","Toxic Horror":"Infested","Radioactive Abomination":"Infested",Mutated:"Infested","Mutating Relic":"Infested",Terrorsphere:"Infested","Infected Dustbowl":"Infested",Tainted:"Infested",Waterworld:"Waterworld",Drowning:"Waterworld",Endless:"Waterworld","Gas Giant":"Gas Giant",Ruined:"Dead","Ruined Dustbowl":"Barren","Bleached Ruin":"Dead","Scorched Relic":"Scorched","Overgrown Relic":"Lush","Abandoned Crucible":"Scorched","Abandoned Paradise":"Lush","Claimed By Decay":"Dead","Lost To Fire":"Scorched"},Vj={Lush:"bg-green-500",Frozen:"bg-cyan-400",Toxic:"bg-lime-500",Scorched:"bg-orange-500",Radioactive:"bg-yellow-400",Barren:"bg-amber-600",Dead:"bg-gray-500",Marsh:"bg-teal-500",Volcanic:"bg-red-600",Exotic:"bg-purple-500","Mega Exotic":"bg-pink-500","Chromatic Red":"bg-red-500","Chromatic Green":"bg-emerald-500","Chromatic Blue":"bg-blue-500",Infested:"bg-rose-700",Waterworld:"bg-sky-500","Gas Giant":"bg-indigo-400",Unknown:"bg-gray-600"};function YK(t){if(!t)return"Unknown";if(iM[t])return iM[t];const e=t.trim();for(const[n,r]of Object.entries(iM))if(n.toLowerCase()===e.toLowerCase())return r;return $K.includes(e)?e:(e.startsWith("Unknown"),"Unknown")}function qK(t){return Vj[t]||Vj.Unknown}function XK(t){const e={};for(const[n,r]of Object.entries(t)){const i=YK(n);e[i]=(e[i]||0)+r}return e}function KK(t,e){const[n,r]=E.useState(t);return E.useEffect(()=>{const i=setTimeout(()=>r(t),e);return()=>clearTimeout(i)},[t,e]),n}function ZK(t){if(!t)return null;if(t.startsWith("http"))return t;const n=t.replace(/\\/g,"/").split("/"),r=n[n.length-1];return`/haven-ui-photos/${encodeURIComponent(r)}`}function QK(t){if(!t)return null;const n={Yellow:"bg-yellow-500 text-black",Red:"bg-red-500 text-white",Green:"bg-green-500 text-white",Blue:"bg-blue-500 text-white",Purple:"bg-purple-500 text-white"}[t]||"bg-gray-500 text-white";return c.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${n}`,children:t})}function JK(t){if(!t)return null;if(t==="personal")return c.jsx("span",{className:"text-xs bg-fuchsia-600 text-white px-1.5 py-0.5 rounded",children:"Personal"});const n={Haven:"bg-cyan-500 text-white",IEA:"bg-green-500 text-white","B.E.S":"bg-orange-500 text-white",ARCH:"bg-purple-500 text-white",TBH:"bg-yellow-500 text-black",EVRN:"bg-pink-500 text-white"}[t]||"bg-indigo-500 text-white";return c.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${n}`,children:t})}function eZ({system:t,isSelected:e,onSelect:n,showCheckbox:r,onClick:i}){const a=ZK(t.photo||t.planets?.[0]?.photo);return c.jsxs("div",{className:`relative rounded-lg border transition-all cursor-pointer hover:shadow-lg ${e?"border-indigo-500 bg-indigo-900/30 ring-2 ring-indigo-400":"border-gray-700 bg-gray-800/50 hover:bg-gray-700/50 hover:border-gray-600"}`,onClick:i,children:[r&&c.jsx("div",{className:"absolute top-2 left-2 z-10",onClick:s=>s.stopPropagation(),children:c.jsx("input",{type:"checkbox",checked:e,onChange:n,className:"w-5 h-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),c.jsx("div",{className:"h-32 bg-gray-900 rounded-t-lg overflow-hidden",children:a?c.jsx("img",{src:a,alt:t.name,className:"w-full h-full object-cover",loading:"lazy"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600",children:c.jsx(dp,{className:"w-12 h-12"})})}),c.jsxs("div",{className:"p-3",children:[c.jsx("h3",{className:"font-semibold text-lg truncate mb-2",title:t.name,children:t.name}),c.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[QK(t.star_type),c.jsx("span",{className:"text-xs bg-blue-600/50 text-blue-200 px-1.5 py-0.5 rounded",children:t.galaxy||"Euclid"}),JK(t.discord_tag)]}),c.jsxs("div",{className:"text-sm text-gray-400 flex items-center gap-3",children:[c.jsxs("span",{children:[t.planets?.length||t.planet_count||0," planets"]}),t.glyph_code&&c.jsxs("span",{className:"font-mono text-purple-400 text-xs truncate",title:t.glyph_code,children:[t.glyph_code.substring(0,8),"..."]})]})]})]})}function tZ(){const{rx:t,ry:e,rz:n}=fP(),r=Es(),i=E.useContext(kr),[a,s]=E.useState(null),[o,l]=E.useState([]),[u,d]=E.useState(!0),[f,p]=E.useState(null),[m,y]=E.useState(1),[_,v]=E.useState(0),w=100,[M,C]=E.useState([]),[N,P]=E.useState(""),R=KK(N,300),[k,U]=E.useState("all"),[I,L]=E.useState("all"),[z,O]=E.useState("all"),[q,Y]=E.useState("name"),[X,ee]=E.useState("asc"),[se,W]=E.useState(!1),[$,G]=E.useState(!1),[j,B]=E.useState(new Set),[ae,re]=E.useState(!1),[de,ce]=E.useState(!1),[ie,le]=E.useState(""),[fe,Ne]=E.useState(null),[Se,Z]=E.useState(""),[xe,oe]=E.useState(!1);E.useEffect(()=>{y(1),tt()},[t,e,n]),E.useEffect(()=>{ke()},[t,e,n,m]),E.useEffect(()=>{qe.get("/api/discord_tags").then(be=>{C(be.data.tags||[])}).catch(()=>{})},[]);async function tt(){d(!0),p(null);try{const be=await qe.get(`/api/regions/${t}/${e}/${n}`);s(be.data)}catch(be){p(be.response?.data?.detail||"Failed to load region data")}finally{d(!1)}}async function ke(){try{const be=await qe.get(`/api/regions/${t}/${e}/${n}/systems?include_planets=true&limit=${w}&page=${m}`);l(be.data.systems||[]),v(be.data.total||0)}catch(be){console.error("Failed to load systems:",be),l([]),v(0)}}async function st(){await Promise.all([tt(),ke()])}const Ce=E.useMemo(()=>{let be=0,Je=0,Qe=0;const Oe=new Set,pe={},je={},ut={};o.forEach(Be=>{Oe.add(Be.galaxy||"Euclid");const Pe=Be.star_type||"Unknown";ut[Pe]=(ut[Pe]||0)+1;const Ke=Be.economy_type||"Unknown";je[Ke]=(je[Ke]||0)+1,Qe+=Be.discoveries?.length||0;const te=Be.planets||[];be+=te.length,te.forEach(Le=>{Je+=Le.moons?.length||0;const dt=Le.biome||"Unknown";pe[dt]=(pe[dt]||0)+1})});const ge=XK(pe);return{systemCount:o.length,planetCount:be,moonCount:Je,discoveryCount:Qe,galaxies:Array.from(Oe),biomeDistribution:ge,rawBiomeDistribution:pe,economyDistribution:je,starTypeDistribution:ut}},[o]),ct=E.useMemo(()=>{const be=new Set,Je=new Set;return o.forEach(Qe=>{Qe.galaxy&&be.add(Qe.galaxy),Qe.star_type&&Je.add(Qe.star_type)}),{galaxies:Array.from(be).sort(),starTypes:Array.from(Je).sort()}},[o]),$e=E.useMemo(()=>{let be=0;return k!=="all"&&be++,I!=="all"&&be++,z!=="all"&&be++,be},[k,I,z]),J=Math.ceil(_/w),Q=_===0?0:(m-1)*w+1,ye=Math.min(m*w,_),we=E.useMemo(()=>{let be=[...o];if(R.trim()){const Je=R.toLowerCase();be=be.filter(Qe=>Qe.name?.toLowerCase().includes(Je)||Qe.glyph_code?.toLowerCase().includes(Je)||Qe.description?.toLowerCase().includes(Je))}return k!=="all"&&(be=be.filter(Je=>Je.galaxy===k)),I!=="all"&&(be=be.filter(Je=>Je.star_type===I)),z!=="all"&&(z==="untagged"?be=be.filter(Je=>!Je.discord_tag):be=be.filter(Je=>Je.discord_tag===z)),be.sort((Je,Qe)=>{let Oe=0;switch(q){case"name":Oe=(Je.name||"").localeCompare(Qe.name||"");break;case"date":Oe=new Date(Je.created_at||0)-new Date(Qe.created_at||0);break;case"planets":Oe=(Je.planets?.length||0)-(Qe.planets?.length||0);break;default:Oe=0}return X==="asc"?Oe:-Oe}),be},[o,R,k,I,z,q,X]);function De(be){B(Je=>{const Qe=new Set(Je);return Qe.has(be)?Qe.delete(be):Qe.add(be),Qe})}function Ue(){B(new Set(we.map(be=>be.id)))}function it(){B(new Set)}function nt(){G(!1),B(new Set)}async function ot(be){if(be.preventDefault(),!ie.trim())return;const Je=i?.isAdmin&&!i?.isSuperAdmin,Qe=Je?i?.user?.username:Se.trim();if(!i?.isSuperAdmin){if(!fe){alert("Please select a Discord Community");return}if(!Je&&!Se.trim()){alert("Please enter your Discord Username");return}}oe(!0);try{i?.isSuperAdmin?await qe.put(`/api/regions/${t}/${e}/${n}`,{custom_name:ie.trim()}):await qe.post(`/api/regions/${t}/${e}/${n}/submit`,{proposed_name:ie.trim(),discord_tag:fe,personal_discord_username:Qe}),ce(!1),le(""),Ne(null),Z(""),st(),alert(i?.isSuperAdmin?"Region name updated!":"Name submitted for approval!")}catch(Oe){alert("Failed: "+(Oe.response?.data?.detail||Oe.message))}finally{oe(!1)}}function xt({title:be,data:Je,colorFn:Qe}){const Oe=Object.entries(Je).sort((je,ut)=>ut[1]-je[1]),pe=Oe.reduce((je,[,ut])=>je+ut,0);return pe===0?null:c.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[c.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-300",children:be}),c.jsxs("div",{className:"space-y-1",children:[Oe.slice(0,5).map(([je,ut])=>c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex justify-between text-xs mb-0.5",children:[c.jsx("span",{className:"text-gray-400",children:je}),c.jsx("span",{className:"text-gray-500",children:ut})]}),c.jsx("div",{className:"h-1.5 bg-gray-700 rounded-full overflow-hidden",children:c.jsx("div",{className:`h-full rounded-full ${Qe?Qe(je):"bg-cyan-500"}`,style:{width:`${ut/pe*100}%`}})})]})},je)),Oe.length>5&&c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["+",Oe.length-5," more"]})]})]})}function rt({data:be}){const Je=Object.entries(be).sort((Oe,pe)=>pe[1]-Oe[1]),Qe=Je.reduce((Oe,[,pe])=>Oe+pe,0);return Qe===0?null:c.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[c.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-300",children:"Biomes"}),c.jsx("div",{className:"max-h-64 overflow-y-auto pr-1 space-y-1 scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800",children:Je.map(([Oe,pe])=>c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex justify-between text-xs mb-0.5",children:[c.jsx("span",{className:"text-gray-400",children:Oe}),c.jsx("span",{className:"text-gray-500",children:pe})]}),c.jsx("div",{className:"h-1.5 bg-gray-700 rounded-full overflow-hidden",children:c.jsx("div",{className:`h-full rounded-full ${qK(Oe)}`,style:{width:`${pe/Qe*100}%`}})})]})},Oe))}),c.jsxs("div",{className:"text-xs text-gray-500 mt-2 pt-2 border-t border-gray-700",children:[Je.length," biome categories | ",Qe," total planets"]})]})}return u?c.jsx("div",{className:"p-6",children:c.jsx(an,{children:c.jsx("div",{className:"text-center py-8",children:"Loading region..."})})}):f?c.jsx("div",{className:"p-6",children:c.jsxs(an,{children:[c.jsx("div",{className:"text-center py-8 text-red-500",children:f}),c.jsx("div",{className:"text-center mt-4",children:c.jsx(ft,{onClick:()=>r("/systems"),children:"Back to Systems"})})]})}):(a?.custom_name||`${t}${e}${n}`,c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsx(an,{className:"mb-4",children:c.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-1",children:a?.custom_name?c.jsx("span",{className:"text-purple-400",children:a.custom_name}):c.jsxs("span",{className:"text-gray-300",children:["Region (",t,", ",e,", ",n,")"]})}),c.jsxs("div",{className:"text-sm text-gray-400",children:["Coordinates: [",t,", ",e,", ",n,"]",a?.pending_name&&c.jsxs("span",{className:"ml-3 text-yellow-400",children:['Pending name: "',a.pending_name.proposed_name,'"']})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("a",{href:`/map/region?rx=${t}&ry=${e}&rz=${n}`,target:"_blank",rel:"noopener noreferrer",children:c.jsxs(ft,{className:"bg-cyan-600 hover:bg-cyan-700",children:[c.jsx(dp,{className:"w-4 h-4 mr-1 inline"}),"3D Map"]})}),c.jsxs(ft,{className:"bg-purple-600 hover:bg-purple-700",onClick:()=>{le(a?.custom_name||""),ce(!0)},children:[c.jsx(gz,{className:"w-4 h-4 mr-1 inline"}),a?.custom_name?"Edit Name":"Set Name"]}),c.jsx(ft,{className:"bg-gray-600 hover:bg-gray-700",onClick:()=>r("/systems"),children:"Back"})]})]})}),c.jsxs(an,{className:"mb-4",children:[c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4",children:[c.jsxs("div",{className:"text-center p-3 bg-gray-800 rounded",children:[c.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:_}),c.jsx("div",{className:"text-xs text-gray-400",children:"Systems"})]}),c.jsxs("div",{className:"text-center p-3 bg-gray-800 rounded",children:[c.jsx("div",{className:"text-2xl font-bold text-green-400",children:Ce.planetCount}),c.jsx("div",{className:"text-xs text-gray-400",children:"Planets"})]}),c.jsxs("div",{className:"text-center p-3 bg-gray-800 rounded",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-400",children:Ce.moonCount}),c.jsx("div",{className:"text-xs text-gray-400",children:"Moons"})]}),c.jsxs("div",{className:"text-center p-3 bg-gray-800 rounded",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:Ce.discoveryCount}),c.jsx("div",{className:"text-xs text-gray-400",children:"Discoveries"})]}),c.jsxs("div",{className:"text-center p-3 bg-gray-800 rounded",children:[c.jsx("div",{className:"text-lg font-bold text-blue-400",children:Ce.galaxies.join(", ")}),c.jsx("div",{className:"text-xs text-gray-400",children:"Galaxies"})]})]}),c.jsx("button",{className:"w-full mt-3 py-2 text-sm text-gray-400 hover:text-white flex items-center justify-center gap-1",onClick:()=>re(!ae),children:ae?c.jsxs(c.Fragment,{children:["Hide Breakdown ",c.jsx(sK,{className:"w-4 h-4"})]}):c.jsxs(c.Fragment,{children:["Show Breakdown ",c.jsx(nK,{className:"w-4 h-4"})]})}),ae&&c.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx(rt,{data:Ce.biomeDistribution}),c.jsx(xt,{title:"Star Types",data:Ce.starTypeDistribution,colorFn:be=>({Yellow:"bg-yellow-500",Red:"bg-red-500",Green:"bg-green-500",Blue:"bg-blue-500",Purple:"bg-purple-500"})[be]||"bg-gray-500"}),c.jsx(xt,{title:"Economy Types",data:Ce.economyDistribution,colorFn:()=>"bg-emerald-500"})]})]}),c.jsxs(an,{className:"mb-4",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("div",{className:"flex-1",children:c.jsx("input",{type:"text",placeholder:"Search systems...",value:N,onChange:be=>P(be.target.value),className:"w-full px-3 py-2 rounded bg-gray-800 border border-gray-700 focus:border-cyan-500 focus:outline-none"})}),c.jsxs("button",{className:`lg:hidden px-3 py-2 rounded border transition-colors flex items-center gap-1.5 ${se||$e>0?"bg-cyan-600 border-cyan-500 text-white":"bg-gray-700 border-gray-600 text-gray-300"}`,onClick:()=>W(!se),children:[se?c.jsx(vz,{className:"w-5 h-5"}):c.jsx(pz,{className:"w-5 h-5"}),$e>0&&!se&&c.jsx("span",{className:"bg-white text-cyan-600 text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:$e})]}),c.jsxs("div",{className:"hidden lg:flex flex-wrap gap-2",children:[c.jsxs("select",{value:k,onChange:be=>U(be.target.value),className:"px-3 py-2 rounded bg-gray-800 border border-gray-700 text-sm",children:[c.jsx("option",{value:"all",children:"All Galaxies"}),ct.galaxies.map(be=>c.jsx("option",{value:be,children:be},be))]}),c.jsxs("select",{value:I,onChange:be=>L(be.target.value),className:"px-3 py-2 rounded bg-gray-800 border border-gray-700 text-sm",children:[c.jsx("option",{value:"all",children:"All Stars"}),ct.starTypes.map(be=>c.jsx("option",{value:be,children:be},be))]}),c.jsxs("select",{value:z,onChange:be=>O(be.target.value),className:"px-3 py-2 rounded bg-gray-800 border border-gray-700 text-sm",children:[c.jsx("option",{value:"all",children:"All Tags"}),c.jsx("option",{value:"untagged",children:"Untagged"}),M.map(be=>c.jsx("option",{value:be.tag,children:be.name},be.tag))]}),c.jsxs("select",{value:`${q}-${X}`,onChange:be=>{const[Je,Qe]=be.target.value.split("-");Y(Je),ee(Qe)},className:"px-3 py-2 rounded bg-gray-800 border border-gray-700 text-sm",children:[c.jsx("option",{value:"name-asc",children:"Name A-Z"}),c.jsx("option",{value:"name-desc",children:"Name Z-A"}),c.jsx("option",{value:"date-desc",children:"Newest First"}),c.jsx("option",{value:"date-asc",children:"Oldest First"}),c.jsx("option",{value:"planets-desc",children:"Most Planets"}),c.jsx("option",{value:"planets-asc",children:"Fewest Planets"})]})]})]}),se&&c.jsxs("div",{className:"lg:hidden bg-gray-800/50 rounded-lg p-4 space-y-4 border border-gray-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Sort By"}),c.jsxs("select",{value:`${q}-${X}`,onChange:be=>{const[Je,Qe]=be.target.value.split("-");Y(Je),ee(Qe)},className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-sm",children:[c.jsx("option",{value:"name-asc",children:"Name A-Z"}),c.jsx("option",{value:"name-desc",children:"Name Z-A"}),c.jsx("option",{value:"date-desc",children:"Newest First"}),c.jsx("option",{value:"date-asc",children:"Oldest First"}),c.jsx("option",{value:"planets-desc",children:"Most Planets"}),c.jsx("option",{value:"planets-asc",children:"Fewest Planets"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Galaxy"}),c.jsxs("select",{value:k,onChange:be=>U(be.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-sm",children:[c.jsx("option",{value:"all",children:"All Galaxies"}),ct.galaxies.map(be=>c.jsx("option",{value:be,children:be},be))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Star Type"}),c.jsxs("select",{value:I,onChange:be=>L(be.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-sm",children:[c.jsx("option",{value:"all",children:"All Stars"}),ct.starTypes.map(be=>c.jsx("option",{value:be,children:be},be))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Community Tag"}),c.jsxs("select",{value:z,onChange:be=>O(be.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-sm",children:[c.jsx("option",{value:"all",children:"All Tags"}),c.jsx("option",{value:"untagged",children:"Untagged"}),M.map(be=>c.jsx("option",{value:be.tag,children:be.name},be.tag))]})]}),$e>0&&c.jsx("button",{onClick:()=>{U("all"),L("all"),O("all")},className:"w-full py-2 text-sm text-cyan-400 hover:text-cyan-300 border border-gray-600 rounded",children:"Clear All Filters"})]})]}),i?.isAdmin&&c.jsxs("div",{className:"mt-3 flex items-center justify-between border-t border-gray-700 pt-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(ft,{className:$?"bg-amber-600 hover:bg-amber-700":"bg-indigo-600 hover:bg-indigo-700",onClick:()=>$?nt():G(!0),children:$?"Exit Bulk Mode":"Bulk Mode"}),$&&c.jsxs(c.Fragment,{children:[c.jsxs("span",{className:"text-sm text-gray-400",children:[j.size," selected"]}),c.jsx("button",{onClick:Ue,className:"text-sm text-indigo-400 hover:text-indigo-300 underline",children:"Select All"}),j.size>0&&c.jsx("button",{onClick:it,className:"text-sm text-gray-400 hover:text-white underline",children:"Clear"})]})]}),$&&j.size>0&&c.jsx("div",{className:"flex gap-2",children:c.jsxs(ft,{className:"bg-red-600 hover:bg-red-700 text-sm",children:["Delete (",j.size,")"]})})]})]}),c.jsxs("div",{className:"mb-3 text-sm text-gray-400 flex flex-wrap items-center justify-between gap-2",children:[c.jsxs("span",{children:["Showing ",Q,"-",ye," of ",_," systems",R&&` (${we.length} matching "${R}")`]}),J>1&&c.jsxs("span",{className:"text-cyan-400",children:["Page ",m," of ",J]})]}),we.length===0?c.jsx(an,{children:c.jsx("div",{className:"text-center py-8 text-gray-400",children:_===0?"No systems in this region":"No systems match your filters"})}):c.jsx("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5",children:we.map(be=>c.jsx(eZ,{system:be,isSelected:j.has(be.id),onSelect:()=>De(be.id),showCheckbox:$,onClick:()=>{$||r(`/systems/${encodeURIComponent(be.id)}`)}},be.id))}),J>1&&c.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-center gap-2",children:[c.jsx(ft,{variant:"ghost",className:"px-3 py-2",onClick:()=>y(1),disabled:m===1,children:" First"}),c.jsx(ft,{variant:"ghost",className:"px-3 py-2",onClick:()=>y(be=>Math.max(1,be-1)),disabled:m===1,children:" Prev"}),c.jsx("div",{className:"flex items-center gap-1",children:(()=>{const be=[];let Qe=Math.max(1,m-Math.floor(2.5)),Oe=Math.min(J,Qe+5-1);Oe-Qe+1<5&&(Qe=Math.max(1,Oe-5+1)),Qe>1&&be.push(c.jsx("span",{className:"px-2 text-gray-500",children:"..."},"start-ellipsis"));for(let pe=Qe;pe<=Oe;pe++)be.push(c.jsx("button",{onClick:()=>y(pe),className:`px-3 py-1 rounded transition-colors ${pe===m?"bg-cyan-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:pe},pe));return Oe<J&&be.push(c.jsx("span",{className:"px-2 text-gray-500",children:"..."},"end-ellipsis")),be})()}),c.jsx(ft,{variant:"ghost",className:"px-3 py-2",onClick:()=>y(be=>Math.min(J,be+1)),disabled:m===J,children:"Next "}),c.jsx(ft,{variant:"ghost",className:"px-3 py-2",onClick:()=>y(J),disabled:m===J,children:"Last "})]}),de&&c.jsx(Tr,{title:a?.custom_name?"Edit Region Name":"Set Region Name",onClose:()=>ce(!1),children:c.jsxs("form",{onSubmit:ot,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Region Name"}),c.jsx("input",{type:"text",value:ie,onChange:be=>le(be.target.value),placeholder:"Enter region name...",className:"w-full px-3 py-2 rounded border border-gray-600 bg-gray-800 focus:border-purple-500 focus:outline-none",autoFocus:!0}),!i?.isSuperAdmin&&c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Your submission will be reviewed before approval."})]}),!i?.isSuperAdmin&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["Discord Community ",c.jsx("span",{className:"text-red-400",children:"*"})]}),c.jsxs("select",{className:`w-full px-3 py-2 rounded border bg-gray-800 focus:outline-none ${fe?"border-gray-600 focus:border-purple-500":"border-red-500"}`,value:fe||"",onChange:be=>Ne(be.target.value||null),required:!0,children:[c.jsx("option",{value:"",children:"-- Select Community (Required) --"}),M.map(be=>c.jsxs("option",{value:be.tag,children:[be.name," (",be.tag,")"]},be.tag))]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Which Discord community will review this region name?"})]}),i?.isAdmin?c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Submitting As"}),c.jsx("div",{className:"w-full px-3 py-2 rounded border border-gray-600 bg-gray-700 text-gray-300",children:i?.user?.username||"Unknown"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Your logged-in username will be used for tracking"})]}):c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["Your Discord Username ",c.jsx("span",{className:"text-red-400",children:"*"})]}),c.jsx("input",{type:"text",value:Se,onChange:be=>Z(be.target.value),placeholder:"e.g., YourName#1234",className:`w-full px-3 py-2 rounded border bg-gray-800 focus:outline-none ${Se.trim()?"border-gray-600 focus:border-purple-500":"border-red-500"}`,required:!0}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"So we can contact you if needed"})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ft,{type:"submit",className:"bg-purple-600 hover:bg-purple-700",disabled:xe||!ie.trim(),children:xe?"Submitting...":i?.isSuperAdmin?"Save":"Submit for Approval"}),c.jsx(ft,{type:"button",className:"bg-gray-600 hover:bg-gray-700",onClick:()=>ce(!1),disabled:xe,children:"Cancel"})]})]})})]}))}async function nZ(){const t=await fetch("/api/admin/status",{method:"GET",credentials:"same-origin"});if(!t.ok)throw new Error(await t.text());return await t.json()}async function xz(t){const e=new FormData;e.append("file",t);const n=await fetch("/api/photos",{method:"POST",credentials:"same-origin",body:e});if(!n.ok)throw new Error(await n.text());return await n.json()}function fp(t){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fp(t)}function rZ(t,e){if(fp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(fp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bz(t){var e=rZ(t,"string");return fp(e)=="symbol"?e:e+""}function O0(t,e,n){return(e=bz(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wj(Object(n),!0).forEach(function(r){O0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iZ(t){if(Array.isArray(t))return t}function aZ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function wA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function _z(t,e){if(t){if(typeof t=="string")return wA(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wA(t,e):void 0}}function sZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yu(t,e){return iZ(t)||aZ(t,e)||_z(t,e)||sZ()}function oZ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function fd(t,e){if(t==null)return{};var n,r,i=oZ(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var lZ=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function cZ(t){var e=t.defaultInputValue,n=e===void 0?"":e,r=t.defaultMenuIsOpen,i=r===void 0?!1:r,a=t.defaultValue,s=a===void 0?null:a,o=t.inputValue,l=t.menuIsOpen,u=t.onChange,d=t.onInputChange,f=t.onMenuClose,p=t.onMenuOpen,m=t.value,y=fd(t,lZ),_=E.useState(o!==void 0?o:n),v=Yu(_,2),w=v[0],M=v[1],C=E.useState(l!==void 0?l:i),N=Yu(C,2),P=N[0],R=N[1],k=E.useState(m!==void 0?m:s),U=Yu(k,2),I=U[0],L=U[1],z=E.useCallback(function(W,$){typeof u=="function"&&u(W,$),L(W)},[u]),O=E.useCallback(function(W,$){var G;typeof d=="function"&&(G=d(W,$)),M(G!==void 0?G:W)},[d]),q=E.useCallback(function(){typeof p=="function"&&p(),R(!0)},[p]),Y=E.useCallback(function(){typeof f=="function"&&f(),R(!1)},[f]),X=o!==void 0?o:w,ee=l!==void 0?l:P,se=m!==void 0?m:I;return tn(tn({},y),{},{inputValue:X,menuIsOpen:ee,onChange:z,onInputChange:O,onMenuClose:Y,onMenuOpen:q,value:se})}function Kt(){return Kt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kt.apply(null,arguments)}function uZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bz(r.key),r)}}function dZ(t,e,n){return e&&Gj(t.prototype,e),n&&Gj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function SA(t,e){return SA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},SA(t,e)}function fZ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SA(t,e)}function Rw(t){return Rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rw(t)}function wz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wz=function(){return!!t})()}function hZ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pZ(t,e){if(e&&(fp(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hZ(t)}function mZ(t){var e=wz();return function(){var n,r=Rw(t);if(e){var i=Rw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pZ(this,n)}}function gZ(t){if(Array.isArray(t))return wA(t)}function vZ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mP(t){return gZ(t)||vZ(t)||_z(t)||yZ()}function xZ(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function bZ(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var _Z=(function(){function t(n){var r=this;this._insertTag=function(i){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,a),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(bZ(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var a=xZ(i);try{a.insertRule(r,a.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t})(),$a="-ms-",Dw="-moz-",Vn="-webkit-",Sz="comm",gP="rule",vP="decl",wZ="@import",Ez="@keyframes",SZ="@layer",EZ=Math.abs,OS=String.fromCharCode,MZ=Object.assign;function CZ(t,e){return Aa(t,0)^45?(((e<<2^Aa(t,0))<<2^Aa(t,1))<<2^Aa(t,2))<<2^Aa(t,3):0}function Mz(t){return t.trim()}function NZ(t,e){return(t=e.exec(t))?t[0]:t}function Wn(t,e,n){return t.replace(e,n)}function EA(t,e){return t.indexOf(e)}function Aa(t,e){return t.charCodeAt(e)|0}function ly(t,e,n){return t.slice(e,n)}function Cc(t){return t.length}function yP(t){return t.length}function Tb(t,e){return e.push(t),t}function AZ(t,e){return t.map(e).join("")}var IS=1,Eg=1,Cz=0,Js=0,Ri=0,Xg="";function LS(t,e,n,r,i,a,s){return{value:t,root:e,parent:n,type:r,props:i,children:a,line:IS,column:Eg,length:s,return:""}}function a0(t,e){return MZ(LS("",null,null,"",null,null,0),t,{length:-t.length},e)}function TZ(){return Ri}function PZ(){return Ri=Js>0?Aa(Xg,--Js):0,Eg--,Ri===10&&(Eg=1,IS--),Ri}function Mo(){return Ri=Js<Cz?Aa(Xg,Js++):0,Eg++,Ri===10&&(Eg=1,IS++),Ri}function Lc(){return Aa(Xg,Js)}function lw(){return Js}function Zy(t,e){return ly(Xg,t,e)}function cy(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Nz(t){return IS=Eg=1,Cz=Cc(Xg=t),Js=0,[]}function Az(t){return Xg="",t}function cw(t){return Mz(Zy(Js-1,MA(t===91?t+2:t===40?t+1:t)))}function RZ(t){for(;(Ri=Lc())&&Ri<33;)Mo();return cy(t)>2||cy(Ri)>3?"":" "}function DZ(t,e){for(;--e&&Mo()&&!(Ri<48||Ri>102||Ri>57&&Ri<65||Ri>70&&Ri<97););return Zy(t,lw()+(e<6&&Lc()==32&&Mo()==32))}function MA(t){for(;Mo();)switch(Ri){case t:return Js;case 34:case 39:t!==34&&t!==39&&MA(Ri);break;case 40:t===41&&MA(t);break;case 92:Mo();break}return Js}function kZ(t,e){for(;Mo()&&t+Ri!==57;)if(t+Ri===84&&Lc()===47)break;return"/*"+Zy(e,Js-1)+"*"+OS(t===47?t:Mo())}function jZ(t){for(;!cy(Lc());)Mo();return Zy(t,Js)}function OZ(t){return Az(uw("",null,null,null,[""],t=Nz(t),0,[0],t))}function uw(t,e,n,r,i,a,s,o,l){for(var u=0,d=0,f=s,p=0,m=0,y=0,_=1,v=1,w=1,M=0,C="",N=i,P=a,R=r,k=C;v;)switch(y=M,M=Mo()){case 40:if(y!=108&&Aa(k,f-1)==58){EA(k+=Wn(cw(M),"&","&\f"),"&\f")!=-1&&(w=-1);break}case 34:case 39:case 91:k+=cw(M);break;case 9:case 10:case 13:case 32:k+=RZ(y);break;case 92:k+=DZ(lw()-1,7);continue;case 47:switch(Lc()){case 42:case 47:Tb(IZ(kZ(Mo(),lw()),e,n),l);break;default:k+="/"}break;case 123*_:o[u++]=Cc(k)*w;case 125*_:case 59:case 0:switch(M){case 0:case 125:v=0;case 59+d:w==-1&&(k=Wn(k,/\f/g,"")),m>0&&Cc(k)-f&&Tb(m>32?Yj(k+";",r,n,f-1):Yj(Wn(k," ","")+";",r,n,f-2),l);break;case 59:k+=";";default:if(Tb(R=$j(k,e,n,u,d,i,o,C,N=[],P=[],f),a),M===123)if(d===0)uw(k,e,R,R,N,a,f,o,P);else switch(p===99&&Aa(k,3)===110?100:p){case 100:case 108:case 109:case 115:uw(t,R,R,r&&Tb($j(t,R,R,0,0,i,o,C,i,N=[],f),P),i,P,f,o,r?N:P);break;default:uw(k,R,R,R,[""],P,0,o,P)}}u=d=m=0,_=w=1,C=k="",f=s;break;case 58:f=1+Cc(k),m=y;default:if(_<1){if(M==123)--_;else if(M==125&&_++==0&&PZ()==125)continue}switch(k+=OS(M),M*_){case 38:w=d>0?1:(k+="\f",-1);break;case 44:o[u++]=(Cc(k)-1)*w,w=1;break;case 64:Lc()===45&&(k+=cw(Mo())),p=Lc(),d=f=Cc(C=k+=jZ(lw())),M++;break;case 45:y===45&&Cc(k)==2&&(_=0)}}return a}function $j(t,e,n,r,i,a,s,o,l,u,d){for(var f=i-1,p=i===0?a:[""],m=yP(p),y=0,_=0,v=0;y<r;++y)for(var w=0,M=ly(t,f+1,f=EZ(_=s[y])),C=t;w<m;++w)(C=Mz(_>0?p[w]+" "+M:Wn(M,/&\f/g,p[w])))&&(l[v++]=C);return LS(t,e,n,i===0?gP:o,l,u,d)}function IZ(t,e,n){return LS(t,e,n,Sz,OS(TZ()),ly(t,2,-2),0)}function Yj(t,e,n,r){return LS(t,e,n,vP,ly(t,0,r),ly(t,r+1,-1),r)}function mg(t,e){for(var n="",r=yP(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function LZ(t,e,n,r){switch(t.type){case SZ:if(t.children.length)break;case wZ:case vP:return t.return=t.return||t.value;case Sz:return"";case Ez:return t.return=t.value+"{"+mg(t.children,r)+"}";case gP:t.value=t.props.join(",")}return Cc(n=mg(t.children,r))?t.return=t.value+"{"+n+"}":""}function FZ(t){var e=yP(t);return function(n,r,i,a){for(var s="",o=0;o<e;o++)s+=t[o](n,r,i,a)||"";return s}}function UZ(t){return function(e){e.root||(e=e.return)&&t(e)}}function BZ(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var zZ=function(e,n,r){for(var i=0,a=0;i=a,a=Lc(),i===38&&a===12&&(n[r]=1),!cy(a);)Mo();return Zy(e,Js)},HZ=function(e,n){var r=-1,i=44;do switch(cy(i)){case 0:i===38&&Lc()===12&&(n[r]=1),e[r]+=zZ(Js-1,n,r);break;case 2:e[r]+=cw(i);break;case 4:if(i===44){e[++r]=Lc()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=OS(i)}while(i=Mo());return e},VZ=function(e,n){return Az(HZ(Nz(e),n))},qj=new WeakMap,WZ=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!qj.get(r))&&!i){qj.set(e,!0);for(var a=[],s=VZ(n,a),o=r.props,l=0,u=0;l<s.length;l++)for(var d=0;d<o.length;d++,u++)e.props[u]=a[l]?s[l].replace(/&\f/g,o[d]):o[d]+" "+s[l]}}},GZ=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function Tz(t,e){switch(CZ(t,e)){case 5103:return Vn+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Vn+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Vn+t+Dw+t+$a+t+t;case 6828:case 4268:return Vn+t+$a+t+t;case 6165:return Vn+t+$a+"flex-"+t+t;case 5187:return Vn+t+Wn(t,/(\w+).+(:[^]+)/,Vn+"box-$1$2"+$a+"flex-$1$2")+t;case 5443:return Vn+t+$a+"flex-item-"+Wn(t,/flex-|-self/,"")+t;case 4675:return Vn+t+$a+"flex-line-pack"+Wn(t,/align-content|flex-|-self/,"")+t;case 5548:return Vn+t+$a+Wn(t,"shrink","negative")+t;case 5292:return Vn+t+$a+Wn(t,"basis","preferred-size")+t;case 6060:return Vn+"box-"+Wn(t,"-grow","")+Vn+t+$a+Wn(t,"grow","positive")+t;case 4554:return Vn+Wn(t,/([^-])(transform)/g,"$1"+Vn+"$2")+t;case 6187:return Wn(Wn(Wn(t,/(zoom-|grab)/,Vn+"$1"),/(image-set)/,Vn+"$1"),t,"")+t;case 5495:case 3959:return Wn(t,/(image-set\([^]*)/,Vn+"$1$`$1");case 4968:return Wn(Wn(t,/(.+:)(flex-)?(.*)/,Vn+"box-pack:$3"+$a+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Vn+t+t;case 4095:case 3583:case 4068:case 2532:return Wn(t,/(.+)-inline(.+)/,Vn+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Cc(t)-1-e>6)switch(Aa(t,e+1)){case 109:if(Aa(t,e+4)!==45)break;case 102:return Wn(t,/(.+:)(.+)-([^]+)/,"$1"+Vn+"$2-$3$1"+Dw+(Aa(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~EA(t,"stretch")?Tz(Wn(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Aa(t,e+1)!==115)break;case 6444:switch(Aa(t,Cc(t)-3-(~EA(t,"!important")&&10))){case 107:return Wn(t,":",":"+Vn)+t;case 101:return Wn(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Vn+(Aa(t,14)===45?"inline-":"")+"box$3$1"+Vn+"$2$3$1"+$a+"$2box$3")+t}break;case 5936:switch(Aa(t,e+11)){case 114:return Vn+t+$a+Wn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Vn+t+$a+Wn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Vn+t+$a+Wn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Vn+t+$a+t+t}return t}var $Z=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case vP:e.return=Tz(e.value,e.length);break;case Ez:return mg([a0(e,{value:Wn(e.value,"@","@"+Vn)})],i);case gP:if(e.length)return AZ(e.props,function(a){switch(NZ(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return mg([a0(e,{props:[Wn(a,/:(read-\w+)/,":"+Dw+"$1")]})],i);case"::placeholder":return mg([a0(e,{props:[Wn(a,/:(plac\w+)/,":"+Vn+"input-$1")]}),a0(e,{props:[Wn(a,/:(plac\w+)/,":"+Dw+"$1")]}),a0(e,{props:[Wn(a,/:(plac\w+)/,$a+"input-$1")]})],i)}return""})}},YZ=[$Z],qZ=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(_){var v=_.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(_),_.setAttribute("data-s",""))})}var i=e.stylisPlugins||YZ,a={},s,o=[];s=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(_){for(var v=_.getAttribute("data-emotion").split(" "),w=1;w<v.length;w++)a[v[w]]=!0;o.push(_)});var l,u=[WZ,GZ];{var d,f=[LZ,UZ(function(_){d.insert(_)})],p=FZ(u.concat(i,f)),m=function(v){return mg(OZ(v),p)};l=function(v,w,M,C){d=M,m(v?v+"{"+w.styles+"}":w.styles),C&&(y.inserted[w.name]=!0)}}var y={key:n,sheet:new _Z({key:n,container:s,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:l};return y.sheet.hydrate(o),y},aM={exports:{}},Kn={};var Xj;function XZ(){if(Xj)return Kn;Xj=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,s=t?Symbol.for("react.provider"):60109,o=t?Symbol.for("react.context"):60110,l=t?Symbol.for("react.async_mode"):60111,u=t?Symbol.for("react.concurrent_mode"):60111,d=t?Symbol.for("react.forward_ref"):60112,f=t?Symbol.for("react.suspense"):60113,p=t?Symbol.for("react.suspense_list"):60120,m=t?Symbol.for("react.memo"):60115,y=t?Symbol.for("react.lazy"):60116,_=t?Symbol.for("react.block"):60121,v=t?Symbol.for("react.fundamental"):60117,w=t?Symbol.for("react.responder"):60118,M=t?Symbol.for("react.scope"):60119;function C(P){if(typeof P=="object"&&P!==null){var R=P.$$typeof;switch(R){case e:switch(P=P.type,P){case l:case u:case r:case a:case i:case f:return P;default:switch(P=P&&P.$$typeof,P){case o:case d:case y:case m:case s:return P;default:return R}}case n:return R}}}function N(P){return C(P)===u}return Kn.AsyncMode=l,Kn.ConcurrentMode=u,Kn.ContextConsumer=o,Kn.ContextProvider=s,Kn.Element=e,Kn.ForwardRef=d,Kn.Fragment=r,Kn.Lazy=y,Kn.Memo=m,Kn.Portal=n,Kn.Profiler=a,Kn.StrictMode=i,Kn.Suspense=f,Kn.isAsyncMode=function(P){return N(P)||C(P)===l},Kn.isConcurrentMode=N,Kn.isContextConsumer=function(P){return C(P)===o},Kn.isContextProvider=function(P){return C(P)===s},Kn.isElement=function(P){return typeof P=="object"&&P!==null&&P.$$typeof===e},Kn.isForwardRef=function(P){return C(P)===d},Kn.isFragment=function(P){return C(P)===r},Kn.isLazy=function(P){return C(P)===y},Kn.isMemo=function(P){return C(P)===m},Kn.isPortal=function(P){return C(P)===n},Kn.isProfiler=function(P){return C(P)===a},Kn.isStrictMode=function(P){return C(P)===i},Kn.isSuspense=function(P){return C(P)===f},Kn.isValidElementType=function(P){return typeof P=="string"||typeof P=="function"||P===r||P===u||P===a||P===i||P===f||P===p||typeof P=="object"&&P!==null&&(P.$$typeof===y||P.$$typeof===m||P.$$typeof===s||P.$$typeof===o||P.$$typeof===d||P.$$typeof===v||P.$$typeof===w||P.$$typeof===M||P.$$typeof===_)},Kn.typeOf=C,Kn}var Kj;function Pz(){return Kj||(Kj=1,aM.exports=XZ()),aM.exports}var sM,Zj;function KZ(){if(Zj)return sM;Zj=1;var t=Pz(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[t.ForwardRef]=r,a[t.Memo]=i;function s(y){return t.isMemo(y)?i:a[y.$$typeof]||e}var o=Object.defineProperty,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;function m(y,_,v){if(typeof _!="string"){if(p){var w=f(_);w&&w!==p&&m(y,w,v)}var M=l(_);u&&(M=M.concat(u(_)));for(var C=s(y),N=s(_),P=0;P<M.length;++P){var R=M[P];if(!n[R]&&!(v&&v[R])&&!(N&&N[R])&&!(C&&C[R])){var k=d(_,R);try{o(y,R,k)}catch{}}}}return y}return sM=m,sM}KZ();var ZZ=!0;function QZ(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var Rz=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||ZZ===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},JZ=function(e,n,r){Rz(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var a=n;do e.insert(n===a?"."+i:"",a,e.sheet,!0),a=a.next;while(a!==void 0)}};function eQ(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var tQ={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},nQ=/[A-Z]|^ms/g,rQ=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Dz=function(e){return e.charCodeAt(1)===45},Qj=function(e){return e!=null&&typeof e!="boolean"},oM=BZ(function(t){return Dz(t)?t:t.replace(nQ,"-$&").toLowerCase()}),Jj=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(rQ,function(r,i,a){return Nc={name:i,styles:a,next:Nc},i})}return tQ[e]!==1&&!Dz(e)&&typeof n=="number"&&n!==0?n+"px":n};function uy(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Nc={name:i.name,styles:i.styles,next:Nc},i.name;var a=n;if(a.styles!==void 0){var s=a.next;if(s!==void 0)for(;s!==void 0;)Nc={name:s.name,styles:s.styles,next:Nc},s=s.next;var o=a.styles+";";return o}return iQ(t,e,n)}case"function":{if(t!==void 0){var l=Nc,u=n(t);return Nc=l,uy(t,e,u)}break}}var d=n;return d}function iQ(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=uy(t,e,n[i])+";";else for(var a in n){var s=n[a];if(typeof s!="object"){var o=s;Qj(o)&&(r+=oM(a)+":"+Jj(a,o)+";")}else if(Array.isArray(s)&&typeof s[0]=="string"&&e==null)for(var l=0;l<s.length;l++)Qj(s[l])&&(r+=oM(a)+":"+Jj(a,s[l])+";");else{var u=uy(t,e,s);switch(a){case"animation":case"animationName":{r+=oM(a)+":"+u+";";break}default:r+=a+"{"+u+"}"}}}return r}var eO=/label:\s*([^\s;{]+)\s*(;|$)/g,Nc;function kz(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";Nc=void 0;var a=t[0];if(a==null||a.raw===void 0)r=!1,i+=uy(n,e,a);else{var s=a;i+=s[0]}for(var o=1;o<t.length;o++)if(i+=uy(n,e,t[o]),r){var l=a;i+=l[o]}eO.lastIndex=0;for(var u="",d;(d=eO.exec(i))!==null;)u+="-"+d[1];var f=eQ(i)+u;return{name:f,styles:i,next:Nc}}var aQ=function(e){return e()},sQ=wg.useInsertionEffect?wg.useInsertionEffect:!1,oQ=sQ||aQ,jz=E.createContext(typeof HTMLElement<"u"?qZ({key:"css"}):null);jz.Provider;var lQ=function(e){return E.forwardRef(function(n,r){var i=E.useContext(jz);return e(n,i,r)})},cQ=E.createContext({}),xP={}.hasOwnProperty,CA="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",uQ=function(e,n){var r={};for(var i in n)xP.call(n,i)&&(r[i]=n[i]);return r[CA]=e,r},dQ=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return Rz(n,r,i),oQ(function(){return JZ(n,r,i)}),null},fQ=lQ(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[CA],a=[r],s="";typeof t.className=="string"?s=QZ(e.registered,a,t.className):t.className!=null&&(s=t.className+" ");var o=kz(a,void 0,E.useContext(cQ));s+=e.key+"-"+o.name;var l={};for(var u in t)xP.call(t,u)&&u!=="css"&&u!==CA&&(l[u]=t[u]);return l.className=s,n&&(l.ref=n),E.createElement(E.Fragment,null,E.createElement(dQ,{cache:e,serialized:o,isStringTag:typeof i=="string"}),E.createElement(i,l))}),hQ=fQ,qt=function(e,n){var r=arguments;if(n==null||!xP.call(n,"css"))return E.createElement.apply(void 0,r);var i=r.length,a=new Array(i);a[0]=hQ,a[1]=uQ(e,n);for(var s=2;s<i;s++)a[s]=r[s];return E.createElement.apply(null,a)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(qt||(qt={}));function bP(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return kz(e)}function pQ(){var t=bP.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function mQ(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const Mg=Math.min,Zh=Math.max,kw=Math.round,Pb=Math.floor,Fc=t=>({x:t,y:t}),gQ={left:"right",right:"left",bottom:"top",top:"bottom"},vQ={start:"end",end:"start"};function yQ(t,e,n){return Zh(t,Mg(e,n))}function FS(t,e){return typeof t=="function"?t(e):t}function Cg(t){return t.split("-")[0]}function Qy(t){return t.split("-")[1]}function xQ(t){return t==="x"?"y":"x"}function _P(t){return t==="y"?"height":"width"}const bQ=new Set(["top","bottom"]);function Uh(t){return bQ.has(Cg(t))?"y":"x"}function wP(t){return xQ(Uh(t))}function _Q(t,e,n){n===void 0&&(n=!1);const r=Qy(t),i=wP(t),a=_P(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(s=jw(s)),[s,jw(s)]}function wQ(t){const e=jw(t);return[NA(t),e,NA(e)]}function NA(t){return t.replace(/start|end/g,e=>vQ[e])}const tO=["left","right"],nO=["right","left"],SQ=["top","bottom"],EQ=["bottom","top"];function MQ(t,e,n){switch(t){case"top":case"bottom":return n?e?nO:tO:e?tO:nO;case"left":case"right":return e?SQ:EQ;default:return[]}}function CQ(t,e,n,r){const i=Qy(t);let a=MQ(Cg(t),n==="start",r);return i&&(a=a.map(s=>s+"-"+i),e&&(a=a.concat(a.map(NA)))),a}function jw(t){return t.replace(/left|right|bottom|top/g,e=>gQ[e])}function NQ(t){return{top:0,right:0,bottom:0,left:0,...t}}function Oz(t){return typeof t!="number"?NQ(t):{top:t,right:t,bottom:t,left:t}}function Ow(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function rO(t,e,n){let{reference:r,floating:i}=t;const a=Uh(e),s=wP(e),o=_P(s),l=Cg(e),u=a==="y",d=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,p=r[o]/2-i[o]/2;let m;switch(l){case"top":m={x:d,y:r.y-i.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-i.width,y:f};break;default:m={x:r.x,y:r.y}}switch(Qy(e)){case"start":m[s]-=p*(n&&u?-1:1);break;case"end":m[s]+=p*(n&&u?-1:1);break}return m}const AQ=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:s}=n,o=a.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let u=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:f}=rO(u,r,l),p=r,m={},y=0;for(let _=0;_<o.length;_++){const{name:v,fn:w}=o[_],{x:M,y:C,data:N,reset:P}=await w({x:d,y:f,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:u,platform:s,elements:{reference:t,floating:e}});d=M??d,f=C??f,m={...m,[v]:{...m[v],...N}},P&&y<=50&&(y++,typeof P=="object"&&(P.placement&&(p=P.placement),P.rects&&(u=P.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):P.rects),{x:d,y:f}=rO(u,p,l)),_=-1)}return{x:d,y:f,placement:p,strategy:i,middlewareData:m}};async function TQ(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:s,elements:o,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=FS(e,t),y=Oz(m),v=o[p?f==="floating"?"reference":"floating":f],w=Ow(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(v)))==null||n?v:v.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:u,rootBoundary:d,strategy:l})),M=f==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,C=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),N=await(a.isElement==null?void 0:a.isElement(C))?await(a.getScale==null?void 0:a.getScale(C))||{x:1,y:1}:{x:1,y:1},P=Ow(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:M,offsetParent:C,strategy:l}):M);return{top:(w.top-P.top+y.top)/N.y,bottom:(P.bottom-w.bottom+y.bottom)/N.y,left:(w.left-P.left+y.left)/N.x,right:(P.right-w.right+y.right)/N.x}}const PQ=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:a,platform:s,elements:o,middlewareData:l}=e,{element:u,padding:d=0}=FS(t,e)||{};if(u==null)return{};const f=Oz(d),p={x:n,y:r},m=wP(i),y=_P(m),_=await s.getDimensions(u),v=m==="y",w=v?"top":"left",M=v?"bottom":"right",C=v?"clientHeight":"clientWidth",N=a.reference[y]+a.reference[m]-p[m]-a.floating[y],P=p[m]-a.reference[m],R=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let k=R?R[C]:0;(!k||!await(s.isElement==null?void 0:s.isElement(R)))&&(k=o.floating[C]||a.floating[y]);const U=N/2-P/2,I=k/2-_[y]/2-1,L=Mg(f[w],I),z=Mg(f[M],I),O=L,q=k-_[y]-z,Y=k/2-_[y]/2+U,X=yQ(O,Y,q),ee=!l.arrow&&Qy(i)!=null&&Y!==X&&a.reference[y]/2-(Y<O?L:z)-_[y]/2<0,se=ee?Y<O?Y-O:Y-q:0;return{[m]:p[m]+se,data:{[m]:X,centerOffset:Y-X-se,...ee&&{alignmentOffset:se}},reset:ee}}}),RQ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:a,rects:s,initialPlacement:o,platform:l,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:_=!0,...v}=FS(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const w=Cg(i),M=Uh(o),C=Cg(o)===o,N=await(l.isRTL==null?void 0:l.isRTL(u.floating)),P=p||(C||!_?[jw(o)]:wQ(o)),R=y!=="none";!p&&R&&P.push(...CQ(o,_,y,N));const k=[o,...P],U=await TQ(e,v),I=[];let L=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&I.push(U[w]),f){const Y=_Q(i,s,N);I.push(U[Y[0]],U[Y[1]])}if(L=[...L,{placement:i,overflows:I}],!I.every(Y=>Y<=0)){var z,O;const Y=(((z=a.flip)==null?void 0:z.index)||0)+1,X=k[Y];if(X&&(!(f==="alignment"?M!==Uh(X):!1)||L.every(W=>Uh(W.placement)===M?W.overflows[0]>0:!0)))return{data:{index:Y,overflows:L},reset:{placement:X}};let ee=(O=L.filter(se=>se.overflows[0]<=0).sort((se,W)=>se.overflows[1]-W.overflows[1])[0])==null?void 0:O.placement;if(!ee)switch(m){case"bestFit":{var q;const se=(q=L.filter(W=>{if(R){const $=Uh(W.placement);return $===M||$==="y"}return!0}).map(W=>[W.placement,W.overflows.filter($=>$>0).reduce(($,G)=>$+G,0)]).sort((W,$)=>W[1]-$[1])[0])==null?void 0:q[0];se&&(ee=se);break}case"initialPlacement":ee=o;break}if(i!==ee)return{reset:{placement:ee}}}return{}}}},DQ=new Set(["left","top"]);async function kQ(t,e){const{placement:n,platform:r,elements:i}=t,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=Cg(n),o=Qy(n),l=Uh(n)==="y",u=DQ.has(s)?-1:1,d=a&&l?-1:1,f=FS(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof y=="number"&&(m=o==="end"?y*-1:y),l?{x:m*d,y:p*u}:{x:p*u,y:m*d}}const jQ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:a,placement:s,middlewareData:o}=e,l=await kQ(e,t);return s===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:a+l.y,data:{...l,placement:s}}}}};function US(){return typeof window<"u"}function Kg(t){return Iz(t)?(t.nodeName||"").toLowerCase():"#document"}function Co(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Xc(t){var e;return(e=(Iz(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Iz(t){return US()?t instanceof Node||t instanceof Co(t).Node:!1}function xs(t){return US()?t instanceof Element||t instanceof Co(t).Element:!1}function Wc(t){return US()?t instanceof HTMLElement||t instanceof Co(t).HTMLElement:!1}function iO(t){return!US()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Co(t).ShadowRoot}const OQ=new Set(["inline","contents"]);function Jy(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=el(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!OQ.has(i)}const IQ=new Set(["table","td","th"]);function LQ(t){return IQ.has(Kg(t))}const FQ=[":popover-open",":modal"];function BS(t){return FQ.some(e=>{try{return t.matches(e)}catch{return!1}})}const UQ=["transform","translate","scale","rotate","perspective"],BQ=["transform","translate","scale","rotate","perspective","filter"],zQ=["paint","layout","strict","content"];function SP(t){const e=EP(),n=xs(t)?el(t):t;return UQ.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||BQ.some(r=>(n.willChange||"").includes(r))||zQ.some(r=>(n.contain||"").includes(r))}function HQ(t){let e=Sf(t);for(;Wc(e)&&!Ng(e);){if(SP(e))return e;if(BS(e))return null;e=Sf(e)}return null}function EP(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const VQ=new Set(["html","body","#document"]);function Ng(t){return VQ.has(Kg(t))}function el(t){return Co(t).getComputedStyle(t)}function zS(t){return xs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Sf(t){if(Kg(t)==="html")return t;const e=t.assignedSlot||t.parentNode||iO(t)&&t.host||Xc(t);return iO(e)?e.host:e}function Lz(t){const e=Sf(t);return Ng(e)?t.ownerDocument?t.ownerDocument.body:t.body:Wc(e)&&Jy(e)?e:Lz(e)}function dy(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=Lz(t),a=i===((r=t.ownerDocument)==null?void 0:r.body),s=Co(i);if(a){const o=AA(s);return e.concat(s,s.visualViewport||[],Jy(i)?i:[],o&&n?dy(o):[])}return e.concat(i,dy(i,[],n))}function AA(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Fz(t){const e=el(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Wc(t),a=i?t.offsetWidth:n,s=i?t.offsetHeight:r,o=kw(n)!==a||kw(r)!==s;return o&&(n=a,r=s),{width:n,height:r,$:o}}function MP(t){return xs(t)?t:t.contextElement}function gg(t){const e=MP(t);if(!Wc(e))return Fc(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:a}=Fz(e);let s=(a?kw(n.width):n.width)/r,o=(a?kw(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const WQ=Fc(0);function Uz(t){const e=Co(t);return!EP()||!e.visualViewport?WQ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function GQ(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Co(t)?!1:e}function hp(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),a=MP(t);let s=Fc(1);e&&(r?xs(r)&&(s=gg(r)):s=gg(t));const o=GQ(a,n,r)?Uz(a):Fc(0);let l=(i.left+o.x)/s.x,u=(i.top+o.y)/s.y,d=i.width/s.x,f=i.height/s.y;if(a){const p=Co(a),m=r&&xs(r)?Co(r):r;let y=p,_=AA(y);for(;_&&r&&m!==y;){const v=gg(_),w=_.getBoundingClientRect(),M=el(_),C=w.left+(_.clientLeft+parseFloat(M.paddingLeft))*v.x,N=w.top+(_.clientTop+parseFloat(M.paddingTop))*v.y;l*=v.x,u*=v.y,d*=v.x,f*=v.y,l+=C,u+=N,y=Co(_),_=AA(y)}}return Ow({width:d,height:f,x:l,y:u})}function HS(t,e){const n=zS(t).scrollLeft;return e?e.left+n:hp(Xc(t)).left+n}function Bz(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-HS(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function $Q(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const a=i==="fixed",s=Xc(r),o=e?BS(e.floating):!1;if(r===s||o&&a)return n;let l={scrollLeft:0,scrollTop:0},u=Fc(1);const d=Fc(0),f=Wc(r);if((f||!f&&!a)&&((Kg(r)!=="body"||Jy(s))&&(l=zS(r)),Wc(r))){const m=hp(r);u=gg(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const p=s&&!f&&!a?Bz(s,l):Fc(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+p.x,y:n.y*u.y-l.scrollTop*u.y+d.y+p.y}}function YQ(t){return Array.from(t.getClientRects())}function qQ(t){const e=Xc(t),n=zS(t),r=t.ownerDocument.body,i=Zh(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Zh(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+HS(t);const o=-n.scrollTop;return el(r).direction==="rtl"&&(s+=Zh(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:s,y:o}}const aO=25;function XQ(t,e){const n=Co(t),r=Xc(t),i=n.visualViewport;let a=r.clientWidth,s=r.clientHeight,o=0,l=0;if(i){a=i.width,s=i.height;const d=EP();(!d||d&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}const u=HS(r);if(u<=0){const d=r.ownerDocument,f=d.body,p=getComputedStyle(f),m=d.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,y=Math.abs(r.clientWidth-f.clientWidth-m);y<=aO&&(a-=y)}else u<=aO&&(a+=u);return{width:a,height:s,x:o,y:l}}const KQ=new Set(["absolute","fixed"]);function ZQ(t,e){const n=hp(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,a=Wc(t)?gg(t):Fc(1),s=t.clientWidth*a.x,o=t.clientHeight*a.y,l=i*a.x,u=r*a.y;return{width:s,height:o,x:l,y:u}}function sO(t,e,n){let r;if(e==="viewport")r=XQ(t,n);else if(e==="document")r=qQ(Xc(t));else if(xs(e))r=ZQ(e,n);else{const i=Uz(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Ow(r)}function zz(t,e){const n=Sf(t);return n===e||!xs(n)||Ng(n)?!1:el(n).position==="fixed"||zz(n,e)}function QQ(t,e){const n=e.get(t);if(n)return n;let r=dy(t,[],!1).filter(o=>xs(o)&&Kg(o)!=="body"),i=null;const a=el(t).position==="fixed";let s=a?Sf(t):t;for(;xs(s)&&!Ng(s);){const o=el(s),l=SP(s);!l&&o.position==="fixed"&&(i=null),(a?!l&&!i:!l&&o.position==="static"&&!!i&&KQ.has(i.position)||Jy(s)&&!l&&zz(t,s))?r=r.filter(d=>d!==s):i=o,s=Sf(s)}return e.set(t,r),r}function JQ(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?BS(e)?[]:QQ(e,this._c):[].concat(n),r],o=s[0],l=s.reduce((u,d)=>{const f=sO(e,d,i);return u.top=Zh(f.top,u.top),u.right=Mg(f.right,u.right),u.bottom=Mg(f.bottom,u.bottom),u.left=Zh(f.left,u.left),u},sO(e,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function eJ(t){const{width:e,height:n}=Fz(t);return{width:e,height:n}}function tJ(t,e,n){const r=Wc(e),i=Xc(e),a=n==="fixed",s=hp(t,!0,a,e);let o={scrollLeft:0,scrollTop:0};const l=Fc(0);function u(){l.x=HS(i)}if(r||!r&&!a)if((Kg(e)!=="body"||Jy(i))&&(o=zS(e)),r){const m=hp(e,!0,a,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else i&&u();a&&!r&&i&&u();const d=i&&!r&&!a?Bz(i,o):Fc(0),f=s.left+o.scrollLeft-l.x-d.x,p=s.top+o.scrollTop-l.y-d.y;return{x:f,y:p,width:s.width,height:s.height}}function lM(t){return el(t).position==="static"}function oO(t,e){if(!Wc(t)||el(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Xc(t)===n&&(n=n.ownerDocument.body),n}function Hz(t,e){const n=Co(t);if(BS(t))return n;if(!Wc(t)){let i=Sf(t);for(;i&&!Ng(i);){if(xs(i)&&!lM(i))return i;i=Sf(i)}return n}let r=oO(t,e);for(;r&&LQ(r)&&lM(r);)r=oO(r,e);return r&&Ng(r)&&lM(r)&&!SP(r)?n:r||HQ(t)||n}const nJ=async function(t){const e=this.getOffsetParent||Hz,n=this.getDimensions,r=await n(t.floating);return{reference:tJ(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function rJ(t){return el(t).direction==="rtl"}const iJ={convertOffsetParentRelativeRectToViewportRelativeRect:$Q,getDocumentElement:Xc,getClippingRect:JQ,getOffsetParent:Hz,getElementRects:nJ,getClientRects:YQ,getDimensions:eJ,getScale:gg,isElement:xs,isRTL:rJ};function Vz(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function aJ(t,e){let n=null,r;const i=Xc(t);function a(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),a();const u=t.getBoundingClientRect(),{left:d,top:f,width:p,height:m}=u;if(o||e(),!p||!m)return;const y=Pb(f),_=Pb(i.clientWidth-(d+p)),v=Pb(i.clientHeight-(f+m)),w=Pb(d),C={rootMargin:-y+"px "+-_+"px "+-v+"px "+-w+"px",threshold:Zh(0,Mg(1,l))||1};let N=!0;function P(R){const k=R[0].intersectionRatio;if(k!==l){if(!N)return s();k?s(!1,k):r=setTimeout(()=>{s(!1,1e-7)},1e3)}k===1&&!Vz(u,t.getBoundingClientRect())&&s(),N=!1}try{n=new IntersectionObserver(P,{...C,root:i.ownerDocument})}catch{n=new IntersectionObserver(P,C)}n.observe(t)}return s(!0),a}function Wz(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=MP(t),d=i||a?[...u?dy(u):[],...dy(e)]:[];d.forEach(w=>{i&&w.addEventListener("scroll",n,{passive:!0}),a&&w.addEventListener("resize",n)});const f=u&&o?aJ(u,n):null;let p=-1,m=null;s&&(m=new ResizeObserver(w=>{let[M]=w;M&&M.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var C;(C=m)==null||C.observe(e)})),n()}),u&&!l&&m.observe(u),m.observe(e));let y,_=l?hp(t):null;l&&v();function v(){const w=hp(t);_&&!Vz(_,w)&&n(),_=w,y=requestAnimationFrame(v)}return n(),()=>{var w;d.forEach(M=>{i&&M.removeEventListener("scroll",n),a&&M.removeEventListener("resize",n)}),f?.(),(w=m)==null||w.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const sJ=jQ,oJ=RQ,lO=PQ,lJ=(t,e,n)=>{const r=new Map,i={platform:iJ,...n},a={...i.platform,_c:r};return AQ(t,e,{...i,platform:a})};var TA=E.useLayoutEffect,cJ=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Iw=function(){};function uJ(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function dJ(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=[].concat(r);if(e&&t)for(var s in e)e.hasOwnProperty(s)&&e[s]&&a.push("".concat(uJ(t,s)));return a.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var cO=function(e){return bJ(e)?e.filter(Boolean):fp(e)==="object"&&e!==null?[e]:[]},Gz=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=fd(e,cJ);return tn({},n)},ni=function(e,n,r){var i=e.cx,a=e.getStyles,s=e.getClassNames,o=e.className;return{css:a(n,e),className:i(r??{},s(n,e),o)}};function VS(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function fJ(t){return VS(t)?window.innerHeight:t.clientHeight}function $z(t){return VS(t)?window.pageYOffset:t.scrollTop}function Lw(t,e){if(VS(t)){window.scrollTo(0,e);return}t.scrollTop=e}function hJ(t){var e=getComputedStyle(t),n=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=t;i=i.parentElement;)if(e=getComputedStyle(i),!(n&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function pJ(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e}function Rb(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Iw,i=$z(t),a=e-i,s=10,o=0;function l(){o+=s;var u=pJ(o,i,a,n);Lw(t,u),o<n?window.requestAnimationFrame(l):r(t)}l()}function uO(t,e){var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=e.offsetHeight/3;r.bottom+i>n.bottom?Lw(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+i,t.scrollHeight)):r.top-i<n.top&&Lw(t,Math.max(e.offsetTop-i,0))}function mJ(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function dO(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function gJ(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var Yz=!1,vJ={get passive(){return Yz=!0}},Db=typeof window<"u"?window:{};Db.addEventListener&&Db.removeEventListener&&(Db.addEventListener("p",Iw,vJ),Db.removeEventListener("p",Iw,!1));var yJ=Yz;function xJ(t){return t!=null}function bJ(t){return Array.isArray(t)}function kb(t,e,n){return t?e:n}var _J=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=Object.entries(e).filter(function(s){var o=Yu(s,1),l=o[0];return!r.includes(l)});return a.reduce(function(s,o){var l=Yu(o,2),u=l[0],d=l[1];return s[u]=d,s},{})},wJ=["children","innerProps"],SJ=["children","innerProps"];function EJ(t){var e=t.maxHeight,n=t.menuEl,r=t.minHeight,i=t.placement,a=t.shouldScroll,s=t.isFixedPosition,o=t.controlHeight,l=hJ(n),u={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return u;var d=l.getBoundingClientRect(),f=d.height,p=n.getBoundingClientRect(),m=p.bottom,y=p.height,_=p.top,v=n.offsetParent.getBoundingClientRect(),w=v.top,M=s?window.innerHeight:fJ(l),C=$z(l),N=parseInt(getComputedStyle(n).marginBottom,10),P=parseInt(getComputedStyle(n).marginTop,10),R=w-P,k=M-_,U=R+C,I=f-C-_,L=m-M+C+N,z=C+_-P,O=160;switch(i){case"auto":case"bottom":if(k>=y)return{placement:"bottom",maxHeight:e};if(I>=y&&!s)return a&&Rb(l,L,O),{placement:"bottom",maxHeight:e};if(!s&&I>=r||s&&k>=r){a&&Rb(l,L,O);var q=s?k-N:I-N;return{placement:"bottom",maxHeight:q}}if(i==="auto"||s){var Y=e,X=s?R:U;return X>=r&&(Y=Math.min(X-N-o,e)),{placement:"top",maxHeight:Y}}if(i==="bottom")return a&&Lw(l,L),{placement:"bottom",maxHeight:e};break;case"top":if(R>=y)return{placement:"top",maxHeight:e};if(U>=y&&!s)return a&&Rb(l,z,O),{placement:"top",maxHeight:e};if(!s&&U>=r||s&&R>=r){var ee=e;return(!s&&U>=r||s&&R>=r)&&(ee=s?R-P:U-P),a&&Rb(l,z,O),{placement:"top",maxHeight:ee}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return u}function MJ(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var qz=function(e){return e==="auto"?"bottom":e},CJ=function(e,n){var r,i=e.placement,a=e.theme,s=a.borderRadius,o=a.spacing,l=a.colors;return tn((r={label:"menu"},O0(r,MJ(i),"100%"),O0(r,"position","absolute"),O0(r,"width","100%"),O0(r,"zIndex",1),r),n?{}:{backgroundColor:l.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},Xz=E.createContext(null),NJ=function(e){var n=e.children,r=e.minMenuHeight,i=e.maxMenuHeight,a=e.menuPlacement,s=e.menuPosition,o=e.menuShouldScrollIntoView,l=e.theme,u=E.useContext(Xz)||{},d=u.setPortalPlacement,f=E.useRef(null),p=E.useState(i),m=Yu(p,2),y=m[0],_=m[1],v=E.useState(null),w=Yu(v,2),M=w[0],C=w[1],N=l.spacing.controlHeight;return TA(function(){var P=f.current;if(P){var R=s==="fixed",k=o&&!R,U=EJ({maxHeight:i,menuEl:P,minHeight:r,placement:a,shouldScroll:k,isFixedPosition:R,controlHeight:N});_(U.maxHeight),C(U.placement),d?.(U.placement)}},[i,a,s,o,r,d,N]),n({ref:f,placerProps:tn(tn({},e),{},{placement:M||qz(a),maxHeight:y})})},AJ=function(e){var n=e.children,r=e.innerRef,i=e.innerProps;return qt("div",Kt({},ni(e,"menu",{menu:!0}),{ref:r},i),n)},TJ=AJ,PJ=function(e,n){var r=e.maxHeight,i=e.theme.spacing.baseUnit;return tn({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:i,paddingTop:i})},RJ=function(e){var n=e.children,r=e.innerProps,i=e.innerRef,a=e.isMulti;return qt("div",Kt({},ni(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:i},r),n)},Kz=function(e,n){var r=e.theme,i=r.spacing.baseUnit,a=r.colors;return tn({textAlign:"center"},n?{}:{color:a.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},DJ=Kz,kJ=Kz,jJ=function(e){var n=e.children,r=n===void 0?"No options":n,i=e.innerProps,a=fd(e,wJ);return qt("div",Kt({},ni(tn(tn({},a),{},{children:r,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),r)},OJ=function(e){var n=e.children,r=n===void 0?"Loading...":n,i=e.innerProps,a=fd(e,SJ);return qt("div",Kt({},ni(tn(tn({},a),{},{children:r,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),r)},IJ=function(e){var n=e.rect,r=e.offset,i=e.position;return{left:n.left,position:i,top:r,width:n.width,zIndex:1}},LJ=function(e){var n=e.appendTo,r=e.children,i=e.controlElement,a=e.innerProps,s=e.menuPlacement,o=e.menuPosition,l=E.useRef(null),u=E.useRef(null),d=E.useState(qz(s)),f=Yu(d,2),p=f[0],m=f[1],y=E.useMemo(function(){return{setPortalPlacement:m}},[]),_=E.useState(null),v=Yu(_,2),w=v[0],M=v[1],C=E.useCallback(function(){if(i){var k=mJ(i),U=o==="fixed"?0:window.pageYOffset,I=k[p]+U;(I!==w?.offset||k.left!==w?.rect.left||k.width!==w?.rect.width)&&M({offset:I,rect:k})}},[i,o,p,w?.offset,w?.rect.left,w?.rect.width]);TA(function(){C()},[C]);var N=E.useCallback(function(){typeof u.current=="function"&&(u.current(),u.current=null),i&&l.current&&(u.current=Wz(i,l.current,C,{elementResize:"ResizeObserver"in window}))},[i,C]);TA(function(){N()},[N]);var P=E.useCallback(function(k){l.current=k,N()},[N]);if(!n&&o!=="fixed"||!w)return null;var R=qt("div",Kt({ref:P},ni(tn(tn({},e),{},{offset:w.offset,position:o,rect:w.rect}),"menuPortal",{"menu-portal":!0}),a),r);return qt(Xz.Provider,{value:y},n?$g.createPortal(R,n):R)},FJ=function(e){var n=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},UJ=function(e){var n=e.children,r=e.innerProps,i=e.isDisabled,a=e.isRtl;return qt("div",Kt({},ni(e,"container",{"--is-disabled":i,"--is-rtl":a}),r),n)},BJ=function(e,n){var r=e.theme.spacing,i=e.isMulti,a=e.hasValue,s=e.selectProps.controlShouldRenderValue;return tn({alignItems:"center",display:i&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},zJ=function(e){var n=e.children,r=e.innerProps,i=e.isMulti,a=e.hasValue;return qt("div",Kt({},ni(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":a}),r),n)},HJ=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},VJ=function(e){var n=e.children,r=e.innerProps;return qt("div",Kt({},ni(e,"indicatorsContainer",{indicators:!0}),r),n)},fO,WJ=["size"],GJ=["innerProps","isRtl","size"],$J={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Zz=function(e){var n=e.size,r=fd(e,WJ);return qt("svg",Kt({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:$J},r))},CP=function(e){return qt(Zz,Kt({size:20},e),qt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},Qz=function(e){return qt(Zz,Kt({size:20},e),qt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Jz=function(e,n){var r=e.isFocused,i=e.theme,a=i.spacing.baseUnit,s=i.colors;return tn({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:r?s.neutral60:s.neutral20,padding:a*2,":hover":{color:r?s.neutral80:s.neutral40}})},YJ=Jz,qJ=function(e){var n=e.children,r=e.innerProps;return qt("div",Kt({},ni(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),n||qt(Qz,null))},XJ=Jz,KJ=function(e){var n=e.children,r=e.innerProps;return qt("div",Kt({},ni(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),n||qt(CP,null))},ZJ=function(e,n){var r=e.isDisabled,i=e.theme,a=i.spacing.baseUnit,s=i.colors;return tn({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:a*2,marginTop:a*2})},QJ=function(e){var n=e.innerProps;return qt("span",Kt({},n,ni(e,"indicatorSeparator",{"indicator-separator":!0})))},JJ=pQ(fO||(fO=mQ([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),eee=function(e,n){var r=e.isFocused,i=e.size,a=e.theme,s=a.colors,o=a.spacing.baseUnit;return tn({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},n?{}:{color:r?s.neutral60:s.neutral20,padding:o*2})},cM=function(e){var n=e.delay,r=e.offset;return qt("span",{css:bP({animation:"".concat(JJ," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},tee=function(e){var n=e.innerProps,r=e.isRtl,i=e.size,a=i===void 0?4:i,s=fd(e,GJ);return qt("div",Kt({},ni(tn(tn({},s),{},{innerProps:n,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),qt(cM,{delay:0,offset:r}),qt(cM,{delay:160,offset:!0}),qt(cM,{delay:320,offset:!r}))},nee=function(e,n){var r=e.isDisabled,i=e.isFocused,a=e.theme,s=a.colors,o=a.borderRadius,l=a.spacing;return tn({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:i?s.primary:s.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:i?s.primary:s.neutral30}})},ree=function(e){var n=e.children,r=e.isDisabled,i=e.isFocused,a=e.innerRef,s=e.innerProps,o=e.menuIsOpen;return qt("div",Kt({ref:a},ni(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":i,"control--menu-is-open":o}),s,{"aria-disabled":r||void 0}),n)},iee=ree,aee=["data"],see=function(e,n){var r=e.theme.spacing;return n?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},oee=function(e){var n=e.children,r=e.cx,i=e.getStyles,a=e.getClassNames,s=e.Heading,o=e.headingProps,l=e.innerProps,u=e.label,d=e.theme,f=e.selectProps;return qt("div",Kt({},ni(e,"group",{group:!0}),l),qt(s,Kt({},o,{selectProps:f,theme:d,getStyles:i,getClassNames:a,cx:r}),u),qt("div",null,n))},lee=function(e,n){var r=e.theme,i=r.colors,a=r.spacing;return tn({label:"group",cursor:"default",display:"block"},n?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:a.baseUnit*3,paddingRight:a.baseUnit*3,textTransform:"uppercase"})},cee=function(e){var n=Gz(e);n.data;var r=fd(n,aee);return qt("div",Kt({},ni(e,"groupHeading",{"group-heading":!0}),r))},uee=oee,dee=["innerRef","isDisabled","isHidden","inputClassName"],fee=function(e,n){var r=e.isDisabled,i=e.value,a=e.theme,s=a.spacing,o=a.colors;return tn(tn({visibility:r?"hidden":"visible",transform:i?"translateZ(0)":""},hee),n?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:o.neutral80})},e6={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},hee={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":tn({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},e6)},pee=function(e){return tn({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},e6)},mee=function(e){var n=e.cx,r=e.value,i=Gz(e),a=i.innerRef,s=i.isDisabled,o=i.isHidden,l=i.inputClassName,u=fd(i,dee);return qt("div",Kt({},ni(e,"input",{"input-container":!0}),{"data-value":r||""}),qt("input",Kt({className:n({input:!0},l),ref:a,style:pee(o),disabled:s},u)))},gee=mee,vee=function(e,n){var r=e.theme,i=r.spacing,a=r.borderRadius,s=r.colors;return tn({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:i.baseUnit/2})},yee=function(e,n){var r=e.theme,i=r.borderRadius,a=r.colors,s=e.cropWithEllipsis;return tn({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:i/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},xee=function(e,n){var r=e.theme,i=r.spacing,a=r.borderRadius,s=r.colors,o=e.isFocused;return tn({alignItems:"center",display:"flex"},n?{}:{borderRadius:a/2,backgroundColor:o?s.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},t6=function(e){var n=e.children,r=e.innerProps;return qt("div",r,n)},bee=t6,_ee=t6;function wee(t){var e=t.children,n=t.innerProps;return qt("div",Kt({role:"button"},n),e||qt(CP,{size:14}))}var See=function(e){var n=e.children,r=e.components,i=e.data,a=e.innerProps,s=e.isDisabled,o=e.removeProps,l=e.selectProps,u=r.Container,d=r.Label,f=r.Remove;return qt(u,{data:i,innerProps:tn(tn({},ni(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:l},qt(d,{data:i,innerProps:tn({},ni(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},n),qt(f,{data:i,innerProps:tn(tn({},ni(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},o),selectProps:l}))},Eee=See,Mee=function(e,n){var r=e.isDisabled,i=e.isFocused,a=e.isSelected,s=e.theme,o=s.spacing,l=s.colors;return tn({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:a?l.primary:i?l.primary25:"transparent",color:r?l.neutral20:a?l.neutral0:"inherit",padding:"".concat(o.baseUnit*2,"px ").concat(o.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:a?l.primary:l.primary50}})},Cee=function(e){var n=e.children,r=e.isDisabled,i=e.isFocused,a=e.isSelected,s=e.innerRef,o=e.innerProps;return qt("div",Kt({},ni(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":i,"option--is-selected":a}),{ref:s,"aria-disabled":r},o),n)},Nee=Cee,Aee=function(e,n){var r=e.theme,i=r.spacing,a=r.colors;return tn({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:a.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},Tee=function(e){var n=e.children,r=e.innerProps;return qt("div",Kt({},ni(e,"placeholder",{placeholder:!0}),r),n)},Pee=Tee,Ree=function(e,n){var r=e.isDisabled,i=e.theme,a=i.spacing,s=i.colors;return tn({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:r?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},Dee=function(e){var n=e.children,r=e.isDisabled,i=e.innerProps;return qt("div",Kt({},ni(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),i),n)},kee=Dee,jee={ClearIndicator:KJ,Control:iee,DropdownIndicator:qJ,DownChevron:Qz,CrossIcon:CP,Group:uee,GroupHeading:cee,IndicatorsContainer:VJ,IndicatorSeparator:QJ,Input:gee,LoadingIndicator:tee,Menu:TJ,MenuList:RJ,MenuPortal:LJ,LoadingMessage:OJ,NoOptionsMessage:jJ,MultiValue:Eee,MultiValueContainer:bee,MultiValueLabel:_ee,MultiValueRemove:wee,Option:Nee,Placeholder:Pee,SelectContainer:UJ,SingleValue:kee,ValueContainer:zJ},Oee=function(e){return tn(tn({},jee),e.components)},hO=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Iee(t,e){return!!(t===e||hO(t)&&hO(e))}function Lee(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!Iee(t[n],e[n]))return!1;return!0}function Fee(t,e){e===void 0&&(e=Lee);var n=null;function r(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var s=t.apply(this,i);return n={lastResult:s,lastArgs:i,lastThis:this},s}return r.clear=function(){n=null},r}var Uee={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},Bee=function(e){return qt("span",Kt({css:Uee},e))},pO=Bee,zee={guidance:function(e){var n=e.isSearchable,r=e.isMulti,i=e.tabSelectsValue,a=e.context,s=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,r=e.label,i=r===void 0?"":r,a=e.labels,s=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return s?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var n=e.context,r=e.focused,i=e.options,a=e.label,s=a===void 0?"":a,o=e.selectValue,l=e.isDisabled,u=e.isSelected,d=e.isAppleDevice,f=function(_,v){return _&&_.length?"".concat(_.indexOf(v)+1," of ").concat(_.length):""};if(n==="value"&&o)return"value ".concat(s," focused, ").concat(f(o,r),".");if(n==="menu"&&d){var p=l?" disabled":"",m="".concat(u?" selected":"").concat(p);return"".concat(s).concat(m,", ").concat(f(i,r),".")}return""},onFilter:function(e){var n=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(n?" for search term "+n:"",".")}},Hee=function(e){var n=e.ariaSelection,r=e.focusedOption,i=e.focusedValue,a=e.focusableOptions,s=e.isFocused,o=e.selectValue,l=e.selectProps,u=e.id,d=e.isAppleDevice,f=l.ariaLiveMessages,p=l.getOptionLabel,m=l.inputValue,y=l.isMulti,_=l.isOptionDisabled,v=l.isSearchable,w=l.menuIsOpen,M=l.options,C=l.screenReaderStatus,N=l.tabSelectsValue,P=l.isLoading,R=l["aria-label"],k=l["aria-live"],U=E.useMemo(function(){return tn(tn({},zee),f||{})},[f]),I=E.useMemo(function(){var X="";if(n&&U.onChange){var ee=n.option,se=n.options,W=n.removedValue,$=n.removedValues,G=n.value,j=function(le){return Array.isArray(le)?null:le},B=W||ee||j(G),ae=B?p(B):"",re=se||$||void 0,de=re?re.map(p):[],ce=tn({isDisabled:B&&_(B,o),label:ae,labels:de},n);X=U.onChange(ce)}return X},[n,U,_,o,p]),L=E.useMemo(function(){var X="",ee=r||i,se=!!(r&&o&&o.includes(r));if(ee&&U.onFocus){var W={focused:ee,label:p(ee),isDisabled:_(ee,o),isSelected:se,options:a,context:ee===r?"menu":"value",selectValue:o,isAppleDevice:d};X=U.onFocus(W)}return X},[r,i,p,_,U,a,o,d]),z=E.useMemo(function(){var X="";if(w&&M.length&&!P&&U.onFilter){var ee=C({count:a.length});X=U.onFilter({inputValue:m,resultsMessage:ee})}return X},[a,m,w,U,M,C,P]),O=n?.action==="initial-input-focus",q=E.useMemo(function(){var X="";if(U.guidance){var ee=i?"value":w?"menu":"input";X=U.guidance({"aria-label":R,context:ee,isDisabled:r&&_(r,o),isMulti:y,isSearchable:v,tabSelectsValue:N,isInitialFocus:O})}return X},[R,r,i,y,_,v,w,U,o,N,O]),Y=qt(E.Fragment,null,qt("span",{id:"aria-selection"},I),qt("span",{id:"aria-focused"},L),qt("span",{id:"aria-results"},z),qt("span",{id:"aria-guidance"},q));return qt(E.Fragment,null,qt(pO,{id:u},O&&Y),qt(pO,{"aria-live":k,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!O&&Y))},Vee=Hee,PA=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],Wee=new RegExp("["+PA.map(function(t){return t.letters}).join("")+"]","g"),n6={};for(var uM=0;uM<PA.length;uM++)for(var dM=PA[uM],fM=0;fM<dM.letters.length;fM++)n6[dM.letters[fM]]=dM.base;var r6=function(e){return e.replace(Wee,function(n){return n6[n]})},Gee=Fee(r6),mO=function(e){return e.replace(/^\s+|\s+$/g,"")},$ee=function(e){return"".concat(e.label," ").concat(e.value)},Yee=function(e){return function(n,r){if(n.data.__isNew__)return!0;var i=tn({ignoreCase:!0,ignoreAccents:!0,stringify:$ee,trim:!0,matchFrom:"any"},e),a=i.ignoreCase,s=i.ignoreAccents,o=i.stringify,l=i.trim,u=i.matchFrom,d=l?mO(r):r,f=l?mO(o(n)):o(n);return a&&(d=d.toLowerCase(),f=f.toLowerCase()),s&&(d=Gee(d),f=r6(f)),u==="start"?f.substr(0,d.length)===d:f.indexOf(d)>-1}},qee=["innerRef"];function Xee(t){var e=t.innerRef,n=fd(t,qee),r=_J(n,"onExited","in","enter","exit","appear");return qt("input",Kt({ref:e},r,{css:bP({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var Kee=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function Zee(t){var e=t.isEnabled,n=t.onBottomArrive,r=t.onBottomLeave,i=t.onTopArrive,a=t.onTopLeave,s=E.useRef(!1),o=E.useRef(!1),l=E.useRef(0),u=E.useRef(null),d=E.useCallback(function(v,w){if(u.current!==null){var M=u.current,C=M.scrollTop,N=M.scrollHeight,P=M.clientHeight,R=u.current,k=w>0,U=N-P-C,I=!1;U>w&&s.current&&(r&&r(v),s.current=!1),k&&o.current&&(a&&a(v),o.current=!1),k&&w>U?(n&&!s.current&&n(v),R.scrollTop=N,I=!0,s.current=!0):!k&&-w>C&&(i&&!o.current&&i(v),R.scrollTop=0,I=!0,o.current=!0),I&&Kee(v)}},[n,r,i,a]),f=E.useCallback(function(v){d(v,v.deltaY)},[d]),p=E.useCallback(function(v){l.current=v.changedTouches[0].clientY},[]),m=E.useCallback(function(v){var w=l.current-v.changedTouches[0].clientY;d(v,w)},[d]),y=E.useCallback(function(v){if(v){var w=yJ?{passive:!1}:!1;v.addEventListener("wheel",f,w),v.addEventListener("touchstart",p,w),v.addEventListener("touchmove",m,w)}},[m,p,f]),_=E.useCallback(function(v){v&&(v.removeEventListener("wheel",f,!1),v.removeEventListener("touchstart",p,!1),v.removeEventListener("touchmove",m,!1))},[m,p,f]);return E.useEffect(function(){if(e){var v=u.current;return y(v),function(){_(v)}}},[e,y,_]),function(v){u.current=v}}var gO=["boxSizing","height","overflow","paddingRight","position"],vO={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function yO(t){t.cancelable&&t.preventDefault()}function xO(t){t.stopPropagation()}function bO(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function _O(){return"ontouchstart"in window||navigator.maxTouchPoints}var wO=!!(typeof window<"u"&&window.document&&window.document.createElement),s0=0,Am={capture:!1,passive:!1};function Qee(t){var e=t.isEnabled,n=t.accountForScrollbars,r=n===void 0?!0:n,i=E.useRef({}),a=E.useRef(null),s=E.useCallback(function(l){if(wO){var u=document.body,d=u&&u.style;if(r&&gO.forEach(function(y){var _=d&&d[y];i.current[y]=_}),r&&s0<1){var f=parseInt(i.current.paddingRight,10)||0,p=document.body?document.body.clientWidth:0,m=window.innerWidth-p+f||0;Object.keys(vO).forEach(function(y){var _=vO[y];d&&(d[y]=_)}),d&&(d.paddingRight="".concat(m,"px"))}u&&_O()&&(u.addEventListener("touchmove",yO,Am),l&&(l.addEventListener("touchstart",bO,Am),l.addEventListener("touchmove",xO,Am))),s0+=1}},[r]),o=E.useCallback(function(l){if(wO){var u=document.body,d=u&&u.style;s0=Math.max(s0-1,0),r&&s0<1&&gO.forEach(function(f){var p=i.current[f];d&&(d[f]=p)}),u&&_O()&&(u.removeEventListener("touchmove",yO,Am),l&&(l.removeEventListener("touchstart",bO,Am),l.removeEventListener("touchmove",xO,Am)))}},[r]);return E.useEffect(function(){if(e){var l=a.current;return s(l),function(){o(l)}}},[e,s,o]),function(l){a.current=l}}var Jee=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},ete={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function tte(t){var e=t.children,n=t.lockEnabled,r=t.captureEnabled,i=r===void 0?!0:r,a=t.onBottomArrive,s=t.onBottomLeave,o=t.onTopArrive,l=t.onTopLeave,u=Zee({isEnabled:i,onBottomArrive:a,onBottomLeave:s,onTopArrive:o,onTopLeave:l}),d=Qee({isEnabled:n}),f=function(m){u(m),d(m)};return qt(E.Fragment,null,n&&qt("div",{onClick:Jee,css:ete}),e(f))}var nte={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},rte=function(e){var n=e.name,r=e.onFocus;return qt("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:nte,value:"",onChange:function(){}})},ite=rte;function NP(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function ate(){return NP(/^iPhone/i)}function i6(){return NP(/^Mac/i)}function ste(){return NP(/^iPad/i)||i6()&&navigator.maxTouchPoints>1}function ote(){return ate()||ste()}function lte(){return i6()||ote()}var cte=function(e){return e.label},ute=function(e){return e.label},dte=function(e){return e.value},fte=function(e){return!!e.isDisabled},hte={clearIndicator:XJ,container:FJ,control:nee,dropdownIndicator:YJ,group:see,groupHeading:lee,indicatorsContainer:HJ,indicatorSeparator:ZJ,input:fee,loadingIndicator:eee,loadingMessage:kJ,menu:CJ,menuList:PJ,menuPortal:IJ,multiValue:vee,multiValueLabel:yee,multiValueRemove:xee,noOptionsMessage:DJ,option:Mee,placeholder:Aee,singleValue:Ree,valueContainer:BJ},pte={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},mte=4,a6=4,gte=38,vte=a6*2,yte={baseUnit:a6,controlHeight:gte,menuGutter:vte},hM={borderRadius:mte,colors:pte,spacing:yte},xte={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:dO(),captureMenuScroll:!dO(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Yee(),formatGroupLabel:cte,getOptionLabel:ute,getOptionValue:dte,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:fte,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!gJ(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function SO(t,e,n,r){var i=l6(t,e,n),a=c6(t,e,n),s=o6(t,e),o=Fw(t,e);return{type:"option",data:e,isDisabled:i,isSelected:a,label:s,value:o,index:r}}function dw(t,e){return t.options.map(function(n,r){if("options"in n){var i=n.options.map(function(s,o){return SO(t,s,e,o)}).filter(function(s){return MO(t,s)});return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var a=SO(t,n,e,r);return MO(t,a)?a:void 0}).filter(xJ)}function s6(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,mP(n.options.map(function(r){return r.data}))):e.push(n.data),e},[])}function EO(t,e){return t.reduce(function(n,r){return r.type==="group"?n.push.apply(n,mP(r.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(r.index,"-").concat(i.index)}}))):n.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),n},[])}function bte(t,e){return s6(dw(t,e))}function MO(t,e){var n=t.inputValue,r=n===void 0?"":n,i=e.data,a=e.isSelected,s=e.label,o=e.value;return(!d6(t)||!a)&&u6(t,{label:s,value:o,data:i},r)}function _te(t,e){var n=t.focusedValue,r=t.selectValue,i=r.indexOf(n);if(i>-1){var a=e.indexOf(n);if(a>-1)return n;if(i<e.length)return e[i]}return null}function wte(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var pM=function(e,n){var r,i=(r=e.find(function(a){return a.data===n}))===null||r===void 0?void 0:r.id;return i||null},o6=function(e,n){return e.getOptionLabel(n)},Fw=function(e,n){return e.getOptionValue(n)};function l6(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function c6(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var r=Fw(t,e);return n.some(function(i){return Fw(t,i)===r})}function u6(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var d6=function(e){var n=e.hideSelectedOptions,r=e.isMulti;return n===void 0?r:n},Ste=1,f6=(function(t){fZ(n,t);var e=mZ(n);function n(r){var i;if(uZ(this,n),i=e.call(this,r),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(l){i.controlRef=l},i.focusedOptionRef=null,i.getFocusedOptionRef=function(l){i.focusedOptionRef=l},i.menuListRef=null,i.getMenuListRef=function(l){i.menuListRef=l},i.inputRef=null,i.getInputRef=function(l){i.inputRef=l},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(l,u){var d=i.props,f=d.onChange,p=d.name;u.name=p,i.ariaOnChange(l,u),f(l,u)},i.setValue=function(l,u,d){var f=i.props,p=f.closeMenuOnSelect,m=f.isMulti,y=f.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:y}),p&&(i.setState({inputIsHiddenAfterUpdate:!m}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(l,{action:u,option:d})},i.selectOption=function(l){var u=i.props,d=u.blurInputOnSelect,f=u.isMulti,p=u.name,m=i.state.selectValue,y=f&&i.isOptionSelected(l,m),_=i.isOptionDisabled(l,m);if(y){var v=i.getOptionValue(l);i.setValue(m.filter(function(w){return i.getOptionValue(w)!==v}),"deselect-option",l)}else if(!_)f?i.setValue([].concat(mP(m),[l]),"select-option",l):i.setValue(l,"select-option");else{i.ariaOnChange(l,{action:"select-option",option:l,name:p});return}d&&i.blurInput()},i.removeValue=function(l){var u=i.props.isMulti,d=i.state.selectValue,f=i.getOptionValue(l),p=d.filter(function(y){return i.getOptionValue(y)!==f}),m=kb(u,p,p[0]||null);i.onChange(m,{action:"remove-value",removedValue:l}),i.focusInput()},i.clearValue=function(){var l=i.state.selectValue;i.onChange(kb(i.props.isMulti,[],null),{action:"clear",removedValues:l})},i.popValue=function(){var l=i.props.isMulti,u=i.state.selectValue,d=u[u.length-1],f=u.slice(0,u.length-1),p=kb(l,f,f[0]||null);d&&i.onChange(p,{action:"pop-value",removedValue:d})},i.getFocusedOptionId=function(l){return pM(i.state.focusableOptionsWithIds,l)},i.getFocusableOptionsWithIds=function(){return EO(dw(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];return dJ.apply(void 0,[i.props.classNamePrefix].concat(u))},i.getOptionLabel=function(l){return o6(i.props,l)},i.getOptionValue=function(l){return Fw(i.props,l)},i.getStyles=function(l,u){var d=i.props.unstyled,f=hte[l](u,d);f.boxSizing="border-box";var p=i.props.styles[l];return p?p(f,u):f},i.getClassNames=function(l,u){var d,f;return(d=(f=i.props.classNames)[l])===null||d===void 0?void 0:d.call(f,u)},i.getElementId=function(l){return"".concat(i.state.instancePrefix,"-").concat(l)},i.getComponents=function(){return Oee(i.props)},i.buildCategorizedOptions=function(){return dw(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return s6(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(l,u){i.setState({ariaSelection:tn({value:l},u)})},i.onMenuMouseDown=function(l){l.button===0&&(l.stopPropagation(),l.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(l){i.blockOptionHover=!1},i.onControlMouseDown=function(l){if(!l.defaultPrevented){var u=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&i.onMenuClose():u&&i.openMenu("first"):(u&&(i.openAfterFocus=!0),i.focusInput()),l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&l.preventDefault()}},i.onDropdownIndicatorMouseDown=function(l){if(!(l&&l.type==="mousedown"&&l.button!==0)&&!i.props.isDisabled){var u=i.props,d=u.isMulti,f=u.menuIsOpen;i.focusInput(),f?(i.setState({inputIsHiddenAfterUpdate:!d}),i.onMenuClose()):i.openMenu("first"),l.preventDefault()}},i.onClearIndicatorMouseDown=function(l){l&&l.type==="mousedown"&&l.button!==0||(i.clearValue(),l.preventDefault(),i.openAfterFocus=!1,l.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(l){typeof i.props.closeMenuOnScroll=="boolean"?l.target instanceof HTMLElement&&VS(l.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(l)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(l){var u=l.touches,d=u&&u.item(0);d&&(i.initialTouchX=d.clientX,i.initialTouchY=d.clientY,i.userIsDragging=!1)},i.onTouchMove=function(l){var u=l.touches,d=u&&u.item(0);if(d){var f=Math.abs(d.clientX-i.initialTouchX),p=Math.abs(d.clientY-i.initialTouchY),m=5;i.userIsDragging=f>m||p>m}},i.onTouchEnd=function(l){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(l.target)&&i.menuListRef&&!i.menuListRef.contains(l.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(l){i.userIsDragging||i.onControlMouseDown(l)},i.onClearIndicatorTouchEnd=function(l){i.userIsDragging||i.onClearIndicatorMouseDown(l)},i.onDropdownIndicatorTouchEnd=function(l){i.userIsDragging||i.onDropdownIndicatorMouseDown(l)},i.handleInputChange=function(l){var u=i.props.inputValue,d=l.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(d,{action:"input-change",prevInputValue:u}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(l){i.props.onFocus&&i.props.onFocus(l),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(l){var u=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(l),i.onInputChange("",{action:"input-blur",prevInputValue:u}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(l){if(!(i.blockOptionHover||i.state.focusedOption===l)){var u=i.getFocusableOptions(),d=u.indexOf(l);i.setState({focusedOption:l,focusedOptionId:d>-1?i.getFocusedOptionId(l):null})}},i.shouldHideSelectedOptions=function(){return d6(i.props)},i.onValueInputFocus=function(l){l.preventDefault(),l.stopPropagation(),i.focus()},i.onKeyDown=function(l){var u=i.props,d=u.isMulti,f=u.backspaceRemovesValue,p=u.escapeClearsValue,m=u.inputValue,y=u.isClearable,_=u.isDisabled,v=u.menuIsOpen,w=u.onKeyDown,M=u.tabSelectsValue,C=u.openMenuOnFocus,N=i.state,P=N.focusedOption,R=N.focusedValue,k=N.selectValue;if(!_&&!(typeof w=="function"&&(w(l),l.defaultPrevented))){switch(i.blockOptionHover=!0,l.key){case"ArrowLeft":if(!d||m)return;i.focusValue("previous");break;case"ArrowRight":if(!d||m)return;i.focusValue("next");break;case"Delete":case"Backspace":if(m)return;if(R)i.removeValue(R);else{if(!f)return;d?i.popValue():y&&i.clearValue()}break;case"Tab":if(i.isComposing||l.shiftKey||!v||!M||!P||C&&i.isOptionSelected(P,k))return;i.selectOption(P);break;case"Enter":if(l.keyCode===229)break;if(v){if(!P||i.isComposing)return;i.selectOption(P);break}return;case"Escape":v?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:m}),i.onMenuClose()):y&&p&&i.clearValue();break;case" ":if(m)return;if(!v){i.openMenu("first");break}if(!P)return;i.selectOption(P);break;case"ArrowUp":v?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":v?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!v)return;i.focusOption("pageup");break;case"PageDown":if(!v)return;i.focusOption("pagedown");break;case"Home":if(!v)return;i.focusOption("first");break;case"End":if(!v)return;i.focusOption("last");break;default:return}l.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++Ste),i.state.selectValue=cO(r.value),r.menuIsOpen&&i.state.selectValue.length){var a=i.getFocusableOptionsWithIds(),s=i.buildFocusableOptions(),o=s.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=a,i.state.focusedOption=s[o],i.state.focusedOptionId=pM(a,s[o])}return i}return dZ(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&uO(this.menuListRef,this.focusedOptionRef),lte()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isDisabled,o=a.menuIsOpen,l=this.state.isFocused;(l&&!s&&i.isDisabled||l&&o&&!i.menuIsOpen)&&this.focusInput(),l&&s&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!s&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(uO(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,a){this.props.onInputChange(i,a)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var a=this,s=this.state,o=s.selectValue,l=s.isFocused,u=this.buildFocusableOptions(),d=i==="first"?0:u.length-1;if(!this.props.isMulti){var f=u.indexOf(o[0]);f>-1&&(d=f)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:u[d],focusedOptionId:this.getFocusedOptionId(u[d])},function(){return a.onMenuOpen()})}},{key:"focusValue",value:function(i){var a=this.state,s=a.selectValue,o=a.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=s.indexOf(o);o||(l=-1);var u=s.length-1,d=-1;if(s.length){switch(i){case"previous":l===0?d=0:l===-1?d=u:d=l-1;break;case"next":l>-1&&l<u&&(d=l+1);break}this.setState({inputIsHidden:d!==-1,focusedValue:s[d]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",a=this.props.pageSize,s=this.state.focusedOption,o=this.getFocusableOptions();if(o.length){var l=0,u=o.indexOf(s);s||(u=-1),i==="up"?l=u>0?u-1:o.length-1:i==="down"?l=(u+1)%o.length:i==="pageup"?(l=u-a,l<0&&(l=0)):i==="pagedown"?(l=u+a,l>o.length-1&&(l=o.length-1)):i==="last"&&(l=o.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:o[l],focusedValue:null,focusedOptionId:this.getFocusedOptionId(o[l])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(hM):tn(tn({},hM),this.props.theme):hM})},{key:"getCommonProps",value:function(){var i=this.clearValue,a=this.cx,s=this.getStyles,o=this.getClassNames,l=this.getValue,u=this.selectOption,d=this.setValue,f=this.props,p=f.isMulti,m=f.isRtl,y=f.options,_=this.hasValue();return{clearValue:i,cx:a,getStyles:s,getClassNames:o,getValue:l,hasValue:_,isMulti:p,isRtl:m,options:y,selectOption:u,selectProps:f,setValue:d,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,a=i.isClearable,s=i.isMulti;return a===void 0?s:a}},{key:"isOptionDisabled",value:function(i,a){return l6(this.props,i,a)}},{key:"isOptionSelected",value:function(i,a){return c6(this.props,i,a)}},{key:"filterOption",value:function(i,a){return u6(this.props,i,a)}},{key:"formatOptionLabel",value:function(i,a){if(typeof this.props.formatOptionLabel=="function"){var s=this.props.inputValue,o=this.state.selectValue;return this.props.formatOptionLabel(i,{context:a,inputValue:s,selectValue:o})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var i=this.props,a=i.isDisabled,s=i.isSearchable,o=i.inputId,l=i.inputValue,u=i.tabIndex,d=i.form,f=i.menuIsOpen,p=i.required,m=this.getComponents(),y=m.Input,_=this.state,v=_.inputIsHidden,w=_.ariaSelection,M=this.commonProps,C=o||this.getElementId("input"),N=tn(tn(tn({"aria-autocomplete":"list","aria-expanded":f,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":p,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},f&&{"aria-controls":this.getElementId("listbox")}),!s&&{"aria-readonly":!0}),this.hasValue()?w?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return s?E.createElement(y,Kt({},M,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:C,innerRef:this.getInputRef,isDisabled:a,isHidden:v,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:u,form:d,type:"text",value:l},N)):E.createElement(Xee,Kt({id:C,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Iw,onFocus:this.onInputFocus,disabled:a,tabIndex:u,inputMode:"none",form:d,value:""},N))})},{key:"renderPlaceholderOrValue",value:function(){var i=this,a=this.getComponents(),s=a.MultiValue,o=a.MultiValueContainer,l=a.MultiValueLabel,u=a.MultiValueRemove,d=a.SingleValue,f=a.Placeholder,p=this.commonProps,m=this.props,y=m.controlShouldRenderValue,_=m.isDisabled,v=m.isMulti,w=m.inputValue,M=m.placeholder,C=this.state,N=C.selectValue,P=C.focusedValue,R=C.isFocused;if(!this.hasValue()||!y)return w?null:E.createElement(f,Kt({},p,{key:"placeholder",isDisabled:_,isFocused:R,innerProps:{id:this.getElementId("placeholder")}}),M);if(v)return N.map(function(U,I){var L=U===P,z="".concat(i.getOptionLabel(U),"-").concat(i.getOptionValue(U));return E.createElement(s,Kt({},p,{components:{Container:o,Label:l,Remove:u},isFocused:L,isDisabled:_,key:z,index:I,removeProps:{onClick:function(){return i.removeValue(U)},onTouchEnd:function(){return i.removeValue(U)},onMouseDown:function(q){q.preventDefault()}},data:U}),i.formatOptionLabel(U,"value"))});if(w)return null;var k=N[0];return E.createElement(d,Kt({},p,{data:k,isDisabled:_}),this.formatOptionLabel(k,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),a=i.ClearIndicator,s=this.commonProps,o=this.props,l=o.isDisabled,u=o.isLoading,d=this.state.isFocused;if(!this.isClearable()||!a||l||!this.hasValue()||u)return null;var f={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return E.createElement(a,Kt({},s,{innerProps:f,isFocused:d}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),a=i.LoadingIndicator,s=this.commonProps,o=this.props,l=o.isDisabled,u=o.isLoading,d=this.state.isFocused;if(!a||!u)return null;var f={"aria-hidden":"true"};return E.createElement(a,Kt({},s,{innerProps:f,isDisabled:l,isFocused:d}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),a=i.DropdownIndicator,s=i.IndicatorSeparator;if(!a||!s)return null;var o=this.commonProps,l=this.props.isDisabled,u=this.state.isFocused;return E.createElement(s,Kt({},o,{isDisabled:l,isFocused:u}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),a=i.DropdownIndicator;if(!a)return null;var s=this.commonProps,o=this.props.isDisabled,l=this.state.isFocused,u={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return E.createElement(a,Kt({},s,{innerProps:u,isDisabled:o,isFocused:l}))}},{key:"renderMenu",value:function(){var i=this,a=this.getComponents(),s=a.Group,o=a.GroupHeading,l=a.Menu,u=a.MenuList,d=a.MenuPortal,f=a.LoadingMessage,p=a.NoOptionsMessage,m=a.Option,y=this.commonProps,_=this.state.focusedOption,v=this.props,w=v.captureMenuScroll,M=v.inputValue,C=v.isLoading,N=v.loadingMessage,P=v.minMenuHeight,R=v.maxMenuHeight,k=v.menuIsOpen,U=v.menuPlacement,I=v.menuPosition,L=v.menuPortalTarget,z=v.menuShouldBlockScroll,O=v.menuShouldScrollIntoView,q=v.noOptionsMessage,Y=v.onMenuScrollToTop,X=v.onMenuScrollToBottom;if(!k)return null;var ee=function(ae,re){var de=ae.type,ce=ae.data,ie=ae.isDisabled,le=ae.isSelected,fe=ae.label,Ne=ae.value,Se=_===ce,Z=ie?void 0:function(){return i.onOptionHover(ce)},xe=ie?void 0:function(){return i.selectOption(ce)},oe="".concat(i.getElementId("option"),"-").concat(re),tt={id:oe,onClick:xe,onMouseMove:Z,onMouseOver:Z,tabIndex:-1,role:"option","aria-selected":i.state.isAppleDevice?void 0:le};return E.createElement(m,Kt({},y,{innerProps:tt,data:ce,isDisabled:ie,isSelected:le,key:oe,label:fe,type:de,value:Ne,isFocused:Se,innerRef:Se?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(ae.data,"menu"))},se;if(this.hasOptions())se=this.getCategorizedOptions().map(function(B){if(B.type==="group"){var ae=B.data,re=B.options,de=B.index,ce="".concat(i.getElementId("group"),"-").concat(de),ie="".concat(ce,"-heading");return E.createElement(s,Kt({},y,{key:ce,data:ae,options:re,Heading:o,headingProps:{id:ie,data:B.data},label:i.formatGroupLabel(B.data)}),B.options.map(function(le){return ee(le,"".concat(de,"-").concat(le.index))}))}else if(B.type==="option")return ee(B,"".concat(B.index))});else if(C){var W=N({inputValue:M});if(W===null)return null;se=E.createElement(f,y,W)}else{var $=q({inputValue:M});if($===null)return null;se=E.createElement(p,y,$)}var G={minMenuHeight:P,maxMenuHeight:R,menuPlacement:U,menuPosition:I,menuShouldScrollIntoView:O},j=E.createElement(NJ,Kt({},y,G),function(B){var ae=B.ref,re=B.placerProps,de=re.placement,ce=re.maxHeight;return E.createElement(l,Kt({},y,G,{innerRef:ae,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:C,placement:de}),E.createElement(tte,{captureEnabled:w,onTopArrive:Y,onBottomArrive:X,lockEnabled:z},function(ie){return E.createElement(u,Kt({},y,{innerRef:function(fe){i.getMenuListRef(fe),ie(fe)},innerProps:{role:"listbox","aria-multiselectable":y.isMulti,id:i.getElementId("listbox")},isLoading:C,maxHeight:ce,focusedOption:_}),se)}))});return L||I==="fixed"?E.createElement(d,Kt({},y,{appendTo:L,controlElement:this.controlRef,menuPlacement:U,menuPosition:I}),j):j}},{key:"renderFormField",value:function(){var i=this,a=this.props,s=a.delimiter,o=a.isDisabled,l=a.isMulti,u=a.name,d=a.required,f=this.state.selectValue;if(d&&!this.hasValue()&&!o)return E.createElement(ite,{name:u,onFocus:this.onValueInputFocus});if(!(!u||o))if(l)if(s){var p=f.map(function(_){return i.getOptionValue(_)}).join(s);return E.createElement("input",{name:u,type:"hidden",value:p})}else{var m=f.length>0?f.map(function(_,v){return E.createElement("input",{key:"i-".concat(v),name:u,type:"hidden",value:i.getOptionValue(_)})}):E.createElement("input",{name:u,type:"hidden",value:""});return E.createElement("div",null,m)}else{var y=f[0]?this.getOptionValue(f[0]):"";return E.createElement("input",{name:u,type:"hidden",value:y})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,a=this.state,s=a.ariaSelection,o=a.focusedOption,l=a.focusedValue,u=a.isFocused,d=a.selectValue,f=this.getFocusableOptions();return E.createElement(Vee,Kt({},i,{id:this.getElementId("live-region"),ariaSelection:s,focusedOption:o,focusedValue:l,isFocused:u,selectValue:d,focusableOptions:f,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),a=i.Control,s=i.IndicatorsContainer,o=i.SelectContainer,l=i.ValueContainer,u=this.props,d=u.className,f=u.id,p=u.isDisabled,m=u.menuIsOpen,y=this.state.isFocused,_=this.commonProps=this.getCommonProps();return E.createElement(o,Kt({},_,{className:d,innerProps:{id:f,onKeyDown:this.onKeyDown},isDisabled:p,isFocused:y}),this.renderLiveRegion(),E.createElement(a,Kt({},_,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:p,isFocused:y,menuIsOpen:m}),E.createElement(l,Kt({},_,{isDisabled:p}),this.renderPlaceholderOrValue(),this.renderInput()),E.createElement(s,Kt({},_,{isDisabled:p}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,a){var s=a.prevProps,o=a.clearFocusValueOnUpdate,l=a.inputIsHiddenAfterUpdate,u=a.ariaSelection,d=a.isFocused,f=a.prevWasFocused,p=a.instancePrefix,m=i.options,y=i.value,_=i.menuIsOpen,v=i.inputValue,w=i.isMulti,M=cO(y),C={};if(s&&(y!==s.value||m!==s.options||_!==s.menuIsOpen||v!==s.inputValue)){var N=_?bte(i,M):[],P=_?EO(dw(i,M),"".concat(p,"-option")):[],R=o?_te(a,M):null,k=wte(a,N),U=pM(P,k);C={selectValue:M,focusedOption:k,focusedOptionId:U,focusableOptionsWithIds:P,focusedValue:R,clearFocusValueOnUpdate:!1}}var I=l!=null&&i!==s?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},L=u,z=d&&f;return d&&!z&&(L={value:kb(w,M,M[0]||null),options:M,action:"initial-input-focus"},z=!f),u?.action==="initial-input-focus"&&(L=null),tn(tn(tn({},C),I),{},{prevProps:i,ariaSelection:L,prevWasFocused:z})}}]),n})(E.Component);f6.defaultProps=xte;var Ete=E.forwardRef(function(t,e){var n=cZ(t);return E.createElement(f6,Kt({ref:e},n))}),Mte=Ete;const Cte={container:t=>({...t,minWidth:"220px"}),control:(t,e)=>({...t,backgroundColor:"rgba(255, 255, 255, 0.1)",borderColor:e.isFocused?"#3b82f6":"rgba(255, 255, 255, 0.2)",borderRadius:"0.25rem",minHeight:"34px",boxShadow:e.isFocused?"0 0 0 1px #3b82f6":"none",cursor:"pointer","&:hover":{borderColor:"#3b82f6"}}),valueContainer:t=>({...t,padding:"0 8px"}),input:t=>({...t,color:"white",margin:0,padding:0}),singleValue:t=>({...t,color:"white",overflow:"visible",textOverflow:"clip"}),placeholder:t=>({...t,color:"rgba(255, 255, 255, 0.5)"}),menu:t=>({...t,backgroundColor:"#1f2937",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"0.25rem",zIndex:9999,minWidth:"280px",width:"max-content",maxWidth:"400px"}),menuList:t=>({...t,maxHeight:"250px",padding:0}),option:(t,e)=>({...t,backgroundColor:e.isSelected?"#3b82f6":e.isFocused?"rgba(59, 130, 246, 0.3)":"transparent",color:"white",cursor:"pointer",padding:"10px 14px",whiteSpace:"nowrap","&:active":{backgroundColor:"#3b82f6"}}),noOptionsMessage:t=>({...t,color:"rgba(255, 255, 255, 0.5)"}),dropdownIndicator:(t,e)=>({...t,color:"rgba(255, 255, 255, 0.5)",padding:"4px",transform:e.selectProps.menuIsOpen?"rotate(180deg)":null,transition:"transform 0.2s ease","&:hover":{color:"white"}}),clearIndicator:t=>({...t,color:"rgba(255, 255, 255, 0.5)",padding:"4px","&:hover":{color:"white"}}),indicatorSeparator:t=>({...t,backgroundColor:"rgba(255, 255, 255, 0.2)"}),multiValue:t=>({...t,backgroundColor:"rgba(59, 130, 246, 0.3)",borderRadius:"4px"}),multiValueLabel:t=>({...t,color:"white",padding:"2px 6px"}),multiValueRemove:t=>({...t,color:"rgba(255, 255, 255, 0.7)",cursor:"pointer","&:hover":{backgroundColor:"rgba(239, 68, 68, 0.5)",color:"white"}})};function _o({options:t,value:e,onChange:n,placeholder:r="-- Select --",isClearable:i=!0,isMulti:a=!1,className:s=""}){let o;a?e&&typeof e=="string"?o=e.split(",").map(d=>d.trim()).filter(d=>d).map(d=>t.find(f=>f.value===d)).filter(Boolean):o=[]:o=e?t.find(u=>u.value===e):null;const l=u=>{if(a){const d=u?u.map(f=>f.value).join(", "):"";n(d)}else n(u?u.value:"")};return c.jsx(Mte,{options:t,value:o,onChange:l,placeholder:r,isClearable:i,isSearchable:!0,isMulti:a,styles:Cte,className:s,classNamePrefix:"searchable-select",noOptionsMessage:()=>"No matches found",menuPlacement:"auto",closeMenuOnSelect:!a})}const h6=["[REDACTED]","Abandoned","Abandoned Crucible","Abandoned Paradise","Acidic","Acrid","Airless","Arctic","Arid","Ash-shrouded","Ashen","Azure","Barren","Basalt","Bladed","Bleached Ruin","Bleak","Blighted","Blood","Boggy","Boiling","Boiling Doom","Bountiful","Breached","Bubbling","Cabled","Calcified","Capped","Caustic","Caustic Nightmare","Cerulean","Charred","Chromatic Fog","Claimed By Decay","Cloudy","Columned","Contaminated","Contoured","Corrosive","Crimson","Damp","Dead","Deathly Green Anomaly","Decaying Nuclear","Decaying Ruin","Desert","Desolate","Doomed","Doomed Jade","Drowning","Dusty","Empty","Endless","Endless Morass","Endless Seas","Erased","Erupting","Exotic","Fiery","Fiery Dreadworld","Finned","Fissured","Flame-Ruptured","Flourishing","Foaming","Foggy","Forsaken","Fractured","Fragmented","Freezing","Frostbound","Frothing","Frozen","Frozen Anomaly","Frozen Hell","Frozen Mists","Frozen Relic","Fungal","Gamma Intensive","Gas Giant","Glacial","Grassy","Harsh Blue Globe","Haunted Emeril","Hazardous Moisture","Hazy","Hexagonal","Hiemal","High Energy","High Radio Source","High Temperature","Hot","Humid","Hyperborean","Icebound","Icy","Icy Abhorrence","Icy Ruin","Imminent Core Detonation","Incandescent","Infected Dustbowl","Infested","Infested Paradise","Irradiated","Isotopic","Lava","Life-Incompatible","Lifeless","Lost Blue","Lost Green","Lost Red","Lost To Fire","Low Atmosphere","Lush","Magma","Malfunctioning","Marshy","Mechanical","Metallic","Metallurgic","Miasmatic","Misty","Molten","Murky","Mutated","Mutating Relic","Noxious","Nuclear","Obsidian Bead","Of Light","Ossified","Overgrown","Overgrown Relic","Paradise","Parched","Petrified","Pillared","Planetary Anomaly","Plated","Poisonous","Quagmire","Radioactive","Radioactive Abomination","Rainy","Rattling","Reeking","Rocky","Rotting","Ruined","Ruined Dustbowl","Scalding","Scaly","Scarlet","Scorched","Scorched Relic","Sharded","Shattered","Shell-Strewn","Skeletal","Spined","Sporal","Stellar Corruption","Sub-Zero","Supercritical","Swamp","Tainted","Tectonic","Temperate","Temporary","Terraforming Catastrophe","Terrorsphere","The Nest","Thirsty","Torrid","Toxic","Toxic Anomaly","Toxic Horror","Tropical","Ultramarine","Unstable","Vapour","Verdant","Vermillion Globe","Vile Anomaly","Violent","Viridescent","Volcanic","Webbed","Wind-Swept","Wine Dark","Worm-Ridden","Xeno-Colony"].sort((t,e)=>t.localeCompare(e)),p6=["[REDACTED]","Absent","Acid Rain","Acidic Deluges","Acidic Dust","Acidic Dust Pockets","Airless","Alkaline Cloudbursts","Alkaline Rain","Alkaline Storms","All-Consuming Cold","All-Consuming Fog","Angered Clouds","Anomalous","Arid","Ash Plumes","Ashen Destruction","Atmospheric Corruption","Atmospheric Heat Instabilities","Azure Storms","Baked","Balmy","Basalt Hail","Beautiful","Bilious Storms","Billowing Dust Storms","Blasted Atmosphere","Blazed","Blissful","Blistering Damp","Blistering Floods","Blizzard","Blood Rain","Boiling Catastrophe","Boiling Monsoons","Boiling Puddles","Boiling Superstorms","Bone-Stripping Acid Storms","Broiling Humidity","Burning","Burning Air","Burning Crimson","Burning Gas Clouds","Carmine Winds","Cataclysmic Monsoons","Caustic Dust","Caustic Floods","Caustic Moisture","Caustic Winds","Ceaseless Drought","Choking Ash","Choking Clouds","Choking Humidity","Choking Sandstorms","Cinderfalls","Clammy Menace","Clear","Clouds of Fire","Clouds of Haunted Green","Coastal Storms","Cold","Colossal Firestorms","Combustible Dust","Constant Pressure Storms","Contaminated","Contaminated Puddles","Contaminated Squalls","Corrosive Cyclones","Corrosive Damp","Corrosive Rainstorms","Corrosive Sleet Storms","Corrosive Storms","Corrupted Blood","Crimson Heat","Crisp","Damp","Damp Misery","Dangerously Hot","Dangerously Hot Fog","Dangerously Toxic Rain","Dead Wastes","Deadly Pressure Variations","Death Fog","Deep Freeze","Dehydrated","Deluge","Desiccated","Desolate","Direct Sunlight","Downpours","Drifting Firestorms","Drifting Snowstorms","Drizzle","Droughty","Dry Gusts","Dust-Choked Winds","Echoes of Acid","Eerily Calm","Electric Rain","Elevated Radioactivity","Emollient","Energetic Storms","Enormous Nuclear Storms","Enveloping Ash","Explosive Gas Eruptions","Extreme Acidity","Extreme Atmospheric Decay","Extreme Cold","Extreme Contamination","Extreme Heat","Extreme Low Pressure","Extreme Nuclear Decay","Extreme Radioactivity","Extreme Thermonuclear Fog","Extreme Toxicity","Extreme Wind Blasting","Extreme Winds","Fair","Fevered Clouds","Fine","Firestorms","Flaming Hail","Freezing","Freezing Night Winds","Freezing Rain","Frequent Blizzards","Frequent Firestorms","Frequent Particle Eruptions","Frequent Toxic Floods","Frigid","Frost","Frozen","Frozen Clouds","Frozen Mists","Gamma Cyclones","Gamma Dust","Gas Clouds","Gas Storms","Gelid","Gentle Mist","Glacial","Harmful Rain","Harsh Toxic Wind","Harsh Winds","Harsh, Icy Winds","Haunted Frost","Hazardous Moisture","Hazardous Temperature Extremes","Hazardous Whiteouts","Heated","Heated Atmosphere","Heated Gas Pockets","Heavily Toxic Rain","Heavy Rain","High Energy","Highly Variable Temperatures","Hot","Howling Blizzards","Howling Gales","Humid","Ice Storms","Icebound","Icy","Icy Blasts","Icy Nights","Icy Tempests","Incendiary Dust","Incendiary Winds","Indetectable Burning","Inert","Inescapeable Toxins","Inferno","Inferno Winds","Infinite Toxic Mist","Infrequent Blizzards","Infrequent Dust Storms","Infrequent Heat Storms","Infrequent Torrents","Infrequent Toxic Drizzle","Intense Cold","Intense Dust","Intense Heat","Intense Heatbursts","Intense Rainfall","Intermittent Wind Blasting","Internal Rain","Inverted Superstorms","Invisible Jade Winds","Invisible Mist","Irradiated","Irradiated Downpours","Irradiated Storms","Irradiated Thunderstorms","Irradiated Winds","Lethal Ash Storms","Lethal Atmosphere","Lethal Humidity Outbreaks","Light Showers","Liquid Hell","Lost Clouds","Lung-Burning Night Wind","Magma Geysers","Magma Rain","Mellow","Memories of Frost","Migratory Blizzards","Mild","Mild Rain","Mists of Annihilation","Moderate","Moistureless","Molten Rain","Monsoon","Mostly Calm","Muggy Haze","No Atmosphere","Noxious Gas Storms","Noxious Gases","Nuclear Emission","Nuclidic Atmosphere","Obsidian Doom","Obsidian Heat","Occasional Acid Storms","Occasional Ash Storms","Occasional Boiling Fog","Occasional Firestorms","Occasional Radiation Outbursts","Occasional Sandstorms","Occasional Scalding Cloudbursts","Occasional Snowfall","Oppressive","Outbreaks of Frozen Rain","Overly Warm","Painful Mist","Painfully Hot Rain","Parched","Parched Sands","Particulate Winds","Passing Toxic Fronts","Peaceful","Peaceful Climate","Perfectly Clear","Permafrost","Pillars of Flame","Planetwide Desiccation","Planetwide Maelstrom","Planetwide Radiation Storms","Pleasant","Plumes of Fire","Poison Cyclones","Poison Flurries","Poison Rain","Poisonous Dust","Poisonous Gas","Pouring Rain","Pouring Toxic Rain","Powder Snow","Radioactive","Radioactive Damp","Radioactive Decay","Radioactive Dust Storms","Radioactive Humidity","Radioactive Storms","Radioactivity","Raging Snowstorms","Rain of Atlas","Rainstorms","Rare Firestorms","Reactive","Reactive Dust","Reactive Rain","Red Mist","Refreshing Breeze","Roaring Ice Storms","Roaring Nuclear Wind","Sand Blizzards","Sandstorms","Scalding Heat","Scalding Rainstorms","Scarlet Rain","Scorched","Self-Igniting Storm","Silent","Smothering Ash","Smouldering","Snow","Snowfall","Snowstorms","Snowy","Soggy Danger","Sporadic Grit Storms","Sterile","Sticky Heat","Stinging Atmosphere","Stinging Puddles","Storms of Desolation","Sulfur Fumes","Sulphurous Haze","Sulphurous Inferno","Sunny","Supercooled Storms","Superheated Air","Superheated Drizzle","Superheated Gas Pockets","Superheated Mists","Superheated Rain","Sweltering","Sweltering Damp","Tectonic Storms","Temperate","Tempered","Temperate Murk","Tepid Damp","Thirsty Clouds","Torrential Acid","Torrential Heat","Torrential Rain","Torrid Deluges","Toxic Clouds","Toxic Damp","Toxic Dust","Toxic Horror","Toxic Monsoons","Toxic Outbreaks","Toxic Rain","Toxic Superstorms","Tropical Storms","Ultramarine Wind","Unclouded Skies","Unending Sunlight","Unfathomable Storms","Unimaginable Blue","Unpredictable Conflagrations","Unstable","Unstable Atmosphere","Unstable Fog","Unusually Mild","Usually Mild","Utterly Still","Vermillion Storms","Volatile","Volatile Dust Storms","Volatile Storms","Volatile Winds","Volatile Windstorms","Walls of Flame","Wandering Frosts","Wandering Hot Spots","Warm","Warm Dewdrops","Wet","Whiteout","Wind","Winds From Beyond","Winds of Glass","Wintry","Withered"].sort((t,e)=>t.localeCompare(e)),m6=["Absent","Aggressive","Answer To None","Attentive","Corrupted","De-Harmonised","Dissonant","Enforcing","Ever-Present","Few","Forsaken","Frenzied","Frequent","Hateful","High Security","Hostile Patrols","Inescapable","Infrequent","Intermittent","Irregular Patrols","Isolated","Limited","Low","Low Security","Malicious","Minimal","Missing","None","None Present","Normal","Not Present","Observant","Rebellious","Regular Patrols","Remote","Require Obedience","Require Orthodoxy","Sharded from the Atlas","Sparse","Spread Thin","Threatening","Unwavering","Zealous"].sort((t,e)=>t.localeCompare(e)),g6=["Absent","Abundant","Ample","Average","Barren","Between Worlds","Bountiful","Common","Copious","Deficient","Devoid","Diseased","Displaced","Empty","Fair","Few","Forfeited","Frequent","From Elsewhere","Full","Generous","High","Infected","Infrequent","Intermittent","Invasive","Lacking","Limited","Lost","Low","Lush","Medium","Misplaced","Moderate","None","Nonexistent","Not Present","Numerous","Occasional","Ordinary","Rare","Regular","Rich","Scarse","Screaming","Sparse","Sporadic","Typical","Twisted","Uncommon","Undetected","Unusual","Uprooted","Viral"].sort((t,e)=>t.localeCompare(e)),v6=["Absent","Abundant","Ample","Average","Barren","Between Worlds","Bountiful","Common","Copious","Deficient","Devoid","Diseased","Displaced","Empty","Fair","Few","Forfeited","Frequent","From Elsewhere","Full","Generous","High","Infected","Infrequent","Intermittent","Invasive","Lacking","Limited","Lost","Low","Medium","Misplaced","Moderate","None","Nonexistent","Not Present","Numerous","Occasional","Ordinary","Rare","Regular","Rich","Scarse","Screaming","Sparse","Sporadic","Synthetic","Typical","Twisted","Uncommon","Undetected","Unusual","Uprooted","Viral"].sort((t,e)=>t.localeCompare(e)),y6=["Activated Cadmium","Activated Copper","Activated Emeril","Activated Indium","Activated Quartzite","Ammonia","Ancestral Memories","Atlantideum","Basalt","Cactus Flesh","Cadmium","Carbon","Chlorine","Chromatic Metal","Cobalt","Condensed Carbon","Copper","Crystallised Helium","Cursed Dust","Cyto-Phosphate","Deuterium","Di-hydrogen","Dioxite","Emeril","Faecium","Ferrite Dust","Fragmented Qualia","Frost Crystal","Fungal Mould","Gamma Root","Gold","Hexite","Indium","Ionised Cobalt","Kelp Sac","Liquid Sun","Lithium","Living Slime","Magnetised Ferrite","Marrow Bulb","Methane","Mordite","Nitrogen","Oxygen","Paraffinium","Phosphorus","Platinum","Polished Stone","Pugneum","Pure Ferrite","Pyrite","Quartzite","Radon","Residual Goop","Runaway Mould","Rusted Metal","Salt","Shattered Qualia","Silicate Powder","Silver","Sodium","Sodium Nitrate","Solanium","Somnal Dust","Star Bulb","Sulphurine","Tainted Metal","Tritium","Uranium","Viscous Fluids","Void Mote","Ancient Bones","Salvageable Scrap","Storm Crystals","Albumen Pearl","Vortex Cube","Submerged Relic","Gravitino Ball","Sac Venom","Larval Core","Living Pearl","Crystal Sulphide","Hadal Core","Hypnotic Eye","Bubble Cluster","Cable Pod","Calcishroom","Capillary Shell","Electric Cube","Glitching Separator","Hexplate Bush","Light Fissure","Ossified Star","Rattle Spine","Terbium Growth","Quad Servo","Walker Brain","Hyaline Brain","Salvaged Data","Geode","Gold Nugget","Crystal Fragment","Echo Seed","Tritium Hypercluster"].sort((t,e)=>t.localeCompare(e)),il=t=>t.map(e=>({value:e,label:e})),Nte=il(h6),Ate=il(p6),Tte=il(m6),Pte=il(g6),Rte=il(v6),Dte=il(y6);function CO({moon:t,index:e,onChange:n,onRemove:r,onSave:i}){const[a,s]=E.useState(!1);function o(u,d){const f={...t,[u]:d};n(e,f)}async function l(u){s(!0);try{const d=u.target.files[0];if(!d)return;const f=await xz(d);o("photo",f.path)}catch(d){alert("Upload failed: "+d)}s(!1)}return c.jsxs("div",{className:"p-2 border rounded my-2 bg-white/5",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Moon Name"}),c.jsx("input",{placeholder:"Moon name",className:"mt-1 p-1 rounded w-full",value:t.name||"",onChange:u=>o("name",u.target.value)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Biome"}),c.jsx("div",{className:"mt-1",children:c.jsx(_o,{options:Nte,value:t.biome||"",onChange:u=>o("biome",u),placeholder:"Search biome..."})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Weather"}),c.jsx("div",{className:"mt-1",children:c.jsx(_o,{options:Ate,value:t.weather||"",onChange:u=>o("weather",u),placeholder:"Search weather..."})})]})]}),c.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Sentinels"}),c.jsx("div",{className:"mt-1",children:c.jsx(_o,{options:Tte,value:t.sentinel||"",onChange:u=>o("sentinel",u),placeholder:"Search sentinels..."})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Flora"}),c.jsx("div",{className:"mt-1",children:c.jsx(_o,{options:Pte,value:t.flora||"",onChange:u=>o("flora",u),placeholder:"Search flora..."})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Fauna"}),c.jsx("div",{className:"mt-1",children:c.jsx(_o,{options:Rte,value:t.fauna||"",onChange:u=>o("fauna",u),placeholder:"Search fauna..."})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Materials"}),c.jsx("div",{className:"mt-1",children:c.jsx(_o,{options:Dte,value:t.materials||"",onChange:u=>o("materials",u),placeholder:"Search resources...",isMulti:!0})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Notes"}),c.jsx("input",{placeholder:"Optional notes",className:"mt-1 p-1 rounded w-full",value:t.notes||"",onChange:u=>o("notes",u.target.value)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Photo"}),c.jsx("input",{"aria-label":"Moon Photo",type:"file",onChange:l,className:"mt-1"}),a&&c.jsx("div",{className:"muted text-sm mt-1",children:"Uploading..."}),!a&&t.photo&&c.jsxs("div",{className:"mt-2 relative inline-block group",children:[c.jsx("img",{src:t.photo.startsWith("http")?t.photo:`/haven-ui-photos/${t.photo.replace(/^photos[\\/]/,"").split(/[\\/]/).pop()}`,alt:"Moon photo",className:"max-w-full sm:max-w-xs max-h-32 rounded border border-gray-600"}),c.jsx("button",{type:"button",onClick:()=>o("photo",null),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center text-sm font-bold",title:"Remove photo",children:"X"}),c.jsx("div",{className:"text-xs text-gray-400 mt-1 break-all",children:t.photo})]})]})]}),c.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[c.jsx("div",{children:i&&c.jsx("button",{type:"button",onClick:()=>i(t),className:"px-3 py-1.5 bg-blue-600 rounded text-sm",children:"Save"})}),c.jsx("button",{type:"button",onClick:()=>r(e),className:"px-3 py-1.5 bg-red-600 rounded text-sm",children:"Remove Moon"})]})]})}const kte=il(h6),jte=il(p6),Ote=il(m6),Ite=il(g6),Lte=il(v6),Fte=il(y6);function NO({planet:t,index:e,onChange:n,onRemove:r,onSave:i}){const[a,s]=E.useState(!1),[o,l]=E.useState(!1),[u,d]=E.useState(null),[f,p]=E.useState(null);function m(N,P){const R={...t,[N]:P};n(e,R)}function y(){d(-1),p({name:"",biome:"",weather:"",sentinel:"None",fauna:"N/A",flora:"N/A",materials:"",notes:"",photo:null}),l(!0)}function _(N,P){const R=[...t.moons||[]];R[N]=P,m("moons",R)}function v(N){const P=[...t.moons||[]];P.splice(N,1),m("moons",P)}function w(N){d(N),p(t.moons[N]),l(!0)}function M(N){const P=[...t.moons||[]];u===-1?P.push(N):P[u]=N,m("moons",P),l(!1)}async function C(N){s(!0);try{const P=N.target.files[0];if(!P)return;const R=await xz(P);m("photo",R.path)}catch(P){alert("Upload failed: "+P)}s(!1)}return c.jsxs("div",{className:"p-3 my-3 border rounded bg-white/5",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Planet Name"}),c.jsx("input",{className:"mt-1 p-1 rounded w-full",value:t.name||"",onChange:N=>m("name",N.target.value),placeholder:"Planet name"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Biome"}),c.jsx("div",{className:"mt-1",children:c.jsx(_o,{options:kte,value:t.biome||"",onChange:N=>m("biome",N),placeholder:"Search biome..."})})]}),c.jsxs("div",{className:"sm:col-span-2 lg:col-span-1",children:[c.jsx("label",{className:"block text-sm",children:"Weather"}),c.jsx("div",{className:"mt-1",children:c.jsx(_o,{options:jte,value:t.weather||"",onChange:N=>m("weather",N),placeholder:"Search weather..."})})]})]}),c.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Sentinels"}),c.jsx("div",{className:"mt-1",children:c.jsx(_o,{options:Ote,value:t.sentinel||"",onChange:N=>m("sentinel",N),placeholder:"Search sentinels..."})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Flora"}),c.jsx("div",{className:"mt-1",children:c.jsx(_o,{options:Ite,value:t.flora||"",onChange:N=>m("flora",N),placeholder:"Search flora..."})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Fauna"}),c.jsx("div",{className:"mt-1",children:c.jsx(_o,{options:Lte,value:t.fauna||"",onChange:N=>m("fauna",N),placeholder:"Search fauna..."})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Resources / Materials"}),c.jsx("div",{className:"mt-1",children:c.jsx(_o,{options:Fte,value:t.materials||"",onChange:N=>m("materials",N),placeholder:"Search resources...",isMulti:!0})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Base Location"}),c.jsx("input",{"aria-label":"Planet Base",placeholder:"Base location",className:"mt-1 p-1 rounded w-full",value:t.base_location||"",onChange:N=>m("base_location",N.target.value)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Photo"}),c.jsx("input",{"aria-label":"Planet Photo",type:"file",onChange:C,className:"mt-1"}),a&&c.jsx("div",{className:"muted text-sm mt-1",children:"Uploading..."}),!a&&t.photo&&c.jsxs("div",{className:"mt-2 relative inline-block group",children:[c.jsx("img",{src:t.photo.startsWith("http")?t.photo:`/haven-ui-photos/${t.photo.replace(/^photos[\\/]/,"").split(/[\\/]/).pop()}`,alt:"Planet photo",className:"max-w-full sm:max-w-xs max-h-32 rounded border border-gray-600"}),c.jsx("button",{type:"button",onClick:()=>m("photo",null),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center text-sm font-bold",title:"Remove photo",children:"X"}),c.jsx("div",{className:"text-xs text-gray-400 mt-1 break-all",children:t.photo})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm",children:"Notes"}),c.jsx("input",{placeholder:"Notes",className:"mt-1 p-1 rounded w-full",value:t.notes||"",onChange:N=>m("notes",N.target.value)})]})]}),c.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[c.jsx("button",{type:"button",onClick:y,className:"px-3 py-1.5 bg-green-600 rounded text-sm",children:" Add Moon"}),c.jsx("button",{type:"button",onClick:()=>r(e),className:"px-3 py-1.5 bg-red-600 rounded text-sm",children:"Remove Planet"}),i&&c.jsx("button",{type:"button",onClick:()=>i(t),className:"px-3 py-1.5 bg-blue-600 rounded text-sm",children:"Save"})]}),c.jsx("div",{className:"mt-3",children:(t.moons||[]).map((N,P)=>c.jsxs("div",{children:[c.jsx(CO,{index:P,moon:N,onChange:_,onRemove:v}),c.jsx("div",{className:"mt-1",children:c.jsx("button",{type:"button",onClick:()=>w(P),className:"px-2 py-1 bg-sky-600 text-white rounded",children:"Edit Moon"})})]},P))}),o&&c.jsx(Tr,{title:u===-1?"Add Moon":"Edit Moon",onClose:()=>l(!1),children:c.jsx(CO,{moon:f,index:u,onChange:(N,P)=>p(P),onSave:M,onRemove:()=>{l(!1)}})})]})}const Ute=({value:t,onChange:e,onDecoded:n})=>{const[r,i]=E.useState(t||""),[a,s]=E.useState([]),[o,l]=E.useState({}),[u,d]=E.useState("visual"),[f,p]=E.useState({valid:null,message:null}),[m,y]=E.useState(null),[_,v]=E.useState(!1);E.useEffect(()=>{qe.get("/api/glyph_images").then(I=>{l(I.data)}).catch(I=>{console.error("Failed to load glyph images:",I)})},[]),E.useEffect(()=>{t&&t!==r&&(i(t),s(t.split("")))},[t]),E.useEffect(()=>{e&&e(r)},[r,e]),E.useEffect(()=>{r.length===12?w(r):(y(null),p({valid:null,message:null}))},[r]);const w=async I=>{v(!0);try{const L=await qe.post("/api/validate_glyph",{glyph:I});if(!L.data.valid){p({valid:!1,message:L.data.error}),y(null),v(!1);return}const z=await qe.post("/api/decode_glyph",{glyph:I,apply_scale:!1});y(z.data);const O=[];L.data.warning&&O.push(L.data.warning),z.data.warnings&&O.push(z.data.warnings),p({valid:!0,message:O.length>0?O.join("; "):null}),n&&n(z.data)}catch(L){p({valid:!1,message:L.response?.data?.detail||"Failed to decode glyph"}),y(null)}v(!1)},M=I=>{if(a.length<12){const L=[...a,I];s(L),i(L.join(""))}},C=()=>{if(a.length>0){const I=a.slice(0,-1);s(I),i(I.join(""))}},N=()=>{s([]),i(""),y(null),p({valid:null,message:null})},P=I=>{const L=I.target.value.toUpperCase().replace(/[^0-9A-F]/g,"").slice(0,12);i(L),s(L.split(""))},R=I=>I?I.length===12?`${I[0]}-${I.slice(1,4)}-${I.slice(4,6)}-${I.slice(6,9)}-${I.slice(9,12)}`:I:"",k=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],U={0:"Sunset",1:"Bird",2:"Face",3:"Diplo",4:"Eclipse",5:"Balloon",6:"Boat",7:"Bug",8:"Dragonfly",9:"Galaxy",A:"Voxel",B:"Fish",C:"Tent",D:"Rocket",E:"Tree",F:"Atlas"};return c.jsxs("div",{className:"glyph-picker bg-gray-900 p-4 rounded-lg border border-purple-500",children:[c.jsxs("div",{className:"flex gap-2 mb-4",children:[c.jsx("button",{type:"button",onClick:()=>d("visual"),className:`px-4 py-2 rounded ${u==="visual"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Visual Picker"}),c.jsx("button",{type:"button",onClick:()=>d("text"),className:`px-4 py-2 rounded ${u==="text"?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Text Input"})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-purple-300 mb-2",children:"Portal Glyph Code (12 digits)"}),c.jsx("div",{className:"bg-gray-800 p-3 rounded border border-gray-700 font-mono text-xl text-center",children:r.length>0?c.jsx("span",{className:f.valid===!1?"text-red-400":"text-green-400",children:R(r)}):c.jsx("span",{className:"text-gray-500",children:"Enter or select glyphs..."})}),c.jsxs("div",{className:"text-xs text-gray-400 mt-1 text-center",children:[r.length,"/12 digits"]})]}),u==="visual"&&c.jsxs("div",{children:[c.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-2 sm:gap-2 mb-4",children:k.map(I=>c.jsxs("button",{type:"button",onClick:()=>M(I),disabled:a.length>=12,className:"relative aspect-square border-2 border-purple-500 rounded hover:border-purple-300 hover:bg-purple-900/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden bg-gray-800",title:`${U[I]} (${I})`,children:[o[I]?c.jsx("img",{src:`/haven-ui-photos/${o[I]}`,alt:U[I],className:"w-full h-full object-contain p-1 sm:p-1 pb-4 sm:pb-4"}):c.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-purple-300 font-mono text-2xl sm:text-lg pb-4",children:I}),c.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/80 text-[10px] sm:text-xs text-purple-300 py-0.5 text-center font-mono",children:I})]},I))}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{type:"button",onClick:C,disabled:a.length===0,className:"flex-1 px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Backspace"}),c.jsx("button",{type:"button",onClick:N,disabled:a.length===0,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear All"})]})]}),u==="text"&&c.jsxs("div",{children:[c.jsx("input",{type:"text",value:r,onChange:P,placeholder:"Paste 12-digit hex code (e.g., 10A4F3E7B2C1)",className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded text-white font-mono uppercase focus:border-purple-500 focus:outline-none",maxLength:12}),c.jsx("button",{type:"button",onClick:N,className:"w-full mt-2 px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded",children:"Clear"})]}),f.message&&c.jsxs("div",{className:`mt-4 p-3 rounded ${f.valid===!1?"bg-red-900/50 border border-red-500 text-red-300":"bg-yellow-900/50 border border-yellow-500 text-yellow-300"}`,children:[c.jsx("div",{className:"font-semibold mb-1",children:f.valid===!1?" Invalid Glyph":" Warning"}),c.jsx("div",{className:"text-sm",children:f.message})]}),_&&c.jsx("div",{className:"mt-4 p-3 bg-gray-800 rounded border border-purple-500 text-center text-purple-300",children:"Decoding glyph..."}),m&&!_&&c.jsxs("div",{className:`mt-4 p-3 rounded border ${m.is_phantom||m.is_in_core?"bg-orange-900/30 border-orange-500":"bg-green-900/30 border-green-500"}`,children:[c.jsx("div",{className:"font-semibold mb-2 flex items-center gap-2",children:m.is_phantom||m.is_in_core?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"text-orange-300",children:" Decoded Coordinates"}),m.is_phantom&&c.jsx("span",{className:"text-xs bg-purple-600 text-white px-2 py-0.5 rounded",title:"Phantom Star - Not normally accessible on Galactic Map",children:" PHANTOM"}),m.is_in_core&&c.jsx("span",{className:"text-xs bg-red-600 text-white px-2 py-0.5 rounded",title:"Located in Galactic Core Void",children:" CORE"})]}):c.jsx("span",{className:"text-green-300",children:" Decoded Coordinates"})}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-gray-300",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"X:"})," ",c.jsx("span",{className:`font-mono ${m.is_phantom||m.is_in_core?"text-orange-300":"text-green-300"}`,children:m.x})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Y:"})," ",c.jsx("span",{className:`font-mono ${m.is_phantom||m.is_in_core?"text-orange-300":"text-green-300"}`,children:m.y})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Z:"})," ",c.jsx("span",{className:`font-mono ${m.is_phantom||m.is_in_core?"text-orange-300":"text-green-300"}`,children:m.z})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Planet:"})," ",c.jsx("span",{className:`font-mono ${m.is_phantom||m.is_in_core?"text-orange-300":"text-green-300"}`,children:m.planet})]}),c.jsxs("div",{className:"col-span-2",children:[c.jsx("span",{className:"text-gray-400",children:"Region:"})," ",c.jsxs("span",{className:`font-mono ${m.is_phantom||m.is_in_core?"text-orange-300":"text-green-300"}`,children:["[",m.region_x,", ",m.region_y,", ",m.region_z,"]"]})]}),c.jsxs("div",{className:"col-span-2",children:[c.jsx("span",{className:"text-gray-400",children:"Solar System Index:"})," ",c.jsxs("span",{className:`font-mono ${m.is_phantom||m.is_in_core?"text-orange-300":"text-green-300"}`,children:[m.solar_system," (0x",m.solar_system?.toString(16).toUpperCase().padStart(3,"0"),")"]})]})]}),(m.is_phantom||m.is_in_core)&&c.jsxs("div",{className:"mt-3 pt-3 border-t border-orange-700 text-xs text-orange-200",children:[c.jsx("strong",{children:"Classification:"})," ",m.classification?.replace("_"," ").toUpperCase(),c.jsx("div",{className:"mt-1 text-orange-300/80",children:"This system will be recorded for tracking purposes but may not appear on standard maps."})]}),m.star_x!==void 0&&c.jsxs("div",{className:`mt-3 pt-3 border-t ${m.is_phantom||m.is_in_core?"border-orange-700":"border-green-700"}`,children:[c.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"3D Map Position (calculated from region + SSS):"}),c.jsxs("div",{className:"font-mono text-xs text-cyan-300",children:["(",m.star_x?.toFixed(2),", ",m.star_y?.toFixed(2),", ",m.star_z?.toFixed(2),")"]})]})]})]})},W0={STATION_TO_SUN:1.5,ORBITAL_BUFFER:3};function x6(t,e,n){return Math.sqrt(t*t+e*e+n*n)}function Bte(t){const e=x6(t.x||0,t.y||0,t.z||0);let n=0;if(t.moons&&Array.isArray(t.moons))for(const r of t.moons){const i=r.orbit_radius||r.orbit_distance||.5;n=Math.max(n,i)}return{name:t.name,innerEdge:Math.max(0,e-n-W0.ORBITAL_BUFFER),center:e,outerEdge:e+n+W0.ORBITAL_BUFFER}}function zte(t){if(t.length===0)return[{min:W0.STATION_TO_SUN+2,max:40}];const e=t.map(Bte);e.sort((a,s)=>a.center-s.center);const n=[],r=e[0].innerEdge;r>W0.STATION_TO_SUN+2&&n.push({min:W0.STATION_TO_SUN+2,max:r-1,label:"Inner system (before first planet)"});for(let a=0;a<e.length-1;a++){const s=e[a].outerEdge,o=e[a+1].innerEdge;o-s>=2&&n.push({min:s+.5,max:o-.5,label:`Between ${e[a].name} and ${e[a+1].name}`})}const i=e[e.length-1].outerEdge;return n.push({min:i+1,max:i+15,label:"Outer system (beyond last planet)"}),n}function Hte(t=[],e=[],n={}){const{preferredSlot:r="outer",fixedAngle:i=null}=n,a=zte(t);if(console.log(`[Station Placement] Found ${a.length} safe orbital slots:`),a.forEach((m,y)=>{console.log(`  ${y+1}. ${m.label}: ${m.min.toFixed(1)} - ${m.max.toFixed(1)} units`)}),a.length===0)return console.warn("[Station Placement] No safe slots found, using fallback"),{x:10,y:0,z:0,orbitalRadius:10,slot:"fallback",fallback:!0};let s;r==="inner"&&a.length>0?s=a[0]:r==="largest"?s=a.reduce((m,y)=>{const _=y.max-y.min,v=m.max-m.min;return _>v?y:m},a[0]):s=a[a.length-1],console.log(`[Station Placement] Selected slot: ${s.label}`);const o=(s.min+s.max)/2;let l;if(i!==null)l=i*Math.PI/180;else{l=Math.random()*Math.PI*2;for(const m of e){const y=x6(m.x,m.y,m.z);if(Math.abs(y-o)<5){const _=Math.atan2(m.z,m.x);Math.abs(l-_)<Math.PI/4&&(l=(l+Math.PI)%(Math.PI*2))}}}const u=(Math.random()-.5)*.2,d=o*Math.cos(u)*Math.cos(l),f=o*Math.sin(u),p=o*Math.cos(u)*Math.sin(l);return console.log(`[Station Placement]  Position: (${d.toFixed(2)}, ${f.toFixed(2)}, ${p.toFixed(2)})`),console.log(`[Station Placement] Orbital radius: ${o.toFixed(2)} units`),{x:parseFloat(d.toFixed(2)),y:parseFloat(f.toFixed(2)),z:parseFloat(p.toFixed(2)),orbitalRadius:parseFloat(o.toFixed(2)),slot:s.label,fallback:!1}}const Vte=[{index:0,name:"Euclid"},{index:1,name:"Hilbert Dimension"},{index:2,name:"Calypso"},{index:3,name:"Hesperius Dimension"},{index:4,name:"Hyades"},{index:5,name:"Ickjamatew"},{index:6,name:"Budullangr"},{index:7,name:"Kikolgallr"},{index:8,name:"Eltiensleen"},{index:9,name:"Eissentam"},{index:10,name:"Elkupalos"},{index:11,name:"Aptarkaba"},{index:12,name:"Ontiniangp"},{index:13,name:"Odiwagiri"},{index:14,name:"Ogtialabi"},{index:15,name:"Muhacksonto"},{index:16,name:"Hitonskyer"},{index:17,name:"Rerasmutul"},{index:18,name:"Isdoraijung"},{index:19,name:"Doctinawyra"},{index:20,name:"Loychazinq"},{index:21,name:"Zukasizawa"},{index:22,name:"Ekwathore"},{index:23,name:"Yeberhahne"},{index:24,name:"Twerbetek"},{index:25,name:"Sivarates"},{index:26,name:"Eajerandal"},{index:27,name:"Aldukesci"},{index:28,name:"Wotyarogii"},{index:29,name:"Sudzerbal"},{index:30,name:"Maupenzhay"},{index:31,name:"Sugueziume"},{index:32,name:"Brogoweldian"},{index:33,name:"Ehbogdenbu"},{index:34,name:"Ijsenufryos"},{index:35,name:"Nipikulha"},{index:36,name:"Autsurabin"},{index:37,name:"Lusontrygiamh"},{index:38,name:"Rewmanawa"},{index:39,name:"Ethiophodhe"},{index:40,name:"Urastrykle"},{index:41,name:"Xobeurindj"},{index:42,name:"Oniijialdu"},{index:43,name:"Wucetosucc"},{index:44,name:"Ebyeloof"},{index:45,name:"Odyavanta"},{index:46,name:"Milekistri"},{index:47,name:"Waferganh"},{index:48,name:"Agnusopwit"},{index:49,name:"Teyaypilny"},{index:50,name:"Zalienkosm"},{index:51,name:"Ladgudiraf"},{index:52,name:"Mushonponte"},{index:53,name:"Amsentisz"},{index:54,name:"Fladiselm"},{index:55,name:"Laanawemb"},{index:56,name:"Ilkerloor"},{index:57,name:"Davanossi"},{index:58,name:"Ploehrliou"},{index:59,name:"Corpinyaya"},{index:60,name:"Leckandmeram"},{index:61,name:"Quulngais"},{index:62,name:"Nokokipsechl"},{index:63,name:"Rinblodesa"},{index:64,name:"Loydporpen"},{index:65,name:"Ibtrevskip"},{index:66,name:"Elkowaldb"},{index:67,name:"Heholhofsko"},{index:68,name:"Yebrilowisod"},{index:69,name:"Husalvangewi"},{index:70,name:"Ovna'uesed"},{index:71,name:"Bahibusey"},{index:72,name:"Nuybeliaure"},{index:73,name:"Doshawchuc"},{index:74,name:"Ruckinarkh"},{index:75,name:"Thorettac"},{index:76,name:"Nuponoparau"},{index:77,name:"Moglaschil"},{index:78,name:"Uiweupose"},{index:79,name:"Nasmilete"},{index:80,name:"Ekdaluskin"},{index:81,name:"Hakapanasy"},{index:82,name:"Dimonimba"},{index:83,name:"Cajaccari"},{index:84,name:"Olonerovo"},{index:85,name:"Umlanswick"},{index:86,name:"Henayliszm"},{index:87,name:"Utzenmate"},{index:88,name:"Umirpaiya"},{index:89,name:"Paholiang"},{index:90,name:"Iaereznika"},{index:91,name:"Yudukagath"},{index:92,name:"Boealalosnj"},{index:93,name:"Yaevarcko"},{index:94,name:"Coellosipp"},{index:95,name:"Wayndohalou"},{index:96,name:"Smoduraykl"},{index:97,name:"Apmaneessu"},{index:98,name:"Hicanpaav"},{index:99,name:"Akvasanta"},{index:100,name:"Tuychelisaor"},{index:101,name:"Rivskimbe"},{index:102,name:"Daksanquix"},{index:103,name:"Kissonlin"},{index:104,name:"Aediabiel"},{index:105,name:"Ulosaginyik"},{index:106,name:"Roclaytonycar"},{index:107,name:"Kichiaroa"},{index:108,name:"Irceauffey"},{index:109,name:"Nudquathsenfe"},{index:110,name:"Getaizakaal"},{index:111,name:"Hansolmien"},{index:112,name:"Bloytisagra"},{index:113,name:"Ladsenlay"},{index:114,name:"Luyugoslasr"},{index:115,name:"Ubredhatk"},{index:116,name:"Cidoniana"},{index:117,name:"Jasinessa"},{index:118,name:"Torweierf"},{index:119,name:"Saffneckm"},{index:120,name:"Thnistner"},{index:121,name:"Dotusingg"},{index:122,name:"Luleukous"},{index:123,name:"Jelmandan"},{index:124,name:"Otimanaso"},{index:125,name:"Enjaxusanto"},{index:126,name:"Sezviktorew"},{index:127,name:"Zikehpm"},{index:128,name:"Bephembah"},{index:129,name:"Broomerrai"},{index:130,name:"Meximicka"},{index:131,name:"Venessika"},{index:132,name:"Gaiteseling"},{index:133,name:"Zosakasiro"},{index:134,name:"Drajayanes"},{index:135,name:"Ooibekuar"},{index:136,name:"Urckiansi"},{index:137,name:"Dozivadido"},{index:138,name:"Emiekereks"},{index:139,name:"Meykinunukur"},{index:140,name:"Kimycuristh"},{index:141,name:"Roansfien"},{index:142,name:"Isgarmeso"},{index:143,name:"Daitibeli"},{index:144,name:"Gucuttarik"},{index:145,name:"Enlaythie"},{index:146,name:"Drewweste"},{index:147,name:"Akbulkabi"},{index:148,name:"Homskiw"},{index:149,name:"Zavainlani"},{index:150,name:"Jewijkmas"},{index:151,name:"Itlhotagra"},{index:152,name:"Podalicess"},{index:153,name:"Hiviusauer"},{index:154,name:"Halsebenk"},{index:155,name:"Puikitoac"},{index:156,name:"Gaybakuaria"},{index:157,name:"Grbodubhe"},{index:158,name:"Rycempler"},{index:159,name:"Indjalala"},{index:160,name:"Fontenikk"},{index:161,name:"Pasycihelwhee"},{index:162,name:"Ikbaksmit"},{index:163,name:"Telicianses"},{index:164,name:"Oyleyzhan"},{index:165,name:"Uagerosat"},{index:166,name:"Impoxectin"},{index:167,name:"Twoodmand"},{index:168,name:"Hilfsesorbs"},{index:169,name:"Ezdaranit"},{index:170,name:"Wiensanshe"},{index:171,name:"Ewheelonc"},{index:172,name:"Litzmantufa"},{index:173,name:"Emarmatosi"},{index:174,name:"Mufimbomacvi"},{index:175,name:"Wongquarum"},{index:176,name:"Hapirajua"},{index:177,name:"Igbinduina"},{index:178,name:"Wepaitvas"},{index:179,name:"Sthatigudi"},{index:180,name:"Yekathsebehn"},{index:181,name:"Ebedeagurst"},{index:182,name:"Nolisonia"},{index:183,name:"Ulexovitab"},{index:184,name:"Iodhinxois"},{index:185,name:"Irroswitzs"},{index:186,name:"Bifredait"},{index:187,name:"Beiraghedwe"},{index:188,name:"Yeonatlak"},{index:189,name:"Cugnatachh"},{index:190,name:"Nozoryenki"},{index:191,name:"Ebralduri"},{index:192,name:"Evcickcandj"},{index:193,name:"Ziybosswin"},{index:194,name:"Heperclait"},{index:195,name:"Sugiuniam"},{index:196,name:"Aaseertush"},{index:197,name:"Uglyestemaa"},{index:198,name:"Horeroedsh"},{index:199,name:"Drundemiso"},{index:200,name:"Ityanianat"},{index:201,name:"Purneyrine"},{index:202,name:"Dokiessmat"},{index:203,name:"Nupiacheh"},{index:204,name:"Dihewsonj"},{index:205,name:"Rudrailhik"},{index:206,name:"Tweretnort"},{index:207,name:"Snatreetze"},{index:208,name:"Iwundaracos"},{index:209,name:"Digarlewena"},{index:210,name:"Erquagsta"},{index:211,name:"Logovoloin"},{index:212,name:"Boyaghosganh"},{index:213,name:"Kuolungau"},{index:214,name:"Pehneldept"},{index:215,name:"Yevettiiqidcon"},{index:216,name:"Sahliacabru"},{index:217,name:"Noggalterpor"},{index:218,name:"Chmageaki"},{index:219,name:"Veticueca"},{index:220,name:"Vittesbursul"},{index:221,name:"Nootanore"},{index:222,name:"Innebdjerah"},{index:223,name:"Kisvarcini"},{index:224,name:"Cuzcogipper"},{index:225,name:"Pamanhermonsu"},{index:226,name:"Brotoghek"},{index:227,name:"Mibittara"},{index:228,name:"Huruahili"},{index:229,name:"Raldwicarn"},{index:230,name:"Ezdartlic"},{index:231,name:"Badesclema"},{index:232,name:"Isenkeyan"},{index:233,name:"Iadoitesu"},{index:234,name:"Yagrovoisi"},{index:235,name:"Ewcomechio"},{index:236,name:"Inunnunnoda"},{index:237,name:"Dischiutun"},{index:238,name:"Yuwarugha"},{index:239,name:"Ialmendra"},{index:240,name:"Reponudrle"},{index:241,name:"Rinjanagrbo"},{index:242,name:"Zeziceloh"},{index:243,name:"Oeileutasc"},{index:244,name:"Zicniijinis"},{index:245,name:"Dugnowarilda"},{index:246,name:"Neuxoisan"},{index:247,name:"Ilmenhorn"},{index:248,name:"Rukwatsuku"},{index:249,name:"Nepitzaspru"},{index:250,name:"Chcehoemig"},{index:251,name:"Haffneyrin"},{index:252,name:"Uliciawai"},{index:253,name:"Tuhgrespod"},{index:254,name:"Iousongola"},{index:255,name:"Odyalutai"}],Wte=[{value:"Normal",label:"Normal (all non-permadeath modes)"},{value:"Permadeath",label:"Permadeath"}];function Gte(){return new URLSearchParams(Tp().search)}function AO(){const t=Gte(),e=Es(),n=E.useContext(kr),{isAdmin:r,isSuperAdmin:i,isPartner:a,user:s}=n||{},o=t.get("edit"),[l,u]=E.useState({id:"",name:"",galaxy:"Euclid",reality:"Normal",glyph_code:"",x:"",y:"",z:"",description:"",planets:[],space_station:null,region_x:null,region_y:null,region_z:null,glyph_planet:0,glyph_solar_system:1,discord_tag:null,star_type:"",economy_type:"",economy_level:"",conflict_level:"",dominant_lifeform:"",stellar_classification:""}),[d,f]=E.useState(!1),[p,m]=E.useState(null),[y,_]=E.useState(null),[v,w]=E.useState(!1),[M,C]=E.useState(!1),[N,P]=E.useState([]),[R,k]=E.useState(""),[U,I]=E.useState(null),[L,z]=E.useState(""),[O,q]=E.useState(""),[Y,X]=E.useState(!1),[ee,se]=E.useState(!1);E.useEffect(()=>{qe.get("/api/discord_tags").then(Z=>{P(Z.data.tags||[])}).catch(()=>{})},[]),E.useEffect(()=>{o&&qe.get(`/api/systems/${encodeURIComponent(o)}`).then(Z=>{u(Z.data),I(Z.data.discord_tag)}).catch(()=>{})},[o]);const W=E.useRef(!1);async function $(Z){if(Z.preventDefault(),!W.current){W.current=!1;return}if(W.current=!1,!l.name||!l.name.trim()){alert("System name is required");return}if(!l.star_type){alert("Star Color is required");return}if(!l.economy_type){alert("Economy Type is required");return}if(!l.economy_level){alert("Economy Tier is required");return}if(!l.conflict_level){alert("Conflict Level is required");return}if(!l.dominant_lifeform){alert("Dominant Lifeform is required");return}if(l.planets)for(const xe of l.planets){if(!xe.name||!xe.name.trim()){alert("All planets must have a name");return}if(xe.moons){for(const oe of xe.moons)if(!oe.name||!oe.name.trim()){alert("All moons must have a name");return}}}if(!l.discord_tag&&!r){alert('Discord Community is required. Please select a community or choose "Personal" if you are not affiliated with a community.');return}if(!L.trim()&&!r){alert("Your Discord username is required for all submissions.");return}if(l.discord_tag==="personal"&&!O.trim()){alert("Discord username is required for personal submissions."),X(!0);return}C(!0);try{if(r){const xe={...l};a&&o&&!U&&R&&(xe.edit_explanation=R);const oe=await qe.post("/api/save_system",xe);oe.data.status==="pending_approval"?alert(`Your edit has been submitted for super admin approval.

Request ID: ${oe.data.request_id}

${oe.data.message}`):alert("System saved successfully!"),e("/systems")}else{const xe={...l};L.trim()&&(xe.personal_discord_username=L.trim()),l.discord_tag==="personal"&&O.trim()&&(xe.personal_discord_username=O.trim());const oe=await qe.post("/api/submit_system",xe);alert(`System submitted for approval!

Submission ID: ${oe.data.submission_id}
System Name: ${oe.data.system_name}

An admin will review your submission.`),e("/systems")}}catch(xe){const oe=xe.response?.data?.detail||xe.message||xe;alert(`${r?"Save":"Submission"} failed: ${oe}`)}finally{C(!1)}}const G=a&&o&&!U;function j(Z){if(Z.key==="Enter"){const xe=Z.target&&Z.target.tagName?Z.target.tagName.toUpperCase():"",oe=Z.target&&Z.target.type?String(Z.target.type).toLowerCase():"";if(xe==="TEXTAREA"||oe==="submit"||xe==="BUTTON")return;Z.preventDefault()}}function B(Z,xe){u(oe=>({...oe,[Z]:xe}))}function ae(Z){u(xe=>({...xe,x:Z.x,y:Z.y,z:Z.z,region_x:Z.region_x,region_y:Z.region_y,region_z:Z.region_z,glyph_planet:Z.planet,glyph_solar_system:Z.solar_system,glyph_code:Z.glyph}))}function re(){m(-1),_({name:"",biome:"",weather:"",sentinel:"None",fauna:"N/A",flora:"N/A",materials:"",base_location:"",photo:"",notes:"",moons:[]}),f(!0)}function de(Z){m(Z),_(l.planets[Z]),f(!0)}function ce(Z){const xe=[...l.planets||[]];p===-1?xe.push(Z):xe[p]=Z,u({...l,planets:xe}),f(!1)}function ie(Z,xe){const oe=[...l.planets||[]];oe[Z]=xe,u({...l,planets:oe})}function le(Z){const xe=[...l.planets||[]];xe.splice(Z,1),u({...l,planets:xe})}function fe(Z){if(w(Z),Z){const xe=Hte(l.planets||[]),oe=zj(l.economy_type||"None",l.economy_level||"T3");u({...l,space_station:{name:`${l.name||"System"} Station`,race:l.dominant_lifeform||"Gek",trade_goods:oe.map(tt=>tt.id),...xe}})}else u({...l,space_station:null})}function Ne(Z){if(!l.space_station)return;const xe=l.space_station.trade_goods||[],oe=xe.includes(Z)?xe.filter(tt=>tt!==Z):[...xe,Z];u({...l,space_station:{...l.space_station,trade_goods:oe}})}function Se(Z,xe){l.space_station&&u({...l,space_station:{...l.space_station,[Z]:xe}})}return c.jsx("div",{children:c.jsx(an,{className:"max-w-4xl",children:c.jsxs("form",{onSubmit:$,onKeyDown:j,children:[c.jsxs("label",{className:"block mb-2",children:["System Name ",c.jsx("input",{placeholder:"Name","aria-label":"Name",className:"w-full mt-1",value:l.name||"",onChange:Z=>B("name",Z.target.value),required:!0})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("h3",{className:"text-lg font-semibold mb-2 text-purple-300",children:"Portal Glyph Coordinates"}),c.jsx(Ute,{value:l.glyph_code,onChange:Z=>B("glyph_code",Z),onDecoded:ae})]}),l.x&&l.y&&l.z&&c.jsx("div",{className:"mt-4 p-3 bg-gray-800 rounded border border-green-500",children:c.jsxs("div",{className:"text-sm text-gray-300",children:[c.jsx("span",{className:"text-green-300 font-semibold",children:"Coordinates:"})," X: ",l.x,", Y: ",l.y,", Z: ",l.z,l.region_x!==null&&c.jsxs("span",{className:"ml-3",children:[c.jsx("span",{className:"text-purple-300 font-semibold",children:"Region:"})," [",l.region_x,", ",l.region_y,", ",l.region_z,"]"]})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Reality ",c.jsx("span",{className:"text-red-400",children:"*"})]}),c.jsx("select",{className:"w-full p-2 border rounded bg-gray-700 border-gray-600",value:l.reality||"Normal",onChange:Z=>B("reality",Z.target.value),required:!0,children:Wte.map(Z=>c.jsx("option",{value:Z.value,children:Z.label},Z.value))}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Permadeath is separate from all other game modes"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Galaxy ",c.jsx("span",{className:"text-red-400",children:"*"})]}),c.jsx(_o,{options:Vte.map(Z=>({value:Z.name,label:`${Z.index}: ${Z.name}`})),value:l.galaxy||"Euclid",onChange:Z=>B("galaxy",Z||"Euclid"),placeholder:"Search by number or name..."}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Search by galaxy index (0-255) or name"})]})]}),c.jsxs("div",{className:"mt-4 p-4 bg-gray-800/50 rounded border border-gray-700",children:[c.jsx("h3",{className:"text-lg font-semibold mb-3 text-cyan-300",children:"System Attributes"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Star Color ",c.jsx("span",{className:"text-red-400",children:"*"})]}),c.jsxs("select",{className:`w-full p-2 border rounded bg-gray-700 ${l.star_type?"border-gray-600":"border-red-500"}`,value:l.star_type||"",onChange:Z=>B("star_type",Z.target.value),required:!0,style:{color:l.star_type==="Yellow"?"#fbbf24":l.star_type==="Red"?"#ef4444":l.star_type==="Green"?"#22c55e":l.star_type==="Blue"?"#3b82f6":l.star_type==="Purple"?"#a855f7":"inherit"},children:[c.jsx("option",{value:"",style:{color:"#9ca3af"},children:"-- Select --"}),c.jsx("option",{value:"Yellow",style:{color:"#fbbf24"},children:" Yellow"}),c.jsx("option",{value:"Red",style:{color:"#ef4444"},children:" Red"}),c.jsx("option",{value:"Green",style:{color:"#22c55e"},children:" Green"}),c.jsx("option",{value:"Blue",style:{color:"#3b82f6"},children:" Blue"}),c.jsx("option",{value:"Purple",style:{color:"#a855f7"},children:" Purple"})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Economy Type ",c.jsx("span",{className:"text-red-400",children:"*"})]}),c.jsxs("select",{className:`w-full p-2 border rounded bg-gray-700 ${l.economy_type?"border-gray-600":"border-red-500"}`,value:l.economy_type||"",onChange:Z=>B("economy_type",Z.target.value),required:!0,children:[c.jsx("option",{value:"",children:"-- Select --"}),c.jsx("option",{value:"Trading",children:" Trading"}),c.jsx("option",{value:"Mining",children:" Mining"}),c.jsx("option",{value:"Manufacturing",children:" Manufacturing"}),c.jsx("option",{value:"Technology",children:" Technology"}),c.jsx("option",{value:"Scientific",children:" Scientific"}),c.jsx("option",{value:"Power Generation",children:" Power Generation"}),c.jsx("option",{value:"Mass Production",children:" Mass Production"}),c.jsx("option",{value:"Advanced Materials",children:" Advanced Materials"}),c.jsx("option",{value:"Pirate",children:" Pirate"}),c.jsx("option",{value:"None",children:" None"}),c.jsx("option",{value:"Abandoned",children:" Abandoned"})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Economy Tier ",c.jsx("span",{className:"text-red-400",children:"*"})]}),c.jsxs("select",{className:`w-full p-2 border rounded bg-gray-700 ${l.economy_level?"border-gray-600":"border-red-500"}`,value:l.economy_level||"",onChange:Z=>B("economy_level",Z.target.value),required:!0,children:[c.jsx("option",{value:"",children:"-- Select --"}),c.jsx("option",{value:"T1",children:" (Low)"}),c.jsx("option",{value:"T2",children:" (Medium)"}),c.jsx("option",{value:"T3",children:" (High)"}),c.jsx("option",{value:"T4",children:" (Pirate)"})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Conflict Level ",c.jsx("span",{className:"text-red-400",children:"*"})]}),c.jsxs("select",{className:`w-full p-2 border rounded bg-gray-700 ${l.conflict_level?"border-gray-600":"border-red-500"}`,value:l.conflict_level||"",onChange:Z=>B("conflict_level",Z.target.value),required:!0,children:[c.jsx("option",{value:"",children:"-- Select --"}),c.jsx("option",{value:"Low",children:" Low"}),c.jsx("option",{value:"Medium",children:" Medium"}),c.jsx("option",{value:"High",children:" High"})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Dominant Lifeform ",c.jsx("span",{className:"text-red-400",children:"*"})]}),c.jsxs("select",{className:`w-full p-2 border rounded bg-gray-700 ${l.dominant_lifeform?"border-gray-600":"border-red-500"}`,value:l.dominant_lifeform||"",onChange:Z=>B("dominant_lifeform",Z.target.value),required:!0,children:[c.jsx("option",{value:"",children:"-- Select --"}),c.jsx("option",{value:"Gek",children:" Gek"}),c.jsx("option",{value:"Vy'keen",children:" Vy'keen"}),c.jsx("option",{value:"Korvax",children:" Korvax"}),c.jsx("option",{value:"None",children:" None (Abandoned)"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Spectral Class"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",className:"w-full p-2 border rounded bg-gray-700 border-gray-600 font-mono uppercase",value:l.stellar_classification||"",onChange:Z=>B("stellar_classification",Z.target.value.toUpperCase().slice(0,6)),placeholder:"e.g. G2pf, M7, O3f",style:{color:(()=>{switch((l.stellar_classification||"")[0]?.toUpperCase()){case"O":return"#9999ff";case"B":return"#aaaaff";case"A":return"#caf0f8";case"F":return"#ffffcc";case"G":return"#fbbf24";case"K":return"#fb923c";case"M":return"#ef4444";case"E":return"#22c55e";case"X":case"Y":return"#a855f7";default:return"inherit"}})()}}),l.stellar_classification&&c.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium whitespace-nowrap ${(()=>{switch((l.stellar_classification||"")[0]?.toUpperCase()){case"O":case"B":return"bg-blue-900 text-blue-200";case"F":case"G":return"bg-yellow-900 text-yellow-200";case"K":case"M":return"bg-red-900 text-red-200";case"E":return"bg-green-900 text-green-200";case"X":case"Y":return"bg-purple-900 text-purple-200";default:return"bg-gray-700 text-gray-300"}})()}`,children:(()=>{switch((l.stellar_classification||"")[0]?.toUpperCase()){case"O":case"B":return" Blue";case"F":case"G":return" Yellow";case"K":case"M":return" Red";case"E":return" Green";case"X":case"Y":return" Purple";default:return""}})()})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: Letter + Number (0-9) + Suffix. Examples: G2pf, M7, O3f, E5p"}),c.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[c.jsx("span",{className:"text-blue-400",children:"O/B"}),"=Blue,",c.jsx("span",{className:"text-yellow-400 ml-1",children:"F/G"}),"=Yellow,",c.jsx("span",{className:"text-red-400 ml-1",children:"K/M"}),"=Red,",c.jsx("span",{className:"text-green-400 ml-1",children:"E"}),"=Green,",c.jsx("span",{className:"text-purple-400 ml-1",children:"X/Y"}),"=Purple"]})]})]})]}),c.jsxs("div",{className:"mt-3",children:[c.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Discord Community ",c.jsx("span",{className:"text-red-400",children:"*"})]}),c.jsxs("select",{className:`w-full p-2 border rounded bg-gray-700 ${l.discord_tag?"":"border-red-500"}`,value:l.discord_tag||"",onChange:Z=>{const xe=Z.target.value;xe==="personal"?(X(!0),se(!0)):(B("discord_tag",xe||null),l.discord_tag==="personal"&&q(""))},required:!0,children:[c.jsx("option",{value:"",children:"-- Select a Community (Required) --"}),N.map(Z=>c.jsxs("option",{value:Z.tag,children:[Z.name," (",Z.tag,")"]},Z.tag)),c.jsx("option",{value:"personal",children:"Personal (No Community Affiliation)"})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select which Discord community this system belongs to, or "Personal" if not affiliated with a community.'}),l.discord_tag==="personal"&&O&&c.jsxs("div",{className:"mt-2 p-2 bg-fuchsia-900/30 border border-fuchsia-500 rounded flex justify-between items-center",children:[c.jsxs("span",{className:"text-fuchsia-300",children:["Discord Username: ",c.jsx("strong",{children:O})]}),c.jsx("button",{type:"button",onClick:()=>X(!0),className:"text-xs px-2 py-1 bg-fuchsia-600 text-white rounded hover:bg-fuchsia-700",children:"Edit"})]})]}),!r&&c.jsxs("div",{className:"mt-3",children:[c.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Your Discord Username ",c.jsx("span",{className:"text-red-400",children:"*"})]}),c.jsx("input",{type:"text",className:`w-full p-2 border rounded bg-gray-700 ${L.trim()?"border-gray-600":"border-red-500"}`,value:L,onChange:Z=>z(Z.target.value),placeholder:"e.g., username or username#1234",required:!0}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Your Discord username is required so we can contact you about your submission if needed."})]}),G&&c.jsxs("div",{className:"mt-4 p-4 bg-yellow-900/30 border border-yellow-700 rounded",children:[c.jsx("p",{className:"text-yellow-400 font-semibold mb-2",children:"This system is untagged. Your edit will require super admin approval."}),c.jsxs("label",{className:"block",children:[c.jsx("span",{className:"text-sm",children:"Explanation for edit (required)"}),c.jsx("textarea",{className:"w-full mt-1 p-2 border rounded bg-gray-700",value:R,onChange:Z=>k(Z.target.value),placeholder:"Explain why you need to edit this system...",rows:3,required:!0})]})]}),c.jsxs("label",{className:"block mt-3",children:["Description ",c.jsx("textarea",{"aria-label":"System description",className:"w-full mt-1",value:l.description||"",onChange:Z=>B("description",Z.target.value)})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("h3",{className:"text-md font-semibold mb-2",children:"Planets"}),c.jsx("div",{children:(l.planets||[]).map((Z,xe)=>c.jsxs("div",{className:"mb-2",children:[c.jsx(NO,{index:xe,planet:Z,onChange:ie,onRemove:le}),c.jsx("div",{className:"mt-1",children:c.jsx("button",{className:"px-3 py-1.5 bg-sky-600 text-white rounded text-sm",onClick:()=>de(xe),children:"Edit"})})]},xe))}),c.jsx("div",{className:"mt-2",children:c.jsx("button",{type:"button",onClick:re,className:"px-3 py-1 bg-green-600 rounded",children:" Add Planet"})})]}),c.jsxs("div",{className:"mt-4 border-t pt-4",children:[c.jsx("h3",{className:"text-md font-semibold mb-2",children:"Space Station"}),c.jsxs("label",{className:"flex items-center space-x-2 mb-3",children:[c.jsx("input",{type:"checkbox",checked:v,onChange:Z=>fe(Z.target.checked),className:"w-4 h-4"}),c.jsx("span",{children:" Has Space Station"})]}),v&&l.space_station&&c.jsxs("div",{className:"ml-6 p-3 bg-purple-900/30 rounded border border-purple-700",children:[c.jsxs("div",{className:"mb-3",children:[c.jsx("label",{className:"block text-sm",children:"Station Name"}),c.jsx("input",{className:"w-full mt-1",value:l.space_station.name||"",onChange:Z=>Se("name",Z.target.value),placeholder:"Station Name"})]}),c.jsxs("div",{className:"mb-3",children:[c.jsx("label",{className:"block text-sm",children:"Race"}),c.jsxs("select",{className:"w-full mt-1",value:l.space_station.race||"Gek",onChange:Z=>Se("race",Z.target.value),children:[c.jsx("option",{value:"Gek",children:"Gek"}),c.jsx("option",{value:"Korvax",children:"Korvax"}),c.jsx("option",{value:"Vy'keen",children:"Vy'keen"}),c.jsx("option",{value:"Unknown",children:"Unknown"})]})]}),c.jsxs("div",{className:"mb-3 p-2 bg-gray-800 rounded border border-gray-600",children:[c.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Orbital Position (auto-calculated)"}),c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"text-cyan-300",children:"Distance:"})," ",l.space_station.orbitalRadius?.toFixed(1)||"?"," units from star"]}),l.space_station.slot&&c.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Placement: ",l.space_station.slot]})]}),c.jsxs("div",{className:"mb-2",children:[c.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Trade Goods Sold",l.economy_type&&l.economy_level&&c.jsxs("span",{className:"text-xs text-gray-400 ml-2",children:["(",l.economy_type," economy, ",l.economy_level==="T3"?"High":l.economy_level==="T2"?"Medium":l.economy_level==="T1"?"Low":"Pirate"," wealth)"]})]}),!l.economy_type||l.economy_type==="None"||l.economy_type==="Abandoned"?c.jsx("div",{className:"text-xs text-gray-500 italic",children:"No trade goods available (abandoned system or no economy type selected)"}):c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1 max-h-48 overflow-y-auto p-2 bg-gray-800 rounded",children:zj(l.economy_type,l.economy_level).map(Z=>c.jsxs("label",{className:"flex items-center space-x-2 text-sm cursor-pointer hover:bg-gray-700 p-1 rounded",children:[c.jsx("input",{type:"checkbox",checked:(l.space_station.trade_goods||[]).includes(Z.id),onChange:()=>Ne(Z.id),className:"w-3 h-3"}),c.jsxs("span",{className:"text-gray-200",children:[Z.name,c.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(T",Z.tier,")"]})]})]},Z.id))}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select which trade goods this station sells (based on economy tier)"})]}),l.space_station.fallback&&c.jsx("div",{className:"mt-2 text-xs text-yellow-300 bg-yellow-900/30 border border-yellow-700 p-2 rounded",children:"Station placed in fallback position - system has unusual planet configuration"})]})]}),c.jsxs("div",{className:"mt-4 flex flex-col space-y-2",children:[!r&&c.jsx("div",{className:"text-sm text-yellow-300 bg-yellow-900/30 border border-yellow-700 p-2 rounded",children:"Note: You are not logged in as admin. Your system will be submitted for approval."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[c.jsx(ft,{className:"btn-primary w-full sm:w-auto",type:"submit",onClick:()=>{W.current=!0},disabled:M,children:M?"Submitting...":r?"Save System":"Submit for Approval"}),c.jsx(ft,{className:"bg-gray-200 text-gray-800 w-full sm:w-auto",onClick:()=>e("/systems"),disabled:M,children:"Cancel"})]})]}),d&&c.jsx(Tr,{title:p===-1?"Add Planet":"Edit Planet",onClose:()=>f(!1),children:c.jsx(NO,{planet:y,index:p,onChange:(Z,xe)=>{_(xe)},onRemove:()=>{},onSave:ce})}),Y&&c.jsx(Tr,{title:"Personal Discord Username",onClose:()=>{X(!1),ee&&!O.trim()&&se(!1)},children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-gray-300",children:'Since you selected "Personal" (no community affiliation), please provide your Discord username so we can contact you if we need more information about your submission.'}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["Discord Username ",c.jsx("span",{className:"text-red-400",children:"*"})]}),c.jsx("input",{type:"text",className:"w-full p-2 border rounded bg-gray-700 text-white",value:O,onChange:Z=>q(Z.target.value),placeholder:"e.g., username or username#1234",autoFocus:!0}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter your Discord username so we can DM you if needed."})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx(ft,{className:"btn-primary bg-fuchsia-600 hover:bg-fuchsia-700",onClick:()=>{if(!O.trim()){alert("Discord username is required");return}B("discord_tag","personal"),se(!1),X(!1)},children:"Confirm"}),c.jsx(ft,{className:"bg-gray-600 text-white hover:bg-gray-500",onClick:()=>{X(!1),se(!1),q("")},children:"Cancel"})]})]})})]})})})}function $te(){const t=E.useContext(kr),{isAdmin:e,isSuperAdmin:n,isPartner:r,user:i,logout:a}=t||{},[s,o]=E.useState({}),[l,u]=E.useState({}),[d,f]=E.useState("#00C2B3"),[p,m]=E.useState(!0),[y,_]=E.useState(!1),[v,w]=E.useState(!1),[M,C]=E.useState(""),[N,P]=E.useState(""),[R,k]=E.useState(""),[U,I]=E.useState(!1),[L,z]=E.useState(!1),[O,q]=E.useState(""),[Y,X]=E.useState(""),[ee,se]=E.useState(!1);E.useEffect(()=>{fetch("/api/settings",{credentials:"include"}).then(le=>le.json()).then(le=>o(le||{})).catch(()=>{}).finally(()=>m(!1)),r&&(fetch("/api/partner/theme",{credentials:"include"}).then(le=>le.json()).then(le=>u(le.theme||{})).catch(()=>{}),fetch("/api/partner/region_color",{credentials:"include"}).then(le=>le.json()).then(le=>f(le.color||"#00C2B3")).catch(()=>{}))},[r]);const W=(le,fe)=>{const Ne={...s.theme||{},[le]:fe};o({...s,theme:Ne}),le==="bg"&&document.documentElement.style.setProperty("--app-bg",fe),le==="text"&&document.documentElement.style.setProperty("--app-text",fe),le==="card"&&document.documentElement.style.setProperty("--app-card",fe),le==="primary"&&document.documentElement.style.setProperty("--app-primary",fe)},$=(le,fe)=>{const Ne={...l,[le]:fe};u(Ne),le==="bg"&&document.documentElement.style.setProperty("--app-bg",fe),le==="text"&&document.documentElement.style.setProperty("--app-text",fe),le==="card"&&document.documentElement.style.setProperty("--app-card",fe),le==="primary"&&document.documentElement.style.setProperty("--app-primary",fe)},G=async()=>{_(!0);try{const le=await fetch("/api/settings",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!le.ok)throw new Error(await le.text());alert("Settings saved successfully!")}catch(le){alert("Failed to save settings: "+le)}_(!1)},j=async()=>{_(!0);try{const le=await fetch("/api/partner/theme",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({theme:l})});if(!le.ok)throw new Error(await le.text());alert("Theme saved successfully!")}catch(le){alert("Failed to save theme: "+le)}_(!1)},B=async()=>{w(!0);try{const le=await fetch("/api/partner/region_color",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({color:d})});if(!le.ok){const fe=await le.json();throw new Error(fe.detail||"Failed to save")}alert("Region color saved! The 3D map will now show your regions in this color.")}catch(le){alert("Failed to save region color: "+le.message)}w(!1)},ae=async()=>{try{const le=await fetch("/api/backup",{method:"POST",credentials:"include"});if(!le.ok)throw new Error(await le.text());const fe=await le.json();alert("Backup created: "+fe.backup_path)}catch(le){alert("Backup failed: "+le)}},re=async le=>{try{const fe=le.target.files&&le.target.files[0];if(!fe)return;const Ne=new FormData;Ne.append("file",fe);const Se=await fetch("/api/db_upload",{method:"POST",credentials:"include",body:Ne});if(!Se.ok)throw new Error(await Se.text());const Z=await Se.json();alert("DB uploaded: "+Z.path)}catch(fe){alert("DB upload failed: "+fe)}},de=async()=>{if(confirm('This will rename systems that have "HUB Tag:" in their description to use the hub tag as the system name. The original name will be preserved in the notes. Continue?')){z(!0);try{const le=await fetch("/api/migrate_hub_tags",{method:"POST",credentials:"include"});if(!le.ok)throw new Error(await le.text());const fe=await le.json();alert(`Migration complete!

Updated: ${fe.updated} systems
Total found with HUB Tag: ${fe.total_found}`)}catch(le){alert("Migration failed: "+le)}finally{z(!1)}}},ce=async()=>{if(!M){alert("Please enter your current password");return}if(!N||N.length<4){alert("New password must be at least 4 characters");return}if(N!==R){alert("New passwords do not match");return}I(!0);try{const le=await fetch("/api/change_password",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({current_password:M,new_password:N})});if(!le.ok){const fe=await le.json();throw new Error(fe.detail||"Failed to change password")}alert("Password changed successfully! Please log in again with your new password."),C(""),P(""),k(""),a()}catch(le){alert("Failed to change password: "+le.message)}finally{I(!1)}},ie=async()=>{if(!Y){alert("Please enter your current password");return}if(!O||O.length<3){alert("New username must be at least 3 characters");return}if(O.length>50){alert("Username must be 50 characters or less");return}if(!/^[a-zA-Z0-9_-]+$/.test(O)){alert("Username can only contain letters, numbers, underscores, and hyphens");return}se(!0);try{const le=await fetch("/api/change_username",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({current_password:Y,new_username:O})});if(!le.ok){const fe=await le.json();throw new Error(fe.detail||"Failed to change username")}alert("Username changed successfully! Please log in again with your new username."),q(""),X(""),a()}catch(le){alert("Failed to change username: "+le.message)}finally{se(!1)}};return p?c.jsx("div",{className:"flex items-center justify-center min-h-64",children:c.jsx("div",{className:"text-lg text-gray-400",children:"Loading settings..."})}):c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-cyan-400",children:"Settings"}),c.jsx(an,{className:"bg-gray-800/50",children:c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Logged in as"}),c.jsxs("div",{className:"text-gray-300",children:[c.jsx("p",{children:c.jsx("strong",{children:i?.displayName||i?.username})}),n&&c.jsx("p",{className:"text-yellow-400 text-sm",children:"Super Admin"}),r&&i?.discordTag&&c.jsxs("p",{className:"text-cyan-400 text-sm",children:["Partner: ",i.discordTag]})]}),c.jsx(ft,{className:"mt-3",variant:"danger",onClick:a,children:"Logout"})]})}),e&&c.jsx(an,{className:"bg-gray-800/50",children:c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Change Password"}),c.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Update your password. You will be logged out after changing your password."}),c.jsxs("div",{className:"space-y-4 max-w-md",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Current Password"}),c.jsx("input",{type:"password",value:M,onChange:le=>C(le.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Enter current password"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"New Password"}),c.jsx("input",{type:"password",value:N,onChange:le=>P(le.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Enter new password (min 4 characters)"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Confirm New Password"}),c.jsx("input",{type:"password",value:R,onChange:le=>k(le.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Confirm new password"})]}),c.jsx(ft,{onClick:ce,disabled:U||!M||!N||!R,children:U?"Changing...":"Change Password"})]})]})}),r&&c.jsx(an,{className:"bg-gray-800/50",children:c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Change Username"}),c.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Update your login username. You will be logged out after changing your username."}),c.jsxs("div",{className:"space-y-4 max-w-md",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Current Username"}),c.jsx("p",{className:"text-white font-medium",children:i?.username||""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"New Username"}),c.jsx("input",{type:"text",value:O,onChange:le=>q(le.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Enter new username (min 3 characters)"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Letters, numbers, underscores, and hyphens only"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Current Password"}),c.jsx("input",{type:"password",value:Y,onChange:le=>X(le.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Enter your password to confirm"})]}),c.jsx(ft,{onClick:ie,disabled:ee||!O||!Y,children:ee?"Changing...":"Change Username"})]})]})}),r&&c.jsx(an,{className:"bg-gray-800/50",children:c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Your Theme"}),c.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Customize your view of Haven Control Room. These settings only affect your session."}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Background"}),c.jsx("input",{type:"color",value:l.bg||"#1f2937",onChange:le=>$("bg",le.target.value),className:"w-full h-10 rounded cursor-pointer"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Text"}),c.jsx("input",{type:"color",value:l.text||"#f3f4f6",onChange:le=>$("text",le.target.value),className:"w-full h-10 rounded cursor-pointer"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Card"}),c.jsx("input",{type:"color",value:l.card||"#374151",onChange:le=>$("card",le.target.value),className:"w-full h-10 rounded cursor-pointer"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Primary"}),c.jsx("input",{type:"color",value:l.primary||"#06b6d4",onChange:le=>$("primary",le.target.value),className:"w-full h-10 rounded cursor-pointer"})]})]}),c.jsx(ft,{className:"mt-4",onClick:j,disabled:y,children:y?"Saving...":"Save Your Theme"})]})}),r&&c.jsx(an,{className:"bg-gray-800/50",children:c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"3D Galaxy Map - Region Color"}),c.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Choose a custom color for your community's regions on the 3D galaxy map. This color will be visible to everyone viewing the map."}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Region Point Color"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("input",{type:"color",value:d,onChange:le=>f(le.target.value),className:"w-16 h-10 rounded cursor-pointer border-2 border-gray-600"}),c.jsx("input",{type:"text",value:d,onChange:le=>{const fe=le.target.value;/^#[0-9A-Fa-f]{0,6}$/.test(fe)&&f(fe)},placeholder:"#00C2B3",className:"w-28 px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white font-mono text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500"})]})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Preview"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 rounded-full shadow-lg",style:{backgroundColor:d,boxShadow:`0 0 15px ${d}80`}}),c.jsx("span",{className:"text-sm text-gray-400",children:"This is how your regions will appear on the map"})]})]})]}),c.jsx(ft,{className:"mt-4",onClick:B,disabled:v,children:v?"Saving...":"Save Region Color"})]})}),n&&c.jsx(an,{className:"bg-gray-800/50",children:c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Global Theme"}),c.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Server-side theme controls the color palette for all users (default)."}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Background"}),c.jsx("input",{type:"color",value:s.theme&&s.theme.bg||"#1f2937",onChange:le=>W("bg",le.target.value),className:"w-full h-10 rounded cursor-pointer"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Text"}),c.jsx("input",{type:"color",value:s.theme&&s.theme.text||"#f3f4f6",onChange:le=>W("text",le.target.value),className:"w-full h-10 rounded cursor-pointer"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Card"}),c.jsx("input",{type:"color",value:s.theme&&s.theme.card||"#374151",onChange:le=>W("card",le.target.value),className:"w-full h-10 rounded cursor-pointer"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Primary"}),c.jsx("input",{type:"color",value:s.theme&&s.theme.primary||"#06b6d4",onChange:le=>W("primary",le.target.value),className:"w-full h-10 rounded cursor-pointer"})]})]}),c.jsx(ft,{className:"mt-4",onClick:G,disabled:y,children:y?"Saving...":"Save Global Theme"})]})}),n&&c.jsx(an,{className:"bg-gray-800/50",children:c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Database Management"}),c.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Create backups or restore the database from a backup file."}),c.jsxs("div",{className:"flex flex-wrap gap-4",children:[c.jsx("div",{children:c.jsx(ft,{onClick:ae,children:"Create Backup"})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Upload Database (.db file)"}),c.jsx("input",{type:"file",accept:".db",onChange:re,className:"text-sm text-gray-400"})]})]})]})}),n&&c.jsx(an,{className:"bg-gray-800/50",children:c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Data Migration"}),c.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"One-time migration tools for updating system data."}),c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Hub Tag Migration"}),c.jsx("p",{className:"text-xs text-gray-500 mb-2",children:'Renames systems that have "HUB Tag:" in their description to use the hub tag as the display name. The original system name will be preserved in the notes as "New Name:".'}),c.jsx(ft,{onClick:de,disabled:L,children:L?"Migrating...":"Migrate Hub Tags to Names"})]})})]})})]})}const Yte=[{value:"",label:"Select type..."},{value:"",label:" Fauna"},{value:"",label:" Flora"},{value:"",label:" Mineral"},{value:"",label:" Ancient"},{value:"",label:" History"},{value:"",label:" Bones"},{value:"",label:" Alien"},{value:"",label:" Starship"},{value:"",label:" Multi-tool"},{value:"",label:" Lore"},{value:"",label:" Other"}];function qte({isOpen:t,onClose:e,onSuccess:n}){const[r,i]=E.useState({discovery_name:"",discovery_type:"",description:"",system_id:"",planet_id:"",moon_id:"",location_name:"",discovered_by:"",discord_user_id:"",evidence_urls:""}),[a,s]=E.useState([]),[o,l]=E.useState([]),[u,d]=E.useState(null),[f,p]=E.useState(""),[m,y]=E.useState(!1),[_,v]=E.useState(!1),[w,M]=E.useState(""),[C,N]=E.useState(!1),P=E.useRef(null),R=E.useRef(null);E.useEffect(()=>{t&&(i({discovery_name:"",discovery_type:"",description:"",system_id:"",planet_id:"",moon_id:"",location_name:"",discovered_by:"",discord_user_id:"",evidence_urls:""}),s([]),d(null),p(""),M(""))},[t]),E.useEffect(()=>{if(!f||f.length<2){l([]);return}const $=setTimeout(async()=>{try{const j=await(await fetch(`/api/systems/search?q=${encodeURIComponent(f)}&limit=10`)).json();l(j.results||j||[])}catch(G){console.error("System search error:",G),l([])}},300);return()=>clearTimeout($)},[f]),E.useEffect(()=>{if(!r.system_id){d(null);return}fetch(`/api/systems/${r.system_id}`).then($=>$.json()).then($=>d($)).catch(()=>d(null))},[r.system_id]);function k($,G){i(j=>({...j,[$]:G}))}function U($){k("system_id",$.id),k("planet_id",""),k("moon_id",""),p($.name),y(!1)}function I(){k("system_id",""),k("planet_id",""),k("moon_id",""),p(""),d(null)}async function L($){const G=Array.from($.target.files||[]);G.length&&await z(G)}async function z($){N(!0);const G=[];for(const j of $){if(!j.type.startsWith("image/"))continue;const B=URL.createObjectURL(j),ae={file:j,preview:B,uploaded:!1,path:null};G.push(ae);try{const re=new FormData;re.append("file",j);const de=await fetch("/api/photos",{method:"POST",body:re});if(de.ok){const ce=await de.json();ae.uploaded=!0,ae.path=ce.path||ce.filename}}catch(re){console.error("Photo upload error:",re)}}s(j=>[...j,...G]),N(!1)}function O($){s(G=>{const j=[...G];return j[$]?.preview&&URL.revokeObjectURL(j[$].preview),j.splice($,1),j})}function q($){$.preventDefault(),$.stopPropagation()}function Y($){$.preventDefault(),$.stopPropagation();const G=Array.from($.dataTransfer.files||[]);G.length&&z(G)}async function X($){if($.preventDefault(),M(""),!r.discovery_name.trim()){M("Discovery Name is required");return}if(!r.discovered_by.trim()){M("Discovered By is required");return}v(!0);try{const G=a.filter(ie=>ie.uploaded&&ie.path),j=G[0]?.path||"",B=G.slice(1).map(ie=>ie.path),ae=r.evidence_urls.split(`
`).map(ie=>ie.trim()).filter(Boolean),re=[...B,...ae],de={discovery_name:r.discovery_name.trim(),discovery_type:r.discovery_type||null,description:r.description.trim()||null,system_id:r.system_id?parseInt(r.system_id):null,planet_id:r.planet_id?parseInt(r.planet_id):null,moon_id:r.moon_id?parseInt(r.moon_id):null,location_name:r.location_name.trim()||null,discovered_by:r.discovered_by.trim(),discord_user_id:r.discord_user_id.trim()||null,photo_url:j||null,evidence_urls:re.length>0?re.join(","):null},ce=await fetch("/api/discoveries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(de)});if(!ce.ok){const ie=await ce.json().catch(()=>({}));throw new Error(ie.detail||ie.message||"Failed to submit discovery")}n?.()}catch(G){M(G.message||"An error occurred")}finally{v(!1)}}const ee=u?.planets||[],W=ee.find($=>$.id===parseInt(r.planet_id))?.moons||[];return c.jsx(Tr,{isOpen:t,onClose:e,title:"Submit Discovery",children:c.jsxs("form",{onSubmit:X,children:[w&&c.jsx("div",{className:"mb-4 p-3 rounded text-sm",style:{backgroundColor:"rgba(239,68,68,0.2)",color:"#fca5a5"},children:w}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--app-primary)"},children:"Basic Info"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(Il,{label:c.jsxs(c.Fragment,{children:["Discovery Name ",c.jsx("span",{className:"text-red-400",children:"*"})]}),children:c.jsx("input",{type:"text",className:"w-full p-2 rounded",style:{backgroundColor:"var(--app-bg)",border:"1px solid var(--app-accent-3)"},value:r.discovery_name,onChange:$=>k("discovery_name",$.target.value),placeholder:"e.g., Giant Sand Worm"})}),c.jsx(Il,{label:"Discovery Type",children:c.jsx("select",{className:"w-full p-2 rounded",style:{backgroundColor:"var(--app-bg)",border:"1px solid var(--app-accent-3)"},value:r.discovery_type,onChange:$=>k("discovery_type",$.target.value),children:Yte.map($=>c.jsx("option",{value:$.value,children:$.label},$.value))})})]}),c.jsx(Il,{label:"Description",children:c.jsx("textarea",{className:"w-full p-2 rounded",style:{backgroundColor:"var(--app-bg)",border:"1px solid var(--app-accent-3)",minHeight:80},value:r.description,onChange:$=>k("description",$.target.value),placeholder:"Describe the discovery, any notable characteristics, behaviors, etc."})})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--app-primary)"},children:"Location"}),c.jsx(Il,{label:"System",hint:"Search by system name to link this discovery",children:c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{ref:R,type:"text",className:"flex-1 p-2 rounded",style:{backgroundColor:"var(--app-bg)",border:"1px solid var(--app-accent-3)"},value:f,onChange:$=>{p($.target.value),y(!0),$.target.value||I()},onFocus:()=>y(!0),placeholder:"Search for a system..."}),r.system_id&&c.jsx(ft,{type:"button",variant:"ghost",onClick:I,children:"Clear"})]}),m&&o.length>0&&c.jsx("div",{className:"absolute z-10 w-full mt-1 rounded shadow-lg max-h-48 overflow-y-auto",style:{backgroundColor:"var(--app-card)",border:"1px solid var(--app-accent-3)"},children:o.map($=>c.jsxs("div",{className:"p-2 cursor-pointer hover:opacity-80",style:{borderBottom:"1px solid var(--app-accent-3)"},onClick:()=>U($),children:[c.jsx("div",{className:"font-medium",children:$.name}),$.galaxy&&c.jsx("div",{className:"text-xs muted",children:$.galaxy})]},$.id))})]})}),u&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(Il,{label:"Planet",children:c.jsxs("select",{className:"w-full p-2 rounded",style:{backgroundColor:"var(--app-bg)",border:"1px solid var(--app-accent-3)"},value:r.planet_id,onChange:$=>{k("planet_id",$.target.value),k("moon_id","")},children:[c.jsx("option",{value:"",children:"Select planet..."}),ee.map($=>c.jsx("option",{value:$.id,children:$.name||`Planet ${$.planet_index||$.id}`},$.id))]})}),c.jsx(Il,{label:"Moon (optional)",children:c.jsxs("select",{className:"w-full p-2 rounded",style:{backgroundColor:"var(--app-bg)",border:"1px solid var(--app-accent-3)"},value:r.moon_id,onChange:$=>k("moon_id",$.target.value),disabled:!r.planet_id||W.length===0,children:[c.jsx("option",{value:"",children:"Select moon..."}),W.map($=>c.jsx("option",{value:$.id,children:$.name||`Moon ${$.id}`},$.id))]})})]}),c.jsx(Il,{label:"Location Name",hint:"Specific location on the planet (e.g., 'Near the Archive portal')",children:c.jsx("input",{type:"text",className:"w-full p-2 rounded",style:{backgroundColor:"var(--app-bg)",border:"1px solid var(--app-accent-3)"},value:r.location_name,onChange:$=>k("location_name",$.target.value),placeholder:"e.g., Trading Post, Near portal, Coordinates +45.2, -12.8"})})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--app-primary)"},children:"Credits"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(Il,{label:c.jsxs(c.Fragment,{children:["Discovered By ",c.jsx("span",{className:"text-red-400",children:"*"})]}),children:c.jsx("input",{type:"text",className:"w-full p-2 rounded",style:{backgroundColor:"var(--app-bg)",border:"1px solid var(--app-accent-3)"},value:r.discovered_by,onChange:$=>k("discovered_by",$.target.value),placeholder:"In-game name or real name"})}),c.jsx(Il,{label:"Discord Username",hint:"For crediting on Discord",children:c.jsx("input",{type:"text",className:"w-full p-2 rounded",style:{backgroundColor:"var(--app-bg)",border:"1px solid var(--app-accent-3)"},value:r.discord_user_id,onChange:$=>k("discord_user_id",$.target.value),placeholder:"e.g., username#1234"})})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:"var(--app-primary)"},children:"Photos & Evidence"}),c.jsxs("div",{className:"border-2 border-dashed rounded p-4 mb-4 text-center cursor-pointer transition-colors",style:{borderColor:"var(--app-accent-3)"},onClick:()=>P.current?.click(),onDragOver:q,onDrop:Y,children:[c.jsx("input",{ref:P,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:L}),c.jsx("div",{className:"text-3xl mb-2",children:""}),c.jsx("div",{className:"text-sm",children:C?"Uploading...":"Click to upload or drag & drop photos here"}),c.jsx("div",{className:"text-xs muted mt-1",children:"First photo will be the main image"})]}),a.length>0&&c.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 mb-4",children:a.map(($,G)=>c.jsxs("div",{className:"relative aspect-square rounded overflow-hidden",style:{backgroundColor:"var(--app-bg)"},children:[c.jsx("img",{src:$.preview,alt:`Upload ${G+1}`,className:"w-full h-full object-cover"}),G===0&&c.jsx("div",{className:"absolute top-1 left-1 text-xs px-1 rounded",style:{backgroundColor:"var(--app-primary)",color:"#fff"},children:"Main"}),!$.uploaded&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:c.jsx("div",{className:"text-xs",children:"Uploading..."})}),c.jsx("button",{type:"button",className:"absolute top-1 right-1 w-5 h-5 rounded-full flex items-center justify-center text-xs",style:{backgroundColor:"rgba(0,0,0,0.7)",color:"#fff"},onClick:j=>{j.stopPropagation(),O(G)},children:""})]},G))}),c.jsx(Il,{label:"Evidence URLs",hint:"External links to screenshots, videos, etc. (one per line)",children:c.jsx("textarea",{className:"w-full p-2 rounded",style:{backgroundColor:"var(--app-bg)",border:"1px solid var(--app-accent-3)",minHeight:60},value:r.evidence_urls,onChange:$=>k("evidence_urls",$.target.value),placeholder:`https://imgur.com/abc123
https://youtube.com/watch?v=xyz`})})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",style:{borderTop:"1px solid var(--app-accent-3)"},children:[c.jsx(ft,{type:"button",variant:"ghost",onClick:e,disabled:_,children:"Cancel"}),c.jsx(ft,{type:"submit",disabled:_||C,children:_?"Submitting...":"Submit Discovery"})]})]})})}function Xte({url:t,alt:e}){return t?c.jsx("div",{className:"mt-2",children:c.jsx("img",{src:t,alt:e||"",style:{maxWidth:"100%",borderRadius:8}})}):null}function Kte(){const[t,e]=E.useState([]),[n,r]=E.useState(""),[i,a]=E.useState(null),[s,o]=E.useState(!1);E.useEffect(()=>{fetch("/api/discoveries").then(p=>p.json()).then(p=>e(p.results||[]))},[]),E.useEffect(()=>{function p(m){const y=m.detail;y&&d(y)}return window.addEventListener("openDetail",p),()=>window.removeEventListener("openDetail",p)},[t]);async function l(){const m=await(await fetch(`/api/discoveries?q=${encodeURIComponent(n)}`)).json();e(m.results||[])}function u(p){if(!p)return null;if(p.startsWith("http"))return p;try{const m=p.replace(/\\/g,"/"),y=m.lastIndexOf("/"),_=y!==-1?m.slice(y+1):m;return`/haven-ui-photos/${encodeURIComponent(_)}`}catch{return null}}async function d(p){try{const m=await fetch(`/api/discoveries/${p.id}`);if(!m.ok){a(p);return}const y=await m.json();y.photo_url&&(y._photo_static=u(y.photo_url));const _=y.evidence_url||y.evidence_urls;_&&typeof _=="string"?y._evidence=_.split(",").map(v=>v.trim()).filter(Boolean).map(v=>u(v)||v):Array.isArray(_)?y._evidence=_.map(v=>u(v)||v):y._evidence=[],a(y)}catch(m){console.error(m),a(p)}}function f(){a(null)}return c.jsxs("div",{children:[c.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[c.jsx("h2",{className:"text-2xl font-semibold",children:"Discoveries"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{className:"p-2 rounded flex-1 sm:flex-initial",value:n,onChange:p=>r(p.target.value),placeholder:"search discoveries"}),c.jsx(ft,{onClick:l,children:"Search"}),c.jsx(ft,{onClick:()=>o(!0),children:"Submit Discovery"})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((p,m)=>c.jsxs(an,{className:"cursor-pointer",onClick:()=>Zte(p),children:[c.jsx("div",{className:"font-semibold",children:p.discovery_name||p.discovery_type||p.description&&p.description.slice(0,80)||"Discovery #"+(p.id||m)}),c.jsxs("div",{className:"muted text-sm mt-1",children:[p.system_id?`System: ${p.system_id}`:""," ",p.planet_id?`  Planet: ${p.planet_id}`:""]}),c.jsx("div",{className:"mt-2 text-sm",children:p.description||""}),c.jsxs("div",{className:"mt-3 text-sm muted",children:["Discovered by: ",p.discovered_by||p.discord_user_id||"Unknown"]})]},m))}),i&&c.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:f,children:c.jsxs("div",{className:"p-6 rounded",style:{width:"90%",maxWidth:900,backgroundColor:"var(--app-card)"},onClick:p=>p.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold",children:i.discovery_name||i.discovery_type||`Discovery #${i.id}`}),c.jsx(ft,{onClick:f,variant:"ghost",children:"Close"})]}),c.jsxs("div",{className:"mt-2 text-sm muted",children:["Submitted: ",i.submission_timestamp]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("strong",{children:"Location:"})," ",i.system_id?`System: ${i.system_id}`:""," ",i.location_name?`  ${i.location_name}`:""]}),c.jsx("div",{className:"mt-3 text-sm",children:i.description}),i._photo_static&&c.jsx(Xte,{url:i._photo_static,alt:i.discovery_name}),i._evidence&&i._evidence.length>0&&c.jsxs("div",{className:"mt-3",children:[c.jsx("strong",{children:"Evidence:"}),c.jsx("div",{className:"mt-2 grid grid-cols-2 gap-2",children:i._evidence.map((p,m)=>c.jsx("div",{className:"p-1 rounded",style:{backgroundColor:"rgba(255,255,255,0.03)"},children:p.startsWith("/")?c.jsx("img",{src:p,style:{maxWidth:"100%"}}):c.jsx("a",{href:p,target:"_blank",rel:"noreferrer",children:p})},m))})]}),c.jsxs("div",{className:"mt-4 text-sm muted",children:["Discovered by: ",i.discovered_by||i.discord_user_id||"Unknown"]})]})}),c.jsx(qte,{isOpen:s,onClose:()=>o(!1),onSuccess:()=>{o(!1),fetch("/api/discoveries").then(p=>p.json()).then(p=>e(p.results||[]))}})]})}function Zte(t){const e=new CustomEvent("openDetail",{detail:t});window.dispatchEvent(e)}function TO(t){return t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}function PO(t){return t.toLocaleString()}function Qte(t,e){return e==="super_admin"?{"Core Data":["total_systems","total_planets","total_moons","total_regions","total_space_stations","total_planet_pois","total_discoveries","unique_galaxies"],Administration:["partner_accounts","sub_admin_accounts","api_keys","active_communities"],"Pending Approvals":["pending_systems","pending_region_names","pending_edit_requests"],"Audit & Activity":["approval_audit_entries","activity_log_entries","data_restrictions"]}:null}function Jte(){const t=E.useContext(kr),{isSuperAdmin:e,isPartner:n,isSubAdmin:r,user:i}=t||{},[a,s]=E.useState(null),[o,l]=E.useState(null),[u,d]=E.useState(null),[f,p]=E.useState(!0);if(E.useEffect(()=>{fetch("/api/db_stats",{credentials:"include"}).then(v=>v.json()).then(v=>{s(v.stats||null),l(v.discord_tag||null),d(v.user_type||"public")}).catch(()=>s(null)).finally(()=>p(!1))},[]),f)return c.jsx("div",{className:"flex items-center justify-center min-h-64",children:c.jsx("div",{className:"text-lg text-gray-400",children:"Loading statistics..."})});const m=Qte(a,u),y=u==="partner"||u==="sub_admin",_=()=>u==="super_admin"?"Admin Dashboard":y&&o?`${o} Statistics`:"Database Statistics";return c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold mb-2 text-cyan-400",children:_()}),y&&o&&c.jsx("div",{className:"mb-4 p-3 bg-cyan-900/30 border border-cyan-700 rounded",children:c.jsxs("p",{className:"text-cyan-300 text-sm",children:["Showing statistics for your community: ",c.jsx("strong",{className:"text-cyan-400",children:o})]})}),u==="public"&&c.jsx("div",{className:"mb-4 p-3 bg-gray-800/50 border border-gray-600 rounded",children:c.jsx("p",{className:"text-gray-400 text-sm",children:"Showing global database statistics. Log in to see community-specific stats."})}),a?c.jsx(c.Fragment,{children:u==="super_admin"&&m?c.jsx("div",{className:"space-y-6",children:Object.entries(m).map(([v,w])=>{const M=w.filter(C=>a[C]!==void 0);return M.length===0?null:c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-3 border-b border-gray-700 pb-2",children:v}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:M.map(C=>c.jsxs("div",{className:"p-4 bg-gray-800 rounded border border-gray-700 hover:border-cyan-600 transition-colors",children:[c.jsx("div",{className:"text-2xl font-bold text-white",children:PO(a[C])}),c.jsx("div",{className:"text-sm text-gray-400",children:TO(C)})]},C))})]},v)})}):c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Object.entries(a).map(([v,w])=>c.jsxs("div",{className:"p-4 bg-gray-800 rounded border border-gray-700 hover:border-cyan-600 transition-colors",children:[c.jsx("div",{className:"text-2xl font-bold text-white",children:PO(w)}),c.jsx("div",{className:"text-sm text-gray-400",children:TO(v)})]},v))})}):c.jsx("div",{className:"text-gray-400",children:"No statistics available."}),y&&o&&c.jsxs("div",{className:"mt-6 p-4 bg-gray-800/50 border border-gray-700 rounded",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"About Your Statistics"}),c.jsxs("ul",{className:"text-sm text-gray-400 space-y-1 list-disc list-inside",children:[c.jsxs("li",{children:["These statistics only include systems tagged with ",o]}),c.jsx("li",{children:"Planets, moons, and POIs are counted from your community's systems"}),c.jsx("li",{children:"Create more systems or request the admin to tag existing systems with your community tag"})]})]})]})}function ene(){const t=Es(),e=E.useContext(kr),{isAdmin:n,isSuperAdmin:r,isHavenSubAdmin:i,user:a,loading:s,canAccess:o}=e||{};function l(te){if(!te)return"";let Le=te.toLowerCase().trim();return Le.includes("#")&&(Le=Le.split("#")[0]),Le}function u(te){if(!a||r)return!1;if(te.submitter_account_id&&te.submitter_account_type)return a.type===te.submitter_account_type&&a.accountId===te.submitter_account_id;if(a.username){const Le=l(a.username);if(te.submitted_by&&l(te.submitted_by)===Le||te.personal_discord_username&&l(te.personal_discord_username)===Le)return!0}return!1}const[d,f]=E.useState(!0),[p,m]=E.useState([]),[y,_]=E.useState([]),[v,w]=E.useState([]),[M,C]=E.useState(null),[N,P]=E.useState(null),[R,k]=E.useState(null),[U,I]=E.useState(!1),[L,z]=E.useState(!1),[O,q]=E.useState(!1),[Y,X]=E.useState(!1),[ee,se]=E.useState(""),[W,$]=E.useState(!1),[G,j]=E.useState(!1),[B,ae]=E.useState(new Set),[re,de]=E.useState(!1),[ce,ie]=E.useState(!1),[le,fe]=E.useState(""),[Ne,Se]=E.useState(!1),[Z,xe]=E.useState(null),[oe,tt]=E.useState([]),[ke,st]=E.useState("all");E.useEffect(()=>{r&&qe.get("/api/discord_tags").then(te=>{tt(te.data.tags||[])}).catch(()=>{})},[r]),E.useEffect(()=>{s||(n?Ce():(alert("Admin authentication required"),t("/systems")))},[s,n,t]);async function Ce(){f(!0);try{const[te,Le,dt]=await Promise.all([qe.get("/api/pending_systems"),qe.get("/api/pending_region_names"),qe.get("/api/pending_edits")]);m(te.data.submissions||[]),_(Le.data.pending||[]),w(dt.data.requests||[])}catch(te){alert("Failed to load submissions: "+(te.response?.data?.detail||te.message))}finally{f(!1)}}async function ct(te){try{const Le=await qe.get(`/api/pending_systems/${te.id}`);C(Le.data),I(!0)}catch(Le){alert("Failed to load submission details: "+(Le.response?.data?.detail||Le.message))}}async function $e(te,Le){if(confirm(`Approve system "${Le}"?

This will add it to the main database.`)){$(!0);try{const dt=await qe.post(`/api/approve_system/${te}`);alert(`System "${Le}" approved successfully!

System ID: ${dt.data.system_id}`),I(!1),C(null),Ce()}catch(dt){alert("Approval failed: "+(dt.response?.data?.detail||dt.message))}finally{$(!1)}}}function J(te){C(te),se(""),X(!0)}async function Q(){if(!ee.trim()){alert("Please provide a rejection reason");return}$(!0);try{await qe.post(`/api/reject_system/${M.id}`,{reason:ee}),alert(`System "${M.system_name}" rejected`),X(!1),I(!1),C(null),se(""),Ce()}catch(te){alert("Rejection failed: "+(te.response?.data?.detail||te.message))}finally{$(!1)}}function ye(te){P(te),z(!0)}async function we(te){if(confirm(`Approve region name "${te.proposed_name}" for coordinates [${te.region_x}, ${te.region_y}, ${te.region_z}]?`)){$(!0);try{await qe.post(`/api/pending_region_names/${te.id}/approve`),alert(`Region name "${te.proposed_name}" approved!`),z(!1),P(null),Ce()}catch(Le){alert("Approval failed: "+(Le.response?.data?.detail||Le.message))}finally{$(!1)}}}async function De(){if(!ee.trim()){alert("Please provide a rejection reason");return}$(!0);try{await qe.post(`/api/pending_region_names/${N.id}/reject`,{reason:ee}),alert(`Region name "${N.proposed_name}" rejected`),X(!1),z(!1),P(null),se(""),Ce()}catch(te){alert("Rejection failed: "+(te.response?.data?.detail||te.message))}finally{$(!1)}}function Ue(te){k(te),q(!0)}async function it(te){if(confirm(`Approve edit request for system "${te.system_name}"?

This will apply the partner's changes to the system.`)){$(!0);try{await qe.post(`/api/pending_edits/${te.id}/approve`),alert(`Edit request approved! Changes have been applied to "${te.system_name}".`),q(!1),k(null),Ce()}catch(Le){alert("Approval failed: "+(Le.response?.data?.detail||Le.message))}finally{$(!1)}}}async function nt(){if(!ee.trim()){alert("Please provide a rejection reason");return}$(!0);try{await qe.post(`/api/pending_edits/${R.id}/reject`,{notes:ee}),alert("Edit request rejected"),X(!1),q(!1),k(null),se(""),Ce()}catch(te){alert("Rejection failed: "+(te.response?.data?.detail||te.message))}finally{$(!1)}}function ot(te){ae(Le=>{const dt=new Set(Le);return dt.has(te)?dt.delete(te):dt.add(te),dt})}function xt(){const te=ut.filter(Le=>!u(Le)).map(Le=>Le.id);ae(new Set(te))}function rt(){ae(new Set)}function be(){j(!1),ae(new Set)}async function Je(){if(B.size!==0&&confirm(`Approve ${B.size} selected system(s)?

This will add them to the main database.`)){de(!0);try{const te=await qe.post("/api/approve_systems/batch",{submission_ids:Array.from(B)});xe(te.data),Se(!0),ae(new Set),Ce()}catch(te){alert("Batch approval failed: "+(te.response?.data?.detail||te.message))}finally{de(!1)}}}async function Qe(){if(!le.trim()){alert("Please provide a rejection reason");return}de(!0);try{const te=await qe.post("/api/reject_systems/batch",{submission_ids:Array.from(B),reason:le});xe(te.data),ie(!1),fe(""),Se(!0),ae(new Set),Ce()}catch(te){alert("Batch rejection failed: "+(te.response?.data?.detail||te.message))}finally{de(!1)}}function Oe(te){const Le={pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return c.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${Le[te]||"bg-gray-100 text-gray-800"}`,children:te.toUpperCase()})}if(s||d)return c.jsx("div",{className:"p-4",children:c.jsx(an,{children:c.jsx("p",{children:"Loading submissions..."})})});const pe=p.filter(te=>te.status==="pending"),je=p.filter(te=>te.status!=="pending"),ut=r&&ke!=="all"?pe.filter(te=>ke==="untagged"?!te.discord_tag:te.discord_tag===ke):pe,ge=r&&ke!=="all"?je.filter(te=>ke==="untagged"?!te.discord_tag:te.discord_tag===ke):je,Be=y.filter(te=>te.status==="pending"),Pe=v.filter(te=>te.status==="pending");function Ke(te,Le=null){if(!te)return c.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold bg-gray-500 text-white",children:"UNTAGGED"});if(te==="personal")return c.jsxs("span",{className:"px-2 py-1 rounded text-xs font-semibold bg-fuchsia-600 text-white",children:["PERSONAL",Le?` - ${Le}`:""]});const dt={Haven:"bg-cyan-500 text-white",IEA:"bg-green-500 text-white","B.E.S":"bg-orange-500 text-white",ARCH:"bg-purple-500 text-white",TBH:"bg-yellow-500 text-black",EVRN:"bg-pink-500 text-white"};if(dt[te])return c.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${dt[te]}`,children:te});const kt=["bg-indigo-500 text-white","bg-violet-500 text-white","bg-fuchsia-500 text-white","bg-amber-500 text-black","bg-lime-500 text-black","bg-teal-500 text-white","bg-sky-500 text-white","bg-rose-500 text-white"];let Mt=0;for(let mn=0;mn<te.length;mn++)Mt=te.charCodeAt(mn)+((Mt<<5)-Mt);const Pt=Math.abs(Mt)%kt.length;return c.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${kt[Pt]}`,children:te})}return c.jsx("div",{className:"p-4",children:c.jsxs(an,{className:"max-w-6xl",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 mb-4",children:[c.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Approvals Queue"}),c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[r&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{className:"text-sm text-gray-300 hidden sm:inline",children:"Filter:"}),c.jsxs("select",{className:"p-2 border rounded bg-gray-700 text-white text-sm flex-1 sm:flex-initial",value:ke,onChange:te=>st(te.target.value),children:[c.jsx("option",{value:"all",children:"All Communities"}),c.jsx("option",{value:"untagged",children:"Untagged Only"}),oe.map(te=>c.jsxs("option",{value:te.tag,children:[te.name," (",te.tag,")"]},te.tag))]})]}),c.jsxs("div",{className:"flex gap-2",children:[o&&o(yo.BATCH_APPROVALS)&&ut.length>0&&c.jsx(ft,{className:`text-sm ${G?"bg-amber-600 hover:bg-amber-700":"bg-indigo-600 hover:bg-indigo-700"}`,onClick:()=>G?be():j(!0),children:G?"Exit Batch":"Batch Mode"}),c.jsx(ft,{className:"bg-gray-200 text-gray-800 text-sm",onClick:()=>t("/systems"),children:"Back"})]})]})]}),Be.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h3",{className:"text-xl font-semibold mb-3",children:["Pending Region Names (",Be.length,")"]}),c.jsx("div",{className:"space-y-2",children:Be.map(te=>c.jsx("div",{className:"border rounded p-3 bg-purple-700 hover:bg-purple-600",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"font-semibold text-lg",children:te.proposed_name}),c.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 mt-1",children:[c.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-semibold bg-purple-200 text-purple-800",children:"REGION"}),Oe(te.status),(r||i)&&te.discord_tag&&Ke(te.discord_tag,r?te.personal_discord_username:null)]}),c.jsxs("div",{className:"text-sm text-gray-300 mt-1",children:[c.jsxs("span",{children:["Coords: [",te.region_x,", ",te.region_y,", ",te.region_z,"]"]}),c.jsx("span",{className:"mx-2",children:""}),c.jsxs("span",{children:["By: ",te.personal_discord_username||te.submitted_by||"Anonymous"]}),c.jsx("span",{className:"mx-2",children:""}),c.jsx("span",{children:new Date(te.submission_date).toLocaleDateString()})]})]}),c.jsx("button",{onClick:()=>ye(te),className:"flex-shrink-0 px-3 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:"Review"})]})},`region-${te.id}`))})]}),r&&Pe.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h3",{className:"text-xl font-semibold mb-3",children:["Pending Edit Requests (",Pe.length,")"]}),c.jsx("div",{className:"space-y-2",children:Pe.map(te=>c.jsx("div",{className:"border rounded p-3 bg-orange-700 hover:bg-orange-600",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"font-semibold text-lg",children:te.system_name||"Unknown System"}),c.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 mt-1",children:[c.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-semibold bg-orange-200 text-orange-800",children:"EDIT"}),Oe(te.status)]}),c.jsxs("div",{className:"text-sm text-gray-300 mt-1",children:[c.jsxs("span",{children:["Partner: ",te.partner_username||"Unknown"]}),te.partner_discord_tag&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"mx-2",children:""}),c.jsx("span",{className:"text-cyan-300",children:te.partner_discord_tag})]}),c.jsx("span",{className:"mx-2",children:""}),c.jsx("span",{children:new Date(te.submitted_at).toLocaleDateString()})]}),te.explanation&&c.jsxs("div",{className:"text-sm text-yellow-300 mt-1 line-clamp-1",children:[c.jsx("span",{className:"font-medium",children:"Reason:"})," ",te.explanation]})]}),c.jsx("button",{onClick:()=>Ue(te),className:"flex-shrink-0 px-3 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:"Review"})]})},`edit-${te.id}`))})]}),G&&c.jsx("div",{className:"mb-4 p-3 bg-indigo-900 border border-indigo-500 rounded",children:c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[c.jsxs("span",{className:"text-white font-semibold text-sm",children:[B.size,"/",ut.filter(te=>!u(te)).length," selected"]}),c.jsx("button",{onClick:xt,className:"text-sm text-indigo-300 hover:text-white underline",children:"Select All"}),B.size>0&&c.jsx("button",{onClick:rt,className:"text-sm text-indigo-300 hover:text-white underline",children:"Clear"})]}),B.size>0&&c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ft,{className:"bg-green-600 hover:bg-green-700 text-white text-sm flex-1 sm:flex-initial",onClick:Je,disabled:re,children:re?"...":`Approve (${B.size})`}),c.jsx(ft,{className:"bg-red-600 hover:bg-red-700 text-white text-sm flex-1 sm:flex-initial",onClick:()=>ie(!0),disabled:re,children:re?"...":`Reject (${B.size})`})]})]})}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("h3",{className:"text-xl font-semibold mb-3",children:["Pending Systems (",ut.length,r&&ke!=="all"&&` of ${pe.length}`,")"]}),ut.length===0?c.jsx("div",{className:"text-gray-300 italic p-4 bg-cyan-700 rounded",children:ke!=="all"?"No pending submissions match the selected filter":"No pending system submissions"}):c.jsx("div",{className:"space-y-2",children:ut.map(te=>c.jsx("div",{className:`border rounded p-3 bg-cyan-700 hover:bg-cyan-600 ${G&&B.has(te.id)?"ring-2 ring-indigo-400":""}`,children:c.jsxs("div",{className:"flex items-start gap-3",children:[G&&c.jsx("div",{className:"flex-shrink-0 pt-1",children:c.jsx("input",{type:"checkbox",checked:B.has(te.id),onChange:()=>ot(te.id),disabled:u(te),className:"w-5 h-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",title:u(te)?"Cannot select your own submission":""})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"font-semibold text-lg",children:te.system_name}),c.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 mt-1",children:[Oe(te.status),te.edit_system_id&&c.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-semibold bg-orange-500 text-white",children:"EDIT"}),!te.edit_system_id&&c.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-semibold bg-green-500 text-white",children:"NEW"}),u(te)&&c.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-semibold bg-amber-500 text-black",children:"YOURS"}),(r||i)&&te.discord_tag&&Ke(te.discord_tag,r?te.personal_discord_username:null),te.source==="companion_app"&&te.api_key_name&&c.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-semibold bg-cyan-200 text-cyan-800",children:te.api_key_name})]}),c.jsxs("div",{className:"text-sm text-gray-300 mt-1",children:[c.jsxs("span",{children:["Galaxy: ",te.system_galaxy||"Euclid"]}),c.jsx("span",{className:"mx-2",children:""}),c.jsx("span",{className:te.system_data?.reality==="Permadeath"?"text-red-400":"text-green-400",children:te.system_data?.reality||"Normal"}),c.jsx("span",{className:"mx-2",children:""}),c.jsxs("span",{children:["Submitted by: ",te.personal_discord_username||te.submitted_by||"Anonymous"]}),c.jsx("span",{className:"mx-2",children:""}),c.jsxs("span",{children:["Date: ",new Date(te.submission_date).toLocaleString()]})]})]}),c.jsx("button",{onClick:()=>ct(te),className:"flex-shrink-0 px-3 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:"Review"})]})},te.id))})]}),ge.length>0&&c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xl font-semibold mb-3",children:["Recently Reviewed (",ge.length,r&&ke!=="all"&&` of ${je.length}`,")"]}),c.jsx("div",{className:"space-y-2",children:ge.slice(0,10).map(te=>c.jsxs("div",{className:"border rounded p-3 bg-cyan-700",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsx("h4",{className:"font-semibold",children:te.system_name}),Oe(te.status),te.edit_system_id&&c.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold bg-orange-500 text-white",children:"EDIT"}),!te.edit_system_id&&c.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold bg-green-500 text-white",children:"NEW"}),(r||i)&&te.discord_tag&&Ke(te.discord_tag,r?te.personal_discord_username:null)]}),c.jsxs("div",{className:"text-sm text-gray-300 mt-1",children:[c.jsxs("span",{children:["By: ",te.reviewed_by||"Unknown"]}),c.jsx("span",{className:"mx-2",children:""}),c.jsx("span",{children:te.review_date?new Date(te.review_date).toLocaleDateString():"Unknown"}),te.rejection_reason&&c.jsxs("div",{className:"text-red-300 mt-1 line-clamp-1",children:["Reason: ",te.rejection_reason]})]})]},te.id))})]}),U&&M&&c.jsx(Tr,{title:`Review: ${M.system_name}`,onClose:()=>{I(!1),C(null)},children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"border-b pb-3",children:[c.jsx("h4",{className:"font-semibold mb-2",children:"System Information"}),c.jsxs("div",{className:"text-sm space-y-1",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Name:"})," ",M.system_data?.name]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Galaxy:"})," ",M.system_data?.galaxy||"Euclid"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Reality:"})," ",c.jsx("span",{className:M.system_data?.reality==="Permadeath"?"text-red-400":"text-green-400",children:M.system_data?.reality||"Normal"})]}),M.glyph_code&&c.jsxs("div",{className:"mb-2",children:[c.jsx("strong",{children:"Glyph Code:"}),c.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[c.jsx(yz,{glyphCode:M.glyph_code,size:"medium"}),c.jsxs("span",{className:"font-mono text-xs text-gray-400",children:["(",M.glyph_code,")"]})]})]}),M.system_data?.region_x!==void 0&&M.system_data?.region_x!==null&&c.jsxs("p",{children:[c.jsx("strong",{children:"Region:"})," [",M.system_data.region_x,", ",M.system_data.region_y,", ",M.system_data.region_z,"]"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Coordinates:"})," (",M.system_data?.x||0,", ",M.system_data?.y||0,", ",M.system_data?.z||0,")"]}),(()=>{const te=M.system_data?.star_color||M.system_data?.star_type;return te&&te!=="Unknown"?c.jsxs("p",{children:[c.jsx("strong",{children:"Star Color:"})," ",c.jsx("span",{className:te==="Yellow"?"text-yellow-400":te==="Red"?"text-red-400":te==="Green"?"text-green-400":te==="Blue"?"text-blue-400":"",children:te})]}):null})(),M.system_data?.economy_type&&M.system_data.economy_type!=="Unknown"&&c.jsxs("p",{children:[c.jsx("strong",{children:"Economy:"})," ",M.system_data.economy_type," ",M.system_data.economy_level&&M.system_data.economy_level!=="Unknown"&&`(${M.system_data.economy_level})`]}),M.system_data?.conflict_level&&M.system_data.conflict_level!=="Unknown"&&c.jsxs("p",{children:[c.jsx("strong",{children:"Conflict:"})," ",c.jsx("span",{className:M.system_data.conflict_level==="High"?"text-red-400":M.system_data.conflict_level==="Low"?"text-green-400":"text-yellow-400",children:M.system_data.conflict_level})]}),M.system_data?.dominant_lifeform&&M.system_data.dominant_lifeform!=="Unknown"&&c.jsxs("p",{children:[c.jsx("strong",{children:"Dominant Lifeform:"})," ",M.system_data.dominant_lifeform]}),M.system_data?.stellar_classification&&c.jsxs("p",{children:[c.jsx("strong",{children:"Spectral Class:"})," ",c.jsx("span",{className:`font-mono ${(()=>{switch(M.system_data.stellar_classification[0]?.toUpperCase()){case"O":case"B":return"text-blue-300";case"F":case"G":return"text-yellow-300";case"K":case"M":return"text-red-400";case"E":return"text-green-400";case"X":case"Y":return"text-purple-400";default:return"text-gray-300"}})()}`,children:M.system_data.stellar_classification})]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Description:"})," ",M.system_data?.description||"None"]})]})]}),M.system_data?.planets&&M.system_data.planets.length>0&&c.jsxs("div",{className:"border-b pb-3",children:[c.jsxs("h4",{className:"font-semibold mb-2",children:["Planets (",M.system_data.planets.length,")"]}),c.jsx("div",{className:"space-y-3",children:M.system_data.planets.map((te,Le)=>c.jsxs("div",{className:"text-sm bg-cyan-700 p-3 rounded",children:[c.jsx("div",{className:"flex items-start gap-3",children:c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("p",{className:"font-semibold text-base",children:te.name}),te.planet_size&&te.planet_size!=="Unknown"&&c.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${te.planet_size==="Large"?"bg-purple-600 text-white":te.planet_size==="Medium"?"bg-blue-600 text-white":te.planet_size==="Small"?"bg-green-600 text-white":"bg-gray-600 text-white"}`,children:te.planet_size})]}),(te.biome||te.biome_subtype)&&c.jsxs("div",{className:"mb-2 text-gray-300",children:[te.biome&&te.biome!=="Unknown"&&c.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-medium mr-2 ${te.biome==="Lush"?"bg-green-700":te.biome==="Toxic"?"bg-yellow-700":te.biome==="Scorched"?"bg-orange-700":te.biome==="Radioactive"?"bg-lime-700":te.biome==="Frozen"?"bg-cyan-700":te.biome==="Barren"?"bg-stone-700":te.biome==="Dead"?"bg-gray-700":te.biome==="Weird"?"bg-purple-700":te.biome==="Swamp"?"bg-emerald-800":te.biome==="Lava"?"bg-red-700":"bg-gray-600"}`,children:te.biome}),te.biome_subtype&&te.biome_subtype!=="Unknown"&&te.biome_subtype!=="None"&&c.jsxs("span",{className:"text-xs text-gray-400",children:["(",te.biome_subtype,")"]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-gray-300",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Sentinel:"})," ",te.sentinel||te.sentinels||"None"]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Fauna:"})," ",te.fauna||"N/A",te.fauna_count>0&&` (${te.fauna_count})`]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Flora:"})," ",te.flora||"N/A",te.flora_count>0&&` (${te.flora_count})`]}),(te.climate||te.weather)&&c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Weather:"})," ",te.climate||te.weather]}),te.has_water===1&&c.jsx("div",{children:c.jsx("span",{className:"text-cyan-300",children:"Has Water"})})]})]})}),(te.materials||te.resources&&te.resources.length>0)&&c.jsxs("div",{className:"mt-2 text-gray-300",children:[c.jsx("span",{className:"text-gray-400",children:"Resources:"})," ",te.materials||te.resources?.join(", ")]}),te.base_location&&c.jsxs("div",{className:"mt-1 text-gray-300",children:[c.jsx("span",{className:"text-gray-400",children:"Base Location:"})," ",te.base_location]}),te.description&&c.jsxs("div",{className:"mt-1 text-gray-300",children:[c.jsx("span",{className:"text-gray-400",children:"Description:"})," ",te.description]}),te.notes&&c.jsxs("div",{className:"mt-1 text-gray-300",children:[c.jsx("span",{className:"text-gray-400",children:"Notes:"})," ",te.notes]}),te.photo&&c.jsxs("div",{className:"mt-2",children:[c.jsx("span",{className:"text-gray-400",children:"Photo:"})," ",c.jsx("span",{className:"text-cyan-300",children:te.photo})]}),te.moons&&te.moons.length>0&&c.jsxs("div",{className:"mt-2 ml-3 border-l-2 border-cyan-500 pl-3",children:[c.jsxs("p",{className:"text-gray-400 text-xs mb-1",children:["Moons (",te.moons.length,"):"]}),te.moons.map((dt,kt)=>c.jsxs("div",{className:"mb-2 text-xs",children:[c.jsx("p",{className:"font-medium",children:dt.name}),c.jsxs("div",{className:"grid grid-cols-2 gap-1 mt-1 text-gray-300",children:[dt.biome&&dt.biome!=="Unknown"&&c.jsxs("div",{children:["Biome: ",dt.biome]}),c.jsxs("div",{children:["Sentinel: ",dt.sentinel||dt.sentinels||"None"]}),c.jsxs("div",{children:["Fauna: ",dt.fauna||"N/A"]}),c.jsxs("div",{children:["Flora: ",dt.flora||"N/A"]}),(dt.materials||dt.resources&&dt.resources.length>0)&&c.jsxs("div",{className:"col-span-2",children:["Resources: ",dt.materials||dt.resources?.join(", ")]})]})]},kt))]})]},Le))})]}),M.system_data?.moons&&M.system_data.moons.length>0&&c.jsxs("div",{className:"border-b pb-3 ml-4 border-l-2 border-gray-600 pl-4",children:[c.jsxs("h4",{className:"font-semibold mb-2 text-gray-300",children:[c.jsx("span",{className:"text-gray-500",children:""})," System Moons (",M.system_data.moons.length,")"]}),c.jsx("div",{className:"space-y-2",children:M.system_data.moons.map((te,Le)=>c.jsxs("div",{className:"text-sm bg-gray-700/70 p-3 rounded",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("p",{className:"font-semibold",children:te.name}),c.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-gray-500 text-white",children:"Moon"}),te.planet_size&&te.planet_size!=="Unknown"&&c.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-gray-600",children:te.planet_size}),te.biome&&te.biome!=="Unknown"&&c.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${te.biome==="Lush"?"bg-green-700":te.biome==="Toxic"?"bg-yellow-700":te.biome==="Scorched"?"bg-orange-700":te.biome==="Radioactive"?"bg-lime-700":te.biome==="Frozen"?"bg-cyan-700":te.biome==="Barren"?"bg-stone-700":te.biome==="Dead"?"bg-gray-700":te.biome==="Weird"?"bg-purple-700":"bg-gray-600"}`,children:te.biome})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-gray-300",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Sentinel:"})," ",te.sentinel||te.sentinels||"None"]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Fauna:"})," ",te.fauna||"N/A"]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Flora:"})," ",te.flora||"N/A"]}),(te.climate||te.weather)&&c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Weather:"})," ",te.climate||te.weather]})]}),(te.materials||te.resources&&te.resources.length>0)&&c.jsxs("div",{className:"mt-2 text-gray-300",children:[c.jsx("span",{className:"text-gray-400",children:"Resources:"})," ",te.materials||te.resources?.join(", ")]})]},Le))})]}),M.system_data?.space_station&&c.jsxs("div",{className:"border-b pb-3",children:[c.jsx("h4",{className:"font-semibold mb-2",children:"Space Station"}),c.jsxs("div",{className:"text-sm",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Name:"})," ",M.system_data.space_station.name]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Race:"})," ",M.system_data.space_station.race]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Position:"})," (",M.system_data.space_station.x,", ",M.system_data.space_station.y,", ",M.system_data.space_station.z,")"]})]})]}),c.jsxs("div",{className:"text-sm text-gray-600",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Submitted by:"})," ",M.personal_discord_username||M.submitted_by||"Anonymous"]}),r&&M.personal_id&&c.jsxs("p",{children:[c.jsx("strong",{children:"Discord ID:"})," ",c.jsx("span",{className:"font-mono text-xs",children:M.personal_id})]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Submission Date:"})," ",new Date(M.submission_date).toLocaleString()]}),M.source&&c.jsxs("p",{children:[c.jsx("strong",{children:"Source:"})," ",c.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${M.source==="haven_extractor"?"bg-purple-600 text-white":M.source==="companion_app"?"bg-cyan-600 text-white":"bg-gray-600 text-white"}`,children:M.source==="haven_extractor"?"Haven Extractor":M.source})]}),M.api_key_name&&c.jsxs("p",{children:[c.jsx("strong",{children:"API Key:"})," ",M.api_key_name]}),r&&M.submitted_by_ip&&c.jsxs("p",{children:[c.jsx("strong",{children:"IP Address:"})," ",M.submitted_by_ip]}),(r||i)&&M.discord_tag&&c.jsxs("p",{className:"mt-2",children:[c.jsx("strong",{children:"Discord Community:"})," ",Ke(M.discord_tag,r?M.personal_discord_username:null)]})]}),M.status==="pending"&&c.jsxs("div",{className:"pt-3 border-t",children:[u(M)&&c.jsx("div",{className:"mb-3 p-3 bg-amber-900/50 border border-amber-500 rounded",children:c.jsxs("p",{className:"text-amber-300 text-sm",children:[c.jsx("strong",{children:"You submitted this system."})," Another admin must review and approve it to prevent conflicts of interest."]})}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[c.jsx(ft,{className:"btn-primary bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm w-full sm:w-auto",onClick:()=>$e(M.id,M.system_name),disabled:W||u(M),title:u(M)?"You cannot approve your own submission":"",children:u(M)?"Cannot Self-Approve":W?"Approving...":"Approve"}),c.jsx(ft,{className:"bg-red-600 text-white hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm w-full sm:w-auto",onClick:()=>{I(!1),J(M)},disabled:W||u(M),title:u(M)?"You cannot reject your own submission":"",children:u(M)?"Cannot Reject":"Reject"}),c.jsx(ft,{className:"bg-gray-200 text-gray-800 text-sm w-full sm:w-auto",onClick:()=>{I(!1),C(null)},disabled:W,children:"Close"})]})]})]})}),Y&&M&&c.jsx(Tr,{title:`Reject: ${M.system_name}`,onClose:()=>{X(!1),C(null),se("")},children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-gray-700",children:"Please provide a reason for rejecting this submission. This will help the submitter understand why their system was not approved."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Rejection Reason"}),c.jsx("textarea",{className:"w-full border rounded p-2",rows:"4",value:ee,onChange:te=>se(te.target.value),placeholder:"e.g., Duplicate system, incomplete information, violates naming guidelines..."})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[c.jsx(ft,{className:"bg-red-600 text-white hover:bg-red-700 text-sm w-full sm:w-auto",onClick:Q,disabled:W||!ee.trim(),children:W?"Rejecting...":"Confirm Rejection"}),c.jsx(ft,{className:"bg-gray-200 text-gray-800 text-sm w-full sm:w-auto",onClick:()=>{X(!1),se(""),I(!0)},disabled:W,children:"Cancel"})]})]})}),L&&N&&c.jsx(Tr,{title:`Review Region Name: ${N.proposed_name}`,onClose:()=>{z(!1),P(null)},children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"border-b pb-3",children:[c.jsx("h4",{className:"font-semibold mb-2",children:"Region Name Submission"}),c.jsxs("div",{className:"text-sm space-y-1",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Proposed Name:"})," ",N.proposed_name]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Region Coordinates:"})," [",N.region_x,", ",N.region_y,", ",N.region_z,"]"]})]})]}),c.jsxs("div",{className:"text-sm text-gray-600",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Submitted by:"})," ",N.personal_discord_username||N.submitted_by||"Anonymous"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Submission Date:"})," ",new Date(N.submission_date).toLocaleString()]}),r&&N.submitted_by_ip&&c.jsxs("p",{children:[c.jsx("strong",{children:"IP Address:"})," ",N.submitted_by_ip]}),(r||i)&&N.discord_tag&&c.jsxs("p",{className:"mt-2",children:[c.jsx("strong",{children:"Discord Community:"})," ",Ke(N.discord_tag,r?N.personal_discord_username:null)]})]}),N.status==="pending"&&c.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-3 border-t",children:[c.jsx(ft,{className:"btn-primary bg-green-600 hover:bg-green-700 text-sm w-full sm:w-auto",onClick:()=>we(N),disabled:W,children:W?"Approving...":"Approve"}),c.jsx(ft,{className:"bg-red-600 text-white hover:bg-red-700 text-sm w-full sm:w-auto",onClick:()=>{z(!1),se(""),X(!0)},disabled:W,children:"Reject"}),c.jsx(ft,{className:"bg-gray-200 text-gray-800 text-sm w-full sm:w-auto",onClick:()=>{z(!1),P(null)},disabled:W,children:"Close"})]})]})}),Y&&N&&c.jsx(Tr,{title:`Reject: ${N.proposed_name}`,onClose:()=>{X(!1),P(null),se("")},children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-gray-700",children:"Please provide a reason for rejecting this region name submission."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Rejection Reason"}),c.jsx("textarea",{className:"w-full border rounded p-2",rows:"4",value:ee,onChange:te=>se(te.target.value),placeholder:"e.g., Name already in use, inappropriate name, etc..."})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[c.jsx(ft,{className:"bg-red-600 text-white hover:bg-red-700 text-sm w-full sm:w-auto",onClick:De,disabled:W||!ee.trim(),children:W?"Rejecting...":"Confirm Rejection"}),c.jsx(ft,{className:"bg-gray-200 text-gray-800 text-sm w-full sm:w-auto",onClick:()=>{X(!1),se(""),z(!0)},disabled:W,children:"Cancel"})]})]})}),O&&R&&c.jsx(Tr,{title:`Review Edit Request: ${R.system_name||"Unknown System"}`,onClose:()=>{q(!1),k(null)},children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"border-b pb-3",children:[c.jsx("h4",{className:"font-semibold mb-2",children:"Submitted By"}),c.jsxs("div",{className:"text-sm space-y-1",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Partner:"})," ",R.partner_username||"Unknown"]}),R.partner_discord_tag&&c.jsxs("p",{children:[c.jsx("strong",{children:"Discord Tag:"})," ",c.jsx("span",{className:"text-cyan-400",children:R.partner_discord_tag})]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Submitted:"})," ",new Date(R.submitted_at).toLocaleString()]})]})]}),c.jsxs("div",{className:"border-b pb-3",children:[c.jsx("h4",{className:"font-semibold mb-2",children:"Reason for Edit"}),c.jsx("div",{className:"bg-yellow-900/30 border border-yellow-700 rounded p-3 text-yellow-200",children:R.explanation||"No explanation provided"})]}),c.jsxs("div",{className:"border-b pb-3",children:[c.jsx("h4",{className:"font-semibold mb-2",children:"Proposed Changes"}),c.jsx("div",{className:"text-sm bg-gray-700 p-3 rounded max-h-64 overflow-y-auto",children:R.edit_data?c.jsxs("div",{className:"space-y-1",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"System Name:"})," ",R.edit_data.name]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Galaxy:"})," ",R.edit_data.galaxy||"Euclid"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Reality:"})," ",c.jsx("span",{className:R.edit_data.reality==="Permadeath"?"text-red-400":"text-green-400",children:R.edit_data.reality||"Normal"})]}),R.edit_data.description&&c.jsxs("p",{children:[c.jsx("strong",{children:"Description:"})," ",R.edit_data.description]}),R.edit_data.planets&&c.jsxs("p",{children:[c.jsx("strong",{children:"Planets:"})," ",R.edit_data.planets.length]}),R.edit_data.discord_tag&&c.jsxs("p",{children:[c.jsx("strong",{children:"New Discord Tag:"})," ",c.jsx("span",{className:"text-cyan-400",children:R.edit_data.discord_tag})]})]}):c.jsx("p",{className:"text-gray-400",children:"No edit data available"})})]}),R.status==="pending"&&c.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-3 border-t",children:[c.jsx(ft,{className:"btn-primary bg-green-600 hover:bg-green-700 text-sm w-full sm:w-auto",onClick:()=>it(R),disabled:W,children:W?"Approving...":"Approve"}),c.jsx(ft,{className:"bg-red-600 text-white hover:bg-red-700 text-sm w-full sm:w-auto",onClick:()=>{q(!1),se(""),X(!0)},disabled:W,children:"Reject"}),c.jsx(ft,{className:"bg-gray-200 text-gray-800 text-sm w-full sm:w-auto",onClick:()=>{q(!1),k(null)},disabled:W,children:"Close"})]})]})}),Y&&R&&c.jsx(Tr,{title:`Reject Edit: ${R.system_name||"Unknown System"}`,onClose:()=>{X(!1),k(null),se("")},children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-gray-700",children:"Please provide a reason for rejecting this edit request. This will be visible to the partner."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Rejection Reason"}),c.jsx("textarea",{className:"w-full border rounded p-2",rows:"4",value:ee,onChange:te=>se(te.target.value),placeholder:"e.g., Edit not appropriate, system belongs to another community, etc..."})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[c.jsx(ft,{className:"bg-red-600 text-white hover:bg-red-700 text-sm w-full sm:w-auto",onClick:nt,disabled:W||!ee.trim(),children:W?"Rejecting...":"Confirm Rejection"}),c.jsx(ft,{className:"bg-gray-200 text-gray-800 text-sm w-full sm:w-auto",onClick:()=>{X(!1),se(""),q(!0)},disabled:W,children:"Cancel"})]})]})}),ce&&c.jsx(Tr,{title:`Batch Reject ${B.size} Submission(s)`,onClose:()=>{ie(!1),fe("")},children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("p",{className:"text-sm text-gray-700",children:["Please provide a reason for rejecting these ",B.size," submission(s). This reason will be applied to all selected items."]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Rejection Reason"}),c.jsx("textarea",{className:"w-full border rounded p-2",rows:"4",value:le,onChange:te=>fe(te.target.value),placeholder:"e.g., Duplicate systems, incomplete information, violates naming guidelines..."})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[c.jsx(ft,{className:"bg-red-600 text-white hover:bg-red-700 text-sm w-full sm:w-auto",onClick:Qe,disabled:re||!le.trim(),children:re?"Rejecting...":`Reject ${B.size}`}),c.jsx(ft,{className:"bg-gray-200 text-gray-800 text-sm w-full sm:w-auto",onClick:()=>{ie(!1),fe("")},disabled:re,children:"Cancel"})]})]})}),Ne&&Z&&c.jsx(Tr,{title:"Batch Operation Results",onClose:()=>{Se(!1),xe(null)},children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[c.jsxs("div",{className:"p-3 bg-green-900/50 border border-green-500 rounded",children:[c.jsx("div",{className:"text-2xl font-bold text-green-400",children:Z.summary?.approved||Z.summary?.rejected||0}),c.jsx("div",{className:"text-sm text-green-300",children:Z.results?.approved?"Approved":"Rejected"})]}),c.jsxs("div",{className:"p-3 bg-red-900/50 border border-red-500 rounded",children:[c.jsx("div",{className:"text-2xl font-bold text-red-400",children:Z.summary?.failed||0}),c.jsx("div",{className:"text-sm text-red-300",children:"Failed"})]}),c.jsxs("div",{className:"p-3 bg-amber-900/50 border border-amber-500 rounded",children:[c.jsx("div",{className:"text-2xl font-bold text-amber-400",children:Z.summary?.skipped||0}),c.jsx("div",{className:"text-sm text-amber-300",children:"Skipped"})]})]}),c.jsxs("div",{className:"max-h-64 overflow-y-auto space-y-3",children:[(Z.results?.approved?.length>0||Z.results?.rejected?.length>0)&&c.jsxs("div",{children:[c.jsxs("h4",{className:"font-semibold text-green-400 mb-1",children:[Z.results?.approved?"Approved":"Rejected",":"]}),c.jsx("ul",{className:"text-sm space-y-1",children:(Z.results?.approved||Z.results?.rejected||[]).map(te=>c.jsx("li",{className:"text-gray-300",children:te.name||`ID: ${te.id}`},te.id))})]}),Z.results?.failed?.length>0&&c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-red-400 mb-1",children:"Failed:"}),c.jsx("ul",{className:"text-sm space-y-1",children:Z.results.failed.map(te=>c.jsxs("li",{className:"text-red-300",children:[te.name||`ID: ${te.id}`,": ",te.error]},te.id))})]}),Z.results?.skipped?.length>0&&c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-amber-400 mb-1",children:"Skipped:"}),c.jsx("ul",{className:"text-sm space-y-1",children:Z.results.skipped.map(te=>c.jsxs("li",{className:"text-amber-300",children:[te.name||`ID: ${te.id}`,": ",te.reason]},te.id))})]})]}),c.jsx("div",{className:"pt-3 border-t",children:c.jsx(ft,{className:"bg-gray-200 text-gray-800",onClick:()=>{Se(!1),xe(null)},children:"Close"})})]})})]})})}function tne(){const t=Es(),[e,n]=E.useState(!1),[r,i]=E.useState(!0),[a,s]=E.useState([]),[o,l]=E.useState(!1),[u,d]=E.useState(!1),[f,p]=E.useState(null),[m,y]=E.useState(!1),[_,v]=E.useState([]),[w,M]=E.useState(!1),[C,N]=E.useState(null),[P,R]=E.useState(""),[k,U]=E.useState(200),[I,L]=E.useState(""),[z,O]=E.useState(""),[q,Y]=E.useState(200),[X,ee]=E.useState("");E.useEffect(()=>{nZ().then(ce=>{n(ce.logged_in),ce.logged_in?(W(),se()):(alert("Admin authentication required"),t("/systems"))}).catch(()=>{alert("Failed to verify admin status"),t("/systems")})},[t]);async function se(){try{const ce=await qe.get("/api/discord_tags");v(ce.data.tags||[])}catch(ce){console.error("Failed to load discord tags:",ce)}}async function W(){i(!0);try{const ce=await qe.get("/api/keys");s(ce.data.keys||[])}catch(ce){alert("Failed to load API keys: "+(ce.response?.data?.detail||ce.message))}finally{i(!1)}}async function $(){if(!P.trim()){alert("Please enter a name for the API key");return}y(!0);try{const ce=await qe.post("/api/keys",{name:P.trim(),rate_limit:k,permissions:["submit","check_duplicate"],discord_tag:I||null});p(ce.data),l(!1),d(!0),R(""),U(200),L(""),W()}catch(ce){alert("Failed to create API key: "+(ce.response?.data?.detail||ce.message))}finally{y(!1)}}async function G(ce,ie){if(confirm(`Revoke API key "${ie}"?

This will immediately invalidate the key. Any companion apps using it will stop working.`)){y(!0);try{await qe.delete(`/api/keys/${ce}`),alert(`API key "${ie}" has been revoked.`),W()}catch(le){alert("Failed to revoke API key: "+(le.response?.data?.detail||le.message))}finally{y(!1)}}}async function j(ce,ie){y(!0);try{await qe.put(`/api/keys/${ce}`,{is_active:!0}),alert(`API key "${ie}" has been reactivated.`),W()}catch(le){alert("Failed to reactivate API key: "+(le.response?.data?.detail||le.message))}finally{y(!1)}}function B(ce){N(ce),O(ce.name),Y(ce.rate_limit),ee(ce.discord_tag||""),M(!0)}async function ae(){if(!z.trim()){alert("Please enter a name for the API key");return}y(!0);try{await qe.put(`/api/keys/${C.id}`,{name:z.trim(),rate_limit:q,discord_tag:X||null}),alert(`API key "${z}" has been updated.`),M(!1),N(null),W()}catch(ce){alert("Failed to update API key: "+(ce.response?.data?.detail||ce.message))}finally{y(!1)}}function re(ce){navigator.clipboard.writeText(ce).then(()=>{alert("API key copied to clipboard!")}).catch(()=>{alert("Failed to copy to clipboard. Please copy manually.")})}function de(ce){return ce?new Date(ce).toLocaleString():"Never"}return r?c.jsx("div",{className:"flex items-center justify-center min-h-64",children:c.jsx("div",{className:"text-lg text-gray-400",children:"Loading API keys..."})}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-cyan-400",children:"API Keys"}),c.jsx("p",{className:"text-gray-400 mt-1",children:"Manage API keys for the NMS Save Watcher companion app and other integrations"})]}),c.jsx(ft,{onClick:()=>l(!0),disabled:m,children:"+ Create New Key"})]}),c.jsx(an,{className:"bg-gray-800/50 border border-cyan-900/50",children:c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"text-cyan-400 font-semibold mb-2",children:"About API Keys"}),c.jsxs("ul",{className:"text-gray-300 text-sm space-y-1 list-disc list-inside",children:[c.jsx("li",{children:"API keys allow external applications to submit systems to Voyagers Haven"}),c.jsx("li",{children:"Submissions via API key go to the pending approval queue (same as manual submissions)"}),c.jsx("li",{children:"Each key has its own rate limit (default: 200 requests/hour)"}),c.jsx("li",{children:"Keys are shown only once when created - save them securely!"}),c.jsx("li",{children:"Revoked keys can be reactivated if needed"})]})]})}),a.length===0?c.jsx(an,{className:"bg-gray-800/50",children:c.jsxs("div",{className:"p-8 text-center text-gray-400",children:[c.jsx("p",{className:"text-lg mb-2",children:"No API keys yet"}),c.jsx("p",{className:"text-sm",children:"Create an API key to allow the NMS Save Watcher companion app to submit discoveries."})]})}):c.jsx("div",{className:"space-y-4",children:a.map(ce=>c.jsx(an,{className:`bg-gray-800/50 border ${ce.is_active?"border-gray-700":"border-red-900/50"}`,children:c.jsx("div",{className:"p-4",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("h3",{className:"text-lg font-semibold text-white",children:ce.name}),ce.is_active?c.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-900/50 text-green-400 border border-green-700",children:"Active"}):c.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-red-900/50 text-red-400 border border-red-700",children:"Revoked"}),ce.discord_tag&&c.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full border ${ce.discord_tag==="personal"?"bg-fuchsia-900/50 text-fuchsia-400 border-fuchsia-700":"bg-cyan-900/50 text-cyan-400 border-cyan-700"}`,children:ce.discord_tag})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-500",children:"Key Prefix:"}),c.jsxs("p",{className:"text-gray-300 font-mono",children:[ce.key_prefix,"..."]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-500",children:"Rate Limit:"}),c.jsxs("p",{className:"text-gray-300",children:[ce.rate_limit,"/hour"]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-500",children:"Created:"}),c.jsx("p",{className:"text-gray-300",children:de(ce.created_at)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-500",children:"Last Used:"}),c.jsx("p",{className:"text-gray-300",children:de(ce.last_used_at)})]})]}),c.jsxs("div",{className:"mt-2",children:[c.jsx("span",{className:"text-gray-500 text-sm",children:"Permissions: "}),c.jsx("span",{className:"text-gray-400 text-sm",children:(ce.permissions||[]).join(", ")||"None"})]})]}),c.jsxs("div",{className:"flex gap-2 ml-4",children:[c.jsx(ft,{variant:"secondary",size:"sm",onClick:()=>B(ce),disabled:m,children:"Edit"}),ce.is_active?c.jsx(ft,{variant:"danger",size:"sm",onClick:()=>G(ce.id,ce.name),disabled:m,children:"Revoke"}):c.jsx(ft,{variant:"secondary",size:"sm",onClick:()=>j(ce.id,ce.name),disabled:m,children:"Reactivate"})]})]})})},ce.id))}),c.jsx(Tr,{isOpen:o,onClose:()=>l(!1),title:"Create API Key",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Key Name *"}),c.jsx("input",{type:"text",value:P,onChange:ce=>R(ce.target.value),placeholder:"e.g., Parker's Companion App",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500"}),c.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"A descriptive name to identify this key"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Rate Limit (requests/hour)"}),c.jsx("input",{type:"number",value:k,onChange:ce=>U(parseInt(ce.target.value)||200),min:"1",max:"1000",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-cyan-500"}),c.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Maximum submissions per hour (default: 200)"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Discord Community Tag"}),c.jsxs("select",{value:I,onChange:ce=>L(ce.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[c.jsx("option",{value:"",children:"-- Select a tag --"}),c.jsx("option",{value:"personal",children:"Personal"}),_.map(ce=>c.jsxs("option",{value:ce.tag,children:[ce.name," (",ce.tag,")"]},ce.tag))]}),c.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Submissions via this key will be auto-tagged with this community"})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-700",children:[c.jsx(ft,{variant:"secondary",onClick:()=>l(!1),children:"Cancel"}),c.jsx(ft,{onClick:$,disabled:m||!P.trim(),children:m?"Creating...":"Create Key"})]})]})}),c.jsx(Tr,{isOpen:u,onClose:()=>d(!1),title:"API Key Created",children:f&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"bg-yellow-900/30 border border-yellow-700 rounded p-4",children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-yellow-500 text-xl",children:""}),c.jsxs("div",{children:[c.jsx("p",{className:"text-yellow-400 font-semibold",children:"Save this key now!"}),c.jsx("p",{className:"text-yellow-300 text-sm",children:"This is the only time the full key will be shown. Store it securely."})]})]})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Your API Key"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:f.key,readOnly:!0,className:"flex-1 px-3 py-2 bg-gray-900 border border-gray-600 rounded text-cyan-400 font-mono text-sm"}),c.jsx(ft,{onClick:()=>re(f.key),children:"Copy"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-500",children:"Name:"}),c.jsx("p",{className:"text-white",children:f.name})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-500",children:"Rate Limit:"}),c.jsxs("p",{className:"text-white",children:[f.rate_limit,"/hour"]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-500",children:"Discord Tag:"}),c.jsx("p",{className:"text-white",children:f.discord_tag||"None"})]})]}),c.jsxs("div",{className:"bg-gray-800 rounded p-4 text-sm",children:[c.jsx("p",{className:"text-gray-400 mb-2",children:"To use this key with the NMS Save Watcher companion app:"}),c.jsxs("ol",{className:"list-decimal list-inside text-gray-300 space-y-1",children:[c.jsx("li",{children:"Open the companion app's web dashboard"}),c.jsx("li",{children:"Go to Settings"}),c.jsx("li",{children:"Paste this API key in the API Key field"}),c.jsx("li",{children:"Save your settings"})]})]}),c.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-700",children:c.jsx(ft,{onClick:()=>d(!1),children:"I've Saved the Key"})})]})}),c.jsx(Tr,{isOpen:w,onClose:()=>M(!1),title:"Edit API Key",children:C&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Key Name *"}),c.jsx("input",{type:"text",value:z,onChange:ce=>O(ce.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Rate Limit (requests/hour)"}),c.jsx("input",{type:"number",value:q,onChange:ce=>Y(parseInt(ce.target.value)||200),min:"1",max:"1000",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-cyan-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Discord Community Tag"}),c.jsxs("select",{value:X,onChange:ce=>ee(ce.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[c.jsx("option",{value:"",children:"-- No tag --"}),c.jsx("option",{value:"personal",children:"Personal"}),_.map(ce=>c.jsxs("option",{value:ce.tag,children:[ce.name," (",ce.tag,")"]},ce.tag))]}),c.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Submissions via this key will be auto-tagged with this community"})]}),c.jsxs("div",{className:"text-sm text-gray-400",children:[c.jsx("span",{className:"text-gray-500",children:"Key Prefix:"})," ",C.key_prefix,"..."]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-700",children:[c.jsx(ft,{variant:"secondary",onClick:()=>M(!1),children:"Cancel"}),c.jsx(ft,{onClick:ae,disabled:m||!z.trim(),children:m?"Saving...":"Save Changes"})]})]})})]})}const mM=[{id:"system_create",label:"Create Systems",description:"Can create new star systems"},{id:"system_edit",label:"Edit Systems",description:"Can edit systems tagged with their Discord"},{id:"approvals",label:"View Approvals",description:"Can approve/reject pending submissions for their Discord"},{id:"batch_approvals",label:"Batch Approvals",description:"Can approve or reject multiple submissions at once"},{id:"stats",label:"View Statistics",description:"Can view database statistics for their Discord"},{id:"settings",label:"Theme Settings",description:"Can customize their theme colors"},{id:"csv_import",label:"CSV Import",description:"Can bulk import star systems from CSV files"}];function nne(){const t=Es(),e=E.useContext(kr),[n,r]=E.useState([]),[i,a]=E.useState(!0),[s,o]=E.useState(!1),[l,u]=E.useState(!1),[d,f]=E.useState(!1),[p,m]=E.useState(!1),[y,_]=E.useState(null),[v,w]=E.useState({username:"",password:"",discord_tag:"",display_name:"",enabled_features:[]});E.useEffect(()=>{if(!e.isSuperAdmin){alert("Super admin access required"),t("/systems");return}M()},[e.isSuperAdmin,t]);async function M(){a(!0);try{const O=await qe.get("/api/partners");r(O.data.partners||[])}catch(O){alert("Failed to load partners: "+(O.response?.data?.detail||O.message))}finally{a(!1)}}function C(){w({username:"",password:"",discord_tag:"",display_name:"",enabled_features:[]})}async function N(){if(!v.username.trim()||v.username.length<3){alert("Username must be at least 3 characters");return}if(!v.password||v.password.length<4){alert("Password must be at least 4 characters");return}o(!0);try{await qe.post("/api/partners",{username:v.username.trim(),password:v.password,discord_tag:v.discord_tag.trim()||null,display_name:v.display_name.trim()||v.username.trim(),enabled_features:v.enabled_features}),alert("Partner account created successfully!"),u(!1),C(),M()}catch(O){alert("Failed to create partner: "+(O.response?.data?.detail||O.message))}finally{o(!1)}}async function P(){o(!0);try{await qe.put(`/api/partners/${y.id}`,{discord_tag:v.discord_tag.trim()||null,display_name:v.display_name.trim(),enabled_features:v.enabled_features}),alert("Partner updated successfully!"),f(!1),M()}catch(O){alert("Failed to update partner: "+(O.response?.data?.detail||O.message))}finally{o(!1)}}async function R(){if(!v.password||v.password.length<4){alert("Password must be at least 4 characters");return}o(!0);try{await qe.post(`/api/partners/${y.id}/reset_password`,{password:v.password}),alert("Password reset successfully!"),m(!1),C()}catch(O){alert("Failed to reset password: "+(O.response?.data?.detail||O.message))}finally{o(!1)}}async function k(O){const q=O.is_active?"deactivate":"activate";if(!(O.is_active&&!confirm(`Deactivate partner "${O.display_name||O.username}"?

They will not be able to log in until reactivated.`))){o(!0);try{O.is_active?await qe.delete(`/api/partners/${O.id}`):await qe.post(`/api/partners/${O.id}/activate`),M()}catch(Y){alert(`Failed to ${q} partner: `+(Y.response?.data?.detail||Y.message))}finally{o(!1)}}}function U(O){_(O),w({username:O.username,password:"",discord_tag:O.discord_tag||"",display_name:O.display_name||"",enabled_features:O.enabled_features||[]}),f(!0)}function I(O){_(O),w({...v,password:""}),m(!0)}function L(O){w(q=>({...q,enabled_features:q.enabled_features.includes(O)?q.enabled_features.filter(Y=>Y!==O):[...q.enabled_features,O]}))}function z(O){return O?new Date(O).toLocaleString():"Never"}return i?c.jsx("div",{className:"flex items-center justify-center min-h-64",children:c.jsx("div",{className:"text-lg text-gray-400",children:"Loading partners..."})}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-cyan-400",children:"Partner Management"}),c.jsx("p",{className:"text-gray-400 mt-1",children:"Create and manage login accounts for partner Discord servers"})]}),c.jsx(ft,{onClick:()=>{C(),u(!0)},disabled:s,children:"+ Add Partner"})]}),c.jsx(an,{className:"bg-gray-800/50 border border-cyan-900/50",children:c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"text-cyan-400 font-semibold mb-2",children:"About Partner Accounts"}),c.jsxs("ul",{className:"text-gray-300 text-sm space-y-1 list-disc list-inside",children:[c.jsx("li",{children:'Each partner account is tied to a Discord server via a short tag (e.g., "GHDF", "NMSHub")'}),c.jsx("li",{children:"Partners can only edit systems/regions tagged with their Discord"}),c.jsx("li",{children:"When partners edit untagged systems, it requires your approval"}),c.jsx("li",{children:"You control which features each partner has access to"}),c.jsx("li",{children:"Multiple admins from the same Discord can share one login"})]})]})}),n.length===0?c.jsx(an,{className:"bg-gray-800/50",children:c.jsxs("div",{className:"p-8 text-center text-gray-400",children:[c.jsx("p",{className:"text-lg mb-2",children:"No partner accounts yet"}),c.jsx("p",{className:"text-sm",children:"Create a partner account to give other Discord servers their own space."})]})}):c.jsx("div",{className:"space-y-4",children:n.map(O=>c.jsx(an,{className:`bg-gray-800/50 border ${O.is_active?"border-gray-700":"border-red-900/50"}`,children:c.jsx("div",{className:"p-4",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("h3",{className:"text-lg font-semibold text-white",children:O.display_name||O.username}),c.jsxs("span",{className:"text-sm text-gray-400",children:["@",O.username]}),O.is_active?c.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-900/50 text-green-400 border border-green-700",children:"Active"}):c.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-red-900/50 text-red-400 border border-red-700",children:"Inactive"})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-3",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-500",children:"Discord Tag:"}),c.jsx("p",{className:"text-cyan-400 font-mono",children:O.discord_tag||"Not set"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-500",children:"Created:"}),c.jsx("p",{className:"text-gray-300",children:z(O.created_at)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-500",children:"Last Login:"}),c.jsx("p",{className:"text-gray-300",children:z(O.last_login_at)})]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-500 text-sm",children:"Enabled Features: "}),c.jsx("span",{className:"text-gray-400 text-sm",children:(O.enabled_features||[]).length>0?O.enabled_features.map(q=>{const Y=mM.find(X=>X.id===q);return Y?Y.label:q}).join(", "):"None"})]})]}),c.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[c.jsx(ft,{variant:"secondary",size:"sm",onClick:()=>U(O),disabled:s,children:"Edit"}),c.jsx(ft,{variant:"secondary",size:"sm",onClick:()=>I(O),disabled:s,children:"Reset Password"}),c.jsx(ft,{variant:O.is_active?"danger":"primary",size:"sm",onClick:()=>k(O),disabled:s,children:O.is_active?"Deactivate":"Activate"})]})]})})},O.id))}),c.jsx(Tr,{isOpen:l,onClose:()=>u(!1),title:"Create Partner Account",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Username *"}),c.jsx("input",{type:"text",value:v.username,onChange:O=>w({...v,username:O.target.value}),placeholder:"e.g., GHDFAdmin",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500"}),c.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Login username (min 3 characters)"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Password *"}),c.jsx("input",{type:"password",value:v.password,onChange:O=>w({...v,password:O.target.value}),placeholder:"Enter password",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500"}),c.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Min 4 characters"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Discord Tag"}),c.jsx("input",{type:"text",value:v.discord_tag,onChange:O=>w({...v,discord_tag:O.target.value}),placeholder:"e.g., GHDF",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500"}),c.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Short identifier for their Discord server. Systems/regions with this tag belong to them."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Display Name"}),c.jsx("input",{type:"text",value:v.display_name,onChange:O=>w({...v,display_name:O.target.value}),placeholder:"e.g., Galactic Hub Defense Force",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500"}),c.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Friendly name shown in the UI"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Enabled Features"}),c.jsx("div",{className:"space-y-2 bg-gray-800 p-3 rounded border border-gray-700",children:mM.map(O=>c.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:v.enabled_features.includes(O.id),onChange:()=>L(O.id),className:"mt-1"}),c.jsxs("div",{children:[c.jsx("span",{className:"text-white",children:O.label}),c.jsx("p",{className:"text-gray-500 text-xs",children:O.description})]})]},O.id))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-700",children:[c.jsx(ft,{variant:"secondary",onClick:()=>u(!1),children:"Cancel"}),c.jsx(ft,{onClick:N,disabled:s||!v.username.trim()||!v.password,children:s?"Creating...":"Create Partner"})]})]})}),c.jsx(Tr,{isOpen:d,onClose:()=>f(!1),title:`Edit ${y?.display_name||y?.username||"Partner"}`,children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Discord Tag"}),c.jsx("input",{type:"text",value:v.discord_tag,onChange:O=>w({...v,discord_tag:O.target.value}),placeholder:"e.g., GHDF",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Display Name"}),c.jsx("input",{type:"text",value:v.display_name,onChange:O=>w({...v,display_name:O.target.value}),placeholder:"e.g., Galactic Hub Defense Force",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Enabled Features"}),c.jsx("div",{className:"space-y-2 bg-gray-800 p-3 rounded border border-gray-700",children:mM.map(O=>c.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:v.enabled_features.includes(O.id),onChange:()=>L(O.id),className:"mt-1"}),c.jsxs("div",{children:[c.jsx("span",{className:"text-white",children:O.label}),c.jsx("p",{className:"text-gray-500 text-xs",children:O.description})]})]},O.id))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-700",children:[c.jsx(ft,{variant:"secondary",onClick:()=>f(!1),children:"Cancel"}),c.jsx(ft,{onClick:P,disabled:s,children:s?"Saving...":"Save Changes"})]})]})}),c.jsx(Tr,{isOpen:p,onClose:()=>m(!1),title:`Reset Password for ${y?.display_name||y?.username||"Partner"}`,children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password *"}),c.jsx("input",{type:"password",value:v.password,onChange:O=>w({...v,password:O.target.value}),placeholder:"Enter new password",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500"}),c.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Min 4 characters"})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-700",children:[c.jsx(ft,{variant:"secondary",onClick:()=>m(!1),children:"Cancel"}),c.jsx(ft,{onClick:R,disabled:s||!v.password||v.password.length<4,children:s?"Resetting...":"Reset Password"})]})]})})]})}const RO=[{id:"system_create",label:"Create Systems",description:"Can create new star systems"},{id:"system_edit",label:"Edit Systems",description:"Can edit systems tagged with their Discord"},{id:"approvals",label:"Approvals",description:"Can approve/reject pending submissions"},{id:"batch_approvals",label:"Batch Approvals",description:"Can approve or reject multiple submissions at once"},{id:"stats",label:"View Statistics",description:"Can view database statistics"},{id:"settings",label:"Theme Settings",description:"Can customize theme colors"}];function DO(){const t=Es(),{partnerId:e}=fP(),n=E.useContext(kr),[r,i]=E.useState([]),[a,s]=E.useState([]),[o,l]=E.useState([]),[u,d]=E.useState(!0),[f,p]=E.useState(!1),[m,y]=E.useState(!1),[_,v]=E.useState(!1),[w,M]=E.useState(!1),[C,N]=E.useState(null),[P,R]=E.useState({username:"",password:"",display_name:"",enabled_features:[],parent_partner_id:e||"",additional_discord_tags:[],can_approve_personal_uploads:!1}),[k,U]=E.useState("");E.useEffect(()=>{if(!n.isAdmin){alert("Admin access required"),t("/systems");return}I(),n.isSuperAdmin&&!e&&(L(),z())},[n.isAdmin,n.isSuperAdmin,t,e]);async function I(){d(!0);try{const j=e?`/api/sub_admins?partner_id=${e}`:"/api/sub_admins",B=await qe.get(j);i(B.data.sub_admins||[])}catch(j){alert("Failed to load sub-admins: "+(j.response?.data?.detail||j.message))}finally{d(!1)}}async function L(){try{const j=await qe.get("/api/partners");s(j.data.partners||[])}catch(j){console.error("Failed to load partners:",j)}}async function z(){try{const j=await qe.get("/api/available_discord_tags");l(j.data.discord_tags||[])}catch(j){console.error("Failed to load discord tags:",j)}}function O(){R({username:"",password:"",display_name:"",enabled_features:[],parent_partner_id:e||(n.isSuperAdmin?"haven":""),additional_discord_tags:[],can_approve_personal_uploads:!1})}async function q(){if(!P.username.trim()||P.username.length<3){alert("Username must be at least 3 characters");return}if(!P.password||P.password.length<4){alert("Password must be at least 4 characters");return}p(!0);try{const j={username:P.username.trim(),password:P.password,display_name:P.display_name.trim()||P.username.trim(),enabled_features:P.enabled_features};P.parent_partner_id&&P.parent_partner_id!=="haven"?j.parent_partner_id=parseInt(P.parent_partner_id):P.parent_partner_id==="haven"&&(j.additional_discord_tags=P.additional_discord_tags,j.can_approve_personal_uploads=P.can_approve_personal_uploads),await qe.post("/api/sub_admins",j),alert("Sub-admin account created successfully!"),y(!1),O(),I()}catch(j){alert("Failed to create sub-admin: "+(j.response?.data?.detail||j.message))}finally{p(!1)}}function Y(j){N(j),R({username:j.username,password:"",display_name:j.display_name||"",enabled_features:j.enabled_features||[],parent_partner_id:j.parent_partner_id,additional_discord_tags:j.additional_discord_tags||[],can_approve_personal_uploads:j.can_approve_personal_uploads||!1}),v(!0)}async function X(){p(!0);try{const j={display_name:P.display_name.trim()||null,enabled_features:P.enabled_features,is_active:C.is_active};C.parent_partner_id||(j.additional_discord_tags=P.additional_discord_tags,j.can_approve_personal_uploads=P.can_approve_personal_uploads),await qe.put(`/api/sub_admins/${C.id}`,j),alert("Sub-admin updated successfully!"),v(!1),N(null),O(),I()}catch(j){alert("Failed to update sub-admin: "+(j.response?.data?.detail||j.message))}finally{p(!1)}}function ee(j){N(j),U(""),M(!0)}async function se(){if(!k||k.length<4){alert("New password must be at least 4 characters");return}p(!0);try{await qe.post(`/api/sub_admins/${C.id}/reset_password`,{new_password:k}),alert("Password reset successfully!"),M(!1),N(null),U("")}catch(j){alert("Failed to reset password: "+(j.response?.data?.detail||j.message))}finally{p(!1)}}async function W(j){const B=j.is_active?"deactivate":"reactivate";if(confirm(`Are you sure you want to ${B} "${j.username}"?`)){p(!0);try{j.is_active?await qe.delete(`/api/sub_admins/${j.id}`):await qe.put(`/api/sub_admins/${j.id}`,{is_active:!0}),I()}catch(ae){alert(`Failed to ${B} sub-admin: `+(ae.response?.data?.detail||ae.message))}finally{p(!1)}}}function $(j){R(B=>{const ae=B.enabled_features||[];return ae.includes(j)?{...B,enabled_features:ae.filter(re=>re!==j)}:{...B,enabled_features:[...ae,j]}})}function G(j){R(B=>{const ae=B.additional_discord_tags||[];return ae.includes(j)?{...B,additional_discord_tags:ae.filter(re=>re!==j)}:{...B,additional_discord_tags:[...ae,j]}})}return u?c.jsx("div",{className:"p-4",children:c.jsx(an,{children:c.jsx("p",{children:"Loading sub-admins..."})})}):c.jsxs("div",{className:"p-4",children:[c.jsxs(an,{className:"max-w-4xl",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold",children:"Sub-Admin Management"}),c.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Sub-admins can approve submissions (except their own) and manage content for their community."})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx(ft,{className:"bg-green-600 text-white hover:bg-green-700",onClick:()=>{O(),y(!0)},children:"+ Create Sub-Admin"}),c.jsx(ft,{className:"bg-gray-200 text-gray-800",onClick:()=>t(-1),children:"Back"})]})]}),r.length===0?c.jsx("div",{className:"text-gray-400 italic p-4 bg-gray-700 rounded",children:"No sub-admin accounts yet. Create one to allow community members to help with approvals."}):c.jsx("div",{className:"space-y-3",children:r.map(j=>c.jsx("div",{className:`border rounded p-4 ${j.is_active?"bg-cyan-700":"bg-gray-600 opacity-75"}`,children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:"text-lg font-semibold",children:j.username}),!j.is_active&&c.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-red-500 text-white",children:"INACTIVE"})]}),j.display_name&&c.jsx("p",{className:"text-sm text-gray-300",children:j.display_name}),c.jsxs("p",{className:"text-sm text-cyan-300 mt-1",children:["Parent: ",j.parent_display_name||"Haven",j.parent_partner_id?` (${j.parent_discord_tag||"No tag"})`:" (Super Admin)"]}),c.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[(j.enabled_features||[]).map(B=>c.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-cyan-600 text-white",children:B},B)),(!j.enabled_features||j.enabled_features.length===0)&&c.jsx("span",{className:"text-sm text-gray-400 italic",children:"No features enabled"})]}),!j.parent_partner_id&&j.additional_discord_tags&&j.additional_discord_tags.length>0&&c.jsxs("div",{className:"mt-2",children:[c.jsx("span",{className:"text-xs text-gray-400",children:"Can also view: "}),c.jsx("span",{className:"text-xs text-yellow-400",children:j.additional_discord_tags.join(", ")})]}),!j.parent_partner_id&&j.can_approve_personal_uploads&&c.jsx("div",{className:"mt-1",children:c.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-purple-600 text-white",children:"Can approve personal uploads"})}),c.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Created: ",new Date(j.created_at).toLocaleDateString(),j.last_login_at&&c.jsxs("span",{children:[" | Last login: ",new Date(j.last_login_at).toLocaleDateString()]})]})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx(ft,{className:"bg-blue-600 text-white text-sm px-3 py-1",onClick:()=>Y(j),children:"Edit"}),c.jsx(ft,{className:"bg-yellow-600 text-white text-sm px-3 py-1",onClick:()=>ee(j),children:"Reset Password"}),c.jsx(ft,{className:`text-sm px-3 py-1 ${j.is_active?"bg-red-600 text-white":"bg-green-600 text-white"}`,onClick:()=>W(j),disabled:f,children:j.is_active?"Deactivate":"Reactivate"})]})]})},j.id))})]}),m&&c.jsx(Tr,{title:"Create Sub-Admin",onClose:()=>y(!1),children:c.jsxs("div",{className:"space-y-4",children:[n.isSuperAdmin&&!e&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Parent"}),c.jsxs("select",{className:"w-full border rounded p-2 bg-gray-700 text-white",value:P.parent_partner_id,onChange:j=>R({...P,parent_partner_id:j.target.value}),children:[c.jsx("option",{value:"haven",children:"Haven (Super Admin)"}),c.jsx("optgroup",{label:"Partners",children:a.filter(j=>j.is_active).map(j=>c.jsxs("option",{value:j.id,children:[j.display_name||j.username," (",j.discord_tag||"No tag",")"]},j.id))})]}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Haven sub-admins report directly to you (no community tag)."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Username *"}),c.jsx("input",{type:"text",className:"w-full border rounded p-2 bg-gray-700 text-white",value:P.username,onChange:j=>R({...P,username:j.target.value}),placeholder:"min 3 characters"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Password *"}),c.jsx("input",{type:"password",className:"w-full border rounded p-2 bg-gray-700 text-white",value:P.password,onChange:j=>R({...P,password:j.target.value}),placeholder:"min 4 characters"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Display Name"}),c.jsx("input",{type:"text",className:"w-full border rounded p-2 bg-gray-700 text-white",value:P.display_name,onChange:j=>R({...P,display_name:j.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Enabled Features"}),c.jsx("div",{className:"space-y-2",children:RO.map(j=>c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:P.enabled_features.includes(j.id),onChange:()=>$(j.id),className:"rounded"}),c.jsx("span",{className:"text-sm",children:j.label}),c.jsxs("span",{className:"text-xs text-gray-400",children:["- ",j.description]})]},j.id))})]}),P.parent_partner_id==="haven"&&n.isSuperAdmin&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Additional Discord Tag Visibility"}),c.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Select which partner discords this Haven sub-admin can see and approve submissions for."}),c.jsx("div",{className:"max-h-32 overflow-y-auto border border-gray-600 rounded p-2 bg-gray-800 space-y-2",children:o.length===0?c.jsx("p",{className:"text-sm text-gray-400 italic",children:"No partner discord tags available"}):o.filter(j=>j.discord_tag!=="Haven").map(j=>c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:P.additional_discord_tags.includes(j.discord_tag),onChange:()=>G(j.discord_tag),className:"rounded"}),c.jsx("span",{className:"text-sm",children:j.discord_tag})]},j.discord_tag))})]}),c.jsx("div",{className:"border-t border-gray-600 pt-3",children:c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:P.can_approve_personal_uploads,onChange:j=>R({...P,can_approve_personal_uploads:j.target.checked}),className:"rounded w-5 h-5"}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-semibold",children:"Can Approve Personal Uploads"}),c.jsx("p",{className:"text-xs text-gray-400",children:"Allow this sub-admin to approve submissions without a discord tag."})]})]})})]}),c.jsxs("div",{className:"flex space-x-2 pt-3",children:[c.jsx(ft,{className:"bg-green-600 text-white",onClick:q,disabled:f,children:f?"Creating...":"Create Sub-Admin"}),c.jsx(ft,{className:"bg-gray-200 text-gray-800",onClick:()=>y(!1),children:"Cancel"})]})]})}),_&&C&&c.jsx(Tr,{title:`Edit: ${C.username}`,onClose:()=>v(!1),children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Display Name"}),c.jsx("input",{type:"text",className:"w-full border rounded p-2 bg-gray-700 text-white",value:P.display_name,onChange:j=>R({...P,display_name:j.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Enabled Features"}),c.jsx("div",{className:"space-y-2",children:RO.map(j=>c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:P.enabled_features.includes(j.id),onChange:()=>$(j.id),className:"rounded"}),c.jsx("span",{className:"text-sm",children:j.label})]},j.id))})]}),!C.parent_partner_id&&n.isSuperAdmin&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Additional Discord Tag Visibility"}),c.jsx("p",{className:"text-xs text-gray-400 mb-2",children:'Select which partner discords this Haven sub-admin can see and approve submissions for (in addition to "Haven").'}),c.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-600 rounded p-2 bg-gray-800 space-y-2",children:o.length===0?c.jsx("p",{className:"text-sm text-gray-400 italic",children:"No partner discord tags available"}):o.filter(j=>j.discord_tag!=="Haven").map(j=>c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:P.additional_discord_tags.includes(j.discord_tag),onChange:()=>G(j.discord_tag),className:"rounded"}),c.jsx("span",{className:"text-sm",children:j.discord_tag}),j.display_name&&c.jsxs("span",{className:"text-xs text-gray-400",children:["(",j.display_name,")"]})]},j.discord_tag))}),P.additional_discord_tags.length>0&&c.jsxs("p",{className:"text-xs text-cyan-400 mt-1",children:["Can view: Haven + ",P.additional_discord_tags.join(", ")]})]}),!C.parent_partner_id&&n.isSuperAdmin&&c.jsx("div",{className:"border-t border-gray-600 pt-4",children:c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:P.can_approve_personal_uploads,onChange:j=>R({...P,can_approve_personal_uploads:j.target.checked}),className:"rounded w-5 h-5"}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-semibold",children:"Can Approve Personal Uploads"}),c.jsx("p",{className:"text-xs text-gray-400",children:"Allow this sub-admin to see and approve submissions without a discord tag (personal uploads). Note: Discord info will be hidden - only visible to super admin."})]})]})}),c.jsxs("div",{className:"flex space-x-2 pt-3",children:[c.jsx(ft,{className:"bg-blue-600 text-white",onClick:X,disabled:f,children:f?"Saving...":"Save Changes"}),c.jsx(ft,{className:"bg-gray-200 text-gray-800",onClick:()=>v(!1),children:"Cancel"})]})]})}),w&&C&&c.jsx(Tr,{title:`Reset Password: ${C.username}`,onClose:()=>M(!1),children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold mb-1",children:"New Password *"}),c.jsx("input",{type:"password",className:"w-full border rounded p-2 bg-gray-700 text-white",value:k,onChange:j=>U(j.target.value),placeholder:"min 4 characters"})]}),c.jsxs("div",{className:"flex space-x-2 pt-3",children:[c.jsx(ft,{className:"bg-yellow-600 text-white",onClick:se,disabled:f,children:f?"Resetting...":"Reset Password"}),c.jsx(ft,{className:"bg-gray-200 text-gray-800",onClick:()=>M(!1),children:"Cancel"})]})]})})]})}function b6(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=b6(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function nn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=b6(t))&&(r&&(r+=" "),r+=e);return r}const _6=6048e5,rne=864e5,WS=6e4,GS=36e5,ine=1e3,kO=Symbol.for("constructDateFrom");function rr(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&kO in t?t[kO](e):t instanceof Date?new t.constructor(e):new Date(e)}function Gt(t,e){return rr(e||t,t)}function Vl(t,e,n){const r=Gt(t,n?.in);return isNaN(e)?rr(n?.in||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function $l(t,e,n){const r=Gt(t,n?.in);if(isNaN(e))return rr(t,NaN);if(!e)return r;const i=r.getDate(),a=rr(t,r.getTime());a.setMonth(r.getMonth()+e+1,0);const s=a.getDate();return i>=s?a:(r.setFullYear(a.getFullYear(),a.getMonth(),i),r)}function w6(t,e,n){return rr(t,+Gt(t)+e)}function ane(t,e,n){return w6(t,e*GS)}let sne={};function Pp(){return sne}function Gc(t,e){const n=Pp(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=Gt(t,e?.in),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function Ag(t,e){return Gc(t,{...e,weekStartsOn:1})}function S6(t,e){const n=Gt(t,e?.in),r=n.getFullYear(),i=rr(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=Ag(i),s=rr(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=Ag(s);return n.getTime()>=a.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function Uw(t){const e=Gt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function hd(t,...e){const n=rr.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function pp(t,e){const n=Gt(t,e?.in);return n.setHours(0,0,0,0),n}function Tg(t,e,n){const[r,i]=hd(n?.in,t,e),a=pp(r),s=pp(i),o=+a-Uw(a),l=+s-Uw(s);return Math.round((o-l)/rne)}function one(t,e){const n=S6(t,e),r=rr(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Ag(r)}function fy(t,e,n){const r=Gt(t,n?.in);return r.setTime(r.getTime()+e*WS),r}function AP(t,e,n){return $l(t,e*3,n)}function lne(t,e,n){return w6(t,e*1e3)}function Bw(t,e,n){return Vl(t,e*7,n)}function Wl(t,e,n){return $l(t,e*12,n)}function jO(t,e){let n,r=e?.in;return t.forEach(i=>{!r&&typeof i=="object"&&(r=rr.bind(null,i));const a=Gt(i,r);(!n||n<a||isNaN(+a))&&(n=a)}),rr(r,n||NaN)}function OO(t,e){let n,r=e?.in;return t.forEach(i=>{!r&&typeof i=="object"&&(r=rr.bind(null,i));const a=Gt(i,r);(!n||n>a||isNaN(+a))&&(n=a)}),rr(r,n||NaN)}function cne(t,e,n){const[r,i]=hd(n?.in,t,e);return+pp(r)==+pp(i)}function Uc(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Pg(t){return!(!Uc(t)&&typeof t!="number"||isNaN(+Gt(t)))}function zw(t,e,n){const[r,i]=hd(n?.in,t,e),a=r.getFullYear()-i.getFullYear(),s=r.getMonth()-i.getMonth();return a*12+s}function gf(t,e){const n=Gt(t,e?.in);return Math.trunc(n.getMonth()/3)+1}function Hw(t,e,n){const[r,i]=hd(n?.in,t,e),a=r.getFullYear()-i.getFullYear(),s=gf(r)-gf(i);return a*4+s}function Vw(t,e,n){const[r,i]=hd(n?.in,t,e);return r.getFullYear()-i.getFullYear()}function une(t,e,n){const[r,i]=hd(n?.in,t,e),a=IO(r,i),s=Math.abs(Tg(r,i));r.setDate(r.getDate()-a*s);const o=+(IO(r,i)===-a),l=a*(s-o);return l===0?0:l}function IO(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function E6(t,e){const n=Gt(t,e?.in);return n.setHours(23,59,59,999),n}function M6(t,e){const n=Gt(t,e?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function RA(t,e){const n=Gt(t,e?.in),r=n.getMonth(),i=r-r%3;return n.setMonth(i,1),n.setHours(0,0,0,0),n}function TP(t,e){const n=Gt(t,e?.in);return n.setDate(1),n.setHours(0,0,0,0),n}function C6(t,e){const n=Gt(t,e?.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function ex(t,e){const n=Gt(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function dne(t,e){const n=Pp(),r=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=Gt(t,e?.in),a=i.getDay(),s=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}const fne={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},hne=(t,e,n)=>{let r;const i=fne[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function gM(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const pne={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},mne={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},gne={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},vne={date:gM({formats:pne,defaultWidth:"full"}),time:gM({formats:mne,defaultWidth:"full"}),dateTime:gM({formats:gne,defaultWidth:"full"})},yne={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},xne=(t,e,n,r)=>yne[t];function o0(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,o=n?.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{const s=t.defaultWidth,o=n?.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[s]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const bne={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},_ne={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},wne={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Sne={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ene={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Mne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Cne=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Nne={ordinalNumber:Cne,era:o0({values:bne,defaultWidth:"wide"}),quarter:o0({values:_ne,defaultWidth:"wide",argumentCallback:t=>t-1}),month:o0({values:wne,defaultWidth:"wide"}),day:o0({values:Sne,defaultWidth:"wide"}),dayPeriod:o0({values:Ene,defaultWidth:"wide",formattingValues:Mne,defaultFormattingWidth:"wide"})};function l0(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?Tne(o,f=>f.test(s)):Ane(o,f=>f.test(s));let u;u=t.valueCallback?t.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(s.length);return{value:u,rest:d}}}function Ane(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Tne(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Pne(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let s=t.valueCallback?t.valueCallback(a[0]):a[0];s=n.valueCallback?n.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const Rne=/^(\d+)(th|st|nd|rd)?/i,Dne=/\d+/i,kne={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},jne={any:[/^b/i,/^(a|c)/i]},One={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ine={any:[/1/i,/2/i,/3/i,/4/i]},Lne={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Fne={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Une={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Bne={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},zne={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Hne={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Vne={ordinalNumber:Pne({matchPattern:Rne,parsePattern:Dne,valueCallback:t=>parseInt(t,10)}),era:l0({matchPatterns:kne,defaultMatchWidth:"wide",parsePatterns:jne,defaultParseWidth:"any"}),quarter:l0({matchPatterns:One,defaultMatchWidth:"wide",parsePatterns:Ine,defaultParseWidth:"any",valueCallback:t=>t+1}),month:l0({matchPatterns:Lne,defaultMatchWidth:"wide",parsePatterns:Fne,defaultParseWidth:"any"}),day:l0({matchPatterns:Une,defaultMatchWidth:"wide",parsePatterns:Bne,defaultParseWidth:"any"}),dayPeriod:l0({matchPatterns:zne,defaultMatchWidth:"any",parsePatterns:Hne,defaultParseWidth:"any"})},N6={code:"en-US",formatDistance:hne,formatLong:vne,formatRelative:xne,localize:Nne,match:Vne,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Wne(t,e){const n=Gt(t,e?.in);return Tg(n,ex(n))+1}function PP(t,e){const n=Gt(t,e?.in),r=+Ag(n)-+one(n);return Math.round(r/_6)+1}function RP(t,e){const n=Gt(t,e?.in),r=n.getFullYear(),i=Pp(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=rr(e?.in||t,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const o=Gc(s,e),l=rr(e?.in||t,0);l.setFullYear(r,0,a),l.setHours(0,0,0,0);const u=Gc(l,e);return+n>=+o?r+1:+n>=+u?r:r-1}function Gne(t,e){const n=Pp(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=RP(t,e),a=rr(e?.in||t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),Gc(a,e)}function A6(t,e){const n=Gt(t,e?.in),r=+Gc(n,e)-+Gne(n,e);return Math.round(r/_6)+1}function tr(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const tf={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return tr(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):tr(n+1,2)},d(t,e){return tr(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return tr(t.getHours()%12||12,e.length)},H(t,e){return tr(t.getHours(),e.length)},m(t,e){return tr(t.getMinutes(),e.length)},s(t,e){return tr(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return tr(i,e.length)}},Tm={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},LO={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return tf.y(t,e)},Y:function(t,e,n,r){const i=RP(t,r),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return tr(s,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):tr(a,e.length)},R:function(t,e){const n=S6(t);return tr(n,e.length)},u:function(t,e){const n=t.getFullYear();return tr(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return tr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return tr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return tf.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return tr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=A6(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):tr(i,e.length)},I:function(t,e,n){const r=PP(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):tr(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):tf.d(t,e)},D:function(t,e,n){const r=Wne(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):tr(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return tr(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return tr(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return tr(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Tm.noon:r===0?i=Tm.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Tm.evening:r>=12?i=Tm.afternoon:r>=4?i=Tm.morning:i=Tm.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return tf.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):tf.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):tr(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):tr(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):tf.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):tf.s(t,e)},S:function(t,e){return tf.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return UO(r);case"XXXX":case"XX":return Ah(r);case"XXXXX":case"XXX":default:return Ah(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return UO(r);case"xxxx":case"xx":return Ah(r);case"xxxxx":case"xxx":default:return Ah(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+FO(r,":");case"OOOO":default:return"GMT"+Ah(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+FO(r,":");case"zzzz":default:return"GMT"+Ah(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return tr(r,e.length)},T:function(t,e,n){return tr(+t,e.length)}};function FO(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+tr(a,2)}function UO(t,e){return t%60===0?(t>0?"-":"+")+tr(Math.abs(t)/60,2):Ah(t,e)}function Ah(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=tr(Math.trunc(r/60),2),a=tr(r%60,2);return n+i+e+a}const BO=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},T6=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},$ne=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return BO(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",BO(r,e)).replace("{{time}}",T6(i,e))},DA={p:T6,P:$ne},Yne=/^D+$/,qne=/^Y+$/,Xne=["D","DD","YY","YYYY"];function Kne(t){return Yne.test(t)}function Zne(t){return qne.test(t)}function Qne(t,e,n){const r=Jne(t,e,n);if(console.warn(r),Xne.includes(t))throw new RangeError(r)}function Jne(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ere=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,tre=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,nre=/^'([^]*?)'?$/,rre=/''/g,ire=/[a-zA-Z]/;function Ws(t,e,n){const r=Pp(),i=n?.locale??r.locale??N6,a=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,o=Gt(t,n?.in);if(!Pg(o))throw new RangeError("Invalid time value");let l=e.match(tre).map(d=>{const f=d[0];if(f==="p"||f==="P"){const p=DA[f];return p(d,i.formatLong)}return d}).join("").match(ere).map(d=>{if(d==="''")return{isToken:!1,value:"'"};const f=d[0];if(f==="'")return{isToken:!1,value:are(d)};if(LO[f])return{isToken:!0,value:d};if(f.match(ire))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:d}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const u={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return l.map(d=>{if(!d.isToken)return d.value;const f=d.value;(!n?.useAdditionalWeekYearTokens&&Zne(f)||!n?.useAdditionalDayOfYearTokens&&Kne(f))&&Qne(f,e,String(t));const p=LO[f[0]];return p(o,f,i.localize,u)}).join("")}function are(t){const e=t.match(nre);return e?e[1].replace(rre,"'"):t}function zO(t,e){return Gt(t,e?.in).getDate()}function sre(t,e){return Gt(t,e?.in).getDay()}function ore(t,e){const n=Gt(t,e?.in),r=n.getFullYear(),i=n.getMonth(),a=rr(n,0);return a.setFullYear(r,i+1,0),a.setHours(0,0,0,0),a.getDate()}function lre(){return Object.assign({},Pp())}function qa(t,e){return Gt(t,e?.in).getHours()}function cre(t,e){const n=Gt(t,e?.in).getDay();return n===0?7:n}function Xa(t,e){return Gt(t,e?.in).getMinutes()}function Gs(t,e){return Gt(t,e?.in).getMonth()}function xf(t){return Gt(t).getSeconds()}function kA(t){return+Gt(t)}function Tn(t,e){return Gt(t,e?.in).getFullYear()}function qu(t,e){return+Gt(t)>+Gt(e)}function Dc(t,e){return+Gt(t)<+Gt(e)}function ure(t,e){return+Gt(t)==+Gt(e)}function dre(t,e){const n=fre(e)?new e(0):rr(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function fre(t){return typeof t=="function"&&t.prototype?.constructor===t}const hre=10;class P6{subPriority=0;validate(e,n){return!0}}class pre extends P6{constructor(e,n,r,i,a){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=i,a&&(this.subPriority=a)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class mre extends P6{priority=hre;subPriority=-1;constructor(e,n){super(),this.context=e||(r=>rr(n,r))}set(e,n){return n.timestampIsSet?e:rr(e,dre(e,this.context))}}class Gn{run(e,n,r,i){const a=this.parse(e,n,r,i);return a?{setter:new pre(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,n,r){return!0}}class gre extends Gn{priority=140;parse(e,n,r){switch(n){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,n,r){return n.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const pi={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Tc={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function mi(t,e){return t&&{value:e(t.value),rest:t.rest}}function Br(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function Pc(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,a=n[3]?parseInt(n[3],10):0,s=n[5]?parseInt(n[5],10):0;return{value:r*(i*GS+a*WS+s*ine),rest:e.slice(n[0].length)}}function R6(t){return Br(pi.anyDigitsSigned,t)}function ri(t,e){switch(t){case 1:return Br(pi.singleDigit,e);case 2:return Br(pi.twoDigits,e);case 3:return Br(pi.threeDigits,e);case 4:return Br(pi.fourDigits,e);default:return Br(new RegExp("^\\d{1,"+t+"}"),e)}}function Ww(t,e){switch(t){case 1:return Br(pi.singleDigitSigned,e);case 2:return Br(pi.twoDigitsSigned,e);case 3:return Br(pi.threeDigitsSigned,e);case 4:return Br(pi.fourDigitsSigned,e);default:return Br(new RegExp("^-?\\d{1,"+t+"}"),e)}}function DP(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function D6(t,e){const n=e>0,r=n?e:1-e;let i;if(r<=50)i=t||100;else{const a=r+50,s=Math.trunc(a/100)*100,o=t>=a%100;i=t+s-(o?100:0)}return n?i:1-i}function k6(t){return t%400===0||t%4===0&&t%100!==0}class vre extends Gn{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,n,r){const i=a=>({year:a,isTwoDigitYear:n==="yy"});switch(n){case"y":return mi(ri(4,e),i);case"yo":return mi(r.ordinalNumber(e,{unit:"year"}),i);default:return mi(ri(n.length,e),i)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,r){const i=e.getFullYear();if(r.isTwoDigitYear){const s=D6(r.year,i);return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}const a=!("era"in n)||n.era===1?r.year:1-r.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class yre extends Gn{priority=130;parse(e,n,r){const i=a=>({year:a,isTwoDigitYear:n==="YY"});switch(n){case"Y":return mi(ri(4,e),i);case"Yo":return mi(r.ordinalNumber(e,{unit:"year"}),i);default:return mi(ri(n.length,e),i)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,r,i){const a=RP(e,i);if(r.isTwoDigitYear){const o=D6(r.year,a);return e.setFullYear(o,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),Gc(e,i)}const s=!("era"in n)||n.era===1?r.year:1-r.year;return e.setFullYear(s,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),Gc(e,i)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class xre extends Gn{priority=130;parse(e,n){return Ww(n==="R"?4:n.length,e)}set(e,n,r){const i=rr(e,0);return i.setFullYear(r,0,4),i.setHours(0,0,0,0),Ag(i)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class bre extends Gn{priority=130;parse(e,n){return Ww(n==="u"?4:n.length,e)}set(e,n,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class _re extends Gn{priority=120;parse(e,n,r){switch(n){case"Q":case"QQ":return ri(n.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=1&&n<=4}set(e,n,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class wre extends Gn{priority=120;parse(e,n,r){switch(n){case"q":case"qq":return ri(n.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=1&&n<=4}set(e,n,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class Sre extends Gn{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,n,r){const i=a=>a-1;switch(n){case"M":return mi(Br(pi.month,e),i);case"MM":return mi(ri(2,e),i);case"Mo":return mi(r.ordinalNumber(e,{unit:"month"}),i);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class Ere extends Gn{priority=110;parse(e,n,r){const i=a=>a-1;switch(n){case"L":return mi(Br(pi.month,e),i);case"LL":return mi(ri(2,e),i);case"Lo":return mi(r.ordinalNumber(e,{unit:"month"}),i);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function Mre(t,e,n){const r=Gt(t,n?.in),i=A6(r,n)-e;return r.setDate(r.getDate()-i*7),Gt(r,n?.in)}class Cre extends Gn{priority=100;parse(e,n,r){switch(n){case"w":return Br(pi.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return ri(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,r,i){return Gc(Mre(e,r,i),i)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function Nre(t,e,n){const r=Gt(t,n?.in),i=PP(r,n)-e;return r.setDate(r.getDate()-i*7),r}class Are extends Gn{priority=100;parse(e,n,r){switch(n){case"I":return Br(pi.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return ri(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,r){return Ag(Nre(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const Tre=[31,28,31,30,31,30,31,31,30,31,30,31],Pre=[31,29,31,30,31,30,31,31,30,31,30,31];class Rre extends Gn{priority=90;subPriority=1;parse(e,n,r){switch(n){case"d":return Br(pi.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return ri(n.length,e)}}validate(e,n){const r=e.getFullYear(),i=k6(r),a=e.getMonth();return i?n>=1&&n<=Pre[a]:n>=1&&n<=Tre[a]}set(e,n,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class Dre extends Gn{priority=90;subpriority=1;parse(e,n,r){switch(n){case"D":case"DD":return Br(pi.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return ri(n.length,e)}}validate(e,n){const r=e.getFullYear();return k6(r)?n>=1&&n<=366:n>=1&&n<=365}set(e,n,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function kP(t,e,n){const r=Pp(),i=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=Gt(t,n?.in),s=a.getDay(),l=(e%7+7)%7,u=7-i,d=e<0||e>6?e-(s+u)%7:(l+u)%7-(s+u)%7;return Vl(a,d,n)}class kre extends Gn{priority=90;parse(e,n,r){switch(n){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,i){return e=kP(e,r,i),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class jre extends Gn{priority=90;parse(e,n,r,i){const a=s=>{const o=Math.floor((s-1)/7)*7;return(s+i.weekStartsOn+6)%7+o};switch(n){case"e":case"ee":return mi(ri(n.length,e),a);case"eo":return mi(r.ordinalNumber(e,{unit:"day"}),a);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,i){return e=kP(e,r,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class Ore extends Gn{priority=90;parse(e,n,r,i){const a=s=>{const o=Math.floor((s-1)/7)*7;return(s+i.weekStartsOn+6)%7+o};switch(n){case"c":case"cc":return mi(ri(n.length,e),a);case"co":return mi(r.ordinalNumber(e,{unit:"day"}),a);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,i){return e=kP(e,r,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function Ire(t,e,n){const r=Gt(t,n?.in),i=cre(r,n),a=e-i;return Vl(r,a,n)}class Lre extends Gn{priority=90;parse(e,n,r){const i=a=>a===0?7:a;switch(n){case"i":case"ii":return ri(n.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return mi(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),i);case"iiiii":return mi(r.day(e,{width:"narrow",context:"formatting"}),i);case"iiiiii":return mi(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),i);case"iiii":default:return mi(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),i)}}validate(e,n){return n>=1&&n<=7}set(e,n,r){return e=Ire(e,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class Fre extends Gn{priority=80;parse(e,n,r){switch(n){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(DP(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class Ure extends Gn{priority=80;parse(e,n,r){switch(n){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(DP(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class Bre extends Gn{priority=80;parse(e,n,r){switch(n){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(DP(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class zre extends Gn{priority=70;parse(e,n,r){switch(n){case"h":return Br(pi.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return ri(n.length,e)}}validate(e,n){return n>=1&&n<=12}set(e,n,r){const i=e.getHours()>=12;return i&&r<12?e.setHours(r+12,0,0,0):!i&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class Hre extends Gn{priority=70;parse(e,n,r){switch(n){case"H":return Br(pi.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return ri(n.length,e)}}validate(e,n){return n>=0&&n<=23}set(e,n,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class Vre extends Gn{priority=70;parse(e,n,r){switch(n){case"K":return Br(pi.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return ri(n.length,e)}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class Wre extends Gn{priority=70;parse(e,n,r){switch(n){case"k":return Br(pi.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return ri(n.length,e)}}validate(e,n){return n>=1&&n<=24}set(e,n,r){const i=r<=24?r%24:r;return e.setHours(i,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class Gre extends Gn{priority=60;parse(e,n,r){switch(n){case"m":return Br(pi.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return ri(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]}class $re extends Gn{priority=50;parse(e,n,r){switch(n){case"s":return Br(pi.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return ri(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]}class Yre extends Gn{priority=30;parse(e,n){const r=i=>Math.trunc(i*Math.pow(10,-n.length+3));return mi(ri(n.length,e),r)}set(e,n,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]}class qre extends Gn{priority=10;parse(e,n){switch(n){case"X":return Pc(Tc.basicOptionalMinutes,e);case"XX":return Pc(Tc.basic,e);case"XXXX":return Pc(Tc.basicOptionalSeconds,e);case"XXXXX":return Pc(Tc.extendedOptionalSeconds,e);case"XXX":default:return Pc(Tc.extended,e)}}set(e,n,r){return n.timestampIsSet?e:rr(e,e.getTime()-Uw(e)-r)}incompatibleTokens=["t","T","x"]}class Xre extends Gn{priority=10;parse(e,n){switch(n){case"x":return Pc(Tc.basicOptionalMinutes,e);case"xx":return Pc(Tc.basic,e);case"xxxx":return Pc(Tc.basicOptionalSeconds,e);case"xxxxx":return Pc(Tc.extendedOptionalSeconds,e);case"xxx":default:return Pc(Tc.extended,e)}}set(e,n,r){return n.timestampIsSet?e:rr(e,e.getTime()-Uw(e)-r)}incompatibleTokens=["t","T","X"]}class Kre extends Gn{priority=40;parse(e){return R6(e)}set(e,n,r){return[rr(e,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class Zre extends Gn{priority=20;parse(e){return R6(e)}set(e,n,r){return[rr(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const Qre={G:new gre,y:new vre,Y:new yre,R:new xre,u:new bre,Q:new _re,q:new wre,M:new Sre,L:new Ere,w:new Cre,I:new Are,d:new Rre,D:new Dre,E:new kre,e:new jre,c:new Ore,i:new Lre,a:new Fre,b:new Ure,B:new Bre,h:new zre,H:new Hre,K:new Vre,k:new Wre,m:new Gre,s:new $re,S:new Yre,X:new qre,x:new Xre,t:new Kre,T:new Zre},Jre=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,eie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tie=/^'([^]*?)'?$/,nie=/''/g,rie=/\S/,iie=/[a-zA-Z]/;function aie(t,e,n,r){const i=()=>rr(r?.in||n,NaN),a=lre(),s=r?.locale??a.locale??N6,o=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,l=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0;if(!e)return t?i():Gt(n,r?.in);const u={firstWeekContainsDate:o,weekStartsOn:l,locale:s},d=[new mre(r?.in,n)],f=e.match(eie).map(v=>{const w=v[0];if(w in DA){const M=DA[w];return M(v,s.formatLong)}return v}).join("").match(Jre),p=[];for(let v of f){const w=v[0],M=Qre[w];if(M){const{incompatibleTokens:C}=M;if(Array.isArray(C)){const P=p.find(R=>C.includes(R.token)||R.token===w);if(P)throw new RangeError(`The format string mustn't contain \`${P.fullToken}\` and \`${v}\` at the same time`)}else if(M.incompatibleTokens==="*"&&p.length>0)throw new RangeError(`The format string mustn't contain \`${v}\` and any other token at the same time`);p.push({token:w,fullToken:v});const N=M.run(t,v,s.match,u);if(!N)return i();d.push(N.setter),t=N.rest}else{if(w.match(iie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");if(v==="''"?v="'":w==="'"&&(v=sie(v)),t.indexOf(v)===0)t=t.slice(v.length);else return i()}}if(t.length>0&&rie.test(t))return i();const m=d.map(v=>v.priority).sort((v,w)=>w-v).filter((v,w,M)=>M.indexOf(v)===w).map(v=>d.filter(w=>w.priority===v).sort((w,M)=>M.subPriority-w.subPriority)).map(v=>v[0]);let y=Gt(n,r?.in);if(isNaN(+y))return i();const _={};for(const v of m){if(!v.validate(y,u))return i();const w=v.set(y,_,u);Array.isArray(w)?(y=w[0],Object.assign(_,w[1])):y=w}return y}function sie(t){return t.match(tie)[1].replace(nie,"'")}function oie(t,e,n){const[r,i]=hd(n?.in,t,e);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function lie(t,e,n){const[r,i]=hd(n?.in,t,e);return+RA(r)==+RA(i)}function cie(t,e,n){const[r,i]=hd(n?.in,t,e);return r.getFullYear()===i.getFullYear()}function hy(t,e,n){const r=+Gt(t,n?.in),[i,a]=[+Gt(e.start,n?.in),+Gt(e.end,n?.in)].sort((s,o)=>s-o);return r>=i&&r<=a}function jA(t,e,n){return Vl(t,-e,n)}function jP(t,e){const n=()=>rr(e?.in,NaN),i=hie(t);let a;if(i.date){const u=pie(i.date,2);a=mie(u.restDateString,u.year)}if(!a||isNaN(+a))return n();const s=+a;let o=0,l;if(i.time&&(o=gie(i.time),isNaN(o)))return n();if(i.timezone){if(l=vie(i.timezone),isNaN(l))return n()}else{const u=new Date(s+o),d=Gt(0,e?.in);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return Gt(s+o+l,e?.in)}const jb={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},uie=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,die=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,fie=/^([+-])(\d{2})(?::?(\d{2}))?$/;function hie(t){const e={},n=t.split(jb.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],jb.timeZoneDelimiter.test(e.date)&&(e.date=t.split(jb.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=jb.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function pie(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?i:a*100,restDateString:t.slice((r[1]||r[2]).length)}}function mie(t,e){if(e===null)return new Date(NaN);const n=t.match(uie);if(!n)return new Date(NaN);const r=!!n[4],i=c0(n[1]),a=c0(n[2])-1,s=c0(n[3]),o=c0(n[4]),l=c0(n[5])-1;if(r)return wie(e,o,l)?yie(e,o,l):new Date(NaN);{const u=new Date(0);return!bie(e,a,s)||!_ie(e,i)?new Date(NaN):(u.setUTCFullYear(e,a,Math.max(i,s)),u)}}function c0(t){return t?parseInt(t):1}function gie(t){const e=t.match(die);if(!e)return NaN;const n=vM(e[1]),r=vM(e[2]),i=vM(e[3]);return Sie(n,r,i)?n*GS+r*WS+i*1e3:NaN}function vM(t){return t&&parseFloat(t.replace(",","."))||0}function vie(t){if(t==="Z")return 0;const e=t.match(fie);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return Eie(r,i)?n*(r*GS+i*WS):NaN}function yie(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,a=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+a),r}const xie=[31,null,31,30,31,30,31,31,30,31,30,31];function j6(t){return t%400===0||t%4===0&&t%100!==0}function bie(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(xie[e]||(j6(t)?29:28))}function _ie(t,e){return e>=1&&e<=(j6(t)?366:365)}function wie(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function Sie(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function Eie(t,e){return e>=0&&e<=59}function xo(t,e,n){const r=Gt(t,n?.in),i=r.getFullYear(),a=r.getDate(),s=rr(t,0);s.setFullYear(i,e,15),s.setHours(0,0,0,0);const o=ore(s);return r.setMonth(e,Math.min(a,o)),r}function fw(t,e,n){const r=Gt(t,n?.in);return r.setHours(e),r}function hw(t,e,n){const r=Gt(t,n?.in);return r.setMinutes(e),r}function ng(t,e,n){const r=Gt(t,n?.in),i=Math.trunc(r.getMonth()/3)+1,a=e-i;return xo(r,r.getMonth()+a*3)}function pw(t,e,n){const r=Gt(t,n?.in);return r.setSeconds(e),r}function Mc(t,e,n){const r=Gt(t,n?.in);return isNaN(+r)?rr(t,NaN):(r.setFullYear(e),r)}function Qh(t,e,n){return $l(t,-e,n)}function O6(t,e,n){return AP(t,-1,n)}function HO(t,e,n){return Bw(t,-1,n)}function ed(t,e,n){return Wl(t,-e,n)}var Mie=typeof document<"u",Cie=function(){},Gw=Mie?E.useLayoutEffect:Cie;const Nie={...wg},Aie=Nie.useInsertionEffect,Tie=Aie||(t=>t());function Pie(t){const e=E.useRef(()=>{});return Tie(()=>{e.current=t}),E.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}var Rie=typeof document<"u",Die=function(){},mw=Rie?E.useLayoutEffect:Die;function $w(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!$w(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const a=i[r];if(!(a==="_owner"&&t.$$typeof)&&!$w(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function I6(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function VO(t,e){const n=I6(t);return Math.round(e*n)/n}function yM(t){const e=E.useRef(t);return mw(()=>{e.current=t}),e}function kie(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:s}={},transform:o=!0,whileElementsMounted:l,open:u}=t,[d,f]=E.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=E.useState(r);$w(p,r)||m(r);const[y,_]=E.useState(null),[v,w]=E.useState(null),M=E.useCallback(W=>{W!==R.current&&(R.current=W,_(W))},[]),C=E.useCallback(W=>{W!==k.current&&(k.current=W,w(W))},[]),N=a||y,P=s||v,R=E.useRef(null),k=E.useRef(null),U=E.useRef(d),I=l!=null,L=yM(l),z=yM(i),O=yM(u),q=E.useCallback(()=>{if(!R.current||!k.current)return;const W={placement:e,strategy:n,middleware:p};z.current&&(W.platform=z.current),lJ(R.current,k.current,W).then($=>{const G={...$,isPositioned:O.current!==!1};Y.current&&!$w(U.current,G)&&(U.current=G,$g.flushSync(()=>{f(G)}))})},[p,e,n,z,O]);mw(()=>{u===!1&&U.current.isPositioned&&(U.current.isPositioned=!1,f(W=>({...W,isPositioned:!1})))},[u]);const Y=E.useRef(!1);mw(()=>(Y.current=!0,()=>{Y.current=!1}),[]),mw(()=>{if(N&&(R.current=N),P&&(k.current=P),N&&P){if(L.current)return L.current(N,P,q);q()}},[N,P,q,L,I]);const X=E.useMemo(()=>({reference:R,floating:k,setReference:M,setFloating:C}),[M,C]),ee=E.useMemo(()=>({reference:N,floating:P}),[N,P]),se=E.useMemo(()=>{const W={position:n,left:0,top:0};if(!ee.floating)return W;const $=VO(ee.floating,d.x),G=VO(ee.floating,d.y);return o?{...W,transform:"translate("+$+"px, "+G+"px)",...I6(ee.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:G}},[n,o,ee.floating,d.x,d.y]);return E.useMemo(()=>({...d,update:q,refs:X,elements:ee,floatingStyles:se}),[d,q,X,ee,se])}const jie=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?lO({element:r.current,padding:i}).fn(n):{}:r?lO({element:r,padding:i}).fn(n):{}}}},Oie=(t,e)=>({...sJ(t),options:[t,e]}),Iie=(t,e)=>({...oJ(t),options:[t,e]}),Lie=(t,e)=>({...jie(t),options:[t,e]}),Fie={...wg};let WO=!1,Uie=0;const GO=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Uie++;function Bie(){const[t,e]=E.useState(()=>WO?GO():void 0);return Gw(()=>{t==null&&e(GO())},[]),E.useEffect(()=>{WO=!0},[]),t}const zie=Fie.useId,L6=zie||Bie,Hie=E.forwardRef(function(e,n){const{context:{placement:r,elements:{floating:i},middlewareData:{arrow:a,shift:s}},width:o=14,height:l=7,tipRadius:u=0,strokeWidth:d=0,staticOffset:f,stroke:p,d:m,style:{transform:y,..._}={},...v}=e,w=L6(),[M,C]=E.useState(!1);if(Gw(()=>{if(!i)return;el(i).direction==="rtl"&&C(!0)},[i]),!i)return null;const[N,P]=r.split("-"),R=N==="top"||N==="bottom";let k=f;(R&&s!=null&&s.x||!R&&s!=null&&s.y)&&(k=null);const U=d*2,I=U/2,L=o/2*(u/-8+1),z=l/2*u/4,O=!!m,q=k&&P==="end"?"bottom":"top";let Y=k&&P==="end"?"right":"left";k&&M&&(Y=P==="end"?"left":"right");const X=a?.x!=null?k||a.x:"",ee=a?.y!=null?k||a.y:"",se=m||"M0,0"+(" H"+o)+(" L"+(o-L)+","+(l-z))+(" Q"+o/2+","+l+" "+L+","+(l-z))+" Z",W={top:O?"rotate(180deg)":"",left:O?"rotate(90deg)":"rotate(-90deg)",bottom:O?"":"rotate(180deg)",right:O?"rotate(-90deg)":"rotate(90deg)"}[N];return c.jsxs("svg",{...v,"aria-hidden":!0,ref:n,width:O?o:o+U,height:o,viewBox:"0 0 "+o+" "+(l>o?l:o),style:{position:"absolute",pointerEvents:"none",[Y]:X,[q]:ee,[N]:R||O?"100%":"calc(100% - "+U/2+"px)",transform:[W,y].filter($=>!!$).join(" "),..._},children:[U>0&&c.jsx("path",{clipPath:"url(#"+w+")",fill:"none",stroke:p,strokeWidth:U+(m?0:1),d:se}),c.jsx("path",{stroke:U&&!m?v.fill:"none",d:se}),c.jsx("clipPath",{id:w,children:c.jsx("rect",{x:-I,y:I*(O?-1:1),width:o+U,height:o})})]})});function Vie(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.has(e)||t.set(e,new Set),t.get(e).add(n)},off(e,n){var r;(r=t.get(e))==null||r.delete(n)}}}const Wie=E.createContext(null),Gie=E.createContext(null),$ie=()=>{var t;return((t=E.useContext(Wie))==null?void 0:t.id)||null},Yie=()=>E.useContext(Gie);function qie(t){const{open:e=!1,onOpenChange:n,elements:r}=t,i=L6(),a=E.useRef({}),[s]=E.useState(()=>Vie()),o=$ie()!=null,[l,u]=E.useState(r.reference),d=Pie((m,y,_)=>{a.current.openEvent=m?y:void 0,s.emit("openchange",{open:m,event:y,reason:_,nested:o}),n?.(m,y,_)}),f=E.useMemo(()=>({setPositionReference:u}),[]),p=E.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return E.useMemo(()=>({dataRef:a,open:e,onOpenChange:d,elements:p,events:s,floatingId:i,refs:f}),[e,d,p,s,i,f])}function Xie(t){t===void 0&&(t={});const{nodeId:e}=t,n=qie({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,i=r.elements,[a,s]=E.useState(null),[o,l]=E.useState(null),d=i?.domReference||a,f=E.useRef(null),p=Yie();Gw(()=>{d&&(f.current=d)},[d]);const m=kie({...t,elements:{...i,...o&&{reference:o}}}),y=E.useCallback(C=>{const N=xs(C)?{getBoundingClientRect:()=>C.getBoundingClientRect(),getClientRects:()=>C.getClientRects(),contextElement:C}:C;l(N),m.refs.setReference(N)},[m.refs]),_=E.useCallback(C=>{(xs(C)||C===null)&&(f.current=C,s(C)),(xs(m.refs.reference.current)||m.refs.reference.current===null||C!==null&&!xs(C))&&m.refs.setReference(C)},[m.refs]),v=E.useMemo(()=>({...m.refs,setReference:_,setPositionReference:y,domReference:f}),[m.refs,_,y]),w=E.useMemo(()=>({...m.elements,domReference:d}),[m.elements,d]),M=E.useMemo(()=>({...m,...r,refs:v,elements:w,nodeId:e}),[m,v,w,e,r]);return Gw(()=>{r.dataRef.current.floatingContext=M;const C=p?.nodesRef.current.find(N=>N.id===e);C&&(C.context=M)}),E.useMemo(()=>({...m,context:M,refs:v,elements:w}),[m,v,w,M])}var OA=function(e,n){return OA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},OA(e,n)};function ka(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");OA(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Nn=function(){return Nn=Object.assign||function(n){for(var r,i=1,a=arguments.length;i<a;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},Nn.apply(this,arguments)};function kc(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var Kie=function(t){var e=t.showTimeSelectOnly,n=e===void 0?!1:e,r=t.showTime,i=r===void 0?!1:r,a=t.className,s=t.children,o=t.inline,l=n?"Choose Time":"Choose Date".concat(i?" and Time":"");return Ze.createElement("div",{className:a,"aria-label":l,role:o?void 0:"dialog","aria-modal":o?void 0:"true",translate:"no"},s)},Zie=function(t,e){var n=E.useRef(null),r=E.useRef(t);E.useEffect(function(){r.current=t},[t]);var i=E.useCallback(function(a){var s,o=a.composed&&a.composedPath&&a.composedPath().find(function(l){return l instanceof Node})||a.target;n.current&&!n.current.contains(o)&&(e&&o instanceof HTMLElement&&o.classList.contains(e)||(s=r.current)===null||s===void 0||s.call(r,a))},[e]);return E.useEffect(function(){return document.addEventListener("mousedown",i),function(){document.removeEventListener("mousedown",i)}},[i]),n},$S=function(t){var e=t.children,n=t.onClickOutside,r=t.className,i=t.containerRef,a=t.style,s=t.ignoreClass,o=Zie(n,s);return Ze.createElement("div",{className:r,style:a,ref:function(l){o.current=l,i&&(i.current=l)}},e)},Ob=null,$O=!1;function F6(){if($O)return Ob;$O=!0;try{var t="date-fns-tz";Ob=require(t)}catch{Ob=null}return Ob}function YO(t,e){if(!e)return t;var n=F6();return n?n.toZonedTime(t,e):t}function Tu(t,e){if(!e)return t;var n=F6();return n?n.fromZonedTime(t,e):t}var St;(function(t){t.ArrowUp="ArrowUp",t.ArrowDown="ArrowDown",t.ArrowLeft="ArrowLeft",t.ArrowRight="ArrowRight",t.PageUp="PageUp",t.PageDown="PageDown",t.Home="Home",t.End="End",t.Enter="Enter",t.Space=" ",t.Tab="Tab",t.Escape="Escape",t.Backspace="Backspace",t.X="x"})(St||(St={}));function U6(){var t=typeof window<"u"?window:globalThis;return t}var tx=12;function Fn(t){if(t==null)return new Date;var e=typeof t=="string"?jP(t):Gt(t);return Hs(e)?e:new Date}function hh(t,e,n,r,i){i===void 0&&(i=Fn());for(var a=Rg(n)||Rg(OP()),s=Array.isArray(e)?e:[e],o=0,l=s;o<l.length;o++){var u=l[o],d=aie(t,u,i,{locale:a});if(Hs(d)&&(!r||t===Sr(d,u,n)))return d}if(!r&&t&&t.length>=8){var f=new Date(t);if(Pg(f))return f}return null}function Qie(t,e){if(e===void 0&&(e=Fn()),!t)return null;var n=t.match(/\b(1\d{3}|2\d{3})\b/);if(!n||!n[1])return null;var r=parseInt(n[1],10),i=t.match(/(?:^|[/\-\s])?(0?[1-9]|1[0-2])(?:[/\-\s]|$)/),a=i&&i[1]?parseInt(i[1],10)-1:e.getMonth();return new Date(r,a,1)}function Hs(t){return Pg(t)}function Bh(t){return t==null?null:Uc(t)&&Pg(t)?t:null}function Sr(t,e,n){if(n==="en")return Ws(t,e,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=n?Rg(n):void 0;return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),r=r||Rg(OP()),Ws(t,e,{locale:r,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function zs(t,e){var n=e.dateFormat,r=e.locale,i=Array.isArray(n)&&n.length>0?n[0]:n;return t&&Sr(t,i,r)||""}var B6=" - ";function Jie(t,e,n){if(!t&&!e)return"";var r=t?zs(t,n):"",i=e?zs(e,n):"",a=n.rangeSeparator||B6;return"".concat(r).concat(a).concat(i)}function eae(t,e){if(!t?.length)return"";var n=t[0]?zs(t[0],e):"";if(t.length===1)return n;if(t.length===2&&t[1]){var r=zs(t[1],e);return"".concat(n,", ").concat(r)}var i=t.length-1;return"".concat(n," (+").concat(i,")")}function Pu(t,e){var n=e.hour,r=n===void 0?0:n,i=e.minute,a=i===void 0?0:i,s=e.second,o=s===void 0?0:s;return fw(hw(pw(t,o),a),r)}function tae(t){return PP(t)}function nae(t,e){return Sr(t,"ddd",e)}function I0(t){return pp(t)}function bf(t,e,n){var r=Rg(e||OP());return Gc(t,{locale:r,weekStartsOn:n})}function Xu(t){return TP(t)}function L0(t){return ex(t)}function qO(t){return RA(t)}function XO(){return pp(Fn())}function KO(t){return E6(t)}function rae(t){return dne(t)}function iae(t){return M6(t)}function Ac(t,e){return t&&e?cie(t,e):!t&&!e}function gs(t,e){return t&&e?oie(t,e):!t&&!e}function Yw(t,e){return t&&e?lie(t,e):!t&&!e}function Rn(t,e){return t&&e?cne(t,e):!t&&!e}function zh(t,e){return t&&e?ure(t,e):!t&&!e}function Th(t,e,n){var r,i=pp(e),a=E6(n);try{r=hy(t,{start:i,end:a})}catch{r=!1}return r}function OP(){var t=U6();return t.__localeId__}function Rg(t){if(typeof t=="string"){var e=U6();return e.__localeData__?e.__localeData__[t]:void 0}else return t}function aae(t,e,n){return e(Sr(t,"EEEE",n))}function sae(t,e){return Sr(t,"EEEEEE",e)}function oae(t,e){return Sr(t,"EEE",e)}function IP(t,e){return Sr(xo(Fn(),t),"LLLL",e)}function z6(t,e){return Sr(xo(Fn(),t),"LLL",e)}function lae(t,e){return Sr(ng(Fn(),t),"QQQ",e)}function Ko(t,e){var n=e===void 0?{}:e,r=n.minDate,i=n.maxDate,a=n.excludeDates,s=n.excludeDateIntervals,o=n.includeDates,l=n.includeDateIntervals,u=n.filterDate,d=n.disabled;return d?!0:nx(t,{minDate:r,maxDate:i})||a&&a.some(function(f){return f instanceof Date?Rn(t,f):Rn(t,f.date)})||s&&s.some(function(f){var p=f.start,m=f.end;return hy(t,{start:p,end:m})})||o&&!o.some(function(f){return Rn(t,f)})||l&&!l.some(function(f){var p=f.start,m=f.end;return hy(t,{start:p,end:m})})||u&&!u(Fn(t))||!1}function LP(t,e){var n=e===void 0?{}:e,r=n.excludeDates,i=n.excludeDateIntervals;return i&&i.length>0?i.some(function(a){var s=a.start,o=a.end;return hy(t,{start:s,end:o})}):r&&r.some(function(a){var s;return a instanceof Date?Rn(t,a):Rn(t,(s=a.date)!==null&&s!==void 0?s:new Date)})||!1}function H6(t,e){var n=e===void 0?{}:e,r=n.minDate,i=n.maxDate,a=n.excludeDates,s=n.includeDates,o=n.filterDate;return nx(t,{minDate:r?TP(r):void 0,maxDate:i?M6(i):void 0})||a?.some(function(l){return gs(t,l instanceof Date?l:l.date)})||s&&!s.some(function(l){return gs(t,l)})||o&&!o(Fn(t))||!1}function Ib(t,e,n,r){var i=Tn(t),a=Gs(t),s=Tn(e),o=Gs(e),l=Tn(r);return i===s&&i===l?a<=n&&n<=o:i<s?l===i&&a<=n||l===s&&o>=n||l<s&&l>i:!1}function cae(t,e){var n=e===void 0?{}:e,r=n.minDate,i=n.maxDate,a=n.excludeDates,s=n.includeDates;return nx(t,{minDate:r,maxDate:i})||a&&a.some(function(o){return gs(o instanceof Date?o:o.date,t)})||s&&!s.some(function(o){return gs(o,t)})||!1}function Lb(t,e){var n=e===void 0?{}:e,r=n.minDate,i=n.maxDate,a=n.excludeDates,s=n.includeDates,o=n.filterDate,l=n.disabled;return l?!0:nx(t,{minDate:r,maxDate:i})||a?.some(function(u){return Yw(t,u instanceof Date?u:u.date)})||s&&!s.some(function(u){return Yw(t,u)})||o&&!o(Fn(t))||!1}function Fb(t,e,n){if(!e||!n||!Pg(e)||!Pg(n))return!1;var r=Tn(e),i=Tn(n);return r<=t&&i>=t}function gw(t,e){var n=e===void 0?{}:e,r=n.minDate,i=n.maxDate,a=n.excludeDates,s=n.includeDates,o=n.filterDate,l=n.disabled;if(l)return!0;var u=new Date(t,0,1);return nx(u,{minDate:r?ex(r):void 0,maxDate:i?C6(i):void 0})||a?.some(function(d){return Ac(u,d instanceof Date?d:d.date)})||s&&!s.some(function(d){return Ac(u,d)})||o&&!o(Fn(u))||!1}function Ub(t,e,n,r){var i=Tn(t),a=gf(t),s=Tn(e),o=gf(e),l=Tn(r);return i===s&&i===l?a<=n&&n<=o:i<s?l===i&&a<=n||l===s&&o>=n||l<s&&l>i:!1}function nx(t,e){var n,r=e===void 0?{}:e,i=r.minDate,a=r.maxDate;return(n=i&&Tg(t,i)<0||a&&Tg(t,a)>0)!==null&&n!==void 0?n:!1}function ZO(t,e){return e.some(function(n){return qa(n)===qa(t)&&Xa(n)===Xa(t)&&xf(n)===xf(t)})}function QO(t,e){var n=e===void 0?{}:e,r=n.excludeTimes,i=n.includeTimes,a=n.filterTime;return r&&ZO(t,r)||i&&!ZO(t,i)||a&&!a(t)||!1}function JO(t,e){var n=e.minTime,r=e.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var i=Fn();i=fw(i,qa(t)),i=hw(i,Xa(t)),i=pw(i,xf(t));var a=Fn();a=fw(a,qa(n)),a=hw(a,Xa(n)),a=pw(a,xf(n));var s=Fn();s=fw(s,qa(r)),s=hw(s,Xa(r)),s=pw(s,xf(r));var o;try{o=!hy(i,{start:a,end:s})}catch{o=!1}return o}function e3(t,e){var n=e===void 0?{}:e,r=n.minDate,i=n.includeDates,a=Qh(t,1);return r&&zw(r,a)>0||i&&i.every(function(s){return zw(s,a)>0})||!1}function t3(t,e){var n=e===void 0?{}:e,r=n.maxDate,i=n.includeDates,a=$l(t,1);return r&&zw(a,r)>0||i&&i.every(function(s){return zw(a,s)>0})||!1}function uae(t,e){var n=e===void 0?{}:e,r=n.minDate,i=n.includeDates,a=ex(t),s=O6(a);return r&&Hw(r,s)>0||i&&i.every(function(o){return Hw(o,s)>0})||!1}function dae(t,e){var n=e===void 0?{}:e,r=n.maxDate,i=n.includeDates,a=C6(t),s=AP(a,1);return r&&Hw(s,r)>0||i&&i.every(function(o){return Hw(s,o)>0})||!1}function n3(t,e){var n=e===void 0?{}:e,r=n.minDate,i=n.includeDates,a=ed(t,1);return r&&Vw(r,a)>0||i&&i.every(function(s){return Vw(s,a)>0})||!1}function fae(t,e){var n=e===void 0?{}:e,r=n.minDate,i=n.yearItemNumber,a=i===void 0?tx:i,s=L0(ed(t,a)),o=Vu(s,a).endPeriod,l=r&&Tn(r);return l&&l>o||!1}function r3(t,e){var n=e===void 0?{}:e,r=n.maxDate,i=n.includeDates,a=Wl(t,1);return r&&Vw(a,r)>0||i&&i.every(function(s){return Vw(a,s)>0})||!1}function hae(t,e){var n=e===void 0?{}:e,r=n.maxDate,i=n.yearItemNumber,a=i===void 0?tx:i,s=Wl(t,a),o=Vu(s,a).startPeriod,l=r&&Tn(r);return l&&l<o||!1}function V6(t){var e=t.minDate,n=t.includeDates;if(n&&e){var r=n.filter(function(i){return Tg(i,e)>=0});return OO(r)}else return n?OO(n):e}function W6(t){var e=t.maxDate,n=t.includeDates;if(n&&e){var r=n.filter(function(i){return Tg(i,e)<=0});return jO(r)}else return n?jO(n):e}function i3(t,e){var n;t===void 0&&(t=[]),e===void 0&&(e="react-datepicker__day--highlighted");for(var r=new Map,i=0,a=t.length;i<a;i++){var s=t[i];if(Uc(s)){var o=Sr(s,"MM.dd.yyyy"),l=r.get(o)||[];l.includes(e)||(l.push(e),r.set(o,l))}else if(typeof s=="object"){var u=Object.keys(s),d=(n=u[0])!==null&&n!==void 0?n:"",f=s[d];if(typeof d=="string"&&Array.isArray(f))for(var p=0,m=f.length;p<m;p++){var y=f[p];if(y){var o=Sr(y,"MM.dd.yyyy"),l=r.get(o)||[];l.includes(d)||(l.push(d),r.set(o,l))}}}}return r}function pae(t,e){return t.length!==e.length?!1:t.every(function(n,r){return n===e[r]})}function mae(t,e){t===void 0&&(t=[]),e===void 0&&(e="react-datepicker__day--holidays");var n=new Map;return t.forEach(function(r){var i=r.date,a=r.holidayName;if(Uc(i)){var s=Sr(i,"MM.dd.yyyy"),o=n.get(s)||{className:"",holidayNames:[]};if(!("className"in o&&o.className===e&&pae(o.holidayNames,[a]))){o.className=e;var l=o.holidayNames;o.holidayNames=l?kc(kc([],l,!0),[a],!1):[a],n.set(s,o)}}}),n}function gae(t,e,n,r,i){for(var a=i.length,s=[],o=0;o<a;o++){var l=t,u=i[o];u&&(l=ane(l,qa(u)),l=fy(l,Xa(u)),l=lne(l,xf(u)));var d=fy(t,(n+1)*r);qu(l,e)&&Dc(l,d)&&u!=null&&s.push(u)}return s}function Pm(t){return t<10?"0".concat(t):"".concat(t)}function Vu(t,e){e===void 0&&(e=tx);var n=Math.ceil(Tn(t)/e)*e,r=n-(e-1);return{startPeriod:r,endPeriod:n}}function vae(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),24);return Math.round((+n-+e)/36e5)}function a3(t){var e=t.getSeconds(),n=t.getMilliseconds();return Gt(t.getTime()-e*1e3-n)}function G6(t,e){return a3(t).getTime()===a3(e).getTime()}function s3(t){if(!Uc(t))throw new Error("Invalid date");var e=new Date(t);return e.setHours(0,0,0,0),e}function xM(t,e){if(!Uc(t)||!Uc(e))throw new Error("Invalid date received");var n=s3(t),r=s3(e);return Dc(n,r)}function $6(t){return t.key===St.Space}var bM=(function(t){ka(e,t);function e(n){var r=t.call(this,n)||this;return r.inputRef=Ze.createRef(),r.onTimeChange=function(i){var a,s;r.setState({time:i});var o=r.props.date,l=o instanceof Date&&!isNaN(+o),u=l?o:new Date;if(i?.includes(":")){var d=i.split(":"),f=d[0],p=d[1];u.setHours(Number(f)),u.setMinutes(Number(p))}(s=(a=r.props).onChange)===null||s===void 0||s.call(a,u)},r.renderTimeInput=function(){var i=r.state.time,a=r.props,s=a.date,o=a.timeString,l=a.customTimeInput;return l?E.cloneElement(l,{date:s,value:i,onChange:r.onTimeChange}):Ze.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:r.inputRef,onClick:function(){var u;(u=r.inputRef.current)===null||u===void 0||u.focus()},required:!0,value:i,onChange:function(u){r.onTimeChange(u.target.value||o)}})},r.state={time:r.props.timeString},r}return e.getDerivedStateFromProps=function(n,r){return n.timeString!==r.time?{time:n.timeString}:null},e.prototype.render=function(){return Ze.createElement("div",{className:"react-datepicker__input-time-container"},Ze.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),Ze.createElement("div",{className:"react-datepicker-time__input-container"},Ze.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},e})(E.Component),yae=(function(t){ka(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.dayEl=E.createRef(),n.handleClick=function(r){!n.isDisabled()&&n.props.onClick&&n.props.onClick(r)},n.handleMouseEnter=function(r){!n.isDisabled()&&n.props.onMouseEnter&&n.props.onMouseEnter(r)},n.handleOnKeyDown=function(r){var i,a,s=r.key;s===St.Space&&(r.preventDefault(),r.key=St.Enter),(a=(i=n.props).handleOnKeyDown)===null||a===void 0||a.call(i,r)},n.isSameDay=function(r){return Rn(n.props.day,r)},n.isKeyboardSelected=function(){var r;if(n.props.disabledKeyboardNavigation)return!1;var i=n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(s){return n.isSameDayOrWeek(s)}):n.isSameDayOrWeek(n.props.selected),a=n.props.preSelection&&n.isDisabled(n.props.preSelection);return!i&&n.isSameDayOrWeek(n.props.preSelection)&&!a},n.isDisabled=function(r){return r===void 0&&(r=n.props.day),Ko(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate,disabled:n.props.disabled})},n.isExcluded=function(){return LP(n.props.day,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.isStartOfWeek=function(){return Rn(n.props.day,bf(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameWeek=function(r){return n.props.showWeekPicker&&Rn(r,bf(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameDayOrWeek=function(r){return n.isSameDay(r)||n.isSameWeek(r)},n.getHighLightedClass=function(){var r=n.props,i=r.day,a=r.highlightDates;if(!a)return!1;var s=Sr(i,"MM.dd.yyyy");return a.get(s)},n.getHolidaysClass=function(){var r,i=n.props,a=i.day,s=i.holidays;if(!s)return[void 0];var o=Sr(a,"MM.dd.yyyy");return s.has(o)?[(r=s.get(o))===null||r===void 0?void 0:r.className]:[void 0]},n.isInRange=function(){var r=n.props,i=r.day,a=r.startDate,s=r.endDate;return!a||!s?!1:Th(i,a,s)},n.isInSelectingRange=function(){var r,i=n.props,a=i.day,s=i.selectsStart,o=i.selectsEnd,l=i.selectsRange,u=i.selectsDisabledDaysInRange,d=i.startDate,f=i.swapRange,p=i.endDate,m=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;if(n.isAfterMonth()||n.isBeforeMonth()||!(s||o||l)||!m||!u&&n.isDisabled())return!1;if(s&&p&&(Dc(m,p)||zh(m,p)))return Th(a,m,p);if(o&&d&&(qu(m,d)||zh(m,d)))return Th(a,d,m);if(l&&d&&!p){if(zh(m,d)||qu(m,d))return Th(a,d,m);if(f&&Dc(m,d))return Th(a,m,d)}return!1},n.isSelectingRangeStart=function(){var r;if(!n.isInSelectingRange())return!1;var i=n.props,a=i.day,s=i.startDate,o=i.selectsStart,l=i.swapRange,u=i.selectsRange,d=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return o?Rn(a,d):u&&l&&s&&d?Rn(a,Dc(d,s)?d:s):Rn(a,s)},n.isSelectingRangeEnd=function(){var r;if(!n.isInSelectingRange())return!1;var i=n.props,a=i.day,s=i.endDate,o=i.selectsEnd,l=i.selectsRange,u=i.swapRange,d=i.startDate,f=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return o?Rn(a,f):l&&u&&d&&f?Rn(a,Dc(f,d)?d:f):l?Rn(a,f):Rn(a,s)},n.isRangeStart=function(){var r=n.props,i=r.day,a=r.startDate,s=r.endDate;return!a||!s?!1:Rn(a,i)},n.isRangeEnd=function(){var r=n.props,i=r.day,a=r.startDate,s=r.endDate;return!a||!s?!1:Rn(s,i)},n.isWeekend=function(){var r=sre(n.props.day);return r===0||r===6},n.isAfterMonth=function(){return n.props.month!==void 0&&(n.props.month+1)%12===Gs(n.props.day)},n.isBeforeMonth=function(){return n.props.month!==void 0&&(Gs(n.props.day)+1)%12===n.props.month},n.isCurrentDay=function(){return n.isSameDay(Fn())},n.isSelected=function(){var r;return n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(i){return n.isSameDayOrWeek(i)}):n.isSameDayOrWeek(n.props.selected)},n.getClassNames=function(r){var i=n.props.dayClassName?n.props.dayClassName(r):void 0;return nn("react-datepicker__day",i,"react-datepicker__day--"+nae(n.props.day),{"react-datepicker__day--disabled":n.isDisabled(),"react-datepicker__day--excluded":n.isExcluded(),"react-datepicker__day--selected":n.isSelected(),"react-datepicker__day--keyboard-selected":n.isKeyboardSelected(),"react-datepicker__day--range-start":n.isRangeStart(),"react-datepicker__day--range-end":n.isRangeEnd(),"react-datepicker__day--in-range":n.isInRange(),"react-datepicker__day--in-selecting-range":n.isInSelectingRange(),"react-datepicker__day--selecting-range-start":n.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":n.isSelectingRangeEnd(),"react-datepicker__day--today":n.isCurrentDay(),"react-datepicker__day--weekend":n.isWeekend(),"react-datepicker__day--outside-month":n.isAfterMonth()||n.isBeforeMonth()},n.getHighLightedClass(),n.getHolidaysClass())},n.getAriaLabel=function(){var r=n.props,i=r.day,a=r.ariaLabelPrefixWhenEnabled,s=a===void 0?"Choose":a,o=r.ariaLabelPrefixWhenDisabled,l=o===void 0?"Not available":o,u=n.isDisabled()||n.isExcluded()?l:s;return"".concat(u," ").concat(Sr(i,"PPPP",n.props.locale))},n.getTitle=function(){var r=n.props,i=r.day,a=r.holidays,s=a===void 0?new Map:a,o=r.excludeDates,l=Sr(i,"MM.dd.yyyy"),u=[];return s.has(l)&&u.push.apply(u,s.get(l).holidayNames),n.isExcluded()&&u.push(o?.filter(function(d){return d instanceof Date?Rn(d,i):Rn(d?.date,i)}).map(function(d){if(!(d instanceof Date))return d?.message})),u.join(", ")},n.getTabIndex=function(){var r=n.props.selected,i=n.props.preSelection,a=!(n.props.showWeekPicker&&(n.props.showWeekNumber||!n.isStartOfWeek()))&&(n.isKeyboardSelected()||n.isSameDay(r)&&Rn(i,r))?0:-1;return a},n.handleFocusDay=function(){var r;n.shouldFocusDay()&&((r=n.dayEl.current)===null||r===void 0||r.focus({preventScroll:!0}))},n.renderDayContents=function(){return n.props.monthShowsDuplicateDaysEnd&&n.isAfterMonth()||n.props.monthShowsDuplicateDaysStart&&n.isBeforeMonth()?null:n.props.renderDayContents?n.props.renderDayContents(zO(n.props.day),n.props.day):zO(n.props.day)},n.render=function(){return Ze.createElement("div",{ref:n.dayEl,className:n.getClassNames(n.props.day),onKeyDown:n.handleOnKeyDown,onClick:n.handleClick,onMouseEnter:n.props.usePointerEvent?void 0:n.handleMouseEnter,onPointerEnter:n.props.usePointerEvent?n.handleMouseEnter:void 0,tabIndex:n.getTabIndex(),"aria-label":n.getAriaLabel(),role:"gridcell",title:n.getTitle(),"aria-disabled":n.isDisabled(),"aria-current":n.isCurrentDay()?"date":void 0,"aria-selected":n.isSelected()||n.isInRange()},n.renderDayContents(),n.getTitle()!==""&&Ze.createElement("span",{className:"overlay"},n.getTitle()))},n}return e.prototype.componentDidMount=function(){this.handleFocusDay()},e.prototype.componentDidUpdate=function(){this.handleFocusDay()},e.prototype.shouldFocusDay=function(){var n=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(n=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(n=!1),this.isDayActiveElement()&&(n=!0),this.isDuplicateDay()&&(n=!1)),n},e.prototype.isDayActiveElement=function(){var n,r,i;return((r=(n=this.props.containerRef)===null||n===void 0?void 0:n.current)===null||r===void 0?void 0:r.contains(document.activeElement))&&((i=document.activeElement)===null||i===void 0?void 0:i.classList.contains("react-datepicker__day"))},e.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},e})(E.Component),xae=(function(t){ka(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.weekNumberEl=E.createRef(),n.handleClick=function(r){n.props.onClick&&n.props.onClick(r)},n.handleOnKeyDown=function(r){var i,a,s=r.key;s===St.Space&&(r.preventDefault(),r.key=St.Enter),(a=(i=n.props).handleOnKeyDown)===null||a===void 0||a.call(i,r)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!Rn(n.props.date,n.props.selected)&&Rn(n.props.date,n.props.preSelection)},n.getTabIndex=function(){return n.props.showWeekPicker&&n.props.showWeekNumber&&(n.isKeyboardSelected()||Rn(n.props.date,n.props.selected)&&Rn(n.props.preSelection,n.props.selected))?0:-1},n.handleFocusWeekNumber=function(r){var i=!1;n.getTabIndex()===0&&!r?.isInputFocused&&Rn(n.props.date,n.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(i=!0),n.props.inline&&!n.props.shouldFocusDayInline&&(i=!1),n.props.containerRef&&n.props.containerRef.current&&n.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(i=!0)),i&&n.weekNumberEl.current&&n.weekNumberEl.current.focus({preventScroll:!0})},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},e.prototype.componentDidUpdate=function(n){this.handleFocusWeekNumber(n)},e.prototype.render=function(){var n=this.props,r=n.weekNumber,i=n.isWeekDisabled,a=n.ariaLabelPrefix,s=a===void 0?e.defaultProps.ariaLabelPrefix:a,o=n.onClick,l={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!o&&!i,"react-datepicker__week-number--selected":!!o&&Rn(this.props.date,this.props.selected)};return Ze.createElement("div",{ref:this.weekNumberEl,className:nn(l),"aria-label":"".concat(s," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex(),role:"gridcell"},r)},e})(E.Component),bae=(function(t){ka(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.isDisabled=function(r){return Ko(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.handleDayClick=function(r,i){n.props.onDayClick&&n.props.onDayClick(r,i)},n.handleDayMouseEnter=function(r){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(r)},n.handleWeekClick=function(r,i,a){for(var s,o,l,u=new Date(r),d=0;d<7;d++){var f=new Date(r);f.setDate(f.getDate()+d);var p=!n.isDisabled(f);if(p){u=f;break}}typeof n.props.onWeekSelect=="function"&&n.props.onWeekSelect(u,i,a),n.props.showWeekPicker&&n.handleDayClick(u,a),((s=n.props.shouldCloseOnSelect)!==null&&s!==void 0?s:e.defaultProps.shouldCloseOnSelect)&&((l=(o=n.props).setOpen)===null||l===void 0||l.call(o,!1))},n.formatWeekNumber=function(r){return n.props.formatWeekNumber?n.props.formatWeekNumber(r):tae(r)},n.isWeekDisabled=function(){for(var r=n.startOfWeek(),i=Vl(r,6),a=new Date(r);a<=i;){if(!n.isDisabled(a))return!1;a=Vl(a,1)}return!0},n.renderDays=function(){var r=n.startOfWeek(),i=[],a=n.formatWeekNumber(r);if(n.props.showWeekNumber){var s=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(n,r,a):void 0;i.push(Ze.createElement(xae,Nn({key:"W"},e.defaultProps,n.props,{weekNumber:a,isWeekDisabled:n.isWeekDisabled(),date:r,onClick:s})))}return i.concat([0,1,2,3,4,5,6].map(function(o){var l=Vl(r,o);return Ze.createElement(yae,Nn({},e.defaultProps,n.props,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:l.valueOf(),day:l,onClick:n.handleDayClick.bind(n,l),onMouseEnter:n.handleDayMouseEnter.bind(n,l)}))}))},n.startOfWeek=function(){return bf(n.props.day,n.props.locale,n.props.calendarStartDay)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!Rn(n.startOfWeek(),n.props.selected)&&Rn(n.startOfWeek(),n.props.preSelection)},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),e.prototype.render=function(){var n={"react-datepicker__week":!0,"react-datepicker__week--selected":Rn(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()},r=this.props.weekClassName?this.props.weekClassName(this.startOfWeek()):void 0;return Ze.createElement("div",{className:nn(n,r),role:"row"},this.renderDays())},e})(E.Component),u0,_ae=6,vg={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},_M=(u0={},u0[vg.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},u0[vg.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},u0[vg.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},u0),Bb=1;function o3(t,e){return t?vg.FOUR_COLUMNS:e?vg.TWO_COLUMNS:vg.THREE_COLUMNS}var wae=(function(t){ka(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.MONTH_REFS=kc([],Array(12),!0).map(function(){return E.createRef()}),n.QUARTER_REFS=kc([],Array(4),!0).map(function(){return E.createRef()}),n.isDisabled=function(r){return Ko(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate,disabled:n.props.disabled})},n.isExcluded=function(r){return LP(r,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.handleDayClick=function(r,i){var a,s;(s=(a=n.props).onDayClick)===null||s===void 0||s.call(a,r,i,n.props.orderInDisplay)},n.handleDayMouseEnter=function(r){var i,a;(a=(i=n.props).onDayMouseEnter)===null||a===void 0||a.call(i,r)},n.handleMouseLeave=function(){var r,i;(i=(r=n.props).onMouseLeave)===null||i===void 0||i.call(r)},n.isRangeStartMonth=function(r){var i=n.props,a=i.day,s=i.startDate,o=i.endDate;return!s||!o?!1:gs(xo(a,r),s)},n.isRangeStartQuarter=function(r){var i=n.props,a=i.day,s=i.startDate,o=i.endDate;return!s||!o?!1:Yw(ng(a,r),s)},n.isRangeEndMonth=function(r){var i=n.props,a=i.day,s=i.startDate,o=i.endDate;return!s||!o?!1:gs(xo(a,r),o)},n.isRangeEndQuarter=function(r){var i=n.props,a=i.day,s=i.startDate,o=i.endDate;return!s||!o?!1:Yw(ng(a,r),o)},n.isInSelectingRangeMonth=function(r){var i,a=n.props,s=a.day,o=a.selectsStart,l=a.selectsEnd,u=a.selectsRange,d=a.startDate,f=a.endDate,p=(i=n.props.selectingDate)!==null&&i!==void 0?i:n.props.preSelection;return!(o||l||u)||!p?!1:o&&f?Ib(p,f,r,s):l&&d||u&&d&&!f?Ib(d,p,r,s):!1},n.isSelectingMonthRangeStart=function(r){var i;if(!n.isInSelectingRangeMonth(r))return!1;var a=n.props,s=a.day,o=a.startDate,l=a.selectsStart,u=xo(s,r),d=(i=n.props.selectingDate)!==null&&i!==void 0?i:n.props.preSelection;return l?gs(u,d):gs(u,o)},n.isSelectingMonthRangeEnd=function(r){var i;if(!n.isInSelectingRangeMonth(r))return!1;var a=n.props,s=a.day,o=a.endDate,l=a.selectsEnd,u=a.selectsRange,d=xo(s,r),f=(i=n.props.selectingDate)!==null&&i!==void 0?i:n.props.preSelection;return l||u?gs(d,f):gs(d,o)},n.isInSelectingRangeQuarter=function(r){var i,a=n.props,s=a.day,o=a.selectsStart,l=a.selectsEnd,u=a.selectsRange,d=a.startDate,f=a.endDate,p=(i=n.props.selectingDate)!==null&&i!==void 0?i:n.props.preSelection;return!(o||l||u)||!p?!1:o&&f?Ub(p,f,r,s):l&&d||u&&d&&!f?Ub(d,p,r,s):!1},n.isWeekInMonth=function(r){var i=n.props.day,a=Vl(r,6);return gs(r,i)||gs(a,i)},n.isCurrentMonth=function(r,i){return Tn(r)===Tn(Fn())&&i===Gs(Fn())},n.isCurrentQuarter=function(r,i){return Tn(r)===Tn(Fn())&&i===gf(Fn())},n.isSelectedMonth=function(r,i,a){return Gs(a)===i&&Tn(r)===Tn(a)},n.isSelectMonthInList=function(r,i,a){return a.some(function(s){return n.isSelectedMonth(r,i,s)})},n.isSelectedQuarter=function(r,i,a){return gf(a)===i&&Tn(r)===Tn(a)},n.isSelectQuarterInList=function(r,i,a){return a.some(function(s){return n.isSelectedQuarter(r,i,s)})},n.isMonthSelected=function(){var r=n.props,i=r.day,a=r.selected,s=r.selectedDates,o=r.selectsMultiple,l=Gs(i);return o?s?.some(function(u){return n.isSelectedMonth(i,l,u)}):!!a&&n.isSelectedMonth(i,l,a)},n.isQuarterSelected=function(){var r=n.props,i=r.day,a=r.selected,s=r.selectedDates,o=r.selectsMultiple,l=gf(i);return o?s?.some(function(u){return n.isSelectedQuarter(i,l,u)}):!!a&&n.isSelectedQuarter(i,l,a)},n.renderWeeks=function(){if(!Hs(n.props.day))return[];for(var r=[],i=n.props.fixedHeight,a=0,s=!1,o=bf(Xu(n.props.day),n.props.locale,n.props.calendarStartDay),l=function(y){return n.props.showWeekPicker?bf(y,n.props.locale,n.props.calendarStartDay):n.props.preSelection},u=function(y){return n.props.showWeekPicker?bf(y,n.props.locale,n.props.calendarStartDay):n.props.selected},d=n.props.selected?u(n.props.selected):void 0,f=n.props.preSelection?l(n.props.preSelection):void 0;r.push(Ze.createElement(bae,Nn({},n.props,{ariaLabelPrefix:n.props.weekAriaLabelPrefix,key:a,day:o,month:Gs(n.props.day),onDayClick:n.handleDayClick,onDayMouseEnter:n.handleDayMouseEnter,selected:d,preSelection:f,showWeekNumber:n.props.showWeekNumbers}))),!s;){a++,o=Bw(o,1);var p=i&&a>=_ae,m=!i&&!n.isWeekInMonth(o);if(p||m)if(n.props.peekNextMonth)s=!0;else break}return r},n.onMonthClick=function(r,i){var a=n.isMonthDisabledForLabelDate(i),s=a.isDisabled,o=a.labelDate;s||n.handleDayClick(Xu(o),r)},n.onMonthMouseEnter=function(r){var i=n.isMonthDisabledForLabelDate(r),a=i.isDisabled,s=i.labelDate;a||n.handleDayMouseEnter(Xu(s))},n.handleMonthNavigation=function(r,i){var a,s,o,l;(s=(a=n.props).setPreSelection)===null||s===void 0||s.call(a,i),(l=(o=n.MONTH_REFS[r])===null||o===void 0?void 0:o.current)===null||l===void 0||l.focus()},n.handleKeyboardNavigation=function(r,i,a){var s,o=n.props,l=o.selected,u=o.preSelection,d=o.setPreSelection,f=o.minDate,p=o.maxDate,m=o.showFourColumnMonthYearPicker,y=o.showTwoColumnMonthYearPicker;if(u){var _=o3(m,y),v=n.getVerticalOffset(_),w=(s=_M[_])===null||s===void 0?void 0:s.grid,M=function(k,U,I){var L,z,O=U,q=I;switch(k){case St.ArrowRight:O=$l(U,Bb),q=I===11?0:I+Bb;break;case St.ArrowLeft:O=Qh(U,Bb),q=I===0?11:I-Bb;break;case St.ArrowUp:O=Qh(U,v),q=!((L=w?.[0])===null||L===void 0)&&L.includes(I)?I+12-v:I-v;break;case St.ArrowDown:O=$l(U,v),q=!((z=w?.[w.length-1])===null||z===void 0)&&z.includes(I)?I-12+v:I+v;break}return{newCalculatedDate:O,newCalculatedMonth:q}},C=function(k,U,I){for(var L=40,z=k,O=!1,q=0,Y=M(z,U,I),X=Y.newCalculatedDate,ee=Y.newCalculatedMonth;!O;){if(q>=L){X=U,ee=I;break}if(f&&X<f){z=St.ArrowRight;var se=M(z,X,ee);X=se.newCalculatedDate,ee=se.newCalculatedMonth}if(p&&X>p){z=St.ArrowLeft;var se=M(z,X,ee);X=se.newCalculatedDate,ee=se.newCalculatedMonth}if(cae(X,n.props)){var se=M(z,X,ee);X=se.newCalculatedDate,ee=se.newCalculatedMonth}else O=!0;q++}return{newCalculatedDate:X,newCalculatedMonth:ee}};if(i===St.Enter){n.isMonthDisabled(a)||(n.onMonthClick(r,a),d?.(l));return}var N=C(i,u,a),P=N.newCalculatedDate,R=N.newCalculatedMonth;switch(i){case St.ArrowRight:case St.ArrowLeft:case St.ArrowUp:case St.ArrowDown:n.handleMonthNavigation(R,P);break}}},n.getVerticalOffset=function(r){var i,a;return(a=(i=_M[r])===null||i===void 0?void 0:i.verticalNavigationOffset)!==null&&a!==void 0?a:0},n.onMonthKeyDown=function(r,i){var a=n.props,s=a.disabledKeyboardNavigation,o=a.handleOnMonthKeyDown,l=r.key;l!==St.Tab&&r.preventDefault(),s||n.handleKeyboardNavigation(r,l,i),o&&o(r)},n.onQuarterClick=function(r,i){var a=ng(n.props.day,i);Lb(a,n.props)||n.handleDayClick(qO(a),r)},n.onQuarterMouseEnter=function(r){var i=ng(n.props.day,r);Lb(i,n.props)||n.handleDayMouseEnter(qO(i))},n.handleQuarterNavigation=function(r,i){var a,s,o,l;n.isDisabled(i)||n.isExcluded(i)||((s=(a=n.props).setPreSelection)===null||s===void 0||s.call(a,i),(l=(o=n.QUARTER_REFS[r-1])===null||o===void 0?void 0:o.current)===null||l===void 0||l.focus())},n.onQuarterKeyDown=function(r,i){var a,s,o=r.key;if(!n.props.disabledKeyboardNavigation)switch(o){case St.Enter:n.onQuarterClick(r,i),(s=(a=n.props).setPreSelection)===null||s===void 0||s.call(a,n.props.selected);break;case St.ArrowRight:if(!n.props.preSelection)break;n.handleQuarterNavigation(i===4?1:i+1,AP(n.props.preSelection,1));break;case St.ArrowLeft:if(!n.props.preSelection)break;n.handleQuarterNavigation(i===1?4:i-1,O6(n.props.preSelection));break}},n.isMonthDisabledForLabelDate=function(r){var i,a=n.props,s=a.day,o=a.disabled,l=a.minDate,u=a.maxDate,d=a.excludeDates,f=a.includeDates,p=xo(s,r);return o?{isDisabled:!0,labelDate:xo(s,r)}:{isDisabled:(i=(l||u||d||f)&&H6(p,n.props))!==null&&i!==void 0?i:!1,labelDate:p}},n.isMonthDisabled=function(r){var i=n.isMonthDisabledForLabelDate(r).isDisabled;return i},n.getMonthClassNames=function(r){var i=n.props,a=i.day,s=i.startDate,o=i.endDate,l=i.preSelection,u=i.monthClassName,d=u?u(xo(a,r)):void 0,f=n.getSelection();return nn("react-datepicker__month-text","react-datepicker__month-".concat(r),d,{"react-datepicker__month-text--disabled":n.isMonthDisabled(r),"react-datepicker__month-text--selected":f?n.isSelectMonthInList(a,r,f):void 0,"react-datepicker__month-text--keyboard-selected":!n.props.disabledKeyboardNavigation&&l&&n.isSelectedMonth(a,r,l)&&!n.isMonthSelected()&&!n.isMonthDisabled(r),"react-datepicker__month-text--in-selecting-range":n.isInSelectingRangeMonth(r),"react-datepicker__month-text--in-range":s&&o?Ib(s,o,r,a):void 0,"react-datepicker__month-text--range-start":n.isRangeStartMonth(r),"react-datepicker__month-text--range-end":n.isRangeEndMonth(r),"react-datepicker__month-text--selecting-range-start":n.isSelectingMonthRangeStart(r),"react-datepicker__month-text--selecting-range-end":n.isSelectingMonthRangeEnd(r),"react-datepicker__month-text--today":n.isCurrentMonth(a,r)})},n.getTabIndex=function(r){if(n.props.preSelection==null)return"-1";var i=Gs(n.props.preSelection),a=n.isMonthDisabledForLabelDate(i).isDisabled,s=r===i&&!(a||n.props.disabledKeyboardNavigation)?"0":"-1";return s},n.getQuarterTabIndex=function(r){if(n.props.preSelection==null)return"-1";var i=gf(n.props.preSelection),a=Lb(n.props.day,n.props),s=r===i&&!(a||n.props.disabledKeyboardNavigation)?"0":"-1";return s},n.getAriaLabel=function(r){var i=n.props,a=i.chooseDayAriaLabelPrefix,s=a===void 0?"Choose":a,o=i.disabledDayAriaLabelPrefix,l=o===void 0?"Not available":o,u=i.day,d=i.locale,f=xo(u,r),p=n.isDisabled(f)||n.isExcluded(f)?l:s;return"".concat(p," ").concat(Sr(f,"MMMM yyyy",d))},n.getQuarterClassNames=function(r){var i=n.props,a=i.day,s=i.startDate,o=i.endDate,l=i.minDate,u=i.maxDate,d=i.excludeDates,f=i.includeDates,p=i.filterDate,m=i.preSelection,y=i.disabledKeyboardNavigation,_=i.disabled,v=(l||u||d||f||p||_)&&Lb(ng(a,r),n.props),w=n.getSelection();return nn("react-datepicker__quarter-text","react-datepicker__quarter-".concat(r),{"react-datepicker__quarter-text--disabled":v,"react-datepicker__quarter-text--selected":w?n.isSelectQuarterInList(a,r,w):void 0,"react-datepicker__quarter-text--keyboard-selected":!y&&m&&n.isSelectedQuarter(a,r,m)&&!n.isQuarterSelected()&&!v,"react-datepicker__quarter-text--in-selecting-range":n.isInSelectingRangeQuarter(r),"react-datepicker__quarter-text--in-range":s&&o?Ub(s,o,r,a):void 0,"react-datepicker__quarter-text--range-start":n.isRangeStartQuarter(r),"react-datepicker__quarter-text--range-end":n.isRangeEndQuarter(r),"react-datepicker__quarter-text--today":n.isCurrentQuarter(a,r)})},n.getMonthContent=function(r){var i=n.props,a=i.showFullMonthYearPicker,s=i.renderMonthContent,o=i.locale,l=i.day,u=z6(r,o),d=IP(r,o);return s?s(r,u,d,l):a?d:u},n.getQuarterContent=function(r){var i,a=n.props,s=a.renderQuarterContent,o=a.locale,l=lae(r,o);return(i=s?.(r,l))!==null&&i!==void 0?i:l},n.renderMonths=function(){var r,i=n.props,a=i.showTwoColumnMonthYearPicker,s=i.showFourColumnMonthYearPicker,o=i.day,l=i.selected,u=(r=_M[o3(s,a)])===null||r===void 0?void 0:r.grid;return u?.map(function(d,f){return Ze.createElement("div",{className:"react-datepicker__month-wrapper",key:f},d.map(function(p,m){return Ze.createElement("div",{ref:n.MONTH_REFS[p],key:m,onClick:function(y){n.onMonthClick(y,p)},onKeyDown:function(y){$6(y)&&(y.preventDefault(),y.key=St.Enter),n.onMonthKeyDown(y,p)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onMonthMouseEnter(p)},onPointerEnter:n.props.usePointerEvent?function(){return n.onMonthMouseEnter(p)}:void 0,tabIndex:Number(n.getTabIndex(p)),className:n.getMonthClassNames(p),"aria-disabled":n.isMonthDisabled(p),role:"option","aria-label":n.getAriaLabel(p),"aria-current":n.isCurrentMonth(o,p)?"date":void 0,"aria-selected":l?n.isSelectedMonth(o,p,l):void 0},n.getMonthContent(p))}))})},n.renderQuarters=function(){var r=n.props,i=r.day,a=r.selected,s=[1,2,3,4];return Ze.createElement("div",{className:"react-datepicker__quarter-wrapper"},s.map(function(o,l){return Ze.createElement("div",{key:l,ref:n.QUARTER_REFS[l],role:"option",onClick:function(u){n.onQuarterClick(u,o)},onKeyDown:function(u){n.onQuarterKeyDown(u,o)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onQuarterMouseEnter(o)},onPointerEnter:n.props.usePointerEvent?function(){return n.onQuarterMouseEnter(o)}:void 0,className:n.getQuarterClassNames(o),"aria-selected":a?n.isSelectedQuarter(i,o,a):void 0,tabIndex:Number(n.getQuarterTabIndex(o)),"aria-current":n.isCurrentQuarter(i,o)?"date":void 0},n.getQuarterContent(o))}))},n.getClassNames=function(){var r=n.props,i=r.selectingDate,a=r.selectsStart,s=r.selectsEnd,o=r.showMonthYearPicker,l=r.showQuarterYearPicker,u=r.showWeekPicker;return nn("react-datepicker__month",{"react-datepicker__month--selecting-range":i&&(a||s)},{"react-datepicker__monthPicker":o},{"react-datepicker__quarterPicker":l},{"react-datepicker__weekPicker":u})},n}return e.prototype.getSelection=function(){var n=this.props,r=n.selected,i=n.selectedDates,a=n.selectsMultiple;if(a)return i;if(r)return[r]},e.prototype.render=function(){var n=this.props,r=n.showMonthYearPicker,i=n.showQuarterYearPicker,a=n.day,s=n.ariaLabelPrefix,o=s===void 0?"Month ":s,l=o?o.trim()+" ":"",u=Hs(a)?"".concat(l).concat(Sr(a,"MMMM, yyyy",this.props.locale)):"",d=r||i;return d?Ze.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":u,role:"listbox"},r?this.renderMonths():this.renderQuarters()):Ze.createElement("div",{role:"table"},this.props.dayNamesHeader&&Ze.createElement("div",{role:"rowgroup"},this.props.dayNamesHeader),this.props.monthHeader&&Ze.createElement("div",{role:"rowgroup"},this.props.monthHeader),Ze.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":u,role:"rowgroup"},this.renderWeeks()),this.props.monthFooter&&Ze.createElement("div",{role:"rowgroup"},this.props.monthFooter))},e})(E.Component),Sae=(function(t){ka(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.monthOptionButtonsRef={},n.isSelectedMonth=function(r){return n.props.month===r},n.handleOptionKeyDown=function(r,i){var a;switch(i.key){case"Enter":i.preventDefault(),n.onChange(r);break;case"Escape":i.preventDefault(),n.props.onCancel();break;case"ArrowUp":case"ArrowDown":{i.preventDefault();var s=(r+(i.key==="ArrowUp"?-1:1)+n.props.monthNames.length)%n.props.monthNames.length;(a=n.monthOptionButtonsRef[s])===null||a===void 0||a.focus();break}}},n.renderOptions=function(){return n.monthOptionButtonsRef={},n.props.monthNames.map(function(r,i){return Ze.createElement("div",{ref:function(a){n.monthOptionButtonsRef[i]=a,n.isSelectedMonth(i)&&a?.focus()},role:"button",tabIndex:0,className:n.isSelectedMonth(i)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:r,onClick:n.onChange.bind(n,i),onKeyDown:n.handleOptionKeyDown.bind(n,i),"aria-selected":n.isSelectedMonth(i)?"true":void 0},n.isSelectedMonth(i)?Ze.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",r)})},n.onChange=function(r){return n.props.onChange(r)},n.handleClickOutside=function(){return n.props.onCancel()},n}return e.prototype.render=function(){return Ze.createElement($S,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},e})(E.Component),Eae=(function(t){ka(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(r){return r.map(function(i,a){return Ze.createElement("option",{key:i,value:a},i)})},n.renderSelectMode=function(r){return Ze.createElement("select",{value:n.props.month,className:"react-datepicker__month-select",onChange:function(i){return n.onChange(parseInt(i.target.value))}},n.renderSelectOptions(r))},n.renderReadView=function(r,i){return Ze.createElement("button",{key:"read",type:"button",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:n.toggleDropdown},Ze.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),Ze.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},i[n.props.month]))},n.renderDropdown=function(r){return Ze.createElement(Sae,Nn({key:"dropdown"},n.props,{monthNames:r,onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(r){var i=n.state.dropdownVisible,a=[n.renderReadView(!i,r)];return i&&a.unshift(n.renderDropdown(r)),a},n.onChange=function(r){n.toggleDropdown(),r!==n.props.month&&n.props.onChange(r)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return e.prototype.render=function(){var n=this,r=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(a){return z6(a,n.props.locale)}:function(a){return IP(a,n.props.locale)}),i;switch(this.props.dropdownMode){case"scroll":i=this.renderScrollMode(r);break;case"select":i=this.renderSelectMode(r);break}return Ze.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},i)},e})(E.Component),l3=5;function Mae(t,e,n){for(var r=[],i=t??ed(n,l3),a=e??Wl(n,l3),s=Xu(i),o=Xu(a);!qu(s,o);)r.push(Fn(s)),s=$l(s,1);return r}var Cae=(function(t){ka(e,t);function e(n){var r=t.call(this,n)||this;return r.renderOptions=function(){return r.state.monthYearsList.map(function(i){var a=kA(i),s=Ac(r.props.date,i)&&gs(r.props.date,i);return Ze.createElement("div",{className:s?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:a,onClick:r.onChange.bind(r,a),"aria-selected":s?"true":void 0},s?Ze.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",Sr(i,r.props.dateFormat,r.props.locale))})},r.onChange=function(i){return r.props.onChange(i)},r.handleClickOutside=function(){r.props.onCancel()},r.state={monthYearsList:Mae(r.props.minDate,r.props.maxDate,r.props.date)},r}return e.prototype.render=function(){var n=nn({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return Ze.createElement($S,{className:n,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(E.Component),c3=5,Nae=(function(t){ka(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r,i,a=(r=n.props.minDate)!==null&&r!==void 0?r:ed(n.props.date,c3),s=(i=n.props.maxDate)!==null&&i!==void 0?i:Wl(n.props.date,c3),o=Xu(a),l=Xu(s),u=[];!qu(o,l);){var d=kA(o);u.push(Ze.createElement("option",{key:d,value:d},Sr(o,n.props.dateFormat,n.props.locale))),o=$l(o,1)}return u},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return Ze.createElement("select",{value:kA(Xu(n.props.date)),className:"react-datepicker__month-year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){var i=Sr(n.props.date,n.props.dateFormat,n.props.locale);return Ze.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:n.toggleDropdown},Ze.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),Ze.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},i))},n.renderDropdown=function(){return Ze.createElement(Cae,Nn({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,i=[n.renderReadView(!r)];return r&&i.unshift(n.renderDropdown()),i},n.onChange=function(r){n.toggleDropdown();var i=Fn(r);Ac(n.props.date,i)&&gs(n.props.date,i)||n.props.onChange(i)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return e.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return Ze.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},n)},e})(E.Component),Aae=(function(t){ka(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={height:null},n.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var r,i,a;n.list&&(n.list.scrollTop=(a=n.centerLi&&e.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-((i=(r=n.header)===null||r===void 0?void 0:r.clientHeight)!==null&&i!==void 0?i:0):n.list.clientHeight,n.centerLi))!==null&&a!==void 0?a:0)})},n.handleClick=function(r){var i,a;(n.props.minTime||n.props.maxTime)&&JO(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&QO(r,n.props)||(a=(i=n.props).onChange)===null||a===void 0||a.call(i,r)},n.isSelectedTime=function(r){var i=Bh(n.props.selected);return i&&G6(i,r)},n.isDisabledTime=function(r){return(n.props.minTime||n.props.maxTime)&&JO(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&QO(r,n.props)},n.liClasses=function(r){var i,a=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(r):void 0];return n.isSelectedTime(r)&&a.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(r)&&a.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(qa(r)*3600+Xa(r)*60+xf(r))%(((i=n.props.intervals)!==null&&i!==void 0?i:e.defaultProps.intervals)*60)!==0&&a.push("react-datepicker__time-list-item--injected"),a.join(" ")},n.handleOnKeyDown=function(r,i){var a,s;r.key===St.Space&&(r.preventDefault(),r.key=St.Enter),(r.key===St.ArrowUp||r.key===St.ArrowLeft)&&r.target instanceof HTMLElement&&r.target.previousSibling&&(r.preventDefault(),r.target.previousSibling instanceof HTMLElement&&r.target.previousSibling.focus()),(r.key===St.ArrowDown||r.key===St.ArrowRight)&&r.target instanceof HTMLElement&&r.target.nextSibling&&(r.preventDefault(),r.target.nextSibling instanceof HTMLElement&&r.target.nextSibling.focus()),r.key===St.Enter&&n.handleClick(i),(s=(a=n.props).handleOnKeyDown)===null||s===void 0||s.call(a,r)},n.renderTimes=function(){for(var r,i=[],a=typeof n.props.format=="string"?n.props.format:"p",s=(r=n.props.intervals)!==null&&r!==void 0?r:e.defaultProps.intervals,o=Bh(n.props.selected)||Bh(n.props.openToDate)||Fn(),l=I0(o),u=n.props.injectTimes&&n.props.injectTimes.sort(function(v,w){return v.getTime()-w.getTime()}),d=60*vae(o),f=d/s,p=0;p<f;p++){var m=fy(l,p*s);if(i.push(m),u){var y=gae(l,m,p,s,u);i=i.concat(y)}}var _=i.reduce(function(v,w){return w.getTime()<=o.getTime()?w:v},i[0]);return i.map(function(v){return Ze.createElement("li",{key:v.valueOf(),onClick:n.handleClick.bind(n,v),className:n.liClasses(v),ref:function(w){v===_&&(n.centerLi=w)},onKeyDown:function(w){n.handleOnKeyDown(w,v)},tabIndex:v===_?0:-1,role:"option","aria-selected":n.isSelectedTime(v)?"true":void 0,"aria-disabled":n.isDisabledTime(v)?"true":void 0},Sr(v,a,n.props.locale))})},n.renderTimeCaption=function(){return n.props.showTimeCaption===!1?Ze.createElement(Ze.Fragment,null):Ze.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(n.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(r){n.header=r}},Ze.createElement("div",{className:"react-datepicker-time__header"},n.props.timeCaption))},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},e.prototype.componentWillUnmount=function(){var n;(n=this.resizeObserver)===null||n===void 0||n.disconnect()},e.prototype.observeDatePickerHeightChanges=function(){var n=this,r=this.props.monthRef;this.updateContainerHeight(),r&&(this.resizeObserver=new ResizeObserver(function(){n.updateContainerHeight()}),this.resizeObserver.observe(r))},e.prototype.updateContainerHeight=function(){if(this.props.monthRef&&this.header){var n=this.props.monthRef.clientHeight-this.header.clientHeight;this.state.height!==n&&this.setState({height:n})}},e.prototype.render=function(){var n=this,r,i=this.state.height;return Ze.createElement("div",{className:"react-datepicker__time-container ".concat(((r=this.props.todayButton)!==null&&r!==void 0?r:e.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),Ze.createElement("div",{className:"react-datepicker__time"},Ze.createElement("div",{className:"react-datepicker__time-box"},Ze.createElement("ul",{className:"react-datepicker__time-list",ref:function(a){n.list=a},style:i?{height:i}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},e.calcCenterPosition=function(n,r){return r.offsetTop-(n/2-r.clientHeight/2)},e})(E.Component),u3=3,Tae=(function(t){ka(e,t);function e(n){var r=t.call(this,n)||this;return r.YEAR_REFS=kc([],Array(r.props.yearItemNumber),!0).map(function(){return E.createRef()}),r.isDisabled=function(i){return Ko(i,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(i){return LP(i,{excludeDates:r.props.excludeDates})},r.selectingDate=function(){var i;return(i=r.props.selectingDate)!==null&&i!==void 0?i:r.props.preSelection},r.updateFocusOnPaginate=function(i){var a=function(){var s,o;(o=(s=r.YEAR_REFS[i])===null||s===void 0?void 0:s.current)===null||o===void 0||o.focus()};window.requestAnimationFrame(a)},r.handleYearClick=function(i,a){r.props.onDayClick&&r.props.onDayClick(i,a)},r.handleYearNavigation=function(i,a){var s,o,l,u,d=r.props,f=d.date,p=d.yearItemNumber;if(!(f===void 0||p===void 0)){var m=Vu(f,p).startPeriod;r.isDisabled(a)||r.isExcluded(a)||((o=(s=r.props).setPreSelection)===null||o===void 0||o.call(s,a),i-m<0?r.updateFocusOnPaginate(p-(m-i)):i-m>=p?r.updateFocusOnPaginate(Math.abs(p-(i-m))):(u=(l=r.YEAR_REFS[i-m])===null||l===void 0?void 0:l.current)===null||u===void 0||u.focus())}},r.isSameDay=function(i,a){return Rn(i,a)},r.isCurrentYear=function(i){return i===Tn(Fn())},r.isRangeStart=function(i){return r.props.startDate&&r.props.endDate&&Ac(Mc(Fn(),i),r.props.startDate)},r.isRangeEnd=function(i){return r.props.startDate&&r.props.endDate&&Ac(Mc(Fn(),i),r.props.endDate)},r.isInRange=function(i){return Fb(i,r.props.startDate,r.props.endDate)},r.isInSelectingRange=function(i){var a=r.props,s=a.selectsStart,o=a.selectsEnd,l=a.selectsRange,u=a.startDate,d=a.endDate;return!(s||o||l)||!r.selectingDate()?!1:s&&d?Fb(i,r.selectingDate(),d):o&&u||l&&u&&!d?Fb(i,u,r.selectingDate()):!1},r.isSelectingRangeStart=function(i){var a;if(!r.isInSelectingRange(i))return!1;var s=r.props,o=s.startDate,l=s.selectsStart,u=Mc(Fn(),i);return l?Ac(u,(a=r.selectingDate())!==null&&a!==void 0?a:null):Ac(u,o??null)},r.isSelectingRangeEnd=function(i){var a;if(!r.isInSelectingRange(i))return!1;var s=r.props,o=s.endDate,l=s.selectsEnd,u=s.selectsRange,d=Mc(Fn(),i);return l||u?Ac(d,(a=r.selectingDate())!==null&&a!==void 0?a:null):Ac(d,o??null)},r.isKeyboardSelected=function(i){if(!(r.props.disabledKeyboardNavigation||r.props.date===void 0||r.props.preSelection==null)){var a=r.props,s=a.minDate,o=a.maxDate,l=a.excludeDates,u=a.includeDates,d=a.filterDate,f=a.selected,p=L0(Mc(r.props.date,i)),m=(s||o||l||u||d)&&gw(i,r.props),y=!!f&&Rn(p,L0(f)),_=Rn(p,L0(r.props.preSelection));return!r.props.inline&&!y&&_&&!m}},r.isSelectedYear=function(i){var a=r.props,s=a.selectsMultiple,o=a.selected,l=a.selectedDates;return s?l?.some(function(u){return i===Tn(u)}):!!o&&i===Tn(o)},r.onYearClick=function(i,a){var s=r.props.date;s!==void 0&&r.handleYearClick(L0(Mc(s,a)),i)},r.onYearKeyDown=function(i,a){var s,o,l=i.key,u=r.props,d=u.date,f=u.yearItemNumber,p=u.handleOnKeyDown;if(l!==St.Tab&&i.preventDefault(),!r.props.disabledKeyboardNavigation)switch(l){case St.Enter:if(r.props.selected==null)break;r.onYearClick(i,a),(o=(s=r.props).setPreSelection)===null||o===void 0||o.call(s,r.props.selected);break;case St.ArrowRight:if(r.props.preSelection==null)break;r.handleYearNavigation(a+1,Wl(r.props.preSelection,1));break;case St.ArrowLeft:if(r.props.preSelection==null)break;r.handleYearNavigation(a-1,ed(r.props.preSelection,1));break;case St.ArrowUp:{if(d===void 0||f===void 0||r.props.preSelection==null)break;var m=Vu(d,f).startPeriod,y=u3,_=a-y;if(_<m){var v=f%y;a>=m&&a<m+v?y=v:y+=v,_=a-y}r.handleYearNavigation(_,ed(r.props.preSelection,y));break}case St.ArrowDown:{if(d===void 0||f===void 0||r.props.preSelection==null)break;var w=Vu(d,f).endPeriod,y=u3,_=a+y;if(_>w){var v=f%y;a<=w&&a>w-v?y=v:y+=v,_=a+y}r.handleYearNavigation(_,Wl(r.props.preSelection,y));break}}p&&p(i)},r.getYearClassNames=function(i){var a=r.props,s=a.date,o=a.disabled,l=a.minDate,u=a.maxDate,d=a.excludeDates,f=a.includeDates,p=a.filterDate,m=a.yearClassName;return nn("react-datepicker__year-text","react-datepicker__year-".concat(i),s?m?.(Mc(s,i)):void 0,{"react-datepicker__year-text--selected":r.isSelectedYear(i),"react-datepicker__year-text--disabled":(l||u||d||f||p||o)&&gw(i,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(i),"react-datepicker__year-text--range-start":r.isRangeStart(i),"react-datepicker__year-text--range-end":r.isRangeEnd(i),"react-datepicker__year-text--in-range":r.isInRange(i),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(i),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(i),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(i),"react-datepicker__year-text--today":r.isCurrentYear(i)})},r.getYearTabIndex=function(i){if(r.props.disabledKeyboardNavigation||r.props.preSelection==null)return"-1";var a=Tn(r.props.preSelection),s=gw(i,r.props);return i===a&&!s?"0":"-1"},r.getYearContent=function(i){return r.props.renderYearContent?r.props.renderYearContent(i):i},r}return e.prototype.render=function(){var n=this,r=[],i=this.props,a=i.date,s=i.yearItemNumber,o=i.onYearMouseEnter,l=i.onYearMouseLeave;if(a===void 0)return null;for(var u=Vu(a,s),d=u.startPeriod,f=u.endPeriod,p=function(_){r.push(Ze.createElement("div",{ref:m.YEAR_REFS[_-d],onClick:function(v){n.onYearClick(v,_)},onKeyDown:function(v){$6(v)&&(v.preventDefault(),v.key=St.Enter),n.onYearKeyDown(v,_)},tabIndex:Number(m.getYearTabIndex(_)),className:m.getYearClassNames(_),onMouseEnter:m.props.usePointerEvent?void 0:function(v){return o(v,_)},onPointerEnter:m.props.usePointerEvent?function(v){return o(v,_)}:void 0,onMouseLeave:m.props.usePointerEvent?void 0:function(v){return l(v,_)},onPointerLeave:m.props.usePointerEvent?function(v){return l(v,_)}:void 0,key:_,"aria-current":m.isCurrentYear(_)?"date":void 0},m.getYearContent(_)))},m=this,y=d;y<=f;y++)p(y);return Ze.createElement("div",{className:"react-datepicker__year"},Ze.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},r))},e})(E.Component);function Pae(t,e,n,r){for(var i=[],a=0;a<2*e+1;a++){var s=t+e-a,o=!0;n&&(o=Tn(n)<=s),r&&o&&(o=Tn(r)>=s),o&&i.push(s)}return i}var Rae=(function(t){ka(e,t);function e(n){var r=t.call(this,n)||this;r.yearOptionButtonsRef={},r.handleOptionKeyDown=function(o,l){var u;switch(l.key){case"Enter":l.preventDefault(),r.onChange(o);break;case"Escape":l.preventDefault(),r.props.onCancel();break;case"ArrowUp":case"ArrowDown":{l.preventDefault();var d=o+(l.key==="ArrowUp"?1:-1);r.yearOptionButtonsRef[d]&&((u=r.yearOptionButtonsRef[d])===null||u===void 0||u.focus());break}}},r.renderOptions=function(){r.yearOptionButtonsRef={};var o=r.props.year,l=r.state.yearsList.map(function(f){return Ze.createElement("div",{ref:function(p){r.yearOptionButtonsRef[f]=p,f===o&&p?.focus()},role:"button",tabIndex:0,className:o===f?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:f,onClick:r.onChange.bind(r,f),onKeyDown:r.handleOptionKeyDown.bind(r,f),"aria-selected":o===f?"true":void 0},o===f?Ze.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",f)}),u=r.props.minDate?Tn(r.props.minDate):null,d=r.props.maxDate?Tn(r.props.maxDate):null;return(!d||!r.state.yearsList.find(function(f){return f===d}))&&l.unshift(Ze.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},Ze.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!u||!r.state.yearsList.find(function(f){return f===u}))&&l.push(Ze.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},Ze.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),l},r.onChange=function(o){r.props.onChange(o)},r.handleClickOutside=function(){r.props.onCancel()},r.shiftYears=function(o){var l=r.state.yearsList.map(function(u){return u+o});r.setState({yearsList:l})},r.incrementYears=function(){return r.shiftYears(1)},r.decrementYears=function(){return r.shiftYears(-1)};var i=n.yearDropdownItemNumber,a=n.scrollableYearDropdown,s=i||(a?10:5);return r.state={yearsList:Pae(r.props.year,s,r.props.minDate,r.props.maxDate)},r.dropdownRef=E.createRef(),r}return e.prototype.componentDidMount=function(){var n=this.dropdownRef.current;if(n){var r=n.children?Array.from(n.children):null,i=r?r.find(function(a){return a.ariaSelected}):null;n.scrollTop=i&&i instanceof HTMLElement?i.offsetTop+(i.clientHeight-n.clientHeight)/2:(n.scrollHeight-n.clientHeight)/2}},e.prototype.render=function(){var n=nn({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return Ze.createElement($S,{className:n,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(E.Component),Dae=(function(t){ka(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=n.props.minDate?Tn(n.props.minDate):1900,i=n.props.maxDate?Tn(n.props.maxDate):2100,a=[],s=r;s<=i;s++)a.push(Ze.createElement("option",{key:s,value:s},s));return a},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return Ze.createElement("select",{value:n.props.year,className:"react-datepicker__year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){return Ze.createElement("button",{key:"read",type:"button",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:n.toggleDropdown},Ze.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),Ze.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},n.props.year))},n.renderDropdown=function(){return Ze.createElement(Rae,Nn({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,i=[n.renderReadView(!r)];return r&&i.unshift(n.renderDropdown()),i},n.onChange=function(r){n.toggleDropdown(),r!==n.props.year&&n.props.onChange(r)},n.toggleDropdown=function(r){n.setState({dropdownVisible:!n.state.dropdownVisible},function(){n.props.adjustDateOnChange&&n.handleYearChange(n.props.date,r)})},n.handleYearChange=function(r,i){var a;(a=n.onSelect)===null||a===void 0||a.call(n,r,i),n.setOpen()},n.onSelect=function(r,i){var a,s;(s=(a=n.props).onSelect)===null||s===void 0||s.call(a,r,i)},n.setOpen=function(){var r,i;(i=(r=n.props).setOpen)===null||i===void 0||i.call(r,!0)},n}return e.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return Ze.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},n)},e})(E.Component),kae=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],Y6="react-datepicker-ignore-onclickoutside",jae=function(t){var e=(t.className||"").split(/\s+/);return kae.some(function(n){return e.indexOf(n)>=0})},Oae=(function(t){ka(e,t);function e(n){var r=t.call(this,n)||this;return r.monthContainer=void 0,r.handleClickOutside=function(i){r.props.onClickOutside(i)},r.setClickOutsideRef=function(){return r.containerRef.current},r.handleDropdownFocus=function(i){var a,s;jae(i.target)&&((s=(a=r.props).onDropdownFocus)===null||s===void 0||s.call(a,i))},r.getDateInView=function(){var i=r.props,a=i.preSelection,s=i.selected,o=i.openToDate,l=V6(r.props),u=W6(r.props),d=Fn(),f=o||s||a;return f||(l&&Dc(d,l)?l:u&&qu(d,u)?u:d)},r.increaseMonth=function(){r.setState(function(i){var a=i.date;return{date:$l(a,1)}},function(){return r.handleMonthChange(r.state.date)})},r.decreaseMonth=function(){r.setState(function(i){var a=i.date;return{date:Qh(a,1)}},function(){return r.handleMonthChange(r.state.date)})},r.handleDayClick=function(i,a,s){r.props.onSelect(i,a,s),r.props.setPreSelection&&r.props.setPreSelection(i)},r.handleDayMouseEnter=function(i){r.setState({selectingDate:i}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(i)},r.handleMonthMouseLeave=function(){r.setState({selectingDate:void 0}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()},r.handleYearMouseEnter=function(i,a){r.setState({selectingDate:Mc(Fn(),a)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(i,a)},r.handleYearMouseLeave=function(i,a){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(i,a)},r.handleYearChange=function(i){var a,s,o,l;(s=(a=r.props).onYearChange)===null||s===void 0||s.call(a,i),r.setState({isRenderAriaLiveMessage:!0}),r.props.adjustDateOnChange&&(r.props.onSelect(i),(l=(o=r.props).setOpen)===null||l===void 0||l.call(o,!0)),r.props.setPreSelection&&r.props.setPreSelection(i)},r.getEnabledPreSelectionDateForMonth=function(i){if(!Ko(i,r.props))return i;for(var a=Xu(i),s=iae(i),o=une(s,a),l=null,u=0;u<=o;u++){var d=Vl(a,u);if(!Ko(d,r.props)){l=d;break}}return l},r.handleMonthChange=function(i){var a,s,o,l=(a=r.getEnabledPreSelectionDateForMonth(i))!==null&&a!==void 0?a:i;r.handleCustomMonthChange(l),r.props.adjustDateOnChange&&(r.props.onSelect(l),(o=(s=r.props).setOpen)===null||o===void 0||o.call(s,!0)),r.props.setPreSelection&&r.props.setPreSelection(l)},r.handleCustomMonthChange=function(i){var a,s;(s=(a=r.props).onMonthChange)===null||s===void 0||s.call(a,i),r.setState({isRenderAriaLiveMessage:!0})},r.handleMonthYearChange=function(i){r.handleYearChange(i),r.handleMonthChange(i)},r.changeYear=function(i){r.setState(function(a){var s=a.date;return{date:Mc(s,Number(i))}},function(){return r.handleYearChange(r.state.date)})},r.changeMonth=function(i){r.setState(function(a){var s=a.date;return{date:xo(s,Number(i))}},function(){var a,s;r.handleMonthChange(r.state.date),(s=(a=r.props).onMonthSelectedInChange)===null||s===void 0||s.call(a,0)})},r.changeMonthYear=function(i){r.setState(function(a){var s=a.date;return{date:Mc(xo(s,Gs(i)),Tn(i))}},function(){return r.handleMonthYearChange(r.state.date)})},r.header=function(i,a){if(i===void 0&&(i=r.state.date),a===void 0&&(a=0),!Hs(i))return[];var s=r.props.disabled,o=bf(i,r.props.locale,r.props.calendarStartDay),l=[];return r.props.showWeekNumbers&&l.push(Ze.createElement("div",{key:"W",className:"react-datepicker__day-name ".concat(s?"react-datepicker__day-name--disabled":""),role:"columnheader"},Ze.createElement("span",{className:"react-datepicker__sr-only"},"Week number"),Ze.createElement("span",{"aria-hidden":"true"},r.props.weekLabel||"#"))),l.concat([0,1,2,3,4,5,6].map(function(u){var d=Vl(o,u),f=r.formatWeekday(d,r.props.locale),p=Sr(d,"EEEE",r.props.locale),m=r.props.weekDayClassName?r.props.weekDayClassName(d):void 0;if(r.props.renderCustomDayName){var y=r.props.renderCustomDayName({day:d,shortName:f,fullName:p,locale:r.props.locale,customDayNameCount:a});return Ze.createElement("div",{key:u,role:"columnheader",className:nn("react-datepicker__day-name",m,s?"react-datepicker__day-name--disabled":"")},y)}return Ze.createElement("div",{key:u,role:"columnheader",className:nn("react-datepicker__day-name",m,s?"react-datepicker__day-name--disabled":"")},Ze.createElement("span",{className:"react-datepicker__sr-only"},p),Ze.createElement("span",{"aria-hidden":"true"},f))}))},r.formatWeekday=function(i,a){return r.props.formatWeekDay?aae(i,r.props.formatWeekDay,a):r.props.useWeekdaysShort?oae(i,a):sae(i,a)},r.decreaseYear=function(){r.setState(function(i){var a,s=i.date;return{date:ed(s,r.props.showYearPicker?(a=r.props.yearItemNumber)!==null&&a!==void 0?a:e.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.clearSelectingDate=function(){r.setState({selectingDate:void 0})},r.renderPreviousButton=function(){var i,a,s;if(!r.props.renderCustomHeader){var o=(i=r.props.monthsShown)!==null&&i!==void 0?i:e.defaultProps.monthsShown,l=r.props.showPreviousMonths?o-1:0,u=(a=r.props.monthSelectedIn)!==null&&a!==void 0?a:l,d=Qh(r.state.date,u),f;switch(!0){case r.props.disabled:f=!0;break;case r.props.showMonthYearPicker:f=n3(r.state.date,r.props);break;case r.props.showYearPicker:f=fae(r.state.date,r.props);break;case r.props.showQuarterYearPicker:f=uae(r.state.date,r.props);break;default:f=e3(d,r.props);break}if(!(!((s=r.props.forceShowMonthNavigation)!==null&&s!==void 0?s:e.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&f||r.props.showTimeSelectOnly)){var p=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],m=["react-datepicker__navigation","react-datepicker__navigation--previous"],y=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(y=r.decreaseYear),f&&r.props.showDisabledMonthNavigation&&(m.push("react-datepicker__navigation--previous--disabled"),y=void 0);var _=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,v=r.props,w=v.previousMonthButtonLabel,M=w===void 0?e.defaultProps.previousMonthButtonLabel:w,C=v.previousYearButtonLabel,N=C===void 0?e.defaultProps.previousYearButtonLabel:C,P=r.props,R=P.previousMonthAriaLabel,k=R===void 0?typeof M=="string"?M:"Previous Month":R,U=P.previousYearAriaLabel,I=U===void 0?typeof N=="string"?N:"Previous Year":U;return Ze.createElement("button",{type:"button",className:m.join(" "),onClick:y,onKeyDown:r.props.handleOnKeyDown,"aria-label":_?I:k},Ze.createElement("span",{className:p.join(" ")},_?N:M))}}},r.increaseYear=function(){r.setState(function(i){var a,s=i.date;return{date:Wl(s,r.props.showYearPicker?(a=r.props.yearItemNumber)!==null&&a!==void 0?a:e.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.renderNextButton=function(){var i;if(!r.props.renderCustomHeader){var a;switch(!0){case r.props.disabled:a=!0;break;case r.props.showMonthYearPicker:a=r3(r.state.date,r.props);break;case r.props.showYearPicker:a=hae(r.state.date,r.props);break;case r.props.showQuarterYearPicker:a=dae(r.state.date,r.props);break;default:a=t3(r.state.date,r.props);break}if(!(!((i=r.props.forceShowMonthNavigation)!==null&&i!==void 0?i:e.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&a||r.props.showTimeSelectOnly)){var s=["react-datepicker__navigation","react-datepicker__navigation--next"],o=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];r.props.showTimeSelect&&s.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&s.push("react-datepicker__navigation--next--with-today-button");var l=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(l=r.increaseYear),a&&r.props.showDisabledMonthNavigation&&(s.push("react-datepicker__navigation--next--disabled"),l=void 0);var u=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,d=r.props,f=d.nextMonthButtonLabel,p=f===void 0?e.defaultProps.nextMonthButtonLabel:f,m=d.nextYearButtonLabel,y=m===void 0?e.defaultProps.nextYearButtonLabel:m,_=r.props,v=_.nextMonthAriaLabel,w=v===void 0?typeof p=="string"?p:"Next Month":v,M=_.nextYearAriaLabel,C=M===void 0?typeof y=="string"?y:"Next Year":M;return Ze.createElement("button",{type:"button",className:s.join(" "),onClick:l,onKeyDown:r.props.handleOnKeyDown,"aria-label":u?C:w},Ze.createElement("span",{className:o.join(" ")},u?y:p))}}},r.renderCurrentMonth=function(i){i===void 0&&(i=r.state.date);var a=["react-datepicker__current-month"];return r.props.showYearDropdown&&a.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&a.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&a.push("react-datepicker__current-month--hasMonthYearDropdown"),Ze.createElement("h2",{className:a.join(" ")},Hs(i)?Sr(i,r.props.dateFormat,r.props.locale):"")},r.renderYearDropdown=function(i){if(i===void 0&&(i=!1),!(!r.props.showYearDropdown||i))return Ze.createElement(Dae,Nn({},e.defaultProps,r.props,{date:r.state.date,onChange:r.changeYear,year:Tn(r.state.date)}))},r.renderMonthDropdown=function(i){if(i===void 0&&(i=!1),!(!r.props.showMonthDropdown||i))return Ze.createElement(Eae,Nn({},e.defaultProps,r.props,{month:Gs(r.state.date),onChange:r.changeMonth}))},r.renderMonthYearDropdown=function(i){if(i===void 0&&(i=!1),!(!r.props.showMonthYearDropdown||i))return Ze.createElement(Nae,Nn({},e.defaultProps,r.props,{date:r.state.date,onChange:r.changeMonthYear}))},r.handleTodayButtonClick=function(i){r.props.onSelect(XO(),i),r.props.setPreSelection&&r.props.setPreSelection(XO())},r.renderTodayButton=function(){if(!(!r.props.todayButton||r.props.showTimeSelectOnly))return Ze.createElement("div",{className:"react-datepicker__today-button",onClick:r.handleTodayButtonClick},r.props.todayButton)},r.renderDayNamesHeader=function(i,a){return a===void 0&&(a=0),Ze.createElement("div",{className:"react-datepicker__day-names",role:"row"},r.header(i,a))},r.renderDefaultHeader=function(i){var a=i.monthDate,s=i.i,o=Ze.createElement("div",{className:nn("react-datepicker__header",{"react-datepicker__header--has-time-select":r.props.showTimeSelect,"react-datepicker__header--middle":r.props.monthHeaderPosition==="middle","react-datepicker__header--bottom":r.props.monthHeaderPosition==="bottom"})},r.renderCurrentMonth(a),Ze.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(s!==0),r.renderMonthYearDropdown(s!==0),r.renderYearDropdown(s!==0)));return r.props.monthHeaderPosition==="top"?o:Ze.createElement("div",{className:"react-datepicker__header-wrapper"},r.renderPreviousButton()||null,r.renderNextButton()||null,o)},r.renderCustomHeader=function(i){var a,s,o=i.monthDate,l=i.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var u=r.props,d=u.showYearPicker,f=u.yearItemNumber,p;if(d){var m=Vu(o,f),y=m.startPeriod,_=m.endPeriod;p={startYear:y,endYear:_}}var v=e3(r.state.date,r.props),w=t3(r.state.date,r.props),M=n3(r.state.date,r.props),C=r3(r.state.date,r.props);return Ze.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},(s=(a=r.props).renderCustomHeader)===null||s===void 0?void 0:s.call(a,Nn(Nn(Nn({},r.state),d&&{visibleYearsRange:p}),{customHeaderCount:l,monthDate:o,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:v,nextMonthButtonDisabled:w,prevYearButtonDisabled:M,nextYearButtonDisabled:C})))},r.renderYearHeader=function(i){var a=i.monthDate,s=r.props,o=s.showYearPicker,l=s.yearItemNumber,u=l===void 0?e.defaultProps.yearItemNumber:l,d=Vu(a,u),f=d.startPeriod,p=d.endPeriod;return Ze.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},o?"".concat(f," - ").concat(p):Tn(a))},r.renderHeader=function(i){var a=i.monthDate,s=i.i,o=s===void 0?0:s,l={monthDate:a,i:o};switch(!0){case r.props.renderCustomHeader!==void 0:return r.renderCustomHeader(l);case(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker):return r.renderYearHeader(l);default:return r.renderDefaultHeader(l)}},r.renderMonths=function(){var i,a;if(!(r.props.showTimeSelectOnly||r.props.showYearPicker)){for(var s=[],o=(i=r.props.monthsShown)!==null&&i!==void 0?i:e.defaultProps.monthsShown,l=r.props.showPreviousMonths?o-1:0,u=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Wl(r.state.date,l):Qh(r.state.date,l),d=(a=r.props.monthSelectedIn)!==null&&a!==void 0?a:l,f=0;f<o;++f){var p=f-d+l,m=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Wl(u,p):$l(u,p),y="month-".concat(f),_=f<o-1,v=f>0;s.push(Ze.createElement("div",{key:y,ref:function(w){r.monthContainer=w??void 0},className:"react-datepicker__month-container"},r.props.monthHeaderPosition==="top"&&r.renderHeader({monthDate:m,i:f}),Ze.createElement(wae,Nn({},e.defaultProps,r.props,{containerRef:r.containerRef,ariaLabelPrefix:r.props.monthAriaLabelPrefix,day:m,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,orderInDisplay:f,selectingDate:r.state.selectingDate,monthShowsDuplicateDaysEnd:_,monthShowsDuplicateDaysStart:v,dayNamesHeader:r.renderDayNamesHeader(m,f),monthHeader:r.props.monthHeaderPosition==="middle"?r.renderHeader({monthDate:m,i:f}):void 0,monthFooter:r.props.monthHeaderPosition==="bottom"?r.renderHeader({monthDate:m,i:f}):void 0}))))}return s}},r.renderYears=function(){if(!r.props.showTimeSelectOnly&&r.props.showYearPicker)return Ze.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),Ze.createElement(Tae,Nn({},e.defaultProps,r.props,{selectingDate:r.state.selectingDate,date:r.state.date,onDayClick:r.handleDayClick,clearSelectingDate:r.clearSelectingDate,onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave})))},r.renderTimeSection=function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return Ze.createElement(Aae,Nn({},e.defaultProps,r.props,{onChange:r.props.onTimeChange,format:r.props.timeFormat,intervals:r.props.timeIntervals,monthRef:r.state.monthContainer}))},r.renderInputTimeSection=function(){var i,a;if(r.props.showTimeInput){if(r.props.selectsRange){var s=r.props,o=s.startDate,l=s.endDate,u=o?new Date(o):void 0,d=u&&Hs(u)&&!!o,f=d?"".concat(Pm(u.getHours()),":").concat(Pm(u.getMinutes())):"",p=l?new Date(l):void 0,m=p&&Hs(p)&&!!l,y=m?"".concat(Pm(p.getHours()),":").concat(Pm(p.getMinutes())):"";return Ze.createElement(Ze.Fragment,null,Ze.createElement(bM,Nn({},e.defaultProps,r.props,{date:u,timeString:f,onChange:function(M){var C,N;(N=(C=r.props).onTimeChange)===null||N===void 0||N.call(C,M,"start")},timeInputLabel:((i=r.props.timeInputLabel)!==null&&i!==void 0?i:"Time")+" (Start)"})),Ze.createElement(bM,Nn({},e.defaultProps,r.props,{date:p,timeString:y,onChange:function(M){var C,N;(N=(C=r.props).onTimeChange)===null||N===void 0||N.call(C,M,"end")},timeInputLabel:((a=r.props.timeInputLabel)!==null&&a!==void 0?a:"Time")+" (End)"})))}var _=r.props.selected?new Date(r.props.selected):void 0,v=_&&Hs(_)&&!!r.props.selected,w=v?"".concat(Pm(_.getHours()),":").concat(Pm(_.getMinutes())):"";return Ze.createElement(bM,Nn({},e.defaultProps,r.props,{date:_,timeString:w,onChange:function(M){var C,N;(N=(C=r.props).onTimeChange)===null||N===void 0||N.call(C,M)}}))}},r.renderAriaLiveRegion=function(){var i;if(!Hs(r.state.date))return Ze.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"});var a=Vu(r.state.date,(i=r.props.yearItemNumber)!==null&&i!==void 0?i:e.defaultProps.yearItemNumber),s=a.startPeriod,o=a.endPeriod,l;return r.props.showYearPicker?l="".concat(s," - ").concat(o):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?l=Tn(r.state.date):l="".concat(IP(Gs(r.state.date),r.props.locale)," ").concat(Tn(r.state.date)),Ze.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&l)},r.renderChildren=function(){if(r.props.children)return Ze.createElement("div",{className:"react-datepicker__children-container"},r.props.children)},r.containerRef=E.createRef(),r.state={date:r.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},r}return Object.defineProperty(e,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,outsideClickIgnoreClass:Y6,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:tx,monthHeaderPosition:"top"}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){var n=this;this.props.showTimeSelect&&(this.assignMonthContainer=(function(){n.setState({monthContainer:n.monthContainer})})())},e.prototype.componentDidUpdate=function(n){var r=this;if(this.props.preSelection&&Hs(this.props.preSelection)&&(!Rn(this.props.preSelection,n.preSelection)||this.props.monthSelectedIn!==n.monthSelectedIn)){var i=!gs(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return i&&r.handleCustomMonthChange(r.state.date)})}else this.props.openToDate&&!Rn(this.props.openToDate,n.openToDate)&&this.setState({date:this.props.openToDate})},e.prototype.render=function(){var n=this.props.container||Kie;return Ze.createElement($S,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},Ze.createElement("div",{style:{display:"contents"},ref:this.containerRef},Ze.createElement(n,{className:nn("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly,inline:this.props.inline},this.renderAriaLiveRegion(),this.props.monthHeaderPosition==="top"&&this.renderPreviousButton(),this.props.monthHeaderPosition==="top"&&this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},e})(E.Component),Iae=function(t){var e=t.icon,n=t.className,r=n===void 0?"":n,i=t.onClick,a="react-datepicker__calendar-icon";if(typeof e=="string")return Ze.createElement("i",{className:"".concat(a," ").concat(e," ").concat(r),"aria-hidden":"true",onClick:i});if(Ze.isValidElement(e)){var s=e;return Ze.cloneElement(s,{className:"".concat(s.props.className||""," ").concat(a," ").concat(r),onClick:function(o){typeof s.props.onClick=="function"&&s.props.onClick(o),typeof i=="function"&&i(o)}})}return Ze.createElement("svg",{className:"".concat(a," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:i},Ze.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},q6=(function(t){ka(e,t);function e(n){var r=t.call(this,n)||this;return r.portalRoot=null,r.el=document.createElement("div"),r}return e.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},e.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},e.prototype.render=function(){return Vq.createPortal(this.props.children,this.el)},e})(E.Component),Lae="[tabindex], a, button, input, select, textarea",Fae=function(t){return(t instanceof HTMLAnchorElement||!t.disabled)&&t.tabIndex!==-1},X6=(function(t){ka(e,t);function e(n){var r=t.call(this,n)||this;return r.getTabChildren=function(){var i;return Array.prototype.slice.call((i=r.tabLoopRef.current)===null||i===void 0?void 0:i.querySelectorAll(Lae),1,-1).filter(Fae)},r.handleFocusStart=function(){var i=r.getTabChildren();i&&i.length>1&&i[i.length-1].focus()},r.handleFocusEnd=function(){var i=r.getTabChildren();i&&i.length>1&&i[0].focus()},r.tabLoopRef=E.createRef(),r}return e.prototype.render=function(){var n;return((n=this.props.enableTabLoop)!==null&&n!==void 0?n:e.defaultProps.enableTabLoop)?Ze.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},Ze.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,Ze.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},e.defaultProps={enableTabLoop:!0},e})(E.Component);function Uae(t){function e(n){var r,i=typeof n.hidePopper=="boolean"?n.hidePopper:!0,a=E.useRef(null),s=Xie(Nn({open:!i,whileElementsMounted:Wz,placement:n.popperPlacement,middleware:kc([Iie({padding:15}),Oie(10),Lie({element:a})],(r=n.popperModifiers)!==null&&r!==void 0?r:[],!0)},n.popperProps)),o=Nn(Nn({},n),{hidePopper:i,popperProps:Nn(Nn({},s),{arrowRef:a})});return Ze.createElement(t,Nn({},o))}return e.displayName="withFloating(".concat(t.displayName||t.name||"Component",")"),e}var Bae=function(t){var e=t.className,n=t.wrapperClassName,r=t.hidePopper,i=r===void 0?!0:r,a=t.popperComponent,s=t.targetComponent,o=t.enableTabLoop,l=t.popperOnKeyDown,u=t.portalId,d=t.portalHost,f=t.popperProps,p=t.showArrow,m=t.popperTargetRef,y=t.monthHeaderPosition;E.useEffect(function(){m?.current&&f.refs.setPositionReference(m.current)},[m,f.refs]);var _=void 0;if(!i){var v=nn("react-datepicker-popper",!p&&"react-datepicker-popper-offset",y==="middle"&&"react-datepicker-popper--header-middle",y==="bottom"&&"react-datepicker-popper--header-bottom",e);_=Ze.createElement(X6,{enableTabLoop:o},Ze.createElement("div",{ref:f.refs.setFloating,style:f.floatingStyles,className:v,"data-placement":f.placement,onKeyDown:l},a,p&&Ze.createElement(Hie,{ref:f.arrowRef,context:f.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}t.popperContainer&&(_=E.createElement(t.popperContainer,{},_)),u&&!i&&(_=Ze.createElement(q6,{portalId:u,portalHost:d},_));var w=nn("react-datepicker-wrapper",n);return Ze.createElement(Ze.Fragment,null,Ze.createElement("div",{ref:f.refs.setReference,className:w},s),_)},zae=Uae(Bae);function d3(t,e){return t&&e?Gs(t)!==Gs(e)||Tn(t)!==Tn(e):t!==e}var wM="Date input not valid.",f3=(function(t){ka(e,t);function e(n){var r=t.call(this,n)||this;return r.calendar=null,r.input=null,r.getPreSelection=function(){var i=r.props.timeZone,a=r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:Fn();return i?YO(a,i):a},r.modifyHolidays=function(){var i;return(i=r.props.holidays)===null||i===void 0?void 0:i.reduce(function(a,s){var o=hh(s.date,"yyyy-MM-dd",void 0,!1);return o?kc(kc([],a,!0),[Nn(Nn({},s),{date:o})],!1):a},[])},r.calcInitialState=function(){var i=r.props.timeZone,a=r.getPreSelection(),s=V6(r.props),o=W6(r.props),l=s&&Dc(a,I0(s))?s:o&&qu(a,KO(o))?o:a,u=r.props.selectsRange?r.props.startDate:r.props.selected;return u&&i&&(u=YO(u,i)),{open:r.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:u??l,highlightDates:i3(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},r.getInputValue=function(){var i,a=r.props,s=a.locale,o=a.startDate,l=a.endDate,u=a.rangeSeparator,d=a.selected,f=a.selectedDates,p=a.selectsMultiple,m=a.selectsRange,y=a.formatMultipleDates,_=a.value,v=(i=r.props.dateFormat)!==null&&i!==void 0?i:e.defaultProps.dateFormat,w=r.state.inputValue;if(typeof _=="string")return _;if(typeof w=="string")return w;if(m)return Jie(o,l,{dateFormat:v,locale:s,rangeSeparator:u});if(p){if(y){var M=function(C){return zs(C,{dateFormat:v,locale:s})};return y(f??[],M)}return eae(f??[],{dateFormat:v,locale:s})}return zs(d,{dateFormat:v,locale:s})},r.resetHiddenStatus=function(){r.setState(Nn(Nn({},r.state),{wasHidden:!1}))},r.setHiddenStatus=function(){r.setState(Nn(Nn({},r.state),{wasHidden:!0}))},r.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&r.setHiddenStatus()},r.clearPreventFocusTimeout=function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)},r.setFocus=function(){var i,a;(a=(i=r.input)===null||i===void 0?void 0:i.focus)===null||a===void 0||a.call(i,{preventScroll:!0})},r.setBlur=function(){var i,a;(a=(i=r.input)===null||i===void 0?void 0:i.blur)===null||a===void 0||a.call(i),r.cancelFocusInput()},r.deferBlur=function(){requestAnimationFrame(function(){r.setBlur()})},r.setOpen=function(i,a){a===void 0&&(a=!1),r.setState({open:i,preSelection:i&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:SM},function(){i||r.setState(function(s){return{focused:a?s.focused:!1}},function(){!a&&r.deferBlur(),r.setState({inputValue:null})})})},r.inputOk=function(){return Uc(r.state.preSelection)},r.isCalendarOpen=function(){return r.props.open===void 0?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open},r.handleFocus=function(i){var a,s,o=r.state.wasHidden,l=o?r.state.open:!0;o&&r.resetHiddenStatus(),r.state.preventFocus||((s=(a=r.props).onFocus)===null||s===void 0||s.call(a,i),l&&!r.props.preventOpenOnFocus&&!r.props.readOnly&&r.setOpen(!0)),r.setState({focused:!0})},r.sendFocusBackToInput=function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})},r.cancelFocusInput=function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=void 0},r.deferFocusInput=function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)},r.handleDropdownFocus=function(){r.cancelFocusInput()},r.resetInputValue=function(){r.setState(Nn(Nn({},r.state),{inputValue:null}))},r.handleBlur=function(i){var a,s;(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&((s=(a=r.props).onBlur)===null||s===void 0||s.call(a,i));var o=r.state.inputValue;if(typeof o=="string"&&o.length>0){var l=/[a-zA-Z0-9]/.test(o);!l&&r.props.selected&&r.setSelected(null,void 0,!0)}r.resetInputValue(),r.state.open&&r.props.open===!1&&r.setOpen(!1),r.setState({focused:!1})},r.handleCalendarClickOutside=function(i){var a,s;(s=(a=r.props).onClickOutside)===null||s===void 0||s.call(a,i),!r.props.inline&&!i.defaultPrevented&&r.setOpen(!1),r.props.withPortal&&i.preventDefault()},r.handleChange=function(){for(var i,a,s,o,l,u,d,f,p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];var y=p[0];if(!(r.props.onChangeRaw&&(r.props.onChangeRaw.apply(r,p),!y||typeof y.isDefaultPrevented!="function"||y.isDefaultPrevented()))){r.setState({inputValue:y?.target instanceof HTMLInputElement?y.target.value:null,lastPreSelectChange:Hae});var _=r.props,v=_.selectsRange,w=_.startDate,M=_.endDate,C=(i=r.props.dateFormat)!==null&&i!==void 0?i:e.defaultProps.dateFormat,N=(a=r.props.strictParsing)!==null&&a!==void 0?a:e.defaultProps.strictParsing,P=y?.target instanceof HTMLInputElement?y.target.value:"";if(v){var R=r.props.rangeSeparator,k=R.trim(),U=P.split(C.includes(k)?R:k,2).map(function(se){return se.trim()}),I=U[0],L=U[1],z=hh(I??"",C,r.props.locale,N),O=z?hh(L??"",C,r.props.locale,N):null,q=((s=Bh(w))===null||s===void 0?void 0:s.getTime())!==z?.getTime(),Y=((o=Bh(M))===null||o===void 0?void 0:o.getTime())!==O?.getTime();if(!q&&!Y||z&&Ko(z,r.props)||O&&Ko(O,r.props))return;z&&r.setState({preSelection:z}),(u=(l=r.props).onChange)===null||u===void 0||u.call(l,[z,O],y)}else{var X=hh(P,C,r.props.locale,N,(d=r.props.selected)!==null&&d!==void 0?d:void 0);if(X||!P)r.setSelected(X,y,!0);else if(!r.props.inline){var ee=Qie(P,(f=r.state.preSelection)!==null&&f!==void 0?f:void 0);ee&&(!r.props.minDate||!Dc(ee,r.props.minDate))&&(!r.props.maxDate||!qu(ee,r.props.maxDate))&&r.setState({preSelection:ee})}}}},r.handleSelect=function(i,a,s){var o;if(!r.props.readOnly){var l=r.props,u=l.selectsRange,d=l.startDate,f=l.endDate,p=l.locale,m=l.swapRange,y=(o=r.props.dateFormat)!==null&&o!==void 0?o:e.defaultProps.dateFormat,_=!u||d&&!f&&(m||!xM(i,d));if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&_&&r.sendFocusBackToInput(),r.props.onChangeRaw){var v=zs(i,{dateFormat:y,locale:p});r.props.onChangeRaw(a,{date:i,formattedDate:v})}r.setSelected(i,a,!1,s),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect?r.setPreSelection(i):_&&r.setOpen(!1)}},r.setSelected=function(i,a,s,o){var l,u,d=r.props.timeZone,f=i;if(f&&d&&(f=Tu(f,d)),r.props.showYearPicker){if(f!==null&&gw(Tn(f),r.props))return}else if(r.props.showMonthYearPicker){if(f!==null&&H6(f,r.props))return}else if(f!==null&&Ko(f,r.props))return;var p=r.props,m=p.onChange,y=p.selectsRange,_=p.startDate,v=p.endDate,w=p.selectsMultiple,M=p.selectedDates,C=p.minTime,N=p.swapRange;if(!zh(r.props.selected,f)||r.props.allowSameDay||y||w)if(f!==null&&(r.props.selected&&(!s||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly&&!r.props.showTimeInput)&&(f=Pu(f,{hour:qa(r.props.selected),minute:Xa(r.props.selected),second:xf(r.props.selected)})),!s&&(r.props.showTimeSelect||r.props.showTimeSelectOnly)&&C&&(f=Pu(f,{hour:C.getHours(),minute:C.getMinutes(),second:C.getSeconds()})),r.props.inline||r.setState({preSelection:f}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:o})),y){var P=m,R=!_&&!v,k=_&&!v,U=!_&&!!v,I=_&&v;R?P?.([f,null],a):k?f===null?P?.([null,null],a):xM(f,_)?P?.(N?[f,_]:[f,null],a):P?.([_,f],a):U&&(f&&xM(f,v)?P?.([f,v],a):P?.([f,null],a)),I&&P?.([f,null],a)}else if(w){var L=m;if(f!==null)if(!M?.length)L?.([f],a);else{var z=M.some(function(q){return Rn(q,f)});if(z){var O=M.filter(function(q){return!Rn(q,f)});L?.(O,a)}else L?.(kc(kc([],M,!0),[f],!1),a)}}else m?.(f,a);s||((u=(l=r.props).onSelect)===null||u===void 0||u.call(l,f,a),r.setState({inputValue:null}))},r.setPreSelection=function(i){if(!r.props.readOnly){var a=Uc(r.props.minDate),s=Uc(r.props.maxDate),o=!0;if(i){var l=I0(i);if(a&&s)o=Th(i,r.props.minDate,r.props.maxDate);else if(a){var u=I0(r.props.minDate);o=qu(i,u)||zh(l,u)}else if(s){var d=KO(r.props.maxDate);o=Dc(i,d)||zh(l,d)}}o&&r.setState({preSelection:i})}},r.toggleCalendar=function(){r.setOpen(!r.state.open)},r.handleTimeChange=function(i,a){var s,o;if(!r.props.selectsMultiple){var l=r.props,u=l.selectsRange,d=l.startDate,f=l.endDate,p=l.onChange,m=l.timeZone;if(u){var y=p;if(a==="start"){if(d){var _=Pu(d,{hour:qa(i),minute:Xa(i)});r.setState({preSelection:_}),m&&(_=Tu(_,m)),y?.([_,f?m?Tu(f,m):f:null],void 0)}}else if(a==="end"){if(f){var v=Pu(f,{hour:qa(i),minute:Xa(i)});r.setState({preSelection:v}),m&&(v=Tu(v,m)),y?.([d?m?Tu(d,m):d:null,v],void 0)}}else{var w=d&&!f;if(w){var _=Pu(d,{hour:qa(i),minute:Xa(i)});r.setState({preSelection:_}),m&&(_=Tu(_,m)),y?.([_,null],void 0)}else if(d&&f){var v=Pu(f,{hour:qa(i),minute:Xa(i)});r.setState({preSelection:v}),m&&(v=Tu(v,m)),y?.([m?Tu(d,m):d,v],void 0)}else{var M=Pu(r.getPreSelection(),{hour:qa(i),minute:Xa(i)});r.setState({preSelection:M})}}}else{var C=r.props.selected?r.props.selected:r.getPreSelection(),M=r.props.selected?i:Pu(C,{hour:qa(i),minute:Xa(i)});r.setState({preSelection:M}),M&&m&&(M=Tu(M,m)),(o=(s=r.props).onChange)===null||o===void 0||o.call(s,M)}r.props.shouldCloseOnSelect&&!r.props.showTimeInput&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}},r.onInputClick=function(){var i,a;!r.props.disabled&&!r.props.readOnly&&r.setOpen(!0),(a=(i=r.props).onInputClick)===null||a===void 0||a.call(i)},r.handleTimeOnlyArrowKey=function(i){var a,s,o,l,u=Bh(r.props.selected)||r.state.preSelection||Fn(),d=(a=r.props.timeIntervals)!==null&&a!==void 0?a:30,f=(s=r.props.dateFormat)!==null&&s!==void 0?s:e.defaultProps.dateFormat,p=Array.isArray(f)?f[0]:f,m=I0(u),y=qa(u)*60+Xa(u),_=1440-d,v;if(i===St.ArrowUp){var w=Math.max(0,y-d);v=fy(m,w)}else{var w=Math.min(_,y+d);v=fy(m,w)}var M=Sr(v,p||e.defaultProps.dateFormat,r.props.locale);if(r.setState({preSelection:v,inputValue:M}),!(r.props.selectsRange||r.props.selectsMultiple)){var C=r.props.selected?r.props.selected:r.getPreSelection(),N=r.props.selected?v:Pu(C,{hour:qa(v),minute:Xa(v)});(l=(o=r.props).onChange)===null||l===void 0||l.call(o,N),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),requestAnimationFrame(function(){r.scrollToTimeOption(v)})}},r.handleTimeOnlyEnterKey=function(i){var a,s,o,l,u=i.target,d=u.value,f=(a=r.props.dateFormat)!==null&&a!==void 0?a:e.defaultProps.dateFormat,p=r.props.timeFormat||"p",m=r.state.preSelection||Bh(r.props.selected)||Fn(),y=hh(d,f,r.props.locale,(s=r.props.strictParsing)!==null&&s!==void 0?s:!1,m),_=m;if(y&&Hs(y))_=y;else{var v=((o=r.calendar)===null||o===void 0?void 0:o.containerRef.current)instanceof Element&&r.calendar.containerRef.current.querySelector(".react-datepicker__time-list-item[tabindex='0']");if(v instanceof HTMLElement){var w=(l=v.textContent)===null||l===void 0?void 0:l.trim();if(w){var M=hh(w,p,r.props.locale,!1,m);M&&Hs(M)&&(_=M)}}}r.handleTimeChange(_),r.setOpen(!1),r.sendFocusBackToInput()},r.scrollToTimeOption=function(i){var a,s;if(!((a=r.calendar)===null||a===void 0)&&a.containerRef.current){for(var o=r.calendar.containerRef.current,l=Array.from(o.querySelectorAll(".react-datepicker__time-list-item")),u=null,d=1/0,f=r.props.timeFormat||"p",p=0,m=l;p<m.length;p++){var y=m[p],_=(s=y.textContent)===null||s===void 0?void 0:s.trim();if(_){var v=hh(_,f,r.props.locale,!1,i);if(v&&Hs(v)){if(G6(v,i)){u=y;break}var w=Math.abs(v.getTime()-i.getTime());w<d&&(d=w,u=y)}}}u&&(l.forEach(function(M){M.setAttribute("tabindex","-1")}),u.setAttribute("tabindex","0"),u.scrollIntoView({behavior:"smooth",block:"center"}))}},r.onInputKeyDown=function(i){var a,s,o,l,u,d;(s=(a=r.props).onKeyDown)===null||s===void 0||s.call(a,i);var f=i.key;if(!r.state.open&&!r.props.inline&&!r.props.preventOpenOnFocus){(f===St.ArrowDown||f===St.ArrowUp||f===St.Enter)&&((o=r.onInputClick)===null||o===void 0||o.call(r));return}if(r.state.open&&r.props.showTimeSelectOnly){if(f===St.ArrowDown||f===St.ArrowUp){i.preventDefault(),r.handleTimeOnlyArrowKey(f);return}if(f===St.Enter){i.preventDefault(),r.handleTimeOnlyEnterKey(i);return}}if(r.state.open){if(f===St.ArrowDown||f===St.ArrowUp){i.preventDefault();var p=r.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',m=((l=r.calendar)===null||l===void 0?void 0:l.containerRef.current)instanceof Element&&r.calendar.containerRef.current.querySelector(p);m instanceof HTMLElement&&m.focus({preventScroll:!0});return}var y=Fn(r.state.preSelection);f===St.Enter?(i.preventDefault(),i.target.blur(),r.inputOk()&&r.state.lastPreSelectChange===SM?(r.handleSelect(y,i),!r.props.shouldCloseOnSelect&&r.setPreSelection(y)):r.setOpen(!1)):f===St.Escape?(i.preventDefault(),i.target.blur(),r.sendFocusBackToInput(),r.setOpen(!1)):f===St.Tab&&r.setOpen(!1),r.inputOk()||(d=(u=r.props).onInputError)===null||d===void 0||d.call(u,{code:1,msg:wM})}},r.onPortalKeyDown=function(i){var a=i.key;a===St.Escape&&(i.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))},r.onDayKeyDown=function(i){var a,s,o,l,u,d,f=r.props,p=f.minDate,m=f.maxDate,y=f.disabledKeyboardNavigation,_=f.showWeekPicker,v=f.shouldCloseOnSelect,w=f.locale,M=f.calendarStartDay,C=f.adjustDateOnChange,N=f.inline;if((s=(a=r.props).onKeyDown)===null||s===void 0||s.call(a,i),!y){var P=i.key,R=i.shiftKey,k=Fn(r.state.preSelection),U=function(z,O){var q=O;switch(z){case St.ArrowRight:q=_?Bw(O,1):Vl(O,1);break;case St.ArrowLeft:q=_?HO(O):jA(O,1);break;case St.ArrowUp:q=HO(O);break;case St.ArrowDown:q=Bw(O,1);break;case St.PageUp:q=R?ed(O,1):Qh(O,1);break;case St.PageDown:q=R?Wl(O,1):$l(O,1);break;case St.Home:q=bf(O,w,M);break;case St.End:q=rae(O);break}return q},I=function(z,O){for(var q=40,Y=z,X=!1,ee=0,se=U(z,O);!X;){if(ee>=q){se=O;break}p&&se<p&&(Y=St.ArrowRight,se=Ko(p,r.props)?U(Y,se):p),m&&se>m&&(Y=St.ArrowLeft,se=Ko(m,r.props)?U(Y,se):m),Ko(se,r.props)?((Y===St.PageUp||Y===St.Home)&&(Y=St.ArrowRight),(Y===St.PageDown||Y===St.End)&&(Y=St.ArrowLeft),se=U(Y,se)):X=!0,ee++}return se};if(P===St.Enter){i.preventDefault(),r.handleSelect(k,i),!v&&r.setPreSelection(k);return}else if(P===St.Escape){i.preventDefault(),r.setOpen(!1),r.inputOk()||(l=(o=r.props).onInputError)===null||l===void 0||l.call(o,{code:1,msg:wM});return}var L=null;switch(P){case St.ArrowLeft:case St.ArrowRight:case St.ArrowUp:case St.ArrowDown:case St.PageUp:case St.PageDown:case St.Home:case St.End:L=I(P,k);break}if(!L){(d=(u=r.props).onInputError)===null||d===void 0||d.call(u,{code:1,msg:wM});return}i.preventDefault(),r.setState({lastPreSelectChange:SM}),C&&r.setSelected(L),r.setPreSelection(L),N&&r.setState({shouldFocusDayInline:!0})}},r.onPopperKeyDown=function(i){var a=i.key;a===St.Escape&&(i.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1))},r.onClearClick=function(i){i&&i.preventDefault&&i.preventDefault(),r.sendFocusBackToInput();var a=r.props,s=a.selectsRange,o=a.onChange;o?.(s?[null,null]:null,i),r.setState({inputValue:null})},r.clear=function(){r.onClearClick()},r.onScroll=function(i){typeof r.props.closeOnScroll=="boolean"&&r.props.closeOnScroll?(i.target===document||i.target===document.documentElement||i.target===document.body)&&r.setOpen(!1):typeof r.props.closeOnScroll=="function"&&r.props.closeOnScroll(i)&&r.setOpen(!1)},r.handleMonthSelectedInChange=function(i){r.setState({monthSelectedIn:i})},r.renderCalendar=function(){var i,a;return!r.props.inline&&!r.isCalendarOpen()?null:Ze.createElement(Oae,Nn({showMonthYearDropdown:void 0,ref:function(s){r.calendar=s}},r.props,r.state,{setOpen:r.setOpen,dateFormat:(i=r.props.dateFormatCalendar)!==null&&i!==void 0?i:e.defaultProps.dateFormatCalendar,onSelect:r.handleSelect,onClickOutside:r.handleCalendarClickOutside,holidays:mae(r.modifyHolidays()),outsideClickIgnoreClass:r.props.outsideClickIgnoreClass,onDropdownFocus:r.handleDropdownFocus,onTimeChange:r.handleTimeChange,className:r.props.calendarClassName,container:r.props.calendarContainer,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,setPreSelection:r.setPreSelection,dropdownMode:(a=r.props.dropdownMode)!==null&&a!==void 0?a:e.defaultProps.dropdownMode,onMonthSelectedInChange:r.handleMonthSelectedInChange}),r.props.children)},r.renderAriaLiveRegion=function(){var i,a=r.props.locale,s=(i=r.props.dateFormat)!==null&&i!==void 0?i:e.defaultProps.dateFormat,o=r.props.showTimeInput||r.props.showTimeSelect,l=o?"PPPPp":"PPPP",u;return r.props.selectsRange?u="Selected start date: ".concat(zs(r.props.startDate,{dateFormat:l,locale:a}),". ").concat(r.props.endDate?"End date: "+zs(r.props.endDate,{dateFormat:l,locale:a}):""):r.props.showTimeSelectOnly?u="Selected time: ".concat(zs(r.props.selected,{dateFormat:s,locale:a})):r.props.showYearPicker?u="Selected year: ".concat(zs(r.props.selected,{dateFormat:"yyyy",locale:a})):r.props.showMonthYearPicker?u="Selected month: ".concat(zs(r.props.selected,{dateFormat:"MMMM yyyy",locale:a})):r.props.showQuarterYearPicker?u="Selected quarter: ".concat(zs(r.props.selected,{dateFormat:"yyyy, QQQ",locale:a})):u="Selected date: ".concat(zs(r.props.selected,{dateFormat:l,locale:a})),Ze.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},u)},r.renderDateInput=function(){var i,a,s,o,l,u,d,f=nn(r.props.className,(i={},i[r.props.outsideClickIgnoreClass||e.defaultProps.outsideClickIgnoreClass]=r.state.open,i)),p=r.props.customInput||Ze.createElement("input",{type:"text"}),m=r.props.customInputRef||"ref",y={},_=(s=r.props["aria-describedby"])!==null&&s!==void 0?s:r.props.ariaDescribedBy,v=(o=r.props["aria-invalid"])!==null&&o!==void 0?o:r.props.ariaInvalid,w=(l=r.props["aria-label"])!==null&&l!==void 0?l:r.props.ariaLabel,M=(u=r.props["aria-labelledby"])!==null&&u!==void 0?u:r.props.ariaLabelledBy,C=(d=r.props["aria-required"])!==null&&d!==void 0?d:r.props.ariaRequired;return _!=null&&(y["aria-describedby"]=_),v!=null&&(y["aria-invalid"]=v),w!=null&&(y["aria-label"]=w),M!=null&&(y["aria-labelledby"]=M),C!=null&&(y["aria-required"]=C),E.cloneElement(p,Nn((a={},a[m]=function(N){r.input=N},a.value=r.getInputValue(),a.onBlur=r.handleBlur,a.onChange=r.handleChange,a.onClick=r.onInputClick,a.onFocus=r.handleFocus,a.onKeyDown=r.onInputKeyDown,a.id=r.props.id,a.name=r.props.name,a.form=r.props.form,a.autoFocus=r.props.autoFocus,a.placeholder=r.props.placeholderText,a.disabled=r.props.disabled,a.autoComplete=r.props.autoComplete,a.className=nn(p.props.className,f),a.title=r.props.title,a.readOnly=r.props.readOnly,a.required=r.props.required,a.tabIndex=r.props.tabIndex,a),y))},r.renderClearButton=function(){var i=r.props,a=i.isClearable,s=i.disabled,o=i.selected,l=i.startDate,u=i.endDate,d=i.clearButtonTitle,f=i.clearButtonClassName,p=f===void 0?"":f,m=i.ariaLabelClose,y=m===void 0?"Close":m,_=i.selectedDates,v=i.readOnly;return a&&!v&&(o!=null||l!=null||u!=null||_?.length)?Ze.createElement("button",{type:"button",className:nn("react-datepicker__close-icon",p,{"react-datepicker__close-icon--disabled":s}),disabled:s,"aria-label":y,onClick:r.onClearClick,title:d,tabIndex:-1}):null},r.state=r.calcInitialState(),r.preventFocusTimeout=void 0,r}return Object.defineProperty(e,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,outsideClickIgnoreClass:Y6,readOnly:!1,rangeSeparator:B6,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:tx,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.componentDidUpdate=function(n,r){var i,a,s,o;this.props.selectsRange&&d3(n.startDate,this.props.startDate)?this.setPreSelection(this.props.startDate):d3(n.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&n.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),this.props.selectsRange&&r.open===!1&&this.state.open===!0&&this.state.monthSelectedIn!==0&&this.setState({monthSelectedIn:0}),n.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:i3(this.props.highlightDates)}),!r.focused&&!zh(n.selected,this.props.selected)&&this.setState({inputValue:null}),r.open!==this.state.open&&(r.open===!1&&this.state.open===!0&&((a=(i=this.props).onCalendarOpen)===null||a===void 0||a.call(i)),r.open===!0&&this.state.open===!1&&((o=(s=this.props).onCalendarClose)===null||o===void 0||o.call(s)))},e.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.renderInputContainer=function(){var n=this.props,r=n.showIcon,i=n.icon,a=n.calendarIconClassname,s=n.calendarIconClassName,o=n.toggleCalendarOnIconClick,l=this.state.open;return a&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),Ze.createElement("div",{className:"react-datepicker__input-container".concat(r?" react-datepicker__view-calendar-icon":"")},r&&Ze.createElement(Iae,Nn({icon:i,className:nn(s,!s&&a,l&&"react-datepicker-ignore-onclickoutside")},o?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},e.prototype.render=function(){var n=this.renderCalendar();if(this.props.inline)return n;if(this.props.withPortal){var r=this.state.open?Ze.createElement(X6,{enableTabLoop:this.props.enableTabLoop},Ze.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},n)):null;return this.state.open&&this.props.portalId&&(r=Ze.createElement(q6,Nn({portalId:this.props.portalId},this.props),r)),Ze.createElement(Ze.Fragment,null,this.renderInputContainer(),r)}return Ze.createElement(zae,Nn({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:n,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow,monthHeaderPosition:this.props.monthHeaderPosition}))},e})(E.Component),Hae="input",SM="navigate";const Vae=[{label:"Last 7 days",getValue:()=>({start:jA(new Date,7),end:new Date})},{label:"Last 30 days",getValue:()=>({start:jA(new Date,30),end:new Date})},{label:"This week",getValue:()=>({start:Gc(new Date),end:new Date})},{label:"This month",getValue:()=>({start:TP(new Date),end:new Date})},{label:"This year",getValue:()=>({start:ex(new Date),end:new Date})},{label:"Last year",getValue:()=>({start:ed(new Date,1),end:new Date})},{label:"All time",getValue:()=>({start:null,end:null})}];function K6({startDate:t,endDate:e,onChange:n,className:r=""}){const[i,a]=E.useState(!1),s=f=>{const{start:p,end:m}=f.getValue();n({startDate:p,endDate:m}),a(!1)},o=f=>{n({startDate:f,endDate:e})},l=f=>{n({startDate:t,endDate:f})},u=()=>{n({startDate:null,endDate:null}),a(!1)},d=()=>!t&&!e?"All time":t&&e?`${Ws(t,"MMM d, yyyy")} - ${Ws(e,"MMM d, yyyy")}`:t?`From ${Ws(t,"MMM d, yyyy")}`:e?`Until ${Ws(e,"MMM d, yyyy")}`:"Select dates";return c.jsxs("div",{className:`relative ${r}`,children:[c.jsxs("button",{onClick:()=>a(!i),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors",style:{background:"var(--app-card)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--app-text)"},children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsx("span",{children:d()}),c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&c.jsxs("div",{className:"absolute top-full mt-2 right-0 z-50 rounded-xl shadow-2xl p-4",style:{background:"var(--app-card)",border:"1px solid rgba(255,255,255,0.1)",minWidth:"320px"},children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("div",{className:"text-xs font-medium mb-2",style:{color:"var(--app-accent-3)"},children:"Quick Select"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:Vae.map(f=>c.jsx("button",{onClick:()=>s(f),className:"px-2 py-1 rounded text-xs transition-colors hover:opacity-80",style:{background:"rgba(0, 194, 179, 0.1)",color:"var(--app-primary)",border:"1px solid rgba(0, 194, 179, 0.2)"},children:f.label},f.label))})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-medium mb-1 block",style:{color:"var(--app-accent-3)"},children:"Start Date"}),c.jsx(f3,{selected:t,onChange:o,selectsStart:!0,startDate:t,endDate:e,maxDate:e||new Date,placeholderText:"Start date",className:"w-full px-3 py-2 rounded-lg text-sm",calendarClassName:"dark-calendar",wrapperClassName:"w-full"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-medium mb-1 block",style:{color:"var(--app-accent-3)"},children:"End Date"}),c.jsx(f3,{selected:e,onChange:l,selectsEnd:!0,startDate:t,endDate:e,minDate:t,maxDate:new Date,placeholderText:"End date",className:"w-full px-3 py-2 rounded-lg text-sm",calendarClassName:"dark-calendar",wrapperClassName:"w-full"})]})]}),c.jsxs("div",{className:"flex justify-between pt-3",style:{borderTop:"1px solid rgba(255,255,255,0.1)"},children:[c.jsx("button",{onClick:u,className:"text-xs px-3 py-1.5 rounded transition-colors",style:{color:"var(--app-text)",opacity:.7},children:"Clear"}),c.jsx("button",{onClick:()=>a(!1),className:"text-xs px-3 py-1.5 rounded font-medium",style:{background:"var(--app-primary)",color:"#000"},children:"Apply"})]})]}),i&&c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)})]})}function Wae(){const t=Es(),e=E.useContext(kr),[n,r]=E.useState([]),[i,a]=E.useState(!0),[s,o]=E.useState(0),[l,u]=E.useState(0),d=50,[f,p]=E.useState(""),[m,y]=E.useState(""),[_,v]=E.useState(""),[w,M]=E.useState(""),[C,N]=E.useState(""),[P,R]=E.useState(""),[k,U]=E.useState({startDate:null,endDate:null}),[I,L]=E.useState([]),[z,O]=E.useState(!1);E.useEffect(()=>{if(!e.isSuperAdmin){alert("Super admin access required"),t("/systems");return}q(),Y()},[e.isSuperAdmin,t]),E.useEffect(()=>{Y()},[l,f,m,_,w,C,P,k]);async function q(){try{const j=await qe.get("/api/discord_tags");L(j.data.tags||[])}catch(j){console.error("Failed to load discord tags:",j)}}async function Y(){a(!0);try{const j=new URLSearchParams;j.append("limit",d),j.append("offset",l*d),f&&j.append("approver",f),m&&j.append("submitter",m),_&&j.append("discord_tag",_),w&&j.append("action",w),C&&j.append("submission_type",C),P&&j.append("search",P),k.startDate&&j.append("start_date",Ws(k.startDate,"yyyy-MM-dd")),k.endDate&&j.append("end_date",Ws(k.endDate,"yyyy-MM-dd"));const B=await qe.get(`/api/approval_audit?${j.toString()}`);r(B.data.entries||[]),o(B.data.total||0)}catch(j){alert("Failed to load audit log: "+(j.response?.data?.detail||j.message))}finally{a(!1)}}async function X(j){O(!0);try{const B=new URLSearchParams;B.append("format",j),f&&B.append("approver",f),m&&B.append("submitter",m),_&&B.append("discord_tag",_),w&&B.append("action",w),k.startDate&&B.append("start_date",Ws(k.startDate,"yyyy-MM-dd")),k.endDate&&B.append("end_date",Ws(k.endDate,"yyyy-MM-dd"));const ae=await qe.get(`/api/approval_audit/export?${B.toString()}`,{responseType:j==="csv"?"blob":"json"});if(j==="csv"){const re=new Blob([ae.data],{type:"text/csv"}),de=window.URL.createObjectURL(re),ce=document.createElement("a");ce.href=de,ce.download=`approval_audit_${Ws(new Date,"yyyy-MM-dd")}.csv`,ce.click(),window.URL.revokeObjectURL(de)}else{const re=new Blob([JSON.stringify(ae.data,null,2)],{type:"application/json"}),de=window.URL.createObjectURL(re),ce=document.createElement("a");ce.href=de,ce.download=`approval_audit_${Ws(new Date,"yyyy-MM-dd")}.json`,ce.click(),window.URL.revokeObjectURL(de)}}catch(B){alert("Failed to export: "+(B.response?.data?.detail||B.message))}finally{O(!1)}}function ee(){p(""),y(""),v(""),M(""),N(""),R(""),U({startDate:null,endDate:null}),u(0)}function se(j){const B={approved:"bg-green-500 text-white",rejected:"bg-red-500 text-white",direct_edit:"bg-blue-500 text-white",direct_add:"bg-purple-500 text-white"},ae={approved:"APPROVED",rejected:"REJECTED",direct_edit:"EDITED",direct_add:"ADDED"};return c.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${B[j]||"bg-gray-500 text-white"}`,children:ae[j]||j.toUpperCase()})}function W(j){const B={super_admin:"bg-purple-500 text-white",partner:"bg-cyan-500 text-white",sub_admin:"bg-amber-500 text-black"},ae={super_admin:"Super Admin",partner:"Partner",sub_admin:"Sub-Admin"};return c.jsx("span",{className:`px-2 py-1 rounded text-xs ${B[j]||"bg-gray-500 text-white"}`,children:ae[j]||j})}const $=[f,m,_,w,C,P,k.startDate].filter(Boolean).length,G=Math.ceil(s/d);return e.isSuperAdmin?c.jsx("div",{className:"p-4 md:p-6 w-full",children:c.jsxs(an,{className:"w-full",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Approval Audit Log"}),c.jsx("p",{className:"text-sm text-gray-400 mt-1 hidden sm:block",children:"Track all approval and rejection actions across the system."})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"relative",children:[c.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 rounded text-sm font-medium bg-gray-700 text-white hover:bg-gray-600 transition-colors",onClick:()=>document.getElementById("export-menu").classList.toggle("hidden"),disabled:z,children:[z?c.jsx("span",{className:"animate-spin",children:""}):c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export"]}),c.jsxs("div",{id:"export-menu",className:"hidden absolute right-0 mt-1 w-32 bg-gray-700 rounded shadow-lg z-10",children:[c.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-600",onClick:()=>{document.getElementById("export-menu").classList.add("hidden"),X("csv")},children:"Export CSV"}),c.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-white hover:bg-gray-600",onClick:()=>{document.getElementById("export-menu").classList.add("hidden"),X("json")},children:"Export JSON"})]})]}),c.jsx(ft,{className:"bg-gray-200 text-gray-800 text-sm",onClick:()=>t(-1),children:"Back"})]})]}),c.jsxs("div",{className:"mb-6 p-4 bg-gray-700 rounded-lg",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-300",children:"Filters"}),$>0&&c.jsxs("button",{className:"text-xs text-cyan-400 hover:text-cyan-300 flex items-center gap-1",onClick:ee,children:["Clear ",$," filter",$>1?"s":"",c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-7 gap-4",children:[c.jsxs("div",{className:"sm:col-span-2 md:col-span-1",children:[c.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Date Range"}),c.jsx(K6,{startDate:k.startDate,endDate:k.endDate,onChange:({startDate:j,endDate:B})=>{U({startDate:j,endDate:B}),u(0)}})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Action"}),c.jsxs("select",{className:"w-full border rounded p-2 bg-gray-600 text-white text-sm",value:w,onChange:j=>{M(j.target.value),u(0)},children:[c.jsx("option",{value:"",children:"All"}),c.jsx("option",{value:"approved",children:"Approved"}),c.jsx("option",{value:"rejected",children:"Rejected"}),c.jsx("option",{value:"direct_edit",children:"Direct Edit"}),c.jsx("option",{value:"direct_add",children:"Direct Add"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Type"}),c.jsxs("select",{className:"w-full border rounded p-2 bg-gray-600 text-white text-sm",value:C,onChange:j=>{N(j.target.value),u(0)},children:[c.jsx("option",{value:"",children:"All"}),c.jsx("option",{value:"system",children:"System"}),c.jsx("option",{value:"region",children:"Region"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Community"}),c.jsxs("select",{className:"w-full border rounded p-2 bg-gray-600 text-white text-sm",value:_,onChange:j=>{v(j.target.value),u(0)},children:[c.jsx("option",{value:"",children:"All"}),I.map(j=>c.jsx("option",{value:j.tag,children:j.name},j.tag))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Approver"}),c.jsx("input",{type:"text",className:"w-full border rounded p-2 bg-gray-600 text-white text-sm",placeholder:"Username...",value:f,onChange:j=>{p(j.target.value),u(0)}})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Submitter"}),c.jsx("input",{type:"text",className:"w-full border rounded p-2 bg-gray-600 text-white text-sm",placeholder:"Username...",value:m,onChange:j=>{y(j.target.value),u(0)}})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Search"}),c.jsx("input",{type:"text",className:"w-full border rounded p-2 bg-gray-600 text-white text-sm",placeholder:"Notes...",value:P,onChange:j=>{R(j.target.value),u(0)}})]})]})]}),i?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-500"})}):n.length===0?c.jsx("div",{className:"text-gray-400 italic p-4 bg-gray-700 rounded text-center",children:"No audit entries found matching your filters."}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"md:hidden space-y-3",children:n.map(j=>c.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[c.jsx("div",{className:"font-semibold",children:j.submission_name||"Unknown"}),se(j.action)]}),c.jsxs("div",{className:"text-xs text-gray-400 mb-2",children:[j.submission_type," ",j.submission_id===0?"(Direct)":`#${j.submission_id}`]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Approver"}),c.jsx("div",{className:"text-gray-200",children:j.approver_username}),c.jsx("div",{className:"mt-1",children:W(j.approver_type)})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Submitter"}),c.jsx("div",{className:"text-gray-200",children:j.submitter_username||"Unknown"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Community"}),j.submission_discord_tag?c.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-cyan-600 text-white",children:j.submission_discord_tag}):c.jsx("span",{className:"text-gray-500 text-xs",children:"Untagged"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Date"}),c.jsx("div",{className:"text-gray-300 text-xs",children:new Date(j.timestamp).toLocaleDateString()})]})]}),j.notes&&c.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-600",children:[c.jsx("div",{className:"text-xs text-gray-400",children:"Notes"}),c.jsx("div",{className:"text-xs text-gray-300 line-clamp-2",children:j.notes})]})]},j.id))}),c.jsx("div",{className:"hidden md:block overflow-x-auto",children:c.jsxs("table",{className:"w-full text-sm table-fixed",children:[c.jsx("thead",{className:"bg-gray-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left w-[160px]",children:"Timestamp"}),c.jsx("th",{className:"px-4 py-3 text-left w-[100px]",children:"Action"}),c.jsx("th",{className:"px-4 py-3 text-left w-[200px]",children:"Submission"}),c.jsx("th",{className:"px-4 py-3 text-left w-[160px]",children:"Approver"}),c.jsx("th",{className:"px-4 py-3 text-left w-[140px]",children:"Submitter"}),c.jsx("th",{className:"px-4 py-3 text-left w-[120px]",children:"Community"}),c.jsx("th",{className:"px-4 py-3 text-left",children:"Notes"})]})}),c.jsx("tbody",{children:n.map(j=>c.jsxs("tr",{className:"border-b border-gray-600 hover:bg-gray-700/50",children:[c.jsx("td",{className:"px-4 py-3 text-gray-300 whitespace-nowrap",children:new Date(j.timestamp).toLocaleString()}),c.jsx("td",{className:"px-4 py-3",children:se(j.action)}),c.jsxs("td",{className:"px-4 py-3",children:[c.jsx("div",{className:"font-semibold truncate",title:j.submission_name||"Unknown",children:j.submission_name||"Unknown"}),c.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[j.submission_type," ",j.submission_id===0?"(Direct)":`#${j.submission_id}`]})]}),c.jsxs("td",{className:"px-4 py-3",children:[c.jsx("div",{className:"font-semibold truncate",title:j.approver_username,children:j.approver_username}),c.jsx("div",{className:"mt-1",children:W(j.approver_type)})]}),c.jsxs("td",{className:"px-4 py-3 text-gray-300",children:[c.jsx("div",{className:"truncate",title:j.submitter_username||"Unknown",children:j.submitter_username||"Unknown"}),j.submitter_type&&c.jsx("div",{className:"text-xs text-gray-400 mt-1",children:j.submitter_type})]}),c.jsx("td",{className:"px-4 py-3",children:j.submission_discord_tag?c.jsx("span",{className:"px-2 py-1 rounded text-xs bg-cyan-600 text-white",children:j.submission_discord_tag}):c.jsx("span",{className:"text-gray-500 text-xs",children:"Untagged"})}),c.jsx("td",{className:"px-4 py-3 text-gray-300 text-sm",children:j.notes?c.jsx("span",{className:"block truncate",title:j.notes,children:j.notes}):c.jsx("span",{className:"text-gray-500",children:"-"})})]},j.id))})]})}),c.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mt-6 pt-4 border-t border-gray-600",children:[c.jsxs("p",{className:"text-xs sm:text-sm text-gray-400 text-center sm:text-left",children:[l*d+1,"-",Math.min((l+1)*d,s)," of ",s]}),c.jsxs("div",{className:"flex justify-center gap-2",children:[c.jsx(ft,{className:"bg-gray-600 text-white text-sm px-3 py-1",onClick:()=>u(j=>Math.max(0,j-1)),disabled:l===0,children:"Prev"}),c.jsxs("span",{className:"text-sm text-gray-400 flex items-center px-2",children:[l+1,"/",G||1]}),c.jsx(ft,{className:"bg-gray-600 text-white text-sm px-3 py-1",onClick:()=>u(j=>j+1),disabled:l>=G-1,children:"Next"})]})]})]})]})}):null}const Gae={1:{bg:"rgba(255, 215, 0, 0.15)",border:"rgba(255, 215, 0, 0.3)",text:"#FFD700"},2:{bg:"rgba(192, 192, 192, 0.15)",border:"rgba(192, 192, 192, 0.3)",text:"#C0C0C0"},3:{bg:"rgba(205, 127, 50, 0.15)",border:"rgba(205, 127, 50, 0.3)",text:"#CD7F32"}},h3={Haven:"bg-cyan-500",IEA:"bg-green-500","B.E.S":"bg-orange-500",ARCH:"bg-purple-500",TBH:"bg-yellow-500",EVRN:"bg-pink-500",Personal:"bg-gray-500"};function p3(t){if(h3[t])return h3[t];const e=["bg-indigo-500","bg-violet-500","bg-rose-500","bg-emerald-500","bg-amber-500","bg-sky-500"];let n=0;for(let r=0;r<(t||"").length;r++)n=t.charCodeAt(r)+((n<<5)-n);return e[Math.abs(n)%e.length]}function Z6({data:t,showCommunity:e=!0,showRank:n=!0,loading:r=!1}){const[i,a]=E.useState({}),s=l=>{a(u=>({...u,[l]:!u[l]}))};if(r)return c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"var(--app-primary)"}})});if(!t||t.length===0)return c.jsx("div",{className:"text-center py-12",style:{color:"var(--app-text)",opacity:.5},children:"No submission data found"});const o=(n?1:0)+1+(e?1:0)+4;return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[n&&c.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium uppercase tracking-wider",style:{color:"var(--app-accent-3)"},children:"Rank"}),c.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium uppercase tracking-wider",style:{color:"var(--app-accent-3)"},children:"Submitter"}),e&&c.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium uppercase tracking-wider",style:{color:"var(--app-accent-3)"},children:"Source"}),c.jsx("th",{className:"text-right py-3 px-4 text-xs font-medium uppercase tracking-wider",style:{color:"var(--app-accent-3)"},children:"Total"}),c.jsx("th",{className:"text-right py-3 px-4 text-xs font-medium uppercase tracking-wider",style:{color:"var(--app-accent-3)"},children:"Approved"}),c.jsx("th",{className:"text-right py-3 px-4 text-xs font-medium uppercase tracking-wider",style:{color:"var(--app-accent-3)"},children:"Rejected"}),c.jsx("th",{className:"text-right py-3 px-4 text-xs font-medium uppercase tracking-wider",style:{color:"var(--app-accent-3)"},children:"Rate"})]})}),c.jsx("tbody",{children:t.map((l,u)=>{const d=l.rank||u+1,f=Gae[d]||null,p=l.tag_breakdown&&l.tag_breakdown.length>1,m=i[u];return c.jsxs(Ze.Fragment,{children:[c.jsxs("tr",{className:`transition-colors hover:bg-white/5 ${p?"cursor-pointer":""}`,style:{borderBottom:m?"none":"1px solid rgba(255,255,255,0.05)",...f&&{background:f.bg}},onClick:p?()=>s(u):void 0,children:[n&&c.jsx("td",{className:"py-3 px-4",children:c.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm",style:{background:f?f.bg:"rgba(255,255,255,0.05)",border:f?`2px solid ${f.border}`:"1px solid rgba(255,255,255,0.1)",color:f?f.text:"var(--app-text)"},children:d})}),c.jsxs("td",{className:"py-3 px-4",children:[c.jsx("div",{className:"font-medium",style:{color:"var(--app-text)"},children:l.username||"Unknown"}),l.last_submission&&c.jsxs("div",{className:"text-xs mt-0.5",style:{color:"var(--app-text)",opacity:.5},children:["Last: ",new Date(l.last_submission).toLocaleDateString()]})]}),e&&c.jsx("td",{className:"py-3 px-4",children:l.discord_tags||l.discord_tag?c.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[(l.discord_tags||l.discord_tag||"").split(",").filter(Boolean).map((y,_)=>c.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium text-white ${p3(y.trim())}`,children:y.trim()},_)),p&&c.jsx("span",{className:"ml-1 text-xs",style:{color:"var(--app-primary)"},children:m?"":""})]}):c.jsx("span",{className:"text-xs",style:{color:"var(--app-text)",opacity:.5},children:"-"})}),c.jsx("td",{className:"py-3 px-4 text-right font-semibold",style:{color:"var(--app-text)"},children:l.total_submissions}),c.jsx("td",{className:"py-3 px-4 text-right font-medium",style:{color:"#22c55e"},children:l.approved||0}),c.jsx("td",{className:"py-3 px-4 text-right font-medium",style:{color:"#ef4444"},children:l.rejected||0}),c.jsx("td",{className:"py-3 px-4 text-right",children:c.jsxs("div",{className:"flex items-center justify-end gap-2",children:[c.jsx("div",{className:"h-2 rounded-full overflow-hidden",style:{width:"60px",background:"rgba(255,255,255,0.1)"},children:c.jsx("div",{className:"h-full rounded-full",style:{width:`${l.approval_rate}%`,background:l.approval_rate>=80?"#22c55e":l.approval_rate>=50?"#f59e0b":"#ef4444"}})}),c.jsxs("span",{className:"text-sm font-medium",style:{color:l.approval_rate>=80?"#22c55e":l.approval_rate>=50?"#f59e0b":"#ef4444"},children:[l.approval_rate,"%"]})]})})]}),p&&m&&c.jsx("tr",{children:c.jsx("td",{colSpan:o,style:{padding:0},children:c.jsx("div",{className:"mx-4 mb-3 rounded-lg overflow-hidden",style:{background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255,255,255,0.1)"},children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{style:{background:"rgba(255,255,255,0.03)"},children:[c.jsx("th",{className:"text-left py-2 px-4 text-xs font-medium",style:{color:"var(--app-accent-3)"},children:"Community"}),c.jsx("th",{className:"text-right py-2 px-4 text-xs font-medium",style:{color:"var(--app-accent-3)"},children:"Total"}),c.jsx("th",{className:"text-right py-2 px-4 text-xs font-medium",style:{color:"var(--app-accent-3)"},children:"Approved"}),c.jsx("th",{className:"text-right py-2 px-4 text-xs font-medium",style:{color:"var(--app-accent-3)"},children:"Rejected"}),c.jsx("th",{className:"text-right py-2 px-4 text-xs font-medium",style:{color:"var(--app-accent-3)"},children:"Rate"})]})}),c.jsx("tbody",{children:l.tag_breakdown.map((y,_)=>{const v=y.total>0?Math.round(y.approved/y.total*100):0;return c.jsxs("tr",{style:{borderTop:_>0?"1px solid rgba(255,255,255,0.05)":"none"},children:[c.jsx("td",{className:"py-2 px-4",children:c.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium text-white ${p3(y.discord_tag)}`,children:y.discord_tag||"-"})}),c.jsx("td",{className:"py-2 px-4 text-right text-sm",style:{color:"var(--app-text)"},children:y.total}),c.jsx("td",{className:"py-2 px-4 text-right text-sm",style:{color:"#22c55e"},children:y.approved||0}),c.jsx("td",{className:"py-2 px-4 text-right text-sm",style:{color:"#ef4444"},children:y.rejected||0}),c.jsxs("td",{className:"py-2 px-4 text-right text-sm",style:{color:v>=80?"#22c55e":v>=50?"#f59e0b":"#ef4444"},children:[v,"%"]})]},_)})})]})})})})]},`${l.username}-${u}`)})})]})})}var $ae=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function FP(t){if(typeof t!="string")return!1;var e=$ae;return e.includes(t)}var Yae=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],qae=new Set(Yae);function Q6(t){return typeof t!="string"?!1:qae.has(t)}function J6(t){return typeof t=="string"&&t.startsWith("data-")}function Po(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(Q6(n)||J6(n))&&(e[n]=t[n]);return e}function Dg(t){if(t==null)return null;if(E.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Po(e)}return typeof t=="object"&&!Array.isArray(t)?Po(t):null}function ws(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(Q6(n)||J6(n)||FP(n))&&(e[n]=t[n]);return e}function Xae(t){return t==null?null:E.isValidElement(t)?ws(t.props):typeof t=="object"&&!Array.isArray(t)?ws(t):null}var Kae=["children","width","height","viewBox","className","style","title","desc"];function IA(){return IA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IA.apply(null,arguments)}function Zae(t,e){if(t==null)return{};var n,r,i=Qae(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Qae(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var UP=E.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:a,className:s,style:o,title:l,desc:u}=t,d=Zae(t,Kae),f=a||{width:r,height:i,x:0,y:0},p=nn("recharts-surface",s);return E.createElement("svg",IA({},ws(d),{className:p,width:r,height:i,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:e}),E.createElement("title",null,l),E.createElement("desc",null,u),n)}),Jae=["children","className"];function LA(){return LA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LA.apply(null,arguments)}function ese(t,e){if(t==null)return{};var n,r,i=tse(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function tse(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Da=E.forwardRef((t,e)=>{var{children:n,className:r}=t,i=ese(t,Jae),a=nn("recharts-layer",r);return E.createElement("g",LA({className:a},ws(i),{ref:e}),n)}),e8=E.createContext(null),nse=()=>E.useContext(e8);function gr(t){return function(){return t}}const t8=Math.cos,qw=Math.sin,Jl=Math.sqrt,Xw=Math.PI,YS=2*Xw,FA=Math.PI,UA=2*FA,Ph=1e-6,rse=UA-Ph;function n8(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function ise(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return n8;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let ase=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?n8:ise(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=r-e,u=i-n,d=s-e,f=o-n,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>Ph)if(!(Math.abs(f*l-u*d)>Ph)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let m=r-s,y=i-o,_=l*l+u*u,v=m*m+y*y,w=Math.sqrt(_),M=Math.sqrt(p),C=a*Math.tan((FA-Math.acos((_+p-v)/(2*w*M)))/2),N=C/M,P=C/w;Math.abs(N-1)>Ph&&this._append`L${e+N*d},${n+N*f}`,this._append`A${a},${a},0,0,${+(f*m>d*y)},${this._x1=e+P*l},${this._y1=n+P*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),u=e+o,d=n+l,f=1^s,p=s?i-a:a-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Ph||Math.abs(this._y1-d)>Ph)&&this._append`L${u},${d}`,r&&(p<0&&(p=p%UA+UA),p>rse?this._append`A${r},${r},0,1,${f},${e-o},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=d}`:p>Ph&&this._append`A${r},${r},0,${+(p>=FA)},${f},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function BP(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new ase(e)}function zP(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function r8(t){this._context=t}r8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function qS(t){return new r8(t)}function i8(t){return t[0]}function a8(t){return t[1]}function s8(t,e){var n=gr(!0),r=null,i=qS,a=null,s=BP(o);t=typeof t=="function"?t:t===void 0?i8:gr(t),e=typeof e=="function"?e:e===void 0?a8:gr(e);function o(l){var u,d=(l=zP(l)).length,f,p=!1,m;for(r==null&&(a=i(m=s())),u=0;u<=d;++u)!(u<d&&n(f=l[u],u,l))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+t(f,u,l),+e(f,u,l));if(m)return a=null,m+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:gr(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:gr(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:gr(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),o):r},o}function zb(t,e,n){var r=null,i=gr(!0),a=null,s=qS,o=null,l=BP(u);t=typeof t=="function"?t:t===void 0?i8:gr(+t),e=typeof e=="function"?e:gr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?a8:gr(+n);function u(f){var p,m,y,_=(f=zP(f)).length,v,w=!1,M,C=new Array(_),N=new Array(_);for(a==null&&(o=s(M=l())),p=0;p<=_;++p){if(!(p<_&&i(v=f[p],p,f))===w)if(w=!w)m=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),y=p-1;y>=m;--y)o.point(C[y],N[y]);o.lineEnd(),o.areaEnd()}w&&(C[p]=+t(v,p,f),N[p]=+e(v,p,f),o.point(r?+r(v,p,f):C[p],n?+n(v,p,f):N[p]))}if(M)return o=null,M+""||null}function d(){return s8().defined(i).curve(s).context(a)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:gr(+f),r=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:gr(+f),u):t},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:gr(+f),u):r},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:gr(+f),n=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:gr(+f),u):e},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:gr(+f),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:gr(!!f),u):i},u.curve=function(f){return arguments.length?(s=f,a!=null&&(o=s(a)),u):s},u.context=function(f){return arguments.length?(f==null?a=o=null:o=s(a=f),u):a},u}class o8{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function sse(t){return new o8(t,!0)}function ose(t){return new o8(t,!1)}const HP={draw(t,e){const n=Jl(e/Xw);t.moveTo(n,0),t.arc(0,0,n,0,YS)}},lse={draw(t,e){const n=Jl(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},l8=Jl(1/3),cse=l8*2,use={draw(t,e){const n=Jl(e/cse),r=n*l8;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},dse={draw(t,e){const n=Jl(e),r=-n/2;t.rect(r,r,n,n)}},fse=.8908130915292852,c8=qw(Xw/10)/qw(7*Xw/10),hse=qw(YS/10)*c8,pse=-t8(YS/10)*c8,mse={draw(t,e){const n=Jl(e*fse),r=hse*n,i=pse*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=YS*a/5,o=t8(s),l=qw(s);t.lineTo(l*n,-o*n),t.lineTo(o*r-l*i,l*r+o*i)}t.closePath()}},EM=Jl(3),gse={draw(t,e){const n=-Jl(e/(EM*3));t.moveTo(0,n*2),t.lineTo(-EM*n,-n),t.lineTo(EM*n,-n),t.closePath()}},Go=-.5,$o=Jl(3)/2,BA=1/Jl(12),vse=(BA/2+1)*3,yse={draw(t,e){const n=Jl(e/vse),r=n/2,i=n*BA,a=r,s=n*BA+n,o=-a,l=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,l),t.lineTo(Go*r-$o*i,$o*r+Go*i),t.lineTo(Go*a-$o*s,$o*a+Go*s),t.lineTo(Go*o-$o*l,$o*o+Go*l),t.lineTo(Go*r+$o*i,Go*i-$o*r),t.lineTo(Go*a+$o*s,Go*s-$o*a),t.lineTo(Go*o+$o*l,Go*l-$o*o),t.closePath()}};function xse(t,e){let n=null,r=BP(i);t=typeof t=="function"?t:gr(t||HP),e=typeof e=="function"?e:gr(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:gr(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:gr(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Kw(){}function Zw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function u8(t){this._context=t}u8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Zw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Zw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function bse(t){return new u8(t)}function d8(t){this._context=t}d8.prototype={areaStart:Kw,areaEnd:Kw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Zw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function _se(t){return new d8(t)}function f8(t){this._context=t}f8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Zw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function wse(t){return new f8(t)}function h8(t){this._context=t}h8.prototype={areaStart:Kw,areaEnd:Kw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Sse(t){return new h8(t)}function m3(t){return t<0?-1:1}function g3(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(m3(a)+m3(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function v3(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function MM(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function Qw(t){this._context=t}Qw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:MM(this,this._t0,v3(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,MM(this,v3(this,n=g3(this,t,e)),n);break;default:MM(this,this._t0,n=g3(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function p8(t){this._context=new m8(t)}(p8.prototype=Object.create(Qw.prototype)).point=function(t,e){Qw.prototype.point.call(this,e,t)};function m8(t){this._context=t}m8.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function Ese(t){return new Qw(t)}function Mse(t){return new p8(t)}function g8(t){this._context=t}g8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=y3(t),i=y3(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function y3(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function Cse(t){return new g8(t)}function XS(t,e){this._context=t,this._t=e}XS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Nse(t){return new XS(t,.5)}function Ase(t){return new XS(t,0)}function Tse(t){return new XS(t,1)}function mp(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function zA(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Pse(t,e){return t[e]}function Rse(t){const e=[];return e.key=t,e}function Dse(){var t=gr([]),e=zA,n=mp,r=Pse;function i(a){var s=Array.from(t.apply(this,arguments),Rse),o,l=s.length,u=-1,d;for(const f of a)for(o=0,++u;o<l;++o)(s[o][u]=[0,+r(f,s[o].key,u,a)]).data=f;for(o=0,d=zP(e(s));o<l;++o)s[d[o]].index=o;return n(s,d),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:gr(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:gr(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?zA:typeof a=="function"?a:gr(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??mp,i):n},i}function kse(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}mp(t,e)}}function jse(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}mp(t,e)}}function Ose(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,l=0,u=0;o<s;++o){for(var d=t[e[o]],f=d[r][1]||0,p=d[r-1][1]||0,m=(f-p)/2,y=0;y<o;++y){var _=t[e[y]],v=_[r][1]||0,w=_[r-1][1]||0;m+=v-w}l+=f,u+=m*f}i[r-1][1]+=i[r-1][0]=n,l&&(n-=u/l)}i[r-1][1]+=i[r-1][0]=n,mp(t,e)}}var CM={},NM={},x3;function Ise(){return x3||(x3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(NM)),NM}var AM={},b3;function v8(){return b3||(b3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(AM)),AM}var TM={},_3;function VP(){return _3||(_3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(TM)),TM}var PM={},RM={},w3;function Lse(){return w3||(w3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(RM)),RM}var S3;function WP(){return S3||(S3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Lse(),n=VP();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,l="",u="",d=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const f=i[o];u?f==="\\"&&o+1<s?(o++,l+=i[o]):f===u?u="":l+=f:d?f==='"'||f==="'"?u=f:f==="]"?(d=!1,a.push(l),l=""):l+=f:f==="["?(d=!0,l&&(a.push(l),l="")):f==="."?l&&(a.push(l),l=""):l+=f,o++}return l&&a.push(l),a}t.toPath=r})(PM)),PM}var E3;function GP(){return E3||(E3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ise(),n=v8(),r=VP(),i=WP();function a(o,l,u){if(o==null)return u;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return u;const d=o[l];return d===void 0?n.isDeepKey(l)?a(o,i.toPath(l),u):u:d}case"number":case"symbol":{typeof l=="number"&&(l=r.toKey(l));const d=o[l];return d===void 0?u:d}default:{if(Array.isArray(l))return s(o,l,u);if(Object.is(l?.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return u;const d=o[l];return d===void 0?u:d}}}function s(o,l,u){if(l.length===0)return u;let d=o;for(let f=0;f<l.length;f++){if(d==null||e.isUnsafeProperty(l[f]))return u;d=d[l[f]]}return d===void 0?u:d}t.get=a})(CM)),CM}var DM,M3;function Fse(){return M3||(M3=1,DM=GP().get),DM}var Use=Fse();const gp=Zl(Use);var Bse=4;function vf(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Bse,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function Jr(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,a,s)=>{var o=n[s-1];return typeof o=="string"?i+o+a:o!==void 0?i+vf(o)+a:i+a},"")}var Qa=t=>t===0?0:t>0?1:-1,Yl=t=>typeof t=="number"&&t!=+t,td=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Ft=t=>(typeof t=="number"||t instanceof Number)&&!Yl(t),$c=t=>Ft(t)||typeof t=="string",zse=0,py=t=>{var e=++zse;return"".concat(t||"").concat(e)},No=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ft(e)&&typeof e!="string")return r;var a;if(td(e)){if(n==null)return r;var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return Yl(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},y8=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function Ta(t,e,n){return Ft(t)&&Ft(e)?vf(t+n*(e-t)):e}function x8(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):gp(r,e))===n)}var ua=t=>t===null||typeof t>"u",rx=t=>ua(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Hse(t){return t!=null}function ix(){}var Vse=["type","size","sizeType"];function HA(){return HA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HA.apply(null,arguments)}function C3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function N3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C3(Object(n),!0).forEach(function(r){Wse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wse(t,e,n){return(e=Gse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gse(t){var e=$se(t,"string");return typeof e=="symbol"?e:e+""}function $se(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yse(t,e){if(t==null)return{};var n,r,i=qse(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qse(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var b8={symbolCircle:HP,symbolCross:lse,symbolDiamond:use,symbolSquare:dse,symbolStar:mse,symbolTriangle:gse,symbolWye:yse},Xse=Math.PI/180,Kse=t=>{var e="symbol".concat(rx(t));return b8[e]||HP},Zse=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*Xse;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Qse=(t,e)=>{b8["symbol".concat(rx(t))]=e},$P=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=Yse(t,Vse),a=N3(N3({},i),{},{type:e,size:n,sizeType:r}),s="circle";typeof e=="string"&&(s=e);var o=()=>{var p=Kse(s),m=xse().type(p).size(Zse(n,r,s)),y=m();if(y!==null)return y},{className:l,cx:u,cy:d}=a,f=ws(a);return Ft(u)&&Ft(d)&&Ft(n)?E.createElement("path",HA({},f,{className:nn("recharts-symbols",l),transform:"translate(".concat(u,", ").concat(d,")"),d:o()})):null};$P.registerSymbol=Qse;var _8=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,YP=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(E.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{FP(i)&&(r[i]=(a=>n[i](n,a)))}),r},Jse=(t,e,n)=>r=>(t(e,n,r),null),qP=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var a=t[i];FP(i)&&typeof a=="function"&&(r||(r={}),r[i]=Jse(a,e,n))}),r};function A3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eoe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A3(Object(n),!0).forEach(function(r){toe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function toe(t,e,n){return(e=noe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function noe(t){var e=roe(t,"string");return typeof e=="symbol"?e:e+""}function roe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qi(t,e){var n=eoe({},t),r=e,i=Object.keys(e),a=i.reduce((s,o)=>(s[o]===void 0&&r[o]!==void 0&&(s[o]=r[o]),s),n);return a}function Jw(){return Jw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jw.apply(null,arguments)}function T3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ioe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T3(Object(n),!0).forEach(function(r){aoe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aoe(t,e,n){return(e=soe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function soe(t){var e=ooe(t,"string");return typeof e=="symbol"?e:e+""}function ooe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xo=32,loe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function coe(t){var{data:e,iconType:n,inactiveColor:r}=t,i=Xo/2,a=Xo/6,s=Xo/3,o=e.inactive?r:e.color,l=n??e.type;if(l==="none")return null;if(l==="plainline"){var u;return E.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:(u=e.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:i,x2:Xo,y2:i,className:"recharts-legend-icon"})}if(l==="line")return E.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(Xo,"M").concat(2*s,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(l==="rect")return E.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(Xo/8,"h").concat(Xo,"v").concat(Xo*3/4,"h").concat(-Xo,"z"),className:"recharts-legend-icon"});if(E.isValidElement(e.legendIcon)){var d=ioe({},e);return delete d.legendIcon,E.cloneElement(e.legendIcon,d)}return E.createElement($P,{fill:o,cx:i,cy:i,size:Xo,sizeType:"diameter",type:l})}function uoe(t){var{payload:e,iconSize:n,layout:r,formatter:i,inactiveColor:a,iconType:s}=t,o={x:0,y:0,width:Xo,height:Xo},l={display:r==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((d,f)=>{var p=d.formatter||i,m=nn({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var y=d.inactive?a:d.color,_=p?p(d.value,d,f):d.value;return E.createElement("li",Jw({className:m,style:l,key:"legend-item-".concat(f)},qP(t,d,f)),E.createElement(UP,{width:n,height:n,viewBox:o,style:u,"aria-label":"".concat(_," legend icon")},E.createElement(coe,{data:d,iconType:s,inactiveColor:a})),E.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},_))})}var doe=t=>{var e=qi(t,loe),{payload:n,layout:r,align:i}=e;if(!n||!n.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?i:"left"};return E.createElement("ul",{className:"recharts-default-legend",style:a},E.createElement(uoe,Jw({},e,{payload:n})))},kM={},jM={},P3;function foe(){return P3||(P3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let a=0;a<n.length;a++){const s=n[a],o=r(s);i.has(o)||i.set(o,s)}return Array.from(i.values())}t.uniqBy=e})(jM)),jM}var OM={},R3;function w8(){return R3||(R3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(OM)),OM}var IM={},LM={},FM={},D3;function hoe(){return D3||(D3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(FM)),FM}var k3;function XP(){return k3||(k3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hoe();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(LM)),LM}var UM={},j3;function poe(){return j3||(j3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(UM)),UM}var O3;function moe(){return O3||(O3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XP(),n=poe();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(IM)),IM}var BM={},zM={},I3;function goe(){return I3||(I3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GP();function n(r){return function(i){return e.get(i,r)}}t.property=n})(zM)),zM}var HM={},VM={},WM={},GM={},L3;function S8(){return L3||(L3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(GM)),GM}var $M={},F3;function E8(){return F3||(F3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})($M)),$M}var YM={},U3;function M8(){return U3||(U3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(YM)),YM}var B3;function voe(){return B3||(B3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=S8(),n=E8(),r=M8();function i(d,f,p){return typeof p!="function"?i(d,f,()=>{}):a(d,f,function m(y,_,v,w,M,C){const N=p(y,_,v,w,M,C);return N!==void 0?!!N:a(y,_,m,C)},new Map)}function a(d,f,p,m){if(f===d)return!0;switch(typeof f){case"object":return s(d,f,p,m);case"function":return Object.keys(f).length>0?a(d,{...f},p,m):r.eq(d,f);default:return e.isObject(d)?typeof f=="string"?f==="":!0:r.eq(d,f)}}function s(d,f,p,m){if(f==null)return!0;if(Array.isArray(f))return l(d,f,p,m);if(f instanceof Map)return o(d,f,p,m);if(f instanceof Set)return u(d,f,p,m);const y=Object.keys(f);if(d==null||n.isPrimitive(d))return y.length===0;if(y.length===0)return!0;if(m?.has(f))return m.get(f)===d;m?.set(f,d);try{for(let _=0;_<y.length;_++){const v=y[_];if(!n.isPrimitive(d)&&!(v in d)||f[v]===void 0&&d[v]!==void 0||f[v]===null&&d[v]!==null||!p(d[v],f[v],v,d,f,m))return!1}return!0}finally{m?.delete(f)}}function o(d,f,p,m){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[y,_]of f.entries()){const v=d.get(y);if(p(v,_,y,d,f,m)===!1)return!1}return!0}function l(d,f,p,m){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const y=new Set;for(let _=0;_<f.length;_++){const v=f[_];let w=!1;for(let M=0;M<d.length;M++){if(y.has(M))continue;const C=d[M];let N=!1;if(p(C,v,_,d,f,m)&&(N=!0),N){y.add(M),w=!0;break}}if(!w)return!1}return!0}function u(d,f,p,m){return f.size===0?!0:d instanceof Set?l([...d],[...f],p,m):!1}t.isMatchWith=i,t.isSetMatch=u})(WM)),WM}var z3;function C8(){return z3||(z3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=voe();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(VM)),VM}var qM={},XM={},KM={},H3;function yoe(){return H3||(H3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(KM)),KM}var ZM={},V3;function N8(){return V3||(V3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(ZM)),ZM}var QM={},W3;function A8(){return W3||(W3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",l="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",p="[object ArrayBuffer]",m="[object Object]",y="[object Error]",_="[object DataView]",v="[object Uint8Array]",w="[object Uint8ClampedArray]",M="[object Uint16Array]",C="[object Uint32Array]",N="[object BigUint64Array]",P="[object Int8Array]",R="[object Int16Array]",k="[object Int32Array]",U="[object BigInt64Array]",I="[object Float32Array]",L="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=p,t.arrayTag=d,t.bigInt64ArrayTag=U,t.bigUint64ArrayTag=N,t.booleanTag=i,t.dataViewTag=_,t.dateTag=o,t.errorTag=y,t.float32ArrayTag=I,t.float64ArrayTag=L,t.functionTag=f,t.int16ArrayTag=R,t.int32ArrayTag=k,t.int8ArrayTag=P,t.mapTag=l,t.numberTag=r,t.objectTag=m,t.regexpTag=e,t.setTag=u,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=M,t.uint32ArrayTag=C,t.uint8ArrayTag=v,t.uint8ClampedArrayTag=w})(QM)),QM}var JM={},G3;function xoe(){return G3||(G3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(JM)),JM}var $3;function T8(){return $3||($3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yoe(),n=N8(),r=A8(),i=E8(),a=xoe();function s(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,p,m=new Map,y=void 0){const _=y?.(d,f,p,m);if(_!==void 0)return _;if(i.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const v=new Array(d.length);m.set(d,v);for(let w=0;w<d.length;w++)v[w]=o(d[w],w,p,m,y);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;m.set(d,v);for(const[w,M]of d)v.set(w,o(M,w,p,m,y));return v}if(d instanceof Set){const v=new Set;m.set(d,v);for(const w of d)v.add(o(w,void 0,p,m,y));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(a.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,v);for(let w=0;w<d.length;w++)v[w]=o(d[w],w,p,m,y);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,v),l(v,d,p,m,y),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return m.set(d,v),l(v,d,p,m,y),v}if(typeof Blob<"u"&&d instanceof Blob){const v=new Blob([d],{type:d.type});return m.set(d,v),l(v,d,p,m,y),v}if(d instanceof Error){const v=new d.constructor;return m.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,l(v,d,p,m,y),v}if(d instanceof Boolean){const v=new Boolean(d.valueOf());return m.set(d,v),l(v,d,p,m,y),v}if(d instanceof Number){const v=new Number(d.valueOf());return m.set(d,v),l(v,d,p,m,y),v}if(d instanceof String){const v=new String(d.valueOf());return m.set(d,v),l(v,d,p,m,y),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return m.set(d,v),l(v,d,p,m,y),v}return d}function l(d,f,p=d,m,y){const _=[...Object.keys(f),...e.getSymbols(f)];for(let v=0;v<_.length;v++){const w=_[v],M=Object.getOwnPropertyDescriptor(d,w);(M==null||M.writable)&&(d[w]=o(f[w],w,p,m,y))}}function u(d){switch(n.getTag(d)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=o,t.copyProperties=l})(XM)),XM}var Y3;function boe(){return Y3||(Y3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=T8();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(qM)),qM}var q3;function _oe(){return q3||(q3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=C8(),n=boe();function r(i){return i=n.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=r})(HM)),HM}var eC={},tC={},nC={},X3;function woe(){return X3||(X3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=T8(),n=A8();function r(i,a){return e.cloneDeepWith(i,(s,o,l,u)=>{const d=a?.(s,o,l,u);if(d!==void 0)return d;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const f=new i.constructor(i?.valueOf());return e.copyProperties(f,i),f}case n.argumentsTag:{const f={};return e.copyProperties(f,i),f.length=i.length,f[Symbol.iterator]=i[Symbol.iterator],f}default:return}})}t.cloneDeepWith=r})(nC)),nC}var K3;function Soe(){return K3||(K3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=woe();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(tC)),tC}var rC={},iC={},Z3;function P8(){return Z3||(Z3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(iC)),iC}var aC={},Q3;function Eoe(){return Q3||(Q3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=N8();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(aC)),aC}var J3;function Moe(){return J3||(J3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=v8(),n=P8(),r=Eoe(),i=WP();function a(s,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&e.isDeepKey(o)&&s?.[o]==null?l=i.toPath(o):l=[o],l.length===0)return!1;let u=s;for(let d=0;d<l.length;d++){const f=l[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||r.isArguments(u))&&n.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}t.has=a})(rC)),rC}var eI;function Coe(){return eI||(eI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=C8(),n=VP(),r=Soe(),i=GP(),a=Moe();function s(o,l){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return l=r.cloneDeep(l),function(u){const d=i.get(u,o);return d===void 0?a.has(u,o):l===void 0?d===void 0:e.isMatch(d,l)}}t.matchesProperty=s})(eC)),eC}var tI;function Noe(){return tI||(tI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=w8(),n=goe(),r=_oe(),i=Coe();function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=a})(BM)),BM}var nI;function Aoe(){return nI||(nI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=foe(),n=w8(),r=moe(),i=Noe();function a(s,o=n.identity){return r.isArrayLikeObject(s)?e.uniqBy(Array.from(s),i.iteratee(o)):[]}t.uniqBy=a})(kM)),kM}var sC,rI;function Toe(){return rI||(rI=1,sC=Aoe().uniqBy),sC}var Poe=Toe();const iI=Zl(Poe);function R8(t,e,n){return e===!0?iI(t,n):typeof e=="function"?iI(t,e):t}var oC={exports:{}},lC={},cC={exports:{}},uC={};var aI;function Roe(){if(aI)return uC;aI=1;var t=Ap();function e(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function o(f,p){var m=p(),y=r({inst:{value:m,getSnapshot:p}}),_=y[0].inst,v=y[1];return a(function(){_.value=m,_.getSnapshot=p,l(_)&&v({inst:_})},[f,m,p]),i(function(){return l(_)&&v({inst:_}),f(function(){l(_)&&v({inst:_})})},[f]),s(m),m}function l(f){var p=f.getSnapshot;f=f.value;try{var m=p();return!n(f,m)}catch{return!0}}function u(f,p){return p()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return uC.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,uC}var sI;function Doe(){return sI||(sI=1,cC.exports=Roe()),cC.exports}var oI;function koe(){if(oI)return lC;oI=1;var t=Ap(),e=Doe();function n(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,o=t.useMemo,l=t.useDebugValue;return lC.useSyncExternalStoreWithSelector=function(u,d,f,p,m){var y=a(null);if(y.current===null){var _={hasValue:!1,value:null};y.current=_}else _=y.current;y=o(function(){function w(R){if(!M){if(M=!0,C=R,R=p(R),m!==void 0&&_.hasValue){var k=_.value;if(m(k,R))return N=k}return N=R}if(k=N,r(C,R))return k;var U=p(R);return m!==void 0&&m(k,U)?(C=R,k):(C=R,N=U)}var M=!1,C,N,P=f===void 0?null:f;return[function(){return w(d())},P===null?void 0:function(){return w(P())}]},[d,f,p,m]);var v=i(u,y[0],y[1]);return s(function(){_.hasValue=!0,_.value=v},[v]),l(v),v},lC}var lI;function joe(){return lI||(lI=1,oC.exports=koe()),oC.exports}var Ooe=joe(),KP=E.createContext(null),Ioe=t=>t,vr=()=>{var t=E.useContext(KP);return t?t.store.dispatch:Ioe},vw=()=>{},Loe=()=>vw,Foe=(t,e)=>t===e;function Wt(t){var e=E.useContext(KP);return Ooe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:Loe,e?e.store.getState:vw,e?e.store.getState:vw,e?t:vw,Foe)}function Uoe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function Boe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function zoe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var cI=t=>Array.isArray(t)?t:[t];function Hoe(t){const e=Array.isArray(t[0])?t[0]:t;return zoe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function Voe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var Woe=class{constructor(t){this.value=t}deref(){return this.value}},Goe=typeof WeakRef<"u"?WeakRef:Woe,$oe=0,uI=1;function Hb(){return{s:$oe,v:void 0,o:null,p:null}}function D8(t,e={}){let n=Hb();const{resultEqualityCheck:r}=e;let i,a=0;function s(){let o=n;const{length:l}=arguments;for(let f=0,p=l;f<p;f++){const m=arguments[f];if(typeof m=="function"||typeof m=="object"&&m!==null){let y=o.o;y===null&&(o.o=y=new WeakMap);const _=y.get(m);_===void 0?(o=Hb(),y.set(m,o)):o=_}else{let y=o.p;y===null&&(o.p=y=new Map);const _=y.get(m);_===void 0?(o=Hb(),y.set(m,o)):o=_}}const u=o;let d;if(o.s===uI)d=o.v;else if(d=t.apply(null,arguments),a++,r){const f=i?.deref?.()??i;f!=null&&r(f,d)&&(d=f,a!==0&&a--),i=typeof d=="object"&&d!==null||typeof d=="function"?new Goe(d):d}return u.s=uI,u.v=d,d}return s.clearCache=()=>{n=Hb(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function Yoe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,s=0,o,l={},u=i.pop();typeof u=="object"&&(l=u,u=i.pop()),Uoe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...n,...l},{memoize:f,memoizeOptions:p=[],argsMemoize:m=D8,argsMemoizeOptions:y=[]}=d,_=cI(p),v=cI(y),w=Hoe(i),M=f(function(){return a++,u.apply(null,arguments)},..._),C=m(function(){s++;const P=Voe(w,arguments);return o=M.apply(null,P),o},...v);return Object.assign(C,{resultFunc:u,memoizedResultFunc:M,dependencies:w,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:m})};return Object.assign(r,{withTypes:()=>r}),r}var Ge=Yoe(D8),qoe=Object.assign((t,e=Ge)=>{Boe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((s,o,l)=>(s[n[l]]=o,s),{}))},{withTypes:()=>qoe}),dC={},fC={},hC={},dI;function Xoe(){return dI||(dI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const s=e(r),o=e(i);if(s===o&&s===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};t.compareValues=n})(hC)),hC}var pC={},mC={},fI;function k8(){return fI||(fI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(mC)),mC}var hI;function Koe(){return hI||(hI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=k8(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||s!=null&&Object.hasOwn(s,a)}t.isKey=i})(pC)),pC}var pI;function Zoe(){return pI||(pI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Xoe(),n=Koe(),r=WP();function i(a,s,o,l){if(a==null)return[];o=l?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(m=>String(m));const u=(m,y)=>{let _=m;for(let v=0;v<y.length&&_!=null;++v)_=_[y[v]];return _},d=(m,y)=>y==null||m==null?y:typeof m=="object"&&"key"in m?Object.hasOwn(y,m.key)?y[m.key]:u(y,m.path):typeof m=="function"?m(y):Array.isArray(m)?u(y,m):typeof y=="object"?y[m]:y,f=s.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||n.isKey(m)?m:{key:m,path:r.toPath(m)}));return a.map(m=>({original:m,criteria:f.map(y=>d(y,m))})).slice().sort((m,y)=>{for(let _=0;_<f.length;_++){const v=e.compareValues(m.criteria[_],y.criteria[_],o[_]);if(v!==0)return v}return 0}).map(m=>m.original)}t.orderBy=i})(fC)),fC}var gC={},mI;function Qoe(){return mI||(mI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],a=Math.floor(r),s=(o,l)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&l<a?s(d,l+1):i.push(d)}};return s(n,0),i}t.flatten=e})(gC)),gC}var vC={},gI;function j8(){return gI||(gI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=P8(),n=XP(),r=S8(),i=M8();function a(s,o,l){return r.isObject(l)&&(typeof o=="number"&&n.isArrayLike(l)&&e.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?i.eq(l[o],s):!1}t.isIterateeCall=a})(vC)),vC}var vI;function Joe(){return vI||(vI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Zoe(),n=Qoe(),r=j8();function i(a,...s){const o=s.length;return o>1&&r.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,n.flatten(s),["asc"])}t.sortBy=i})(dC)),dC}var yC,yI;function ele(){return yI||(yI=1,yC=Joe().sortBy),yC}var tle=ele();const KS=Zl(tle);var O8=t=>t.legend.settings,nle=t=>t.legend.size,rle=t=>t.legend.payload,ile=Ge([rle,O8],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?KS(r,n):r});function ale(){return Wt(ile)}var Vb=1;function I8(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=E.useState({height:0,left:0,top:0,width:0}),r=E.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>Vb||Math.abs(s.left-e.left)>Vb||Math.abs(s.top-e.top)>Vb||Math.abs(s.width-e.width)>Vb)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Ma(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var sle=typeof Symbol=="function"&&Symbol.observable||"@@observable",xI=sle,xC=()=>Math.random().toString(36).substring(7).split("").join("."),ole={INIT:`@@redux/INIT${xC()}`,REPLACE:`@@redux/REPLACE${xC()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${xC()}`},e1=ole;function ZP(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function L8(t,e,n){if(typeof t!="function")throw new Error(Ma(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ma(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ma(1));return n(L8)(t,e)}let r=t,i=e,a=new Map,s=a,o=0,l=!1;function u(){s===a&&(s=new Map,a.forEach((v,w)=>{s.set(w,v)}))}function d(){if(l)throw new Error(Ma(3));return i}function f(v){if(typeof v!="function")throw new Error(Ma(4));if(l)throw new Error(Ma(5));let w=!0;u();const M=o++;return s.set(M,v),function(){if(w){if(l)throw new Error(Ma(6));w=!1,u(),s.delete(M),a=null}}}function p(v){if(!ZP(v))throw new Error(Ma(7));if(typeof v.type>"u")throw new Error(Ma(8));if(typeof v.type!="string")throw new Error(Ma(17));if(l)throw new Error(Ma(9));try{l=!0,i=r(i,v)}finally{l=!1}return(a=s).forEach(M=>{M()}),v}function m(v){if(typeof v!="function")throw new Error(Ma(10));r=v,p({type:e1.REPLACE})}function y(){const v=f;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(Ma(11));function M(){const N=w;N.next&&N.next(d())}return M(),{unsubscribe:v(M)}},[xI](){return this}}}return p({type:e1.INIT}),{dispatch:p,subscribe:f,getState:d,replaceReducer:m,[xI]:y}}function lle(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:e1.INIT})>"u")throw new Error(Ma(12));if(typeof n(void 0,{type:e1.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ma(13))})}function F8(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const s=e[a];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{lle(n)}catch(a){i=a}return function(s={},o){if(i)throw i;let l=!1;const u={};for(let d=0;d<r.length;d++){const f=r[d],p=n[f],m=s[f],y=p(m,o);if(typeof y>"u")throw o&&o.type,new Error(Ma(14));u[f]=y,l=l||y!==m}return l=l||r.length!==Object.keys(s).length,l?u:s}}function t1(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function cle(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(Ma(15))};const s={getState:i.getState,dispatch:(l,...u)=>a(l,...u)},o=t.map(l=>l(s));return a=t1(...o)(i.dispatch),{...i,dispatch:a}}}function U8(t){return ZP(t)&&"type"in t&&typeof t.type=="string"}var B8=Symbol.for("immer-nothing"),bI=Symbol.for("immer-draftable"),Ss=Symbol.for("immer-state");function Bl(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var So=Object,kg=So.getPrototypeOf,n1="constructor",ZS="prototype",VA="configurable",r1="enumerable",yw="writable",my="value",nd=t=>!!t&&!!t[Ss];function ql(t){return t?z8(t)||JS(t)||!!t[bI]||!!t[n1]?.[bI]||e2(t)||t2(t):!1}var ule=So[ZS][n1].toString(),_I=new WeakMap;function z8(t){if(!t||!QP(t))return!1;const e=kg(t);if(e===null||e===So[ZS])return!0;const n=So.hasOwnProperty.call(e,n1)&&e[n1];if(n===Object)return!0;if(!rg(n))return!1;let r=_I.get(n);return r===void 0&&(r=Function.toString.call(n),_I.set(n,r)),r===ule}function QS(t,e,n=!0){ax(t)===0?(n?Reflect.ownKeys(t):So.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function ax(t){const e=t[Ss];return e?e.type_:JS(t)?1:e2(t)?2:t2(t)?3:0}var wI=(t,e,n=ax(t))=>n===2?t.has(e):So[ZS].hasOwnProperty.call(t,e),WA=(t,e,n=ax(t))=>n===2?t.get(e):t[e],i1=(t,e,n,r=ax(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function dle(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var JS=Array.isArray,e2=t=>t instanceof Map,t2=t=>t instanceof Set,QP=t=>typeof t=="object",rg=t=>typeof t=="function",bC=t=>typeof t=="boolean";function fle(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Lu=t=>t.copy_||t.base_,JP=t=>t.modified_?t.copy_:t.base_;function GA(t,e){if(e2(t))return new Map(t);if(t2(t))return new Set(t);if(JS(t))return Array[ZS].slice.call(t);const n=z8(t);if(e===!0||e==="class_only"&&!n){const r=So.getOwnPropertyDescriptors(t);delete r[Ss];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o[yw]===!1&&(o[yw]=!0,o[VA]=!0),(o.get||o.set)&&(r[s]={[VA]:!0,[yw]:!0,[r1]:o[r1],[my]:t[s]})}return So.create(kg(t),r)}else{const r=kg(t);if(r!==null&&n)return{...t};const i=So.create(r);return So.assign(i,t)}}function eR(t,e=!1){return n2(t)||nd(t)||!ql(t)||(ax(t)>1&&So.defineProperties(t,{set:Wb,add:Wb,clear:Wb,delete:Wb}),So.freeze(t),e&&QS(t,(n,r)=>{eR(r,!0)},!1)),t}function hle(){Bl(2)}var Wb={[my]:hle};function n2(t){return t===null||!QP(t)?!0:So.isFrozen(t)}var a1="MapSet",$A="Patches",SI="ArrayMethods",H8={};function vp(t){const e=H8[t];return e||Bl(0,t),e}var EI=t=>!!H8[t],gy,V8=()=>gy,ple=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:EI(a1)?vp(a1):void 0,arrayMethodsPlugin_:EI(SI)?vp(SI):void 0});function MI(t,e){e&&(t.patchPlugin_=vp($A),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function YA(t){qA(t),t.drafts_.forEach(mle),t.drafts_=null}function qA(t){t===gy&&(gy=t.parent_)}var CI=t=>gy=ple(gy,t);function mle(t){const e=t[Ss];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function NI(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Ss].modified_&&(YA(e),Bl(4)),ql(t)&&(t=AI(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[Ss].base_,t,e)}else t=AI(e,n);return gle(e,t,!0),YA(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==B8?t:void 0}function AI(t,e){if(n2(e))return e;const n=e[Ss];if(!n)return s1(e,t.handledSet_,t);if(!r2(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);$8(n,t)}return n.copy_}function gle(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&eR(e,n)}function W8(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var r2=(t,e)=>t.scope_===e,vle=[];function G8(t,e,n,r){const i=Lu(t),a=t.type_;if(r!==void 0&&WA(i,r,a)===e){i1(i,r,n,a);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;QS(i,(l,u)=>{if(nd(u)){const d=o.get(u)||[];d.push(l),o.set(u,d)}})}const s=t.draftLocations_.get(e)??vle;for(const o of s)i1(i,o,n,a)}function yle(t,e,n){t.callbacks_.push(function(i){const a=e;if(!a||!r2(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const s=JP(a);G8(t,a.draft_??a,s,n),$8(a,i)})}function $8(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const i=r.getPath(t);i&&r.generatePatches_(t,i,e)}W8(t)}}function xle(t,e,n){const{scope_:r}=t;if(nd(n)){const i=n[Ss];r2(i,r)&&i.callbacks_.push(function(){xw(t);const s=JP(i);G8(t,n,s,e)})}else ql(n)&&t.callbacks_.push(function(){const a=Lu(t);t.type_===3?a.has(n)&&s1(n,r.handledSet_,r):WA(a,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&s1(WA(t.copy_,e,t.type_),r.handledSet_,r)})}function s1(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||nd(t)||e.has(t)||!ql(t)||n2(t)||(e.add(t),QS(t,(r,i)=>{if(nd(i)){const a=i[Ss];if(r2(a,n)){const s=JP(a);i1(t,r,s,t.type_),W8(a)}}else ql(i)&&s1(i,e,n)})),t}function ble(t,e){const n=JS(t),r={type_:n?1:0,scope_:e?e.scope_:V8(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=o1;n&&(i=[r],a=vy);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,[o,r]}var o1={get(t,e){if(e===Ss)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=Lu(t);if(!wI(i,e,t.type_))return _le(t,i,e);const a=i[e];if(t.finalized_||!ql(a)||r&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&fle(e))return a;if(a===_C(t.base_,e)){xw(t);const s=t.type_===1?+e:e,o=KA(t.scope_,a,t,s);return t.copy_[s]=o}return a},has(t,e){return e in Lu(t)},ownKeys(t){return Reflect.ownKeys(Lu(t))},set(t,e,n){const r=Y8(Lu(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=_C(Lu(t),e),a=i?.[Ss];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(dle(n,i)&&(n!==void 0||wI(t.base_,e,t.type_)))return!0;xw(t),XA(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),xle(t,e,n)),!0},deleteProperty(t,e){return xw(t),_C(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),XA(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Lu(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[yw]:!0,[VA]:t.type_!==1||e!=="length",[r1]:r[r1],[my]:n[e]}},defineProperty(){Bl(11)},getPrototypeOf(t){return kg(t.base_)},setPrototypeOf(){Bl(12)}},vy={};for(let t in o1){let e=o1[t];vy[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}vy.deleteProperty=function(t,e){return vy.set.call(this,t,e,void 0)};vy.set=function(t,e,n){return o1.set.call(this,t[0],e,n,t[0])};function _C(t,e){const n=t[Ss];return(n?Lu(n):t)[e]}function _le(t,e,n){const r=Y8(e,n);return r?my in r?r[my]:r.get?.call(t.draft_):void 0}function Y8(t,e){if(!(e in t))return;let n=kg(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=kg(n)}}function XA(t){t.modified_||(t.modified_=!0,t.parent_&&XA(t.parent_))}function xw(t){t.copy_||(t.assigned_=new Map,t.copy_=GA(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var wle=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(rg(n)&&!rg(r)){const s=r;r=n;const o=this;return function(u=s,...d){return o.produce(u,f=>r.call(this,f,...d))}}rg(r)||Bl(6),i!==void 0&&!rg(i)&&Bl(7);let a;if(ql(n)){const s=CI(this),o=KA(s,n,void 0);let l=!0;try{a=r(o),l=!1}finally{l?YA(s):qA(s)}return MI(s,i),NI(a,s)}else if(!n||!QP(n)){if(a=r(n),a===void 0&&(a=n),a===B8&&(a=void 0),this.autoFreeze_&&eR(a,!0),i){const s=[],o=[];vp($A).generateReplacementPatches_(n,a,{patches_:s,inversePatches_:o}),i(s,o)}return a}else Bl(1,n)},this.produceWithPatches=(n,r)=>{if(rg(n))return(o,...l)=>this.produceWithPatches(o,u=>n(u,...l));let i,a;return[this.produce(n,r,(o,l)=>{i=o,a=l}),i,a]},bC(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),bC(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),bC(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ql(e)||Bl(8),nd(e)&&(e=Gl(e));const n=CI(this),r=KA(n,e,void 0);return r[Ss].isManual_=!0,qA(n),r}finishDraft(e,n){const r=e&&e[Ss];(!r||!r.isManual_)&&Bl(9);const{scope_:i}=r;return MI(i,n),NI(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(n=n.slice(r+1));const i=vp($A).applyPatches_;return nd(e)?i(e,n):this.produce(e,a=>i(a,n))}};function KA(t,e,n,r){const[i,a]=e2(e)?vp(a1).proxyMap_(e,n):t2(e)?vp(a1).proxySet_(e,n):ble(e,n);return(n?.scope_??V8()).drafts_.push(i),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?yle(n,a,r):a.callbacks_.push(function(l){l.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:u}=l;a.modified_&&u&&u.generatePatches_(a,[],l)}),i}function Gl(t){return nd(t)||Bl(10,t),q8(t)}function q8(t){if(!ql(t)||n2(t))return t;const e=t[Ss];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=GA(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=GA(t,!0);return QS(n,(i,a)=>{i1(n,i,q8(a))},r),e&&(e.finalized_=!1),n}var Sle=new wle,X8=Sle.produce;function K8(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var Ele=K8(),Mle=K8,Cle=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?t1:t1.apply(null,arguments)};function tl(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(Ao(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>U8(r)&&r.type===t,n}var Z8=class F0 extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,F0.prototype)}static get[Symbol.species](){return F0}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new F0(...e[0].concat(this)):new F0(...e.concat(this))}};function TI(t){return ql(t)?X8(t,()=>{}):t}function Gb(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function Nle(t){return typeof t=="boolean"}var Ale=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let s=new Z8;return n&&(Nle(n)?s.push(Ele):s.push(Mle(n.extraArgument))),s},Q8="RTK_autoBatch",Ar=()=>t=>({payload:t,meta:{[Q8]:!0}}),PI=t=>e=>{setTimeout(e,t)},J8=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,s=!1;const o=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:PI(10):t.type==="callback"?t.queueNotification:PI(t.timeout),u=()=>{s=!1,a&&(a=!1,o.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const f=()=>i&&d(),p=r.subscribe(f);return o.add(d),()=>{p(),o.delete(d)}},dispatch(d){try{return i=!d?.meta?.[Q8],a=!i,a&&(s||(s=!0,l(u))),r.dispatch(d)}finally{i=!0}}})},Tle=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new Z8(t);return r&&i.push(J8(typeof r=="object"?r:void 0)),i};function Ple(t){const e=Ale(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(ZP(n))o=F8(n);else throw new Error(Ao(1));let l;typeof r=="function"?l=r(e):l=e();let u=t1;i&&(u=Cle({trace:!1,...typeof i=="object"&&i}));const d=cle(...l),f=Tle(d);let p=typeof s=="function"?s(f):f();const m=u(...p);return L8(o,a,m)}function eH(t){const e={},n=[];let r;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(Ao(28));if(o in e)throw new Error(Ao(29));return e[o]=s,i},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return n.push({matcher:a,reducer:s}),i},addDefaultCase(a){return r=a,i}};return t(i),[e,n,r]}function Rle(t){return typeof t=="function"}function Dle(t,e){let[n,r,i]=eH(e),a;if(Rle(t))a=()=>TI(t());else{const o=TI(t);a=()=>o}function s(o=a(),l){let u=[n[l.type],...r.filter(({matcher:d})=>d(l)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[i]),u.reduce((d,f)=>{if(f)if(nd(d)){const m=f(d,l);return m===void 0?d:m}else{if(ql(d))return X8(d,p=>f(p,l));{const p=f(d,l);if(p===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return d},o)}return s.getInitialState=a,s}var kle="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",jle=(t=21)=>{let e="",n=t;for(;n--;)e+=kle[Math.random()*64|0];return e},Ole=Symbol.for("rtk-slice-createasyncthunk");function Ile(t,e){return`${t}/${e}`}function Lle({creators:t}={}){const e=t?.asyncThunk?.[Ole];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(Ao(11));const s=(typeof r.reducers=="function"?r.reducers(Ule()):r.reducers)||{},o=Object.keys(s),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(C,N){const P=typeof C=="string"?C:C.type;if(!P)throw new Error(Ao(12));if(P in l.sliceCaseReducersByType)throw new Error(Ao(13));return l.sliceCaseReducersByType[P]=N,u},addMatcher(C,N){return l.sliceMatchers.push({matcher:C,reducer:N}),u},exposeAction(C,N){return l.actionCreators[C]=N,u},exposeCaseReducer(C,N){return l.sliceCaseReducersByName[C]=N,u}};o.forEach(C=>{const N=s[C],P={reducerName:C,type:Ile(i,C),createNotation:typeof r.reducers=="function"};zle(N)?Vle(P,N,u,e):Ble(P,N,u)});function d(){const[C={},N=[],P=void 0]=typeof r.extraReducers=="function"?eH(r.extraReducers):[r.extraReducers],R={...C,...l.sliceCaseReducersByType};return Dle(r.initialState,k=>{for(let U in R)k.addCase(U,R[U]);for(let U of l.sliceMatchers)k.addMatcher(U.matcher,U.reducer);for(let U of N)k.addMatcher(U.matcher,U.reducer);P&&k.addDefaultCase(P)})}const f=C=>C,p=new Map,m=new WeakMap;let y;function _(C,N){return y||(y=d()),y(C,N)}function v(){return y||(y=d()),y.getInitialState()}function w(C,N=!1){function P(k){let U=k[C];return typeof U>"u"&&N&&(U=Gb(m,P,v)),U}function R(k=f){const U=Gb(p,N,()=>new WeakMap);return Gb(U,k,()=>{const I={};for(const[L,z]of Object.entries(r.selectors??{}))I[L]=Fle(z,k,()=>Gb(m,k,v),N);return I})}return{reducerPath:C,getSelectors:R,get selectors(){return R(P)},selectSlice:P}}const M={name:i,reducer:_,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:v,...w(a),injectInto(C,{reducerPath:N,...P}={}){const R=N??a;return C.inject({reducerPath:R,reducer:_},P),{...M,...w(R,!0)}}};return M}}function Fle(t,e,n,r){function i(a,...s){let o=e(a);return typeof o>"u"&&r&&(o=n()),t(o,...s)}return i.unwrapped=t,i}var eo=Lle();function Ule(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function Ble({type:t,reducerName:e,createNotation:n},r,i){let a,s;if("reducer"in r){if(n&&!Hle(r))throw new Error(Ao(17));a=r.reducer,s=r.prepare}else a=r;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,s?tl(t,s):tl(t))}function zle(t){return t._reducerDefinitionType==="asyncThunk"}function Hle(t){return t._reducerDefinitionType==="reducerWithPrepare"}function Vle({type:t,reducerName:e},n,r,i){if(!i)throw new Error(Ao(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:l,settled:u,options:d}=n,f=i(t,a,d);r.exposeAction(e,f),s&&r.addCase(f.fulfilled,s),o&&r.addCase(f.pending,o),l&&r.addCase(f.rejected,l),u&&r.addMatcher(f.settled,u),r.exposeCaseReducer(e,{fulfilled:s||$b,pending:o||$b,rejected:l||$b,settled:u||$b})}function $b(){}var Wle="task",tH="listener",nH="completed",tR="cancelled",Gle=`task-${tR}`,$le=`task-${nH}`,ZA=`${tH}-${tR}`,Yle=`${tH}-${nH}`,i2=class{constructor(t){this.code=t,this.message=`${Wle} ${tR} (reason: ${t})`}name="TaskAbortError";message},nR=(t,e)=>{if(typeof t!="function")throw new TypeError(Ao(32))},l1=()=>{},rH=(t,e=l1)=>(t.catch(e),t),iH=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Jh=t=>{if(t.aborted)throw new i2(t.reason)};function aH(t,e){let n=l1;return new Promise((r,i)=>{const a=()=>i(new i2(t.reason));if(t.aborted){a();return}n=iH(t,a),e.finally(()=>n()).then(r,i)}).finally(()=>{n=l1})}var qle=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof i2?"cancelled":"rejected",error:n}}finally{e?.()}},c1=t=>e=>rH(aH(t,e).then(n=>(Jh(t),n))),sH=t=>{const e=c1(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:yg}=Object,RI={},a2="listenerMiddleware",Xle=(t,e)=>{const n=r=>iH(t,()=>r.abort(t.reason));return(r,i)=>{nR(r);const a=new AbortController;n(a);const s=qle(async()=>{Jh(t),Jh(a.signal);const o=await r({pause:c1(a.signal),delay:sH(a.signal),signal:a.signal});return Jh(a.signal),o},()=>a.abort($le));return i?.autoJoin&&e.push(s.catch(l1)),{result:c1(t)(s),cancel(){a.abort(Gle)}}}},Kle=(t,e)=>{const n=async(r,i)=>{Jh(e);let a=()=>{};const o=[new Promise((l,u)=>{let d=t({predicate:r,effect:(f,p)=>{p.unsubscribe(),l([f,p.getState(),p.getOriginalState()])}});a=()=>{d(),u()}})];i!=null&&o.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await aH(e,Promise.race(o));return Jh(e),l}finally{a()}};return(r,i)=>rH(n(r,i))},oH=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:a}=t;if(e)i=tl(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Ao(21));return nR(a),{predicate:i,type:e,effect:a}},lH=yg(t=>{const{type:e,predicate:n,effect:r}=oH(t);return{id:jle(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Ao(22))}}},{withTypes:()=>lH}),DI=(t,e)=>{const{type:n,effect:r,predicate:i}=oH(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},QA=t=>{t.pending.forEach(e=>{e.abort(ZA)})},Zle=(t,e)=>()=>{for(const n of e.keys())QA(n);t.clear()},kI=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},cH=yg(tl(`${a2}/add`),{withTypes:()=>cH}),Qle=tl(`${a2}/removeAll`),uH=yg(tl(`${a2}/remove`),{withTypes:()=>uH}),Jle=(...t)=>{console.error(`${a2}/error`,...t)},sx=(t={})=>{const e=new Map,n=new Map,r=m=>{const y=n.get(m)??0;n.set(m,y+1)},i=m=>{const y=n.get(m)??1;y===1?n.delete(m):n.set(m,y-1)},{extra:a,onError:s=Jle}=t;nR(s);const o=m=>(m.unsubscribe=()=>e.delete(m.id),e.set(m.id,m),y=>{m.unsubscribe(),y?.cancelActive&&QA(m)}),l=m=>{const y=DI(e,m)??lH(m);return o(y)};yg(l,{withTypes:()=>l});const u=m=>{const y=DI(e,m);return y&&(y.unsubscribe(),m.cancelActive&&QA(y)),!!y};yg(u,{withTypes:()=>u});const d=async(m,y,_,v)=>{const w=new AbortController,M=Kle(l,w.signal),C=[];try{m.pending.add(w),r(m),await Promise.resolve(m.effect(y,yg({},_,{getOriginalState:v,condition:(N,P)=>M(N,P).then(Boolean),take:M,delay:sH(w.signal),pause:c1(w.signal),extra:a,signal:w.signal,fork:Xle(w.signal,C),unsubscribe:m.unsubscribe,subscribe:()=>{e.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((N,P,R)=>{N!==w&&(N.abort(ZA),R.delete(N))})},cancel:()=>{w.abort(ZA),m.pending.delete(w)},throwIfCancelled:()=>{Jh(w.signal)}})))}catch(N){N instanceof i2||kI(s,N,{raisedBy:"effect"})}finally{await Promise.all(C),w.abort(Yle),i(m),m.pending.delete(w)}},f=Zle(e,n);return{middleware:m=>y=>_=>{if(!U8(_))return y(_);if(cH.match(_))return l(_.payload);if(Qle.match(_)){f();return}if(uH.match(_))return u(_.payload);let v=m.getState();const w=()=>{if(v===RI)throw new Error(Ao(23));return v};let M;try{if(M=y(_),e.size>0){const C=m.getState(),N=Array.from(e.values());for(const P of N){let R=!1;try{R=P.predicate(_,C,v)}catch(k){R=!1,kI(s,k,{raisedBy:"predicate"})}R&&d(P,_,m,w)}}}finally{v=RI}return M},startListening:l,stopListening:u,clearListeners:f}};function Ao(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var ece={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},dH=eo({name:"chartLayout",initialState:ece,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,a;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:tce,setLayout:nce,setChartSize:rce,setScale:ice}=dH.actions,ace=dH.reducer;function fH(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function Dr(t){return Number.isFinite(t)}function Yc(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function jI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jI(Object(n),!0).forEach(function(r){sce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sce(t,e,n){return(e=oce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oce(t){var e=lce(t,"string");return typeof e=="symbol"?e:e+""}function lce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Er(t,e,n){return ua(t)||ua(e)?n:$c(e)?gp(t,e,n):typeof e=="function"?e(t):n}var cce=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:a,verticalAlign:s,layout:o}=e;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&Ft(t[a]))return sg(sg({},t),{},{[a]:t[a]+(r||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&Ft(t[s]))return sg(sg({},t),{},{[s]:t[s]+(i||0)})}return t},pd=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",hH=(t,e,n,r)=>{if(r)return t.map(o=>o.coordinate);var i,a,s=t.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===n&&(a=!0),o.coordinate));return i||s.push(e),a||s.push(n),s},pH=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:a,scale:s,realScaleType:o,isCategorical:l,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:p,axisType:m}=t;if(!s)return null;var y=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,_=i==="category"&&s.bandwidth?s.bandwidth()/y:0;if(_=m==="angleAxis"&&a&&a.length>=2?Qa(a[0]-a[1])*2*_:_,f||p){var v=(f||p||[]).map((w,M)=>{var C=r?r.indexOf(w):w;return{coordinate:s(C)+_,value:w,offset:_,index:M}});return v.filter(w=>!Yl(w.coordinate))}return l&&u?u.map((w,M)=>({coordinate:s(w)+_,value:w,index:M,offset:_})):s.ticks&&d!=null?s.ticks(d).map((w,M)=>({coordinate:s(w)+_,value:w,offset:_,index:M})):s.domain().map((w,M)=>({coordinate:s(w)+_,value:r?r[w]:w,index:M,offset:_}))},OI=1e-4,uce=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-OI,a=Math.max(r[0],r[1])+OI,s=t(e[0]),o=t(e[n-1]);(s<i||s>a||o<i||o>a)&&t.domain([e[0],e[n-1]])}},dce=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0,o=0;o<n;++o){var l=t[o],u=l?.[i];if(u!=null){var d=u[1],f=u[0],p=Yl(d)?f:d;p>=0?(u[0]=a,u[1]=a+p,a=d):(u[0]=s,u[1]=s+p,s=d)}}}},fce=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0;s<n;++s){var o=t[s],l=o?.[i];if(l!=null){var u=Yl(l[1])?l[0]:l[1];u>=0?(l[0]=a,l[1]=a+u,a=l[1]):(l[0]=0,l[1]=0)}}}},hce={sign:dce,expand:kse,none:mp,silhouette:jse,wiggle:Ose,positive:fce},pce=(t,e,n)=>{var r,i=(r=hce[n])!==null&&r!==void 0?r:mp,a=Dse().keys(e).value((o,l)=>Number(Er(o,l,0))).order(zA).offset(i),s=a(t);return s.forEach((o,l)=>{o.forEach((u,d)=>{var f=Er(t[d],e[l],0);Array.isArray(f)&&f.length===2&&Ft(f[0])&&Ft(f[1])&&(u[0]=f[0],u[1]=f[1])})}),s};function mce(t){return t==null?void 0:String(t)}function II(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:a,dataKey:s}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!ua(i[e.dataKey])){var o=x8(n,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var l=Er(i,ua(s)?e.dataKey:s);return ua(l)?null:e.scale(l)}var gce=t=>{var e=t.flat(2).filter(Ft);return[Math.min(...e),Math.max(...e)]},vce=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],yce=(t,e,n)=>{if(t!=null)return vce(Object.keys(t).reduce((r,i)=>{var a=t[i];if(!a)return r;var{stackedData:s}=a,o=s.reduce((l,u)=>{var d=fH(u,e,n),f=gce(d);return!Dr(f[0])||!Dr(f[1])?l:[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},LI=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,FI=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,u1=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=KS(e,d=>d.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var l=i[s],u=i[s-1];a=Math.min((l?.coordinate||0)-(u?.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function UI(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:a}=t;return sg(sg({},e),{},{dataKey:n,payload:r,value:i,name:a})}function s2(t,e){if(t)return String(t);if(typeof e=="string")return e}var xce=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},bce=(t,e)=>e==="centric"?t.angle:t.radius,md=t=>t.layout.width,gd=t=>t.layout.height,_ce=t=>t.layout.scale,mH=t=>t.layout.margin,o2=Ge(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),l2=Ge(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),gH="data-recharts-item-index",vH="data-recharts-item-id",ox=60;function BI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BI(Object(n),!0).forEach(function(r){wce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wce(t,e,n){return(e=Sce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sce(t){var e=Ece(t,"string");return typeof e=="symbol"?e:e+""}function Ece(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Mce=t=>t.brush.height;function Cce(t){var e=l2(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:ox;return n+i}return n},0)}function Nce(t){var e=l2(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:ox;return n+i}return n},0)}function Ace(t){var e=o2(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function Tce(t){var e=o2(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var da=Ge([md,gd,mH,Mce,Cce,Nce,Ace,Tce,O8,nle],(t,e,n,r,i,a,s,o,l,u)=>{var d={left:(n.left||0)+i,right:(n.right||0)+a},f={top:(n.top||0)+s,bottom:(n.bottom||0)+o},p=Yb(Yb({},f),d),m=p.bottom;p.bottom+=r,p=cce(p,l,u);var y=t-p.left-p.right,_=e-p.top-p.bottom;return Yb(Yb({brushBottom:m},p),{},{width:Math.max(y,0),height:Math.max(_,0)})}),Pce=Ge(da,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),yH=Ge(md,gd,(t,e)=>({x:0,y:0,width:t,height:e})),Rce=E.createContext(null),to=()=>E.useContext(Rce)!=null,c2=t=>t.brush,u2=Ge([c2,da,mH],(t,e,n)=>({height:t.height,x:Ft(t.x)?t.x:e.left,y:Ft(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:Ft(t.width)?t.width:e.width})),wC={},SC={},EC={},zI;function Dce(){return zI||(zI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:a}={}){let s,o=null;const l=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),d=()=>{o!==null&&(n.apply(s,o),s=void 0,o=null)},f=()=>{u&&d(),_()};let p=null;const m=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,f()},r)},y=()=>{p!==null&&(clearTimeout(p),p=null)},_=()=>{y(),s=void 0,o=null},v=()=>{d()},w=function(...M){if(i?.aborted)return;s=this,o=M;const C=p==null;m(),l&&C&&d()};return w.schedule=m,w.cancel=_,w.flush=v,i?.addEventListener("abort",_,{once:!0}),w}t.debounce=e})(EC)),EC}var HI;function kce(){return HI||(HI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Dce();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:l}=a,u=Array(2);s&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const p=e.debounce(function(..._){d=r.apply(this,_),f=null},i,{edges:u}),m=function(..._){return l!=null&&(f===null&&(f=Date.now()),Date.now()-f>=l)?(d=r.apply(this,_),f=Date.now(),p.cancel(),p.schedule(),d):(p.apply(this,_),d)},y=()=>(p.flush(),d);return m.cancel=p.cancel,m.flush=y,m}t.debounce=n})(SC)),SC}var VI;function jce(){return VI||(VI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kce();function n(r,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return e.debounce(r,i,{leading:s,maxWait:i,trailing:o})}t.throttle=n})(wC)),wC}var MC,WI;function Oce(){return WI||(WI=1,MC=jce().throttle),MC}var Ice=Oce();const Lce=Zl(Ice);var d1=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(n.replace(/%s/g,()=>i[s++]))}},xH=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:a,maxHeight:s}=n,o=td(r)?t:Number(r),l=td(i)?e:Number(i);return a&&a>0&&(o?l=o/a:l&&(o=l*a),s&&l!=null&&l>s&&(l=s)),{calculatedWidth:o,calculatedHeight:l}},Fce={width:0,height:0,overflow:"visible"},Uce={width:0,overflowX:"visible"},Bce={height:0,overflowY:"visible"},zce={},Hce=t=>{var{width:e,height:n}=t,r=td(e),i=td(n);return r&&i?Fce:r?Uce:i?Bce:zce};function Vce(t){var{width:e,height:n,aspect:r}=t,i=e,a=n;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=r&&r>0?void 0:"100%":a===void 0&&(a=r&&r>0?void 0:"100%"),{width:i,height:a}}function JA(){return JA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JA.apply(null,arguments)}function GI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $I(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GI(Object(n),!0).forEach(function(r){Wce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wce(t,e,n){return(e=Gce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gce(t){var e=$ce(t,"string");return typeof e=="symbol"?e:e+""}function $ce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bH=E.createContext({width:-1,height:-1});function Yce(t){return Yc(t.width)&&Yc(t.height)}function _H(t){var{children:e,width:n,height:r}=t,i=E.useMemo(()=>({width:n,height:r}),[n,r]);return Yce(i)?E.createElement(bH.Provider,{value:i},e):null}var rR=()=>E.useContext(bH),qce=E.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:a,minWidth:s=0,minHeight:o,maxHeight:l,children:u,debounce:d=0,id:f,className:p,onResize:m,style:y={}}=t,_=E.useRef(null),v=E.useRef();v.current=m,E.useImperativeHandle(e,()=>_.current);var[w,M]=E.useState({containerWidth:r.width,containerHeight:r.height}),C=E.useCallback((U,I)=>{M(L=>{var z=Math.round(U),O=Math.round(I);return L.containerWidth===z&&L.containerHeight===O?L:{containerWidth:z,containerHeight:O}})},[]);E.useEffect(()=>{if(_.current==null||typeof ResizeObserver>"u")return ix;var U=O=>{var q,{width:Y,height:X}=O[0].contentRect;C(Y,X),(q=v.current)===null||q===void 0||q.call(v,Y,X)};d>0&&(U=Lce(U,d,{trailing:!0,leading:!1}));var I=new ResizeObserver(U),{width:L,height:z}=_.current.getBoundingClientRect();return C(L,z),I.observe(_.current),()=>{I.disconnect()}},[C,d]);var{containerWidth:N,containerHeight:P}=w;d1(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:R,calculatedHeight:k}=xH(N,P,{width:i,height:a,aspect:n,maxHeight:l});return d1(R!=null&&R>0||k!=null&&k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,k,i,a,s,o,n),E.createElement("div",{id:f?"".concat(f):void 0,className:nn("recharts-responsive-container",p),style:$I($I({},y),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:l}),ref:_},E.createElement("div",{style:Hce({width:i,height:a})},E.createElement(_H,{width:R,height:k},u)))}),wH=E.forwardRef((t,e)=>{var n=rR();if(Yc(n.width)&&Yc(n.height))return t.children;var{width:r,height:i}=Vce({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:s}=xH(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return Ft(a)&&Ft(s)?E.createElement(_H,{width:a,height:s},t.children):E.createElement(qce,JA({},t,{width:r,height:i,ref:e}))});function SH(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var d2=()=>{var t,e=to(),n=Wt(Pce),r=Wt(u2),i=(t=Wt(c2))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},Xce={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},EH=()=>{var t;return(t=Wt(da))!==null&&t!==void 0?t:Xce},iR=()=>Wt(md),aR=()=>Wt(gd),Kce=()=>Wt(t=>t.layout.margin),ir=t=>t.layout.layoutType,Zg=()=>Wt(ir),Zce=()=>{var t=Zg();if(t==="horizontal"||t==="vertical")return t},Qce=()=>{var t=Zg();return t!==void 0},f2=t=>{var e=vr(),n=to(),{width:r,height:i}=t,a=rR(),s=r,o=i;return a&&(s=a.width>0?a.width:r,o=a.height>0?a.height:i),E.useEffect(()=>{!n&&Yc(s)&&Yc(o)&&e(rce({width:s,height:o}))},[e,n,s,o]),null},MH=Symbol.for("immer-nothing"),YI=Symbol.for("immer-draftable"),Ro=Symbol.for("immer-state");function zl(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var yy=Object.getPrototypeOf;function jg(t){return!!t&&!!t[Ro]}function yp(t){return t?CH(t)||Array.isArray(t)||!!t[YI]||!!t.constructor?.[YI]||lx(t)||p2(t):!1}var Jce=Object.prototype.constructor.toString(),qI=new WeakMap;function CH(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=qI.get(n);return r===void 0&&(r=Function.toString.call(n),qI.set(n,r)),r===Jce}function f1(t,e,n=!0){h2(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function h2(t){const e=t[Ro];return e?e.type_:Array.isArray(t)?1:lx(t)?2:p2(t)?3:0}function eT(t,e){return h2(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function NH(t,e,n){const r=h2(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function eue(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function lx(t){return t instanceof Map}function p2(t){return t instanceof Set}function Rh(t){return t.copy_||t.base_}function tT(t,e){if(lx(t))return new Map(t);if(p2(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=CH(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Ro];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create(yy(t),r)}else{const r=yy(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function sR(t,e=!1){return m2(t)||jg(t)||!yp(t)||(h2(t)>1&&Object.defineProperties(t,{set:qb,add:qb,clear:qb,delete:qb}),Object.freeze(t),e&&Object.values(t).forEach(n=>sR(n,!0))),t}function tue(){zl(2)}var qb={value:tue};function m2(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var nue={};function xp(t){const e=nue[t];return e||zl(0,t),e}var xy;function AH(){return xy}function rue(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function XI(t,e){e&&(xp("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function nT(t){rT(t),t.drafts_.forEach(iue),t.drafts_=null}function rT(t){t===xy&&(xy=t.parent_)}function KI(t){return xy=rue(xy,t)}function iue(t){const e=t[Ro];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function ZI(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Ro].modified_&&(nT(e),zl(4)),yp(t)&&(t=h1(e,t),e.parent_||p1(e,t)),e.patches_&&xp("Patches").generateReplacementPatches_(n[Ro].base_,t,e.patches_,e.inversePatches_)):t=h1(e,n,[]),nT(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==MH?t:void 0}function h1(t,e,n){if(m2(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[Ro];if(!i)return f1(e,(a,s)=>QI(t,i,e,a,s,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return p1(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),f1(s,(l,u)=>QI(t,i,a,l,u,n,o),r),p1(t,a,!1),n&&t.patches_&&xp("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function QI(t,e,n,r,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=m2(i);if(!(o&&!s)){if(jg(i)){const l=a&&e&&e.type_!==3&&!eT(e.assigned_,r)?a.concat(r):void 0,u=h1(t,i,l);if(NH(n,r,u),jg(u))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(yp(i)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;h1(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(lx(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&p1(t,i)}}}function p1(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&sR(e,n)}function aue(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:AH(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=oR;n&&(i=[r],a=by);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,o}var oR={get(t,e){if(e===Ro)return t;const n=Rh(t);if(!eT(n,e))return sue(t,n,e);const r=n[e];return t.finalized_||!yp(r)?r:r===CC(t.base_,e)?(NC(t),t.copy_[e]=aT(r,t)):r},has(t,e){return e in Rh(t)},ownKeys(t){return Reflect.ownKeys(Rh(t))},set(t,e,n){const r=TH(Rh(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=CC(Rh(t),e),a=i?.[Ro];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(eue(n,i)&&(n!==void 0||eT(t.base_,e)))return!0;NC(t),iT(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return CC(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,NC(t),iT(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Rh(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){zl(11)},getPrototypeOf(t){return yy(t.base_)},setPrototypeOf(){zl(12)}},by={};f1(oR,(t,e)=>{by[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});by.deleteProperty=function(t,e){return by.set.call(this,t,e,void 0)};by.set=function(t,e,n){return oR.set.call(this,t[0],e,n,t[0])};function CC(t,e){const n=t[Ro];return(n?Rh(n):t)[e]}function sue(t,e,n){const r=TH(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function TH(t,e){if(!(e in t))return;let n=yy(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=yy(n)}}function iT(t){t.modified_||(t.modified_=!0,t.parent_&&iT(t.parent_))}function NC(t){t.copy_||(t.copy_=tT(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var oue=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const s=this;return function(l=a,...u){return s.produce(l,d=>n.call(this,d,...u))}}typeof n!="function"&&zl(6),r!==void 0&&typeof r!="function"&&zl(7);let i;if(yp(e)){const a=KI(this),s=aT(e,void 0);let o=!0;try{i=n(s),o=!1}finally{o?nT(a):rT(a)}return XI(a,r),ZI(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===MH&&(i=void 0),this.autoFreeze_&&sR(i,!0),r){const a=[],s=[];xp("Patches").generateReplacementPatches_(e,i,a,s),r(a,s)}return i}else zl(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,l=>e(l,...o));let r,i;return[this.produce(e,n,(s,o)=>{r=s,i=o}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){yp(t)||zl(8),jg(t)&&(t=lue(t));const e=KI(this),n=aT(t,void 0);return n[Ro].isManual_=!0,rT(e),n}finishDraft(t,e){const n=t&&t[Ro];(!n||!n.isManual_)&&zl(9);const{scope_:r}=n;return XI(r,e),ZI(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=xp("Patches").applyPatches_;return jg(t)?r(t,e):this.produce(t,i=>r(i,e))}};function aT(t,e){const n=lx(t)?xp("MapSet").proxyMap_(t,e):p2(t)?xp("MapSet").proxySet_(t,e):aue(t,e);return(e?e.scope_:AH()).drafts_.push(n),n}function lue(t){return jg(t)||zl(10,t),PH(t)}function PH(t){if(!yp(t)||m2(t))return t;const e=t[Ro];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=tT(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=tT(t,!0);return f1(n,(i,a)=>{NH(n,i,PH(a))},r),e&&(e.finalized_=!1),n}var cue=new oue;cue.produce;var uue={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},RH=eo({name:"legend",initialState:uue,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Ar()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Gl(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:Ar()},removeLegendPayload:{reducer(t,e){var n=Gl(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Ar()}}}),{setLegendSize:JI,setLegendSettings:due,addLegendPayload:DH,replaceLegendPayload:kH,removeLegendPayload:jH}=RH.actions,fue=RH.reducer,hue=["contextPayload"];function sT(){return sT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sT.apply(null,arguments)}function eL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Og(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eL(Object(n),!0).forEach(function(r){pue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pue(t,e,n){return(e=mue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mue(t){var e=gue(t,"string");return typeof e=="symbol"?e:e+""}function gue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vue(t,e){if(t==null)return{};var n,r,i=yue(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function yue(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function xue(t){return t.value}function bue(t){var{contextPayload:e}=t,n=vue(t,hue),r=R8(e,t.payloadUniqBy,xue),i=Og(Og({},n),{},{payload:r});return E.isValidElement(t.content)?E.cloneElement(t.content,i):typeof t.content=="function"?E.createElement(t.content,i):E.createElement(doe,i)}function _ue(t,e,n,r,i,a){var{layout:s,align:o,verticalAlign:l}=e,u,d;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(o==="center"&&s==="vertical"?u={left:((r||0)-a.width)/2}:u=o==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(l==="middle"?d={top:((i||0)-a.height)/2}:d=l==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Og(Og({},u),d)}function wue(t){var e=vr();return E.useEffect(()=>{e(due(t))},[e,t]),null}function Sue(t){var e=vr();return E.useEffect(()=>(e(JI(t)),()=>{e(JI({width:0,height:0}))}),[e,t]),null}function Eue(t,e,n,r){return t==="vertical"&&Ft(e)?{height:e}:t==="horizontal"?{width:n||r}:null}var Mue={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function lR(t){var e=qi(t,Mue),n=ale(),r=nse(),i=Kce(),{width:a,height:s,wrapperStyle:o,portal:l}=e,[u,d]=I8([n]),f=iR(),p=aR();if(f==null||p==null)return null;var m=f-(i?.left||0)-(i?.right||0),y=Eue(e.layout,s,a,m),_=l?o:Og(Og({position:"absolute",width:y?.width||a||"auto",height:y?.height||s||"auto"},_ue(o,e,i,f,p,u)),o),v=l??r;if(v==null||n==null)return null;var w=E.createElement("div",{className:"recharts-legend-wrapper",style:_,ref:d},E.createElement(wue,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!l&&E.createElement(Sue,{width:u.width,height:u.height}),E.createElement(bue,sT({},e,y,{margin:i,chartWidth:f,chartHeight:p,contextPayload:n})));return $g.createPortal(w,v)}lR.displayName="Legend";function oT(){return oT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oT.apply(null,arguments)}function tL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tL(Object(n),!0).forEach(function(r){Cue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cue(t,e,n){return(e=Nue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nue(t){var e=Aue(t,"string");return typeof e=="symbol"?e:e+""}function Aue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tue(t){return Array.isArray(t)&&$c(t[0])&&$c(t[1])?t.join(" ~ "):t}var Pue=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:a,formatter:s,itemSorter:o,wrapperClassName:l,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:p=!1}=t,m=()=>{if(a&&a.length){var P={padding:0,margin:0},R=(o?KS(a,o):a).map((k,U)=>{if(k.type==="none")return null;var I=k.formatter||s||Tue,{value:L,name:z}=k,O=L,q=z;if(I){var Y=I(L,z,k,U,a);if(Array.isArray(Y))[O,q]=Y;else if(Y!=null)O=Y;else return null}var X=AC({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},r);return E.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(U),style:X},$c(q)?E.createElement("span",{className:"recharts-tooltip-item-name"},q):null,$c(q)?E.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,E.createElement("span",{className:"recharts-tooltip-item-value"},O),E.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return E.createElement("ul",{className:"recharts-tooltip-item-list",style:P},R)}return null},y=AC({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),_=AC({margin:0},i),v=!ua(d),w=v?d:"",M=nn("recharts-default-tooltip",l),C=nn("recharts-tooltip-label",u);v&&f&&a!==void 0&&a!==null&&(w=f(d,a));var N=p?{role:"status","aria-live":"assertive"}:{};return E.createElement("div",oT({className:M,style:y},N),E.createElement("p",{className:C,style:_},E.isValidElement(w)?w:"".concat(w)),m())},d0="recharts-tooltip-wrapper",Rue={visibility:"hidden"};function Due(t){var{coordinate:e,translateX:n,translateY:r}=t;return nn(d0,{["".concat(d0,"-right")]:Ft(n)&&e&&Ft(e.x)&&n>=e.x,["".concat(d0,"-left")]:Ft(n)&&e&&Ft(e.x)&&n<e.x,["".concat(d0,"-bottom")]:Ft(r)&&e&&Ft(e.y)&&r>=e.y,["".concat(d0,"-top")]:Ft(r)&&e&&Ft(e.y)&&r<e.y})}function nL(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:l,viewBoxDimension:u}=t;if(a&&Ft(a[r]))return a[r];var d=n[r]-o-(i>0?i:0),f=n[r]+i;if(e[r])return s[r]?d:f;var p=l[r];if(p==null)return 0;if(s[r]){var m=d,y=p;return m<y?Math.max(f,p):Math.max(d,p)}if(u==null)return 0;var _=f+o,v=p+u;return _>v?Math.max(d,p):Math.max(f,p)}function kue(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function jue(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:a,tooltipBox:s,useTranslate3d:o,viewBox:l}=t,u,d,f;return s.height>0&&s.width>0&&n?(d=nL({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),f=nL({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),u=kue({translateX:d,translateY:f,useTranslate3d:o})):u=Rue,{cssProperties:u,cssClasses:Due({translateX:d,translateY:f,coordinate:n})}}function rL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rL(Object(n),!0).forEach(function(r){lT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lT(t,e,n){return(e=Oue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oue(t){var e=Iue(t,"string");return typeof e=="symbol"?e:e+""}function Iue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Lue extends E.PureComponent{constructor(){super(...arguments),lT(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),lT(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:l,offset:u,position:d,reverseDirection:f,useTranslate3d:p,viewBox:m,wrapperStyle:y,lastBoundingBox:_,innerRef:v,hasPortalFromProps:w}=this.props,{cssClasses:M,cssProperties:C}=jue({allowEscapeViewBox:n,coordinate:s,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:_.height,width:_.width},useTranslate3d:p,viewBox:m}),N=w?{}:Xb(Xb({transition:l&&e?"transform ".concat(r,"ms ").concat(i):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),P=Xb(Xb({},N),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},y);return E.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:M,style:P,ref:v},a)}}var OH=()=>{var t;return(t=Wt(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function cT(){return cT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cT.apply(null,arguments)}function iL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iL(Object(n),!0).forEach(function(r){Fue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fue(t,e,n){return(e=Uue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uue(t){var e=Bue(t,"string");return typeof e=="symbol"?e:e+""}function Bue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sL={curveBasisClosed:_se,curveBasisOpen:wse,curveBasis:bse,curveBumpX:sse,curveBumpY:ose,curveLinearClosed:Sse,curveLinear:qS,curveMonotoneX:Ese,curveMonotoneY:Mse,curveNatural:Cse,curveStep:Nse,curveStepAfter:Tse,curveStepBefore:Ase},m1=t=>Dr(t.x)&&Dr(t.y),oL=t=>t.base!=null&&m1(t.base)&&m1(t),f0=t=>t.x,h0=t=>t.y,zue=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(rx(t));return(n==="curveMonotone"||n==="curveBump")&&e?sL["".concat(n).concat(e==="vertical"?"Y":"X")]:sL[n]||qS},Hue=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:a=!1}=t,s=zue(e,i),o=a?n.filter(m1):n,l;if(Array.isArray(r)){var u=n.map((m,y)=>aL(aL({},m),{},{base:r[y]}));i==="vertical"?l=zb().y(h0).x1(f0).x0(m=>m.base.x):l=zb().x(f0).y1(h0).y0(m=>m.base.y);var d=l.defined(oL).curve(s),f=a?u.filter(oL):u;return d(f)}i==="vertical"&&Ft(r)?l=zb().y(h0).x1(f0).x0(r):Ft(r)?l=zb().x(f0).y1(h0).y0(r):l=s8().x(f0).y(h0);var p=l.defined(m1).curve(s);return p(o)},xg=t=>{var{className:e,points:n,path:r,pathRef:i}=t,a=Zg();if((!n||!n.length)&&!r)return null;var s={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||a,connectNulls:t.connectNulls},o=n&&n.length?Hue(s):r;return E.createElement("path",cT({},Po(t),YP(t),{className:nn("recharts-curve",e),d:o===null?void 0:o,ref:i}))},Vue=["x","y","top","left","width","height","className"];function uT(){return uT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uT.apply(null,arguments)}function lL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wue(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lL(Object(n),!0).forEach(function(r){Gue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gue(t,e,n){return(e=$ue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ue(t){var e=Yue(t,"string");return typeof e=="symbol"?e:e+""}function Yue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function que(t,e){if(t==null)return{};var n,r,i=Xue(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Xue(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Kue=(t,e,n,r,i,a)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),Zue=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:a=0,height:s=0,className:o}=t,l=que(t,Vue),u=Wue({x:e,y:n,top:r,left:i,width:a,height:s},l);return!Ft(e)||!Ft(n)||!Ft(a)||!Ft(s)||!Ft(r)||!Ft(i)?null:E.createElement("path",uT({},ws(u),{className:nn("recharts-cross",o),d:Kue(e,n,a,s,r,i)}))};function Que(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function cL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cL(Object(n),!0).forEach(function(r){Jue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jue(t,e,n){return(e=ede(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ede(t){var e=tde(t,"string");return typeof e=="symbol"?e:e+""}function tde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nde=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),IH=(t,e,n)=>t.map(r=>"".concat(nde(r)," ").concat(e,"ms ").concat(n)).join(","),rde=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),_y=(t,e)=>Object.keys(e).reduce((n,r)=>uL(uL({},n),{},{[r]:t(r,e[r])}),{});function dL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dL(Object(n),!0).forEach(function(r){ide(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ide(t,e,n){return(e=ade(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ade(t){var e=sde(t,"string");return typeof e=="symbol"?e:e+""}function sde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var g1=(t,e,n)=>t+(e-t)*n,dT=t=>{var{from:e,to:n}=t;return e!==n},LH=(t,e,n)=>{var r=_y((i,a)=>{if(dT(a)){var[s,o]=t(a.from,a.to,a.velocity);return Wi(Wi({},a),{},{from:s,velocity:o})}return a},e);return n<1?_y((i,a)=>dT(a)&&r[i]!=null?Wi(Wi({},a),{},{velocity:g1(a.velocity,r[i].velocity,n),from:g1(a.from,r[i].from,n)}):a,e):LH(t,r,n-1)};function ode(t,e,n,r,i,a){var s,o=r.reduce((p,m)=>Wi(Wi({},p),{},{[m]:{from:t[m],velocity:0,to:e[m]}}),{}),l=()=>_y((p,m)=>m.from,o),u=()=>!Object.values(o).filter(dT).length,d=null,f=p=>{s||(s=p);var m=p-s,y=m/n.dt;o=LH(n,o,y),i(Wi(Wi(Wi({},t),e),l())),s=p,u()||(d=a.setTimeout(f))};return()=>(d=a.setTimeout(f),()=>{var p;(p=d)===null||p===void 0||p()})}function lde(t,e,n,r,i,a,s){var o=null,l=i.reduce((f,p)=>{var m=t[p],y=e[p];return m==null||y==null?f:Wi(Wi({},f),{},{[p]:[m,y]})},{}),u,d=f=>{u||(u=f);var p=(f-u)/r,m=_y((_,v)=>g1(...v,n(p)),l);if(a(Wi(Wi(Wi({},t),e),m)),p<1)o=s.setTimeout(d);else{var y=_y((_,v)=>g1(...v,n(1)),l);a(Wi(Wi(Wi({},t),e),y))}};return()=>(o=s.setTimeout(d),()=>{var f;(f=o)===null||f===void 0||f()})}const cde=(t,e,n,r,i,a)=>{var s=rde(t,e);return n==null?()=>(i(Wi(Wi({},t),e)),()=>{}):n.isStepper===!0?ode(t,e,n,s,i,a):lde(t,e,n,r,s,i,a)};var v1=1e-4,FH=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],UH=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),fL=(t,e)=>n=>{var r=FH(t,e);return UH(r,n)},ude=(t,e)=>n=>{var r=FH(t,e),i=[...r.map((a,s)=>a*s).slice(1),0];return UH(i,n)},dde=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},fde=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=dde(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},hde=(t,e,n,r)=>{var i=fL(t,n),a=fL(e,r),s=ude(t,n),o=u=>u>1?1:u<0?0:u,l=u=>{for(var d=u>1?1:u,f=d,p=0;p<8;++p){var m=i(f)-d,y=s(f);if(Math.abs(m-d)<v1||y<v1)return a(f);f=o(f-m/y)}return a(f)};return l.isStepper=!1,l},hL=function(){return hde(...fde(...arguments))},pde=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,a=(s,o,l)=>{var u=-(s-o)*n,d=l*r,f=l+(u-d)*i/1e3,p=l*i/1e3+s;return Math.abs(p-o)<v1&&Math.abs(f)<v1?[o,0]:[p,f]};return a.isStepper=!0,a.dt=i,a},mde=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return hL(t);case"spring":return pde();default:if(t.split("(")[0]==="cubic-bezier")return hL(t)}return typeof t=="function"?t:null};function gde(t){var e,n=()=>null,r=!1,i=null,a=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,[l,...u]=o;if(typeof l=="number"){i=t.setTimeout(a.bind(null,u),l);return}a(l),i=t.setTimeout(a.bind(null,u));return}typeof s=="string"&&(e=s,n(e)),typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),a(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}class vde{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function yde(){return gde(new vde)}var xde=E.createContext(yde);function bde(t,e){var n=E.useContext(xde);return E.useMemo(()=>e??n(t),[t,e,n])}var _de=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),cx={isSsr:_de()},wde={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},pL={t:0},TC={t:1};function g2(t){var e=qi(t,wde),{isActive:n,canBegin:r,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:l,children:u}=e,d=n==="auto"?!cx.isSsr:n,f=bde(e.animationId,e.animationManager),[p,m]=E.useState(d?pL:TC),y=E.useRef(null);return E.useEffect(()=>{d||m(TC)},[d]),E.useEffect(()=>{if(!d||!r)return ix;var _=cde(pL,TC,mde(a),i,m,f.getTimeoutController()),v=()=>{y.current=_()};return f.start([l,s,v,i,o]),()=>{f.stop(),y.current&&y.current(),o()}},[d,r,i,a,s,l,o,f]),u(p.t)}function v2(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=E.useRef(py(e)),r=E.useRef(t);return r.current!==t&&(n.current=py(e),r.current=t),n.current}var Sde=["radius"],Ede=["radius"],mL,gL,vL,yL,xL,bL,_L,wL,SL,EL;function ML(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function CL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ML(Object(n),!0).forEach(function(r){Mde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ML(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mde(t,e,n){return(e=Cde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cde(t){var e=Nde(t,"string");return typeof e=="symbol"?e:e+""}function Nde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function y1(){return y1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},y1.apply(null,arguments)}function NL(t,e){if(t==null)return{};var n,r,i=Ade(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ade(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function wc(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var AL=(t,e,n,r,i)=>{var a=vf(n),s=vf(r),o=Math.min(Math.abs(a)/2,Math.abs(s)/2),l=s>=0?1:-1,u=a>=0?1:-1,d=s>=0&&a>=0||s<0&&a<0?1:0,f;if(o>0&&i instanceof Array){for(var p=[0,0,0,0],m=0,y=4;m<y;m++)p[m]=i[m]>o?o:i[m];f=Jr(mL||(mL=wc(["M",",",""])),t,e+l*p[0]),p[0]>0&&(f+=Jr(gL||(gL=wc(["A ",",",",0,0,",",",",",""])),p[0],p[0],d,t+u*p[0],e)),f+=Jr(vL||(vL=wc(["L ",",",""])),t+n-u*p[1],e),p[1]>0&&(f+=Jr(yL||(yL=wc(["A ",",",",0,0,",`,
        `,",",""])),p[1],p[1],d,t+n,e+l*p[1])),f+=Jr(xL||(xL=wc(["L ",",",""])),t+n,e+r-l*p[2]),p[2]>0&&(f+=Jr(bL||(bL=wc(["A ",",",",0,0,",`,
        `,",",""])),p[2],p[2],d,t+n-u*p[2],e+r)),f+=Jr(_L||(_L=wc(["L ",",",""])),t+u*p[3],e+r),p[3]>0&&(f+=Jr(wL||(wL=wc(["A ",",",",0,0,",`,
        `,",",""])),p[3],p[3],d,t,e+r-l*p[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var _=Math.min(o,i);f=Jr(SL||(SL=wc(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+l*_,_,_,d,t+u*_,e,t+n-u*_,e,_,_,d,t+n,e+l*_,t+n,e+r-l*_,_,_,d,t+n-u*_,e+r,t+u*_,e+r,_,_,d,t,e+r-l*_)}else f=Jr(EL||(EL=wc(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return f},TL={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},BH=t=>{var e=qi(t,TL),n=E.useRef(null),[r,i]=E.useState(-1);E.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var se=n.current.getTotalLength();se&&i(se)}catch{}},[]);var{x:a,y:s,width:o,height:l,radius:u,className:d}=e,{animationEasing:f,animationDuration:p,animationBegin:m,isAnimationActive:y,isUpdateAnimationActive:_}=e,v=E.useRef(o),w=E.useRef(l),M=E.useRef(a),C=E.useRef(s),N=E.useMemo(()=>({x:a,y:s,width:o,height:l,radius:u}),[a,s,o,l,u]),P=v2(N,"rectangle-");if(a!==+a||s!==+s||o!==+o||l!==+l||o===0||l===0)return null;var R=nn("recharts-rectangle",d);if(!_){var k=ws(e),{radius:U}=k,I=NL(k,Sde);return E.createElement("path",y1({},I,{x:vf(a),y:vf(s),width:vf(o),height:vf(l),radius:typeof u=="number"?u:void 0,className:R,d:AL(a,s,o,l,u)}))}var L=v.current,z=w.current,O=M.current,q=C.current,Y="0px ".concat(r===-1?1:r,"px"),X="".concat(r,"px 0px"),ee=IH(["strokeDasharray"],p,typeof f=="string"?f:TL.animationEasing);return E.createElement(g2,{animationId:P,key:P,canBegin:r>0,duration:p,easing:f,isActive:_,begin:m},se=>{var W=Ta(L,o,se),$=Ta(z,l,se),G=Ta(O,a,se),j=Ta(q,s,se);n.current&&(v.current=W,w.current=$,M.current=G,C.current=j);var B;y?se>0?B={transition:ee,strokeDasharray:X}:B={strokeDasharray:Y}:B={strokeDasharray:X};var ae=ws(e),{radius:re}=ae,de=NL(ae,Ede);return E.createElement("path",y1({},de,{radius:typeof u=="number"?u:void 0,className:R,d:AL(G,j,W,$,u),ref:n,style:CL(CL({},B),e.style)}))})};function PL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PL(Object(n),!0).forEach(function(r){Tde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tde(t,e,n){return(e=Pde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pde(t){var e=Rde(t,"string");return typeof e=="symbol"?e:e+""}function Rde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var x1=Math.PI/180,Dde=t=>t*180/Math.PI,Di=(t,e,n,r)=>({x:t+Math.cos(-x1*r)*n,y:e+Math.sin(-x1*r)*n}),zH=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},kde=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return Math.sqrt((n-i)**2+(r-a)**2)},jde=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:a}=e,s=kde({x:n,y:r},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(n-i)/s,l=Math.acos(o);return r>a&&(l=2*Math.PI-l),{radius:s,angle:Dde(l),angleInRadian:l}},Ode=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:n-a*360}},Ide=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return t+s*360},Lde=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:a}=jde({x:n,y:r},e),{innerRadius:s,outerRadius:o}=e;if(i<s||i>o||i===0)return null;var{startAngle:l,endAngle:u}=Ode(e),d=a,f;if(l<=u){for(;d>u;)d-=360;for(;d<l;)d+=360;f=d>=l&&d<=u}else{for(;d>l;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=l}return f?RL(RL({},e),{},{radius:i,angle:Ide(d,e)}):null};function HH(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:a}=t,s=Di(e,n,r,i),o=Di(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}var DL,kL,jL,OL,IL,LL,FL;function fT(){return fT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fT.apply(null,arguments)}function Hh(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var Fde=(t,e)=>{var n=Qa(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},Kb=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:l}=t,u=o*(s?1:-1)+r,d=Math.asin(o/u)/x1,f=l?i:i+a*d,p=Di(e,n,u,f),m=Di(e,n,r,f),y=l?i-a*d:i,_=Di(e,n,u*Math.cos(d*x1),y);return{center:p,circleTangency:m,lineTangency:_,theta:d}},VH=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:s}=t,o=Fde(a,s),l=a+o,u=Di(e,n,i,a),d=Di(e,n,i,l),f=Jr(DL||(DL=Hh(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,i,i,+(Math.abs(o)>180),+(a>l),d.x,d.y);if(r>0){var p=Di(e,n,r,a),m=Di(e,n,r,l);f+=Jr(kL||(kL=Hh(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),m.x,m.y,r,r,+(Math.abs(o)>180),+(a<=l),p.x,p.y)}else f+=Jr(jL||(jL=Hh(["L ",","," Z"])),e,n);return f},Ude=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:l,endAngle:u}=t,d=Qa(u-l),{circleTangency:f,lineTangency:p,theta:m}=Kb({cx:e,cy:n,radius:i,angle:l,sign:d,cornerRadius:a,cornerIsExternal:o}),{circleTangency:y,lineTangency:_,theta:v}=Kb({cx:e,cy:n,radius:i,angle:u,sign:-d,cornerRadius:a,cornerIsExternal:o}),w=o?Math.abs(l-u):Math.abs(l-u)-m-v;if(w<0)return s?Jr(OL||(OL=Hh(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),p.x,p.y,a,a,a*2,a,a,-a*2):VH({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:u});var M=Jr(IL||(IL=Hh(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),p.x,p.y,a,a,+(d<0),f.x,f.y,i,i,+(w>180),+(d<0),y.x,y.y,a,a,+(d<0),_.x,_.y);if(r>0){var{circleTangency:C,lineTangency:N,theta:P}=Kb({cx:e,cy:n,radius:r,angle:l,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:R,lineTangency:k,theta:U}=Kb({cx:e,cy:n,radius:r,angle:u,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),I=o?Math.abs(l-u):Math.abs(l-u)-P-U;if(I<0&&a===0)return"".concat(M,"L").concat(e,",").concat(n,"Z");M+=Jr(LL||(LL=Hh(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),k.x,k.y,a,a,+(d<0),R.x,R.y,r,r,+(I>180),+(d>0),C.x,C.y,a,a,+(d<0),N.x,N.y)}else M+=Jr(FL||(FL=Hh(["L",",","Z"])),e,n);return M},Bde={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},WH=t=>{var e=qi(t,Bde),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d,className:f}=e;if(a<i||u===d)return null;var p=nn("recharts-sector",f),m=a-i,y=No(s,m,0,!0),_;return y>0&&Math.abs(u-d)<360?_=Ude({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(y,m/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d}):_=VH({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:d}),E.createElement("path",fT({},ws(e),{className:p,d:_}))};function zde(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(_8(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:s,angle:o}=e,l=Di(r,i,a,o),u=Di(r,i,s,o);return[{x:l.x,y:l.y},{x:u.x,y:u.y}]}return HH(e)}}var PC={},RC={},DC={},UL;function Hde(){return UL||(UL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=k8();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(DC)),DC}var BL;function Vde(){return BL||(BL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Hde();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(RC)),RC}var zL;function Wde(){return zL||(zL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=j8(),n=Vde();function r(i,a,s){s&&typeof s!="number"&&e.isIterateeCall(i,a,s)&&(a=s=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),s=s===void 0?i<a?1:-1:n.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),l=new Array(o);for(let u=0;u<o;u++)l[u]=i,i+=s;return l}t.range=r})(PC)),PC}var kC,HL;function Gde(){return HL||(HL=1,kC=Wde().range),kC}var $de=Gde();const GH=Zl($de);function _f(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Yde(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function cR(t){let e,n,r;t.length!==2?(e=_f,n=(o,l)=>_f(t(o),l),r=(o,l)=>t(o)-l):(e=t===_f||t===Yde?t:qde,n=t,r=t);function i(o,l,u=0,d=o.length){if(u<d){if(e(l,l)!==0)return d;do{const f=u+d>>>1;n(o[f],l)<0?u=f+1:d=f}while(u<d)}return u}function a(o,l,u=0,d=o.length){if(u<d){if(e(l,l)!==0)return d;do{const f=u+d>>>1;n(o[f],l)<=0?u=f+1:d=f}while(u<d)}return u}function s(o,l,u=0,d=o.length){const f=i(o,l,u,d-1);return f>u&&r(o[f-1],l)>-r(o[f],l)?f-1:f}return{left:i,center:s,right:a}}function qde(){return 0}function $H(t){return t===null?NaN:+t}function*Xde(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Kde=cR(_f),ux=Kde.right;cR($H).center;class VL extends Map{constructor(e,n=Jde){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(WL(this,e))}has(e){return super.has(WL(this,e))}set(e,n){return super.set(Zde(this,e),n)}delete(e){return super.delete(Qde(this,e))}}function WL({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Zde({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Qde({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Jde(t){return t!==null&&typeof t=="object"?t.valueOf():t}function efe(t=_f){if(t===_f)return YH;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function YH(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const tfe=Math.sqrt(50),nfe=Math.sqrt(10),rfe=Math.sqrt(2);function b1(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=tfe?10:a>=nfe?5:a>=rfe?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),l=Math.round(e*u),o/u<t&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),l=Math.round(e/u),o*u<t&&++o,l*u>e&&--l),l<o&&.5<=n&&n<2?b1(t,e,n*2):[o,l,u]}function hT(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?b1(e,t,n):b1(t,e,n);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)l[u]=(a-u)/-s;else for(let u=0;u<o;++u)l[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)l[u]=(i+u)/-s;else for(let u=0;u<o;++u)l[u]=(i+u)*s;return l}function pT(t,e,n){return e=+e,t=+t,n=+n,b1(t,e,n)[2]}function mT(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?pT(e,t,n):pT(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function GL(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function $L(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function qH(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?YH:efe(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,d=Math.log(l),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(l-f)/l)*(u-l/2<0?-1:1),m=Math.max(n,Math.floor(e-u*f/l+p)),y=Math.min(r,Math.floor(e+(l-u)*f/l+p));qH(t,e,m,y,i)}const a=t[e];let s=n,o=r;for(p0(t,n,e),i(t[r],a)>0&&p0(t,n,r);s<o;){for(p0(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?p0(t,n,o):(++o,p0(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function p0(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function ife(t,e,n){if(t=Float64Array.from(Xde(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return $L(t);if(e>=1)return GL(t);var r,i=(r-1)*e,a=Math.floor(i),s=GL(qH(t,a).subarray(0,a+1)),o=$L(t.subarray(a+1));return s+(o-s)*(i-a)}}function afe(t,e,n=$H){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function sfe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function al(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function vd(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const gT=Symbol("implicit");function uR(){var t=new VL,e=[],n=[],r=gT;function i(a){let s=t.get(a);if(s===void 0){if(r!==gT)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new VL;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return uR(e,n).unknown(r)},al.apply(i,arguments),i}function dR(){var t=uR().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,l=0,u=0,d=.5;delete t.unknown;function f(){var p=e().length,m=i<r,y=m?i:r,_=m?r:i;a=(_-y)/Math.max(1,p-l+u*2),o&&(a=Math.floor(a)),y+=(_-y-a*(p-l))*d,s=a*(1-l),o&&(y=Math.round(y),s=Math.round(s));var v=sfe(p).map(function(w){return y+a*w});return n(m?v.reverse():v)}return t.domain=function(p){return arguments.length?(e(p),f()):e()},t.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,o=!0,f()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(p){return arguments.length?(o=!!p,f()):o},t.padding=function(p){return arguments.length?(l=Math.min(1,u=+p),f()):l},t.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),f()):l},t.paddingOuter=function(p){return arguments.length?(u=+p,f()):u},t.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},t.copy=function(){return dR(e(),[r,i]).round(o).paddingInner(l).paddingOuter(u).align(d)},al.apply(f(),arguments)}function XH(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return XH(e())},t}function ofe(){return XH(dR.apply(null,arguments).paddingInner(1))}function fR(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function KH(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function dx(){}var wy=.7,_1=1/wy,bg="\\s*([+-]?\\d+)\\s*",Sy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lfe=/^#([0-9a-f]{3,8})$/,cfe=new RegExp(`^rgb\\(${bg},${bg},${bg}\\)$`),ufe=new RegExp(`^rgb\\(${Bc},${Bc},${Bc}\\)$`),dfe=new RegExp(`^rgba\\(${bg},${bg},${bg},${Sy}\\)$`),ffe=new RegExp(`^rgba\\(${Bc},${Bc},${Bc},${Sy}\\)$`),hfe=new RegExp(`^hsl\\(${Sy},${Bc},${Bc}\\)$`),pfe=new RegExp(`^hsla\\(${Sy},${Bc},${Bc},${Sy}\\)$`),YL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fR(dx,Ey,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:qL,formatHex:qL,formatHex8:mfe,formatHsl:gfe,formatRgb:XL,toString:XL});function qL(){return this.rgb().formatHex()}function mfe(){return this.rgb().formatHex8()}function gfe(){return ZH(this).formatHsl()}function XL(){return this.rgb().formatRgb()}function Ey(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=lfe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?KL(e):n===3?new qs(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Zb(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Zb(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=cfe.exec(t))?new qs(e[1],e[2],e[3],1):(e=ufe.exec(t))?new qs(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=dfe.exec(t))?Zb(e[1],e[2],e[3],e[4]):(e=ffe.exec(t))?Zb(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=hfe.exec(t))?JL(e[1],e[2]/100,e[3]/100,1):(e=pfe.exec(t))?JL(e[1],e[2]/100,e[3]/100,e[4]):YL.hasOwnProperty(t)?KL(YL[t]):t==="transparent"?new qs(NaN,NaN,NaN,0):null}function KL(t){return new qs(t>>16&255,t>>8&255,t&255,1)}function Zb(t,e,n,r){return r<=0&&(t=e=n=NaN),new qs(t,e,n,r)}function vfe(t){return t instanceof dx||(t=Ey(t)),t?(t=t.rgb(),new qs(t.r,t.g,t.b,t.opacity)):new qs}function vT(t,e,n,r){return arguments.length===1?vfe(t):new qs(t,e,n,r??1)}function qs(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}fR(qs,vT,KH(dx,{brighter(t){return t=t==null?_1:Math.pow(_1,t),new qs(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?wy:Math.pow(wy,t),new qs(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new qs(ep(this.r),ep(this.g),ep(this.b),w1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ZL,formatHex:ZL,formatHex8:yfe,formatRgb:QL,toString:QL}));function ZL(){return`#${Vh(this.r)}${Vh(this.g)}${Vh(this.b)}`}function yfe(){return`#${Vh(this.r)}${Vh(this.g)}${Vh(this.b)}${Vh((isNaN(this.opacity)?1:this.opacity)*255)}`}function QL(){const t=w1(this.opacity);return`${t===1?"rgb(":"rgba("}${ep(this.r)}, ${ep(this.g)}, ${ep(this.b)}${t===1?")":`, ${t})`}`}function w1(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ep(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Vh(t){return t=ep(t),(t<16?"0":"")+t.toString(16)}function JL(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Hl(t,e,n,r)}function ZH(t){if(t instanceof Hl)return new Hl(t.h,t.s,t.l,t.opacity);if(t instanceof dx||(t=Ey(t)),!t)return new Hl;if(t instanceof Hl)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,l=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new Hl(s,o,l,t.opacity)}function xfe(t,e,n,r){return arguments.length===1?ZH(t):new Hl(t,e,n,r??1)}function Hl(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}fR(Hl,xfe,KH(dx,{brighter(t){return t=t==null?_1:Math.pow(_1,t),new Hl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?wy:Math.pow(wy,t),new Hl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new qs(jC(t>=240?t-240:t+120,i,r),jC(t,i,r),jC(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Hl(e4(this.h),Qb(this.s),Qb(this.l),w1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=w1(this.opacity);return`${t===1?"hsl(":"hsla("}${e4(this.h)}, ${Qb(this.s)*100}%, ${Qb(this.l)*100}%${t===1?")":`, ${t})`}`}}));function e4(t){return t=(t||0)%360,t<0?t+360:t}function Qb(t){return Math.max(0,Math.min(1,t||0))}function jC(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const hR=t=>()=>t;function bfe(t,e){return function(n){return t+n*e}}function _fe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function wfe(t){return(t=+t)==1?QH:function(e,n){return n-e?_fe(e,n,t):hR(isNaN(e)?n:e)}}function QH(t,e){var n=e-t;return n?bfe(t,n):hR(isNaN(t)?e:t)}const t4=(function t(e){var n=wfe(e);function r(i,a){var s=n((i=vT(i)).r,(a=vT(a)).r),o=n(i.g,a.g),l=n(i.b,a.b),u=QH(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=o(d),i.b=l(d),i.opacity=u(d),i+""}}return r.gamma=t,r})(1);function Sfe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Efe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Mfe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=Qg(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function Cfe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function S1(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Nfe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Qg(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var yT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,OC=new RegExp(yT.source,"g");function Afe(t){return function(){return t}}function Tfe(t){return function(e){return t(e)+""}}function Pfe(t,e){var n=yT.lastIndex=OC.lastIndex=0,r,i,a,s=-1,o=[],l=[];for(t=t+"",e=e+"";(r=yT.exec(t))&&(i=OC.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:S1(r,i)})),n=OC.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?Tfe(l[0].x):Afe(e):(e=l.length,function(u){for(var d=0,f;d<e;++d)o[(f=l[d]).i]=f.x(u);return o.join("")})}function Qg(t,e){var n=typeof e,r;return e==null||n==="boolean"?hR(e):(n==="number"?S1:n==="string"?(r=Ey(e))?(e=r,t4):Pfe:e instanceof Ey?t4:e instanceof Date?Cfe:Efe(e)?Sfe:Array.isArray(e)?Mfe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Nfe:S1)(t,e)}function pR(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Rfe(t,e){e===void 0&&(e=t,t=Qg);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function Dfe(t){return function(){return t}}function E1(t){return+t}var n4=[0,1];function bs(t){return t}function xT(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Dfe(isNaN(e)?NaN:.5)}function kfe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function jfe(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=xT(i,r),a=n(s,a)):(r=xT(r,i),a=n(a,s)),function(o){return a(r(o))}}function Ofe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=xT(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var l=ux(t,o,1,r)-1;return a[l](i[l](o))}}function fx(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function y2(){var t=n4,e=n4,n=Qg,r,i,a,s=bs,o,l,u;function d(){var p=Math.min(t.length,e.length);return s!==bs&&(s=kfe(t[0],t[p-1])),o=p>2?Ofe:jfe,l=u=null,f}function f(p){return p==null||isNaN(p=+p)?a:(l||(l=o(t.map(r),e,n)))(r(s(p)))}return f.invert=function(p){return s(i((u||(u=o(e,t.map(r),S1)))(p)))},f.domain=function(p){return arguments.length?(t=Array.from(p,E1),d()):t.slice()},f.range=function(p){return arguments.length?(e=Array.from(p),d()):e.slice()},f.rangeRound=function(p){return e=Array.from(p),n=pR,d()},f.clamp=function(p){return arguments.length?(s=p?!0:bs,d()):s!==bs},f.interpolate=function(p){return arguments.length?(n=p,d()):n},f.unknown=function(p){return arguments.length?(a=p,f):a},function(p,m){return r=p,i=m,d()}}function mR(){return y2()(bs,bs)}function Ife(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function M1(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ig(t){return t=M1(Math.abs(t)),t?t[1]:NaN}function Lfe(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),a.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function Ffe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Ufe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function My(t){if(!(e=Ufe.exec(t)))throw new Error("invalid format: "+t);var e;return new gR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}My.prototype=gR.prototype;function gR(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}gR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Bfe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var C1;function zfe(t,e){var n=M1(t,e);if(!n)return C1=void 0,t.toPrecision(e);var r=n[0],i=n[1],a=i-(C1=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+M1(t,Math.max(0,e+a-1))[0]}function r4(t,e){var n=M1(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const i4={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ife,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>r4(t*100,e),r:r4,s:zfe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function a4(t){return t}var s4=Array.prototype.map,o4=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Hfe(t){var e=t.grouping===void 0||t.thousands===void 0?a4:Lfe(s4.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?a4:Ffe(s4.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f,p){f=My(f);var m=f.fill,y=f.align,_=f.sign,v=f.symbol,w=f.zero,M=f.width,C=f.comma,N=f.precision,P=f.trim,R=f.type;R==="n"?(C=!0,R="g"):i4[R]||(N===void 0&&(N=12),P=!0,R="g"),(w||m==="0"&&y==="=")&&(w=!0,m="0",y="=");var k=(p?.prefix!==void 0?p.prefix:"")+(v==="$"?n:v==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():""),U=(v==="$"?r:/[%p]/.test(R)?s:"")+(p?.suffix!==void 0?p.suffix:""),I=i4[R],L=/[defgprs%]/.test(R);N=N===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function z(O){var q=k,Y=U,X,ee,se;if(R==="c")Y=I(O)+Y,O="";else{O=+O;var W=O<0||1/O<0;if(O=isNaN(O)?l:I(Math.abs(O),N),P&&(O=Bfe(O)),W&&+O==0&&_!=="+"&&(W=!1),q=(W?_==="("?_:o:_==="-"||_==="("?"":_)+q,Y=(R==="s"&&!isNaN(O)&&C1!==void 0?o4[8+C1/3]:"")+Y+(W&&_==="("?")":""),L){for(X=-1,ee=O.length;++X<ee;)if(se=O.charCodeAt(X),48>se||se>57){Y=(se===46?i+O.slice(X+1):O.slice(X))+Y,O=O.slice(0,X);break}}}C&&!w&&(O=e(O,1/0));var $=q.length+O.length+Y.length,G=$<M?new Array(M-$+1).join(m):"";switch(C&&w&&(O=e(G+O,G.length?M-Y.length:1/0),G=""),y){case"<":O=q+O+Y+G;break;case"=":O=q+G+O+Y;break;case"^":O=G.slice(0,$=G.length>>1)+q+O+Y+G.slice($);break;default:O=G+q+O+Y;break}return a(O)}return z.toString=function(){return f+""},z}function d(f,p){var m=Math.max(-8,Math.min(8,Math.floor(Ig(p)/3)))*3,y=Math.pow(10,-m),_=u((f=My(f),f.type="f",f),{suffix:o4[8+m/3]});return function(v){return _(y*v)}}return{format:u,formatPrefix:d}}var Jb,vR,JH;Vfe({thousands:",",grouping:[3],currency:["$",""]});function Vfe(t){return Jb=Hfe(t),vR=Jb.format,JH=Jb.formatPrefix,Jb}function Wfe(t){return Math.max(0,-Ig(Math.abs(t)))}function Gfe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ig(e)/3)))*3-Ig(Math.abs(t)))}function $fe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ig(e)-Ig(t))+1}function eV(t,e,n,r){var i=mT(t,e,n),a;switch(r=My(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Gfe(i,s))&&(r.precision=a),JH(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=$fe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Wfe(i))&&(r.precision=a-(r.type==="%")*2);break}}return vR(r)}function Tf(t){var e=t.domain;return t.ticks=function(n){var r=e();return hT(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return eV(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],l,u,d=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);d-- >0;){if(u=pT(s,o,n),u===l)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;l=u}return t},t}function tV(){var t=mR();return t.copy=function(){return fx(t,tV())},al.apply(t,arguments),Tf(t)}function nV(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,E1),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return nV(t).unknown(e)},t=arguments.length?Array.from(t,E1):[0,1],Tf(n)}function rV(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function l4(t){return Math.log(t)}function c4(t){return Math.exp(t)}function Yfe(t){return-Math.log(-t)}function qfe(t){return-Math.exp(-t)}function Xfe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Kfe(t){return t===10?Xfe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Zfe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function u4(t){return(e,n)=>-t(-e,n)}function yR(t){const e=t(l4,c4),n=e.domain;let r=10,i,a;function s(){return i=Zfe(r),a=Kfe(r),n()[0]<0?(i=u4(i),a=u4(a),t(Yfe,qfe)):t(l4,c4),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const l=n();let u=l[0],d=l[l.length-1];const f=d<u;f&&([u,d]=[d,u]);let p=i(u),m=i(d),y,_;const v=o==null?10:+o;let w=[];if(!(r%1)&&m-p<v){if(p=Math.floor(p),m=Math.ceil(m),u>0){for(;p<=m;++p)for(y=1;y<r;++y)if(_=p<0?y/a(-p):y*a(p),!(_<u)){if(_>d)break;w.push(_)}}else for(;p<=m;++p)for(y=r-1;y>=1;--y)if(_=p>0?y/a(-p):y*a(p),!(_<u)){if(_>d)break;w.push(_)}w.length*2<v&&(w=hT(u,d,v))}else w=hT(p,m,Math.min(m-p,v)).map(a);return f?w.reverse():w},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=My(l)).precision==null&&(l.trim=!0),l=vR(l)),o===1/0)return l;const u=Math.max(1,r*o/e.ticks().length);return d=>{let f=d/a(Math.round(i(d)));return f*r<r-.5&&(f*=r),f<=u?l(d):""}},e.nice=()=>n(rV(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function iV(){const t=yR(y2()).domain([1,10]);return t.copy=()=>fx(t,iV()).base(t.base()),al.apply(t,arguments),t}function d4(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function f4(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function xR(t){var e=1,n=t(d4(e),f4(e));return n.constant=function(r){return arguments.length?t(d4(e=+r),f4(e)):e},Tf(n)}function aV(){var t=xR(y2());return t.copy=function(){return fx(t,aV()).constant(t.constant())},al.apply(t,arguments)}function h4(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Qfe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Jfe(t){return t<0?-t*t:t*t}function bR(t){var e=t(bs,bs),n=1;function r(){return n===1?t(bs,bs):n===.5?t(Qfe,Jfe):t(h4(n),h4(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Tf(e)}function _R(){var t=bR(y2());return t.copy=function(){return fx(t,_R()).exponent(t.exponent())},al.apply(t,arguments),t}function ehe(){return _R.apply(null,arguments).exponent(.5)}function p4(t){return Math.sign(t)*t*t}function the(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function sV(){var t=mR(),e=[0,1],n=!1,r;function i(a){var s=the(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(p4(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,E1)).map(p4)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return sV(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},al.apply(i,arguments),Tf(i)}function oV(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=afe(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[ux(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(_f),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return oV().domain(t).range(e).unknown(r)},al.apply(a,arguments)}function lV(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[ux(r,l,0,n)]:a}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return lV().domain([t,e]).range(i).unknown(a)},al.apply(Tf(s),arguments)}function cV(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[ux(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return cV().domain(t).range(e).unknown(n)},al.apply(i,arguments)}const IC=new Date,LC=new Date;function Xi(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const l=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let u;do l.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return l},i.filter=a=>Xi(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(IC.setTime(+a),LC.setTime(+s),t(IC),t(LC),Math.floor(n(IC,LC))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const N1=Xi(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);N1.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Xi(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):N1);N1.range;const Wu=1e3,Qo=Wu*60,Gu=Qo*60,rd=Gu*24,wR=rd*7,m4=rd*30,FC=rd*365,Wh=Xi(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Wu)},(t,e)=>(e-t)/Wu,t=>t.getUTCSeconds());Wh.range;const SR=Xi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Wu)},(t,e)=>{t.setTime(+t+e*Qo)},(t,e)=>(e-t)/Qo,t=>t.getMinutes());SR.range;const ER=Xi(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Qo)},(t,e)=>(e-t)/Qo,t=>t.getUTCMinutes());ER.range;const MR=Xi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Wu-t.getMinutes()*Qo)},(t,e)=>{t.setTime(+t+e*Gu)},(t,e)=>(e-t)/Gu,t=>t.getHours());MR.range;const CR=Xi(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Gu)},(t,e)=>(e-t)/Gu,t=>t.getUTCHours());CR.range;const hx=Xi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Qo)/rd,t=>t.getDate()-1);hx.range;const x2=Xi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/rd,t=>t.getUTCDate()-1);x2.range;const uV=Xi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/rd,t=>Math.floor(t/rd));uV.range;function Rp(t){return Xi(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Qo)/wR)}const b2=Rp(0),A1=Rp(1),nhe=Rp(2),rhe=Rp(3),Lg=Rp(4),ihe=Rp(5),ahe=Rp(6);b2.range;A1.range;nhe.range;rhe.range;Lg.range;ihe.range;ahe.range;function Dp(t){return Xi(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/wR)}const _2=Dp(0),T1=Dp(1),she=Dp(2),ohe=Dp(3),Fg=Dp(4),lhe=Dp(5),che=Dp(6);_2.range;T1.range;she.range;ohe.range;Fg.range;lhe.range;che.range;const NR=Xi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());NR.range;const AR=Xi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());AR.range;const id=Xi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());id.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Xi(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});id.range;const ad=Xi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ad.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Xi(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});ad.range;function dV(t,e,n,r,i,a){const s=[[Wh,1,Wu],[Wh,5,5*Wu],[Wh,15,15*Wu],[Wh,30,30*Wu],[a,1,Qo],[a,5,5*Qo],[a,15,15*Qo],[a,30,30*Qo],[i,1,Gu],[i,3,3*Gu],[i,6,6*Gu],[i,12,12*Gu],[r,1,rd],[r,2,2*rd],[n,1,wR],[e,1,m4],[e,3,3*m4],[t,1,FC]];function o(u,d,f){const p=d<u;p&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:l(u,d,f),y=m?m.range(u,+d+1):[];return p?y.reverse():y}function l(u,d,f){const p=Math.abs(d-u)/f,m=cR(([,,v])=>v).right(s,p);if(m===s.length)return t.every(mT(u/FC,d/FC,f));if(m===0)return N1.every(Math.max(mT(u,d,f),1));const[y,_]=s[p/s[m-1][2]<s[m][2]/p?m-1:m];return y.every(_)}return[o,l]}const[uhe,dhe]=dV(ad,AR,_2,uV,CR,ER),[fhe,hhe]=dV(id,NR,b2,hx,MR,SR);function UC(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function BC(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function m0(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function phe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,l=t.shortMonths,u=g0(i),d=v0(i),f=g0(a),p=v0(a),m=g0(s),y=v0(s),_=g0(o),v=v0(o),w=g0(l),M=v0(l),C={a:se,A:W,b:$,B:G,c:null,d:_4,e:_4,f:Lhe,g:Yhe,G:Xhe,H:jhe,I:Ohe,j:Ihe,L:fV,m:Fhe,M:Uhe,p:j,q:B,Q:E4,s:M4,S:Bhe,u:zhe,U:Hhe,V:Vhe,w:Whe,W:Ghe,x:null,X:null,y:$he,Y:qhe,Z:Khe,"%":S4},N={a:ae,A:re,b:de,B:ce,c:null,d:w4,e:w4,f:epe,g:upe,G:fpe,H:Zhe,I:Qhe,j:Jhe,L:pV,m:tpe,M:npe,p:ie,q:le,Q:E4,s:M4,S:rpe,u:ipe,U:ape,V:spe,w:ope,W:lpe,x:null,X:null,y:cpe,Y:dpe,Z:hpe,"%":S4},P={a:L,A:z,b:O,B:q,c:Y,d:x4,e:x4,f:Phe,g:y4,G:v4,H:b4,I:b4,j:Che,L:The,m:Mhe,M:Nhe,p:I,q:Ehe,Q:Dhe,s:khe,S:Ahe,u:xhe,U:bhe,V:_he,w:yhe,W:whe,x:X,X:ee,y:y4,Y:v4,Z:She,"%":Rhe};C.x=R(n,C),C.X=R(r,C),C.c=R(e,C),N.x=R(n,N),N.X=R(r,N),N.c=R(e,N);function R(fe,Ne){return function(Se){var Z=[],xe=-1,oe=0,tt=fe.length,ke,st,Ce;for(Se instanceof Date||(Se=new Date(+Se));++xe<tt;)fe.charCodeAt(xe)===37&&(Z.push(fe.slice(oe,xe)),(st=g4[ke=fe.charAt(++xe)])!=null?ke=fe.charAt(++xe):st=ke==="e"?" ":"0",(Ce=Ne[ke])&&(ke=Ce(Se,st)),Z.push(ke),oe=xe+1);return Z.push(fe.slice(oe,xe)),Z.join("")}}function k(fe,Ne){return function(Se){var Z=m0(1900,void 0,1),xe=U(Z,fe,Se+="",0),oe,tt;if(xe!=Se.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(Ne&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(oe=BC(m0(Z.y,0,1)),tt=oe.getUTCDay(),oe=tt>4||tt===0?T1.ceil(oe):T1(oe),oe=x2.offset(oe,(Z.V-1)*7),Z.y=oe.getUTCFullYear(),Z.m=oe.getUTCMonth(),Z.d=oe.getUTCDate()+(Z.w+6)%7):(oe=UC(m0(Z.y,0,1)),tt=oe.getDay(),oe=tt>4||tt===0?A1.ceil(oe):A1(oe),oe=hx.offset(oe,(Z.V-1)*7),Z.y=oe.getFullYear(),Z.m=oe.getMonth(),Z.d=oe.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),tt="Z"in Z?BC(m0(Z.y,0,1)).getUTCDay():UC(m0(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(tt+5)%7:Z.w+Z.U*7-(tt+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,BC(Z)):UC(Z)}}function U(fe,Ne,Se,Z){for(var xe=0,oe=Ne.length,tt=Se.length,ke,st;xe<oe;){if(Z>=tt)return-1;if(ke=Ne.charCodeAt(xe++),ke===37){if(ke=Ne.charAt(xe++),st=P[ke in g4?Ne.charAt(xe++):ke],!st||(Z=st(fe,Se,Z))<0)return-1}else if(ke!=Se.charCodeAt(Z++))return-1}return Z}function I(fe,Ne,Se){var Z=u.exec(Ne.slice(Se));return Z?(fe.p=d.get(Z[0].toLowerCase()),Se+Z[0].length):-1}function L(fe,Ne,Se){var Z=m.exec(Ne.slice(Se));return Z?(fe.w=y.get(Z[0].toLowerCase()),Se+Z[0].length):-1}function z(fe,Ne,Se){var Z=f.exec(Ne.slice(Se));return Z?(fe.w=p.get(Z[0].toLowerCase()),Se+Z[0].length):-1}function O(fe,Ne,Se){var Z=w.exec(Ne.slice(Se));return Z?(fe.m=M.get(Z[0].toLowerCase()),Se+Z[0].length):-1}function q(fe,Ne,Se){var Z=_.exec(Ne.slice(Se));return Z?(fe.m=v.get(Z[0].toLowerCase()),Se+Z[0].length):-1}function Y(fe,Ne,Se){return U(fe,e,Ne,Se)}function X(fe,Ne,Se){return U(fe,n,Ne,Se)}function ee(fe,Ne,Se){return U(fe,r,Ne,Se)}function se(fe){return s[fe.getDay()]}function W(fe){return a[fe.getDay()]}function $(fe){return l[fe.getMonth()]}function G(fe){return o[fe.getMonth()]}function j(fe){return i[+(fe.getHours()>=12)]}function B(fe){return 1+~~(fe.getMonth()/3)}function ae(fe){return s[fe.getUTCDay()]}function re(fe){return a[fe.getUTCDay()]}function de(fe){return l[fe.getUTCMonth()]}function ce(fe){return o[fe.getUTCMonth()]}function ie(fe){return i[+(fe.getUTCHours()>=12)]}function le(fe){return 1+~~(fe.getUTCMonth()/3)}return{format:function(fe){var Ne=R(fe+="",C);return Ne.toString=function(){return fe},Ne},parse:function(fe){var Ne=k(fe+="",!1);return Ne.toString=function(){return fe},Ne},utcFormat:function(fe){var Ne=R(fe+="",N);return Ne.toString=function(){return fe},Ne},utcParse:function(fe){var Ne=k(fe+="",!0);return Ne.toString=function(){return fe},Ne}}}var g4={"-":"",_:" ",0:"0"},fa=/^\s*\d+/,mhe=/^%/,ghe=/[\\^$*+?|[\]().{}]/g;function zn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function vhe(t){return t.replace(ghe,"\\$&")}function g0(t){return new RegExp("^(?:"+t.map(vhe).join("|")+")","i")}function v0(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function yhe(t,e,n){var r=fa.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function xhe(t,e,n){var r=fa.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function bhe(t,e,n){var r=fa.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function _he(t,e,n){var r=fa.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function whe(t,e,n){var r=fa.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function v4(t,e,n){var r=fa.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function y4(t,e,n){var r=fa.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function She(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ehe(t,e,n){var r=fa.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Mhe(t,e,n){var r=fa.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function x4(t,e,n){var r=fa.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Che(t,e,n){var r=fa.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function b4(t,e,n){var r=fa.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Nhe(t,e,n){var r=fa.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ahe(t,e,n){var r=fa.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function The(t,e,n){var r=fa.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Phe(t,e,n){var r=fa.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Rhe(t,e,n){var r=mhe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Dhe(t,e,n){var r=fa.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function khe(t,e,n){var r=fa.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function _4(t,e){return zn(t.getDate(),e,2)}function jhe(t,e){return zn(t.getHours(),e,2)}function Ohe(t,e){return zn(t.getHours()%12||12,e,2)}function Ihe(t,e){return zn(1+hx.count(id(t),t),e,3)}function fV(t,e){return zn(t.getMilliseconds(),e,3)}function Lhe(t,e){return fV(t,e)+"000"}function Fhe(t,e){return zn(t.getMonth()+1,e,2)}function Uhe(t,e){return zn(t.getMinutes(),e,2)}function Bhe(t,e){return zn(t.getSeconds(),e,2)}function zhe(t){var e=t.getDay();return e===0?7:e}function Hhe(t,e){return zn(b2.count(id(t)-1,t),e,2)}function hV(t){var e=t.getDay();return e>=4||e===0?Lg(t):Lg.ceil(t)}function Vhe(t,e){return t=hV(t),zn(Lg.count(id(t),t)+(id(t).getDay()===4),e,2)}function Whe(t){return t.getDay()}function Ghe(t,e){return zn(A1.count(id(t)-1,t),e,2)}function $he(t,e){return zn(t.getFullYear()%100,e,2)}function Yhe(t,e){return t=hV(t),zn(t.getFullYear()%100,e,2)}function qhe(t,e){return zn(t.getFullYear()%1e4,e,4)}function Xhe(t,e){var n=t.getDay();return t=n>=4||n===0?Lg(t):Lg.ceil(t),zn(t.getFullYear()%1e4,e,4)}function Khe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+zn(e/60|0,"0",2)+zn(e%60,"0",2)}function w4(t,e){return zn(t.getUTCDate(),e,2)}function Zhe(t,e){return zn(t.getUTCHours(),e,2)}function Qhe(t,e){return zn(t.getUTCHours()%12||12,e,2)}function Jhe(t,e){return zn(1+x2.count(ad(t),t),e,3)}function pV(t,e){return zn(t.getUTCMilliseconds(),e,3)}function epe(t,e){return pV(t,e)+"000"}function tpe(t,e){return zn(t.getUTCMonth()+1,e,2)}function npe(t,e){return zn(t.getUTCMinutes(),e,2)}function rpe(t,e){return zn(t.getUTCSeconds(),e,2)}function ipe(t){var e=t.getUTCDay();return e===0?7:e}function ape(t,e){return zn(_2.count(ad(t)-1,t),e,2)}function mV(t){var e=t.getUTCDay();return e>=4||e===0?Fg(t):Fg.ceil(t)}function spe(t,e){return t=mV(t),zn(Fg.count(ad(t),t)+(ad(t).getUTCDay()===4),e,2)}function ope(t){return t.getUTCDay()}function lpe(t,e){return zn(T1.count(ad(t)-1,t),e,2)}function cpe(t,e){return zn(t.getUTCFullYear()%100,e,2)}function upe(t,e){return t=mV(t),zn(t.getUTCFullYear()%100,e,2)}function dpe(t,e){return zn(t.getUTCFullYear()%1e4,e,4)}function fpe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Fg(t):Fg.ceil(t),zn(t.getUTCFullYear()%1e4,e,4)}function hpe(){return"+0000"}function S4(){return"%"}function E4(t){return+t}function M4(t){return Math.floor(+t/1e3)}var Rm,gV,vV;ppe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ppe(t){return Rm=phe(t),gV=Rm.format,Rm.parse,vV=Rm.utcFormat,Rm.utcParse,Rm}function mpe(t){return new Date(t)}function gpe(t){return t instanceof Date?+t:+new Date(+t)}function TR(t,e,n,r,i,a,s,o,l,u){var d=mR(),f=d.invert,p=d.domain,m=u(".%L"),y=u(":%S"),_=u("%I:%M"),v=u("%I %p"),w=u("%a %d"),M=u("%b %d"),C=u("%B"),N=u("%Y");function P(R){return(l(R)<R?m:o(R)<R?y:s(R)<R?_:a(R)<R?v:r(R)<R?i(R)<R?w:M:n(R)<R?C:N)(R)}return d.invert=function(R){return new Date(f(R))},d.domain=function(R){return arguments.length?p(Array.from(R,gpe)):p().map(mpe)},d.ticks=function(R){var k=p();return t(k[0],k[k.length-1],R??10)},d.tickFormat=function(R,k){return k==null?P:u(k)},d.nice=function(R){var k=p();return(!R||typeof R.range!="function")&&(R=e(k[0],k[k.length-1],R??10)),R?p(rV(k,R)):d},d.copy=function(){return fx(d,TR(t,e,n,r,i,a,s,o,l,u))},d}function vpe(){return al.apply(TR(fhe,hhe,id,NR,b2,hx,MR,SR,Wh,gV).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ype(){return al.apply(TR(uhe,dhe,ad,AR,_2,x2,CR,ER,Wh,vV).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function w2(){var t=0,e=1,n,r,i,a,s=bs,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(a(f)-n)*i,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(s=f,u):s};function d(f){return function(p){var m,y;return arguments.length?([m,y]=p,s=f(m,y),u):[s(0),s(1)]}}return u.range=d(Qg),u.rangeRound=d(pR),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return a=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),u}}function Pf(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function yV(){var t=Tf(w2()(bs));return t.copy=function(){return Pf(t,yV())},vd.apply(t,arguments)}function xV(){var t=yR(w2()).domain([1,10]);return t.copy=function(){return Pf(t,xV()).base(t.base())},vd.apply(t,arguments)}function bV(){var t=xR(w2());return t.copy=function(){return Pf(t,bV()).constant(t.constant())},vd.apply(t,arguments)}function PR(){var t=bR(w2());return t.copy=function(){return Pf(t,PR()).exponent(t.exponent())},vd.apply(t,arguments)}function xpe(){return PR.apply(null,arguments).exponent(.5)}function _V(){var t=[],e=bs;function n(r){if(r!=null&&!isNaN(r=+r))return e((ux(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(_f),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>ife(t,a/r))},n.copy=function(){return _V(e).domain(t)},vd.apply(n,arguments)}function S2(){var t=0,e=.5,n=1,r=1,i,a,s,o,l,u=bs,d,f=!1,p;function m(_){return isNaN(_=+_)?p:(_=.5+((_=+d(_))-a)*(r*_<r*a?o:l),u(f?Math.max(0,Math.min(1,_)):_))}m.domain=function(_){return arguments.length?([t,e,n]=_,i=d(t=+t),a=d(e=+e),s=d(n=+n),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,m):[t,e,n]},m.clamp=function(_){return arguments.length?(f=!!_,m):f},m.interpolator=function(_){return arguments.length?(u=_,m):u};function y(_){return function(v){var w,M,C;return arguments.length?([w,M,C]=v,u=Rfe(_,[w,M,C]),m):[u(0),u(.5),u(1)]}}return m.range=y(Qg),m.rangeRound=y(pR),m.unknown=function(_){return arguments.length?(p=_,m):p},function(_){return d=_,i=_(t),a=_(e),s=_(n),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,m}}function wV(){var t=Tf(S2()(bs));return t.copy=function(){return Pf(t,wV())},vd.apply(t,arguments)}function SV(){var t=yR(S2()).domain([.1,1,10]);return t.copy=function(){return Pf(t,SV()).base(t.base())},vd.apply(t,arguments)}function EV(){var t=xR(S2());return t.copy=function(){return Pf(t,EV()).constant(t.constant())},vd.apply(t,arguments)}function RR(){var t=bR(S2());return t.copy=function(){return Pf(t,RR()).exponent(t.exponent())},vd.apply(t,arguments)}function bpe(){return RR.apply(null,arguments).exponent(.5)}const U0=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:dR,scaleDiverging:wV,scaleDivergingLog:SV,scaleDivergingPow:RR,scaleDivergingSqrt:bpe,scaleDivergingSymlog:EV,scaleIdentity:nV,scaleImplicit:gT,scaleLinear:tV,scaleLog:iV,scaleOrdinal:uR,scalePoint:ofe,scalePow:_R,scaleQuantile:oV,scaleQuantize:lV,scaleRadial:sV,scaleSequential:yV,scaleSequentialLog:xV,scaleSequentialPow:PR,scaleSequentialQuantile:_V,scaleSequentialSqrt:xpe,scaleSequentialSymlog:bV,scaleSqrt:ehe,scaleSymlog:aV,scaleThreshold:cV,scaleTime:vpe,scaleUtc:ype,tickFormat:eV},Symbol.toStringTag,{value:"Module"}));var yd=t=>t.chartData,E2=Ge([yd],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),MV=(t,e,n,r)=>r?E2(t):yd(t),_pe=(t,e,n)=>n?E2(t):yd(t);function Ef(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(Dr(e)&&Dr(n))return!0}return!1}function C4(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function CV(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,a;if(Dr(n))i=n;else if(typeof n=="function")return;if(Dr(r))a=r;else if(typeof r=="function")return;var s=[i,a];if(Ef(s))return s}}function wpe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Ef(r))return C4(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,s,o;if(i==="auto")e!=null&&(s=Math.min(...e));else if(Ft(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e?.[0]))}catch{}else if(typeof i=="string"&&LI.test(i)){var l=LI.exec(i);if(l==null||l[1]==null||e==null)s=void 0;else{var u=+l[1];s=e[0]-u}}else s=e?.[0];if(a==="auto")e!=null&&(o=Math.max(...e));else if(Ft(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e?.[1]))}catch{}else if(typeof a=="string"&&FI.test(a)){var d=FI.exec(a);if(d==null||d[1]==null||e==null)o=void 0;else{var f=+d[1];o=e[1]+f}}else o=e?.[1];var p=[s,o];if(Ef(p))return e==null?p:C4(p,e,n)}}}var Jg=1e9,Spe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},kR,Pr=!0,nl="[DecimalError] ",tp=nl+"Invalid argument: ",DR=nl+"Exponent out of range: ",ev=Math.floor,Dh=Math.pow,Epe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,wo,ca=1e7,wr=7,NV=9007199254740991,P1=ev(NV/wr),Lt={};Lt.absoluteValue=Lt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Lt.comparedTo=Lt.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Lt.decimalPlaces=Lt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*wr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Lt.dividedBy=Lt.div=function(t){return Ku(this,new this.constructor(t))};Lt.dividedToIntegerBy=Lt.idiv=function(t){var e=this,n=e.constructor;return fr(Ku(e,new n(t),0,1),n.precision)};Lt.equals=Lt.eq=function(t){return!this.cmp(t)};Lt.exponent=function(){return ki(this)};Lt.greaterThan=Lt.gt=function(t){return this.cmp(t)>0};Lt.greaterThanOrEqualTo=Lt.gte=function(t){return this.cmp(t)>=0};Lt.isInteger=Lt.isint=function(){return this.e>this.d.length-2};Lt.isNegative=Lt.isneg=function(){return this.s<0};Lt.isPositive=Lt.ispos=function(){return this.s>0};Lt.isZero=function(){return this.s===0};Lt.lessThan=Lt.lt=function(t){return this.cmp(t)<0};Lt.lessThanOrEqualTo=Lt.lte=function(t){return this.cmp(t)<1};Lt.logarithm=Lt.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(wo))throw Error(nl+"NaN");if(n.s<1)throw Error(nl+(n.s?"NaN":"-Infinity"));return n.eq(wo)?new r(0):(Pr=!1,e=Ku(Cy(n,a),Cy(t,a),a),Pr=!0,fr(e,i))};Lt.minus=Lt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?PV(e,t):AV(e,(t.s=-t.s,t))};Lt.modulo=Lt.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(nl+"NaN");return n.s?(Pr=!1,e=Ku(n,t,0,1).times(t),Pr=!0,n.minus(e)):fr(new r(n),i)};Lt.naturalExponential=Lt.exp=function(){return TV(this)};Lt.naturalLogarithm=Lt.ln=function(){return Cy(this)};Lt.negated=Lt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Lt.plus=Lt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?AV(e,t):PV(e,(t.s=-t.s,t))};Lt.precision=Lt.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(tp+t);if(e=ki(i)+1,r=i.d.length-1,n=r*wr+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Lt.squareRoot=Lt.sqrt=function(){var t,e,n,r,i,a,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(nl+"NaN")}for(t=ki(o),Pr=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=jc(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=ev((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=s=n+3;;)if(a=r,r=a.plus(Ku(o,a,s+2)).times(.5),jc(a.d).slice(0,s)===(e=jc(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(fr(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return Pr=!0,fr(r,n)};Lt.times=Lt.mul=function(t){var e,n,r,i,a,s,o,l,u,d=this,f=d.constructor,p=d.d,m=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,n=d.e+t.e,l=p.length,u=m.length,l<u&&(a=p,p=m,m=a,s=l,l=u,u=s),a=[],s=l+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)o=a[i]+m[r]*p[i-r-1]+e,a[i--]=o%ca|0,e=o/ca|0;a[i]=(a[i]+e)%ca|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,Pr?fr(t,f.precision):t};Lt.toDecimalPlaces=Lt.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(qc(t,0,Jg),e===void 0?e=r.rounding:qc(e,0,8),fr(n,t+ki(n)+1,e))};Lt.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=bp(r,!0):(qc(t,0,Jg),e===void 0?e=i.rounding:qc(e,0,8),r=fr(new i(r),t+1,e),n=bp(r,!0,t+1)),n};Lt.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?bp(i):(qc(t,0,Jg),e===void 0?e=a.rounding:qc(e,0,8),r=fr(new a(i),t+ki(i)+1,e),n=bp(r.abs(),!1,t+ki(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Lt.toInteger=Lt.toint=function(){var t=this,e=t.constructor;return fr(new e(t),ki(t)+1,e.rounding)};Lt.toNumber=function(){return+this};Lt.toPower=Lt.pow=function(t){var e,n,r,i,a,s,o=this,l=o.constructor,u=12,d=+(t=new l(t));if(!t.s)return new l(wo);if(o=new l(o),!o.s){if(t.s<1)throw Error(nl+"Infinity");return o}if(o.eq(wo))return o;if(r=l.precision,t.eq(wo))return fr(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=d<0?-d:d)<=NV){for(i=new l(wo),e=Math.ceil(r/wr+4),Pr=!1;n%2&&(i=i.times(o),A4(i.d,e)),n=ev(n/2),n!==0;)o=o.times(o),A4(o.d,e);return Pr=!0,t.s<0?new l(wo).div(i):fr(i,r)}}else if(a<0)throw Error(nl+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,Pr=!1,i=t.times(Cy(o,r+u)),Pr=!0,i=TV(i),i.s=a,i};Lt.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=ki(i),r=bp(i,n<=a.toExpNeg||n>=a.toExpPos)):(qc(t,1,Jg),e===void 0?e=a.rounding:qc(e,0,8),i=fr(new a(i),t,e),n=ki(i),r=bp(i,t<=n||n<=a.toExpNeg,t)),r};Lt.toSignificantDigits=Lt.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(qc(t,1,Jg),e===void 0?e=r.rounding:qc(e,0,8)),fr(new r(n),t,e)};Lt.toString=Lt.valueOf=Lt.val=Lt.toJSON=Lt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=ki(t),n=t.constructor;return bp(t,e<=n.toExpNeg||e>=n.toExpPos)};function AV(t,e){var n,r,i,a,s,o,l,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Pr?fr(e,f):e;if(l=t.d,u=e.d,s=t.e,i=e.e,l=l.slice(),a=s-i,a){for(a<0?(r=l,a=-a,o=u.length):(r=u,i=s,o=l.length),s=Math.ceil(f/wr),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=l.length,a=u.length,o-a<0&&(a=o,r=u,u=l,l=r),n=0;a;)n=(l[--a]=l[a]+u[a]+n)/ca|0,l[a]%=ca;for(n&&(l.unshift(n),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,Pr?fr(e,f):e}function qc(t,e,n){if(t!==~~t||t<e||t>n)throw Error(tp+t)}function jc(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=wr-r.length,n&&(a+=df(n)),a+=r;s=t[e],r=s+"",n=wr-r.length,n&&(a+=df(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Ku=(function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%ca|0,s=a/ca|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(r[o]!=i[o]){l=r[o]>i[o]?1:-1;break}return l}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*ca+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,l,u,d,f,p,m,y,_,v,w,M,C,N,P,R,k,U,I=r.constructor,L=r.s==i.s?1:-1,z=r.d,O=i.d;if(!r.s)return new I(r);if(!i.s)throw Error(nl+"Division by zero");for(l=r.e-i.e,k=O.length,P=z.length,m=new I(L),y=m.d=[],u=0;O[u]==(z[u]||0);)++u;if(O[u]>(z[u]||0)&&--l,a==null?M=a=I.precision:s?M=a+(ki(r)-ki(i))+1:M=a,M<0)return new I(0);if(M=M/wr+2|0,u=0,k==1)for(d=0,O=O[0],M++;(u<P||d)&&M--;u++)C=d*ca+(z[u]||0),y[u]=C/O|0,d=C%O|0;else{for(d=ca/(O[0]+1)|0,d>1&&(O=t(O,d),z=t(z,d),k=O.length,P=z.length),N=k,_=z.slice(0,k),v=_.length;v<k;)_[v++]=0;U=O.slice(),U.unshift(0),R=O[0],O[1]>=ca/2&&++R;do d=0,o=e(O,_,k,v),o<0?(w=_[0],k!=v&&(w=w*ca+(_[1]||0)),d=w/R|0,d>1?(d>=ca&&(d=ca-1),f=t(O,d),p=f.length,v=_.length,o=e(f,_,p,v),o==1&&(d--,n(f,k<p?U:O,p))):(d==0&&(o=d=1),f=O.slice()),p=f.length,p<v&&f.unshift(0),n(_,f,v),o==-1&&(v=_.length,o=e(O,_,k,v),o<1&&(d++,n(_,k<v?U:O,v))),v=_.length):o===0&&(d++,_=[0]),y[u++]=d,o&&_[0]?_[v++]=z[N]||0:(_=[z[N]],v=1);while((N++<P||_[0]!==void 0)&&M--)}return y[0]||y.shift(),m.e=l,fr(m,s?a+ki(m)+1:a)}})();function TV(t,e){var n,r,i,a,s,o,l=0,u=0,d=t.constructor,f=d.precision;if(ki(t)>16)throw Error(DR+ki(t));if(!t.s)return new d(wo);for(Pr=!1,o=f,s=new d(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(Dh(2,u))/Math.LN10*2+5|0,o+=r,n=i=a=new d(wo),d.precision=o;;){if(i=fr(i.times(t),o),n=n.times(++l),s=a.plus(Ku(i,n,o)),jc(s.d).slice(0,o)===jc(a.d).slice(0,o)){for(;u--;)a=fr(a.times(a),o);return d.precision=f,e==null?(Pr=!0,fr(a,f)):a}a=s}}function ki(t){for(var e=t.e*wr,n=t.d[0];n>=10;n/=10)e++;return e}function zC(t,e,n){if(e>t.LN10.sd())throw Pr=!0,n&&(t.precision=n),Error(nl+"LN10 precision limit exceeded");return fr(new t(t.LN10),e)}function df(t){for(var e="";t--;)e+="0";return e}function Cy(t,e){var n,r,i,a,s,o,l,u,d,f=1,p=10,m=t,y=m.d,_=m.constructor,v=_.precision;if(m.s<1)throw Error(nl+(m.s?"NaN":"-Infinity"));if(m.eq(wo))return new _(0);if(e==null?(Pr=!1,u=v):u=e,m.eq(10))return e==null&&(Pr=!0),zC(_,u);if(u+=p,_.precision=u,n=jc(y),r=n.charAt(0),a=ki(m),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(t),n=jc(m.d),r=n.charAt(0),f++;a=ki(m),r>1?(m=new _("0."+n),a++):m=new _(r+"."+n.slice(1))}else return l=zC(_,u+2,v).times(a+""),m=Cy(new _(r+"."+n.slice(1)),u-p).plus(l),_.precision=v,e==null?(Pr=!0,fr(m,v)):m;for(o=s=m=Ku(m.minus(wo),m.plus(wo),u),d=fr(m.times(m),u),i=3;;){if(s=fr(s.times(d),u),l=o.plus(Ku(s,new _(i),u)),jc(l.d).slice(0,u)===jc(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(zC(_,u+2,v).times(a+""))),o=Ku(o,new _(f),u),_.precision=v,e==null?(Pr=!0,fr(o,v)):o;o=l,i+=2}}function N4(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=ev(n/wr),t.d=[],r=(n+1)%wr,n<0&&(r+=wr),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=wr;r<i;)t.d.push(+e.slice(r,r+=wr));e=e.slice(r),r=wr-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Pr&&(t.e>P1||t.e<-P1))throw Error(DR+n)}else t.s=0,t.e=0,t.d=[0];return t}function fr(t,e,n){var r,i,a,s,o,l,u,d,f=t.d;for(s=1,a=f[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=wr,i=e,u=f[d=0];else{if(d=Math.ceil((r+1)/wr),a=f.length,d>=a)return t;for(u=a=f[d],s=1;a>=10;a/=10)s++;r%=wr,i=r-wr+s}if(n!==void 0&&(a=Dh(10,s-i-1),o=u/a%10|0,l=e<0||f[d+1]!==void 0||u%a,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?i>0?u/Dh(10,s-i):0:f[d-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return l?(a=ki(t),f.length=1,e=e-a-1,f[0]=Dh(10,(wr-e%wr)%wr),t.e=ev(-e/wr)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=d,a=1,d--):(f.length=d+1,a=Dh(10,wr-r),f[d]=i>0?(u/Dh(10,s-i)%Dh(10,i)|0)*a:0),l)for(;;)if(d==0){(f[0]+=a)==ca&&(f[0]=1,++t.e);break}else{if(f[d]+=a,f[d]!=ca)break;f[d--]=0,a=1}for(r=f.length;f[--r]===0;)f.pop();if(Pr&&(t.e>P1||t.e<-P1))throw Error(DR+ki(t));return t}function PV(t,e){var n,r,i,a,s,o,l,u,d,f,p=t.constructor,m=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),Pr?fr(e,m):e;if(l=t.d,f=e.d,r=e.e,u=t.e,l=l.slice(),s=u-r,s){for(d=s<0,d?(n=l,s=-s,o=f.length):(n=f,r=u,o=l.length),i=Math.max(Math.ceil(m/wr),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=l.length,o=f.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(l[i]!=f[i]){d=l[i]<f[i];break}s=0}for(d&&(n=l,l=f,f=n,e.s=-e.s),o=l.length,i=f.length-o;i>0;--i)l[o++]=0;for(i=f.length;i>s;){if(l[--i]<f[i]){for(a=i;a&&l[--a]===0;)l[a]=ca-1;--l[a],l[i]+=ca}l[i]-=f[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Pr?fr(e,m):e):new p(0)}function bp(t,e,n){var r,i=ki(t),a=jc(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+df(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+df(-i-1)+a,n&&(r=n-s)>0&&(a+=df(r))):i>=s?(a+=df(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+df(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=df(r))),t.s<0?"-"+a:a}function A4(t,e){if(t.length>e)return t.length=e,!0}function RV(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(tp+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return N4(s,a.toString())}else if(typeof a!="string")throw Error(tp+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,Epe.test(a))N4(s,a);else throw Error(tp+a)}if(i.prototype=Lt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=RV,i.config=i.set=Mpe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Mpe(t){if(!t||typeof t!="object")throw Error(nl+"Object expected");var e,n,r,i=["precision",1,Jg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(ev(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(tp+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(tp+n+": "+r);return this}var kR=RV(Spe);wo=new kR(1);const nr=kR;var Cpe=t=>t,DV={},kV=t=>t===DV,T4=t=>function e(){return arguments.length===0||arguments.length===1&&kV(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},jV=(t,e)=>t===1?e:T4(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(s=>s!==DV).length;return a>=t?e(...r):jV(t-a,T4(function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];var u=r.map(d=>kV(d)?o.shift():d);return e(...u,...o)}))}),Npe=t=>jV(t.length,t),bT=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},Ape=Npe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),Tpe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Cpe;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce((o,l)=>l(o),a(...arguments))}};function OV(t){var e;return t===0?e=1:e=Math.floor(new nr(t).abs().log(10).toNumber())+1,e}function IV(t,e,n){for(var r=new nr(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var LV=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},FV=(t,e,n)=>{if(t.lte(0))return new nr(0);var r=OV(t.toNumber()),i=new nr(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new nr(Math.ceil(a.div(s).toNumber())).add(n).mul(s),l=o.mul(i);return e?new nr(l.toNumber()):new nr(Math.ceil(l.toNumber()))},Ppe=(t,e,n)=>{var r=new nr(1),i=new nr(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new nr(10).pow(OV(t)-1),i=new nr(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new nr(Math.floor(t)))}else t===0?i=new nr(Math.floor((e-1)/2)):n||(i=new nr(Math.floor(t)));var s=Math.floor((e-1)/2),o=Tpe(Ape(l=>i.add(new nr(l-s).mul(r)).toNumber()),bT);return o(0,e)},UV=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new nr(0),tickMin:new nr(0),tickMax:new nr(0)};var s=FV(new nr(n).sub(e).div(r-1),i,a),o;e<=0&&n>=0?o=new nr(0):(o=new nr(e).add(n).div(2),o=o.sub(new nr(o).mod(s)));var l=Math.ceil(o.sub(e).div(s).toNumber()),u=Math.ceil(new nr(n).sub(o).div(s).toNumber()),d=l+u+1;return d>r?UV(e,n,r,i,a+1):(d<r&&(u=n>0?u+(r-d):u,l=n>0?l:l+(r-d)),{step:s,tickMin:o.sub(new nr(l).mul(s)),tickMax:o.add(new nr(u).mul(s))})},Rpe=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[o,l]=LV([n,r]);if(o===-1/0||l===1/0){var u=l===1/0?[o,...bT(0,i-1).map(()=>1/0)]:[...bT(0,i-1).map(()=>-1/0),l];return n>r?u.reverse():u}if(o===l)return Ppe(o,i,a);var{step:d,tickMin:f,tickMax:p}=UV(o,l,s,a,0),m=IV(f,p.add(new nr(.1).mul(d)),d);return n>r?m.reverse():m},Dpe=function(e,n){var[r,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=LV([r,i]);if(s===-1/0||o===1/0)return[r,i];if(s===o)return[s];var l=Math.max(n,2),u=FV(new nr(o).sub(s).div(l-1),a,0),d=[...IV(new nr(s),new nr(o),u),o];return a===!1&&(d=d.map(f=>Math.round(f))),r>i?d.reverse():d},kpe=t=>t.rootProps.barCategoryGap,px=t=>t.rootProps.stackOffset,BV=t=>t.rootProps.reverseStackOrder,jR=t=>t.options.chartName,OR=t=>t.rootProps.syncId,zV=t=>t.rootProps.syncMethod,IR=t=>t.options.eventEmitter,jpe=t=>t.rootProps.baseValue,Pa={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Uu={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},bo={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},M2=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},Ope={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Uu.angleAxisId,includeHidden:!1,name:void 0,reversed:Uu.reversed,scale:Uu.scale,tick:Uu.tick,tickCount:void 0,ticks:void 0,type:Uu.type,unit:void 0},Ipe={allowDataOverflow:bo.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:bo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:bo.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:bo.scale,tick:bo.tick,tickCount:bo.tickCount,ticks:void 0,type:bo.type,unit:void 0},Lpe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Uu.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Uu.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Uu.scale,tick:Uu.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Fpe={allowDataOverflow:bo.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:bo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:bo.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:bo.scale,tick:bo.tick,tickCount:bo.tickCount,ticks:void 0,type:"category",unit:void 0},LR=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?Lpe:Ope,FR=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?Fpe:Ipe,C2=t=>t.polarOptions,UR=Ge([md,gd,da],zH),HV=Ge([C2,UR],(t,e)=>{if(t!=null)return No(t.innerRadius,e,0)}),VV=Ge([C2,UR],(t,e)=>{if(t!=null)return No(t.outerRadius,e,e*.8)}),Upe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},WV=Ge([C2],Upe);Ge([LR,WV],M2);var GV=Ge([UR,HV,VV],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});Ge([FR,GV],M2);var $V=Ge([ir,C2,HV,VV,md,gd],(t,e,n,r,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:o,startAngle:l,endAngle:u}=e;return{cx:No(s,i,i/2),cy:No(o,a,a/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:u,clockWise:!1}}}),jr=(t,e)=>e,mx=(t,e,n)=>n;function BR(t){return t?.id}function YV(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=n,s=new Map;return t.forEach(o=>{var l,u=(l=o.data)!==null&&l!==void 0?l:r;if(!(u==null||u.length===0)){var d=BR(o);u.forEach((f,p)=>{var m=a==null||i?p:String(Er(f,a,null)),y=Er(f,o.dataKey,0),_;s.has(m)?_=s.get(m):_={},Object.assign(_,{[d]:y}),s.set(m,_)})}}),Array.from(s.values())}function zR(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var N2=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function A2(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function Bpe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Ki=t=>{var e=ir(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},tv=t=>t.tooltip.settings.axisId;function P4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function R1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P4(Object(n),!0).forEach(function(r){zpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zpe(t,e,n){return(e=Hpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hpe(t){var e=Vpe(t,"string");return typeof e=="symbol"?e:e+""}function Vpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _T=[0,"auto"],oa={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},qV=(t,e)=>t.cartesianAxis.xAxis[e],xd=(t,e)=>{var n=qV(t,e);return n??oa},la={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:_T,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:ox},XV=(t,e)=>t.cartesianAxis.yAxis[e],bd=(t,e)=>{var n=XV(t,e);return n??la},Wpe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},HR=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??Wpe},Vr=(t,e,n)=>{switch(e){case"xAxis":return xd(t,n);case"yAxis":return bd(t,n);case"zAxis":return HR(t,n);case"angleAxis":return LR(t,n);case"radiusAxis":return FR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Gpe=(t,e,n)=>{switch(e){case"xAxis":return xd(t,n);case"yAxis":return bd(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},gx=(t,e,n)=>{switch(e){case"xAxis":return xd(t,n);case"yAxis":return bd(t,n);case"angleAxis":return LR(t,n);case"radiusAxis":return FR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},KV=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function VR(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var ZV=t=>t.graphicalItems.cartesianItems,$pe=Ge([jr,mx],VR),WR=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),vx=Ge([ZV,Vr,$pe],WR,{memoizeOptions:{resultEqualityCheck:A2}}),QV=Ge([vx],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(zR)),JV=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),Ype=Ge([vx],JV),GR=t=>t.map(e=>e.data).filter(Boolean).flat(1),qpe=Ge([vx],GR,{memoizeOptions:{resultEqualityCheck:A2}}),$R=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},YR=Ge([qpe,MV],$R),qR=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:Er(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Er(i,r)}))):t.map(r=>({value:r})),T2=Ge([YR,Vr,vx],qR);function eW(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function bw(t){if($c(t)||t instanceof Date){var e=Number(t);if(Dr(e))return e}}function R4(t){if(Array.isArray(t)){var e=[bw(t[0]),bw(t[1])];return Ef(e)?e:void 0}var n=bw(t);if(n!=null)return[n,n]}function sd(t){return t.map(bw).filter(Hse)}function Xpe(t,e,n){return!n||typeof e!="number"||Yl(e)?[]:n.length?sd(n.flatMap(r=>{var i=Er(t,r.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!Dr(a)||!Dr(s)))return[e-a,e+s]})):[]}var Zi=t=>{var e=Ki(t),n=tv(t);return gx(t,e,n)},yx=Ge([Zi],t=>t?.dataKey),Kpe=Ge([QV,MV,Zi],YV),tW=(t,e,n,r)=>{var i={},a=e.reduce((s,o)=>{if(o.stackId==null)return s;var l=s[o.stackId];return l==null&&(l=[]),l.push(o),s[o.stackId]=l,s},i);return Object.fromEntries(Object.entries(a).map(s=>{var[o,l]=s,u=r?[...l].reverse():l,d=u.map(BR);return[o,{stackedData:pce(t,d,n),graphicalItems:u}]}))},nW=Ge([Kpe,QV,px,BV],tW),rW=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(r==null&&n!=="zAxis"){var s=yce(t,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},Zpe=Ge([Vr],t=>t.allowDataOverflow),XR=t=>{var e;if(t==null||!("domain"in t))return _T;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=sd(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:_T},KR=Ge([Vr],XR),ZR=Ge([KR,Zpe],CV),Qpe=Ge([nW,yd,jr,ZR],rW,{memoizeOptions:{resultEqualityCheck:N2}}),P2=t=>t.errorBars,Jpe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>eW(n,r)),D1=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},QR=(t,e,n,r,i)=>{var a,s;if(n.length>0&&t.forEach(o=>{n.forEach(l=>{var u,d,f=(u=r[l.id])===null||u===void 0?void 0:u.filter(w=>eW(i,w)),p=Er(o,(d=e.dataKey)!==null&&d!==void 0?d:l.dataKey),m=Xpe(o,p,f);if(m.length>=2){var y=Math.min(...m),_=Math.max(...m);(a==null||y<a)&&(a=y),(s==null||_>s)&&(s=_)}var v=R4(p);v!=null&&(a=a==null?v[0]:Math.min(a,v[0]),s=s==null?v[1]:Math.max(s,v[1]))})}),e?.dataKey!=null&&t.forEach(o=>{var l=R4(Er(o,e.dataKey));l!=null&&(a=a==null?l[0]:Math.min(a,l[0]),s=s==null?l[1]:Math.max(s,l[1]))}),Dr(a)&&Dr(s))return[a,s]},eme=Ge([YR,Vr,Ype,P2,jr],QR,{memoizeOptions:{resultEqualityCheck:N2}});function tme(t){var{value:e}=t;if($c(e)||e instanceof Date)return e}var nme=(t,e,n)=>{var r=t.map(tme).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&y8(r))?GH(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},iW=t=>t.referenceElements.dots,nv=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),rme=Ge([iW,jr,mx],nv),aW=t=>t.referenceElements.areas,ime=Ge([aW,jr,mx],nv),sW=t=>t.referenceElements.lines,ame=Ge([sW,jr,mx],nv),oW=(t,e)=>{if(t!=null){var n=sd(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},sme=Ge(rme,jr,oW),lW=(t,e)=>{if(t!=null){var n=sd(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},ome=Ge([ime,jr],lW);function lme(t){var e;if(t.x!=null)return sd([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:sd(n)}function cme(t){var e;if(t.y!=null)return sd([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:sd(n)}var cW=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?lme(r):cme(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},ume=Ge([ame,jr],cW),dme=Ge(sme,ume,ome,(t,e,n)=>D1(t,n,e)),JR=(t,e,n,r,i,a,s,o)=>{if(n!=null)return n;var l=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=l?D1(r,a,i):D1(a,i);return wpe(e,u,t.allowDataOverflow)},fme=Ge([Vr,KR,ZR,Qpe,eme,dme,ir,jr],JR,{memoizeOptions:{resultEqualityCheck:N2}}),hme=[0,1],eD=(t,e,n,r,i,a,s)=>{if(!((t==null||n==null||n.length===0)&&s===void 0)){var{dataKey:o,type:l}=t,u=pd(e,a);if(u&&o==null){var d;return GH(0,(d=n?.length)!==null&&d!==void 0?d:0)}return l==="category"?nme(r,t,u):i==="expand"?hme:s}},tD=Ge([Vr,ir,YR,T2,px,jr,fme],eD),uW=(t,e,n,r,i)=>{if(t!=null){var{scale:a,type:s}=t;if(a==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":s==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(rx(a));return o in U0?o:"point"}}},rv=Ge([Vr,ir,KV,jR,jr],uW);function pme(t){if(t!=null){if(t in U0)return U0[t]();var e="scale".concat(rx(t));if(e in U0)return U0[e]()}}function nD(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=pme(e);if(i!=null){var a=i.domain(n).range(r);return uce(a),a}}}var rD=(t,e,n)=>{var r=XR(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Ef(t))return Rpe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Ef(t))return Dpe(t,e.tickCount,e.allowDecimals)}},iD=Ge([tD,gx,rv],rD),aD=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&Ef(e)&&Array.isArray(n)&&n.length>0){var i=e[0],a=n[0],s=e[1],o=n[n.length-1];return[Math.min(i,a),Math.max(s,o)]}return e},mme=Ge([Vr,tD,iD,jr],aD),gme=Ge(T2,Vr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(sd(t.map(f=>f.value))).sort((f,p)=>f-p),i=r[0],a=r[r.length-1];if(i==null||a==null)return 1/0;var s=a-i;if(s===0)return 1/0;for(var o=0;o<r.length-1;o++){var l=r[o],u=r[o+1];if(!(l==null||u==null)){var d=u-l;n=Math.min(n,d)}}return n/s}}),dW=Ge(gme,ir,kpe,da,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!Dr(t))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var s=No(n,t*a),o=t*a/2;return o-s-(o-s)/a*s}return 0}),vme=(t,e,n)=>{var r=xd(t,e);return r==null||typeof r.padding!="string"?0:dW(t,"xAxis",e,n,r.padding)},yme=(t,e,n)=>{var r=bd(t,e);return r==null||typeof r.padding!="string"?0:dW(t,"yAxis",e,n,r.padding)},xme=Ge(xd,vme,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),bme=Ge(bd,yme,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),_me=Ge([da,xme,u2,c2,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),wme=Ge([da,ir,bme,u2,c2,(t,e,n)=>n],(t,e,n,r,i,a)=>{var{padding:s}=i;return a?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),xx=(t,e,n,r)=>{var i;switch(e){case"xAxis":return _me(t,n,r);case"yAxis":return wme(t,n,r);case"zAxis":return(i=HR(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return WV(t);case"radiusAxis":return GV(t,n);default:return}},fW=Ge([Vr,xx],M2),R2=Ge([Vr,rv,mme,fW],nD);Ge([vx,P2,jr],Jpe);function hW(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var D2=(t,e)=>e,k2=(t,e,n)=>n,Sme=Ge(o2,D2,k2,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(hW)),Eme=Ge(l2,D2,k2,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(hW)),pW=(t,e)=>({width:t.width,height:e.height}),Mme=(t,e)=>{var n=typeof e.width=="number"?e.width:ox;return{width:n,height:t.height}},Cme=Ge(da,xd,pW),Nme=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},Ame=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},Tme=Ge(gd,da,Sme,D2,k2,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var l=pW(e,o);s==null&&(s=Nme(e,r,t));var u=r==="top"&&!i||r==="bottom"&&i;a[o.id]=s-Number(u)*l.height,s+=(u?-1:1)*l.height}),a}),Pme=Ge(md,da,Eme,D2,k2,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var l=Mme(e,o);s==null&&(s=Ame(e,r,t));var u=r==="left"&&!i||r==="right"&&i;a[o.id]=s-Number(u)*l.width,s+=(u?-1:1)*l.width}),a}),Rme=(t,e)=>{var n=xd(t,e);if(n!=null)return Tme(t,n.orientation,n.mirror)},Dme=Ge([da,xd,Rme,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),kme=(t,e)=>{var n=bd(t,e);if(n!=null)return Pme(t,n.orientation,n.mirror)},jme=Ge([da,bd,kme,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),Ome=Ge(da,bd,(t,e)=>{var n=typeof e.width=="number"?e.width:ox;return{width:n,height:t.height}}),mW=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=n,o=pd(t,r),l=e.map(u=>u.value);if(s&&o&&a==="category"&&i&&y8(l))return l}},sD=Ge([ir,T2,Vr,jr],mW),gW=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,s=pd(t,r);if(s&&(i==="number"||a!=="auto"))return e.map(o=>o.value)}},oD=Ge([ir,T2,gx,jr],gW),D4=Ge([ir,Gpe,rv,R2,sD,oD,xx,iD,jr],(t,e,n,r,i,a,s,o,l)=>{if(e!=null){var u=pd(t,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:a,duplicateDomain:i,isCategorical:u,niceTicks:o,range:s,realScaleType:n,scale:r}}}),Ime=(t,e,n,r,i,a,s,o,l)=>{if(!(e==null||r==null)){var u=pd(t,l),{type:d,ticks:f,tickCount:p}=e,m=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,y=d==="category"&&r.bandwidth?r.bandwidth()/m:0;y=l==="angleAxis"&&a!=null&&a.length>=2?Qa(a[0]-a[1])*2*y:y;var _=f||i;if(_){var v=_.map((w,M)=>{var C=s?s.indexOf(w):w;return{index:M,coordinate:r(C)+y,value:w,offset:y}});return v.filter(w=>Dr(w.coordinate))}return u&&o?o.map((w,M)=>({coordinate:r(w)+y,value:w,index:M,offset:y})).filter(w=>Dr(w.coordinate)):r.ticks?r.ticks(p).map(w=>({coordinate:r(w)+y,value:w,offset:y})):r.domain().map((w,M)=>({coordinate:r(w)+y,value:s?s[w]:w,index:M,offset:y}))}},vW=Ge([ir,gx,rv,R2,iD,xx,sD,oD,jr],Ime),Lme=(t,e,n,r,i,a,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var o=pd(t,s),{tickCount:l}=e,u=0;return u=s==="angleAxis"&&r?.length>=2?Qa(r[0]-r[1])*2*u:u,o&&a?a.map((d,f)=>({coordinate:n(d)+u,value:d,index:f,offset:u})):n.ticks?n.ticks(l).map(d=>({coordinate:n(d)+u,value:d,offset:u})):n.domain().map((d,f)=>({coordinate:n(d)+u,value:i?i[d]:d,index:f,offset:u}))}},yW=Ge([ir,gx,R2,xx,sD,oD,jr],Lme),xW=Ge(Vr,R2,(t,e)=>{if(!(t==null||e==null))return R1(R1({},t),{},{scale:e})}),Fme=Ge([Vr,rv,tD,fW],nD);Ge((t,e,n)=>HR(t,n),Fme,(t,e)=>{if(!(t==null||e==null))return R1(R1({},t),{},{scale:e})});var Ume=Ge([ir,o2,l2],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),bW=t=>t.options.defaultTooltipEventType,_W=t=>t.options.validateTooltipEventTypes;function wW(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function lD(t,e){var n=bW(t),r=_W(t);return wW(e,n,r)}function Bme(t){return Wt(e=>lD(e,t))}var SW=(t,e)=>{var n,r=Number(e);if(!(Yl(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},zme=t=>t.tooltip.settings,hf={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Hme={itemInteraction:{click:hf,hover:hf},axisInteraction:{click:hf,hover:hf},keyboardInteraction:hf,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},EW=eo({name:"tooltip",initialState:Hme,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Ar()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Gl(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:Ar()},removeTooltipEntrySettings:{reducer(t,e){var n=Gl(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Ar()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:Vme,replaceTooltipEntrySettings:Wme,removeTooltipEntrySettings:Gme,setTooltipSettingsState:$me,setActiveMouseOverItemIndex:MW,mouseLeaveItem:Yme,mouseLeaveChart:CW,setActiveClickItemIndex:qme,setMouseOverAxisIndex:NW,setMouseClickAxisIndex:Xme,setSyncInteraction:wT,setKeyboardInteraction:ST}=EW.actions,Kme=EW.reducer;function k4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function e_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k4(Object(n),!0).forEach(function(r){Zme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zme(t,e,n){return(e=Qme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qme(t){var e=Jme(t,"string");return typeof e=="symbol"?e:e+""}function Jme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ege(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function tge(t){return t.index!=null}var AW=(t,e,n,r)=>{if(e==null)return hf;var i=ege(t,e,n);if(i==null)return hf;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(tge(i)){if(a)return e_(e_({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return e_(e_({},hf),{},{coordinate:i.coordinate})};function nge(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function rge(t,e){var n=nge(t),r=e[0],i=e[1];if(n===void 0)return!1;var a=Math.min(r,i),s=Math.max(r,i);return n>=a&&n<=s}function ige(t,e,n){if(n==null||e==null)return!0;var r=Er(t,e);return r==null||!Ef(n)?!0:rge(r,n)}var cD=(t,e,n,r)=>{var i=t?.index;if(i==null)return null;var a=Number(i);if(!Dr(a))return i;var s=0,o=1/0;e.length>0&&(o=e.length-1);var l=Math.max(s,Math.min(a,o)),u=e[l];return u==null||ige(u,n,r)?String(l):null},TW=(t,e,n,r,i,a,s,o)=>{if(!(a==null||o==null)){var l=s[0],u=l==null?void 0:o(l.positions,a);if(u!=null)return u;var d=i?.[Number(a)];if(d)switch(n){case"horizontal":return{x:d.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:d.coordinate}}}},PW=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var a=t.tooltipItemPayloads[0];return a!=null?[a]:[]}return t.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.graphicalItemId)===i})},bx=t=>t.options.tooltipPayloadSearcher,iv=t=>t.tooltip;function j4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function O4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j4(Object(n),!0).forEach(function(r){age(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function age(t,e,n){return(e=sge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sge(t){var e=oge(t,"string");return typeof e=="symbol"?e:e+""}function oge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lge(t,e){return t??e}var RW=(t,e,n,r,i,a,s)=>{if(!(e==null||a==null)){var{chartData:o,computedData:l,dataStartIndex:u,dataEndIndex:d}=n,f=[];return t.reduce((p,m)=>{var y,{dataDefinedOnItem:_,settings:v}=m,w=lge(_,o),M=Array.isArray(w)?fH(w,u,d):w,C=(y=v?.dataKey)!==null&&y!==void 0?y:r,N=v?.nameKey,P;if(r&&Array.isArray(M)&&!Array.isArray(M[0])&&s==="axis"?P=x8(M,r,i):P=a(M,e,l,N),Array.isArray(P))P.forEach(k=>{var U=O4(O4({},v),{},{name:k.name,unit:k.unit,color:void 0,fill:void 0});p.push(UI({tooltipEntrySettings:U,dataKey:k.dataKey,payload:k.payload,value:Er(k.payload,k.dataKey),name:k.name}))});else{var R;p.push(UI({tooltipEntrySettings:v,dataKey:C,payload:P,value:Er(P,C),name:(R=Er(P,N))!==null&&R!==void 0?R:v?.name}))}return p},f)}},uD=Ge([Zi,ir,KV,jR,Ki],uW),cge=Ge([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),uge=Ge([Ki,tv],VR),av=Ge([cge,Zi,uge],WR,{memoizeOptions:{resultEqualityCheck:A2}}),dge=Ge([av],t=>t.filter(zR)),fge=Ge([av],GR,{memoizeOptions:{resultEqualityCheck:A2}}),sv=Ge([fge,yd],$R),hge=Ge([dge,yd,Zi],YV),dD=Ge([sv,Zi,av],qR),DW=Ge([Zi],XR),pge=Ge([Zi],t=>t.allowDataOverflow),kW=Ge([DW,pge],CV),mge=Ge([av],t=>t.filter(zR)),gge=Ge([hge,mge,px,BV],tW),vge=Ge([gge,yd,Ki,kW],rW),yge=Ge([av],JV),xge=Ge([sv,Zi,yge,P2,Ki],QR,{memoizeOptions:{resultEqualityCheck:N2}}),bge=Ge([iW,Ki,tv],nv),_ge=Ge([bge,Ki],oW),wge=Ge([aW,Ki,tv],nv),Sge=Ge([wge,Ki],lW),Ege=Ge([sW,Ki,tv],nv),Mge=Ge([Ege,Ki],cW),Cge=Ge([_ge,Mge,Sge],D1),Nge=Ge([Zi,DW,kW,vge,xge,Cge,ir,Ki],JR),_x=Ge([Zi,ir,sv,dD,px,Ki,Nge],eD),Age=Ge([_x,Zi,uD],rD),Tge=Ge([Zi,_x,Age,Ki],aD),jW=t=>{var e=Ki(t),n=tv(t),r=!1;return xx(t,e,n,r)},OW=Ge([Zi,jW],M2),IW=Ge([Zi,uD,Tge,OW],nD),Pge=Ge([ir,dD,Zi,Ki],mW),Rge=Ge([ir,dD,Zi,Ki],gW),Dge=(t,e,n,r,i,a,s,o)=>{if(e){var{type:l}=e,u=pd(t,o);if(r){var d=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,f=l==="category"&&r.bandwidth?r.bandwidth()/d:0;return f=o==="angleAxis"&&i!=null&&i?.length>=2?Qa(i[0]-i[1])*2*f:f,u&&s?s.map((p,m)=>({coordinate:r(p)+f,value:p,index:m,offset:f})):r.domain().map((p,m)=>({coordinate:r(p)+f,value:a?a[p]:p,index:m,offset:f}))}}},_d=Ge([ir,Zi,uD,IW,jW,Pge,Rge,Ki],Dge),fD=Ge([bW,_W,zme],(t,e,n)=>wW(n.shared,t,e)),LW=t=>t.tooltip.settings.trigger,hD=t=>t.tooltip.settings.defaultIndex,wx=Ge([iv,fD,LW,hD],AW),Ug=Ge([wx,sv,yx,_x],cD),FW=Ge([_d,Ug],SW),UW=Ge([wx],t=>{if(t)return t.dataKey}),kge=Ge([wx],t=>{if(t)return t.graphicalItemId}),BW=Ge([iv,fD,LW,hD],PW),jge=Ge([md,gd,ir,da,_d,hD,BW,bx],TW),Oge=Ge([wx,jge],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Ige=Ge([wx],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),Lge=Ge([BW,Ug,yd,yx,FW,bx,fD],RW),Fge=Ge([Lge],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function I4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function L4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I4(Object(n),!0).forEach(function(r){Uge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Uge(t,e,n){return(e=Bge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bge(t){var e=zge(t,"string");return typeof e=="symbol"?e:e+""}function zge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hge=()=>Wt(Zi),Vge=()=>{var t=Hge(),e=Wt(_d),n=Wt(IW);return u1(!t||!n?void 0:L4(L4({},t),{},{scale:n}),e)};function F4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F4(Object(n),!0).forEach(function(r){Wge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wge(t,e,n){return(e=Gge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gge(t){var e=$ge(t,"string");return typeof e=="symbol"?e:e+""}function $ge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yge=(t,e,n,r)=>{var i=e.find(a=>a&&a.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},qge=(t,e,n,r)=>{var i=e.find(u=>u&&u.index===n);if(i){if(t==="centric"){var a=i.coordinate,{radius:s}=r;return Dm(Dm(Dm({},r),Di(r.cx,r.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:l}=r;return Dm(Dm(Dm({},r),Di(r.cx,r.cy,o,l)),{},{angle:l,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Xge(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var zW=(t,e,n,r,i)=>{var a,s=(a=e?.length)!==null&&a!==void 0?a:0;if(s<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var o=0;o<s;o++){var l,u,d,f,p,m=o>0?(l=n[o-1])===null||l===void 0?void 0:l.coordinate:(u=n[s-1])===null||u===void 0?void 0:u.coordinate,y=(d=n[o])===null||d===void 0?void 0:d.coordinate,_=o>=s-1?(f=n[0])===null||f===void 0?void 0:f.coordinate:(p=n[o+1])===null||p===void 0?void 0:p.coordinate,v=void 0;if(!(m==null||y==null||_==null))if(Qa(y-m)!==Qa(_-y)){var w=[];if(Qa(_-y)===Qa(i[1]-i[0])){v=_;var M=y+i[1]-i[0];w[0]=Math.min(M,(M+m)/2),w[1]=Math.max(M,(M+m)/2)}else{v=m;var C=_+i[1]-i[0];w[0]=Math.min(y,(C+y)/2),w[1]=Math.max(y,(C+y)/2)}var N=[Math.min(y,(v+y)/2),Math.max(y,(v+y)/2)];if(t>N[0]&&t<=N[1]||t>=w[0]&&t<=w[1]){var P;return(P=n[o])===null||P===void 0?void 0:P.index}}else{var R=Math.min(m,_),k=Math.max(m,_);if(t>(R+y)/2&&t<=(k+y)/2){var U;return(U=n[o])===null||U===void 0?void 0:U.index}}}else if(e)for(var I=0;I<s;I++){var L=e[I];if(L!=null){var z=e[I+1],O=e[I-1];if(I===0&&z!=null&&t<=(L.coordinate+z.coordinate)/2||I===s-1&&O!=null&&t>(L.coordinate+O.coordinate)/2||I>0&&I<s-1&&O!=null&&z!=null&&t>(L.coordinate+O.coordinate)/2&&t<=(L.coordinate+z.coordinate)/2)return L.index}}return-1},HW=()=>Wt(jR),pD=(t,e)=>e,VW=(t,e,n)=>n,mD=(t,e,n,r)=>r,Kge=Ge(_d,t=>KS(t,e=>e.coordinate)),gD=Ge([iv,pD,VW,mD],AW),vD=Ge([gD,sv,yx,_x],cD),Zge=(t,e,n)=>{if(e!=null){var r=iv(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},WW=Ge([iv,pD,VW,mD],PW),k1=Ge([md,gd,ir,da,_d,mD,WW,bx],TW),Qge=Ge([gD,k1],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),GW=Ge([_d,vD],SW),Jge=Ge([WW,vD,yd,yx,GW,bx,pD],RW),eve=Ge([gD,vD],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),tve=(t,e,n,r,i,a,s)=>{if(!(!t||!n||!r||!i)&&Xge(t,s)){var o=xce(t,e),l=zW(o,a,i,n,r),u=Yge(e,i,l,t);return{activeIndex:String(l),activeCoordinate:u}}},nve=(t,e,n,r,i,a,s)=>{if(!(!t||!r||!i||!a||!n)){var o=Lde(t,n);if(o){var l=bce(o,e),u=zW(l,s,a,r,i),d=qge(e,a,u,o);return{activeIndex:String(u),activeCoordinate:d}}}},rve=(t,e,n,r,i,a,s,o)=>{if(!(!t||!e||!r||!i||!a))return e==="horizontal"||e==="vertical"?tve(t,e,r,i,a,s,o):nve(t,e,n,r,i,a,s)},ive=Ge(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),ave=Ge(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Pa)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:Bpe}});function U4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function B4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U4(Object(n),!0).forEach(function(r){sve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sve(t,e,n){return(e=ove(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ove(t){var e=lve(t,"string");return typeof e=="symbol"?e:e+""}function lve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cve={},uve={zIndexMap:Object.values(Pa).reduce((t,e)=>B4(B4({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),cve)},dve=new Set(Object.values(Pa));function fve(t){return dve.has(t)}var $W=eo({name:"zIndex",initialState:uve,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Ar()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!fve(n)&&delete t.zIndexMap[n])},prepare:Ar()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:Ar()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:Ar()}}}),{registerZIndexPortal:hve,unregisterZIndexPortal:pve,registerZIndexPortalElement:mve,unregisterZIndexPortalElement:gve}=$W.actions,vve=$W.reducer;function ec(t){var{zIndex:e,children:n}=t,r=Qce(),i=r&&e!==void 0&&e!==0,a=to(),s=vr();E.useLayoutEffect(()=>i?(s(hve({zIndex:e})),()=>{s(pve({zIndex:e}))}):ix,[s,e,i]);var o=Wt(l=>ive(l,e,a));return i?o?$g.createPortal(n,o):null:n}function ET(){return ET=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ET.apply(null,arguments)}function z4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function t_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z4(Object(n),!0).forEach(function(r){yve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yve(t,e,n){return(e=xve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xve(t){var e=bve(t,"string");return typeof e=="symbol"?e:e+""}function bve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _ve(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return E.isValidElement(e)?E.cloneElement(e,r):E.createElement(n,r)}function wve(t){var e,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:l,tooltipEventType:u,chartName:d}=t,f=n,p=r,m=i;if(!l||!f||d!=="ScatterChart"&&u!=="axis")return null;var y,_,v;if(d==="ScatterChart")y=f,_=Zue,v=Pa.cursorLine;else if(d==="BarChart")y=Que(o,f,a,s),_=BH,v=Pa.cursorRectangle;else if(o==="radial"&&_8(f)){var{cx:w,cy:M,radius:C,startAngle:N,endAngle:P}=HH(f);y={cx:w,cy:M,startAngle:N,endAngle:P,innerRadius:C,outerRadius:C},_=WH,v=Pa.cursorLine}else y={points:zde(o,f,a)},_=xg,v=Pa.cursorLine;var R=typeof l=="object"&&"className"in l?l.className:void 0,k=t_(t_(t_(t_({stroke:"#ccc",pointerEvents:"none"},a),y),Dg(l)),{},{payload:p,payloadIndex:m,className:nn("recharts-tooltip-cursor",R)});return E.createElement(ec,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:v},E.createElement(_ve,{cursor:l,cursorComp:_,cursorProps:k}))}function Sve(t){var e=Vge(),n=EH(),r=Zg(),i=HW();return e==null||n==null||r==null||i==null?null:E.createElement(wve,ET({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var YW=E.createContext(null),Eve=()=>E.useContext(YW),HC={exports:{}},H4;function Mve(){return H4||(H4=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function a(l,u,d,f,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new i(d,f||l,p),y=n?n+u:u;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],m]:l._events[y].push(m):(l._events[y]=m,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,m=f.length,y=new Array(m);p<m;p++)y[p]=f[p].fn;return y},o.prototype.listenerCount=function(u){var d=n?n+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,p,m,y){var _=n?n+u:u;if(!this._events[_])return!1;var v=this._events[_],w=arguments.length,M,C;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),w){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,p),!0;case 5:return v.fn.call(v.context,d,f,p,m),!0;case 6:return v.fn.call(v.context,d,f,p,m,y),!0}for(C=1,M=new Array(w-1);C<w;C++)M[C-1]=arguments[C];v.fn.apply(v.context,M)}else{var N=v.length,P;for(C=0;C<N;C++)switch(v[C].once&&this.removeListener(u,v[C].fn,void 0,!0),w){case 1:v[C].fn.call(v[C].context);break;case 2:v[C].fn.call(v[C].context,d);break;case 3:v[C].fn.call(v[C].context,d,f);break;case 4:v[C].fn.call(v[C].context,d,f,p);break;default:if(!M)for(P=1,M=new Array(w-1);P<w;P++)M[P-1]=arguments[P];v[C].fn.apply(v[C].context,M)}}return!0},o.prototype.on=function(u,d,f){return a(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return a(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,p){var m=n?n+u:u;if(!this._events[m])return this;if(!d)return s(this,m),this;var y=this._events[m];if(y.fn)y.fn===d&&(!p||y.once)&&(!f||y.context===f)&&s(this,m);else{for(var _=0,v=[],w=y.length;_<w;_++)(y[_].fn!==d||p&&!y[_].once||f&&y[_].context!==f)&&v.push(y[_]);v.length?this._events[m]=v.length===1?v[0]:v:s(this,m)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(HC)),HC.exports}var Cve=Mve();const Nve=Zl(Cve);var Ny=new Nve,MT="recharts.syncEvent.tooltip",V4="recharts.syncEvent.brush";function qW(t,e){if(e){var n=Number.parseInt(e,10);if(!Yl(n))return t?.[n]}}var Ave={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},XW=eo({name:"options",initialState:Ave,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Tve=XW.reducer,{createEventEmitter:Pve}=XW.actions;function Rve(t){return t.tooltip.syncInteraction}var Dve={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},KW=eo({name:"chartData",initialState:Dve,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:W4,setDataStartEndIndexes:kve,setComputedData:MDe}=KW.actions,jve=KW.reducer,Ove=["x","y"];function G4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function km(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G4(Object(n),!0).forEach(function(r){Ive(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ive(t,e,n){return(e=Lve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lve(t){var e=Fve(t,"string");return typeof e=="symbol"?e:e+""}function Fve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uve(t,e){if(t==null)return{};var n,r,i=Bve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Bve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function zve(){var t=Wt(OR),e=Wt(IR),n=vr(),r=Wt(zV),i=Wt(_d),a=Zg(),s=d2(),o=Wt(l=>l.rootProps.className);E.useEffect(()=>{if(t==null)return ix;var l=(u,d,f)=>{if(e!==f&&t===u){if(r==="index"){var p;if(s&&d!==null&&d!==void 0&&(p=d.payload)!==null&&p!==void 0&&p.coordinate&&d.payload.sourceViewBox){var m=d.payload.coordinate,{x:y,y:_}=m,v=Uve(m,Ove),{x:w,y:M,width:C,height:N}=d.payload.sourceViewBox,P=km(km({},v),{},{x:s.x+(C?(y-w)/C:0)*s.width,y:s.y+(N?(_-M)/N:0)*s.height});n(km(km({},d),{},{payload:km(km({},d.payload),{},{coordinate:P})}))}else n(d);return}if(i!=null){var R;if(typeof r=="function"){var k={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},U=r(i,k);R=i[U]}else r==="value"&&(R=i.find(ee=>String(ee.value)===d.payload.label));var{coordinate:I}=d.payload;if(R==null||d.payload.active===!1||I==null||s==null){n(wT({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:L,y:z}=I,O=Math.min(L,s.x+s.width),q=Math.min(z,s.y+s.height),Y={x:a==="horizontal"?R.coordinate:O,y:a==="horizontal"?q:R.coordinate},X=wT({active:d.payload.active,coordinate:Y,dataKey:d.payload.dataKey,index:String(R.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});n(X)}}};return Ny.on(MT,l),()=>{Ny.off(MT,l)}},[o,n,e,t,r,i,a,s])}function Hve(){var t=Wt(OR),e=Wt(IR),n=vr();E.useEffect(()=>{if(t==null)return ix;var r=(i,a,s)=>{e!==s&&t===i&&n(kve(a))};return Ny.on(V4,r),()=>{Ny.off(V4,r)}},[n,e,t])}function Vve(){var t=vr();E.useEffect(()=>{t(Pve())},[t]),zve(),Hve()}function Wve(t,e,n,r,i,a){var s=Wt(m=>Zge(m,t,e)),o=Wt(IR),l=Wt(OR),u=Wt(zV),d=Wt(Rve),f=d?.active,p=d2();E.useEffect(()=>{if(!f&&l!=null&&o!=null){var m=wT({active:a,coordinate:n,dataKey:s,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:p,graphicalItemId:void 0});Ny.emit(MT,l,m,o)}},[f,n,s,i,r,o,l,u,a,p])}function $4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Y4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$4(Object(n),!0).forEach(function(r){Gve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gve(t,e,n){return(e=$ve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ve(t){var e=Yve(t,"string");return typeof e=="symbol"?e:e+""}function Yve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qve(t){return t.dataKey}function Xve(t,e){return E.isValidElement(t)?E.cloneElement(t,e):typeof t=="function"?E.createElement(t,e):E.createElement(Pue,e)}var q4=[],Kve={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ZW(t){var e,n,r=qi(t,Kve),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:l,filterNull:u,isAnimationActive:d,offset:f,payloadUniqBy:p,position:m,reverseDirection:y,useTranslate3d:_,wrapperStyle:v,cursor:w,shared:M,trigger:C,defaultIndex:N,portal:P,axisId:R}=r,k=vr(),U=typeof N=="number"?String(N):N;E.useEffect(()=>{k($me({shared:M,trigger:C,axisId:R,active:i,defaultIndex:U}))},[k,M,C,R,i,U]);var I=d2(),L=OH(),z=Bme(M),{activeIndex:O,isActive:q}=(e=Wt(ie=>eve(ie,z,C,U)))!==null&&e!==void 0?e:{},Y=Wt(ie=>Jge(ie,z,C,U)),X=Wt(ie=>GW(ie,z,C,U)),ee=Wt(ie=>Qge(ie,z,C,U)),se=Y,W=Eve(),$=(n=i??q)!==null&&n!==void 0?n:!1,[G,j]=I8([se,$]),B=z==="axis"?X:void 0;Wve(z,C,ee,B,O,$);var ae=P??W;if(ae==null||I==null||z==null)return null;var re=se??q4;$||(re=q4),u&&re.length&&(re=R8(re.filter(ie=>ie.value!=null&&(ie.hide!==!0||r.includeHidden)),p,qve));var de=re.length>0,ce=E.createElement(Lue,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:d,active:$,coordinate:ee,hasPayload:de,offset:f,position:m,reverseDirection:y,useTranslate3d:_,viewBox:I,wrapperStyle:v,lastBoundingBox:G,innerRef:j,hasPortalFromProps:!!P},Xve(l,Y4(Y4({},r),{},{payload:re,label:B,active:$,activeIndex:O,coordinate:ee,accessibilityLayer:L})));return E.createElement(E.Fragment,null,$g.createPortal(ce,ae),$&&E.createElement(Sve,{cursor:w,tooltipEventType:z,coordinate:ee,payload:re,index:O}))}var j2=t=>null;j2.displayName="Cell";function Zve(t,e,n){return(e=Qve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qve(t){var e=Jve(t,"string");return typeof e=="symbol"?e:e+""}function Jve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class e0e{constructor(e){Zve(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function X4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function t0e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X4(Object(n),!0).forEach(function(r){n0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function n0e(t,e,n){return(e=r0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r0e(t){var e=i0e(t,"string");return typeof e=="symbol"?e:e+""}function i0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var a0e={cacheSize:2e3,enableCache:!0},QW=t0e({},a0e),K4=new e0e(QW.cacheSize),s0e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Z4="recharts_measurement_span";function o0e(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var Q4=(t,e)=>{try{var n=document.getElementById(Z4);n||(n=document.createElement("span"),n.setAttribute("id",Z4),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,s0e,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},G0=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||cx.isSsr)return{width:0,height:0};if(!QW.enableCache)return Q4(e,n);var r=o0e(e,n),i=K4.get(r);if(i)return i;var a=Q4(e,n);return K4.set(r,a),a},JW;function l0e(t,e,n){return(e=c0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c0e(t){var e=u0e(t,"string");return typeof e=="symbol"?e:e+""}function u0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var J4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,e5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,d0e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,f0e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,h0e={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},p0e=["cm","mm","pt","pc","in","Q","px"];function m0e(t){return p0e.includes(t)}var og="NaN";function g0e(t,e){return t*h0e[e]}class Na{static parse(e){var n,[,r,i]=(n=f0e.exec(e))!==null&&n!==void 0?n:[];return r==null?Na.NaN:new Na(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Yl(e)&&(this.unit=""),n!==""&&!d0e.test(n)&&(this.num=NaN,this.unit=""),m0e(n)&&(this.num=g0e(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Na(NaN,""):new Na(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Na(NaN,""):new Na(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Na(NaN,""):new Na(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Na(NaN,""):new Na(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Yl(this.num)}}JW=Na;l0e(Na,"NaN",new JW(NaN,""));function eG(t){if(t==null||t.includes(og))return og;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,a]=(n=J4.exec(e))!==null&&n!==void 0?n:[],s=Na.parse(r??""),o=Na.parse(a??""),l=i==="*"?s.multiply(o):s.divide(o);if(l.isNaN())return og;e=e.replace(J4,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,d,f,p]=(u=e5.exec(e))!==null&&u!==void 0?u:[],m=Na.parse(d??""),y=Na.parse(p??""),_=f==="+"?m.add(y):m.subtract(y);if(_.isNaN())return og;e=e.replace(e5,_.toString())}return e}var t5=/\(([^()]*)\)/;function v0e(t){for(var e=t,n;(n=t5.exec(e))!=null;){var[,r]=n;e=e.replace(t5,eG(r))}return e}function y0e(t){var e=t.replace(/\s+/g,"");return e=v0e(e),e=eG(e),e}function x0e(t){try{return y0e(t)}catch{return og}}function VC(t){var e=x0e(t.slice(5,-1));return e===og?"":e}var b0e=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],_0e=["dx","dy","angle","className","breakAll"];function CT(){return CT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CT.apply(null,arguments)}function n5(t,e){if(t==null)return{};var n,r,i=w0e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function w0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var tG=/[ \f\n\r\t\v\u2028\u2029]+/,nG=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];ua(e)||(n?i=e.toString().split(""):i=e.toString().split(tG));var a=i.map(o=>({word:o,width:G0(o,r).width})),s=n?0:G0("",r).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function S0e(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var rG=(t,e,n,r)=>t.reduce((i,a)=>{var{word:s,width:o}=a,l=i[i.length-1];if(l&&o!=null&&(e==null||r||l.width+o+n<Number(e)))l.words.push(s),l.width+=o+n;else{var u={words:[s],width:o};i.push(u)}return i},[]),iG=t=>t.reduce((e,n)=>e.width>n.width?e:n),E0e="",r5=(t,e,n,r,i,a,s,o)=>{var l=t.slice(0,e),u=nG({breakAll:n,style:r,children:l+E0e});if(!u)return[!1,[]];var d=rG(u.wordsWithComputedWidth,a,s,o),f=d.length>i||iG(d).width>Number(a);return[f,d]},M0e=(t,e,n,r,i)=>{var{maxLines:a,children:s,style:o,breakAll:l}=t,u=Ft(a),d=String(s),f=rG(e,r,n,i);if(!u||i)return f;var p=f.length>a||iG(f).width>Number(r);if(!p)return f;for(var m=0,y=d.length-1,_=0,v;m<=y&&_<=d.length-1;){var w=Math.floor((m+y)/2),M=w-1,[C,N]=r5(d,M,l,o,a,r,n,i),[P]=r5(d,w,l,o,a,r,n,i);if(!C&&!P&&(m=w+1),C&&P&&(y=w-1),!C&&P){v=N;break}_++}return v||f},i5=t=>{var e=ua(t)?[]:t.toString().split(tG);return[{words:e,width:void 0}]},C0e=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:s}=t;if((e||n)&&!cx.isSsr){var o,l,u=nG({breakAll:a,children:r,style:i});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,l=f}else return i5(r);return M0e({breakAll:a,children:r,maxLines:s,style:i},o,l,e,!!n)}return i5(r)},aG="#808080",N0e={angle:0,breakAll:!1,capHeight:"0.71em",fill:aG,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},O2=E.forwardRef((t,e)=>{var n=qi(t,N0e),{x:r,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:l,textAnchor:u,verticalAnchor:d}=n,f=n5(n,b0e),p=E.useMemo(()=>C0e({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:l,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,l,f.style,f.width]),{dx:m,dy:y,angle:_,className:v,breakAll:w}=f,M=n5(f,_0e);if(!$c(r)||!$c(i)||p.length===0)return null;var C=Number(r)+(Ft(m)?m:0),N=Number(i)+(Ft(y)?y:0);if(!Dr(C)||!Dr(N))return null;var P;switch(d){case"start":P=VC("calc(".concat(s,")"));break;case"middle":P=VC("calc(".concat((p.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:P=VC("calc(".concat(p.length-1," * -").concat(a,")"));break}var R=[];if(l){var k=p[0].width,{width:U}=f;R.push("scale(".concat(Ft(U)&&Ft(k)?U/k:1,")"))}return _&&R.push("rotate(".concat(_,", ").concat(C,", ").concat(N,")")),R.length&&(M.transform=R.join(" ")),E.createElement("text",CT({},ws(M),{ref:e,x:C,y:N,className:nn("recharts-text",v),textAnchor:u,fill:o.includes("url")?aG:o}),p.map((I,L)=>{var z=I.words.join(w?"":" ");return E.createElement("tspan",{x:C,dy:L===0?P:a,key:"".concat(z,"-").concat(L)},z)}))});O2.displayName="Text";var A0e=["labelRef"],T0e=["content"];function a5(t,e){if(t==null)return{};var n,r,i=P0e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function P0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function s5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s5(Object(n),!0).forEach(function(r){R0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function R0e(t,e,n){return(e=D0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D0e(t){var e=k0e(t,"string");return typeof e=="symbol"?e:e+""}function k0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bu(){return Bu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bu.apply(null,arguments)}var sG=E.createContext(null),j0e=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s,children:o}=t,l=E.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s}),[e,n,r,i,a,s]);return E.createElement(sG.Provider,{value:l},o)},oG=()=>{var t=E.useContext(sG),e=d2();return t||SH(e)},O0e=E.createContext(null),I0e=()=>{var t=E.useContext(O0e),e=Wt($V);return t||e},L0e=t=>{var{value:e,formatter:n}=t,r=ua(t.children)?e:t.children;return typeof n=="function"?n(r):r},yD=t=>t!=null&&typeof t=="function",F0e=(t,e)=>{var n=Qa(e-t),r=Math.min(Math.abs(e-t),360);return n*r},U0e=(t,e,n,r,i)=>{var{offset:a,className:s}=t,{cx:o,cy:l,innerRadius:u,outerRadius:d,startAngle:f,endAngle:p,clockWise:m}=i,y=(u+d)/2,_=F0e(f,p),v=_>=0?1:-1,w,M;switch(e){case"insideStart":w=f+v*a,M=m;break;case"insideEnd":w=p-v*a,M=!m;break;case"end":w=p+v*a,M=m;break;default:throw new Error("Unsupported position ".concat(e))}M=_<=0?M:!M;var C=Di(o,l,y,w),N=Di(o,l,y,w+(M?1:-1)*359),P="M".concat(C.x,",").concat(C.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(M?0:1,`,
    `).concat(N.x,",").concat(N.y),R=ua(t.id)?py("recharts-radial-line-"):t.id;return E.createElement("text",Bu({},r,{dominantBaseline:"central",className:nn("recharts-radial-bar-label",s)}),E.createElement("defs",null,E.createElement("path",{id:R,d:P})),E.createElement("textPath",{xlinkHref:"#".concat(R)},n))},B0e=(t,e,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:l}=t,u=(o+l)/2;if(n==="outside"){var{x:d,y:f}=Di(r,i,s+e,u);return{x:d,y:f,textAnchor:d>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var p=(a+s)/2,{x:m,y}=Di(r,i,p,u);return{x:m,y,textAnchor:"middle",verticalAnchor:"middle"}},NT=t=>"cx"in t&&Ft(t.cx),z0e=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,a;n!=null&&!NT(n)&&(a=n);var{x:s,y:o,upperWidth:l,lowerWidth:u,height:d}=e,f=s,p=s+(l-u)/2,m=(f+p)/2,y=(l+u)/2,_=f+l/2,v=d>=0?1:-1,w=v*r,M=v>0?"end":"start",C=v>0?"start":"end",N=l>=0?1:-1,P=N*r,R=N>0?"end":"start",k=N>0?"start":"end";if(i==="top"){var U={x:f+l/2,y:o-w,textAnchor:"middle",verticalAnchor:M};return fi(fi({},U),a?{height:Math.max(o-a.y,0),width:l}:{})}if(i==="bottom"){var I={x:p+u/2,y:o+d+w,textAnchor:"middle",verticalAnchor:C};return fi(fi({},I),a?{height:Math.max(a.y+a.height-(o+d),0),width:u}:{})}if(i==="left"){var L={x:m-P,y:o+d/2,textAnchor:R,verticalAnchor:"middle"};return fi(fi({},L),a?{width:Math.max(L.x-a.x,0),height:d}:{})}if(i==="right"){var z={x:m+y+P,y:o+d/2,textAnchor:k,verticalAnchor:"middle"};return fi(fi({},z),a?{width:Math.max(a.x+a.width-z.x,0),height:d}:{})}var O=a?{width:y,height:d}:{};return i==="insideLeft"?fi({x:m+P,y:o+d/2,textAnchor:k,verticalAnchor:"middle"},O):i==="insideRight"?fi({x:m+y-P,y:o+d/2,textAnchor:R,verticalAnchor:"middle"},O):i==="insideTop"?fi({x:f+l/2,y:o+w,textAnchor:"middle",verticalAnchor:C},O):i==="insideBottom"?fi({x:p+u/2,y:o+d-w,textAnchor:"middle",verticalAnchor:M},O):i==="insideTopLeft"?fi({x:f+P,y:o+w,textAnchor:k,verticalAnchor:C},O):i==="insideTopRight"?fi({x:f+l-P,y:o+w,textAnchor:R,verticalAnchor:C},O):i==="insideBottomLeft"?fi({x:p+P,y:o+d-w,textAnchor:k,verticalAnchor:M},O):i==="insideBottomRight"?fi({x:p+u-P,y:o+d-w,textAnchor:R,verticalAnchor:M},O):i&&typeof i=="object"&&(Ft(i.x)||td(i.x))&&(Ft(i.y)||td(i.y))?fi({x:s+No(i.x,y),y:o+No(i.y,d),textAnchor:"end",verticalAnchor:"end"},O):fi({x:_,y:o+d/2,textAnchor:"middle",verticalAnchor:"middle"},O)},H0e={angle:0,offset:5,zIndex:Pa.label,position:"middle",textBreakAll:!1};function ff(t){var e=qi(t,H0e),{viewBox:n,position:r,value:i,children:a,content:s,className:o="",textBreakAll:l,labelRef:u}=e,d=I0e(),f=oG(),p=r==="center"?f:d??f,m,y,_;if(n==null?m=p:NT(n)?m=n:m=SH(n),!m||ua(i)&&ua(a)&&!E.isValidElement(s)&&typeof s!="function")return null;var v=fi(fi({},e),{},{viewBox:m});if(E.isValidElement(s)){var{labelRef:w}=v,M=a5(v,A0e);return E.cloneElement(s,M)}if(typeof s=="function"){var{content:C}=v,N=a5(v,T0e);if(y=E.createElement(s,N),E.isValidElement(y))return y}else y=L0e(e);var P=ws(e);if(NT(m)){if(r==="insideStart"||r==="insideEnd"||r==="end")return U0e(e,r,y,P,m);_=B0e(m,e.offset,e.position)}else _=z0e(e,m);return E.createElement(ec,{zIndex:e.zIndex},E.createElement(O2,Bu({ref:u,className:nn("recharts-label",o)},P,_,{textAnchor:S0e(P.textAnchor)?P.textAnchor:_.textAnchor,breakAll:l}),y))}ff.displayName="Label";var V0e=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?E.createElement(ff,Bu({key:"label-implicit"},r)):$c(t)?E.createElement(ff,Bu({key:"label-implicit",value:t},r)):E.isValidElement(t)?t.type===ff?E.cloneElement(t,fi({key:"label-implicit"},r)):E.createElement(ff,Bu({key:"label-implicit",content:t},r)):yD(t)?E.createElement(ff,Bu({key:"label-implicit",content:t},r)):t&&typeof t=="object"?E.createElement(ff,Bu({},t,{key:"label-implicit"},r)):null};function W0e(t){var{label:e,labelRef:n}=t,r=oG();return V0e(e,r,n)||null}var WC={},GC={},o5;function G0e(){return o5||(o5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(GC)),GC}var $C={},l5;function $0e(){return l5||(l5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})($C)),$C}var c5;function Y0e(){return c5||(c5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=G0e(),n=$0e(),r=XP();function i(a){if(r.isArrayLike(a))return e.last(n.toArray(a))}t.last=i})(WC)),WC}var YC,u5;function q0e(){return u5||(u5=1,YC=Y0e().last),YC}var X0e=q0e();const K0e=Zl(X0e);var Z0e=["valueAccessor"],Q0e=["dataKey","clockWise","id","textBreakAll","zIndex"];function j1(){return j1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j1.apply(null,arguments)}function d5(t,e){if(t==null)return{};var n,r,i=J0e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function J0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var eye=t=>Array.isArray(t.value)?K0e(t.value):t.value,lG=E.createContext(void 0),tye=lG.Provider,cG=E.createContext(void 0),nye=cG.Provider;function rye(){return E.useContext(lG)}function iye(){return E.useContext(cG)}function _w(t){var{valueAccessor:e=eye}=t,n=d5(t,Z0e),{dataKey:r,clockWise:i,id:a,textBreakAll:s,zIndex:o}=n,l=d5(n,Q0e),u=rye(),d=iye(),f=u||d;return!f||!f.length?null:E.createElement(ec,{zIndex:o??Pa.label},E.createElement(Da,{className:"recharts-label-list"},f.map((p,m)=>{var y,_=ua(r)?e(p,m):Er(p&&p.payload,r),v=ua(a)?{}:{id:"".concat(a,"-").concat(m)};return E.createElement(ff,j1({key:"label-".concat(m)},ws(p),l,v,{fill:(y=n.fill)!==null&&y!==void 0?y:p.fill,parentViewBox:p.parentViewBox,value:_,textBreakAll:s,viewBox:p.viewBox,index:m,zIndex:0}))})))}_w.displayName="LabelList";function uG(t){var{label:e}=t;return e?e===!0?E.createElement(_w,{key:"labelList-implicit"}):E.isValidElement(e)||yD(e)?E.createElement(_w,{key:"labelList-implicit",content:e}):typeof e=="object"?E.createElement(_w,j1({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function AT(){return AT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AT.apply(null,arguments)}var dG=t=>{var{cx:e,cy:n,r,className:i}=t,a=nn("recharts-dot",i);return Ft(e)&&Ft(n)&&Ft(r)?E.createElement("circle",AT({},Po(t),YP(t),{className:a,cx:e,cy:n,r})):null},fG=t=>t.graphicalItems.polarItems,aye=Ge([jr,mx],VR),I2=Ge([fG,Vr,aye],WR),sye=Ge([I2],GR),L2=Ge([sye,E2],$R),oye=Ge([L2,Vr,I2],qR);Ge([L2,Vr,I2],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var a,s=Er(r,(a=e.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:s,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(r=>({value:Er(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var f5=()=>{},lye=Ge([L2,Vr,I2,P2,jr],QR),cye=Ge([Vr,KR,ZR,f5,lye,f5,ir,jr],JR),hG=Ge([Vr,ir,L2,oye,px,jr,cye],eD),uye=Ge([hG,Vr,rv],rD);Ge([Vr,hG,uye,jr],aD);var dye={radiusAxis:{},angleAxis:{}},pG=eo({name:"polarAxis",initialState:dye,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:CDe,removeRadiusAxis:NDe,addAngleAxis:ADe,removeAngleAxis:TDe}=pG.actions,fye=pG.reducer;function h5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function p5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h5(Object(n),!0).forEach(function(r){hye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hye(t,e,n){return(e=pye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pye(t){var e=mye(t,"string");return typeof e=="symbol"?e:e+""}function mye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gye=(t,e)=>e,xD=Ge([fG,gye],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),vye=[],bD=(t,e,n)=>n?.length===0?vye:n,mG=Ge([E2,xD,bD],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if(e?.data!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(a=>p5(p5({},e.presentationProps),a.props))),i!=null)return i}}),yye=Ge([mG,xD,bD],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var a,s=Er(r,e.nameKey,e.name),o;return n!=null&&(a=n[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?o=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?o=r.fill:o=e.fill,{value:s2(s,e.dataKey),color:o,payload:r,type:e.legendType}})}),xye=Ge([mG,xD,bD,da],(t,e,n,r)=>{if(!(e==null||t==null))return Mxe({offset:r,pieSettings:e,displayedData:t,cells:n})}),bye=Pz(),m5=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",g5=null,qC=null,gG=t=>{if(t===g5&&Array.isArray(qC))return qC;var e=[];return E.Children.forEach(t,n=>{ua(n)||(bye.isFragment(n)?e=e.concat(gG(n.props.children)):e.push(n))}),qC=e,g5=t,e};function vG(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>m5(i)):r=[m5(e)],gG(t).forEach(i=>{var a=gp(i,"type.displayName")||gp(i,"type.name");a&&r.indexOf(a)!==-1&&n.push(i)}),n}var yG=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,XC={},v5;function _ye(){return v5||(v5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(XC)),XC}var KC,y5;function wye(){return y5||(y5=1,KC=_ye().isPlainObject),KC}var Sye=wye();const Eye=Zl(Sye);var x5,b5,_5,w5,S5;function E5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function M5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E5(Object(n),!0).forEach(function(r){Mye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mye(t,e,n){return(e=Cye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cye(t){var e=Nye(t,"string");return typeof e=="symbol"?e:e+""}function Nye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function O1(){return O1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O1.apply(null,arguments)}function y0(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var C5=(t,e,n,r,i)=>{var a=n-r,s;return s=Jr(x5||(x5=y0(["M ",",",""])),t,e),s+=Jr(b5||(b5=y0(["L ",",",""])),t+n,e),s+=Jr(_5||(_5=y0(["L ",",",""])),t+n-a/2,e+i),s+=Jr(w5||(w5=y0(["L ",",",""])),t+n-a/2-r,e+i),s+=Jr(S5||(S5=y0(["L ",","," Z"])),t,e),s},Aye={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Tye=t=>{var e=qi(t,Aye),{x:n,y:r,upperWidth:i,lowerWidth:a,height:s,className:o}=e,{animationEasing:l,animationDuration:u,animationBegin:d,isUpdateAnimationActive:f}=e,p=E.useRef(null),[m,y]=E.useState(-1),_=E.useRef(i),v=E.useRef(a),w=E.useRef(s),M=E.useRef(n),C=E.useRef(r),N=v2(t,"trapezoid-");if(E.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var Y=p.current.getTotalLength();Y&&y(Y)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var P=nn("recharts-trapezoid",o);if(!f)return E.createElement("g",null,E.createElement("path",O1({},ws(e),{className:P,d:C5(n,r,i,a,s)})));var R=_.current,k=v.current,U=w.current,I=M.current,L=C.current,z="0px ".concat(m===-1?1:m,"px"),O="".concat(m,"px 0px"),q=IH(["strokeDasharray"],u,l);return E.createElement(g2,{animationId:N,key:N,canBegin:m>0,duration:u,easing:l,isActive:f,begin:d},Y=>{var X=Ta(R,i,Y),ee=Ta(k,a,Y),se=Ta(U,s,Y),W=Ta(I,n,Y),$=Ta(L,r,Y);p.current&&(_.current=X,v.current=ee,w.current=se,M.current=W,C.current=$);var G=Y>0?{transition:q,strokeDasharray:O}:{strokeDasharray:z};return E.createElement("path",O1({},ws(e),{className:P,d:C5(W,$,X,ee,se),ref:p,style:M5(M5({},G),e.style)}))})},Pye=["option","shapeType","activeClassName"];function Rye(t,e){if(t==null)return{};var n,r,i=Dye(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Dye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function N5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function I1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N5(Object(n),!0).forEach(function(r){kye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kye(t,e,n){return(e=jye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jye(t){var e=Oye(t,"string");return typeof e=="symbol"?e:e+""}function Oye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Iye(t,e){return I1(I1({},e),t)}function Lye(t,e){return t==="symbols"}function A5(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return E.createElement(BH,n);case"trapezoid":return E.createElement(Tye,n);case"sector":return E.createElement(WH,n);case"symbols":if(Lye(e))return E.createElement($P,n);break;case"curve":return E.createElement(xg,n);default:return null}}function Fye(t){return E.isValidElement(t)?t.props:t}function Uye(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=Rye(t,Pye),a;if(E.isValidElement(e))a=E.cloneElement(e,I1(I1({},i),Fye(e)));else if(typeof e=="function")a=e(i,i.index);else if(Eye(e)&&typeof e!="boolean"){var s=Iye(e,i);a=E.createElement(A5,{shapeType:n,elementProps:s})}else{var o=i;a=E.createElement(A5,{shapeType:n,elementProps:o})}return i.isActive?E.createElement(Da,{className:r},a):a}var Bye=(t,e,n)=>{var r=vr();return(i,a)=>s=>{t?.(i,a,s),r(MW({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},zye=t=>{var e=vr();return(n,r)=>i=>{t?.(n,r,i),e(Yme())}},Hye=(t,e,n)=>{var r=vr();return(i,a)=>s=>{t?.(i,a,s),r(qme({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function xG(t){var{tooltipEntrySettings:e}=t,n=vr(),r=to(),i=E.useRef(null);return E.useLayoutEffect(()=>{r||(i.current===null?n(Vme(e)):i.current!==e&&n(Wme({prev:i.current,next:e})),i.current=e)},[e,n,r]),E.useLayoutEffect(()=>()=>{i.current&&(n(Gme(i.current)),i.current=null)},[n]),null}function Vye(t){var{legendPayload:e}=t,n=vr(),r=to(),i=E.useRef(null);return E.useLayoutEffect(()=>{r||(i.current===null?n(DH(e)):i.current!==e&&n(kH({prev:i.current,next:e})),i.current=e)},[n,r,e]),E.useLayoutEffect(()=>()=>{i.current&&(n(jH(i.current)),i.current=null)},[n]),null}function Wye(t){var{legendPayload:e}=t,n=vr(),r=Wt(ir),i=E.useRef(null);return E.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(DH(e)):i.current!==e&&n(kH({prev:i.current,next:e})),i.current=e)},[n,r,e]),E.useLayoutEffect(()=>()=>{i.current&&(n(jH(i.current)),i.current=null)},[n]),null}var ZC,Gye=()=>{var[t]=E.useState(()=>py("uid-"));return t},$ye=(ZC=wg.useId)!==null&&ZC!==void 0?ZC:Gye;function Yye(t,e){var n=$ye();return e||(t?"".concat(t,"-").concat(n):n)}var qye=E.createContext(void 0),bG=t=>{var{id:e,type:n,children:r}=t,i=Yye("recharts-".concat(n),e);return E.createElement(qye.Provider,{value:i},r(i))},Xye={cartesianItems:[],polarItems:[]},_G=eo({name:"graphicalItems",initialState:Xye,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Ar()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Gl(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:Ar()},removeCartesianGraphicalItem:{reducer(t,e){var n=Gl(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Ar()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Ar()},removePolarGraphicalItem:{reducer(t,e){var n=Gl(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Ar()}}}),{addCartesianGraphicalItem:Kye,replaceCartesianGraphicalItem:Zye,removeCartesianGraphicalItem:Qye,addPolarGraphicalItem:Jye,removePolarGraphicalItem:exe}=_G.actions,txe=_G.reducer,nxe=t=>{var e=vr(),n=E.useRef(null);return E.useLayoutEffect(()=>{n.current===null?e(Kye(t)):n.current!==t&&e(Zye({prev:n.current,next:t})),n.current=t},[e,t]),E.useLayoutEffect(()=>()=>{n.current&&(e(Qye(n.current)),n.current=null)},[e]),null},rxe=E.memo(nxe);function ixe(t){var e=vr();return E.useLayoutEffect(()=>(e(Jye(t)),()=>{e(exe(t))}),[e,t]),null}var axe=["key"],sxe=["onMouseEnter","onClick","onMouseLeave"],oxe=["id"],lxe=["id"];function T5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ei(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T5(Object(n),!0).forEach(function(r){cxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cxe(t,e,n){return(e=uxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uxe(t){var e=dxe(t,"string");return typeof e=="symbol"?e:e+""}function dxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mf(){return Mf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mf.apply(null,arguments)}function F2(t,e){if(t==null)return{};var n,r,i=fxe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function fxe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function hxe(t){var e=E.useMemo(()=>vG(t.children,j2),[t.children]),n=Wt(r=>yye(r,t.id,e));return n==null?null:E.createElement(Wye,{legendPayload:n})}var pxe=E.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:a,fill:s,name:o,hide:l,tooltipType:u,id:d}=t,f={dataDefinedOnItem:r.map(p=>p.tooltipPayload),positions:r.map(p=>p.tooltipPosition),settings:{stroke:i,strokeWidth:a,fill:s,dataKey:e,nameKey:n,name:s2(o,e),hide:l,type:u,color:s,unit:"",graphicalItemId:d}};return E.createElement(xG,{tooltipEntrySettings:f})}),mxe=(t,e)=>t>e?"start":t<e?"end":"middle",gxe=(t,e,n)=>No(typeof e=="function"?e(t):e,n,n*.8),vxe=(t,e,n)=>{var{top:r,left:i,width:a,height:s}=e,o=zH(a,s),l=i+No(t.cx,a,a/2),u=r+No(t.cy,s,s/2),d=No(t.innerRadius,o,0),f=gxe(n,t.outerRadius,o),p=t.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:l,cy:u,innerRadius:d,outerRadius:f,maxRadius:p}},yxe=(t,e)=>{var n=Qa(e-t),r=Math.min(Math.abs(e-t),360);return n*r};function xxe(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var bxe=(t,e)=>{if(E.isValidElement(t))return E.cloneElement(t,e);if(typeof t=="function")return t(e);var n=nn("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=F2(e,axe);return E.createElement(xg,Mf({},i,{type:"linear",className:n}))},_xe=(t,e,n)=>{if(E.isValidElement(t))return E.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),E.isValidElement(r)))return r;var i=nn("recharts-pie-label-text",xxe(t));return E.createElement(O2,Mf({},e,{alignmentBaseline:"middle",className:i}),r)};function wxe(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:a,dataKey:s}=n;if(!r||!i||!e)return null;var o=Po(n),l=Dg(i),u=Dg(a),d=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,f=e.map((p,m)=>{var y=(p.startAngle+p.endAngle)/2,_=Di(p.cx,p.cy,p.outerRadius+d,y),v=ei(ei(ei(ei({},o),p),{},{stroke:"none"},l),{},{index:m,textAnchor:mxe(_.x,p.cx)},_),w=ei(ei(ei(ei({},o),p),{},{fill:"none",stroke:p.fill},u),{},{index:m,points:[Di(p.cx,p.cy,p.outerRadius,y),_],key:"line"});return E.createElement(ec,{zIndex:Pa.label,key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(m)},E.createElement(Da,null,a&&bxe(a,w),_xe(i,v,Er(p,s))))});return E.createElement(Da,{className:"recharts-pie-labels"},f)}function Sxe(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?E.createElement(uG,{label:i}):E.createElement(wxe,{sectors:e,props:n,showLabels:r})}function Exe(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:a,id:s}=t,o=Wt(Ug),l=Wt(UW),u=Wt(kge),{onMouseEnter:d,onClick:f,onMouseLeave:p}=i,m=F2(i,sxe),y=Bye(d,i.dataKey,s),_=zye(p),v=Hye(f,i.dataKey,s);return e==null||e.length===0?null:E.createElement(E.Fragment,null,e.map((w,M)=>{if(w?.startAngle===0&&w?.endAngle===0&&e.length!==1)return null;var C=u==null||u===s,N=String(M)===o&&(l==null||i.dataKey===l)&&C,P=o?r:null,R=n&&N?n:P,k=ei(ei({},w),{},{stroke:w.stroke,tabIndex:-1,[gH]:M,[vH]:s});return E.createElement(Da,Mf({key:"sector-".concat(w?.startAngle,"-").concat(w?.endAngle,"-").concat(w.midAngle,"-").concat(M),tabIndex:-1,className:"recharts-pie-sector"},qP(m,w,M),{onMouseEnter:y(w,M),onMouseLeave:_(w,M),onClick:v(w,M)}),E.createElement(Uye,Mf({option:a??R,index:M,shapeType:"sector",isActive:N},k)))}))}function Mxe(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:a}=t,{cornerRadius:s,startAngle:o,endAngle:l,dataKey:u,nameKey:d,tooltipType:f}=n,p=Math.abs(n.minAngle),m=yxe(o,l),y=Math.abs(m),_=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,v=r.filter(R=>Er(R,u,0)!==0).length,w=(y>=360?v:v-1)*_,M=y-v*p-w,C=r.reduce((R,k)=>{var U=Er(k,u,0);return R+(Ft(U)?U:0)},0),N;if(C>0){var P;N=r.map((R,k)=>{var U=Er(R,u,0),I=Er(R,d,k),L=vxe(n,a,R),z=(Ft(U)?U:0)/C,O,q=ei(ei({},R),i&&i[k]&&i[k].props);k?O=P.endAngle+Qa(m)*_*(U!==0?1:0):O=o;var Y=O+Qa(m)*((U!==0?p:0)+z*M),X=(O+Y)/2,ee=(L.innerRadius+L.outerRadius)/2,se=[{name:I,value:U,payload:q,dataKey:u,type:f,graphicalItemId:n.id}],W=Di(L.cx,L.cy,ee,X);return P=ei(ei(ei(ei({},n.presentationProps),{},{percent:z,cornerRadius:typeof s=="string"?parseFloat(s):s,name:I,tooltipPayload:se,midAngle:X,middleRadius:ee,tooltipPosition:W},q),L),{},{value:U,dataKey:u,startAngle:O,endAngle:Y,payload:q,paddingAngle:Qa(m)*_}),P})}return N}function Cxe(t){var{showLabels:e,sectors:n,children:r}=t,i=E.useMemo(()=>!e||!n?[]:n.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[n,e]);return E.createElement(nye,{value:e?i:void 0},r)}function Nxe(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:l,activeShape:u,inactiveShape:d,onAnimationStart:f,onAnimationEnd:p}=e,m=v2(e,"recharts-pie-"),y=n.current,[_,v]=E.useState(!1),w=E.useCallback(()=>{typeof p=="function"&&p(),v(!1)},[p]),M=E.useCallback(()=>{typeof f=="function"&&f(),v(!0)},[f]);return E.createElement(Cxe,{showLabels:!_,sectors:i},E.createElement(g2,{animationId:m,begin:s,duration:o,isActive:a,easing:l,onAnimationStart:M,onAnimationEnd:w,key:m},C=>{var N=[],P=i&&i[0],R=P?.startAngle;return i?.forEach((k,U)=>{var I=y&&y[U],L=U>0?gp(k,"paddingAngle",0):0;if(I){var z=Ta(I.endAngle-I.startAngle,k.endAngle-k.startAngle,C),O=ei(ei({},k),{},{startAngle:R+L,endAngle:R+z+L});N.push(O),R=O.endAngle}else{var{endAngle:q,startAngle:Y}=k,X=Ta(0,q-Y,C),ee=ei(ei({},k),{},{startAngle:R+L,endAngle:R+X+L});N.push(ee),R=ee.endAngle}}),n.current=N,E.createElement(Da,null,E.createElement(Exe,{sectors:N,activeShape:u,inactiveShape:d,allOtherPieProps:e,shape:e.shape,id:r}))}),E.createElement(Sxe,{showLabels:!_,sectors:i,props:e}),e.children)}var Axe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Pa.area};function Txe(t){var{id:e}=t,n=F2(t,oxe),{hide:r,className:i,rootTabIndex:a}=t,s=E.useMemo(()=>vG(t.children,j2),[t.children]),o=Wt(d=>xye(d,e,s)),l=E.useRef(null),u=nn("recharts-pie",i);return r||o==null?(l.current=null,E.createElement(Da,{tabIndex:a,className:u})):E.createElement(ec,{zIndex:t.zIndex},E.createElement(pxe,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:o,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),E.createElement(Da,{tabIndex:a,className:u},E.createElement(Nxe,{props:ei(ei({},n),{},{sectors:o}),previousSectorsRef:l,id:e})))}function wG(t){var e=qi(t,Axe),{id:n}=e,r=F2(e,lxe),i=Po(r);return E.createElement(bG,{id:n,type:"pie"},a=>E.createElement(E.Fragment,null,E.createElement(ixe,{type:"pie",id:a,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),E.createElement(hxe,Mf({},r,{id:a})),E.createElement(Txe,Mf({},r,{id:a}))))}wG.displayName="Pie";var Pxe=["points"];function P5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function QC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P5(Object(n),!0).forEach(function(r){Rxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rxe(t,e,n){return(e=Dxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dxe(t){var e=kxe(t,"string");return typeof e=="symbol"?e:e+""}function kxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function L1(){return L1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L1.apply(null,arguments)}function jxe(t,e){if(t==null)return{};var n,r,i=Oxe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Oxe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ixe(t){var{option:e,dotProps:n,className:r}=t;if(E.isValidElement(e))return E.cloneElement(e,n);if(typeof e=="function")return e(n);var i=nn(r,typeof e!="boolean"?e.className:""),a=n??{},{points:s}=a,o=jxe(a,Pxe);return E.createElement(dG,L1({},o,{className:i}))}function Lxe(t,e){return t==null?!1:e?!0:t.length===1}function Fxe(t){var{points:e,dot:n,className:r,dotClassName:i,dataKey:a,baseProps:s,needClip:o,clipPathId:l,zIndex:u=Pa.scatter}=t;if(!Lxe(e,n))return null;var d=yG(n),f=Xae(n),p=e.map((y,_)=>{var v,w,M=QC(QC(QC({r:3},s),f),{},{index:_,cx:(v=y.x)!==null&&v!==void 0?v:void 0,cy:(w=y.y)!==null&&w!==void 0?w:void 0,dataKey:a,value:y.value,payload:y.payload,points:e});return E.createElement(Ixe,{key:"dot-".concat(_),option:n,dotProps:M,className:i})}),m={};return o&&l!=null&&(m.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(l,")")),E.createElement(ec,{zIndex:u},E.createElement(Da,L1({className:r},m),p))}function R5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function D5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R5(Object(n),!0).forEach(function(r){Uxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Uxe(t,e,n){return(e=Bxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bxe(t){var e=zxe(t,"string");return typeof e=="symbol"?e:e+""}function zxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SG=0,Hxe={xAxis:{},yAxis:{},zAxis:{}},EG=eo({name:"cartesianAxis",initialState:Hxe,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Ar()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:Ar()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Ar()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Ar()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:Ar()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Ar()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Ar()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:Ar()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Ar()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&r===a[1]&&r!==i.width&&Math.abs(r-a[0])<=1)return;var s=[...a,r].slice(-3);t.yAxis[n]=D5(D5({},t.yAxis[n]),{},{width:r,widthHistory:s})}}}}),{addXAxis:Vxe,replaceXAxis:Wxe,removeXAxis:Gxe,addYAxis:$xe,replaceYAxis:Yxe,removeYAxis:qxe,addZAxis:PDe,replaceZAxis:RDe,removeZAxis:DDe,updateYAxisWidth:Xxe}=EG.actions,Kxe=EG.reducer,Zxe=Ge([da],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),Qxe=Ge([Zxe,md,gd],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),_D=()=>Wt(Qxe),Jxe=()=>Wt(Fge);function k5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k5(Object(n),!0).forEach(function(r){ebe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ebe(t,e,n){return(e=tbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tbe(t){var e=nbe(t,"string");return typeof e=="symbol"?e:e+""}function nbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rbe=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:a,clipPath:s}=t;if(i===!1||e.x==null||e.y==null)return null;var o={index:n,dataKey:a,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},l=JC(JC(JC({},o),Dg(i)),YP(i)),u;return E.isValidElement(i)?u=E.cloneElement(i,l):typeof i=="function"?u=i(l):u=E.createElement(dG,l),E.createElement(Da,{className:"recharts-active-dot",clipPath:s},u)};function j5(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i,clipPath:a,zIndex:s=Pa.activeDot}=t,o=Wt(Ug),l=Jxe();if(e==null||l==null)return null;var u=e.find(d=>l.includes(d.payload));return ua(u)?null:E.createElement(ec,{zIndex:s},E.createElement(rbe,{point:u,childIndex:Number(o),mainColor:n,dataKey:i,activeDot:r,clipPath:a}))}var MG=t=>{var{chartData:e}=t,n=vr(),r=to();return E.useEffect(()=>r?()=>{}:(n(W4(e)),()=>{n(W4(void 0))}),[e,n,r]),null},O5={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},CG=eo({name:"brush",initialState:O5,reducers:{setBrushSettings(t,e){return e.payload==null?O5:e.payload}}}),{setBrushSettings:kDe}=CG.actions,ibe=CG.reducer;function abe(t,e,n){return(e=sbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sbe(t){var e=obe(t,"string");return typeof e=="symbol"?e:e+""}function obe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class wD{static create(e){return new wD(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}default:return this.scale(e)}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}abe(wD,"EPS",1e-4);function lbe(t){return(t%180+180)%180}var cbe=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=lbe(i),s=a*Math.PI/180,o=Math.atan(r/n),l=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(l)},ube={dots:[],areas:[],lines:[]},NG=eo({name:"referenceElements",initialState:ube,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Gl(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Gl(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Gl(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:jDe,removeDot:ODe,addArea:IDe,removeArea:LDe,addLine:FDe,removeLine:UDe}=NG.actions,dbe=NG.reducer,fbe=E.createContext(void 0),hbe=t=>{var{children:e}=t,[n]=E.useState("".concat(py("recharts"),"-clip")),r=_D();if(r==null)return null;var{x:i,y:a,width:s,height:o}=r;return E.createElement(fbe.Provider,{value:n},E.createElement("defs",null,E.createElement("clipPath",{id:n},E.createElement("rect",{x:i,y:a,height:o,width:s}))),e)};function AG(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function pbe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return cbe(r,n)}function mbe(t,e,n){var r=n==="width",{x:i,y:a,width:s,height:o}=t;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function Ay(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function gbe(t,e){return AG(t,e+1)}function vbe(t,e,n,r,i){for(var a=(r||[]).slice(),{start:s,end:o}=e,l=0,u=1,d=s,f=function(){var y=r?.[l];if(y===void 0)return{v:AG(r,u)};var _=l,v,w=()=>(v===void 0&&(v=n(y,_)),v),M=y.coordinate,C=l===0||Ay(t,M,w,d,o);C||(l=0,d=s,u+=1),C&&(d=M+t*(w()/2+i),l+=u)},p;u<=a.length;)if(p=f(),p)return p.v;return[]}function ybe(t,e,n,r,i){var a=(r||[]).slice(),s=a.length;if(s===0)return[];for(var{start:o,end:l}=e,u=1;u<=s;u++){for(var d=(s-1)%u,f=o,p=!0,m=function(){var M=r[y],C=y,N,P=()=>(N===void 0&&(N=n(M,C)),N),R=M.coordinate,k=y===d||Ay(t,R,P,f,l);if(!k)return p=!1,1;k&&(f=R+t*(P()/2+i))},y=d;y<s&&!m();y+=u);if(p){for(var _=[],v=d;v<s;v+=u)_.push(r[v]);return _}}return[]}function I5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ya(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I5(Object(n),!0).forEach(function(r){xbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xbe(t,e,n){return(e=bbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bbe(t){var e=_be(t,"string");return typeof e=="symbol"?e:e+""}function _be(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wbe(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,{start:o}=e,{end:l}=e,u=function(p){var m=a[p],y,_=()=>(y===void 0&&(y=n(m,p)),y);if(p===s-1){var v=t*(m.coordinate+t*_()/2-l);a[p]=m=Ya(Ya({},m),{},{tickCoord:v>0?m.coordinate-v*t:m.coordinate})}else a[p]=m=Ya(Ya({},m),{},{tickCoord:m.coordinate});if(m.tickCoord!=null){var w=Ay(t,m.tickCoord,_,o,l);w&&(l=m.tickCoord-t*(_()/2+i),a[p]=Ya(Ya({},m),{},{isShow:!0}))}},d=s-1;d>=0;d--)u(d);return a}function Sbe(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,{start:l,end:u}=e;if(a){var d=r[o-1],f=n(d,o-1),p=t*(d.coordinate+t*f/2-u);if(s[o-1]=d=Ya(Ya({},d),{},{tickCoord:p>0?d.coordinate-p*t:d.coordinate}),d.tickCoord!=null){var m=Ay(t,d.tickCoord,()=>f,l,u);m&&(u=d.tickCoord-t*(f/2+i),s[o-1]=Ya(Ya({},d),{},{isShow:!0}))}}for(var y=a?o-1:o,_=function(M){var C=s[M],N,P=()=>(N===void 0&&(N=n(C,M)),N);if(M===0){var R=t*(C.coordinate-t*P()/2-l);s[M]=C=Ya(Ya({},C),{},{tickCoord:R<0?C.coordinate-R*t:C.coordinate})}else s[M]=C=Ya(Ya({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var k=Ay(t,C.tickCoord,P,l,u);k&&(l=C.tickCoord+t*(P()/2+i),s[M]=Ya(Ya({},C),{},{isShow:!0}))}},v=0;v<y;v++)_(v);return s}function SD(t,e,n){var{tick:r,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:l,tickFormatter:u,unit:d,angle:f}=t;if(!i||!i.length||!r)return[];if(Ft(l)||cx.isSsr){var p;return(p=gbe(i,Ft(l)?l:0))!==null&&p!==void 0?p:[]}var m=[],y=o==="top"||o==="bottom"?"width":"height",_=d&&y==="width"?G0(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},v=(C,N)=>{var P=typeof u=="function"?u(C.value,N):C.value;return y==="width"?pbe(G0(P,{fontSize:e,letterSpacing:n}),_,f):G0(P,{fontSize:e,letterSpacing:n})[y]},w=i.length>=2?Qa(i[1].coordinate-i[0].coordinate):1,M=mbe(a,w,y);return l==="equidistantPreserveStart"?vbe(w,M,v,i,s):l==="equidistantPreserveEnd"?ybe(w,M,v,i,s):(l==="preserveStart"||l==="preserveStartEnd"?m=Sbe(w,M,v,i,s,l==="preserveStartEnd"):m=wbe(w,M,v,i,s),m.filter(C=>C.isShow))}var Ebe=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=t,s=0;if(e){Array.from(e).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>s&&(s=f.width)}});var o=n?n.getBoundingClientRect().width:0,l=i+a,u=s+l+o+(n?r:0);return Math.round(u)}return 0},Mbe=["axisLine","width","height","className","hide","ticks","axisType"];function Cbe(t,e){if(t==null)return{};var n,r,i=Nbe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Nbe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function _p(){return _p=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_p.apply(null,arguments)}function L5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L5(Object(n),!0).forEach(function(r){Abe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Abe(t,e,n){return(e=Tbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tbe(t){var e=Pbe(t,"string");return typeof e=="symbol"?e:e+""}function Pbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Zu={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Pa.axis};function Rbe(t){var{x:e,y:n,width:r,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:l}=t;if(!o)return null;var u=Pi(Pi(Pi({},l),Po(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!s||a==="bottom"&&s);u=Pi(Pi({},u),{},{x1:e,y1:n+d*i,x2:e+r,y2:n+d*i})}else{var f=+(a==="left"&&!s||a==="right"&&s);u=Pi(Pi({},u),{},{x1:e+f*r,y1:n,x2:e+f*r,y2:n+i})}return E.createElement("line",_p({},u,{className:nn("recharts-cartesian-axis-line",gp(o,"className"))}))}function Dbe(t,e,n,r,i,a,s,o,l){var u,d,f,p,m,y,_=o?-1:1,v=t.tickSize||s,w=Ft(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":u=d=t.coordinate,p=n+ +!o*i,f=p-_*v,y=f-_*l,m=w;break;case"left":f=p=t.coordinate,d=e+ +!o*r,u=d-_*v,m=u-_*l,y=w;break;case"right":f=p=t.coordinate,d=e+ +o*r,u=d+_*v,m=u+_*l,y=w;break;default:u=d=t.coordinate,p=n+ +o*i,f=p+_*v,y=f+_*l,m=w;break}return{line:{x1:u,y1:f,x2:d,y2:p},tick:{x:m,y}}}function kbe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function jbe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function Obe(t){var{option:e,tickProps:n,value:r}=t,i,a=nn(n.className,"recharts-cartesian-axis-tick-value");if(E.isValidElement(e))i=E.cloneElement(e,Pi(Pi({},n),{},{className:a}));else if(typeof e=="function")i=e(Pi(Pi({},n),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=nn(s,e?.className)),i=E.createElement(O2,_p({},n,{className:s}),r)}return i}var Ibe=E.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:l,tickTextProps:u,orientation:d,mirror:f,x:p,y:m,width:y,height:_,tickSize:v,tickMargin:w,fontSize:M,letterSpacing:C,getTicksConfig:N,events:P,axisType:R}=t,k=SD(Pi(Pi({},N),{},{ticks:n}),M,C),U=kbe(d,f),I=jbe(d,f),L=Po(N),z=Dg(r),O={};typeof i=="object"&&(O=i);var q=Pi(Pi({},L),{},{fill:"none"},O),Y=k.map(se=>Pi({entry:se},Dbe(se,p,m,y,_,d,v,f,w))),X=Y.map(se=>{var{entry:W,line:$}=se;return E.createElement(Da,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(W.value,"-").concat(W.coordinate,"-").concat(W.tickCoord)},i&&E.createElement("line",_p({},q,$,{className:nn("recharts-cartesian-axis-tick-line",gp(i,"className"))})))}),ee=Y.map((se,W)=>{var{entry:$,tick:G}=se,j=Pi(Pi(Pi(Pi({textAnchor:U,verticalAnchor:I},L),{},{stroke:"none",fill:a},z),G),{},{index:W,payload:$,visibleTicksCount:k.length,tickFormatter:s,padding:l},u);return E.createElement(Da,_p({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat($.value,"-").concat($.coordinate,"-").concat($.tickCoord)},qP(P,$,W)),r&&E.createElement(Obe,{option:r,tickProps:j,value:"".concat(typeof s=="function"?s($.value,W):$.value).concat(o||"")}))});return E.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(R,"-ticks")},ee.length>0&&E.createElement(ec,{zIndex:Pa.label},E.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(R,"-tick-labels"),ref:e},ee)),X.length>0&&E.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(R,"-tick-lines")},X))}),Lbe=E.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:a,hide:s,ticks:o,axisType:l}=t,u=Cbe(t,Mbe),[d,f]=E.useState(""),[p,m]=E.useState(""),y=E.useRef(null);E.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var v;return Ebe({ticks:y.current,label:(v=t.labelRef)===null||v===void 0?void 0:v.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var _=E.useCallback(v=>{if(v){var w=v.getElementsByClassName("recharts-cartesian-axis-tick-value");y.current=w;var M=w[0];if(M){var C=window.getComputedStyle(M),N=C.fontSize,P=C.letterSpacing;(N!==d||P!==p)&&(f(N),m(P))}}},[d,p]);return s||r!=null&&r<=0||i!=null&&i<=0?null:E.createElement(ec,{zIndex:t.zIndex},E.createElement(Da,{className:nn("recharts-cartesian-axis",a)},E.createElement(Rbe,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Po(t)}),E.createElement(Ibe,{ref:_,axisType:l,events:u,fontSize:d,getTicksConfig:t,height:t.height,letterSpacing:p,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:o,unit:t.unit,width:t.width,x:t.x,y:t.y}),E.createElement(j0e,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},E.createElement(W0e,{label:t.label,labelRef:t.labelRef}),t.children)))}),ED=E.forwardRef((t,e)=>{var n=qi(t,Zu);return E.createElement(Lbe,_p({},n,{ref:e}))});ED.displayName="CartesianAxis";var Fbe=["x1","y1","x2","y2","key"],Ube=["offset"],Bbe=["xAxisId","yAxisId"],zbe=["xAxisId","yAxisId"];function F5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ka(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F5(Object(n),!0).forEach(function(r){Hbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hbe(t,e,n){return(e=Vbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vbe(t){var e=Wbe(t,"string");return typeof e=="symbol"?e:e+""}function Wbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gh(){return Gh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gh.apply(null,arguments)}function F1(t,e){if(t==null)return{};var n,r,i=Gbe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Gbe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var $be=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:s,ry:o}=t;return E.createElement("rect",{x:r,y:i,ry:o,width:a,height:s,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function TG(t){var{option:e,lineItemProps:n}=t,r;if(E.isValidElement(e))r=E.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:a,y1:s,x2:o,y2:l,key:u}=n,d=F1(n,Fbe),f=(i=Po(d))!==null&&i!==void 0?i:{},{offset:p}=f,m=F1(f,Ube);r=E.createElement("line",Gh({},m,{x1:a,y1:s,x2:o,y2:l,fill:"none",key:u}))}return r}function Ybe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=F1(t,Bbe),l=i.map((u,d)=>{var f=Ka(Ka({},o),{},{x1:e,y1:u,x2:e+n,y2:u,key:"line-".concat(d),index:d});return E.createElement(TG,{key:"line-".concat(d),option:r,lineItemProps:f})});return E.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function qbe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=F1(t,zbe),l=i.map((u,d)=>{var f=Ka(Ka({},o),{},{x1:u,y1:e,x2:u,y2:e+n,key:"line-".concat(d),index:d});return E.createElement(TG,{option:r,lineItemProps:f,key:"line-".concat(d)})});return E.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function Xbe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:a,height:s,horizontalPoints:o,horizontal:l=!0}=t;if(!l||!e||!e.length||o==null)return null;var u=o.map(f=>Math.round(f+i-i)).sort((f,p)=>f-p);i!==u[0]&&u.unshift(0);var d=u.map((f,p)=>{var m=!u[p+1],y=m?i+s-f:u[p+1]-f;if(y<=0)return null;var _=p%e.length;return E.createElement("rect",{key:"react-".concat(p),y:f,x:r,height:y,width:a,stroke:"none",fill:e[_],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Kbe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:s,height:o,verticalPoints:l}=t;if(!e||!n||!n.length)return null;var u=l.map(f=>Math.round(f+i-i)).sort((f,p)=>f-p);i!==u[0]&&u.unshift(0);var d=u.map((f,p)=>{var m=!u[p+1],y=m?i+s-f:u[p+1]-f;if(y<=0)return null;var _=p%n.length;return E.createElement("rect",{key:"react-".concat(p),x:f,y:a,width:y,height:o,stroke:"none",fill:n[_],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Zbe=(t,e)=>{var{xAxis:n,width:r,height:i,offset:a}=t;return hH(SD(Ka(Ka(Ka({},Zu),n),{},{ticks:pH(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},Qbe=(t,e)=>{var{yAxis:n,width:r,height:i,offset:a}=t;return hH(SD(Ka(Ka(Ka({},Zu),n),{},{ticks:pH(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},Jbe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Pa.grid};function PG(t){var e=iR(),n=aR(),r=EH(),i=Ka(Ka({},qi(t,Jbe)),{},{x:Ft(t.x)?t.x:r.left,y:Ft(t.y)?t.y:r.top,width:Ft(t.width)?t.width:r.width,height:Ft(t.height)?t.height:r.height}),{xAxisId:a,yAxisId:s,x:o,y:l,width:u,height:d,syncWithTicks:f,horizontalValues:p,verticalValues:m}=i,y=to(),_=Wt(I=>D4(I,"xAxis",a,y)),v=Wt(I=>D4(I,"yAxis",s,y));if(!Yc(u)||!Yc(d)||!Ft(o)||!Ft(l))return null;var w=i.verticalCoordinatesGenerator||Zbe,M=i.horizontalCoordinatesGenerator||Qbe,{horizontalPoints:C,verticalPoints:N}=i;if((!C||!C.length)&&typeof M=="function"){var P=p&&p.length,R=M({yAxis:v?Ka(Ka({},v),{},{ticks:P?p:v.ticks}):void 0,width:e??u,height:n??d,offset:r},P?!0:f);d1(Array.isArray(R),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(C=R)}if((!N||!N.length)&&typeof w=="function"){var k=m&&m.length,U=w({xAxis:_?Ka(Ka({},_),{},{ticks:k?m:_.ticks}):void 0,width:e??u,height:n??d,offset:r},k?!0:f);d1(Array.isArray(U),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof U,"]")),Array.isArray(U)&&(N=U)}return E.createElement(ec,{zIndex:i.zIndex},E.createElement("g",{className:"recharts-cartesian-grid"},E.createElement($be,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),E.createElement(Xbe,Gh({},i,{horizontalPoints:C})),E.createElement(Kbe,Gh({},i,{verticalPoints:N})),E.createElement(Ybe,Gh({},i,{offset:r,horizontalPoints:C,xAxis:_,yAxis:v})),E.createElement(qbe,Gh({},i,{offset:r,verticalPoints:N,xAxis:_,yAxis:v}))))}PG.displayName="CartesianGrid";var e_e={},RG=eo({name:"errorBars",initialState:e_e,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:BDe,replaceErrorBar:zDe,removeErrorBar:HDe}=RG.actions,t_e=RG.reducer;function DG(t,e){var n,r,i=Wt(u=>xd(u,t)),a=Wt(u=>bd(u,e)),s=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:oa.allowDataOverflow,o=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:la.allowDataOverflow,l=s||o;return{needClip:l,needClipX:s,needClipY:o}}function n_e(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=_D(),{needClipX:a,needClipY:s,needClip:o}=DG(e,n);if(!o||!i)return null;var{x:l,y:u,width:d,height:f}=i;return E.createElement("clipPath",{id:"clipPath-".concat(r)},E.createElement("rect",{x:a?l:l-d/2,y:s?u:u-f/2,width:a?d:d*2,height:s?f:f*2}))}function r_e(t){var e=Dg(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:a}=e,s=Number(i),o=Number(a);return(Number.isNaN(s)||s<0)&&(s=n),(Number.isNaN(o)||o<0)&&(o=r),{r:s,strokeWidth:o}}return{r:n,strokeWidth:r}}var eN={exports:{}},tN={};var U5;function i_e(){if(U5)return tN;U5=1;var t=Ap();function e(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,s=t.useMemo,o=t.useDebugValue;return tN.useSyncExternalStoreWithSelector=function(l,u,d,f,p){var m=i(null);if(m.current===null){var y={hasValue:!1,value:null};m.current=y}else y=m.current;m=s(function(){function v(P){if(!w){if(w=!0,M=P,P=f(P),p!==void 0&&y.hasValue){var R=y.value;if(p(R,P))return C=R}return C=P}if(R=C,n(M,P))return R;var k=f(P);return p!==void 0&&p(R,k)?(M=P,R):(M=P,C=k)}var w=!1,M,C,N=d===void 0?null:d;return[function(){return v(u())},N===null?void 0:function(){return v(N())}]},[u,d,f,p]);var _=r(l,m[0],m[1]);return a(function(){y.hasValue=!0,y.value=_},[_]),o(_),_},tN}var B5;function a_e(){return B5||(B5=1,eN.exports=i_e()),eN.exports}a_e();function s_e(t){t()}function o_e(){let t=null,e=null;return{clear(){t=null,e=null},notify(){s_e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var z5={notify(){},get:()=>[]};function l_e(t,e){let n,r=z5,i=0,a=!1;function s(_){d();const v=r.subscribe(_);let w=!1;return()=>{w||(w=!0,v(),f())}}function o(){r.notify()}function l(){y.onStateChange&&y.onStateChange()}function u(){return a}function d(){i++,n||(n=t.subscribe(l),r=o_e())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=z5)}function p(){a||(a=!0,d())}function m(){a&&(a=!1,f())}const y={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:u,trySubscribe:p,tryUnsubscribe:m,getListeners:()=>r};return y}var c_e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",u_e=c_e(),d_e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",f_e=d_e(),h_e=()=>u_e||f_e?E.useLayoutEffect:E.useEffect,p_e=h_e();function H5(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function m_e(t,e){if(H5(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!H5(t[n[i]],e[n[i]]))return!1;return!0}var g_e=Symbol.for("react-redux-context"),v_e=typeof globalThis<"u"?globalThis:{};function y_e(){if(!E.createContext)return{};const t=v_e[g_e]??=new Map;let e=t.get(E.createContext);return e||(e=E.createContext(null),t.set(E.createContext,e)),e}var x_e=y_e();function b_e(t){const{children:e,context:n,serverState:r,store:i}=t,a=E.useMemo(()=>{const l=l_e(i);return{store:i,subscription:l,getServerState:r?()=>r:void 0}},[i,r]),s=E.useMemo(()=>i.getState(),[i]);p_e(()=>{const{subscription:l}=a;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),s!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[a,s]);const o=n||x_e;return E.createElement(o.Provider,{value:a},e)}var __e=b_e,w_e=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function S_e(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function MD(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(w_e.has(r)){if(t[r]==null&&e[r]==null)continue;if(!m_e(t[r],e[r]))return!1}else if(!S_e(t[r],e[r]))return!1;return!0}function CD(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:SG}function ND(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:SG}var kG=(t,e,n)=>xW(t,"xAxis",CD(t,e),n),jG=(t,e,n)=>yW(t,"xAxis",CD(t,e),n),OG=(t,e,n)=>xW(t,"yAxis",ND(t,e),n),IG=(t,e,n)=>yW(t,"yAxis",ND(t,e),n),E_e=Ge([ir,kG,OG,jG,IG],(t,e,n,r,i)=>pd(t,"xAxis")?u1(e,r,!1):u1(n,i,!1)),M_e=(t,e)=>e,LG=Ge([ZV,M_e],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),FG=t=>{var e=ir(t),n=pd(e,"xAxis");return n?"yAxis":"xAxis"},C_e=(t,e)=>{var n=FG(t);return n==="yAxis"?ND(t,e):CD(t,e)},N_e=(t,e,n)=>nW(t,FG(t),C_e(t,e),n),A_e=Ge([LG,N_e],(t,e)=>{var n;if(!(t==null||e==null)){var{stackId:r}=t,i=BR(t);if(!(r==null||i==null)){var a=(n=e[r])===null||n===void 0?void 0:n.stackedData,s=a?.find(o=>o.key===i);if(s!=null)return s.map(o=>[o[0],o[1]])}}}),T_e=Ge([ir,kG,OG,jG,IG,A_e,_pe,E_e,LG,jpe],(t,e,n,r,i,a,s,o,l,u)=>{var{chartData:d,dataStartIndex:f,dataEndIndex:p}=s;if(!(l==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||r==null||i==null||r.length===0||i.length===0||o==null)){var{data:m}=l,y;if(m&&m.length>0?y=m:y=d?.slice(f,p+1),y!=null)return q_e({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataStartIndex:f,areaSettings:l,stackedData:a,displayedData:y,chartBaseValue:u,bandSize:o})}}),P_e=["id"],R_e=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function np(){return np=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},np.apply(null,arguments)}function UG(t,e){if(t==null)return{};var n,r,i=D_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function D_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function V5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V5(Object(n),!0).forEach(function(r){k_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function k_e(t,e,n){return(e=j_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j_e(t){var e=O_e(t,"string");return typeof e=="symbol"?e:e+""}function O_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function U1(t,e){return t&&t!=="none"?t:e}var I_e=t=>{var{dataKey:e,name:n,stroke:r,fill:i,legendType:a,hide:s}=t;return[{inactive:s,dataKey:e,type:a,color:U1(r,i),value:s2(n,e),payload:t}]},L_e=E.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:a,name:s,hide:o,unit:l,tooltipType:u,id:d}=t,f={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:a,dataKey:e,nameKey:void 0,name:s2(s,e),hide:o,type:u,color:U1(r,a),unit:l,graphicalItemId:d}};return E.createElement(xG,{tooltipEntrySettings:f})});function F_e(t){var{clipPathId:e,points:n,props:r}=t,{needClip:i,dot:a,dataKey:s}=r,o=Po(r);return E.createElement(Fxe,{points:n,dot:a,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:s,baseProps:o,needClip:i,clipPathId:e})}function U_e(t){var{showLabels:e,children:n,points:r}=t,i=r.map(a=>{var s,o,l={x:(s=a.x)!==null&&s!==void 0?s:0,y:(o=a.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return lg(lg({},l),{},{value:a.value,payload:a.payload,parentViewBox:void 0,viewBox:l,fill:void 0})});return E.createElement(tye,{value:e?i:void 0},n)}function W5(t){var{points:e,baseLine:n,needClip:r,clipPathId:i,props:a}=t,{layout:s,type:o,stroke:l,connectNulls:u,isRange:d}=a,{id:f}=a,p=UG(a,P_e),m=Po(p),y=ws(p);return E.createElement(E.Fragment,null,e?.length>1&&E.createElement(Da,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},E.createElement(xg,np({},y,{id:f,points:e,connectNulls:u,type:o,baseLine:n,layout:s,stroke:"none",className:"recharts-area-area"})),l!=="none"&&E.createElement(xg,np({},m,{className:"recharts-area-curve",layout:s,type:o,connectNulls:u,fill:"none",points:e})),l!=="none"&&d&&E.createElement(xg,np({},m,{className:"recharts-area-curve",layout:s,type:o,connectNulls:u,fill:"none",points:n}))),E.createElement(F_e,{points:e,props:p,clipPathId:i}))}function B_e(t){var e,n,{alpha:r,baseLine:i,points:a,strokeWidth:s}=t,o=(e=a[0])===null||e===void 0?void 0:e.y,l=(n=a[a.length-1])===null||n===void 0?void 0:n.y;if(!Dr(o)||!Dr(l))return null;var u=r*Math.abs(o-l),d=Math.max(...a.map(f=>f.x||0));return Ft(i)?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(...i.map(f=>f.x||0),d)),Ft(d)?E.createElement("rect",{x:0,y:o<l?o:o-u,width:d+(s?parseInt("".concat(s),10):1),height:Math.floor(u)}):null}function z_e(t){var e,n,{alpha:r,baseLine:i,points:a,strokeWidth:s}=t,o=(e=a[0])===null||e===void 0?void 0:e.x,l=(n=a[a.length-1])===null||n===void 0?void 0:n.x;if(!Dr(o)||!Dr(l))return null;var u=r*Math.abs(o-l),d=Math.max(...a.map(f=>f.y||0));return Ft(i)?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(...i.map(f=>f.y||0),d)),Ft(d)?E.createElement("rect",{x:o<l?o:o-u,y:0,width:u,height:Math.floor(d+(s?parseInt("".concat(s),10):1))}):null}function H_e(t){var{alpha:e,layout:n,points:r,baseLine:i,strokeWidth:a}=t;return n==="vertical"?E.createElement(B_e,{alpha:e,points:r,baseLine:i,strokeWidth:a}):E.createElement(z_e,{alpha:e,points:r,baseLine:i,strokeWidth:a})}function V_e(t){var{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:a}=t,{points:s,baseLine:o,isAnimationActive:l,animationBegin:u,animationDuration:d,animationEasing:f,onAnimationStart:p,onAnimationEnd:m}=r,y=E.useMemo(()=>({points:s,baseLine:o}),[s,o]),_=v2(y,"recharts-area-"),v=Zce(),[w,M]=E.useState(!1),C=!w,N=E.useCallback(()=>{typeof m=="function"&&m(),M(!1)},[m]),P=E.useCallback(()=>{typeof p=="function"&&p(),M(!0)},[p]);if(v==null)return null;var R=i.current,k=a.current;return E.createElement(U_e,{showLabels:C,points:s},r.children,E.createElement(g2,{animationId:_,begin:u,duration:d,isActive:l,easing:f,onAnimationEnd:N,onAnimationStart:P,key:_},U=>{if(R){var I=R.length/s.length,L=U===1?s:s.map((O,q)=>{var Y=Math.floor(q*I);if(R[Y]){var X=R[Y];return lg(lg({},O),{},{x:Ta(X.x,O.x,U),y:Ta(X.y,O.y,U)})}return O}),z;return Ft(o)?z=Ta(k,o,U):ua(o)||Yl(o)?z=Ta(k,0,U):z=o.map((O,q)=>{var Y=Math.floor(q*I);if(Array.isArray(k)&&k[Y]){var X=k[Y];return lg(lg({},O),{},{x:Ta(X.x,O.x,U),y:Ta(X.y,O.y,U)})}return O}),U>0&&(i.current=L,a.current=z),E.createElement(W5,{points:L,baseLine:z,needClip:e,clipPathId:n,props:r})}return U>0&&(i.current=s,a.current=o),E.createElement(Da,null,l&&E.createElement("defs",null,E.createElement("clipPath",{id:"animationClipPath-".concat(n)},E.createElement(H_e,{alpha:U,points:s,baseLine:o,layout:v,strokeWidth:r.strokeWidth}))),E.createElement(Da,{clipPath:"url(#animationClipPath-".concat(n,")")},E.createElement(W5,{points:s,baseLine:o,needClip:e,clipPathId:n,props:r})))}),E.createElement(uG,{label:r.label}))}function W_e(t){var{needClip:e,clipPathId:n,props:r}=t,i=E.useRef(null),a=E.useRef();return E.createElement(V_e,{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:a})}class G_e extends E.PureComponent{render(){var{hide:e,dot:n,points:r,className:i,top:a,left:s,needClip:o,xAxisId:l,yAxisId:u,width:d,height:f,id:p,baseLine:m,zIndex:y}=this.props;if(e)return null;var _=nn("recharts-area",i),v=p,{r:w,strokeWidth:M}=r_e(n),C=yG(n),N=w*2+M,P=o?"url(#clipPath-".concat(C?"":"dots-").concat(v,")"):void 0;return E.createElement(ec,{zIndex:y},E.createElement(Da,{className:_},o&&E.createElement("defs",null,E.createElement(n_e,{clipPathId:v,xAxisId:l,yAxisId:u}),!C&&E.createElement("clipPath",{id:"clipPath-dots-".concat(v)},E.createElement("rect",{x:s-N/2,y:a-N/2,width:d+N,height:f+N}))),E.createElement(W_e,{needClip:o,clipPathId:v,props:this.props})),E.createElement(j5,{points:r,mainColor:U1(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:P}),this.props.isRange&&Array.isArray(m)&&E.createElement(j5,{points:m,mainColor:U1(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:P}))}}var BG={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Pa.area};function $_e(t){var e,n=qi(t,BG),{activeDot:r,animationBegin:i,animationDuration:a,animationEasing:s,connectNulls:o,dot:l,fill:u,fillOpacity:d,hide:f,isAnimationActive:p,legendType:m,stroke:y,xAxisId:_,yAxisId:v}=n,w=UG(n,R_e),M=Zg(),C=HW(),{needClip:N}=DG(_,v),P=to(),{points:R,isRange:k,baseLine:U}=(e=Wt(Y=>T_e(Y,t.id,P)))!==null&&e!==void 0?e:{},I=_D();if(M!=="horizontal"&&M!=="vertical"||I==null||C!=="AreaChart"&&C!=="ComposedChart")return null;var{height:L,width:z,x:O,y:q}=I;return!R||!R.length?null:E.createElement(G_e,np({},w,{activeDot:r,animationBegin:i,animationDuration:a,animationEasing:s,baseLine:U,connectNulls:o,dot:l,fill:u,fillOpacity:d,height:L,hide:f,layout:M,isAnimationActive:p==="auto"?!cx.isSsr:p,isRange:k,legendType:m,needClip:N,points:R,stroke:y,width:z,left:O,top:q,xAxisId:_,yAxisId:v}))}var Y_e=(t,e,n,r,i)=>{var a=n??e;if(Ft(a))return a;var s=t==="horizontal"?i:r,o=s.scale.domain();if(s.type==="number"){var l=Math.max(o[0],o[1]),u=Math.min(o[0],o[1]);return a==="dataMin"?u:a==="dataMax"||l<0?l:Math.max(Math.min(o[0],o[1]),0)}return a==="dataMin"?o[0]:a==="dataMax"?o[1]:o[0]};function q_e(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:r},stackedData:i,layout:a,chartBaseValue:s,xAxis:o,yAxis:l,displayedData:u,dataStartIndex:d,xAxisTicks:f,yAxisTicks:p,bandSize:m}=t,y=i&&i.length,_=Y_e(a,s,n,o,l),v=a==="horizontal",w=!1,M=u.map((N,P)=>{var R,k,U;if(y)U=i[d+P];else{var I=Er(N,r);Array.isArray(I)?(U=I,w=!0):U=[_,I]}var L=(R=(k=U)===null||k===void 0?void 0:k[1])!==null&&R!==void 0?R:null,z=L==null||y&&!e&&Er(N,r)==null;return v?{x:II({axis:o,ticks:f,bandSize:m,entry:N,index:P}),y:z?null:l.scale(L),value:U,payload:N}:{x:z?null:o.scale(L),y:II({axis:l,ticks:p,bandSize:m,entry:N,index:P}),value:U,payload:N}}),C;return y||w?C=M.map(N=>{var P=Array.isArray(N.value)?N.value[0]:null;return v?{x:N.x,y:P!=null&&N.y!=null?l.scale(P):null,payload:N.payload}:{x:P!=null?o.scale(P):null,y:N.y,payload:N.payload}}):C=v?l.scale(_):o.scale(_),{points:M,baseLine:C,isRange:w}}function X_e(t){var e=qi(t,BG),n=to();return E.createElement(bG,{id:e.id,type:"area"},r=>E.createElement(E.Fragment,null,E.createElement(Vye,{legendPayload:I_e(e)}),E.createElement(L_e,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),E.createElement(rxe,{type:"area",id:r,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:mce(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),E.createElement($_e,np({},e,{id:r}))))}var ww=E.memo(X_e,MD);ww.displayName="Area";var K_e=["domain","range"],Z_e=["domain","range"];function G5(t,e){if(t==null)return{};var n,r,i=Q_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Q_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function $5(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function zG(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=G5(t,K_e),{domain:a,range:s}=e,o=G5(e,Z_e);return!$5(n,a)||!$5(r,s)?!1:MD(i,o)}var J_e=["dangerouslySetInnerHTML","ticks","scale"],ewe=["id","scale"];function TT(){return TT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TT.apply(null,arguments)}function Y5(t,e){if(t==null)return{};var n,r,i=twe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function twe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function nwe(t){var e=vr(),n=E.useRef(null);return E.useLayoutEffect(()=>{n.current===null?e(Vxe(t)):n.current!==t&&e(Wxe({prev:n.current,next:t})),n.current=t},[t,e]),E.useLayoutEffect(()=>()=>{n.current&&(e(Gxe(n.current)),n.current=null)},[e]),null}var rwe=t=>{var{xAxisId:e,className:n}=t,r=Wt(yH),i=to(),a="xAxis",s=Wt(w=>vW(w,a,e,i)),o=Wt(w=>Cme(w,e)),l=Wt(w=>Dme(w,e)),u=Wt(w=>qV(w,e));if(o==null||l==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f,scale:p}=t,m=Y5(t,J_e),{id:y,scale:_}=u,v=Y5(u,ewe);return E.createElement(ED,TT({},m,v,{x:l.x,y:l.y,width:o.width,height:o.height,className:nn("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:s,axisType:a}))},iwe={allowDataOverflow:oa.allowDataOverflow,allowDecimals:oa.allowDecimals,allowDuplicatedCategory:oa.allowDuplicatedCategory,angle:oa.angle,axisLine:Zu.axisLine,height:oa.height,hide:!1,includeHidden:oa.includeHidden,interval:oa.interval,minTickGap:oa.minTickGap,mirror:oa.mirror,orientation:oa.orientation,padding:oa.padding,reversed:oa.reversed,scale:oa.scale,tick:oa.tick,tickCount:oa.tickCount,tickLine:Zu.tickLine,tickSize:Zu.tickSize,type:oa.type,xAxisId:0},awe=t=>{var e=qi(t,iwe);return E.createElement(E.Fragment,null,E.createElement(nwe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),E.createElement(rwe,e))},HG=E.memo(awe,zG);HG.displayName="XAxis";var swe=["dangerouslySetInnerHTML","ticks","scale"],owe=["id","scale"];function PT(){return PT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PT.apply(null,arguments)}function q5(t,e){if(t==null)return{};var n,r,i=lwe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function lwe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function cwe(t){var e=vr(),n=E.useRef(null);return E.useLayoutEffect(()=>{n.current===null?e($xe(t)):n.current!==t&&e(Yxe({prev:n.current,next:t})),n.current=t},[t,e]),E.useLayoutEffect(()=>()=>{n.current&&(e(qxe(n.current)),n.current=null)},[e]),null}var uwe=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,a=E.useRef(null),s=E.useRef(null),o=Wt(yH),l=to(),u=vr(),d="yAxis",f=Wt(R=>Ome(R,e)),p=Wt(R=>jme(R,e)),m=Wt(R=>vW(R,d,e,l)),y=Wt(R=>XV(R,e));if(E.useLayoutEffect(()=>{if(!(r!=="auto"||!f||yD(i)||E.isValidElement(i)||y==null)){var R=a.current;if(R){var k=R.getCalculatedWidth();Math.round(f.width)!==Math.round(k)&&u(Xxe({id:e,width:k}))}}},[m,f,u,i,e,r,y]),f==null||p==null||y==null)return null;var{dangerouslySetInnerHTML:_,ticks:v,scale:w}=t,M=q5(t,swe),{id:C,scale:N}=y,P=q5(y,owe);return E.createElement(ED,PT({},M,P,{ref:a,labelRef:s,x:p.x,y:p.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:f.width,height:f.height,className:nn("recharts-".concat(d," ").concat(d),n),viewBox:o,ticks:m,axisType:d}))},dwe={allowDataOverflow:la.allowDataOverflow,allowDecimals:la.allowDecimals,allowDuplicatedCategory:la.allowDuplicatedCategory,angle:la.angle,axisLine:Zu.axisLine,hide:!1,includeHidden:la.includeHidden,interval:la.interval,minTickGap:la.minTickGap,mirror:la.mirror,orientation:la.orientation,padding:la.padding,reversed:la.reversed,scale:la.scale,tick:la.tick,tickCount:la.tickCount,tickLine:Zu.tickLine,tickSize:Zu.tickSize,type:la.type,width:la.width,yAxisId:0},fwe=t=>{var e=qi(t,dwe);return E.createElement(E.Fragment,null,E.createElement(cwe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),E.createElement(uwe,e))},VG=E.memo(fwe,zG);VG.displayName="YAxis";var hwe=(t,e)=>e,AD=Ge([hwe,ir,$V,Ki,OW,_d,Kge,da],rve),TD=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},WG=tl("mouseClick"),GG=sx();GG.startListening({actionCreator:WG,effect:(t,e)=>{var n=t.payload,r=AD(e.getState(),TD(n));r?.activeIndex!=null&&e.dispatch(Xme({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var RT=tl("mouseMove"),$G=sx(),n_=null;$G.startListening({actionCreator:RT,effect:(t,e)=>{var n=t.payload;n_!==null&&cancelAnimationFrame(n_);var r=TD(n);n_=requestAnimationFrame(()=>{var i=e.getState(),a=lD(i,i.tooltip.settings.shared);if(a==="axis"){var s=AD(i,r);s?.activeIndex!=null?e.dispatch(NW({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(CW())}n_=null})}});function pwe(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var X5={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},YG=eo({name:"rootProps",initialState:X5,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:X5.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),mwe=YG.reducer,{updateOptions:gwe}=YG.actions,qG=eo({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:vwe}=qG.actions,ywe=qG.reducer,XG=tl("keyDown"),KG=tl("focus"),PD=sx();PD.startListening({actionCreator:XG,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=cD(i,sv(n),yx(n),_x(n)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var l=_d(n);if(a==="Enter"){var u=k1(n,"axis","hover",String(i.index));e.dispatch(ST({active:!i.active,activeIndex:i.index,activeCoordinate:u}));return}var d=Ume(n),f=d==="left-to-right"?1:-1,p=a==="ArrowRight"?1:-1,m=o+p*f;if(!(l==null||m>=l.length||m<0)){var y=k1(n,"axis","hover",String(m));e.dispatch(ST({active:!0,activeIndex:m.toString(),activeCoordinate:y}))}}}}}});PD.startListening({actionCreator:KG,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",s=k1(n,"axis","hover",String(a));e.dispatch(ST({active:!0,activeIndex:a,activeCoordinate:s}))}}}});var qo=tl("externalEvent"),ZG=sx(),nN=new Map;ZG.startListening({actionCreator:qo,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,a=nN.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=e.getState(),l={activeCoordinate:Oge(o),activeDataKey:UW(o),activeIndex:Ug(o),activeLabel:FW(o),activeTooltipIndex:Ug(o),isTooltipActive:Ige(o)};n(l,r)}finally{nN.delete(i)}});nN.set(i,s)}}});var xwe=Ge([iv],t=>t.tooltipItemPayloads),bwe=Ge([xwe,bx,(t,e)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(o=>o.settings.graphicalItemId===r);if(i!=null){var{positions:a}=i;if(a!=null){var s=e(a,n);return s}}}),QG=tl("touchMove"),JG=sx();JG.startListening({actionCreator:QG,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=lD(r,r.tooltip.settings.shared);if(i==="axis"){var a=n.touches[0];if(a==null)return;var s=AD(r,TD({clientX:a.clientX,clientY:a.clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&e.dispatch(NW({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var o,l=n.touches[0];if(document.elementFromPoint==null||l==null)return;var u=document.elementFromPoint(l.clientX,l.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(gH),f=(o=u.getAttribute(vH))!==null&&o!==void 0?o:void 0,p=av(r).find(_=>_.id===f);if(d==null||p==null||f==null)return;var{dataKey:m}=p,y=bwe(r,d,f);e.dispatch(MW({activeDataKey:m,activeIndex:d,activeCoordinate:y,activeGraphicalItemId:f}))}}}});var _we=F8({brush:ibe,cartesianAxis:Kxe,chartData:jve,errorBars:t_e,graphicalItems:txe,layout:ace,legend:fue,options:Tve,polarAxis:fye,polarOptions:ywe,referenceElements:dbe,rootProps:mwe,tooltip:Kme,zIndex:vve}),wwe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Ple({reducer:_we,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([GG.middleware,$G.middleware,PD.middleware,ZG.middleware,JG.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(J8({type:"raf"}))},devTools:{serialize:{replacer:pwe},name:"recharts-".concat(n)}})};function e7(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=to(),a=E.useRef(null);if(i)return n;a.current==null&&(a.current=wwe(e,r));var s=KP;return E.createElement(__e,{context:s,store:a.current},n)}function Swe(t){var{layout:e,margin:n}=t,r=vr(),i=to();return E.useEffect(()=>{i||(r(nce(e)),r(tce(n)))},[r,i,e,n]),null}var t7=E.memo(Swe,MD);function n7(t){var e=vr();return E.useEffect(()=>{e(gwe(t))},[e,t]),null}function K5(t){var{zIndex:e,isPanorama:n}=t,r=E.useRef(null),i=vr();return E.useLayoutEffect(()=>(r.current&&i(mve({zIndex:e,element:r.current,isPanorama:n})),()=>{i(gve({zIndex:e,isPanorama:n}))}),[i,e,n]),E.createElement("g",{tabIndex:-1,ref:r})}function Z5(t){var{children:e,isPanorama:n}=t,r=Wt(ave);if(!r||r.length===0)return e;var i=r.filter(s=>s<0),a=r.filter(s=>s>0);return E.createElement(E.Fragment,null,i.map(s=>E.createElement(K5,{key:s,zIndex:s,isPanorama:n})),e,a.map(s=>E.createElement(K5,{key:s,zIndex:s,isPanorama:n})))}var Ewe=["children"];function Mwe(t,e){if(t==null)return{};var n,r,i=Cwe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Cwe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function B1(){return B1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},B1.apply(null,arguments)}var Nwe={width:"100%",height:"100%",display:"block"},Awe=E.forwardRef((t,e)=>{var n=iR(),r=aR(),i=OH();if(!Yc(n)||!Yc(r))return null;var{children:a,otherAttributes:s,title:o,desc:l}=t,u,d;return s!=null&&(typeof s.tabIndex=="number"?u=s.tabIndex:u=i?0:void 0,typeof s.role=="string"?d=s.role:d=i?"application":void 0),E.createElement(UP,B1({},s,{title:o,desc:l,role:d,tabIndex:u,width:n,height:r,style:Nwe,ref:e}),a)}),Twe=t=>{var{children:e}=t,n=Wt(u2);if(!n)return null;var{width:r,height:i,y:a,x:s}=n;return E.createElement(UP,{width:r,height:i,x:s,y:a},e)},Q5=E.forwardRef((t,e)=>{var{children:n}=t,r=Mwe(t,Ewe),i=to();return i?E.createElement(Twe,null,E.createElement(Z5,{isPanorama:!0},n)):E.createElement(Awe,B1({ref:e},r),E.createElement(Z5,{isPanorama:!1},n))});function Pwe(){var t=vr(),[e,n]=E.useState(null),r=Wt(_ce);return E.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;Dr(a)&&a!==r&&t(ice(a))}},[e,t,r]),n}function J5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rwe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J5(Object(n),!0).forEach(function(r){Dwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dwe(t,e,n){return(e=kwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kwe(t){var e=jwe(t,"string");return typeof e=="symbol"?e:e+""}function jwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wp(){return wp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wp.apply(null,arguments)}var Owe=()=>(Vve(),null);function z1(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var Iwe=E.forwardRef((t,e)=>{var n,r,i=E.useRef(null),[a,s]=E.useState({containerWidth:z1((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:z1((r=t.style)===null||r===void 0?void 0:r.height)}),o=E.useCallback((u,d)=>{s(f=>{var p=Math.round(u),m=Math.round(d);return f.containerWidth===p&&f.containerHeight===m?f:{containerWidth:p,containerHeight:m}})},[]),l=E.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=u.getBoundingClientRect();o(d,f);var p=y=>{var{width:_,height:v}=y[0].contentRect;o(_,v)},m=new ResizeObserver(p);m.observe(u),i.current=m}},[e,o]);return E.useEffect(()=>()=>{var u=i.current;u?.disconnect()},[o]),E.createElement(E.Fragment,null,E.createElement(f2,{width:a.containerWidth,height:a.containerHeight}),E.createElement("div",wp({ref:l},t)))}),Lwe=E.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,a]=E.useState({containerWidth:z1(n),containerHeight:z1(r)}),s=E.useCallback((l,u)=>{a(d=>{var f=Math.round(l),p=Math.round(u);return d.containerWidth===f&&d.containerHeight===p?d:{containerWidth:f,containerHeight:p}})},[]),o=E.useCallback(l=>{if(typeof e=="function"&&e(l),l!=null){var{width:u,height:d}=l.getBoundingClientRect();s(u,d)}},[e,s]);return E.createElement(E.Fragment,null,E.createElement(f2,{width:i.containerWidth,height:i.containerHeight}),E.createElement("div",wp({ref:o},t)))}),Fwe=E.forwardRef((t,e)=>{var{width:n,height:r}=t;return E.createElement(E.Fragment,null,E.createElement(f2,{width:n,height:r}),E.createElement("div",wp({ref:e},t)))}),Uwe=E.forwardRef((t,e)=>{var{width:n,height:r}=t;return td(n)||td(r)?E.createElement(Lwe,wp({},t,{ref:e})):E.createElement(Fwe,wp({},t,{ref:e}))});function Bwe(t){return t===!0?Iwe:Uwe}var zwe=E.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:l,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:p,onTouchEnd:m,onTouchMove:y,onTouchStart:_,style:v,width:w,responsive:M,dispatchTouchEvents:C=!0}=t,N=E.useRef(null),P=vr(),[R,k]=E.useState(null),[U,I]=E.useState(null),L=Pwe(),z=rR(),O=z?.width>0?z.width:w,q=z?.height>0?z.height:i,Y=E.useCallback(fe=>{L(fe),typeof e=="function"&&e(fe),k(fe),I(fe),fe!=null&&(N.current=fe)},[L,e,k,I]),X=E.useCallback(fe=>{P(WG(fe)),P(qo({handler:a,reactEvent:fe}))},[P,a]),ee=E.useCallback(fe=>{P(RT(fe)),P(qo({handler:u,reactEvent:fe}))},[P,u]),se=E.useCallback(fe=>{P(CW()),P(qo({handler:d,reactEvent:fe}))},[P,d]),W=E.useCallback(fe=>{P(RT(fe)),P(qo({handler:f,reactEvent:fe}))},[P,f]),$=E.useCallback(()=>{P(KG())},[P]),G=E.useCallback(fe=>{P(XG(fe.key))},[P]),j=E.useCallback(fe=>{P(qo({handler:s,reactEvent:fe}))},[P,s]),B=E.useCallback(fe=>{P(qo({handler:o,reactEvent:fe}))},[P,o]),ae=E.useCallback(fe=>{P(qo({handler:l,reactEvent:fe}))},[P,l]),re=E.useCallback(fe=>{P(qo({handler:p,reactEvent:fe}))},[P,p]),de=E.useCallback(fe=>{P(qo({handler:_,reactEvent:fe}))},[P,_]),ce=E.useCallback(fe=>{C&&P(QG(fe)),P(qo({handler:y,reactEvent:fe}))},[P,C,y]),ie=E.useCallback(fe=>{P(qo({handler:m,reactEvent:fe}))},[P,m]),le=Bwe(M);return E.createElement(YW.Provider,{value:R},E.createElement(e8.Provider,{value:U},E.createElement(le,{width:O??v?.width,height:q??v?.height,className:nn("recharts-wrapper",r),style:Rwe({position:"relative",cursor:"default",width:O,height:q},v),onClick:X,onContextMenu:j,onDoubleClick:B,onFocus:$,onKeyDown:G,onMouseDown:ae,onMouseEnter:ee,onMouseLeave:se,onMouseMove:W,onMouseUp:re,onTouchEnd:ie,onTouchMove:ce,onTouchStart:de,ref:Y},E.createElement(Owe,null),n)))}),Hwe=["width","height","responsive","children","className","style","compact","title","desc"];function Vwe(t,e){if(t==null)return{};var n,r,i=Wwe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Wwe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var r7=E.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:a,className:s,style:o,compact:l,title:u,desc:d}=t,f=Vwe(t,Hwe),p=Po(f);return l?E.createElement(E.Fragment,null,E.createElement(f2,{width:n,height:r}),E.createElement(Q5,{otherAttributes:p,title:u,desc:d},a)):E.createElement(zwe,{className:s,style:o,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},E.createElement(Q5,{otherAttributes:p,title:u,desc:d,ref:e},E.createElement(hbe,null,a)))});function DT(){return DT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DT.apply(null,arguments)}var Gwe={top:5,right:5,bottom:5,left:5},$we={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Gwe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Ywe=E.forwardRef(function(e,n){var r,i=qi(e.categoricalChartProps,$we),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,categoricalChartProps:u}=e,d={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,eventEmitter:void 0};return E.createElement(e7,{preloadedState:{options:d},reduxStoreName:(r=u.id)!==null&&r!==void 0?r:a},E.createElement(MG,{chartData:u.data}),E.createElement(t7,{layout:i.layout,margin:i.margin}),E.createElement(n7,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),E.createElement(r7,DT({},i,{ref:n})))});function qwe(t){var e=vr();return E.useEffect(()=>{e(vwe(t))},[e,t]),null}var Xwe=["layout"];function kT(){return kT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kT.apply(null,arguments)}function Kwe(t,e){if(t==null)return{};var n,r,i=Zwe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Zwe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Qwe={top:5,right:5,bottom:5,left:5},i7={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Qwe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Jwe=E.forwardRef(function(e,n){var r,i=qi(e.categoricalChartProps,i7),{layout:a}=i,s=Kwe(i,Xwe),{chartName:o,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d}=e,f={chartName:o,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return E.createElement(e7,{preloadedState:{options:f},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:o},E.createElement(MG,{chartData:i.data}),E.createElement(t7,{layout:a,margin:i.margin}),E.createElement(n7,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),E.createElement(qwe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),E.createElement(r7,kT({},s,{ref:n})))});function eF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eF(Object(n),!0).forEach(function(r){e1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function e1e(t,e,n){return(e=t1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t1e(t){var e=n1e(t,"string");return typeof e=="symbol"?e:e+""}function n1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var r1e=["item"],i1e=tF(tF({},i7),{},{layout:"centric",startAngle:0,endAngle:360}),a1e=E.forwardRef((t,e)=>{var n=qi(t,i1e);return E.createElement(Jwe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:r1e,tooltipPayloadSearcher:qW,categoricalChartProps:n,ref:e})}),s1e=["axis"],o1e=E.forwardRef((t,e)=>E.createElement(Ywe,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:s1e,tooltipPayloadSearcher:qW,categoricalChartProps:t,ref:e}));const l1e=({active:t,payload:e,label:n})=>!t||!e||!e.length?null:c.jsxs("div",{className:"rounded-lg p-3 shadow-xl",style:{background:"var(--app-card)",border:"1px solid rgba(255,255,255,0.1)"},children:[c.jsx("div",{className:"text-xs font-medium mb-2",style:{color:"var(--app-text)"},children:n}),e.map((r,i)=>c.jsxs("div",{className:"flex items-center justify-between gap-4 text-sm",children:[c.jsxs("span",{style:{color:r.color},children:[r.name,":"]}),c.jsx("span",{className:"font-semibold",style:{color:"var(--app-text)"},children:r.value})]},i))]});function c1e({data:t,loading:e=!1,height:n=300}){if(e)return c.jsx("div",{className:"flex items-center justify-center",style:{height:n},children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"var(--app-primary)"}})});if(!t||t.length===0)return c.jsx("div",{className:"flex items-center justify-center",style:{height:n,color:"var(--app-text)",opacity:.5},children:"No data available"});const r=t.map(i=>({...i,displayDate:i.date.includes("W")||i.date.length===7?i.date:Ws(jP(i.date),"MMM d")}));return c.jsx(wH,{width:"100%",height:n,children:c.jsxs(o1e,{data:r,margin:{top:10,right:10,left:0,bottom:0},children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:"colorSubmissions",x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"5%",stopColor:"#00C2B3",stopOpacity:.3}),c.jsx("stop",{offset:"95%",stopColor:"#00C2B3",stopOpacity:0})]}),c.jsxs("linearGradient",{id:"colorApproved",x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"5%",stopColor:"#22c55e",stopOpacity:.3}),c.jsx("stop",{offset:"95%",stopColor:"#22c55e",stopOpacity:0})]}),c.jsxs("linearGradient",{id:"colorRejected",x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"5%",stopColor:"#ef4444",stopOpacity:.3}),c.jsx("stop",{offset:"95%",stopColor:"#ef4444",stopOpacity:0})]})]}),c.jsx(PG,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.05)"}),c.jsx(HG,{dataKey:"displayDate",tick:{fill:"rgba(255,255,255,0.5)",fontSize:11},axisLine:{stroke:"rgba(255,255,255,0.1)"},tickLine:{stroke:"rgba(255,255,255,0.1)"}}),c.jsx(VG,{tick:{fill:"rgba(255,255,255,0.5)",fontSize:11},axisLine:{stroke:"rgba(255,255,255,0.1)"},tickLine:{stroke:"rgba(255,255,255,0.1)"},allowDecimals:!1}),c.jsx(ZW,{content:c.jsx(l1e,{})}),c.jsx(lR,{wrapperStyle:{paddingTop:"10px"},formatter:i=>c.jsx("span",{style:{color:"var(--app-text)",fontSize:"12px"},children:i})}),c.jsx(ww,{type:"monotone",dataKey:"submissions",name:"Total",stroke:"#00C2B3",strokeWidth:2,fill:"url(#colorSubmissions)"}),c.jsx(ww,{type:"monotone",dataKey:"approved",name:"Approved",stroke:"#22c55e",strokeWidth:2,fill:"url(#colorApproved)"}),c.jsx(ww,{type:"monotone",dataKey:"rejected",name:"Rejected",stroke:"#ef4444",strokeWidth:2,fill:"url(#colorRejected)"})]})})}const nF=["#00C2B3","#9d4edd","#22c55e","#f59e0b","#ef4444","#3b82f6","#ec4899","#8b5cf6","#14b8a6","#f97316"],u1e=({active:t,payload:e})=>{if(!t||!e||!e.length)return null;const n=e[0].payload;return c.jsxs("div",{className:"rounded-lg p-3 shadow-xl",style:{background:"var(--app-card)",border:"1px solid rgba(255,255,255,0.1)"},children:[c.jsx("div",{className:"font-medium mb-1",style:{color:e[0].payload.fill},children:n.discord_tag||"Untagged"}),c.jsxs("div",{className:"text-sm",style:{color:"var(--app-text)"},children:[c.jsxs("div",{children:["Submissions: ",c.jsx("span",{className:"font-semibold",children:n.total_submissions})]}),c.jsxs("div",{children:["Submitters: ",c.jsx("span",{className:"font-semibold",children:n.unique_submitters})]}),c.jsxs("div",{children:["Approval Rate: ",c.jsxs("span",{className:"font-semibold",children:[n.approval_rate,"%"]})]})]})]})},d1e=({cx:t,cy:e,midAngle:n,innerRadius:r,outerRadius:i,percent:a})=>{if(a<.05)return null;const s=Math.PI/180,o=r+(i-r)*.5,l=t+o*Math.cos(-n*s),u=e+o*Math.sin(-n*s);return c.jsx("text",{x:l,y:u,fill:"white",textAnchor:"middle",dominantBaseline:"central",style:{fontSize:"12px",fontWeight:600},children:`${(a*100).toFixed(0)}%`})};function f1e({data:t,loading:e=!1,height:n=300,showLegend:r=!0}){if(e)return c.jsx("div",{className:"flex items-center justify-center",style:{height:n},children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"var(--app-primary)"}})});if(!t||t.length===0)return c.jsx("div",{className:"flex items-center justify-center",style:{height:n,color:"var(--app-text)",opacity:.5},children:"No data available"});const i=t.map((a,s)=>({...a,fill:nF[s%nF.length]}));return c.jsx(wH,{width:"100%",height:n,children:c.jsxs(a1e,{children:[c.jsx(wG,{data:i,cx:"50%",cy:"50%",labelLine:!1,label:d1e,outerRadius:n/3,innerRadius:n/6,dataKey:"total_submissions",nameKey:"discord_tag",paddingAngle:2,children:i.map((a,s)=>c.jsx(j2,{fill:a.fill},`cell-${s}`))}),c.jsx(ZW,{content:c.jsx(u1e,{})}),r&&c.jsx(lR,{layout:"vertical",align:"right",verticalAlign:"middle",formatter:(a,s)=>c.jsx("span",{style:{color:"var(--app-text)",fontSize:"12px"},children:a||"Untagged"})})]})})}function h1e({data:t=[],width:e=120,height:n=28,stroke:r="var(--app-primary)"}){if(!t||t.length===0)return c.jsx("svg",{width:e,height:n});const i=Math.max(...t),a=Math.min(...t),s=i-a||1,o=t.map((l,u)=>{const d=u/(t.length-1)*(e-2)+1,f=n-(l-a)/s*(n-4)-2;return`${d},${f}`}).join(" ");return c.jsx("svg",{width:e,height:n,viewBox:`0 0 ${e} ${n}`,preserveAspectRatio:"none","aria-hidden":"true",children:c.jsx("polyline",{fill:"none",stroke:r,strokeWidth:"2",points:o,strokeLinecap:"round",strokeLinejoin:"round"})})}function r_({title:t,value:e,subtitle:n,accent:r,children:i,className:a="",trend:s}){return c.jsx("div",{className:`p-4 rounded-xl shadow-md border ${a}`,style:{background:"linear-gradient(180deg, rgba(255,255,255,0.02), transparent)",borderColor:"rgba(255,255,255,0.04)"},children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium",style:{color:"var(--app-accent-3)"},children:t}),c.jsx("div",{className:"text-2xl font-bold mt-1",style:{color:"var(--app-text)"},children:e}),n&&c.jsx("div",{className:"text-xs muted mt-1",style:{color:"var(--app-accent-2)"},children:n})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[s&&c.jsx("div",{style:{width:120},children:c.jsx(h1e,{data:s})}),c.jsx("div",{children:i})]})]})})}function p1e(){const t=Es(),e=E.useContext(kr),{isSuperAdmin:n,isAdmin:r,user:i}=e,[a,s]=E.useState(!0),[o,l]=E.useState({startDate:null,endDate:null}),[u,d]=E.useState("month"),[f,p]=E.useState([]),[m,y]=E.useState({total_submissions:0,total_approved:0,total_rejected:0}),[_,v]=E.useState([]),[w,M]=E.useState([]),[C,N]=E.useState(""),[P,R]=E.useState([]);E.useEffect(()=>{!e.loading&&!r&&t("/")},[e.loading,r,t]),E.useEffect(()=>{r&&(async()=>{try{const z=await qe.get("/api/discord_tags");R(z.data.tags||[])}catch(z){console.error("Failed to fetch discord tags:",z)}})()},[r]),E.useEffect(()=>{if(!r)return;(async()=>{s(!0);try{const z={};o.startDate&&o.endDate?(z.start_date=o.startDate.toISOString().split("T")[0],z.end_date=o.endDate.toISOString().split("T")[0]):u&&(z.period=u),C&&(z.discord_tag=C);const O=await qe.get("/api/analytics/submission-leaderboard",{params:z,withCredentials:!0});p(O.data.leaderboard||[]),y(O.data.totals||{total_submissions:0,total_approved:0,total_rejected:0});const q=await qe.get("/api/analytics/submissions-timeline",{params:{...z,granularity:u==="year"?"month":u==="month"?"week":"day"},withCredentials:!0});if(v(q.data.timeline||[]),n){const Y=await qe.get("/api/analytics/community-stats",{params:z,withCredentials:!0});M(Y.data.communities||[])}}catch(z){console.error("Failed to fetch analytics:",z)}finally{s(!1)}})()},[o,u,C,n,r]);const k=({startDate:L,endDate:z})=>{l({startDate:L,endDate:z}),(L||z)&&d("")},U=L=>{d(L),l({startDate:null,endDate:null})};if(e.loading)return c.jsx("div",{className:"flex items-center justify-center min-h-64",children:c.jsx("div",{className:"text-lg text-gray-400",children:"Loading..."})});if(!r)return null;const I=m.total_submissions>0?(m.total_approved/m.total_submissions*100).toFixed(1):0;return c.jsxs("div",{className:"min-h-screen p-6",style:{background:"var(--app-bg)"},children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold",style:{color:"var(--app-text)"},children:"Analytics Dashboard"}),c.jsx("p",{className:"text-sm mt-1",style:{color:"var(--app-text)",opacity:.6},children:"Submission statistics and leaderboards"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[c.jsx("div",{className:"flex items-center rounded-lg overflow-hidden",style:{background:"var(--app-card)",border:"1px solid rgba(255,255,255,0.1)"},children:["week","month","year","all"].map(L=>c.jsx("button",{onClick:()=>U(L),className:"px-3 py-2 text-sm font-medium transition-colors",style:{background:u===L?"var(--app-primary)":"transparent",color:u===L?"#000":"var(--app-text)"},children:L==="all"?"All Time":L.charAt(0).toUpperCase()+L.slice(1)},L))}),c.jsx(K6,{startDate:o.startDate,endDate:o.endDate,onChange:k}),n&&c.jsxs("select",{value:C,onChange:L=>N(L.target.value),className:"px-3 py-2 rounded-lg text-sm",style:{background:"var(--app-card)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--app-text)"},children:[c.jsx("option",{value:"",children:"All Communities"}),P.map(L=>c.jsx("option",{value:L.tag,children:L.name},L.tag))]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[c.jsx(r_,{title:"Total Submissions",value:m.total_submissions.toLocaleString(),subtitle:u==="all"?"All time":`This ${u}`}),c.jsx(r_,{title:"Approved",value:m.total_approved.toLocaleString(),subtitle:`${(m.total_approved/(m.total_submissions||1)*100).toFixed(1)}% of total`}),c.jsx(r_,{title:"Rejected",value:m.total_rejected.toLocaleString(),subtitle:`${(m.total_rejected/(m.total_submissions||1)*100).toFixed(1)}% of total`}),c.jsx(r_,{title:"Approval Rate",value:`${I}%`,subtitle:m.total_submissions>0?`${m.total_approved} approved`:"No submissions"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[c.jsxs("div",{className:"rounded-xl p-4",style:{background:"linear-gradient(180deg, rgba(255,255,255,0.02), transparent)",border:"1px solid rgba(255,255,255,0.04)"},children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",style:{color:"var(--app-text)"},children:"Submissions Over Time"}),c.jsx(c1e,{data:_,loading:a,height:280})]}),n&&c.jsxs("div",{className:"rounded-xl p-4",style:{background:"linear-gradient(180deg, rgba(255,255,255,0.02), transparent)",border:"1px solid rgba(255,255,255,0.04)"},children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",style:{color:"var(--app-text)"},children:"Community Breakdown"}),c.jsx(f1e,{data:w,loading:a,height:280})]}),!n&&c.jsxs("div",{className:"rounded-xl p-4",style:{background:"linear-gradient(180deg, rgba(255,255,255,0.02), transparent)",border:"1px solid rgba(255,255,255,0.04)"},children:[c.jsx("h2",{className:"text-lg font-semibold mb-4",style:{color:"var(--app-text)"},children:"Your Community Stats"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"p-4 rounded-lg",style:{background:"rgba(0, 194, 179, 0.1)"},children:[c.jsx("div",{className:"text-3xl font-bold",style:{color:"var(--app-primary)"},children:f.length}),c.jsx("div",{className:"text-sm mt-1",style:{color:"var(--app-text)",opacity:.7},children:"Active Submitters"})]}),c.jsxs("div",{className:"p-4 rounded-lg",style:{background:"rgba(34, 197, 94, 0.1)"},children:[c.jsxs("div",{className:"text-3xl font-bold",style:{color:"#22c55e"},children:[I,"%"]}),c.jsx("div",{className:"text-sm mt-1",style:{color:"var(--app-text)",opacity:.7},children:"Approval Rate"})]})]})]})]}),c.jsxs("div",{className:"rounded-xl p-4",style:{background:"linear-gradient(180deg, rgba(255,255,255,0.02), transparent)",border:"1px solid rgba(255,255,255,0.04)"},children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--app-text)"},children:"Submission Leaderboard"}),c.jsxs("div",{className:"text-sm",style:{color:"var(--app-text)",opacity:.6},children:["Top ",f.length," submitters"]})]}),c.jsx(Z6,{data:f,showCommunity:n&&!C,loading:a})]})]})}function m1e(){const t=Es(),e=E.useContext(kr),{isSuperAdmin:n,isAdmin:r,isPartner:i,user:a}=e,[s,o]=E.useState(!0),[l,u]=E.useState([]),[d,f]=E.useState([]),[p,m]=E.useState(!1),[y,_]=E.useState(!1),[v,w]=E.useState(null),[M,C]=E.useState({leaderboard:[],totals:{}}),[N,P]=E.useState(!1),[R,k]=E.useState({name:"",discord_tag:"",start_date:"",end_date:"",description:""});E.useEffect(()=>{!e.loading&&!r&&!i&&t("/")},[e.loading,r,i,t]),E.useEffect(()=>{n&&(async()=>{try{const X=await qe.get("/api/discord_tags");f(X.data.tags||[])}catch(X){console.error("Failed to fetch discord tags:",X)}})()},[n]),E.useEffect(()=>{if(!r&&!i)return;(async()=>{try{const X=await qe.get("/api/events",{params:{include_inactive:!0},withCredentials:!0});u(X.data.events||[])}catch(X){console.error("Failed to fetch events:",X)}finally{o(!1)}})()},[r,i]);const U=async Y=>{Y.preventDefault();try{if((await qe.post("/api/events",R,{withCredentials:!0})).data.success){const ee=await qe.get("/api/events",{params:{include_inactive:!0},withCredentials:!0});u(ee.data.events||[]),m(!1),k({name:"",discord_tag:"",start_date:"",end_date:"",description:""})}}catch(X){console.error("Failed to create event:",X),alert(X.response?.data?.detail||"Failed to create event")}},I=async Y=>{w(Y),_(!0),P(!0);try{const X=await qe.get(`/api/events/${Y.id}/leaderboard`,{withCredentials:!0});C({leaderboard:X.data.leaderboard||[],totals:X.data.totals||{}})}catch(X){console.error("Failed to fetch event leaderboard:",X)}finally{P(!1)}},L=async Y=>{try{await qe.put(`/api/events/${Y.id}`,{is_active:Y.is_active?0:1},{withCredentials:!0});const X=await qe.get("/api/events",{params:{include_inactive:!0},withCredentials:!0});u(X.data.events||[])}catch(X){console.error("Failed to toggle event:",X)}},z=async Y=>{if(window.confirm(`Are you sure you want to delete "${Y.name}"?`))try{await qe.delete(`/api/events/${Y.id}`,{withCredentials:!0});const X=await qe.get("/api/events",{params:{include_inactive:!0},withCredentials:!0});u(X.data.events||[])}catch(X){console.error("Failed to delete event:",X)}},O=Y=>{try{return Ws(jP(Y),"MMM d, yyyy")}catch{return Y}},q=Y=>{const X=new Date().toISOString();return Y.is_active?Y.start_date>X?{label:"Upcoming",color:"bg-blue-500"}:Y.end_date+"T23:59:59"<X?{label:"Ended",color:"bg-gray-500"}:{label:"Active",color:"bg-green-500"}:{label:"Inactive",color:"bg-gray-500"}};return e.loading||s?c.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"var(--app-bg)"},children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2",style:{borderColor:"var(--app-primary)"}})}):!r&&!i?null:c.jsxs("div",{className:"min-h-screen p-6",style:{background:"var(--app-bg)"},children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold",style:{color:"var(--app-text)"},children:"Submission Events"}),c.jsx("p",{className:"text-sm mt-1",style:{color:"var(--app-text)",opacity:.6},children:"Track submissions during event periods"})]}),c.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors",style:{background:"var(--app-primary)",color:"#000"},children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Event"]})]}),l.length===0?c.jsxs("div",{className:"rounded-xl p-12 text-center",style:{background:"linear-gradient(180deg, rgba(255,255,255,0.02), transparent)",border:"1px solid rgba(255,255,255,0.04)"},children:[c.jsx("div",{className:"text-4xl mb-4",children:""}),c.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--app-text)"},children:"No Events Yet"}),c.jsx("p",{className:"text-sm mb-4",style:{color:"var(--app-text)",opacity:.6},children:"Create your first submission event to start tracking"}),c.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 rounded-lg font-medium",style:{background:"var(--app-primary)",color:"#000"},children:"Create Event"})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:l.map(Y=>{const X=q(Y);return c.jsxs("div",{className:"rounded-xl p-4",style:{background:"linear-gradient(180deg, rgba(255,255,255,0.02), transparent)",border:"1px solid rgba(255,255,255,0.04)"},children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-2xl",children:""}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold",style:{color:"var(--app-text)"},children:Y.name}),c.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium text-white ${X.color}`,children:X.label})]})]}),c.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium",style:{background:"rgba(0, 194, 179, 0.1)",color:"var(--app-primary)"},children:Y.discord_tag})]}),c.jsxs("div",{className:"text-sm mb-3",style:{color:"var(--app-text)",opacity:.7},children:[O(Y.start_date)," - ",O(Y.end_date)]}),Y.description&&c.jsx("p",{className:"text-sm mb-3",style:{color:"var(--app-text)",opacity:.6},children:Y.description}),c.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm",style:{color:"var(--app-text)"},children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold",style:{color:"var(--app-primary)"},children:Y.submission_count})," submissions"]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold",style:{color:"var(--app-accent-2)"},children:Y.participant_count})," participants"]})]}),c.jsxs("div",{className:"flex items-center gap-2 pt-3",style:{borderTop:"1px solid rgba(255,255,255,0.1)"},children:[c.jsx("button",{onClick:()=>I(Y),className:"flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors",style:{background:"rgba(0, 194, 179, 0.1)",color:"var(--app-primary)",border:"1px solid rgba(0, 194, 179, 0.2)"},children:"View Leaderboard"}),c.jsx("button",{onClick:()=>L(Y),className:"px-3 py-2 rounded-lg text-sm transition-colors",style:{background:"rgba(255,255,255,0.05)",color:"var(--app-text)",border:"1px solid rgba(255,255,255,0.1)"},children:Y.is_active?"Deactivate":"Activate"}),c.jsx("button",{onClick:()=>z(Y),className:"px-3 py-2 rounded-lg text-sm transition-colors",style:{background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.2)"},children:"Delete"})]})]},Y.id)})}),p&&c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[c.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>m(!1)}),c.jsxs("div",{className:"relative rounded-xl p-6 w-full max-w-md",style:{background:"var(--app-card)",border:"1px solid rgba(255,255,255,0.1)"},children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",style:{color:"var(--app-text)"},children:"Create New Event"}),c.jsxs("form",{onSubmit:U,children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--app-text)"},children:"Event Name"}),c.jsx("input",{type:"text",value:R.name,onChange:Y=>k({...R,name:Y.target.value}),required:!0,className:"w-full px-3 py-2 rounded-lg",placeholder:"Winter Exploration Event"})]}),n&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--app-text)"},children:"Community"}),c.jsxs("select",{value:R.discord_tag,onChange:Y=>k({...R,discord_tag:Y.target.value}),required:!0,className:"w-full px-3 py-2 rounded-lg",children:[c.jsx("option",{value:"",children:"Select community..."}),d.map(Y=>c.jsx("option",{value:Y.tag,children:Y.name},Y.tag))]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--app-text)"},children:"Start Date"}),c.jsx("input",{type:"date",value:R.start_date,onChange:Y=>k({...R,start_date:Y.target.value}),required:!0,className:"w-full px-3 py-2 rounded-lg"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--app-text)"},children:"End Date"}),c.jsx("input",{type:"date",value:R.end_date,onChange:Y=>k({...R,end_date:Y.target.value}),required:!0,className:"w-full px-3 py-2 rounded-lg"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--app-text)"},children:"Description (optional)"}),c.jsx("textarea",{value:R.description,onChange:Y=>k({...R,description:Y.target.value}),rows:3,className:"w-full px-3 py-2 rounded-lg",placeholder:"Describe the event..."})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[c.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 rounded-lg text-sm",style:{color:"var(--app-text)",border:"1px solid rgba(255,255,255,0.1)"},children:"Cancel"}),c.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg text-sm font-medium",style:{background:"var(--app-primary)",color:"#000"},children:"Create Event"})]})]})]})]}),y&&v&&c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[c.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>_(!1)}),c.jsxs("div",{className:"relative rounded-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",style:{background:"var(--app-card)",border:"1px solid rgba(255,255,255,0.1)"},children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-xl font-semibold",style:{color:"var(--app-text)"},children:[" ",v.name]}),c.jsxs("p",{className:"text-sm mt-1",style:{color:"var(--app-text)",opacity:.6},children:[O(v.start_date)," - ",O(v.end_date)]})]}),c.jsx("button",{onClick:()=>_(!1),className:"p-2 rounded-lg transition-colors hover:bg-white/10",style:{color:"var(--app-text)"},children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[c.jsxs("div",{className:"p-4 rounded-lg text-center",style:{background:"rgba(0, 194, 179, 0.1)"},children:[c.jsx("div",{className:"text-2xl font-bold",style:{color:"var(--app-primary)"},children:M.totals.total_submissions||0}),c.jsx("div",{className:"text-sm",style:{color:"var(--app-text)",opacity:.7},children:"Total Submissions"})]}),c.jsxs("div",{className:"p-4 rounded-lg text-center",style:{background:"rgba(34, 197, 94, 0.1)"},children:[c.jsx("div",{className:"text-2xl font-bold",style:{color:"#22c55e"},children:M.totals.total_approved||0}),c.jsx("div",{className:"text-sm",style:{color:"var(--app-text)",opacity:.7},children:"Approved"})]}),c.jsxs("div",{className:"p-4 rounded-lg text-center",style:{background:"rgba(157, 78, 221, 0.1)"},children:[c.jsx("div",{className:"text-2xl font-bold",style:{color:"var(--app-accent-2)"},children:M.totals.participants||0}),c.jsx("div",{className:"text-sm",style:{color:"var(--app-text)",opacity:.7},children:"Participants"})]})]}),c.jsx(Z6,{data:M.leaderboard,showCommunity:!1,loading:N})]})]})]})}function g1e(){const t=E.useContext(kr),{isSuperAdmin:e,isPartner:n,user:r}=t||{},i=E.useRef(null),[a,s]=E.useState(null),[o,l]=E.useState(!1),[u,d]=E.useState(null),[f,p]=E.useState(!1),m=M=>{const C=M.target.files?.[0];C&&C.name.endsWith(".csv")&&(s(C),d(null))},y=M=>{M.preventDefault(),p(!1);const C=M.dataTransfer.files?.[0];C&&C.name.endsWith(".csv")&&(s(C),d(null))},_=M=>{M.preventDefault(),p(!0)},v=()=>{p(!1)},w=async()=>{if(a){l(!0),d(null);try{const M=new FormData;M.append("file",a);const C=await fetch("/api/import_csv",{method:"POST",credentials:"include",body:M}),N=await C.json();if(!C.ok)throw new Error(N.detail||"Import failed");d({success:!0,imported:N.imported,skipped:N.skipped,errors:N.errors,totalErrors:N.total_errors,regionName:N.region_name}),s(null),i.current&&(i.current.value="")}catch(M){d({success:!1,error:M.message})}finally{l(!1)}}};return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-cyan-400",children:"CSV Import"}),c.jsx(an,{className:"bg-gray-800/50",children:c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Import Star Systems from CSV"}),c.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Upload a CSV file exported from Google Sheets to import star systems directly into the database."}),c.jsxs("div",{className:"mb-6 p-3 bg-gray-700/50 rounded border border-gray-600",children:[c.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Expected CSV Format:"}),c.jsxs("ul",{className:"text-xs text-gray-400 space-y-1 list-disc list-inside",children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Row 1:"}),' Region name (e.g., "HUB1 - Sea of Xionahui")']}),c.jsxs("li",{children:[c.jsx("strong",{children:"Row 2:"})," Headers (Coordinates, Original System Name, HUB Tag, New System Name, etc.)"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Row 3+:"})," Data rows"]})]}),c.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Required columns:"})," Coordinates (galactic format XXXX:YYYY:ZZZZ:SSSS), New System Name"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Stored in notes:"})," HUB Tag, Original System Name, Comments/Special Attributes"]})]})]}),c.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors cursor-pointer
              ${f?"border-cyan-400 bg-cyan-900/20":"border-gray-600 hover:border-gray-500"}`,onDrop:y,onDragOver:_,onDragLeave:v,onClick:()=>i.current?.click(),children:[c.jsx("input",{ref:i,type:"file",accept:".csv",onChange:m,className:"hidden"}),a?c.jsxs("div",{children:[c.jsx("div",{className:"text-lg text-cyan-400 font-semibold",children:a.name}),c.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[(a.size/1024).toFixed(1)," KB"]}),c.jsx("button",{onClick:M=>{M.stopPropagation(),s(null),i.current&&(i.current.value="")},className:"mt-2 text-sm text-red-400 hover:text-red-300",children:"Remove file"})]}):c.jsxs("div",{children:[c.jsx("div",{className:"text-lg text-gray-300",children:"Drop CSV file here"}),c.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"or click to browse"})]})]}),c.jsx("div",{className:"mt-4 flex gap-4",children:c.jsx(ft,{onClick:w,disabled:!a||o,children:o?"Importing...":"Import Systems"})}),u&&c.jsx("div",{className:`mt-6 p-4 rounded border ${u.success?"bg-green-900/30 border-green-700":"bg-red-900/30 border-red-700"}`,children:u.success?c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-semibold text-green-400 mb-2",children:"Import Complete"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Systems Imported:"}),c.jsx("span",{className:"ml-2 text-green-400 font-semibold",children:u.imported})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Systems Skipped:"}),c.jsx("span",{className:"ml-2 text-yellow-400 font-semibold",children:u.skipped})]}),u.regionName&&c.jsxs("div",{className:"col-span-2",children:[c.jsx("span",{className:"text-gray-400",children:"Region:"}),c.jsx("span",{className:"ml-2 text-cyan-400",children:u.regionName})]})]}),u.errors&&u.errors.length>0&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("h5",{className:"text-sm font-semibold text-yellow-400 mb-1",children:["Errors (",u.totalErrors," total, showing first ",u.errors.length,"):"]}),c.jsx("ul",{className:"text-xs text-gray-400 space-y-1 max-h-32 overflow-y-auto",children:u.errors.map((M,C)=>c.jsx("li",{className:"text-red-300",children:M},C))})]})]}):c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-semibold text-red-400 mb-2",children:"Import Failed"}),c.jsx("p",{className:"text-sm text-red-300",children:u.error})]})})]})}),n&&c.jsx(an,{className:"bg-gray-800/50",children:c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"About CSV Import"}),c.jsxs("ul",{className:"text-sm text-gray-400 space-y-1 list-disc list-inside",children:[c.jsxs("li",{children:["Imported systems will be tagged with your Discord (",r?.discordTag,")"]}),c.jsx("li",{children:"Duplicate systems (same glyph code) will be skipped"}),c.jsx("li",{children:"Systems are imported directly into the database (no approval needed)"})]})]})})]})}const rF=[{id:"coordinates",label:"Coordinates",description:"X, Y, Z position and region coordinates"},{id:"glyph_code",label:"Portal Glyphs",description:"Glyph code and portal address"},{id:"discovered_by",label:"Discoverer",description:"Who discovered the system and when"},{id:"base_location",label:"Base Locations",description:"Base coordinates on planets"},{id:"description",label:"Description",description:"System description text"},{id:"star_type",label:"Star Info",description:"Star type, economy, conflict level"},{id:"planets",label:"Planet Details",description:"Hide detailed planet info (shows count only)"}],iF=[{value:"normal",label:"Normal",description:"Fully visible with all hover details"},{value:"point_only",label:"Point Only",description:"Shows as a dot but no hover information"},{value:"hidden",label:"Hidden",description:"Does not appear on maps at all"}];function v1e(){const t=E.useContext(kr),{isAdmin:e,isSuperAdmin:n}=t||{},[r,i]=E.useState([]),[a,s]=E.useState(!0),[o,l]=E.useState(!1),[u,d]=E.useState(""),[f,p]=E.useState(new Set),[m,y]=E.useState(null),[_,v]=E.useState(!1),[w,M]=E.useState(!1),[C,N]=E.useState([]),[P,R]=E.useState("normal");E.useEffect(()=>{k()},[]);const k=async()=>{s(!0);try{const B=await fetch("/api/partner/my_systems",{credentials:"include"});if(!B.ok)throw new Error("Failed to load systems");const ae=await B.json();i(ae.systems||[])}catch(B){console.error("Failed to load systems:",B)}finally{s(!1)}},U=E.useMemo(()=>{if(!u.trim())return r;const B=u.toLowerCase();return r.filter(ae=>ae.name?.toLowerCase().includes(B)||ae.galaxy?.toLowerCase().includes(B)||ae.region_name?.toLowerCase().includes(B)||ae.discord_tag?.toLowerCase().includes(B))},[r,u]),I=B=>{const ae=new Set(f);ae.has(B)?ae.delete(B):ae.add(B),p(ae)},L=()=>{p(new Set(U.map(B=>B.id)))},z=()=>{p(new Set)},O=B=>{y(B),B.restriction?(M(B.restriction.is_hidden_from_public),N(B.restriction.hidden_fields||[]),R(B.restriction.map_visibility||"normal")):(M(!1),N([]),R("normal"))},q=()=>{M(!1),N([]),R("normal"),v(!0)},Y=()=>{y(null),v(!1)},X=B=>{C.includes(B)?N(C.filter(ae=>ae!==B)):N([...C,B])},ee=async()=>{if(m){l(!0);try{const B=await fetch("/api/data_restrictions",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({system_id:m.id,is_hidden_from_public:w,hidden_fields:C,map_visibility:P})});if(!B.ok){const ae=await B.json();throw new Error(ae.detail||"Failed to save")}await k(),Y()}catch(B){alert("Failed to save restriction: "+B.message)}finally{l(!1)}}},se=async()=>{if(m&&confirm("Remove all restrictions from this system?")){l(!0);try{const B=await fetch(`/api/data_restrictions/${m.id}`,{method:"DELETE",credentials:"include"});if(!B.ok){const ae=await B.json();throw new Error(ae.detail||"Failed to remove")}await k(),Y()}catch(B){alert("Failed to remove restriction: "+B.message)}finally{l(!1)}}},W=async()=>{if(f.size!==0){l(!0);try{const B=await fetch("/api/data_restrictions/bulk",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({system_ids:Array.from(f),is_hidden_from_public:w,hidden_fields:C,map_visibility:P})});if(!B.ok){const re=await B.json();throw new Error(re.detail||"Failed to save")}const ae=await B.json();alert(`Restrictions applied: ${ae.created} created, ${ae.updated} updated, ${ae.skipped} skipped`),await k(),v(!1),z()}catch(B){alert("Failed to save restrictions: "+B.message)}finally{l(!1)}}},$=async()=>{if(f.size!==0&&confirm(`Remove restrictions from ${f.size} systems?`)){l(!0);try{const B=await fetch("/api/data_restrictions/bulk_remove",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({system_ids:Array.from(f)})});if(!B.ok){const re=await B.json();throw new Error(re.detail||"Failed to remove")}const ae=await B.json();alert(`Restrictions removed from ${ae.removed} systems (${ae.skipped} skipped)`),await k(),z()}catch(B){alert("Failed to remove restrictions: "+B.message)}finally{l(!1)}}};if(!e)return c.jsx("div",{className:"text-center py-12 text-gray-500",children:"Please log in to manage data restrictions."});const G=r.length,j=r.filter(B=>B.has_restriction).length;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold",children:"Data Restrictions"}),c.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:["Control which data is visible to public viewers. ",n?"Viewing all systems.":"Viewing your systems."]})]}),c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsxs("span",{className:"px-3 py-1 bg-gray-700 rounded",children:[G," systems"]}),c.jsxs("span",{className:"px-3 py-1 bg-yellow-600 rounded",children:[j," restricted"]})]})]}),c.jsxs(an,{className:"p-4",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsx("input",{type:"text",placeholder:"Search systems...",value:u,onChange:B=>d(B.target.value),className:"flex-1 px-4 py-2 bg-gray-800 border border-gray-600 rounded focus:outline-none focus:border-cyan-500"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ft,{onClick:L,variant:"secondary",size:"sm",children:"Select All"}),c.jsx(ft,{onClick:z,variant:"secondary",size:"sm",children:"Clear"})]})]}),f.size>0&&c.jsxs("div",{className:"mt-4 p-3 bg-gray-800 rounded flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[c.jsxs("span",{className:"text-cyan-400 font-medium",children:[f.size," systems selected"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ft,{onClick:q,variant:"primary",size:"sm",children:"Apply Restrictions"}),c.jsx(ft,{onClick:$,variant:"danger",size:"sm",children:"Remove Restrictions"})]})]})]}),c.jsx(an,{children:a?c.jsx("div",{className:"p-8 text-center text-gray-400",children:"Loading systems..."}):U.length===0?c.jsx("div",{className:"p-8 text-center text-gray-400",children:r.length===0?"No systems found.":"No systems match your search."}):c.jsx("div",{className:"divide-y divide-gray-700",children:U.map(B=>c.jsxs("div",{className:`p-4 flex items-center gap-4 hover:bg-gray-800/50 transition-colors ${f.has(B.id)?"bg-gray-800":""}`,children:[c.jsx("input",{type:"checkbox",checked:f.has(B.id),onChange:()=>I(B.id),className:"w-5 h-5 rounded border-gray-600 text-cyan-500 focus:ring-cyan-500"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium truncate",children:B.name}),c.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-700 rounded",children:B.galaxy}),n&&B.discord_tag&&c.jsx("span",{className:"text-xs px-2 py-0.5 bg-purple-700 rounded",children:B.discord_tag})]}),c.jsx("div",{className:"text-sm text-gray-400 mt-1",children:B.region_name||`Region (${B.region_x}, ${B.region_y}, ${B.region_z})`})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[B.has_restriction?c.jsxs("div",{className:"flex items-center gap-2",children:[B.restriction.is_hidden_from_public&&c.jsx("span",{className:"text-xs px-2 py-1 bg-red-600 rounded",children:"HIDDEN"}),B.restriction.hidden_fields?.length>0&&c.jsxs("span",{className:"text-xs px-2 py-1 bg-yellow-600 rounded",children:[B.restriction.hidden_fields.length," fields"]}),B.restriction.map_visibility!=="normal"&&c.jsx("span",{className:"text-xs px-2 py-1 bg-orange-600 rounded",children:B.restriction.map_visibility==="hidden"?"Map Hidden":"Point Only"})]}):c.jsx("span",{className:"text-xs text-gray-500",children:"Public"}),c.jsx(ft,{onClick:()=>O(B),variant:"secondary",size:"sm",children:"Configure"})]})]},B.id))})}),m&&c.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-gray-900 rounded-lg max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"p-6 border-b border-gray-700",children:[c.jsx("h2",{className:"text-xl font-bold",children:"Configure Restrictions"}),c.jsx("p",{className:"text-gray-400 text-sm mt-1",children:m.name})]}),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-800 rounded",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:"Hide from Public"}),c.jsx("div",{className:"text-sm text-gray-400",children:"Completely hide this system from non-owners"})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:w,onChange:B=>M(B.target.checked),className:"sr-only peer"}),c.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:ring-2 peer-focus:ring-cyan-500 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-cyan-600"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium mb-3",children:"Hide Specific Fields"}),c.jsx("div",{className:"space-y-2",children:rF.map(B=>c.jsxs("label",{className:"flex items-start gap-3 p-3 bg-gray-800 rounded cursor-pointer hover:bg-gray-750",children:[c.jsx("input",{type:"checkbox",checked:C.includes(B.id),onChange:()=>X(B.id),className:"w-5 h-5 mt-0.5 rounded border-gray-600 text-cyan-500 focus:ring-cyan-500"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:B.label}),c.jsx("div",{className:"text-sm text-gray-400",children:B.description})]})]},B.id))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium mb-3",children:"Map Visibility"}),c.jsx("div",{className:"space-y-2",children:iF.map(B=>c.jsxs("label",{className:`flex items-start gap-3 p-3 rounded cursor-pointer ${P===B.value?"bg-cyan-900/30 border border-cyan-500":"bg-gray-800 hover:bg-gray-750"}`,children:[c.jsx("input",{type:"radio",name:"mapVisibility",value:B.value,checked:P===B.value,onChange:ae=>R(ae.target.value),className:"w-5 h-5 mt-0.5 text-cyan-500 focus:ring-cyan-500"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:B.label}),c.jsx("div",{className:"text-sm text-gray-400",children:B.description})]})]},B.value))})]})]}),c.jsxs("div",{className:"p-6 border-t border-gray-700 flex justify-between",children:[c.jsx(ft,{onClick:se,variant:"danger",disabled:o||!m.has_restriction,children:"Remove All"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ft,{onClick:Y,variant:"secondary",disabled:o,children:"Cancel"}),c.jsx(ft,{onClick:ee,variant:"primary",disabled:o,children:o?"Saving...":"Save"})]})]})]})}),_&&c.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-gray-900 rounded-lg max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"p-6 border-b border-gray-700",children:[c.jsx("h2",{className:"text-xl font-bold",children:"Bulk Apply Restrictions"}),c.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:["Apply to ",f.size," selected systems"]})]}),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-800 rounded",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:"Hide from Public"}),c.jsx("div",{className:"text-sm text-gray-400",children:"Completely hide these systems from non-owners"})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:w,onChange:B=>M(B.target.checked),className:"sr-only peer"}),c.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:ring-2 peer-focus:ring-cyan-500 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-cyan-600"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium mb-3",children:"Hide Specific Fields"}),c.jsx("div",{className:"space-y-2",children:rF.map(B=>c.jsxs("label",{className:"flex items-start gap-3 p-3 bg-gray-800 rounded cursor-pointer hover:bg-gray-750",children:[c.jsx("input",{type:"checkbox",checked:C.includes(B.id),onChange:()=>X(B.id),className:"w-5 h-5 mt-0.5 rounded border-gray-600 text-cyan-500 focus:ring-cyan-500"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:B.label}),c.jsx("div",{className:"text-sm text-gray-400",children:B.description})]})]},B.id))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium mb-3",children:"Map Visibility"}),c.jsx("div",{className:"space-y-2",children:iF.map(B=>c.jsxs("label",{className:`flex items-start gap-3 p-3 rounded cursor-pointer ${P===B.value?"bg-cyan-900/30 border border-cyan-500":"bg-gray-800 hover:bg-gray-750"}`,children:[c.jsx("input",{type:"radio",name:"bulkMapVisibility",value:B.value,checked:P===B.value,onChange:ae=>R(ae.target.value),className:"w-5 h-5 mt-0.5 text-cyan-500 focus:ring-cyan-500"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:B.label}),c.jsx("div",{className:"text-sm text-gray-400",children:B.description})]})]},B.value))})]})]}),c.jsxs("div",{className:"p-6 border-t border-gray-700 flex justify-end gap-2",children:[c.jsx(ft,{onClick:Y,variant:"secondary",disabled:o,children:"Cancel"}),c.jsx(ft,{onClick:W,variant:"primary",disabled:o,children:o?"Applying...":`Apply to ${f.size} Systems`})]})]})})]})}const Sx="170",kh={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},jh={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a7=0,jT=1,s7=2,y1e=3,o7=0,U2=1,$0=2,Ll=3,od=0,_s=1,$s=2,Qu=0,rp=1,OT=2,IT=3,LT=4,l7=5,pf=100,c7=101,u7=102,d7=103,f7=104,h7=200,p7=201,m7=202,g7=203,H1=204,V1=205,v7=206,y7=207,x7=208,b7=209,_7=210,w7=211,S7=212,E7=213,M7=214,W1=0,G1=1,$1=2,Sp=3,Y1=4,q1=5,X1=6,K1=7,Ex=0,C7=1,N7=2,zc=0,A7=1,T7=2,P7=3,RD=4,R7=5,D7=6,k7=7,FT="attached",j7="detached",B2=300,ld=301,Cf=302,Ty=303,Py=304,ov=306,Ry=1e3,Jo=1001,Dy=1002,Ra=1003,DD=1004,x1e=1004,cg=1005,b1e=1005,gi=1006,Y0=1007,_1e=1007,Oc=1008,w1e=1008,Xl=1009,kD=1010,jD=1011,Bg=1012,z2=1013,cd=1014,Xs=1015,lv=1016,H2=1017,V2=1018,Ep=1020,OD=35902,ID=1021,LD=1022,Ja=1023,FD=1024,UD=1025,ip=1026,Mp=1027,W2=1028,Mx=1029,BD=1030,G2=1031,S1e=1032,$2=1033,q0=33776,X0=33777,K0=33778,Z0=33779,Z1=35840,Q1=35841,J1=35842,eS=35843,tS=36196,nS=37492,rS=37496,iS=37808,aS=37809,sS=37810,oS=37811,lS=37812,cS=37813,uS=37814,dS=37815,fS=37816,hS=37817,pS=37818,mS=37819,gS=37820,vS=37821,Q0=36492,yS=36494,xS=36495,zD=36283,bS=36284,_S=36285,wS=36286,O7=2200,I7=2201,L7=2202,ky=2300,SS=2301,Sw=2302,$h=2400,Yh=2401,jy=2402,Y2=2500,HD=2501,E1e=0,M1e=1,C1e=2,F7=3200,VD=3201,N1e=3202,A1e=3203,Rf=0,U7=1,zu="",Vs="srgb",kp="srgb-linear",Cx="linear",er="srgb",T1e=0,Oh=7680,P1e=7681,R1e=7682,D1e=7683,k1e=34055,j1e=34056,O1e=5386,I1e=512,L1e=513,F1e=514,U1e=515,B1e=516,z1e=517,H1e=518,UT=519,B7=512,z7=513,H7=514,WD=515,V7=516,W7=517,G7=518,$7=519,Oy=35044,V1e=35048,W1e=35040,G1e=35045,$1e=35049,Y1e=35041,q1e=35046,X1e=35050,K1e=35042,Z1e="100",BT="300 es",Ic=2e3,Iy=2001;let Kc=class{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const a=i.indexOf(n);a!==-1&&i.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let a=0,s=i.length;a<s;a++)i[a].call(this,e);e.target=null}}};const Va=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let aF=1234567;const ap=Math.PI/180,zg=180/Math.PI;function To(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Va[t&255]+Va[t>>8&255]+Va[t>>16&255]+Va[t>>24&255]+"-"+Va[e&255]+Va[e>>8&255]+"-"+Va[e>>16&15|64]+Va[e>>24&255]+"-"+Va[n&63|128]+Va[n>>8&255]+"-"+Va[n>>16&255]+Va[n>>24&255]+Va[r&255]+Va[r>>8&255]+Va[r>>16&255]+Va[r>>24&255]).toLowerCase()}function ti(t,e,n){return Math.max(e,Math.min(n,t))}function GD(t,e){return(t%e+e)%e}function Q1e(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function J1e(t,e,n){return t!==e?(n-t)/(e-t):0}function J0(t,e,n){return(1-n)*t+n*e}function eSe(t,e,n,r){return J0(t,e,1-Math.exp(-n*r))}function tSe(t,e=1){return e-Math.abs(GD(t,e*2)-e)}function nSe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function rSe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function iSe(t,e){return t+Math.floor(Math.random()*(e-t+1))}function aSe(t,e){return t+Math.random()*(e-t)}function sSe(t){return t*(.5-Math.random())}function oSe(t){t!==void 0&&(aF=t);let e=aF+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function lSe(t){return t*ap}function cSe(t){return t*zg}function uSe(t){return(t&t-1)===0&&t!==0}function dSe(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function fSe(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function hSe(t,e,n,r,i){const a=Math.cos,s=Math.sin,o=a(n/2),l=s(n/2),u=a((e+r)/2),d=s((e+r)/2),f=a((e-r)/2),p=s((e-r)/2),m=a((r-e)/2),y=s((r-e)/2);switch(i){case"XYX":t.set(o*d,l*f,l*p,o*u);break;case"YZY":t.set(l*p,o*d,l*f,o*u);break;case"ZXZ":t.set(l*f,l*p,o*d,o*u);break;case"XZX":t.set(o*d,l*y,l*m,o*u);break;case"YXY":t.set(l*m,o*d,l*y,o*u);break;case"ZYZ":t.set(l*y,l*m,o*d,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function ys(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function _n(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const Y7={DEG2RAD:ap,RAD2DEG:zg,generateUUID:To,clamp:ti,euclideanModulo:GD,mapLinear:Q1e,inverseLerp:J1e,lerp:J0,damp:eSe,pingpong:tSe,smoothstep:nSe,smootherstep:rSe,randInt:iSe,randFloat:aSe,randFloatSpread:sSe,seededRandom:oSe,degToRad:lSe,radToDeg:cSe,isPowerOfTwo:uSe,ceilPowerOfTwo:dSe,floorPowerOfTwo:fSe,setQuaternionFromProperEuler:hSe,normalize:_n,denormalize:ys};class lt{constructor(e=0,n=0){lt.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(ti(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),a=this.x-e.x,s=this.y-e.y;return this.x=a*r-s*i+e.x,this.y=a*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class pn{constructor(e,n,r,i,a,s,o,l,u){pn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,a,s,o,l,u)}set(e,n,r,i,a,s,o,l,u){const d=this.elements;return d[0]=e,d[1]=i,d[2]=o,d[3]=n,d[4]=a,d[5]=l,d[6]=r,d[7]=s,d[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,a=this.elements,s=r[0],o=r[3],l=r[6],u=r[1],d=r[4],f=r[7],p=r[2],m=r[5],y=r[8],_=i[0],v=i[3],w=i[6],M=i[1],C=i[4],N=i[7],P=i[2],R=i[5],k=i[8];return a[0]=s*_+o*M+l*P,a[3]=s*v+o*C+l*R,a[6]=s*w+o*N+l*k,a[1]=u*_+d*M+f*P,a[4]=u*v+d*C+f*R,a[7]=u*w+d*N+f*k,a[2]=p*_+m*M+y*P,a[5]=p*v+m*C+y*R,a[8]=p*w+m*N+y*k,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],d=e[8];return n*s*d-n*o*u-r*a*d+r*o*l+i*a*u-i*s*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],d=e[8],f=d*s-o*u,p=o*l-d*a,m=u*a-s*l,y=n*f+r*p+i*m;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/y;return e[0]=f*_,e[1]=(i*u-d*r)*_,e[2]=(o*r-i*s)*_,e[3]=p*_,e[4]=(d*n-i*l)*_,e[5]=(i*a-o*n)*_,e[6]=m*_,e[7]=(r*l-u*n)*_,e[8]=(s*n-r*a)*_,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,a,s,o){const l=Math.cos(a),u=Math.sin(a);return this.set(r*l,r*u,-r*(l*s+u*o)+s+e,-i*u,i*l,-i*(-u*s+l*o)+o+n,0,0,1),this}scale(e,n){return this.premultiply(rN.makeScale(e,n)),this}rotate(e){return this.premultiply(rN.makeRotation(-e)),this}translate(e,n){return this.premultiply(rN.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const rN=new pn;function q7(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const pSe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ug(t,e){return new pSe[t](e)}function Ly(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function X7(){const t=Ly("canvas");return t.style.display="block",t}const sF={};function B0(t){t in sF||(sF[t]=!0,console.warn(t))}function mSe(t,e,n){return new Promise(function(r,i){function a(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(a,n);break;default:r()}}setTimeout(a,n)})}function gSe(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function vSe(t){const e=t.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const kn={enabled:!0,workingColorSpace:kp,spaces:{},convert:function(t,e,n){return this.enabled===!1||e===n||!e||!n||(this.spaces[e].transfer===er&&(t.r=Ju(t.r),t.g=Ju(t.g),t.b=Ju(t.b)),this.spaces[e].primaries!==this.spaces[n].primaries&&(t.applyMatrix3(this.spaces[e].toXYZ),t.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===er&&(t.r=_g(t.r),t.g=_g(t.g),t.b=_g(t.b))),t},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)},getPrimaries:function(t){return this.spaces[t].primaries},getTransfer:function(t){return t===zu?Cx:this.spaces[t].transfer},getLuminanceCoefficients:function(t,e=this.workingColorSpace){return t.fromArray(this.spaces[e].luminanceCoefficients)},define:function(t){Object.assign(this.spaces,t)},_getMatrix:function(t,e,n){return t.copy(this.spaces[e].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(t){return this.spaces[t].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(t=this.workingColorSpace){return this.spaces[t].workingColorSpaceConfig.unpackColorSpace}};function Ju(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function _g(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const oF=[.64,.33,.3,.6,.15,.06],lF=[.2126,.7152,.0722],cF=[.3127,.329],uF=new pn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),dF=new pn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);kn.define({[kp]:{primaries:oF,whitePoint:cF,transfer:Cx,toXYZ:uF,fromXYZ:dF,luminanceCoefficients:lF,workingColorSpaceConfig:{unpackColorSpace:Vs},outputColorSpaceConfig:{drawingBufferColorSpace:Vs}},[Vs]:{primaries:oF,whitePoint:cF,transfer:er,toXYZ:uF,fromXYZ:dF,luminanceCoefficients:lF,outputColorSpaceConfig:{drawingBufferColorSpace:Vs}}});let jm;class K7{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{jm===void 0&&(jm=Ly("canvas")),jm.width=e.width,jm.height=e.height;const r=jm.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=jm}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Ly("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),a=i.data;for(let s=0;s<a.length;s++)a[s]=Ju(a[s]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Ju(n[r]/255)*255):n[r]=Ju(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let ySe=0;class qh{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:ySe++}),this.uuid=To(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let a;if(Array.isArray(i)){a=[];for(let s=0,o=i.length;s<o;s++)i[s].isDataTexture?a.push(iN(i[s].image)):a.push(iN(i[s]))}else a=iN(i);r.url=a}return n||(e.images[this.uuid]=r),r}}function iN(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?K7.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let xSe=0;class Hr extends Kc{constructor(e=Hr.DEFAULT_IMAGE,n=Hr.DEFAULT_MAPPING,r=Jo,i=Jo,a=gi,s=Oc,o=Ja,l=Xl,u=Hr.DEFAULT_ANISOTROPY,d=zu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:xSe++}),this.uuid=To(),this.name="",this.source=new qh(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=a,this.minFilter=s,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new lt(0,0),this.repeat=new lt(1,1),this.center=new lt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new pn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==B2)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ry:e.x=e.x-Math.floor(e.x);break;case Jo:e.x=e.x<0?0:1;break;case Dy:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ry:e.y=e.y-Math.floor(e.y);break;case Jo:e.y=e.y<0?0:1;break;case Dy:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Hr.DEFAULT_IMAGE=null;Hr.DEFAULT_MAPPING=B2;Hr.DEFAULT_ANISOTROPY=1;class Sn{constructor(e=0,n=0,r=0,i=1){Sn.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,a=this.w,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i+s[12]*a,this.y=s[1]*n+s[5]*r+s[9]*i+s[13]*a,this.z=s[2]*n+s[6]*r+s[10]*i+s[14]*a,this.w=s[3]*n+s[7]*r+s[11]*i+s[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,a;const l=e.elements,u=l[0],d=l[4],f=l[8],p=l[1],m=l[5],y=l[9],_=l[2],v=l[6],w=l[10];if(Math.abs(d-p)<.01&&Math.abs(f-_)<.01&&Math.abs(y-v)<.01){if(Math.abs(d+p)<.1&&Math.abs(f+_)<.1&&Math.abs(y+v)<.1&&Math.abs(u+m+w-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const C=(u+1)/2,N=(m+1)/2,P=(w+1)/2,R=(d+p)/4,k=(f+_)/4,U=(y+v)/4;return C>N&&C>P?C<.01?(r=0,i=.707106781,a=.707106781):(r=Math.sqrt(C),i=R/r,a=k/r):N>P?N<.01?(r=.707106781,i=0,a=.707106781):(i=Math.sqrt(N),r=R/i,a=U/i):P<.01?(r=.707106781,i=.707106781,a=0):(a=Math.sqrt(P),r=k/a,i=U/a),this.set(r,i,a,n),this}let M=Math.sqrt((v-y)*(v-y)+(f-_)*(f-_)+(p-d)*(p-d));return Math.abs(M)<.001&&(M=1),this.x=(v-y)/M,this.y=(f-_)/M,this.z=(p-d)/M,this.w=Math.acos((u+m+w-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Z7 extends Kc{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Sn(0,0,e,n),this.scissorTest=!1,this.viewport=new Sn(0,0,e,n);const i={width:e,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:gi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const a=new Hr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);a.flipY=!1,a.generateMipmaps=r.generateMipmaps,a.internalFormat=r.internalFormat,this.textures=[];const s=r.count;for(let o=0;o<s;o++)this.textures[o]=a.clone(),this.textures[o].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,a=this.textures.length;i<a;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new qh(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Kl extends Z7{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class q2 extends Hr{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Ra,this.minFilter=Ra,this.wrapR=Jo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class bSe extends Kl{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new q2(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class $D extends Hr{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Ra,this.minFilter=Ra,this.wrapR=Jo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class _Se extends Kl{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new $D(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class es{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,a,s,o){let l=r[i+0],u=r[i+1],d=r[i+2],f=r[i+3];const p=a[s+0],m=a[s+1],y=a[s+2],_=a[s+3];if(o===0){e[n+0]=l,e[n+1]=u,e[n+2]=d,e[n+3]=f;return}if(o===1){e[n+0]=p,e[n+1]=m,e[n+2]=y,e[n+3]=_;return}if(f!==_||l!==p||u!==m||d!==y){let v=1-o;const w=l*p+u*m+d*y+f*_,M=w>=0?1:-1,C=1-w*w;if(C>Number.EPSILON){const P=Math.sqrt(C),R=Math.atan2(P,w*M);v=Math.sin(v*R)/P,o=Math.sin(o*R)/P}const N=o*M;if(l=l*v+p*N,u=u*v+m*N,d=d*v+y*N,f=f*v+_*N,v===1-o){const P=1/Math.sqrt(l*l+u*u+d*d+f*f);l*=P,u*=P,d*=P,f*=P}}e[n]=l,e[n+1]=u,e[n+2]=d,e[n+3]=f}static multiplyQuaternionsFlat(e,n,r,i,a,s){const o=r[i],l=r[i+1],u=r[i+2],d=r[i+3],f=a[s],p=a[s+1],m=a[s+2],y=a[s+3];return e[n]=o*y+d*f+l*m-u*p,e[n+1]=l*y+d*p+u*f-o*m,e[n+2]=u*y+d*m+o*p-l*f,e[n+3]=d*y-o*f-l*p-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,a=e._z,s=e._order,o=Math.cos,l=Math.sin,u=o(r/2),d=o(i/2),f=o(a/2),p=l(r/2),m=l(i/2),y=l(a/2);switch(s){case"XYZ":this._x=p*d*f+u*m*y,this._y=u*m*f-p*d*y,this._z=u*d*y+p*m*f,this._w=u*d*f-p*m*y;break;case"YXZ":this._x=p*d*f+u*m*y,this._y=u*m*f-p*d*y,this._z=u*d*y-p*m*f,this._w=u*d*f+p*m*y;break;case"ZXY":this._x=p*d*f-u*m*y,this._y=u*m*f+p*d*y,this._z=u*d*y+p*m*f,this._w=u*d*f-p*m*y;break;case"ZYX":this._x=p*d*f-u*m*y,this._y=u*m*f+p*d*y,this._z=u*d*y-p*m*f,this._w=u*d*f+p*m*y;break;case"YZX":this._x=p*d*f+u*m*y,this._y=u*m*f+p*d*y,this._z=u*d*y-p*m*f,this._w=u*d*f-p*m*y;break;case"XZY":this._x=p*d*f-u*m*y,this._y=u*m*f-p*d*y,this._z=u*d*y+p*m*f,this._w=u*d*f+p*m*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],a=n[8],s=n[1],o=n[5],l=n[9],u=n[2],d=n[6],f=n[10],p=r+o+f;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(d-l)*m,this._y=(a-u)*m,this._z=(s-i)*m}else if(r>o&&r>f){const m=2*Math.sqrt(1+r-o-f);this._w=(d-l)/m,this._x=.25*m,this._y=(i+s)/m,this._z=(a+u)/m}else if(o>f){const m=2*Math.sqrt(1+o-r-f);this._w=(a-u)/m,this._x=(i+s)/m,this._y=.25*m,this._z=(l+d)/m}else{const m=2*Math.sqrt(1+f-r-o);this._w=(s-i)/m,this._x=(a+u)/m,this._y=(l+d)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ti(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,a=e._z,s=e._w,o=n._x,l=n._y,u=n._z,d=n._w;return this._x=r*d+s*o+i*u-a*l,this._y=i*d+s*l+a*o-r*u,this._z=a*d+s*u+r*l-i*o,this._w=s*d-r*o-i*l-a*u,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,a=this._z,s=this._w;let o=s*e._w+r*e._x+i*e._y+a*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=r,this._y=i,this._z=a,this;const l=1-o*o;if(l<=Number.EPSILON){const m=1-n;return this._w=m*s+n*this._w,this._x=m*r+n*this._x,this._y=m*i+n*this._y,this._z=m*a+n*this._z,this.normalize(),this}const u=Math.sqrt(l),d=Math.atan2(u,o),f=Math.sin((1-n)*d)/u,p=Math.sin(n*d)/u;return this._w=s*f+this._w*p,this._x=r*f+this._x*p,this._y=i*f+this._y*p,this._z=a*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),a=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),a*Math.sin(n),a*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class he{constructor(e=0,n=0,r=0){he.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(fF.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(fF.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*n+a[3]*r+a[6]*i,this.y=a[1]*n+a[4]*r+a[7]*i,this.z=a[2]*n+a[5]*r+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,a=e.elements,s=1/(a[3]*n+a[7]*r+a[11]*i+a[15]);return this.x=(a[0]*n+a[4]*r+a[8]*i+a[12])*s,this.y=(a[1]*n+a[5]*r+a[9]*i+a[13])*s,this.z=(a[2]*n+a[6]*r+a[10]*i+a[14])*s,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,a=e.x,s=e.y,o=e.z,l=e.w,u=2*(s*i-o*r),d=2*(o*n-a*i),f=2*(a*r-s*n);return this.x=n+l*u+s*f-o*d,this.y=r+l*d+o*u-a*f,this.z=i+l*f+a*d-s*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*n+a[4]*r+a[8]*i,this.y=a[1]*n+a[5]*r+a[9]*i,this.z=a[2]*n+a[6]*r+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,a=e.z,s=n.x,o=n.y,l=n.z;return this.x=i*l-a*o,this.y=a*s-r*l,this.z=r*o-i*s,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return aN.copy(this).projectOnVector(e),this.sub(aN)}reflect(e){return this.sub(aN.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(ti(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const aN=new he,fF=new es;class ji{constructor(e=new he(1/0,1/0,1/0),n=new he(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(kl.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(kl.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=kl.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const a=r.getAttribute("position");if(n===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=a.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,kl):kl.fromBufferAttribute(a,s),kl.applyMatrix4(e.matrixWorld),this.expandByPoint(kl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),i_.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),i_.copy(r.boundingBox)),i_.applyMatrix4(e.matrixWorld),this.union(i_)}const i=e.children;for(let a=0,s=i.length;a<s;a++)this.expandByObject(i[a],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,kl),kl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(x0),a_.subVectors(this.max,x0),Om.subVectors(e.a,x0),Im.subVectors(e.b,x0),Lm.subVectors(e.c,x0),nf.subVectors(Im,Om),rf.subVectors(Lm,Im),ph.subVectors(Om,Lm);let n=[0,-nf.z,nf.y,0,-rf.z,rf.y,0,-ph.z,ph.y,nf.z,0,-nf.x,rf.z,0,-rf.x,ph.z,0,-ph.x,-nf.y,nf.x,0,-rf.y,rf.x,0,-ph.y,ph.x,0];return!sN(n,Om,Im,Lm,a_)||(n=[1,0,0,0,1,0,0,0,1],!sN(n,Om,Im,Lm,a_))?!1:(s_.crossVectors(nf,rf),n=[s_.x,s_.y,s_.z],sN(n,Om,Im,Lm,a_))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,kl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(kl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ru[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ru[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ru[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ru[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ru[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ru[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ru[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ru[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ru),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ru=[new he,new he,new he,new he,new he,new he,new he,new he],kl=new he,i_=new ji,Om=new he,Im=new he,Lm=new he,nf=new he,rf=new he,ph=new he,x0=new he,a_=new he,s_=new he,mh=new he;function sN(t,e,n,r,i){for(let a=0,s=t.length-3;a<=s;a+=3){mh.fromArray(t,a);const o=i.x*Math.abs(mh.x)+i.y*Math.abs(mh.y)+i.z*Math.abs(mh.z),l=e.dot(mh),u=n.dot(mh),d=r.dot(mh);if(Math.max(-Math.max(l,u,d),Math.min(l,u,d))>o)return!1}return!0}const wSe=new ji,b0=new he,oN=new he;class Gi{constructor(e=new he,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):wSe.setFromPoints(e).getCenter(r);let i=0;for(let a=0,s=e.length;a<s;a++)i=Math.max(i,r.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;b0.subVectors(e,this.center);const n=b0.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(b0,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(oN.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(b0.copy(e.center).add(oN)),this.expandByPoint(b0.copy(e.center).sub(oN))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Du=new he,lN=new he,o_=new he,af=new he,cN=new he,l_=new he,uN=new he;class jp{constructor(e=new he,n=new he(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Du)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Du.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Du.copy(this.origin).addScaledVector(this.direction,n),Du.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){lN.copy(e).add(n).multiplyScalar(.5),o_.copy(n).sub(e).normalize(),af.copy(this.origin).sub(lN);const a=e.distanceTo(n)*.5,s=-this.direction.dot(o_),o=af.dot(this.direction),l=-af.dot(o_),u=af.lengthSq(),d=Math.abs(1-s*s);let f,p,m,y;if(d>0)if(f=s*l-o,p=s*o-l,y=a*d,f>=0)if(p>=-y)if(p<=y){const _=1/d;f*=_,p*=_,m=f*(f+s*p+2*o)+p*(s*f+p+2*l)+u}else p=a,f=Math.max(0,-(s*p+o)),m=-f*f+p*(p+2*l)+u;else p=-a,f=Math.max(0,-(s*p+o)),m=-f*f+p*(p+2*l)+u;else p<=-y?(f=Math.max(0,-(-s*a+o)),p=f>0?-a:Math.min(Math.max(-a,-l),a),m=-f*f+p*(p+2*l)+u):p<=y?(f=0,p=Math.min(Math.max(-a,-l),a),m=p*(p+2*l)+u):(f=Math.max(0,-(s*a+o)),p=f>0?a:Math.min(Math.max(-a,-l),a),m=-f*f+p*(p+2*l)+u);else p=s>0?-a:a,f=Math.max(0,-(s*p+o)),m=-f*f+p*(p+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(lN).addScaledVector(o_,p),m}intersectSphere(e,n){Du.subVectors(e.center,this.origin);const r=Du.dot(this.direction),i=Du.dot(Du)-r*r,a=e.radius*e.radius;if(i>a)return null;const s=Math.sqrt(a-i),o=r-s,l=r+s;return l<0?null:o<0?this.at(l,n):this.at(o,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,a,s,o,l;const u=1/this.direction.x,d=1/this.direction.y,f=1/this.direction.z,p=this.origin;return u>=0?(r=(e.min.x-p.x)*u,i=(e.max.x-p.x)*u):(r=(e.max.x-p.x)*u,i=(e.min.x-p.x)*u),d>=0?(a=(e.min.y-p.y)*d,s=(e.max.y-p.y)*d):(a=(e.max.y-p.y)*d,s=(e.min.y-p.y)*d),r>s||a>i||((a>r||isNaN(r))&&(r=a),(s<i||isNaN(i))&&(i=s),f>=0?(o=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(o=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),r>l||o>i)||((o>r||r!==r)&&(r=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Du)!==null}intersectTriangle(e,n,r,i,a){cN.subVectors(n,e),l_.subVectors(r,e),uN.crossVectors(cN,l_);let s=this.direction.dot(uN),o;if(s>0){if(i)return null;o=1}else if(s<0)o=-1,s=-s;else return null;af.subVectors(this.origin,e);const l=o*this.direction.dot(l_.crossVectors(af,l_));if(l<0)return null;const u=o*this.direction.dot(cN.cross(af));if(u<0||l+u>s)return null;const d=-o*af.dot(uN);return d<0?null:this.at(d/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class rn{constructor(e,n,r,i,a,s,o,l,u,d,f,p,m,y,_,v){rn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,a,s,o,l,u,d,f,p,m,y,_,v)}set(e,n,r,i,a,s,o,l,u,d,f,p,m,y,_,v){const w=this.elements;return w[0]=e,w[4]=n,w[8]=r,w[12]=i,w[1]=a,w[5]=s,w[9]=o,w[13]=l,w[2]=u,w[6]=d,w[10]=f,w[14]=p,w[3]=m,w[7]=y,w[11]=_,w[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new rn().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/Fm.setFromMatrixColumn(e,0).length(),a=1/Fm.setFromMatrixColumn(e,1).length(),s=1/Fm.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*a,n[5]=r[5]*a,n[6]=r[6]*a,n[7]=0,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,a=e.z,s=Math.cos(r),o=Math.sin(r),l=Math.cos(i),u=Math.sin(i),d=Math.cos(a),f=Math.sin(a);if(e.order==="XYZ"){const p=s*d,m=s*f,y=o*d,_=o*f;n[0]=l*d,n[4]=-l*f,n[8]=u,n[1]=m+y*u,n[5]=p-_*u,n[9]=-o*l,n[2]=_-p*u,n[6]=y+m*u,n[10]=s*l}else if(e.order==="YXZ"){const p=l*d,m=l*f,y=u*d,_=u*f;n[0]=p+_*o,n[4]=y*o-m,n[8]=s*u,n[1]=s*f,n[5]=s*d,n[9]=-o,n[2]=m*o-y,n[6]=_+p*o,n[10]=s*l}else if(e.order==="ZXY"){const p=l*d,m=l*f,y=u*d,_=u*f;n[0]=p-_*o,n[4]=-s*f,n[8]=y+m*o,n[1]=m+y*o,n[5]=s*d,n[9]=_-p*o,n[2]=-s*u,n[6]=o,n[10]=s*l}else if(e.order==="ZYX"){const p=s*d,m=s*f,y=o*d,_=o*f;n[0]=l*d,n[4]=y*u-m,n[8]=p*u+_,n[1]=l*f,n[5]=_*u+p,n[9]=m*u-y,n[2]=-u,n[6]=o*l,n[10]=s*l}else if(e.order==="YZX"){const p=s*l,m=s*u,y=o*l,_=o*u;n[0]=l*d,n[4]=_-p*f,n[8]=y*f+m,n[1]=f,n[5]=s*d,n[9]=-o*d,n[2]=-u*d,n[6]=m*f+y,n[10]=p-_*f}else if(e.order==="XZY"){const p=s*l,m=s*u,y=o*l,_=o*u;n[0]=l*d,n[4]=-f,n[8]=u*d,n[1]=p*f+_,n[5]=s*d,n[9]=m*f-y,n[2]=y*f-m,n[6]=o*d,n[10]=_*f+p}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(SSe,e,ESe)}lookAt(e,n,r){const i=this.elements;return go.subVectors(e,n),go.lengthSq()===0&&(go.z=1),go.normalize(),sf.crossVectors(r,go),sf.lengthSq()===0&&(Math.abs(r.z)===1?go.x+=1e-4:go.z+=1e-4,go.normalize(),sf.crossVectors(r,go)),sf.normalize(),c_.crossVectors(go,sf),i[0]=sf.x,i[4]=c_.x,i[8]=go.x,i[1]=sf.y,i[5]=c_.y,i[9]=go.y,i[2]=sf.z,i[6]=c_.z,i[10]=go.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,a=this.elements,s=r[0],o=r[4],l=r[8],u=r[12],d=r[1],f=r[5],p=r[9],m=r[13],y=r[2],_=r[6],v=r[10],w=r[14],M=r[3],C=r[7],N=r[11],P=r[15],R=i[0],k=i[4],U=i[8],I=i[12],L=i[1],z=i[5],O=i[9],q=i[13],Y=i[2],X=i[6],ee=i[10],se=i[14],W=i[3],$=i[7],G=i[11],j=i[15];return a[0]=s*R+o*L+l*Y+u*W,a[4]=s*k+o*z+l*X+u*$,a[8]=s*U+o*O+l*ee+u*G,a[12]=s*I+o*q+l*se+u*j,a[1]=d*R+f*L+p*Y+m*W,a[5]=d*k+f*z+p*X+m*$,a[9]=d*U+f*O+p*ee+m*G,a[13]=d*I+f*q+p*se+m*j,a[2]=y*R+_*L+v*Y+w*W,a[6]=y*k+_*z+v*X+w*$,a[10]=y*U+_*O+v*ee+w*G,a[14]=y*I+_*q+v*se+w*j,a[3]=M*R+C*L+N*Y+P*W,a[7]=M*k+C*z+N*X+P*$,a[11]=M*U+C*O+N*ee+P*G,a[15]=M*I+C*q+N*se+P*j,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],a=e[12],s=e[1],o=e[5],l=e[9],u=e[13],d=e[2],f=e[6],p=e[10],m=e[14],y=e[3],_=e[7],v=e[11],w=e[15];return y*(+a*l*f-i*u*f-a*o*p+r*u*p+i*o*m-r*l*m)+_*(+n*l*m-n*u*p+a*s*p-i*s*m+i*u*d-a*l*d)+v*(+n*u*f-n*o*m-a*s*f+r*s*m+a*o*d-r*u*d)+w*(-i*o*d-n*l*f+n*o*p+i*s*f-r*s*p+r*l*d)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],d=e[8],f=e[9],p=e[10],m=e[11],y=e[12],_=e[13],v=e[14],w=e[15],M=f*v*u-_*p*u+_*l*m-o*v*m-f*l*w+o*p*w,C=y*p*u-d*v*u-y*l*m+s*v*m+d*l*w-s*p*w,N=d*_*u-y*f*u+y*o*m-s*_*m-d*o*w+s*f*w,P=y*f*l-d*_*l-y*o*p+s*_*p+d*o*v-s*f*v,R=n*M+r*C+i*N+a*P;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const k=1/R;return e[0]=M*k,e[1]=(_*p*a-f*v*a-_*i*m+r*v*m+f*i*w-r*p*w)*k,e[2]=(o*v*a-_*l*a+_*i*u-r*v*u-o*i*w+r*l*w)*k,e[3]=(f*l*a-o*p*a-f*i*u+r*p*u+o*i*m-r*l*m)*k,e[4]=C*k,e[5]=(d*v*a-y*p*a+y*i*m-n*v*m-d*i*w+n*p*w)*k,e[6]=(y*l*a-s*v*a-y*i*u+n*v*u+s*i*w-n*l*w)*k,e[7]=(s*p*a-d*l*a+d*i*u-n*p*u-s*i*m+n*l*m)*k,e[8]=N*k,e[9]=(y*f*a-d*_*a-y*r*m+n*_*m+d*r*w-n*f*w)*k,e[10]=(s*_*a-y*o*a+y*r*u-n*_*u-s*r*w+n*o*w)*k,e[11]=(d*o*a-s*f*a-d*r*u+n*f*u+s*r*m-n*o*m)*k,e[12]=P*k,e[13]=(d*_*i-y*f*i+y*r*p-n*_*p-d*r*v+n*f*v)*k,e[14]=(y*o*i-s*_*i-y*r*l+n*_*l+s*r*v-n*o*v)*k,e[15]=(s*f*i-d*o*i+d*r*l-n*f*l-s*r*p+n*o*p)*k,this}scale(e){const n=this.elements,r=e.x,i=e.y,a=e.z;return n[0]*=r,n[4]*=i,n[8]*=a,n[1]*=r,n[5]*=i,n[9]*=a,n[2]*=r,n[6]*=i,n[10]*=a,n[3]*=r,n[7]*=i,n[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),a=1-r,s=e.x,o=e.y,l=e.z,u=a*s,d=a*o;return this.set(u*s+r,u*o-i*l,u*l+i*o,0,u*o+i*l,d*o+r,d*l-i*s,0,u*l-i*o,d*l+i*s,a*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,a,s){return this.set(1,r,a,0,e,1,s,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,a=n._x,s=n._y,o=n._z,l=n._w,u=a+a,d=s+s,f=o+o,p=a*u,m=a*d,y=a*f,_=s*d,v=s*f,w=o*f,M=l*u,C=l*d,N=l*f,P=r.x,R=r.y,k=r.z;return i[0]=(1-(_+w))*P,i[1]=(m+N)*P,i[2]=(y-C)*P,i[3]=0,i[4]=(m-N)*R,i[5]=(1-(p+w))*R,i[6]=(v+M)*R,i[7]=0,i[8]=(y+C)*k,i[9]=(v-M)*k,i[10]=(1-(p+_))*k,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let a=Fm.set(i[0],i[1],i[2]).length();const s=Fm.set(i[4],i[5],i[6]).length(),o=Fm.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],jl.copy(this);const u=1/a,d=1/s,f=1/o;return jl.elements[0]*=u,jl.elements[1]*=u,jl.elements[2]*=u,jl.elements[4]*=d,jl.elements[5]*=d,jl.elements[6]*=d,jl.elements[8]*=f,jl.elements[9]*=f,jl.elements[10]*=f,n.setFromRotationMatrix(jl),r.x=a,r.y=s,r.z=o,this}makePerspective(e,n,r,i,a,s,o=Ic){const l=this.elements,u=2*a/(n-e),d=2*a/(r-i),f=(n+e)/(n-e),p=(r+i)/(r-i);let m,y;if(o===Ic)m=-(s+a)/(s-a),y=-2*s*a/(s-a);else if(o===Iy)m=-s/(s-a),y=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=u,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=d,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=y,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,a,s,o=Ic){const l=this.elements,u=1/(n-e),d=1/(r-i),f=1/(s-a),p=(n+e)*u,m=(r+i)*d;let y,_;if(o===Ic)y=(s+a)*f,_=-2*f;else if(o===Iy)y=a*f,_=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=_,l[14]=-y,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Fm=new he,jl=new rn,SSe=new he(0,0,0),ESe=new he(1,1,1),sf=new he,c_=new he,go=new he,hF=new rn,pF=new es;class Do{constructor(e=0,n=0,r=0,i=Do.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,a=i[0],s=i[4],o=i[8],l=i[1],u=i[5],d=i[9],f=i[2],p=i[6],m=i[10];switch(n){case"XYZ":this._y=Math.asin(ti(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-d,m),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-ti(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(o,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,a),this._z=0);break;case"ZXY":this._x=Math.asin(ti(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-ti(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(ti(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(o,m));break;case"XZY":this._z=Math.asin(-ti(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-d,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return hF.makeRotationFromQuaternion(e),this.setFromRotationMatrix(hF,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return pF.setFromEuler(this),this.setFromQuaternion(pF,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Do.DEFAULT_ORDER="XYZ";class sp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let MSe=0;const mF=new he,Um=new es,ku=new rn,u_=new he,_0=new he,CSe=new he,NSe=new es,gF=new he(1,0,0),vF=new he(0,1,0),yF=new he(0,0,1),xF={type:"added"},ASe={type:"removed"},Bm={type:"childadded",child:null},dN={type:"childremoved",child:null};class Un extends Kc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:MSe++}),this.uuid=To(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Un.DEFAULT_UP.clone();const e=new he,n=new Do,r=new es,i=new he(1,1,1);function a(){r.setFromEuler(n,!1)}function s(){n.setFromQuaternion(r,void 0,!1)}n._onChange(a),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new rn},normalMatrix:{value:new pn}}),this.matrix=new rn,this.matrixWorld=new rn,this.matrixAutoUpdate=Un.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Un.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new sp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Um.setFromAxisAngle(e,n),this.quaternion.multiply(Um),this}rotateOnWorldAxis(e,n){return Um.setFromAxisAngle(e,n),this.quaternion.premultiply(Um),this}rotateX(e){return this.rotateOnAxis(gF,e)}rotateY(e){return this.rotateOnAxis(vF,e)}rotateZ(e){return this.rotateOnAxis(yF,e)}translateOnAxis(e,n){return mF.copy(e).applyQuaternion(this.quaternion),this.position.add(mF.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(gF,e)}translateY(e){return this.translateOnAxis(vF,e)}translateZ(e){return this.translateOnAxis(yF,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ku.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?u_.copy(e):u_.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),_0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ku.lookAt(_0,u_,this.up):ku.lookAt(u_,_0,this.up),this.quaternion.setFromRotationMatrix(ku),i&&(ku.extractRotation(i.matrixWorld),Um.setFromRotationMatrix(ku),this.quaternion.premultiply(Um.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(xF),Bm.child=e,this.dispatchEvent(Bm),Bm.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(ASe),dN.child=e,this.dispatchEvent(dN),dN.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),ku.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ku.multiply(e.parent.matrixWorld)),e.applyMatrix4(ku),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(xF),Bm.child=e,this.dispatchEvent(Bm),Bm.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,n);if(s!==void 0)return s}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_0,e,CSe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_0,NSe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function a(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let u=0,d=l.length;u<d;u++){const f=l[u];a(e.shapes,f)}else a(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,u=this.material.length;l<u;l++)o.push(a(e.materials,this.material[l]));i.material=o}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(a(e.animations,l))}}if(n){const o=s(e.geometries),l=s(e.materials),u=s(e.textures),d=s(e.images),f=s(e.shapes),p=s(e.skeletons),m=s(e.animations),y=s(e.nodes);o.length>0&&(r.geometries=o),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),f.length>0&&(r.shapes=f),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),y.length>0&&(r.nodes=y)}return r.object=i,r;function s(o){const l=[];for(const u in o){const d=o[u];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Un.DEFAULT_UP=new he(0,1,0);Un.DEFAULT_MATRIX_AUTO_UPDATE=!0;Un.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ol=new he,ju=new he,fN=new he,Ou=new he,zm=new he,Hm=new he,bF=new he,hN=new he,pN=new he,mN=new he,gN=new Sn,vN=new Sn,yN=new Sn;class Ys{constructor(e=new he,n=new he,r=new he){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Ol.subVectors(e,n),i.cross(Ol);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,n,r,i,a){Ol.subVectors(i,n),ju.subVectors(r,n),fN.subVectors(e,n);const s=Ol.dot(Ol),o=Ol.dot(ju),l=Ol.dot(fN),u=ju.dot(ju),d=ju.dot(fN),f=s*u-o*o;if(f===0)return a.set(0,0,0),null;const p=1/f,m=(u*l-o*d)*p,y=(s*d-o*l)*p;return a.set(1-m-y,y,m)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Ou)===null?!1:Ou.x>=0&&Ou.y>=0&&Ou.x+Ou.y<=1}static getInterpolation(e,n,r,i,a,s,o,l){return this.getBarycoord(e,n,r,i,Ou)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(a,Ou.x),l.addScaledVector(s,Ou.y),l.addScaledVector(o,Ou.z),l)}static getInterpolatedAttribute(e,n,r,i,a,s){return gN.setScalar(0),vN.setScalar(0),yN.setScalar(0),gN.fromBufferAttribute(e,n),vN.fromBufferAttribute(e,r),yN.fromBufferAttribute(e,i),s.setScalar(0),s.addScaledVector(gN,a.x),s.addScaledVector(vN,a.y),s.addScaledVector(yN,a.z),s}static isFrontFacing(e,n,r,i){return Ol.subVectors(r,n),ju.subVectors(e,n),Ol.cross(ju).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ol.subVectors(this.c,this.b),ju.subVectors(this.a,this.b),Ol.cross(ju).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ys.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Ys.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,a){return Ys.getInterpolation(e,this.a,this.b,this.c,n,r,i,a)}containsPoint(e){return Ys.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ys.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,a=this.c;let s,o;zm.subVectors(i,r),Hm.subVectors(a,r),hN.subVectors(e,r);const l=zm.dot(hN),u=Hm.dot(hN);if(l<=0&&u<=0)return n.copy(r);pN.subVectors(e,i);const d=zm.dot(pN),f=Hm.dot(pN);if(d>=0&&f<=d)return n.copy(i);const p=l*f-d*u;if(p<=0&&l>=0&&d<=0)return s=l/(l-d),n.copy(r).addScaledVector(zm,s);mN.subVectors(e,a);const m=zm.dot(mN),y=Hm.dot(mN);if(y>=0&&m<=y)return n.copy(a);const _=m*u-l*y;if(_<=0&&u>=0&&y<=0)return o=u/(u-y),n.copy(r).addScaledVector(Hm,o);const v=d*y-m*f;if(v<=0&&f-d>=0&&m-y>=0)return bF.subVectors(a,i),o=(f-d)/(f-d+(m-y)),n.copy(i).addScaledVector(bF,o);const w=1/(v+_+p);return s=_*w,o=p*w,n.copy(r).addScaledVector(zm,s).addScaledVector(Hm,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Q7={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},of={h:0,s:0,l:0},d_={h:0,s:0,l:0};function xN(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class Ct{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Vs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,kn.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=kn.workingColorSpace){return this.r=e,this.g=n,this.b=r,kn.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=kn.workingColorSpace){if(e=GD(e,1),n=ti(n,0,1),r=ti(r,0,1),n===0)this.r=this.g=this.b=r;else{const a=r<=.5?r*(1+n):r+n-r*n,s=2*r-a;this.r=xN(s,a,e+1/3),this.g=xN(s,a,e),this.b=xN(s,a,e-1/3)}return kn.toWorkingColorSpace(this,i),this}setStyle(e,n=Vs){function r(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,n);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,n);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=i[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,n);if(s===6)return this.setHex(parseInt(a,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Vs){const r=Q7[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ju(e.r),this.g=Ju(e.g),this.b=Ju(e.b),this}copyLinearToSRGB(e){return this.r=_g(e.r),this.g=_g(e.g),this.b=_g(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Vs){return kn.fromWorkingColorSpace(Wa.copy(this),e),Math.round(ti(Wa.r*255,0,255))*65536+Math.round(ti(Wa.g*255,0,255))*256+Math.round(ti(Wa.b*255,0,255))}getHexString(e=Vs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=kn.workingColorSpace){kn.fromWorkingColorSpace(Wa.copy(this),n);const r=Wa.r,i=Wa.g,a=Wa.b,s=Math.max(r,i,a),o=Math.min(r,i,a);let l,u;const d=(o+s)/2;if(o===s)l=0,u=0;else{const f=s-o;switch(u=d<=.5?f/(s+o):f/(2-s-o),s){case r:l=(i-a)/f+(i<a?6:0);break;case i:l=(a-r)/f+2;break;case a:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=u,e.l=d,e}getRGB(e,n=kn.workingColorSpace){return kn.fromWorkingColorSpace(Wa.copy(this),n),e.r=Wa.r,e.g=Wa.g,e.b=Wa.b,e}getStyle(e=Vs){kn.fromWorkingColorSpace(Wa.copy(this),e);const n=Wa.r,r=Wa.g,i=Wa.b;return e!==Vs?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(of),this.setHSL(of.h+e,of.s+n,of.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(of),e.getHSL(d_);const r=J0(of.h,d_.h,n),i=J0(of.s,d_.s,n),a=J0(of.l,d_.l,n);return this.setHSL(r,i,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,a=e.elements;return this.r=a[0]*n+a[3]*r+a[6]*i,this.g=a[1]*n+a[4]*r+a[7]*i,this.b=a[2]*n+a[5]*r+a[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Wa=new Ct;Ct.NAMES=Q7;let TSe=0;class ts extends Kc{static get type(){return"Material"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:TSe++}),this.uuid=To(),this.name="",this.blending=rp,this.side=od,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=H1,this.blendDst=V1,this.blendEquation=pf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ct(0,0,0),this.blendAlpha=0,this.depthFunc=Sp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=UT,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Oh,this.stencilZFail=Oh,this.stencilZPass=Oh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==rp&&(r.blending=this.blending),this.side!==od&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==H1&&(r.blendSrc=this.blendSrc),this.blendDst!==V1&&(r.blendDst=this.blendDst),this.blendEquation!==pf&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Sp&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==UT&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Oh&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Oh&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Oh&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(a){const s=[];for(const o in a){const l=a[o];delete l.metadata,s.push(l)}return s}if(n){const a=i(e.textures),s=i(e.images);a.length>0&&(r.textures=a),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let a=0;a!==i;++a)r[a]=n[a].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class wd extends ts{static get type(){return"MeshBasicMaterial"}constructor(e){super(),this.isMeshBasicMaterial=!0,this.color=new Ct(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Do,this.combine=Ex,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Hu=PSe();function PSe(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,d=0;for(;(u&8388608)===0;)u<<=1,d-=8388608;u&=-8388609,d+=947912704,a[l]=u|d}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:s,offsetTable:o}}function Bs(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=ti(t,-65504,65504),Hu.floatView[0]=t;const e=Hu.uint32View[0],n=e>>23&511;return Hu.baseTable[n]+((e&8388607)>>Hu.shiftTable[n])}function z0(t){const e=t>>10;return Hu.uint32View[0]=Hu.mantissaTable[Hu.offsetTable[e]+(t&1023)]+Hu.exponentTable[e],Hu.floatView[0]}const RSe={toHalfFloat:Bs,fromHalfFloat:z0},Ti=new he,f_=new lt;class cr{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=Oy,this.updateRanges=[],this.gpuType=Xs,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)f_.fromBufferAttribute(this,n),f_.applyMatrix3(e),this.setXY(n,f_.x,f_.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Ti.fromBufferAttribute(this,n),Ti.applyMatrix3(e),this.setXYZ(n,Ti.x,Ti.y,Ti.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Ti.fromBufferAttribute(this,n),Ti.applyMatrix4(e),this.setXYZ(n,Ti.x,Ti.y,Ti.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Ti.fromBufferAttribute(this,n),Ti.applyNormalMatrix(e),this.setXYZ(n,Ti.x,Ti.y,Ti.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Ti.fromBufferAttribute(this,n),Ti.transformDirection(e),this.setXYZ(n,Ti.x,Ti.y,Ti.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=ys(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=_n(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=ys(n,this.array)),n}setX(e,n){return this.normalized&&(n=_n(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=ys(n,this.array)),n}setY(e,n){return this.normalized&&(n=_n(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=ys(n,this.array)),n}setZ(e,n){return this.normalized&&(n=_n(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=ys(n,this.array)),n}setW(e,n){return this.normalized&&(n=_n(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=_n(n,this.array),r=_n(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=_n(n,this.array),r=_n(r,this.array),i=_n(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,a){return e*=this.itemSize,this.normalized&&(n=_n(n,this.array),r=_n(r,this.array),i=_n(i,this.array),a=_n(a,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Oy&&(e.usage=this.usage),e}}class DSe extends cr{constructor(e,n,r){super(new Int8Array(e),n,r)}}class kSe extends cr{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class jSe extends cr{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class OSe extends cr{constructor(e,n,r){super(new Int16Array(e),n,r)}}class YD extends cr{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class ISe extends cr{constructor(e,n,r){super(new Int32Array(e),n,r)}}class qD extends cr{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class LSe extends cr{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=z0(this.array[e*this.itemSize]);return this.normalized&&(n=ys(n,this.array)),n}setX(e,n){return this.normalized&&(n=_n(n,this.array)),this.array[e*this.itemSize]=Bs(n),this}getY(e){let n=z0(this.array[e*this.itemSize+1]);return this.normalized&&(n=ys(n,this.array)),n}setY(e,n){return this.normalized&&(n=_n(n,this.array)),this.array[e*this.itemSize+1]=Bs(n),this}getZ(e){let n=z0(this.array[e*this.itemSize+2]);return this.normalized&&(n=ys(n,this.array)),n}setZ(e,n){return this.normalized&&(n=_n(n,this.array)),this.array[e*this.itemSize+2]=Bs(n),this}getW(e){let n=z0(this.array[e*this.itemSize+3]);return this.normalized&&(n=ys(n,this.array)),n}setW(e,n){return this.normalized&&(n=_n(n,this.array)),this.array[e*this.itemSize+3]=Bs(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=_n(n,this.array),r=_n(r,this.array)),this.array[e+0]=Bs(n),this.array[e+1]=Bs(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=_n(n,this.array),r=_n(r,this.array),i=_n(i,this.array)),this.array[e+0]=Bs(n),this.array[e+1]=Bs(r),this.array[e+2]=Bs(i),this}setXYZW(e,n,r,i,a){return e*=this.itemSize,this.normalized&&(n=_n(n,this.array),r=_n(r,this.array),i=_n(i,this.array),a=_n(a,this.array)),this.array[e+0]=Bs(n),this.array[e+1]=Bs(r),this.array[e+2]=Bs(i),this.array[e+3]=Bs(a),this}}class Bt extends cr{constructor(e,n,r){super(new Float32Array(e),n,r)}}let FSe=0;const Yo=new rn,bN=new Un,Vm=new he,vo=new ji,w0=new ji,sa=new he;class En extends Kc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:FSe++}),this.uuid=To(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(q7(e)?qD:YD)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const a=new pn().getNormalMatrix(e);r.applyNormalMatrix(a),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Yo.makeRotationFromQuaternion(e),this.applyMatrix4(Yo),this}rotateX(e){return Yo.makeRotationX(e),this.applyMatrix4(Yo),this}rotateY(e){return Yo.makeRotationY(e),this.applyMatrix4(Yo),this}rotateZ(e){return Yo.makeRotationZ(e),this.applyMatrix4(Yo),this}translate(e,n,r){return Yo.makeTranslation(e,n,r),this.applyMatrix4(Yo),this}scale(e,n,r){return Yo.makeScale(e,n,r),this.applyMatrix4(Yo),this}lookAt(e){return bN.lookAt(e),bN.updateMatrix(),this.applyMatrix4(bN.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vm).negate(),this.translate(Vm.x,Vm.y,Vm.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const r=[];for(let i=0,a=e.length;i<a;i++){const s=e[i];r.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Bt(r,3))}else{for(let r=0,i=n.count;r<i;r++){const a=e[r];n.setXYZ(r,a.x,a.y,a.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ji);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new he(-1/0,-1/0,-1/0),new he(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const a=n[r];vo.setFromBufferAttribute(a),this.morphTargetsRelative?(sa.addVectors(this.boundingBox.min,vo.min),this.boundingBox.expandByPoint(sa),sa.addVectors(this.boundingBox.max,vo.max),this.boundingBox.expandByPoint(sa)):(this.boundingBox.expandByPoint(vo.min),this.boundingBox.expandByPoint(vo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Gi);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new he,1/0);return}if(e){const r=this.boundingSphere.center;if(vo.setFromBufferAttribute(e),n)for(let a=0,s=n.length;a<s;a++){const o=n[a];w0.setFromBufferAttribute(o),this.morphTargetsRelative?(sa.addVectors(vo.min,w0.min),vo.expandByPoint(sa),sa.addVectors(vo.max,w0.max),vo.expandByPoint(sa)):(vo.expandByPoint(w0.min),vo.expandByPoint(w0.max))}vo.getCenter(r);let i=0;for(let a=0,s=e.count;a<s;a++)sa.fromBufferAttribute(e,a),i=Math.max(i,r.distanceToSquared(sa));if(n)for(let a=0,s=n.length;a<s;a++){const o=n[a],l=this.morphTargetsRelative;for(let u=0,d=o.count;u<d;u++)sa.fromBufferAttribute(o,u),l&&(Vm.fromBufferAttribute(e,u),sa.add(Vm)),i=Math.max(i,r.distanceToSquared(sa))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,a=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new cr(new Float32Array(4*r.count),4));const s=this.getAttribute("tangent"),o=[],l=[];for(let U=0;U<r.count;U++)o[U]=new he,l[U]=new he;const u=new he,d=new he,f=new he,p=new lt,m=new lt,y=new lt,_=new he,v=new he;function w(U,I,L){u.fromBufferAttribute(r,U),d.fromBufferAttribute(r,I),f.fromBufferAttribute(r,L),p.fromBufferAttribute(a,U),m.fromBufferAttribute(a,I),y.fromBufferAttribute(a,L),d.sub(u),f.sub(u),m.sub(p),y.sub(p);const z=1/(m.x*y.y-y.x*m.y);isFinite(z)&&(_.copy(d).multiplyScalar(y.y).addScaledVector(f,-m.y).multiplyScalar(z),v.copy(f).multiplyScalar(m.x).addScaledVector(d,-y.x).multiplyScalar(z),o[U].add(_),o[I].add(_),o[L].add(_),l[U].add(v),l[I].add(v),l[L].add(v))}let M=this.groups;M.length===0&&(M=[{start:0,count:e.count}]);for(let U=0,I=M.length;U<I;++U){const L=M[U],z=L.start,O=L.count;for(let q=z,Y=z+O;q<Y;q+=3)w(e.getX(q+0),e.getX(q+1),e.getX(q+2))}const C=new he,N=new he,P=new he,R=new he;function k(U){P.fromBufferAttribute(i,U),R.copy(P);const I=o[U];C.copy(I),C.sub(P.multiplyScalar(P.dot(I))).normalize(),N.crossVectors(R,I);const z=N.dot(l[U])<0?-1:1;s.setXYZW(U,C.x,C.y,C.z,z)}for(let U=0,I=M.length;U<I;++U){const L=M[U],z=L.start,O=L.count;for(let q=z,Y=z+O;q<Y;q+=3)k(e.getX(q+0)),k(e.getX(q+1)),k(e.getX(q+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new cr(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new he,a=new he,s=new he,o=new he,l=new he,u=new he,d=new he,f=new he;if(e)for(let p=0,m=e.count;p<m;p+=3){const y=e.getX(p+0),_=e.getX(p+1),v=e.getX(p+2);i.fromBufferAttribute(n,y),a.fromBufferAttribute(n,_),s.fromBufferAttribute(n,v),d.subVectors(s,a),f.subVectors(i,a),d.cross(f),o.fromBufferAttribute(r,y),l.fromBufferAttribute(r,_),u.fromBufferAttribute(r,v),o.add(d),l.add(d),u.add(d),r.setXYZ(y,o.x,o.y,o.z),r.setXYZ(_,l.x,l.y,l.z),r.setXYZ(v,u.x,u.y,u.z)}else for(let p=0,m=n.count;p<m;p+=3)i.fromBufferAttribute(n,p+0),a.fromBufferAttribute(n,p+1),s.fromBufferAttribute(n,p+2),d.subVectors(s,a),f.subVectors(i,a),d.cross(f),r.setXYZ(p+0,d.x,d.y,d.z),r.setXYZ(p+1,d.x,d.y,d.z),r.setXYZ(p+2,d.x,d.y,d.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)sa.fromBufferAttribute(e,n),sa.normalize(),e.setXYZ(n,sa.x,sa.y,sa.z)}toNonIndexed(){function e(o,l){const u=o.array,d=o.itemSize,f=o.normalized,p=new u.constructor(l.length*d);let m=0,y=0;for(let _=0,v=l.length;_<v;_++){o.isInterleavedBufferAttribute?m=l[_]*o.data.stride+o.offset:m=l[_]*d;for(let w=0;w<d;w++)p[y++]=u[m++]}return new cr(p,d,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new En,r=this.index.array,i=this.attributes;for(const o in i){const l=i[o],u=e(l,r);n.setAttribute(o,u)}const a=this.morphAttributes;for(const o in a){const l=[],u=a[o];for(let d=0,f=u.length;d<f;d++){const p=u[d],m=e(p,r);l.push(m)}n.morphAttributes[o]=l}n.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,l=s.length;o<l;o++){const u=s[o];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let a=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],d=[];for(let f=0,p=u.length;f<p;f++){const m=u[f];d.push(m.toJSON(e.data))}d.length>0&&(i[l]=d,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const u in i){const d=i[u];this.setAttribute(u,d.clone(n))}const a=e.morphAttributes;for(const u in a){const d=[],f=a[u];for(let p=0,m=f.length;p<m;p++)d.push(f[p].clone(n));this.morphAttributes[u]=d}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let u=0,d=s.length;u<d;u++){const f=s[u];this.addGroup(f.start,f.count,f.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _F=new rn,gh=new jp,h_=new Gi,wF=new he,p_=new he,m_=new he,g_=new he,_N=new he,v_=new he,SF=new he,y_=new he;class Rr extends Un{constructor(e=new En,n=new wd){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,a=r.morphAttributes.position,s=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(a&&o){v_.set(0,0,0);for(let l=0,u=a.length;l<u;l++){const d=o[l],f=a[l];d!==0&&(_N.fromBufferAttribute(f,e),s?v_.addScaledVector(_N,d):v_.addScaledVector(_N.sub(n),d))}n.add(v_)}return n}raycast(e,n){const r=this.geometry,i=this.material,a=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),h_.copy(r.boundingSphere),h_.applyMatrix4(a),gh.copy(e.ray).recast(e.near),!(h_.containsPoint(gh.origin)===!1&&(gh.intersectSphere(h_,wF)===null||gh.origin.distanceToSquared(wF)>(e.far-e.near)**2))&&(_F.copy(a).invert(),gh.copy(e.ray).applyMatrix4(_F),!(r.boundingBox!==null&&gh.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,gh)))}_computeIntersections(e,n,r){let i;const a=this.geometry,s=this.material,o=a.index,l=a.attributes.position,u=a.attributes.uv,d=a.attributes.uv1,f=a.attributes.normal,p=a.groups,m=a.drawRange;if(o!==null)if(Array.isArray(s))for(let y=0,_=p.length;y<_;y++){const v=p[y],w=s[v.materialIndex],M=Math.max(v.start,m.start),C=Math.min(o.count,Math.min(v.start+v.count,m.start+m.count));for(let N=M,P=C;N<P;N+=3){const R=o.getX(N),k=o.getX(N+1),U=o.getX(N+2);i=x_(this,w,e,r,u,d,f,R,k,U),i&&(i.faceIndex=Math.floor(N/3),i.face.materialIndex=v.materialIndex,n.push(i))}}else{const y=Math.max(0,m.start),_=Math.min(o.count,m.start+m.count);for(let v=y,w=_;v<w;v+=3){const M=o.getX(v),C=o.getX(v+1),N=o.getX(v+2);i=x_(this,s,e,r,u,d,f,M,C,N),i&&(i.faceIndex=Math.floor(v/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(s))for(let y=0,_=p.length;y<_;y++){const v=p[y],w=s[v.materialIndex],M=Math.max(v.start,m.start),C=Math.min(l.count,Math.min(v.start+v.count,m.start+m.count));for(let N=M,P=C;N<P;N+=3){const R=N,k=N+1,U=N+2;i=x_(this,w,e,r,u,d,f,R,k,U),i&&(i.faceIndex=Math.floor(N/3),i.face.materialIndex=v.materialIndex,n.push(i))}}else{const y=Math.max(0,m.start),_=Math.min(l.count,m.start+m.count);for(let v=y,w=_;v<w;v+=3){const M=v,C=v+1,N=v+2;i=x_(this,s,e,r,u,d,f,M,C,N),i&&(i.faceIndex=Math.floor(v/3),n.push(i))}}}}function USe(t,e,n,r,i,a,s,o){let l;if(e.side===_s?l=r.intersectTriangle(s,a,i,!0,o):l=r.intersectTriangle(i,a,s,e.side===od,o),l===null)return null;y_.copy(o),y_.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(y_);return u<n.near||u>n.far?null:{distance:u,point:y_.clone(),object:t}}function x_(t,e,n,r,i,a,s,o,l,u){t.getVertexPosition(o,p_),t.getVertexPosition(l,m_),t.getVertexPosition(u,g_);const d=USe(t,e,n,r,p_,m_,g_,SF);if(d){const f=new he;Ys.getBarycoord(SF,p_,m_,g_,f),i&&(d.uv=Ys.getInterpolatedAttribute(i,o,l,u,f,new lt)),a&&(d.uv1=Ys.getInterpolatedAttribute(a,o,l,u,f,new lt)),s&&(d.normal=Ys.getInterpolatedAttribute(s,o,l,u,f,new he),d.normal.dot(r.direction)>0&&d.normal.multiplyScalar(-1));const p={a:o,b:l,c:u,normal:new he,materialIndex:0};Ys.getNormal(p_,m_,g_,p.normal),d.face=p,d.barycoord=f}return d}class Op extends En{constructor(e=1,n=1,r=1,i=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:a,depthSegments:s};const o=this;i=Math.floor(i),a=Math.floor(a),s=Math.floor(s);const l=[],u=[],d=[],f=[];let p=0,m=0;y("z","y","x",-1,-1,r,n,e,s,a,0),y("z","y","x",1,-1,r,n,-e,s,a,1),y("x","z","y",1,1,e,r,n,i,s,2),y("x","z","y",1,-1,e,r,-n,i,s,3),y("x","y","z",1,-1,e,n,r,i,a,4),y("x","y","z",-1,-1,e,n,-r,i,a,5),this.setIndex(l),this.setAttribute("position",new Bt(u,3)),this.setAttribute("normal",new Bt(d,3)),this.setAttribute("uv",new Bt(f,2));function y(_,v,w,M,C,N,P,R,k,U,I){const L=N/k,z=P/U,O=N/2,q=P/2,Y=R/2,X=k+1,ee=U+1;let se=0,W=0;const $=new he;for(let G=0;G<ee;G++){const j=G*z-q;for(let B=0;B<X;B++){const ae=B*L-O;$[_]=ae*M,$[v]=j*C,$[w]=Y,u.push($.x,$.y,$.z),$[_]=0,$[v]=0,$[w]=R>0?1:-1,d.push($.x,$.y,$.z),f.push(B/k),f.push(1-G/U),se+=1}}for(let G=0;G<U;G++)for(let j=0;j<k;j++){const B=p+j+X*G,ae=p+j+X*(G+1),re=p+(j+1)+X*(G+1),de=p+(j+1)+X*G;l.push(B,ae,de),l.push(ae,re,de),W+=6}o.addGroup(m,W,I),m+=W,p+=se}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Op(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Hg(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function ms(t){const e={};for(let n=0;n<t.length;n++){const r=Hg(t[n]);for(const i in r)e[i]=r[i]}return e}function BSe(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function J7(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:kn.workingColorSpace}const Fy={clone:Hg,merge:ms};var zSe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,HSe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class rl extends ts{static get type(){return"ShaderMaterial"}constructor(e){super(),this.isShaderMaterial=!0,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=zSe,this.fragmentShader=HSe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Hg(e.uniforms),this.uniformsGroups=BSe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?n.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?n.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?n.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?n.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?n.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?n.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?n.uniforms[i]={type:"m4",value:s.toArray()}:n.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class Nx extends Un{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new rn,this.projectionMatrix=new rn,this.projectionMatrixInverse=new rn,this.coordinateSystem=Ic}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const lf=new he,EF=new lt,MF=new lt;class hi extends Nx{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=zg*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ap*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return zg*2*Math.atan(Math.tan(ap*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){lf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(lf.x,lf.y).multiplyScalar(-e/lf.z),lf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(lf.x,lf.y).multiplyScalar(-e/lf.z)}getViewSize(e,n){return this.getViewBounds(e,EF,MF),n.subVectors(MF,EF)}setViewOffset(e,n,r,i,a,s){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(ap*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,a=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,u=s.fullHeight;a+=s.offsetX*i/l,n-=s.offsetY*r/u,i*=s.width/l,r*=s.height/u}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Wm=-90,Gm=1;class e9 extends Un{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new hi(Wm,Gm,e,n);i.layers=this.layers,this.add(i);const a=new hi(Wm,Gm,e,n);a.layers=this.layers,this.add(a);const s=new hi(Wm,Gm,e,n);s.layers=this.layers,this.add(s);const o=new hi(Wm,Gm,e,n);o.layers=this.layers,this.add(o);const l=new hi(Wm,Gm,e,n);l.layers=this.layers,this.add(l);const u=new hi(Wm,Gm,e,n);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,a,s,o,l]=n;for(const u of n)this.remove(u);if(e===Ic)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Iy)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of n)this.add(u),u.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,o,l,u,d]=this.children,f=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const _=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,a),e.setRenderTarget(r,1,i),e.render(n,s),e.setRenderTarget(r,2,i),e.render(n,o),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,u),r.texture.generateMipmaps=_,e.setRenderTarget(r,5,i),e.render(n,d),e.setRenderTarget(f,p,m),e.xr.enabled=y,r.texture.needsPMREMUpdate=!0}}class Ax extends Hr{constructor(e,n,r,i,a,s,o,l,u,d){e=e!==void 0?e:[],n=n!==void 0?n:ld,super(e,n,r,i,a,s,o,l,u,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class t9 extends Kl{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new Ax(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:gi}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Op(5,5,5),a=new rl({name:"CubemapFromEquirect",uniforms:Hg(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:_s,blending:Qu});a.uniforms.tEquirect.value=n;const s=new Rr(i,a),o=n.minFilter;return n.minFilter===Oc&&(n.minFilter=gi),new e9(1,10,this).update(e,s),n.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,n,r,i){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(n,r,i);e.setRenderTarget(a)}}const wN=new he,VSe=new he,WSe=new pn;class Fu{constructor(e=new he(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=wN.subVectors(r,n).cross(VSe.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(wN),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:n.copy(e.start).addScaledVector(r,a)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||WSe.getNormalMatrix(e),i=this.coplanarPoint(wN).applyMatrix4(e),a=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const vh=new Gi,b_=new he;class Tx{constructor(e=new Fu,n=new Fu,r=new Fu,i=new Fu,a=new Fu,s=new Fu){this.planes=[e,n,r,i,a,s]}set(e,n,r,i,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(n),o[2].copy(r),o[3].copy(i),o[4].copy(a),o[5].copy(s),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=Ic){const r=this.planes,i=e.elements,a=i[0],s=i[1],o=i[2],l=i[3],u=i[4],d=i[5],f=i[6],p=i[7],m=i[8],y=i[9],_=i[10],v=i[11],w=i[12],M=i[13],C=i[14],N=i[15];if(r[0].setComponents(l-a,p-u,v-m,N-w).normalize(),r[1].setComponents(l+a,p+u,v+m,N+w).normalize(),r[2].setComponents(l+s,p+d,v+y,N+M).normalize(),r[3].setComponents(l-s,p-d,v-y,N-M).normalize(),r[4].setComponents(l-o,p-f,v-_,N-C).normalize(),n===Ic)r[5].setComponents(l+o,p+f,v+_,N+C).normalize();else if(n===Iy)r[5].setComponents(o,f,_,C).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),vh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),vh.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(vh)}intersectsSprite(e){return vh.center.set(0,0,0),vh.radius=.7071067811865476,vh.applyMatrix4(e.matrixWorld),this.intersectsSphere(vh)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let a=0;a<6;a++)if(n[a].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(b_.x=i.normal.x>0?e.max.x:e.min.x,b_.y=i.normal.y>0?e.max.y:e.min.y,b_.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(b_)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function n9(){let t=null,e=!1,n=null,r=null;function i(a,s){n(a,s),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(a){n=a},setContext:function(a){t=a}}}function GSe(t){const e=new WeakMap;function n(o,l){const u=o.array,d=o.usage,f=u.byteLength,p=t.createBuffer();t.bindBuffer(l,p),t.bufferData(l,u,d),o.onUploadCallback();let m;if(u instanceof Float32Array)m=t.FLOAT;else if(u instanceof Uint16Array)o.isFloat16BufferAttribute?m=t.HALF_FLOAT:m=t.UNSIGNED_SHORT;else if(u instanceof Int16Array)m=t.SHORT;else if(u instanceof Uint32Array)m=t.UNSIGNED_INT;else if(u instanceof Int32Array)m=t.INT;else if(u instanceof Int8Array)m=t.BYTE;else if(u instanceof Uint8Array)m=t.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)m=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:p,type:m,bytesPerElement:u.BYTES_PER_ELEMENT,version:o.version,size:f}}function r(o,l,u){const d=l.array,f=l.updateRanges;if(t.bindBuffer(u,o),f.length===0)t.bufferSubData(u,0,d);else{f.sort((m,y)=>m.start-y.start);let p=0;for(let m=1;m<f.length;m++){const y=f[p],_=f[m];_.start<=y.start+y.count+1?y.count=Math.max(y.count,_.start+_.count-y.start):(++p,f[p]=_)}f.length=p+1;for(let m=0,y=f.length;m<y;m++){const _=f[m];t.bufferSubData(u,_.start*d.BYTES_PER_ELEMENT,d,_.start,_.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function a(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(t.deleteBuffer(l.buffer),e.delete(o))}function s(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const d=e.get(o);(!d||d.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const u=e.get(o);if(u===void 0)e.set(o,n(o,l));else if(u.version<o.version){if(u.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(u.buffer,o,l),u.version=o.version}}return{get:i,remove:a,update:s}}class Sd extends En{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const a=e/2,s=n/2,o=Math.floor(r),l=Math.floor(i),u=o+1,d=l+1,f=e/o,p=n/l,m=[],y=[],_=[],v=[];for(let w=0;w<d;w++){const M=w*p-s;for(let C=0;C<u;C++){const N=C*f-a;y.push(N,-M,0),_.push(0,0,1),v.push(C/o),v.push(1-w/l)}}for(let w=0;w<l;w++)for(let M=0;M<o;M++){const C=M+u*w,N=M+u*(w+1),P=M+1+u*(w+1),R=M+1+u*w;m.push(C,N,R),m.push(N,P,R)}this.setIndex(m),this.setAttribute("position",new Bt(y,3)),this.setAttribute("normal",new Bt(_,3)),this.setAttribute("uv",new Bt(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sd(e.width,e.height,e.widthSegments,e.heightSegments)}}var $Se=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,YSe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,qSe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,XSe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,KSe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,ZSe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,QSe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,JSe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,e2e=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,t2e=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,n2e=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,r2e=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,i2e=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,a2e=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,s2e=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,o2e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,l2e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,c2e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,u2e=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,d2e=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,f2e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,h2e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,p2e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,m2e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,g2e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,v2e=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,y2e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,x2e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,b2e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,_2e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,w2e="gl_FragColor = linearToOutputTexel( gl_FragColor );",S2e=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,E2e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,M2e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,C2e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,N2e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,A2e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,T2e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,P2e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,R2e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,D2e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,k2e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,j2e=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,O2e=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,I2e=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,L2e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,F2e=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,U2e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,B2e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,z2e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,H2e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,V2e=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,W2e=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,G2e=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,$2e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Y2e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,q2e=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,X2e=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,K2e=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Z2e=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Q2e=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,J2e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,eEe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,tEe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,nEe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,rEe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,iEe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,aEe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,sEe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,oEe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,lEe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,cEe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,uEe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,dEe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,fEe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,hEe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,pEe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,mEe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,gEe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,vEe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,yEe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,xEe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,bEe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,_Ee=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,wEe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,SEe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,EEe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,MEe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,CEe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,NEe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,AEe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,TEe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,PEe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,REe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,DEe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,kEe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,jEe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,OEe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,IEe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,LEe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,FEe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,UEe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,BEe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,zEe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,HEe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,VEe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,WEe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const GEe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,$Ee=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,YEe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,qEe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,XEe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,KEe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ZEe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,QEe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,JEe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,eMe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,tMe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,nMe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,rMe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,iMe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,aMe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,sMe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oMe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lMe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cMe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,uMe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dMe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fMe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,hMe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pMe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mMe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,gMe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vMe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,yMe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xMe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,bMe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,_Me=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wMe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,SMe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,EMe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,bn={alphahash_fragment:$Se,alphahash_pars_fragment:YSe,alphamap_fragment:qSe,alphamap_pars_fragment:XSe,alphatest_fragment:KSe,alphatest_pars_fragment:ZSe,aomap_fragment:QSe,aomap_pars_fragment:JSe,batching_pars_vertex:e2e,batching_vertex:t2e,begin_vertex:n2e,beginnormal_vertex:r2e,bsdfs:i2e,iridescence_fragment:a2e,bumpmap_pars_fragment:s2e,clipping_planes_fragment:o2e,clipping_planes_pars_fragment:l2e,clipping_planes_pars_vertex:c2e,clipping_planes_vertex:u2e,color_fragment:d2e,color_pars_fragment:f2e,color_pars_vertex:h2e,color_vertex:p2e,common:m2e,cube_uv_reflection_fragment:g2e,defaultnormal_vertex:v2e,displacementmap_pars_vertex:y2e,displacementmap_vertex:x2e,emissivemap_fragment:b2e,emissivemap_pars_fragment:_2e,colorspace_fragment:w2e,colorspace_pars_fragment:S2e,envmap_fragment:E2e,envmap_common_pars_fragment:M2e,envmap_pars_fragment:C2e,envmap_pars_vertex:N2e,envmap_physical_pars_fragment:F2e,envmap_vertex:A2e,fog_vertex:T2e,fog_pars_vertex:P2e,fog_fragment:R2e,fog_pars_fragment:D2e,gradientmap_pars_fragment:k2e,lightmap_pars_fragment:j2e,lights_lambert_fragment:O2e,lights_lambert_pars_fragment:I2e,lights_pars_begin:L2e,lights_toon_fragment:U2e,lights_toon_pars_fragment:B2e,lights_phong_fragment:z2e,lights_phong_pars_fragment:H2e,lights_physical_fragment:V2e,lights_physical_pars_fragment:W2e,lights_fragment_begin:G2e,lights_fragment_maps:$2e,lights_fragment_end:Y2e,logdepthbuf_fragment:q2e,logdepthbuf_pars_fragment:X2e,logdepthbuf_pars_vertex:K2e,logdepthbuf_vertex:Z2e,map_fragment:Q2e,map_pars_fragment:J2e,map_particle_fragment:eEe,map_particle_pars_fragment:tEe,metalnessmap_fragment:nEe,metalnessmap_pars_fragment:rEe,morphinstance_vertex:iEe,morphcolor_vertex:aEe,morphnormal_vertex:sEe,morphtarget_pars_vertex:oEe,morphtarget_vertex:lEe,normal_fragment_begin:cEe,normal_fragment_maps:uEe,normal_pars_fragment:dEe,normal_pars_vertex:fEe,normal_vertex:hEe,normalmap_pars_fragment:pEe,clearcoat_normal_fragment_begin:mEe,clearcoat_normal_fragment_maps:gEe,clearcoat_pars_fragment:vEe,iridescence_pars_fragment:yEe,opaque_fragment:xEe,packing:bEe,premultiplied_alpha_fragment:_Ee,project_vertex:wEe,dithering_fragment:SEe,dithering_pars_fragment:EEe,roughnessmap_fragment:MEe,roughnessmap_pars_fragment:CEe,shadowmap_pars_fragment:NEe,shadowmap_pars_vertex:AEe,shadowmap_vertex:TEe,shadowmask_pars_fragment:PEe,skinbase_vertex:REe,skinning_pars_vertex:DEe,skinning_vertex:kEe,skinnormal_vertex:jEe,specularmap_fragment:OEe,specularmap_pars_fragment:IEe,tonemapping_fragment:LEe,tonemapping_pars_fragment:FEe,transmission_fragment:UEe,transmission_pars_fragment:BEe,uv_pars_fragment:zEe,uv_pars_vertex:HEe,uv_vertex:VEe,worldpos_vertex:WEe,background_vert:GEe,background_frag:$Ee,backgroundCube_vert:YEe,backgroundCube_frag:qEe,cube_vert:XEe,cube_frag:KEe,depth_vert:ZEe,depth_frag:QEe,distanceRGBA_vert:JEe,distanceRGBA_frag:eMe,equirect_vert:tMe,equirect_frag:nMe,linedashed_vert:rMe,linedashed_frag:iMe,meshbasic_vert:aMe,meshbasic_frag:sMe,meshlambert_vert:oMe,meshlambert_frag:lMe,meshmatcap_vert:cMe,meshmatcap_frag:uMe,meshnormal_vert:dMe,meshnormal_frag:fMe,meshphong_vert:hMe,meshphong_frag:pMe,meshphysical_vert:mMe,meshphysical_frag:gMe,meshtoon_vert:vMe,meshtoon_frag:yMe,points_vert:xMe,points_frag:bMe,shadow_vert:_Me,shadow_frag:wMe,sprite_vert:SMe,sprite_frag:EMe},wt={common:{diffuse:{value:new Ct(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new pn},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new pn}},envmap:{envMap:{value:null},envMapRotation:{value:new pn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new pn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new pn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new pn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new pn},normalScale:{value:new lt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new pn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new pn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new pn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new pn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ct(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ct(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0},uvTransform:{value:new pn}},sprite:{diffuse:{value:new Ct(16777215)},opacity:{value:1},center:{value:new lt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new pn},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0}}},Ul={basic:{uniforms:ms([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.fog]),vertexShader:bn.meshbasic_vert,fragmentShader:bn.meshbasic_frag},lambert:{uniforms:ms([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,wt.lights,{emissive:{value:new Ct(0)}}]),vertexShader:bn.meshlambert_vert,fragmentShader:bn.meshlambert_frag},phong:{uniforms:ms([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,wt.lights,{emissive:{value:new Ct(0)},specular:{value:new Ct(1118481)},shininess:{value:30}}]),vertexShader:bn.meshphong_vert,fragmentShader:bn.meshphong_frag},standard:{uniforms:ms([wt.common,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.roughnessmap,wt.metalnessmap,wt.fog,wt.lights,{emissive:{value:new Ct(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:bn.meshphysical_vert,fragmentShader:bn.meshphysical_frag},toon:{uniforms:ms([wt.common,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.gradientmap,wt.fog,wt.lights,{emissive:{value:new Ct(0)}}]),vertexShader:bn.meshtoon_vert,fragmentShader:bn.meshtoon_frag},matcap:{uniforms:ms([wt.common,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,{matcap:{value:null}}]),vertexShader:bn.meshmatcap_vert,fragmentShader:bn.meshmatcap_frag},points:{uniforms:ms([wt.points,wt.fog]),vertexShader:bn.points_vert,fragmentShader:bn.points_frag},dashed:{uniforms:ms([wt.common,wt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:bn.linedashed_vert,fragmentShader:bn.linedashed_frag},depth:{uniforms:ms([wt.common,wt.displacementmap]),vertexShader:bn.depth_vert,fragmentShader:bn.depth_frag},normal:{uniforms:ms([wt.common,wt.bumpmap,wt.normalmap,wt.displacementmap,{opacity:{value:1}}]),vertexShader:bn.meshnormal_vert,fragmentShader:bn.meshnormal_frag},sprite:{uniforms:ms([wt.sprite,wt.fog]),vertexShader:bn.sprite_vert,fragmentShader:bn.sprite_frag},background:{uniforms:{uvTransform:{value:new pn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:bn.background_vert,fragmentShader:bn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new pn}},vertexShader:bn.backgroundCube_vert,fragmentShader:bn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:bn.cube_vert,fragmentShader:bn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:bn.equirect_vert,fragmentShader:bn.equirect_frag},distanceRGBA:{uniforms:ms([wt.common,wt.displacementmap,{referencePosition:{value:new he},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:bn.distanceRGBA_vert,fragmentShader:bn.distanceRGBA_frag},shadow:{uniforms:ms([wt.lights,wt.fog,{color:{value:new Ct(0)},opacity:{value:1}}]),vertexShader:bn.shadow_vert,fragmentShader:bn.shadow_frag}};Ul.physical={uniforms:ms([Ul.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new pn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new pn},clearcoatNormalScale:{value:new lt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new pn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new pn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new pn},sheen:{value:0},sheenColor:{value:new Ct(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new pn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new pn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new pn},transmissionSamplerSize:{value:new lt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new pn},attenuationDistance:{value:0},attenuationColor:{value:new Ct(0)},specularColor:{value:new Ct(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new pn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new pn},anisotropyVector:{value:new lt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new pn}}]),vertexShader:bn.meshphysical_vert,fragmentShader:bn.meshphysical_frag};const __={r:0,b:0,g:0},yh=new Do,MMe=new rn;function CMe(t,e,n,r,i,a,s){const o=new Ct(0);let l=a===!0?0:1,u,d,f=null,p=0,m=null;function y(M){let C=M.isScene===!0?M.background:null;return C&&C.isTexture&&(C=(M.backgroundBlurriness>0?n:e).get(C)),C}function _(M){let C=!1;const N=y(M);N===null?w(o,l):N&&N.isColor&&(w(N,1),C=!0);const P=t.xr.getEnvironmentBlendMode();P==="additive"?r.buffers.color.setClear(0,0,0,1,s):P==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,s),(t.autoClear||C)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function v(M,C){const N=y(C);N&&(N.isCubeTexture||N.mapping===ov)?(d===void 0&&(d=new Rr(new Op(1,1,1),new rl({name:"BackgroundCubeMaterial",uniforms:Hg(Ul.backgroundCube.uniforms),vertexShader:Ul.backgroundCube.vertexShader,fragmentShader:Ul.backgroundCube.fragmentShader,side:_s,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(P,R,k){this.matrixWorld.copyPosition(k.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(d)),yh.copy(C.backgroundRotation),yh.x*=-1,yh.y*=-1,yh.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(yh.y*=-1,yh.z*=-1),d.material.uniforms.envMap.value=N,d.material.uniforms.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=C.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(MMe.makeRotationFromEuler(yh)),d.material.toneMapped=kn.getTransfer(N.colorSpace)!==er,(f!==N||p!==N.version||m!==t.toneMapping)&&(d.material.needsUpdate=!0,f=N,p=N.version,m=t.toneMapping),d.layers.enableAll(),M.unshift(d,d.geometry,d.material,0,0,null)):N&&N.isTexture&&(u===void 0&&(u=new Rr(new Sd(2,2),new rl({name:"BackgroundMaterial",uniforms:Hg(Ul.background.uniforms),vertexShader:Ul.background.vertexShader,fragmentShader:Ul.background.fragmentShader,side:od,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=N,u.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,u.material.toneMapped=kn.getTransfer(N.colorSpace)!==er,N.matrixAutoUpdate===!0&&N.updateMatrix(),u.material.uniforms.uvTransform.value.copy(N.matrix),(f!==N||p!==N.version||m!==t.toneMapping)&&(u.material.needsUpdate=!0,f=N,p=N.version,m=t.toneMapping),u.layers.enableAll(),M.unshift(u,u.geometry,u.material,0,0,null))}function w(M,C){M.getRGB(__,J7(t)),r.buffers.color.setClear(__.r,__.g,__.b,C,s)}return{getClearColor:function(){return o},setClearColor:function(M,C=1){o.set(M),l=C,w(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(M){l=M,w(o,l)},render:_,addToRenderList:v}}function NMe(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=p(null);let a=i,s=!1;function o(L,z,O,q,Y){let X=!1;const ee=f(q,O,z);a!==ee&&(a=ee,u(a.object)),X=m(L,q,O,Y),X&&y(L,q,O,Y),Y!==null&&e.update(Y,t.ELEMENT_ARRAY_BUFFER),(X||s)&&(s=!1,N(L,z,O,q),Y!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(Y).buffer))}function l(){return t.createVertexArray()}function u(L){return t.bindVertexArray(L)}function d(L){return t.deleteVertexArray(L)}function f(L,z,O){const q=O.wireframe===!0;let Y=r[L.id];Y===void 0&&(Y={},r[L.id]=Y);let X=Y[z.id];X===void 0&&(X={},Y[z.id]=X);let ee=X[q];return ee===void 0&&(ee=p(l()),X[q]=ee),ee}function p(L){const z=[],O=[],q=[];for(let Y=0;Y<n;Y++)z[Y]=0,O[Y]=0,q[Y]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:z,enabledAttributes:O,attributeDivisors:q,object:L,attributes:{},index:null}}function m(L,z,O,q){const Y=a.attributes,X=z.attributes;let ee=0;const se=O.getAttributes();for(const W in se)if(se[W].location>=0){const G=Y[W];let j=X[W];if(j===void 0&&(W==="instanceMatrix"&&L.instanceMatrix&&(j=L.instanceMatrix),W==="instanceColor"&&L.instanceColor&&(j=L.instanceColor)),G===void 0||G.attribute!==j||j&&G.data!==j.data)return!0;ee++}return a.attributesNum!==ee||a.index!==q}function y(L,z,O,q){const Y={},X=z.attributes;let ee=0;const se=O.getAttributes();for(const W in se)if(se[W].location>=0){let G=X[W];G===void 0&&(W==="instanceMatrix"&&L.instanceMatrix&&(G=L.instanceMatrix),W==="instanceColor"&&L.instanceColor&&(G=L.instanceColor));const j={};j.attribute=G,G&&G.data&&(j.data=G.data),Y[W]=j,ee++}a.attributes=Y,a.attributesNum=ee,a.index=q}function _(){const L=a.newAttributes;for(let z=0,O=L.length;z<O;z++)L[z]=0}function v(L){w(L,0)}function w(L,z){const O=a.newAttributes,q=a.enabledAttributes,Y=a.attributeDivisors;O[L]=1,q[L]===0&&(t.enableVertexAttribArray(L),q[L]=1),Y[L]!==z&&(t.vertexAttribDivisor(L,z),Y[L]=z)}function M(){const L=a.newAttributes,z=a.enabledAttributes;for(let O=0,q=z.length;O<q;O++)z[O]!==L[O]&&(t.disableVertexAttribArray(O),z[O]=0)}function C(L,z,O,q,Y,X,ee){ee===!0?t.vertexAttribIPointer(L,z,O,Y,X):t.vertexAttribPointer(L,z,O,q,Y,X)}function N(L,z,O,q){_();const Y=q.attributes,X=O.getAttributes(),ee=z.defaultAttributeValues;for(const se in X){const W=X[se];if(W.location>=0){let $=Y[se];if($===void 0&&(se==="instanceMatrix"&&L.instanceMatrix&&($=L.instanceMatrix),se==="instanceColor"&&L.instanceColor&&($=L.instanceColor)),$!==void 0){const G=$.normalized,j=$.itemSize,B=e.get($);if(B===void 0)continue;const ae=B.buffer,re=B.type,de=B.bytesPerElement,ce=re===t.INT||re===t.UNSIGNED_INT||$.gpuType===z2;if($.isInterleavedBufferAttribute){const ie=$.data,le=ie.stride,fe=$.offset;if(ie.isInstancedInterleavedBuffer){for(let Ne=0;Ne<W.locationSize;Ne++)w(W.location+Ne,ie.meshPerAttribute);L.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=ie.meshPerAttribute*ie.count)}else for(let Ne=0;Ne<W.locationSize;Ne++)v(W.location+Ne);t.bindBuffer(t.ARRAY_BUFFER,ae);for(let Ne=0;Ne<W.locationSize;Ne++)C(W.location+Ne,j/W.locationSize,re,G,le*de,(fe+j/W.locationSize*Ne)*de,ce)}else{if($.isInstancedBufferAttribute){for(let ie=0;ie<W.locationSize;ie++)w(W.location+ie,$.meshPerAttribute);L.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=$.meshPerAttribute*$.count)}else for(let ie=0;ie<W.locationSize;ie++)v(W.location+ie);t.bindBuffer(t.ARRAY_BUFFER,ae);for(let ie=0;ie<W.locationSize;ie++)C(W.location+ie,j/W.locationSize,re,G,j*de,j/W.locationSize*ie*de,ce)}}else if(ee!==void 0){const G=ee[se];if(G!==void 0)switch(G.length){case 2:t.vertexAttrib2fv(W.location,G);break;case 3:t.vertexAttrib3fv(W.location,G);break;case 4:t.vertexAttrib4fv(W.location,G);break;default:t.vertexAttrib1fv(W.location,G)}}}}M()}function P(){U();for(const L in r){const z=r[L];for(const O in z){const q=z[O];for(const Y in q)d(q[Y].object),delete q[Y];delete z[O]}delete r[L]}}function R(L){if(r[L.id]===void 0)return;const z=r[L.id];for(const O in z){const q=z[O];for(const Y in q)d(q[Y].object),delete q[Y];delete z[O]}delete r[L.id]}function k(L){for(const z in r){const O=r[z];if(O[L.id]===void 0)continue;const q=O[L.id];for(const Y in q)d(q[Y].object),delete q[Y];delete O[L.id]}}function U(){I(),s=!0,a!==i&&(a=i,u(a.object))}function I(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:o,reset:U,resetDefaultState:I,dispose:P,releaseStatesOfGeometry:R,releaseStatesOfProgram:k,initAttributes:_,enableAttribute:v,disableUnusedAttributes:M}}function AMe(t,e,n){let r;function i(u){r=u}function a(u,d){t.drawArrays(r,u,d),n.update(d,r,1)}function s(u,d,f){f!==0&&(t.drawArraysInstanced(r,u,d,f),n.update(d,r,f))}function o(u,d,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,u,0,d,0,f);let m=0;for(let y=0;y<f;y++)m+=d[y];n.update(m,r,1)}function l(u,d,f,p){if(f===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let y=0;y<u.length;y++)s(u[y],d[y],p[y]);else{m.multiDrawArraysInstancedWEBGL(r,u,0,d,0,p,0,f);let y=0;for(let _=0;_<f;_++)y+=d[_]*p[_];n.update(y,r,1)}}this.setMode=i,this.render=a,this.renderInstances=s,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function TMe(t,e,n,r){let i;function a(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const k=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(k){return!(k!==Ja&&r.convert(k)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(k){const U=k===lv&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(k!==Xl&&r.convert(k)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&k!==Xs&&!U)}function l(k){if(k==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";k="mediump"}return k==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=n.precision!==void 0?n.precision:"highp";const d=l(u);d!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",d,"instead."),u=d);const f=n.logarithmicDepthBuffer===!0,p=n.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),m=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),y=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),_=t.getParameter(t.MAX_TEXTURE_SIZE),v=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),w=t.getParameter(t.MAX_VERTEX_ATTRIBS),M=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),C=t.getParameter(t.MAX_VARYING_VECTORS),N=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),P=y>0,R=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:o,precision:u,logarithmicDepthBuffer:f,reverseDepthBuffer:p,maxTextures:m,maxVertexTextures:y,maxTextureSize:_,maxCubemapSize:v,maxAttributes:w,maxVertexUniforms:M,maxVaryings:C,maxFragmentUniforms:N,vertexTextures:P,maxSamples:R}}function PMe(t){const e=this;let n=null,r=0,i=!1,a=!1;const s=new Fu,o=new pn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const m=f.length!==0||p||r!==0||i;return i=p,r=f.length,m},this.beginShadows=function(){a=!0,d(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(f,p){n=d(f,p,0)},this.setState=function(f,p,m){const y=f.clippingPlanes,_=f.clipIntersection,v=f.clipShadows,w=t.get(f);if(!i||y===null||y.length===0||a&&!v)a?d(null):u();else{const M=a?0:r,C=M*4;let N=w.clippingState||null;l.value=N,N=d(y,p,C,m);for(let P=0;P!==C;++P)N[P]=n[P];w.clippingState=N,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=M}};function u(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function d(f,p,m,y){const _=f!==null?f.length:0;let v=null;if(_!==0){if(v=l.value,y!==!0||v===null){const w=m+_*4,M=p.matrixWorldInverse;o.getNormalMatrix(M),(v===null||v.length<w)&&(v=new Float32Array(w));for(let C=0,N=m;C!==_;++C,N+=4)s.copy(f[C]).applyMatrix4(M,o),s.normal.toArray(v,N),v[N+3]=s.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,v}}function RMe(t){let e=new WeakMap;function n(s,o){return o===Ty?s.mapping=ld:o===Py&&(s.mapping=Cf),s}function r(s){if(s&&s.isTexture){const o=s.mapping;if(o===Ty||o===Py)if(e.has(s)){const l=e.get(s).texture;return n(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const u=new t9(l.height);return u.fromEquirectangularTexture(t,s),e.set(s,u),s.addEventListener("dispose",i),n(u.texture,s.mapping)}else return null}}return s}function i(s){const o=s.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function a(){e=new WeakMap}return{get:r,dispose:a}}class wf extends Nx{constructor(e=-1,n=1,r=1,i=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=r-e,s=r+e,o=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=u*this.view.offsetX,s=a+u*this.view.width,o-=d*this.view.offsetY,l=o-d*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const dg=4,CF=[.125,.215,.35,.446,.526,.582],Lh=20,SN=new wf,NF=new Ct;let EN=null,MN=0,CN=0,NN=!1;const Ih=(1+Math.sqrt(5))/2,$m=1/Ih,AF=[new he(-Ih,$m,0),new he(Ih,$m,0),new he(-$m,0,Ih),new he($m,0,Ih),new he(0,Ih,-$m),new he(0,Ih,$m),new he(-1,1,-1),new he(1,1,-1),new he(-1,1,1),new he(1,1,1)];class zT{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){EN=this._renderer.getRenderTarget(),MN=this._renderer.getActiveCubeFace(),CN=this._renderer.getActiveMipmapLevel(),NN=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,r,i,a),n>0&&this._blur(a,0,0,n),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=RF(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=PF(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(EN,MN,CN),this._renderer.xr.enabled=NN,e.scissorTest=!1,w_(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===ld||e.mapping===Cf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),EN=this._renderer.getRenderTarget(),MN=this._renderer.getActiveCubeFace(),CN=this._renderer.getActiveMipmapLevel(),NN=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:gi,minFilter:gi,generateMipmaps:!1,type:lv,format:Ja,colorSpace:kp,depthBuffer:!1},i=TF(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=TF(e,n,r);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=DMe(a)),this._blurMaterial=kMe(a,e,n)}return i}_compileMaterial(e){const n=new Rr(this._lodPlanes[0],e);this._renderer.compile(n,SN)}_sceneToCubeUV(e,n,r,i){const o=new hi(90,1,n,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,p=d.toneMapping;d.getClearColor(NF),d.toneMapping=zc,d.autoClear=!1;const m=new wd({name:"PMREM.Background",side:_s,depthWrite:!1,depthTest:!1}),y=new Rr(new Op,m);let _=!1;const v=e.background;v?v.isColor&&(m.color.copy(v),e.background=null,_=!0):(m.color.copy(NF),_=!0);for(let w=0;w<6;w++){const M=w%3;M===0?(o.up.set(0,l[w],0),o.lookAt(u[w],0,0)):M===1?(o.up.set(0,0,l[w]),o.lookAt(0,u[w],0)):(o.up.set(0,l[w],0),o.lookAt(0,0,u[w]));const C=this._cubeSize;w_(i,M*C,w>2?C:0,C,C),d.setRenderTarget(i),_&&d.render(y,o),d.render(e,o)}y.geometry.dispose(),y.material.dispose(),d.toneMapping=p,d.autoClear=f,e.background=v}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===ld||e.mapping===Cf;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=RF()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=PF());const a=i?this._cubemapMaterial:this._equirectMaterial,s=new Rr(this._lodPlanes[0],a),o=a.uniforms;o.envMap.value=e;const l=this._cubeSize;w_(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(s,SN)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const i=this._lodPlanes.length;for(let a=1;a<i;a++){const s=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),o=AF[(i-a-1)%AF.length];this._blur(e,a-1,a,s,o)}n.autoClear=r}_blur(e,n,r,i,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,n,r,i,"latitudinal",a),this._halfBlur(s,e,r,r,i,"longitudinal",a)}_halfBlur(e,n,r,i,a,s,o){const l=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,f=new Rr(this._lodPlanes[i],u),p=u.uniforms,m=this._sizeLods[r]-1,y=isFinite(a)?Math.PI/(2*m):2*Math.PI/(2*Lh-1),_=a/y,v=isFinite(a)?1+Math.floor(d*_):Lh;v>Lh&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${Lh}`);const w=[];let M=0;for(let k=0;k<Lh;++k){const U=k/_,I=Math.exp(-U*U/2);w.push(I),k===0?M+=I:k<v&&(M+=2*I)}for(let k=0;k<w.length;k++)w[k]=w[k]/M;p.envMap.value=e.texture,p.samples.value=v,p.weights.value=w,p.latitudinal.value=s==="latitudinal",o&&(p.poleAxis.value=o);const{_lodMax:C}=this;p.dTheta.value=y,p.mipInt.value=C-r;const N=this._sizeLods[i],P=3*N*(i>C-dg?i-C+dg:0),R=4*(this._cubeSize-N);w_(n,P,R,3*N,2*N),l.setRenderTarget(n),l.render(f,SN)}}function DMe(t){const e=[],n=[],r=[];let i=t;const a=t-dg+1+CF.length;for(let s=0;s<a;s++){const o=Math.pow(2,i);n.push(o);let l=1/o;s>t-dg?l=CF[s-t+dg-1]:s===0&&(l=0),r.push(l);const u=1/(o-2),d=-u,f=1+u,p=[d,d,f,d,f,f,d,d,f,f,d,f],m=6,y=6,_=3,v=2,w=1,M=new Float32Array(_*y*m),C=new Float32Array(v*y*m),N=new Float32Array(w*y*m);for(let R=0;R<m;R++){const k=R%3*2/3-1,U=R>2?0:-1,I=[k,U,0,k+2/3,U,0,k+2/3,U+1,0,k,U,0,k+2/3,U+1,0,k,U+1,0];M.set(I,_*y*R),C.set(p,v*y*R);const L=[R,R,R,R,R,R];N.set(L,w*y*R)}const P=new En;P.setAttribute("position",new cr(M,_)),P.setAttribute("uv",new cr(C,v)),P.setAttribute("faceIndex",new cr(N,w)),e.push(P),i>dg&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function TF(t,e,n){const r=new Kl(t,e,n);return r.texture.mapping=ov,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function w_(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function kMe(t,e,n){const r=new Float32Array(Lh),i=new he(0,1,0);return new rl({name:"SphericalGaussianBlur",defines:{n:Lh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:XD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Qu,depthTest:!1,depthWrite:!1})}function PF(){return new rl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:XD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Qu,depthTest:!1,depthWrite:!1})}function RF(){return new rl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:XD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Qu,depthTest:!1,depthWrite:!1})}function XD(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function jMe(t){let e=new WeakMap,n=null;function r(o){if(o&&o.isTexture){const l=o.mapping,u=l===Ty||l===Py,d=l===ld||l===Cf;if(u||d){let f=e.get(o);const p=f!==void 0?f.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==p)return n===null&&(n=new zT(t)),f=u?n.fromEquirectangular(o,f):n.fromCubemap(o,f),f.texture.pmremVersion=o.pmremVersion,e.set(o,f),f.texture;if(f!==void 0)return f.texture;{const m=o.image;return u&&m&&m.height>0||d&&m&&i(m)?(n===null&&(n=new zT(t)),f=u?n.fromEquirectangular(o):n.fromCubemap(o),f.texture.pmremVersion=o.pmremVersion,e.set(o,f),o.addEventListener("dispose",a),f.texture):null}}}return o}function i(o){let l=0;const u=6;for(let d=0;d<u;d++)o[d]!==void 0&&l++;return l===u}function a(o){const l=o.target;l.removeEventListener("dispose",a);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:s}}function OMe(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const i=n(r);return i===null&&B0("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function IMe(t,e,n,r){const i={},a=new WeakMap;function s(f){const p=f.target;p.index!==null&&e.remove(p.index);for(const y in p.attributes)e.remove(p.attributes[y]);for(const y in p.morphAttributes){const _=p.morphAttributes[y];for(let v=0,w=_.length;v<w;v++)e.remove(_[v])}p.removeEventListener("dispose",s),delete i[p.id];const m=a.get(p);m&&(e.remove(m),a.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,n.memory.geometries--}function o(f,p){return i[p.id]===!0||(p.addEventListener("dispose",s),i[p.id]=!0,n.memory.geometries++),p}function l(f){const p=f.attributes;for(const y in p)e.update(p[y],t.ARRAY_BUFFER);const m=f.morphAttributes;for(const y in m){const _=m[y];for(let v=0,w=_.length;v<w;v++)e.update(_[v],t.ARRAY_BUFFER)}}function u(f){const p=[],m=f.index,y=f.attributes.position;let _=0;if(m!==null){const M=m.array;_=m.version;for(let C=0,N=M.length;C<N;C+=3){const P=M[C+0],R=M[C+1],k=M[C+2];p.push(P,R,R,k,k,P)}}else if(y!==void 0){const M=y.array;_=y.version;for(let C=0,N=M.length/3-1;C<N;C+=3){const P=C+0,R=C+1,k=C+2;p.push(P,R,R,k,k,P)}}else return;const v=new(q7(p)?qD:YD)(p,1);v.version=_;const w=a.get(f);w&&e.remove(w),a.set(f,v)}function d(f){const p=a.get(f);if(p){const m=f.index;m!==null&&p.version<m.version&&u(f)}else u(f);return a.get(f)}return{get:o,update:l,getWireframeAttribute:d}}function LMe(t,e,n){let r;function i(p){r=p}let a,s;function o(p){a=p.type,s=p.bytesPerElement}function l(p,m){t.drawElements(r,m,a,p*s),n.update(m,r,1)}function u(p,m,y){y!==0&&(t.drawElementsInstanced(r,m,a,p*s,y),n.update(m,r,y))}function d(p,m,y){if(y===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,m,0,a,p,0,y);let v=0;for(let w=0;w<y;w++)v+=m[w];n.update(v,r,1)}function f(p,m,y,_){if(y===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let w=0;w<p.length;w++)u(p[w]/s,m[w],_[w]);else{v.multiDrawElementsInstancedWEBGL(r,m,0,a,p,0,_,0,y);let w=0;for(let M=0;M<y;M++)w+=m[M]*_[M];n.update(w,r,1)}}this.setMode=i,this.setIndex=o,this.render=l,this.renderInstances=u,this.renderMultiDraw=d,this.renderMultiDrawInstances=f}function FMe(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,s,o){switch(n.calls++,s){case t.TRIANGLES:n.triangles+=o*(a/3);break;case t.LINES:n.lines+=o*(a/2);break;case t.LINE_STRIP:n.lines+=o*(a-1);break;case t.LINE_LOOP:n.lines+=o*a;break;case t.POINTS:n.points+=o*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function UMe(t,e,n){const r=new WeakMap,i=new Sn;function a(s,o,l){const u=s.morphTargetInfluences,d=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,f=d!==void 0?d.length:0;let p=r.get(o);if(p===void 0||p.count!==f){let L=function(){U.dispose(),r.delete(o),o.removeEventListener("dispose",L)};var m=L;p!==void 0&&p.texture.dispose();const y=o.morphAttributes.position!==void 0,_=o.morphAttributes.normal!==void 0,v=o.morphAttributes.color!==void 0,w=o.morphAttributes.position||[],M=o.morphAttributes.normal||[],C=o.morphAttributes.color||[];let N=0;y===!0&&(N=1),_===!0&&(N=2),v===!0&&(N=3);let P=o.attributes.position.count*N,R=1;P>e.maxTextureSize&&(R=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const k=new Float32Array(P*R*4*f),U=new q2(k,P,R,f);U.type=Xs,U.needsUpdate=!0;const I=N*4;for(let z=0;z<f;z++){const O=w[z],q=M[z],Y=C[z],X=P*R*4*z;for(let ee=0;ee<O.count;ee++){const se=ee*I;y===!0&&(i.fromBufferAttribute(O,ee),k[X+se+0]=i.x,k[X+se+1]=i.y,k[X+se+2]=i.z,k[X+se+3]=0),_===!0&&(i.fromBufferAttribute(q,ee),k[X+se+4]=i.x,k[X+se+5]=i.y,k[X+se+6]=i.z,k[X+se+7]=0),v===!0&&(i.fromBufferAttribute(Y,ee),k[X+se+8]=i.x,k[X+se+9]=i.y,k[X+se+10]=i.z,k[X+se+11]=Y.itemSize===4?i.w:1)}}p={count:f,texture:U,size:new lt(P,R)},r.set(o,p),o.addEventListener("dispose",L)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",s.morphTexture,n);else{let y=0;for(let v=0;v<u.length;v++)y+=u[v];const _=o.morphTargetsRelative?1:1-y;l.getUniforms().setValue(t,"morphTargetBaseInfluence",_),l.getUniforms().setValue(t,"morphTargetInfluences",u)}l.getUniforms().setValue(t,"morphTargetsTexture",p.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",p.size)}return{update:a}}function BMe(t,e,n,r){let i=new WeakMap;function a(l){const u=r.render.frame,d=l.geometry,f=e.get(l,d);if(i.get(f)!==u&&(e.update(f),i.set(f,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.get(l)!==u&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const p=l.skeleton;i.get(p)!==u&&(p.update(),i.set(p,u))}return f}function s(){i=new WeakMap}function o(l){const u=l.target;u.removeEventListener("dispose",o),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:a,dispose:s}}class KD extends Hr{constructor(e,n,r,i,a,s,o,l,u,d=ip){if(d!==ip&&d!==Mp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&d===ip&&(r=cd),r===void 0&&d===Mp&&(r=Ep),super(null,i,a,s,o,l,d,r,u),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=o!==void 0?o:Ra,this.minFilter=l!==void 0?l:Ra,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const r9=new Hr,DF=new KD(1,1),i9=new q2,a9=new $D,s9=new Ax,kF=[],jF=[],OF=new Float32Array(16),IF=new Float32Array(9),LF=new Float32Array(4);function cv(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let a=kF[i];if(a===void 0&&(a=new Float32Array(i),kF[i]=a),e!==0){r.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=n,t[s].toArray(a,o)}return a}function $i(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Yi(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function X2(t,e){let n=jF[e];n===void 0&&(n=new Int32Array(e),jF[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function zMe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function HMe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if($i(n,e))return;t.uniform2fv(this.addr,e),Yi(n,e)}}function VMe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if($i(n,e))return;t.uniform3fv(this.addr,e),Yi(n,e)}}function WMe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if($i(n,e))return;t.uniform4fv(this.addr,e),Yi(n,e)}}function GMe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if($i(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Yi(n,e)}else{if($i(n,r))return;LF.set(r),t.uniformMatrix2fv(this.addr,!1,LF),Yi(n,r)}}function $Me(t,e){const n=this.cache,r=e.elements;if(r===void 0){if($i(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Yi(n,e)}else{if($i(n,r))return;IF.set(r),t.uniformMatrix3fv(this.addr,!1,IF),Yi(n,r)}}function YMe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if($i(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Yi(n,e)}else{if($i(n,r))return;OF.set(r),t.uniformMatrix4fv(this.addr,!1,OF),Yi(n,r)}}function qMe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function XMe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if($i(n,e))return;t.uniform2iv(this.addr,e),Yi(n,e)}}function KMe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if($i(n,e))return;t.uniform3iv(this.addr,e),Yi(n,e)}}function ZMe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if($i(n,e))return;t.uniform4iv(this.addr,e),Yi(n,e)}}function QMe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function JMe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if($i(n,e))return;t.uniform2uiv(this.addr,e),Yi(n,e)}}function eCe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if($i(n,e))return;t.uniform3uiv(this.addr,e),Yi(n,e)}}function tCe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if($i(n,e))return;t.uniform4uiv(this.addr,e),Yi(n,e)}}function nCe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);let a;this.type===t.SAMPLER_2D_SHADOW?(DF.compareFunction=WD,a=DF):a=r9,n.setTexture2D(e||a,i)}function rCe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||a9,i)}function iCe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||s9,i)}function aCe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||i9,i)}function sCe(t){switch(t){case 5126:return zMe;case 35664:return HMe;case 35665:return VMe;case 35666:return WMe;case 35674:return GMe;case 35675:return $Me;case 35676:return YMe;case 5124:case 35670:return qMe;case 35667:case 35671:return XMe;case 35668:case 35672:return KMe;case 35669:case 35673:return ZMe;case 5125:return QMe;case 36294:return JMe;case 36295:return eCe;case 36296:return tCe;case 35678:case 36198:case 36298:case 36306:case 35682:return nCe;case 35679:case 36299:case 36307:return rCe;case 35680:case 36300:case 36308:case 36293:return iCe;case 36289:case 36303:case 36311:case 36292:return aCe}}function oCe(t,e){t.uniform1fv(this.addr,e)}function lCe(t,e){const n=cv(e,this.size,2);t.uniform2fv(this.addr,n)}function cCe(t,e){const n=cv(e,this.size,3);t.uniform3fv(this.addr,n)}function uCe(t,e){const n=cv(e,this.size,4);t.uniform4fv(this.addr,n)}function dCe(t,e){const n=cv(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function fCe(t,e){const n=cv(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function hCe(t,e){const n=cv(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function pCe(t,e){t.uniform1iv(this.addr,e)}function mCe(t,e){t.uniform2iv(this.addr,e)}function gCe(t,e){t.uniform3iv(this.addr,e)}function vCe(t,e){t.uniform4iv(this.addr,e)}function yCe(t,e){t.uniform1uiv(this.addr,e)}function xCe(t,e){t.uniform2uiv(this.addr,e)}function bCe(t,e){t.uniform3uiv(this.addr,e)}function _Ce(t,e){t.uniform4uiv(this.addr,e)}function wCe(t,e,n){const r=this.cache,i=e.length,a=X2(n,i);$i(r,a)||(t.uniform1iv(this.addr,a),Yi(r,a));for(let s=0;s!==i;++s)n.setTexture2D(e[s]||r9,a[s])}function SCe(t,e,n){const r=this.cache,i=e.length,a=X2(n,i);$i(r,a)||(t.uniform1iv(this.addr,a),Yi(r,a));for(let s=0;s!==i;++s)n.setTexture3D(e[s]||a9,a[s])}function ECe(t,e,n){const r=this.cache,i=e.length,a=X2(n,i);$i(r,a)||(t.uniform1iv(this.addr,a),Yi(r,a));for(let s=0;s!==i;++s)n.setTextureCube(e[s]||s9,a[s])}function MCe(t,e,n){const r=this.cache,i=e.length,a=X2(n,i);$i(r,a)||(t.uniform1iv(this.addr,a),Yi(r,a));for(let s=0;s!==i;++s)n.setTexture2DArray(e[s]||i9,a[s])}function CCe(t){switch(t){case 5126:return oCe;case 35664:return lCe;case 35665:return cCe;case 35666:return uCe;case 35674:return dCe;case 35675:return fCe;case 35676:return hCe;case 5124:case 35670:return pCe;case 35667:case 35671:return mCe;case 35668:case 35672:return gCe;case 35669:case 35673:return vCe;case 5125:return yCe;case 36294:return xCe;case 36295:return bCe;case 36296:return _Ce;case 35678:case 36198:case 36298:case 36306:case 35682:return wCe;case 35679:case 36299:case 36307:return SCe;case 35680:case 36300:case 36308:case 36293:return ECe;case 36289:case 36303:case 36311:case 36292:return MCe}}class NCe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=sCe(n.type)}}class ACe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=CCe(n.type)}}class TCe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let a=0,s=i.length;a!==s;++a){const o=i[a];o.setValue(e,n[o.id],r)}}}const AN=/(\w+)(\])?(\[|\.)?/g;function FF(t,e){t.seq.push(e),t.map[e.id]=e}function PCe(t,e,n){const r=t.name,i=r.length;for(AN.lastIndex=0;;){const a=AN.exec(r),s=AN.lastIndex;let o=a[1];const l=a[2]==="]",u=a[3];if(l&&(o=o|0),u===void 0||u==="["&&s+2===i){FF(n,u===void 0?new NCe(o,t,e):new ACe(o,t,e));break}else{let f=n.map[o];f===void 0&&(f=new TCe(o),FF(n,f)),n=f}}}class Ew{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const a=e.getActiveUniform(n,i),s=e.getUniformLocation(n,a.name);PCe(a,s,this)}}setValue(e,n,r,i){const a=this.map[n];a!==void 0&&a.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let a=0,s=n.length;a!==s;++a){const o=n[a],l=r[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,a=e.length;i!==a;++i){const s=e[i];s.id in n&&r.push(s)}return r}}function UF(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const RCe=37297;let DCe=0;function kCe(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),a=Math.min(e+6,n.length);for(let s=i;s<a;s++){const o=s+1;r.push(`${o===e?">":" "} ${o}: ${n[s]}`)}return r.join(`
`)}const BF=new pn;function jCe(t){kn._getMatrix(BF,kn.workingColorSpace,t);const e=`mat3( ${BF.elements.map(n=>n.toFixed(4))} )`;switch(kn.getTransfer(t)){case Cx:return[e,"LinearTransferOETF"];case er:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function zF(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const s=parseInt(a[1]);return n.toUpperCase()+`

`+i+`

`+kCe(t.getShaderSource(e),s)}else return i}function OCe(t,e){const n=jCe(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function ICe(t,e){let n;switch(e){case A7:n="Linear";break;case T7:n="Reinhard";break;case P7:n="Cineon";break;case RD:n="ACESFilmic";break;case D7:n="AgX";break;case k7:n="Neutral";break;case R7:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const S_=new he;function LCe(){kn.getLuminanceCoefficients(S_);const t=S_.x.toFixed(4),e=S_.y.toFixed(4),n=S_.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function FCe(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(H0).join(`
`)}function UCe(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function BCe(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const a=t.getActiveAttrib(e,i),s=a.name;let o=1;a.type===t.FLOAT_MAT2&&(o=2),a.type===t.FLOAT_MAT3&&(o=3),a.type===t.FLOAT_MAT4&&(o=4),n[s]={type:a.type,location:t.getAttribLocation(e,s),locationSize:o}}return n}function H0(t){return t!==""}function HF(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function VF(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const zCe=/^[ \t]*#include +<([\w\d./]+)>/gm;function HT(t){return t.replace(zCe,VCe)}const HCe=new Map;function VCe(t,e){let n=bn[e];if(n===void 0){const r=HCe.get(e);if(r!==void 0)n=bn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return HT(n)}const WCe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function WF(t){return t.replace(WCe,GCe)}function GCe(t,e,n,r){let i="";for(let a=parseInt(e);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function GF(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function $Ce(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===U2?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===$0?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Ll&&(e="SHADOWMAP_TYPE_VSM"),e}function YCe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case ld:case Cf:e="ENVMAP_TYPE_CUBE";break;case ov:e="ENVMAP_TYPE_CUBE_UV";break}return e}function qCe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Cf:e="ENVMAP_MODE_REFRACTION";break}return e}function XCe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Ex:e="ENVMAP_BLENDING_MULTIPLY";break;case C7:e="ENVMAP_BLENDING_MIX";break;case N7:e="ENVMAP_BLENDING_ADD";break}return e}function KCe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}function ZCe(t,e,n,r){const i=t.getContext(),a=n.defines;let s=n.vertexShader,o=n.fragmentShader;const l=$Ce(n),u=YCe(n),d=qCe(n),f=XCe(n),p=KCe(n),m=FCe(n),y=UCe(a),_=i.createProgram();let v,w,M=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y].filter(H0).join(`
`),v.length>0&&(v+=`
`),w=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y].filter(H0).join(`
`),w.length>0&&(w+=`
`)):(v=[GF(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(H0).join(`
`),w=[GF(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",n.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==zc?"#define TONE_MAPPING":"",n.toneMapping!==zc?bn.tonemapping_pars_fragment:"",n.toneMapping!==zc?ICe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",bn.colorspace_pars_fragment,OCe("linearToOutputTexel",n.outputColorSpace),LCe(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(H0).join(`
`)),s=HT(s),s=HF(s,n),s=VF(s,n),o=HT(o),o=HF(o,n),o=VF(o,n),s=WF(s),o=WF(o),n.isRawShaderMaterial!==!0&&(M=`#version 300 es
`,v=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,w=["#define varying in",n.glslVersion===BT?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===BT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const C=M+v+s,N=M+w+o,P=UF(i,i.VERTEX_SHADER,C),R=UF(i,i.FRAGMENT_SHADER,N);i.attachShader(_,P),i.attachShader(_,R),n.index0AttributeName!==void 0?i.bindAttribLocation(_,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(_,0,"position"),i.linkProgram(_);function k(z){if(t.debug.checkShaderErrors){const O=i.getProgramInfoLog(_).trim(),q=i.getShaderInfoLog(P).trim(),Y=i.getShaderInfoLog(R).trim();let X=!0,ee=!0;if(i.getProgramParameter(_,i.LINK_STATUS)===!1)if(X=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,_,P,R);else{const se=zF(i,P,"vertex"),W=zF(i,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(_,i.VALIDATE_STATUS)+`

Material Name: `+z.name+`
Material Type: `+z.type+`

Program Info Log: `+O+`
`+se+`
`+W)}else O!==""?console.warn("THREE.WebGLProgram: Program Info Log:",O):(q===""||Y==="")&&(ee=!1);ee&&(z.diagnostics={runnable:X,programLog:O,vertexShader:{log:q,prefix:v},fragmentShader:{log:Y,prefix:w}})}i.deleteShader(P),i.deleteShader(R),U=new Ew(i,_),I=BCe(i,_)}let U;this.getUniforms=function(){return U===void 0&&k(this),U};let I;this.getAttributes=function(){return I===void 0&&k(this),I};let L=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=i.getProgramParameter(_,RCe)),L},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(_),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=DCe++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=P,this.fragmentShader=R,this}let QCe=0;class JCe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),a=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new eNe(e),n.set(e,r)),r}}class eNe{constructor(e){this.id=QCe++,this.code=e,this.usedTimes=0}}function tNe(t,e,n,r,i,a,s){const o=new sp,l=new JCe,u=new Set,d=[],f=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(I){return u.add(I),I===0?"uv":`uv${I}`}function v(I,L,z,O,q){const Y=O.fog,X=q.geometry,ee=I.isMeshStandardMaterial?O.environment:null,se=(I.isMeshStandardMaterial?n:e).get(I.envMap||ee),W=se&&se.mapping===ov?se.image.height:null,$=y[I.type];I.precision!==null&&(m=i.getMaxPrecision(I.precision),m!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",m,"instead."));const G=X.morphAttributes.position||X.morphAttributes.normal||X.morphAttributes.color,j=G!==void 0?G.length:0;let B=0;X.morphAttributes.position!==void 0&&(B=1),X.morphAttributes.normal!==void 0&&(B=2),X.morphAttributes.color!==void 0&&(B=3);let ae,re,de,ce;if($){const Pt=Ul[$];ae=Pt.vertexShader,re=Pt.fragmentShader}else ae=I.vertexShader,re=I.fragmentShader,l.update(I),de=l.getVertexShaderID(I),ce=l.getFragmentShaderID(I);const ie=t.getRenderTarget(),le=t.state.buffers.depth.getReversed(),fe=q.isInstancedMesh===!0,Ne=q.isBatchedMesh===!0,Se=!!I.map,Z=!!I.matcap,xe=!!se,oe=!!I.aoMap,tt=!!I.lightMap,ke=!!I.bumpMap,st=!!I.normalMap,Ce=!!I.displacementMap,ct=!!I.emissiveMap,$e=!!I.metalnessMap,J=!!I.roughnessMap,Q=I.anisotropy>0,ye=I.clearcoat>0,we=I.dispersion>0,De=I.iridescence>0,Ue=I.sheen>0,it=I.transmission>0,nt=Q&&!!I.anisotropyMap,ot=ye&&!!I.clearcoatMap,xt=ye&&!!I.clearcoatNormalMap,rt=ye&&!!I.clearcoatRoughnessMap,be=De&&!!I.iridescenceMap,Je=De&&!!I.iridescenceThicknessMap,Qe=Ue&&!!I.sheenColorMap,Oe=Ue&&!!I.sheenRoughnessMap,pe=!!I.specularMap,je=!!I.specularColorMap,ut=!!I.specularIntensityMap,ge=it&&!!I.transmissionMap,Be=it&&!!I.thicknessMap,Pe=!!I.gradientMap,Ke=!!I.alphaMap,te=I.alphaTest>0,Le=!!I.alphaHash,dt=!!I.extensions;let kt=zc;I.toneMapped&&(ie===null||ie.isXRRenderTarget===!0)&&(kt=t.toneMapping);const Mt={shaderID:$,shaderType:I.type,shaderName:I.name,vertexShader:ae,fragmentShader:re,defines:I.defines,customVertexShaderID:de,customFragmentShaderID:ce,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:m,batching:Ne,batchingColor:Ne&&q._colorsTexture!==null,instancing:fe,instancingColor:fe&&q.instanceColor!==null,instancingMorph:fe&&q.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:ie===null?t.outputColorSpace:ie.isXRRenderTarget===!0?ie.texture.colorSpace:kp,alphaToCoverage:!!I.alphaToCoverage,map:Se,matcap:Z,envMap:xe,envMapMode:xe&&se.mapping,envMapCubeUVHeight:W,aoMap:oe,lightMap:tt,bumpMap:ke,normalMap:st,displacementMap:p&&Ce,emissiveMap:ct,normalMapObjectSpace:st&&I.normalMapType===U7,normalMapTangentSpace:st&&I.normalMapType===Rf,metalnessMap:$e,roughnessMap:J,anisotropy:Q,anisotropyMap:nt,clearcoat:ye,clearcoatMap:ot,clearcoatNormalMap:xt,clearcoatRoughnessMap:rt,dispersion:we,iridescence:De,iridescenceMap:be,iridescenceThicknessMap:Je,sheen:Ue,sheenColorMap:Qe,sheenRoughnessMap:Oe,specularMap:pe,specularColorMap:je,specularIntensityMap:ut,transmission:it,transmissionMap:ge,thicknessMap:Be,gradientMap:Pe,opaque:I.transparent===!1&&I.blending===rp&&I.alphaToCoverage===!1,alphaMap:Ke,alphaTest:te,alphaHash:Le,combine:I.combine,mapUv:Se&&_(I.map.channel),aoMapUv:oe&&_(I.aoMap.channel),lightMapUv:tt&&_(I.lightMap.channel),bumpMapUv:ke&&_(I.bumpMap.channel),normalMapUv:st&&_(I.normalMap.channel),displacementMapUv:Ce&&_(I.displacementMap.channel),emissiveMapUv:ct&&_(I.emissiveMap.channel),metalnessMapUv:$e&&_(I.metalnessMap.channel),roughnessMapUv:J&&_(I.roughnessMap.channel),anisotropyMapUv:nt&&_(I.anisotropyMap.channel),clearcoatMapUv:ot&&_(I.clearcoatMap.channel),clearcoatNormalMapUv:xt&&_(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:rt&&_(I.clearcoatRoughnessMap.channel),iridescenceMapUv:be&&_(I.iridescenceMap.channel),iridescenceThicknessMapUv:Je&&_(I.iridescenceThicknessMap.channel),sheenColorMapUv:Qe&&_(I.sheenColorMap.channel),sheenRoughnessMapUv:Oe&&_(I.sheenRoughnessMap.channel),specularMapUv:pe&&_(I.specularMap.channel),specularColorMapUv:je&&_(I.specularColorMap.channel),specularIntensityMapUv:ut&&_(I.specularIntensityMap.channel),transmissionMapUv:ge&&_(I.transmissionMap.channel),thicknessMapUv:Be&&_(I.thicknessMap.channel),alphaMapUv:Ke&&_(I.alphaMap.channel),vertexTangents:!!X.attributes.tangent&&(st||Q),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!X.attributes.color&&X.attributes.color.itemSize===4,pointsUvs:q.isPoints===!0&&!!X.attributes.uv&&(Se||Ke),fog:!!Y,useFog:I.fog===!0,fogExp2:!!Y&&Y.isFogExp2,flatShading:I.flatShading===!0,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:le,skinning:q.isSkinnedMesh===!0,morphTargets:X.morphAttributes.position!==void 0,morphNormals:X.morphAttributes.normal!==void 0,morphColors:X.morphAttributes.color!==void 0,morphTargetsCount:j,morphTextureStride:B,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:I.dithering,shadowMapEnabled:t.shadowMap.enabled&&z.length>0,shadowMapType:t.shadowMap.type,toneMapping:kt,decodeVideoTexture:Se&&I.map.isVideoTexture===!0&&kn.getTransfer(I.map.colorSpace)===er,decodeVideoTextureEmissive:ct&&I.emissiveMap.isVideoTexture===!0&&kn.getTransfer(I.emissiveMap.colorSpace)===er,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===$s,flipSided:I.side===_s,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:dt&&I.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(dt&&I.extensions.multiDraw===!0||Ne)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return Mt.vertexUv1s=u.has(1),Mt.vertexUv2s=u.has(2),Mt.vertexUv3s=u.has(3),u.clear(),Mt}function w(I){const L=[];if(I.shaderID?L.push(I.shaderID):(L.push(I.customVertexShaderID),L.push(I.customFragmentShaderID)),I.defines!==void 0)for(const z in I.defines)L.push(z),L.push(I.defines[z]);return I.isRawShaderMaterial===!1&&(M(L,I),C(L,I),L.push(t.outputColorSpace)),L.push(I.customProgramCacheKey),L.join()}function M(I,L){I.push(L.precision),I.push(L.outputColorSpace),I.push(L.envMapMode),I.push(L.envMapCubeUVHeight),I.push(L.mapUv),I.push(L.alphaMapUv),I.push(L.lightMapUv),I.push(L.aoMapUv),I.push(L.bumpMapUv),I.push(L.normalMapUv),I.push(L.displacementMapUv),I.push(L.emissiveMapUv),I.push(L.metalnessMapUv),I.push(L.roughnessMapUv),I.push(L.anisotropyMapUv),I.push(L.clearcoatMapUv),I.push(L.clearcoatNormalMapUv),I.push(L.clearcoatRoughnessMapUv),I.push(L.iridescenceMapUv),I.push(L.iridescenceThicknessMapUv),I.push(L.sheenColorMapUv),I.push(L.sheenRoughnessMapUv),I.push(L.specularMapUv),I.push(L.specularColorMapUv),I.push(L.specularIntensityMapUv),I.push(L.transmissionMapUv),I.push(L.thicknessMapUv),I.push(L.combine),I.push(L.fogExp2),I.push(L.sizeAttenuation),I.push(L.morphTargetsCount),I.push(L.morphAttributeCount),I.push(L.numDirLights),I.push(L.numPointLights),I.push(L.numSpotLights),I.push(L.numSpotLightMaps),I.push(L.numHemiLights),I.push(L.numRectAreaLights),I.push(L.numDirLightShadows),I.push(L.numPointLightShadows),I.push(L.numSpotLightShadows),I.push(L.numSpotLightShadowsWithMaps),I.push(L.numLightProbes),I.push(L.shadowMapType),I.push(L.toneMapping),I.push(L.numClippingPlanes),I.push(L.numClipIntersection),I.push(L.depthPacking)}function C(I,L){o.disableAll(),L.supportsVertexTextures&&o.enable(0),L.instancing&&o.enable(1),L.instancingColor&&o.enable(2),L.instancingMorph&&o.enable(3),L.matcap&&o.enable(4),L.envMap&&o.enable(5),L.normalMapObjectSpace&&o.enable(6),L.normalMapTangentSpace&&o.enable(7),L.clearcoat&&o.enable(8),L.iridescence&&o.enable(9),L.alphaTest&&o.enable(10),L.vertexColors&&o.enable(11),L.vertexAlphas&&o.enable(12),L.vertexUv1s&&o.enable(13),L.vertexUv2s&&o.enable(14),L.vertexUv3s&&o.enable(15),L.vertexTangents&&o.enable(16),L.anisotropy&&o.enable(17),L.alphaHash&&o.enable(18),L.batching&&o.enable(19),L.dispersion&&o.enable(20),L.batchingColor&&o.enable(21),I.push(o.mask),o.disableAll(),L.fog&&o.enable(0),L.useFog&&o.enable(1),L.flatShading&&o.enable(2),L.logarithmicDepthBuffer&&o.enable(3),L.reverseDepthBuffer&&o.enable(4),L.skinning&&o.enable(5),L.morphTargets&&o.enable(6),L.morphNormals&&o.enable(7),L.morphColors&&o.enable(8),L.premultipliedAlpha&&o.enable(9),L.shadowMapEnabled&&o.enable(10),L.doubleSided&&o.enable(11),L.flipSided&&o.enable(12),L.useDepthPacking&&o.enable(13),L.dithering&&o.enable(14),L.transmission&&o.enable(15),L.sheen&&o.enable(16),L.opaque&&o.enable(17),L.pointsUvs&&o.enable(18),L.decodeVideoTexture&&o.enable(19),L.decodeVideoTextureEmissive&&o.enable(20),L.alphaToCoverage&&o.enable(21),I.push(o.mask)}function N(I){const L=y[I.type];let z;if(L){const O=Ul[L];z=Fy.clone(O.uniforms)}else z=I.uniforms;return z}function P(I,L){let z;for(let O=0,q=d.length;O<q;O++){const Y=d[O];if(Y.cacheKey===L){z=Y,++z.usedTimes;break}}return z===void 0&&(z=new ZCe(t,L,I,a),d.push(z)),z}function R(I){if(--I.usedTimes===0){const L=d.indexOf(I);d[L]=d[d.length-1],d.pop(),I.destroy()}}function k(I){l.remove(I)}function U(){l.dispose()}return{getParameters:v,getProgramCacheKey:w,getUniforms:N,acquireProgram:P,releaseProgram:R,releaseShaderCache:k,programs:d,dispose:U}}function nNe(){let t=new WeakMap;function e(s){return t.has(s)}function n(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function r(s){t.delete(s)}function i(s,o,l){t.get(s)[o]=l}function a(){t=new WeakMap}return{has:e,get:n,remove:r,update:i,dispose:a}}function rNe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function $F(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function YF(){const t=[];let e=0;const n=[],r=[],i=[];function a(){e=0,n.length=0,r.length=0,i.length=0}function s(f,p,m,y,_,v){let w=t[e];return w===void 0?(w={id:f.id,object:f,geometry:p,material:m,groupOrder:y,renderOrder:f.renderOrder,z:_,group:v},t[e]=w):(w.id=f.id,w.object=f,w.geometry=p,w.material=m,w.groupOrder=y,w.renderOrder=f.renderOrder,w.z=_,w.group=v),e++,w}function o(f,p,m,y,_,v){const w=s(f,p,m,y,_,v);m.transmission>0?r.push(w):m.transparent===!0?i.push(w):n.push(w)}function l(f,p,m,y,_,v){const w=s(f,p,m,y,_,v);m.transmission>0?r.unshift(w):m.transparent===!0?i.unshift(w):n.unshift(w)}function u(f,p){n.length>1&&n.sort(f||rNe),r.length>1&&r.sort(p||$F),i.length>1&&i.sort(p||$F)}function d(){for(let f=e,p=t.length;f<p;f++){const m=t[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:n,transmissive:r,transparent:i,init:a,push:o,unshift:l,finish:d,sort:u}}function iNe(){let t=new WeakMap;function e(r,i){const a=t.get(r);let s;return a===void 0?(s=new YF,t.set(r,[s])):i>=a.length?(s=new YF,a.push(s)):s=a[i],s}function n(){t=new WeakMap}return{get:e,dispose:n}}function aNe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new he,color:new Ct};break;case"SpotLight":n={position:new he,direction:new he,color:new Ct,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new he,color:new Ct,distance:0,decay:0};break;case"HemisphereLight":n={direction:new he,skyColor:new Ct,groundColor:new Ct};break;case"RectAreaLight":n={color:new Ct,position:new he,halfWidth:new he,halfHeight:new he};break}return t[e.id]=n,n}}}function sNe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let oNe=0;function lNe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function cNe(t){const e=new aNe,n=sNe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new he);const i=new he,a=new rn,s=new rn;function o(u){let d=0,f=0,p=0;for(let I=0;I<9;I++)r.probe[I].set(0,0,0);let m=0,y=0,_=0,v=0,w=0,M=0,C=0,N=0,P=0,R=0,k=0;u.sort(lNe);for(let I=0,L=u.length;I<L;I++){const z=u[I],O=z.color,q=z.intensity,Y=z.distance,X=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)d+=O.r*q,f+=O.g*q,p+=O.b*q;else if(z.isLightProbe){for(let ee=0;ee<9;ee++)r.probe[ee].addScaledVector(z.sh.coefficients[ee],q);k++}else if(z.isDirectionalLight){const ee=e.get(z);if(ee.color.copy(z.color).multiplyScalar(z.intensity),z.castShadow){const se=z.shadow,W=n.get(z);W.shadowIntensity=se.intensity,W.shadowBias=se.bias,W.shadowNormalBias=se.normalBias,W.shadowRadius=se.radius,W.shadowMapSize=se.mapSize,r.directionalShadow[m]=W,r.directionalShadowMap[m]=X,r.directionalShadowMatrix[m]=z.shadow.matrix,M++}r.directional[m]=ee,m++}else if(z.isSpotLight){const ee=e.get(z);ee.position.setFromMatrixPosition(z.matrixWorld),ee.color.copy(O).multiplyScalar(q),ee.distance=Y,ee.coneCos=Math.cos(z.angle),ee.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),ee.decay=z.decay,r.spot[_]=ee;const se=z.shadow;if(z.map&&(r.spotLightMap[P]=z.map,P++,se.updateMatrices(z),z.castShadow&&R++),r.spotLightMatrix[_]=se.matrix,z.castShadow){const W=n.get(z);W.shadowIntensity=se.intensity,W.shadowBias=se.bias,W.shadowNormalBias=se.normalBias,W.shadowRadius=se.radius,W.shadowMapSize=se.mapSize,r.spotShadow[_]=W,r.spotShadowMap[_]=X,N++}_++}else if(z.isRectAreaLight){const ee=e.get(z);ee.color.copy(O).multiplyScalar(q),ee.halfWidth.set(z.width*.5,0,0),ee.halfHeight.set(0,z.height*.5,0),r.rectArea[v]=ee,v++}else if(z.isPointLight){const ee=e.get(z);if(ee.color.copy(z.color).multiplyScalar(z.intensity),ee.distance=z.distance,ee.decay=z.decay,z.castShadow){const se=z.shadow,W=n.get(z);W.shadowIntensity=se.intensity,W.shadowBias=se.bias,W.shadowNormalBias=se.normalBias,W.shadowRadius=se.radius,W.shadowMapSize=se.mapSize,W.shadowCameraNear=se.camera.near,W.shadowCameraFar=se.camera.far,r.pointShadow[y]=W,r.pointShadowMap[y]=X,r.pointShadowMatrix[y]=z.shadow.matrix,C++}r.point[y]=ee,y++}else if(z.isHemisphereLight){const ee=e.get(z);ee.skyColor.copy(z.color).multiplyScalar(q),ee.groundColor.copy(z.groundColor).multiplyScalar(q),r.hemi[w]=ee,w++}}v>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=wt.LTC_FLOAT_1,r.rectAreaLTC2=wt.LTC_FLOAT_2):(r.rectAreaLTC1=wt.LTC_HALF_1,r.rectAreaLTC2=wt.LTC_HALF_2)),r.ambient[0]=d,r.ambient[1]=f,r.ambient[2]=p;const U=r.hash;(U.directionalLength!==m||U.pointLength!==y||U.spotLength!==_||U.rectAreaLength!==v||U.hemiLength!==w||U.numDirectionalShadows!==M||U.numPointShadows!==C||U.numSpotShadows!==N||U.numSpotMaps!==P||U.numLightProbes!==k)&&(r.directional.length=m,r.spot.length=_,r.rectArea.length=v,r.point.length=y,r.hemi.length=w,r.directionalShadow.length=M,r.directionalShadowMap.length=M,r.pointShadow.length=C,r.pointShadowMap.length=C,r.spotShadow.length=N,r.spotShadowMap.length=N,r.directionalShadowMatrix.length=M,r.pointShadowMatrix.length=C,r.spotLightMatrix.length=N+P-R,r.spotLightMap.length=P,r.numSpotLightShadowsWithMaps=R,r.numLightProbes=k,U.directionalLength=m,U.pointLength=y,U.spotLength=_,U.rectAreaLength=v,U.hemiLength=w,U.numDirectionalShadows=M,U.numPointShadows=C,U.numSpotShadows=N,U.numSpotMaps=P,U.numLightProbes=k,r.version=oNe++)}function l(u,d){let f=0,p=0,m=0,y=0,_=0;const v=d.matrixWorldInverse;for(let w=0,M=u.length;w<M;w++){const C=u[w];if(C.isDirectionalLight){const N=r.directional[f];N.direction.setFromMatrixPosition(C.matrixWorld),i.setFromMatrixPosition(C.target.matrixWorld),N.direction.sub(i),N.direction.transformDirection(v),f++}else if(C.isSpotLight){const N=r.spot[m];N.position.setFromMatrixPosition(C.matrixWorld),N.position.applyMatrix4(v),N.direction.setFromMatrixPosition(C.matrixWorld),i.setFromMatrixPosition(C.target.matrixWorld),N.direction.sub(i),N.direction.transformDirection(v),m++}else if(C.isRectAreaLight){const N=r.rectArea[y];N.position.setFromMatrixPosition(C.matrixWorld),N.position.applyMatrix4(v),s.identity(),a.copy(C.matrixWorld),a.premultiply(v),s.extractRotation(a),N.halfWidth.set(C.width*.5,0,0),N.halfHeight.set(0,C.height*.5,0),N.halfWidth.applyMatrix4(s),N.halfHeight.applyMatrix4(s),y++}else if(C.isPointLight){const N=r.point[p];N.position.setFromMatrixPosition(C.matrixWorld),N.position.applyMatrix4(v),p++}else if(C.isHemisphereLight){const N=r.hemi[_];N.direction.setFromMatrixPosition(C.matrixWorld),N.direction.transformDirection(v),_++}}}return{setup:o,setupView:l,state:r}}function qF(t){const e=new cNe(t),n=[],r=[];function i(d){u.camera=d,n.length=0,r.length=0}function a(d){n.push(d)}function s(d){r.push(d)}function o(){e.setup(n)}function l(d){e.setupView(n,d)}const u={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:u,setupLights:o,setupLightsView:l,pushLight:a,pushShadow:s}}function uNe(t){let e=new WeakMap;function n(i,a=0){const s=e.get(i);let o;return s===void 0?(o=new qF(t),e.set(i,[o])):a>=s.length?(o=new qF(t),s.push(o)):o=s[a],o}function r(){e=new WeakMap}return{get:n,dispose:r}}class K2 extends ts{static get type(){return"MeshDepthMaterial"}constructor(e){super(),this.isMeshDepthMaterial=!0,this.depthPacking=F7,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Z2 extends ts{static get type(){return"MeshDistanceMaterial"}constructor(e){super(),this.isMeshDistanceMaterial=!0,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const dNe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fNe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function hNe(t,e,n){let r=new Tx;const i=new lt,a=new lt,s=new Sn,o=new K2({depthPacking:VD}),l=new Z2,u={},d=n.maxTextureSize,f={[od]:_s,[_s]:od,[$s]:$s},p=new rl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new lt},radius:{value:4}},vertexShader:dNe,fragmentShader:fNe}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const y=new En;y.setAttribute("position",new cr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new Rr(y,p),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=U2;let w=this.type;this.render=function(R,k,U){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||R.length===0)return;const I=t.getRenderTarget(),L=t.getActiveCubeFace(),z=t.getActiveMipmapLevel(),O=t.state;O.setBlending(Qu),O.buffers.color.setClear(1,1,1,1),O.buffers.depth.setTest(!0),O.setScissorTest(!1);const q=w!==Ll&&this.type===Ll,Y=w===Ll&&this.type!==Ll;for(let X=0,ee=R.length;X<ee;X++){const se=R[X],W=se.shadow;if(W===void 0){console.warn("THREE.WebGLShadowMap:",se,"has no shadow.");continue}if(W.autoUpdate===!1&&W.needsUpdate===!1)continue;i.copy(W.mapSize);const $=W.getFrameExtents();if(i.multiply($),a.copy(W.mapSize),(i.x>d||i.y>d)&&(i.x>d&&(a.x=Math.floor(d/$.x),i.x=a.x*$.x,W.mapSize.x=a.x),i.y>d&&(a.y=Math.floor(d/$.y),i.y=a.y*$.y,W.mapSize.y=a.y)),W.map===null||q===!0||Y===!0){const j=this.type!==Ll?{minFilter:Ra,magFilter:Ra}:{};W.map!==null&&W.map.dispose(),W.map=new Kl(i.x,i.y,j),W.map.texture.name=se.name+".shadowMap",W.camera.updateProjectionMatrix()}t.setRenderTarget(W.map),t.clear();const G=W.getViewportCount();for(let j=0;j<G;j++){const B=W.getViewport(j);s.set(a.x*B.x,a.y*B.y,a.x*B.z,a.y*B.w),O.viewport(s),W.updateMatrices(se,j),r=W.getFrustum(),N(k,U,W.camera,se,this.type)}W.isPointLightShadow!==!0&&this.type===Ll&&M(W,U),W.needsUpdate=!1}w=this.type,v.needsUpdate=!1,t.setRenderTarget(I,L,z)};function M(R,k){const U=e.update(_);p.defines.VSM_SAMPLES!==R.blurSamples&&(p.defines.VSM_SAMPLES=R.blurSamples,m.defines.VSM_SAMPLES=R.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),R.mapPass===null&&(R.mapPass=new Kl(i.x,i.y)),p.uniforms.shadow_pass.value=R.map.texture,p.uniforms.resolution.value=R.mapSize,p.uniforms.radius.value=R.radius,t.setRenderTarget(R.mapPass),t.clear(),t.renderBufferDirect(k,null,U,p,_,null),m.uniforms.shadow_pass.value=R.mapPass.texture,m.uniforms.resolution.value=R.mapSize,m.uniforms.radius.value=R.radius,t.setRenderTarget(R.map),t.clear(),t.renderBufferDirect(k,null,U,m,_,null)}function C(R,k,U,I){let L=null;const z=U.isPointLight===!0?R.customDistanceMaterial:R.customDepthMaterial;if(z!==void 0)L=z;else if(L=U.isPointLight===!0?l:o,t.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0){const O=L.uuid,q=k.uuid;let Y=u[O];Y===void 0&&(Y={},u[O]=Y);let X=Y[q];X===void 0&&(X=L.clone(),Y[q]=X,k.addEventListener("dispose",P)),L=X}if(L.visible=k.visible,L.wireframe=k.wireframe,I===Ll?L.side=k.shadowSide!==null?k.shadowSide:k.side:L.side=k.shadowSide!==null?k.shadowSide:f[k.side],L.alphaMap=k.alphaMap,L.alphaTest=k.alphaTest,L.map=k.map,L.clipShadows=k.clipShadows,L.clippingPlanes=k.clippingPlanes,L.clipIntersection=k.clipIntersection,L.displacementMap=k.displacementMap,L.displacementScale=k.displacementScale,L.displacementBias=k.displacementBias,L.wireframeLinewidth=k.wireframeLinewidth,L.linewidth=k.linewidth,U.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const O=t.properties.get(L);O.light=U}return L}function N(R,k,U,I,L){if(R.visible===!1)return;if(R.layers.test(k.layers)&&(R.isMesh||R.isLine||R.isPoints)&&(R.castShadow||R.receiveShadow&&L===Ll)&&(!R.frustumCulled||r.intersectsObject(R))){R.modelViewMatrix.multiplyMatrices(U.matrixWorldInverse,R.matrixWorld);const q=e.update(R),Y=R.material;if(Array.isArray(Y)){const X=q.groups;for(let ee=0,se=X.length;ee<se;ee++){const W=X[ee],$=Y[W.materialIndex];if($&&$.visible){const G=C(R,$,I,L);R.onBeforeShadow(t,R,k,U,q,G,W),t.renderBufferDirect(U,null,q,G,R,W),R.onAfterShadow(t,R,k,U,q,G,W)}}}else if(Y.visible){const X=C(R,Y,I,L);R.onBeforeShadow(t,R,k,U,q,X,null),t.renderBufferDirect(U,null,q,X,R,null),R.onAfterShadow(t,R,k,U,q,X,null)}}const O=R.children;for(let q=0,Y=O.length;q<Y;q++)N(O[q],k,U,I,L)}function P(R){R.target.removeEventListener("dispose",P);for(const U in u){const I=u[U],L=R.target.uuid;L in I&&(I[L].dispose(),delete I[L])}}}const pNe={[W1]:G1,[$1]:X1,[Y1]:K1,[Sp]:q1,[G1]:W1,[X1]:$1,[K1]:Y1,[q1]:Sp};function mNe(t,e){function n(){let ge=!1;const Be=new Sn;let Pe=null;const Ke=new Sn(0,0,0,0);return{setMask:function(te){Pe!==te&&!ge&&(t.colorMask(te,te,te,te),Pe=te)},setLocked:function(te){ge=te},setClear:function(te,Le,dt,kt,Mt){Mt===!0&&(te*=kt,Le*=kt,dt*=kt),Be.set(te,Le,dt,kt),Ke.equals(Be)===!1&&(t.clearColor(te,Le,dt,kt),Ke.copy(Be))},reset:function(){ge=!1,Pe=null,Ke.set(-1,0,0,0)}}}function r(){let ge=!1,Be=!1,Pe=null,Ke=null,te=null;return{setReversed:function(Le){if(Be!==Le){const dt=e.get("EXT_clip_control");Be?dt.clipControlEXT(dt.LOWER_LEFT_EXT,dt.ZERO_TO_ONE_EXT):dt.clipControlEXT(dt.LOWER_LEFT_EXT,dt.NEGATIVE_ONE_TO_ONE_EXT);const kt=te;te=null,this.setClear(kt)}Be=Le},getReversed:function(){return Be},setTest:function(Le){Le?ie(t.DEPTH_TEST):le(t.DEPTH_TEST)},setMask:function(Le){Pe!==Le&&!ge&&(t.depthMask(Le),Pe=Le)},setFunc:function(Le){if(Be&&(Le=pNe[Le]),Ke!==Le){switch(Le){case W1:t.depthFunc(t.NEVER);break;case G1:t.depthFunc(t.ALWAYS);break;case $1:t.depthFunc(t.LESS);break;case Sp:t.depthFunc(t.LEQUAL);break;case Y1:t.depthFunc(t.EQUAL);break;case q1:t.depthFunc(t.GEQUAL);break;case X1:t.depthFunc(t.GREATER);break;case K1:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Ke=Le}},setLocked:function(Le){ge=Le},setClear:function(Le){te!==Le&&(Be&&(Le=1-Le),t.clearDepth(Le),te=Le)},reset:function(){ge=!1,Pe=null,Ke=null,te=null,Be=!1}}}function i(){let ge=!1,Be=null,Pe=null,Ke=null,te=null,Le=null,dt=null,kt=null,Mt=null;return{setTest:function(Pt){ge||(Pt?ie(t.STENCIL_TEST):le(t.STENCIL_TEST))},setMask:function(Pt){Be!==Pt&&!ge&&(t.stencilMask(Pt),Be=Pt)},setFunc:function(Pt,mn,Mn){(Pe!==Pt||Ke!==mn||te!==Mn)&&(t.stencilFunc(Pt,mn,Mn),Pe=Pt,Ke=mn,te=Mn)},setOp:function(Pt,mn,Mn){(Le!==Pt||dt!==mn||kt!==Mn)&&(t.stencilOp(Pt,mn,Mn),Le=Pt,dt=mn,kt=Mn)},setLocked:function(Pt){ge=Pt},setClear:function(Pt){Mt!==Pt&&(t.clearStencil(Pt),Mt=Pt)},reset:function(){ge=!1,Be=null,Pe=null,Ke=null,te=null,Le=null,dt=null,kt=null,Mt=null}}}const a=new n,s=new r,o=new i,l=new WeakMap,u=new WeakMap;let d={},f={},p=new WeakMap,m=[],y=null,_=!1,v=null,w=null,M=null,C=null,N=null,P=null,R=null,k=new Ct(0,0,0),U=0,I=!1,L=null,z=null,O=null,q=null,Y=null;const X=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ee=!1,se=0;const W=t.getParameter(t.VERSION);W.indexOf("WebGL")!==-1?(se=parseFloat(/^WebGL (\d)/.exec(W)[1]),ee=se>=1):W.indexOf("OpenGL ES")!==-1&&(se=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),ee=se>=2);let $=null,G={};const j=t.getParameter(t.SCISSOR_BOX),B=t.getParameter(t.VIEWPORT),ae=new Sn().fromArray(j),re=new Sn().fromArray(B);function de(ge,Be,Pe,Ke){const te=new Uint8Array(4),Le=t.createTexture();t.bindTexture(ge,Le),t.texParameteri(ge,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(ge,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let dt=0;dt<Pe;dt++)ge===t.TEXTURE_3D||ge===t.TEXTURE_2D_ARRAY?t.texImage3D(Be,0,t.RGBA,1,1,Ke,0,t.RGBA,t.UNSIGNED_BYTE,te):t.texImage2D(Be+dt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,te);return Le}const ce={};ce[t.TEXTURE_2D]=de(t.TEXTURE_2D,t.TEXTURE_2D,1),ce[t.TEXTURE_CUBE_MAP]=de(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),ce[t.TEXTURE_2D_ARRAY]=de(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),ce[t.TEXTURE_3D]=de(t.TEXTURE_3D,t.TEXTURE_3D,1,1),a.setClear(0,0,0,1),s.setClear(1),o.setClear(0),ie(t.DEPTH_TEST),s.setFunc(Sp),ke(!1),st(jT),ie(t.CULL_FACE),oe(Qu);function ie(ge){d[ge]!==!0&&(t.enable(ge),d[ge]=!0)}function le(ge){d[ge]!==!1&&(t.disable(ge),d[ge]=!1)}function fe(ge,Be){return f[ge]!==Be?(t.bindFramebuffer(ge,Be),f[ge]=Be,ge===t.DRAW_FRAMEBUFFER&&(f[t.FRAMEBUFFER]=Be),ge===t.FRAMEBUFFER&&(f[t.DRAW_FRAMEBUFFER]=Be),!0):!1}function Ne(ge,Be){let Pe=m,Ke=!1;if(ge){Pe=p.get(Be),Pe===void 0&&(Pe=[],p.set(Be,Pe));const te=ge.textures;if(Pe.length!==te.length||Pe[0]!==t.COLOR_ATTACHMENT0){for(let Le=0,dt=te.length;Le<dt;Le++)Pe[Le]=t.COLOR_ATTACHMENT0+Le;Pe.length=te.length,Ke=!0}}else Pe[0]!==t.BACK&&(Pe[0]=t.BACK,Ke=!0);Ke&&t.drawBuffers(Pe)}function Se(ge){return y!==ge?(t.useProgram(ge),y=ge,!0):!1}const Z={[pf]:t.FUNC_ADD,[c7]:t.FUNC_SUBTRACT,[u7]:t.FUNC_REVERSE_SUBTRACT};Z[d7]=t.MIN,Z[f7]=t.MAX;const xe={[h7]:t.ZERO,[p7]:t.ONE,[m7]:t.SRC_COLOR,[H1]:t.SRC_ALPHA,[_7]:t.SRC_ALPHA_SATURATE,[x7]:t.DST_COLOR,[v7]:t.DST_ALPHA,[g7]:t.ONE_MINUS_SRC_COLOR,[V1]:t.ONE_MINUS_SRC_ALPHA,[b7]:t.ONE_MINUS_DST_COLOR,[y7]:t.ONE_MINUS_DST_ALPHA,[w7]:t.CONSTANT_COLOR,[S7]:t.ONE_MINUS_CONSTANT_COLOR,[E7]:t.CONSTANT_ALPHA,[M7]:t.ONE_MINUS_CONSTANT_ALPHA};function oe(ge,Be,Pe,Ke,te,Le,dt,kt,Mt,Pt){if(ge===Qu){_===!0&&(le(t.BLEND),_=!1);return}if(_===!1&&(ie(t.BLEND),_=!0),ge!==l7){if(ge!==v||Pt!==I){if((w!==pf||N!==pf)&&(t.blendEquation(t.FUNC_ADD),w=pf,N=pf),Pt)switch(ge){case rp:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case OT:t.blendFunc(t.ONE,t.ONE);break;case IT:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case LT:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ge);break}else switch(ge){case rp:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case OT:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case IT:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case LT:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ge);break}M=null,C=null,P=null,R=null,k.set(0,0,0),U=0,v=ge,I=Pt}return}te=te||Be,Le=Le||Pe,dt=dt||Ke,(Be!==w||te!==N)&&(t.blendEquationSeparate(Z[Be],Z[te]),w=Be,N=te),(Pe!==M||Ke!==C||Le!==P||dt!==R)&&(t.blendFuncSeparate(xe[Pe],xe[Ke],xe[Le],xe[dt]),M=Pe,C=Ke,P=Le,R=dt),(kt.equals(k)===!1||Mt!==U)&&(t.blendColor(kt.r,kt.g,kt.b,Mt),k.copy(kt),U=Mt),v=ge,I=!1}function tt(ge,Be){ge.side===$s?le(t.CULL_FACE):ie(t.CULL_FACE);let Pe=ge.side===_s;Be&&(Pe=!Pe),ke(Pe),ge.blending===rp&&ge.transparent===!1?oe(Qu):oe(ge.blending,ge.blendEquation,ge.blendSrc,ge.blendDst,ge.blendEquationAlpha,ge.blendSrcAlpha,ge.blendDstAlpha,ge.blendColor,ge.blendAlpha,ge.premultipliedAlpha),s.setFunc(ge.depthFunc),s.setTest(ge.depthTest),s.setMask(ge.depthWrite),a.setMask(ge.colorWrite);const Ke=ge.stencilWrite;o.setTest(Ke),Ke&&(o.setMask(ge.stencilWriteMask),o.setFunc(ge.stencilFunc,ge.stencilRef,ge.stencilFuncMask),o.setOp(ge.stencilFail,ge.stencilZFail,ge.stencilZPass)),ct(ge.polygonOffset,ge.polygonOffsetFactor,ge.polygonOffsetUnits),ge.alphaToCoverage===!0?ie(t.SAMPLE_ALPHA_TO_COVERAGE):le(t.SAMPLE_ALPHA_TO_COVERAGE)}function ke(ge){L!==ge&&(ge?t.frontFace(t.CW):t.frontFace(t.CCW),L=ge)}function st(ge){ge!==a7?(ie(t.CULL_FACE),ge!==z&&(ge===jT?t.cullFace(t.BACK):ge===s7?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):le(t.CULL_FACE),z=ge}function Ce(ge){ge!==O&&(ee&&t.lineWidth(ge),O=ge)}function ct(ge,Be,Pe){ge?(ie(t.POLYGON_OFFSET_FILL),(q!==Be||Y!==Pe)&&(t.polygonOffset(Be,Pe),q=Be,Y=Pe)):le(t.POLYGON_OFFSET_FILL)}function $e(ge){ge?ie(t.SCISSOR_TEST):le(t.SCISSOR_TEST)}function J(ge){ge===void 0&&(ge=t.TEXTURE0+X-1),$!==ge&&(t.activeTexture(ge),$=ge)}function Q(ge,Be,Pe){Pe===void 0&&($===null?Pe=t.TEXTURE0+X-1:Pe=$);let Ke=G[Pe];Ke===void 0&&(Ke={type:void 0,texture:void 0},G[Pe]=Ke),(Ke.type!==ge||Ke.texture!==Be)&&($!==Pe&&(t.activeTexture(Pe),$=Pe),t.bindTexture(ge,Be||ce[ge]),Ke.type=ge,Ke.texture=Be)}function ye(){const ge=G[$];ge!==void 0&&ge.type!==void 0&&(t.bindTexture(ge.type,null),ge.type=void 0,ge.texture=void 0)}function we(){try{t.compressedTexImage2D.apply(t,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function De(){try{t.compressedTexImage3D.apply(t,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Ue(){try{t.texSubImage2D.apply(t,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function it(){try{t.texSubImage3D.apply(t,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function nt(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function ot(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function xt(){try{t.texStorage2D.apply(t,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function rt(){try{t.texStorage3D.apply(t,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function be(){try{t.texImage2D.apply(t,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Je(){try{t.texImage3D.apply(t,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Qe(ge){ae.equals(ge)===!1&&(t.scissor(ge.x,ge.y,ge.z,ge.w),ae.copy(ge))}function Oe(ge){re.equals(ge)===!1&&(t.viewport(ge.x,ge.y,ge.z,ge.w),re.copy(ge))}function pe(ge,Be){let Pe=u.get(Be);Pe===void 0&&(Pe=new WeakMap,u.set(Be,Pe));let Ke=Pe.get(ge);Ke===void 0&&(Ke=t.getUniformBlockIndex(Be,ge.name),Pe.set(ge,Ke))}function je(ge,Be){const Ke=u.get(Be).get(ge);l.get(Be)!==Ke&&(t.uniformBlockBinding(Be,Ke,ge.__bindingPointIndex),l.set(Be,Ke))}function ut(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),s.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),d={},$=null,G={},f={},p=new WeakMap,m=[],y=null,_=!1,v=null,w=null,M=null,C=null,N=null,P=null,R=null,k=new Ct(0,0,0),U=0,I=!1,L=null,z=null,O=null,q=null,Y=null,ae.set(0,0,t.canvas.width,t.canvas.height),re.set(0,0,t.canvas.width,t.canvas.height),a.reset(),s.reset(),o.reset()}return{buffers:{color:a,depth:s,stencil:o},enable:ie,disable:le,bindFramebuffer:fe,drawBuffers:Ne,useProgram:Se,setBlending:oe,setMaterial:tt,setFlipSided:ke,setCullFace:st,setLineWidth:Ce,setPolygonOffset:ct,setScissorTest:$e,activeTexture:J,bindTexture:Q,unbindTexture:ye,compressedTexImage2D:we,compressedTexImage3D:De,texImage2D:be,texImage3D:Je,updateUBOMapping:pe,uniformBlockBinding:je,texStorage2D:xt,texStorage3D:rt,texSubImage2D:Ue,texSubImage3D:it,compressedTexSubImage2D:nt,compressedTexSubImage3D:ot,scissor:Qe,viewport:Oe,reset:ut}}function gNe(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2):(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0),t}function vNe(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0):(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2),t}function yNe(t){return t.repeat.x=1,t.repeat.y=1,t.offset.x=0,t.offset.y=0,t}function VT(t,e,n,r){const i=xNe(r);switch(n){case ID:return t*e;case FD:return t*e;case UD:return t*e*2;case W2:return t*e/i.components*i.byteLength;case Mx:return t*e/i.components*i.byteLength;case BD:return t*e*2/i.components*i.byteLength;case G2:return t*e*2/i.components*i.byteLength;case LD:return t*e*3/i.components*i.byteLength;case Ja:return t*e*4/i.components*i.byteLength;case $2:return t*e*4/i.components*i.byteLength;case q0:case X0:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case K0:case Z0:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Q1:case eS:return Math.max(t,16)*Math.max(e,8)/4;case Z1:case J1:return Math.max(t,8)*Math.max(e,8)/2;case tS:case nS:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case rS:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case iS:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case aS:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case sS:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case oS:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case lS:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case cS:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case uS:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case dS:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case fS:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case hS:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case pS:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case mS:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case gS:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case vS:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case Q0:case yS:case xS:return Math.ceil(t/4)*Math.ceil(e/4)*16;case zD:case bS:return Math.ceil(t/4)*Math.ceil(e/4)*8;case _S:case wS:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function xNe(t){switch(t){case Xl:case kD:return{byteLength:1,components:1};case Bg:case jD:case lv:return{byteLength:2,components:1};case H2:case V2:return{byteLength:2,components:4};case cd:case z2:case Xs:return{byteLength:4,components:1};case OD:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}const bNe={contain:gNe,cover:vNe,fill:yNe,getByteLength:VT};function _Ne(t,e,n,r,i,a,s){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new lt,d=new WeakMap;let f;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(J,Q){return m?new OffscreenCanvas(J,Q):Ly("canvas")}function _(J,Q,ye){let we=1;const De=$e(J);if((De.width>ye||De.height>ye)&&(we=ye/Math.max(De.width,De.height)),we<1)if(typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&J instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&J instanceof ImageBitmap||typeof VideoFrame<"u"&&J instanceof VideoFrame){const Ue=Math.floor(we*De.width),it=Math.floor(we*De.height);f===void 0&&(f=y(Ue,it));const nt=Q?y(Ue,it):f;return nt.width=Ue,nt.height=it,nt.getContext("2d").drawImage(J,0,0,Ue,it),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+De.width+"x"+De.height+") to ("+Ue+"x"+it+")."),nt}else return"data"in J&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+De.width+"x"+De.height+")."),J;return J}function v(J){return J.generateMipmaps}function w(J){t.generateMipmap(J)}function M(J){return J.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:J.isWebGL3DRenderTarget?t.TEXTURE_3D:J.isWebGLArrayRenderTarget||J.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function C(J,Q,ye,we,De=!1){if(J!==null){if(t[J]!==void 0)return t[J];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+J+"'")}let Ue=Q;if(Q===t.RED&&(ye===t.FLOAT&&(Ue=t.R32F),ye===t.HALF_FLOAT&&(Ue=t.R16F),ye===t.UNSIGNED_BYTE&&(Ue=t.R8)),Q===t.RED_INTEGER&&(ye===t.UNSIGNED_BYTE&&(Ue=t.R8UI),ye===t.UNSIGNED_SHORT&&(Ue=t.R16UI),ye===t.UNSIGNED_INT&&(Ue=t.R32UI),ye===t.BYTE&&(Ue=t.R8I),ye===t.SHORT&&(Ue=t.R16I),ye===t.INT&&(Ue=t.R32I)),Q===t.RG&&(ye===t.FLOAT&&(Ue=t.RG32F),ye===t.HALF_FLOAT&&(Ue=t.RG16F),ye===t.UNSIGNED_BYTE&&(Ue=t.RG8)),Q===t.RG_INTEGER&&(ye===t.UNSIGNED_BYTE&&(Ue=t.RG8UI),ye===t.UNSIGNED_SHORT&&(Ue=t.RG16UI),ye===t.UNSIGNED_INT&&(Ue=t.RG32UI),ye===t.BYTE&&(Ue=t.RG8I),ye===t.SHORT&&(Ue=t.RG16I),ye===t.INT&&(Ue=t.RG32I)),Q===t.RGB_INTEGER&&(ye===t.UNSIGNED_BYTE&&(Ue=t.RGB8UI),ye===t.UNSIGNED_SHORT&&(Ue=t.RGB16UI),ye===t.UNSIGNED_INT&&(Ue=t.RGB32UI),ye===t.BYTE&&(Ue=t.RGB8I),ye===t.SHORT&&(Ue=t.RGB16I),ye===t.INT&&(Ue=t.RGB32I)),Q===t.RGBA_INTEGER&&(ye===t.UNSIGNED_BYTE&&(Ue=t.RGBA8UI),ye===t.UNSIGNED_SHORT&&(Ue=t.RGBA16UI),ye===t.UNSIGNED_INT&&(Ue=t.RGBA32UI),ye===t.BYTE&&(Ue=t.RGBA8I),ye===t.SHORT&&(Ue=t.RGBA16I),ye===t.INT&&(Ue=t.RGBA32I)),Q===t.RGB&&ye===t.UNSIGNED_INT_5_9_9_9_REV&&(Ue=t.RGB9_E5),Q===t.RGBA){const it=De?Cx:kn.getTransfer(we);ye===t.FLOAT&&(Ue=t.RGBA32F),ye===t.HALF_FLOAT&&(Ue=t.RGBA16F),ye===t.UNSIGNED_BYTE&&(Ue=it===er?t.SRGB8_ALPHA8:t.RGBA8),ye===t.UNSIGNED_SHORT_4_4_4_4&&(Ue=t.RGBA4),ye===t.UNSIGNED_SHORT_5_5_5_1&&(Ue=t.RGB5_A1)}return(Ue===t.R16F||Ue===t.R32F||Ue===t.RG16F||Ue===t.RG32F||Ue===t.RGBA16F||Ue===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Ue}function N(J,Q){let ye;return J?Q===null||Q===cd||Q===Ep?ye=t.DEPTH24_STENCIL8:Q===Xs?ye=t.DEPTH32F_STENCIL8:Q===Bg&&(ye=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Q===null||Q===cd||Q===Ep?ye=t.DEPTH_COMPONENT24:Q===Xs?ye=t.DEPTH_COMPONENT32F:Q===Bg&&(ye=t.DEPTH_COMPONENT16),ye}function P(J,Q){return v(J)===!0||J.isFramebufferTexture&&J.minFilter!==Ra&&J.minFilter!==gi?Math.log2(Math.max(Q.width,Q.height))+1:J.mipmaps!==void 0&&J.mipmaps.length>0?J.mipmaps.length:J.isCompressedTexture&&Array.isArray(J.image)?Q.mipmaps.length:1}function R(J){const Q=J.target;Q.removeEventListener("dispose",R),U(Q),Q.isVideoTexture&&d.delete(Q)}function k(J){const Q=J.target;Q.removeEventListener("dispose",k),L(Q)}function U(J){const Q=r.get(J);if(Q.__webglInit===void 0)return;const ye=J.source,we=p.get(ye);if(we){const De=we[Q.__cacheKey];De.usedTimes--,De.usedTimes===0&&I(J),Object.keys(we).length===0&&p.delete(ye)}r.remove(J)}function I(J){const Q=r.get(J);t.deleteTexture(Q.__webglTexture);const ye=J.source,we=p.get(ye);delete we[Q.__cacheKey],s.memory.textures--}function L(J){const Q=r.get(J);if(J.depthTexture&&(J.depthTexture.dispose(),r.remove(J.depthTexture)),J.isWebGLCubeRenderTarget)for(let we=0;we<6;we++){if(Array.isArray(Q.__webglFramebuffer[we]))for(let De=0;De<Q.__webglFramebuffer[we].length;De++)t.deleteFramebuffer(Q.__webglFramebuffer[we][De]);else t.deleteFramebuffer(Q.__webglFramebuffer[we]);Q.__webglDepthbuffer&&t.deleteRenderbuffer(Q.__webglDepthbuffer[we])}else{if(Array.isArray(Q.__webglFramebuffer))for(let we=0;we<Q.__webglFramebuffer.length;we++)t.deleteFramebuffer(Q.__webglFramebuffer[we]);else t.deleteFramebuffer(Q.__webglFramebuffer);if(Q.__webglDepthbuffer&&t.deleteRenderbuffer(Q.__webglDepthbuffer),Q.__webglMultisampledFramebuffer&&t.deleteFramebuffer(Q.__webglMultisampledFramebuffer),Q.__webglColorRenderbuffer)for(let we=0;we<Q.__webglColorRenderbuffer.length;we++)Q.__webglColorRenderbuffer[we]&&t.deleteRenderbuffer(Q.__webglColorRenderbuffer[we]);Q.__webglDepthRenderbuffer&&t.deleteRenderbuffer(Q.__webglDepthRenderbuffer)}const ye=J.textures;for(let we=0,De=ye.length;we<De;we++){const Ue=r.get(ye[we]);Ue.__webglTexture&&(t.deleteTexture(Ue.__webglTexture),s.memory.textures--),r.remove(ye[we])}r.remove(J)}let z=0;function O(){z=0}function q(){const J=z;return J>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+J+" texture units while this GPU supports only "+i.maxTextures),z+=1,J}function Y(J){const Q=[];return Q.push(J.wrapS),Q.push(J.wrapT),Q.push(J.wrapR||0),Q.push(J.magFilter),Q.push(J.minFilter),Q.push(J.anisotropy),Q.push(J.internalFormat),Q.push(J.format),Q.push(J.type),Q.push(J.generateMipmaps),Q.push(J.premultiplyAlpha),Q.push(J.flipY),Q.push(J.unpackAlignment),Q.push(J.colorSpace),Q.join()}function X(J,Q){const ye=r.get(J);if(J.isVideoTexture&&Ce(J),J.isRenderTargetTexture===!1&&J.version>0&&ye.__version!==J.version){const we=J.image;if(we===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(we.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{re(ye,J,Q);return}}n.bindTexture(t.TEXTURE_2D,ye.__webglTexture,t.TEXTURE0+Q)}function ee(J,Q){const ye=r.get(J);if(J.version>0&&ye.__version!==J.version){re(ye,J,Q);return}n.bindTexture(t.TEXTURE_2D_ARRAY,ye.__webglTexture,t.TEXTURE0+Q)}function se(J,Q){const ye=r.get(J);if(J.version>0&&ye.__version!==J.version){re(ye,J,Q);return}n.bindTexture(t.TEXTURE_3D,ye.__webglTexture,t.TEXTURE0+Q)}function W(J,Q){const ye=r.get(J);if(J.version>0&&ye.__version!==J.version){de(ye,J,Q);return}n.bindTexture(t.TEXTURE_CUBE_MAP,ye.__webglTexture,t.TEXTURE0+Q)}const $={[Ry]:t.REPEAT,[Jo]:t.CLAMP_TO_EDGE,[Dy]:t.MIRRORED_REPEAT},G={[Ra]:t.NEAREST,[DD]:t.NEAREST_MIPMAP_NEAREST,[cg]:t.NEAREST_MIPMAP_LINEAR,[gi]:t.LINEAR,[Y0]:t.LINEAR_MIPMAP_NEAREST,[Oc]:t.LINEAR_MIPMAP_LINEAR},j={[B7]:t.NEVER,[$7]:t.ALWAYS,[z7]:t.LESS,[WD]:t.LEQUAL,[H7]:t.EQUAL,[G7]:t.GEQUAL,[V7]:t.GREATER,[W7]:t.NOTEQUAL};function B(J,Q){if(Q.type===Xs&&e.has("OES_texture_float_linear")===!1&&(Q.magFilter===gi||Q.magFilter===Y0||Q.magFilter===cg||Q.magFilter===Oc||Q.minFilter===gi||Q.minFilter===Y0||Q.minFilter===cg||Q.minFilter===Oc)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(J,t.TEXTURE_WRAP_S,$[Q.wrapS]),t.texParameteri(J,t.TEXTURE_WRAP_T,$[Q.wrapT]),(J===t.TEXTURE_3D||J===t.TEXTURE_2D_ARRAY)&&t.texParameteri(J,t.TEXTURE_WRAP_R,$[Q.wrapR]),t.texParameteri(J,t.TEXTURE_MAG_FILTER,G[Q.magFilter]),t.texParameteri(J,t.TEXTURE_MIN_FILTER,G[Q.minFilter]),Q.compareFunction&&(t.texParameteri(J,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(J,t.TEXTURE_COMPARE_FUNC,j[Q.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Q.magFilter===Ra||Q.minFilter!==cg&&Q.minFilter!==Oc||Q.type===Xs&&e.has("OES_texture_float_linear")===!1)return;if(Q.anisotropy>1||r.get(Q).__currentAnisotropy){const ye=e.get("EXT_texture_filter_anisotropic");t.texParameterf(J,ye.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Q.anisotropy,i.getMaxAnisotropy())),r.get(Q).__currentAnisotropy=Q.anisotropy}}}function ae(J,Q){let ye=!1;J.__webglInit===void 0&&(J.__webglInit=!0,Q.addEventListener("dispose",R));const we=Q.source;let De=p.get(we);De===void 0&&(De={},p.set(we,De));const Ue=Y(Q);if(Ue!==J.__cacheKey){De[Ue]===void 0&&(De[Ue]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,ye=!0),De[Ue].usedTimes++;const it=De[J.__cacheKey];it!==void 0&&(De[J.__cacheKey].usedTimes--,it.usedTimes===0&&I(Q)),J.__cacheKey=Ue,J.__webglTexture=De[Ue].texture}return ye}function re(J,Q,ye){let we=t.TEXTURE_2D;(Q.isDataArrayTexture||Q.isCompressedArrayTexture)&&(we=t.TEXTURE_2D_ARRAY),Q.isData3DTexture&&(we=t.TEXTURE_3D);const De=ae(J,Q),Ue=Q.source;n.bindTexture(we,J.__webglTexture,t.TEXTURE0+ye);const it=r.get(Ue);if(Ue.version!==it.__version||De===!0){n.activeTexture(t.TEXTURE0+ye);const nt=kn.getPrimaries(kn.workingColorSpace),ot=Q.colorSpace===zu?null:kn.getPrimaries(Q.colorSpace),xt=Q.colorSpace===zu||nt===ot?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Q.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,Q.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,xt);let rt=_(Q.image,!1,i.maxTextureSize);rt=ct(Q,rt);const be=a.convert(Q.format,Q.colorSpace),Je=a.convert(Q.type);let Qe=C(Q.internalFormat,be,Je,Q.colorSpace,Q.isVideoTexture);B(we,Q);let Oe;const pe=Q.mipmaps,je=Q.isVideoTexture!==!0,ut=it.__version===void 0||De===!0,ge=Ue.dataReady,Be=P(Q,rt);if(Q.isDepthTexture)Qe=N(Q.format===Mp,Q.type),ut&&(je?n.texStorage2D(t.TEXTURE_2D,1,Qe,rt.width,rt.height):n.texImage2D(t.TEXTURE_2D,0,Qe,rt.width,rt.height,0,be,Je,null));else if(Q.isDataTexture)if(pe.length>0){je&&ut&&n.texStorage2D(t.TEXTURE_2D,Be,Qe,pe[0].width,pe[0].height);for(let Pe=0,Ke=pe.length;Pe<Ke;Pe++)Oe=pe[Pe],je?ge&&n.texSubImage2D(t.TEXTURE_2D,Pe,0,0,Oe.width,Oe.height,be,Je,Oe.data):n.texImage2D(t.TEXTURE_2D,Pe,Qe,Oe.width,Oe.height,0,be,Je,Oe.data);Q.generateMipmaps=!1}else je?(ut&&n.texStorage2D(t.TEXTURE_2D,Be,Qe,rt.width,rt.height),ge&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,rt.width,rt.height,be,Je,rt.data)):n.texImage2D(t.TEXTURE_2D,0,Qe,rt.width,rt.height,0,be,Je,rt.data);else if(Q.isCompressedTexture)if(Q.isCompressedArrayTexture){je&&ut&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Be,Qe,pe[0].width,pe[0].height,rt.depth);for(let Pe=0,Ke=pe.length;Pe<Ke;Pe++)if(Oe=pe[Pe],Q.format!==Ja)if(be!==null)if(je){if(ge)if(Q.layerUpdates.size>0){const te=VT(Oe.width,Oe.height,Q.format,Q.type);for(const Le of Q.layerUpdates){const dt=Oe.data.subarray(Le*te/Oe.data.BYTES_PER_ELEMENT,(Le+1)*te/Oe.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Pe,0,0,Le,Oe.width,Oe.height,1,be,dt)}Q.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Pe,0,0,0,Oe.width,Oe.height,rt.depth,be,Oe.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Pe,Qe,Oe.width,Oe.height,rt.depth,0,Oe.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else je?ge&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,Pe,0,0,0,Oe.width,Oe.height,rt.depth,be,Je,Oe.data):n.texImage3D(t.TEXTURE_2D_ARRAY,Pe,Qe,Oe.width,Oe.height,rt.depth,0,be,Je,Oe.data)}else{je&&ut&&n.texStorage2D(t.TEXTURE_2D,Be,Qe,pe[0].width,pe[0].height);for(let Pe=0,Ke=pe.length;Pe<Ke;Pe++)Oe=pe[Pe],Q.format!==Ja?be!==null?je?ge&&n.compressedTexSubImage2D(t.TEXTURE_2D,Pe,0,0,Oe.width,Oe.height,be,Oe.data):n.compressedTexImage2D(t.TEXTURE_2D,Pe,Qe,Oe.width,Oe.height,0,Oe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):je?ge&&n.texSubImage2D(t.TEXTURE_2D,Pe,0,0,Oe.width,Oe.height,be,Je,Oe.data):n.texImage2D(t.TEXTURE_2D,Pe,Qe,Oe.width,Oe.height,0,be,Je,Oe.data)}else if(Q.isDataArrayTexture)if(je){if(ut&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Be,Qe,rt.width,rt.height,rt.depth),ge)if(Q.layerUpdates.size>0){const Pe=VT(rt.width,rt.height,Q.format,Q.type);for(const Ke of Q.layerUpdates){const te=rt.data.subarray(Ke*Pe/rt.data.BYTES_PER_ELEMENT,(Ke+1)*Pe/rt.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,Ke,rt.width,rt.height,1,be,Je,te)}Q.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,rt.width,rt.height,rt.depth,be,Je,rt.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,Qe,rt.width,rt.height,rt.depth,0,be,Je,rt.data);else if(Q.isData3DTexture)je?(ut&&n.texStorage3D(t.TEXTURE_3D,Be,Qe,rt.width,rt.height,rt.depth),ge&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,rt.width,rt.height,rt.depth,be,Je,rt.data)):n.texImage3D(t.TEXTURE_3D,0,Qe,rt.width,rt.height,rt.depth,0,be,Je,rt.data);else if(Q.isFramebufferTexture){if(ut)if(je)n.texStorage2D(t.TEXTURE_2D,Be,Qe,rt.width,rt.height);else{let Pe=rt.width,Ke=rt.height;for(let te=0;te<Be;te++)n.texImage2D(t.TEXTURE_2D,te,Qe,Pe,Ke,0,be,Je,null),Pe>>=1,Ke>>=1}}else if(pe.length>0){if(je&&ut){const Pe=$e(pe[0]);n.texStorage2D(t.TEXTURE_2D,Be,Qe,Pe.width,Pe.height)}for(let Pe=0,Ke=pe.length;Pe<Ke;Pe++)Oe=pe[Pe],je?ge&&n.texSubImage2D(t.TEXTURE_2D,Pe,0,0,be,Je,Oe):n.texImage2D(t.TEXTURE_2D,Pe,Qe,be,Je,Oe);Q.generateMipmaps=!1}else if(je){if(ut){const Pe=$e(rt);n.texStorage2D(t.TEXTURE_2D,Be,Qe,Pe.width,Pe.height)}ge&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,be,Je,rt)}else n.texImage2D(t.TEXTURE_2D,0,Qe,be,Je,rt);v(Q)&&w(we),it.__version=Ue.version,Q.onUpdate&&Q.onUpdate(Q)}J.__version=Q.version}function de(J,Q,ye){if(Q.image.length!==6)return;const we=ae(J,Q),De=Q.source;n.bindTexture(t.TEXTURE_CUBE_MAP,J.__webglTexture,t.TEXTURE0+ye);const Ue=r.get(De);if(De.version!==Ue.__version||we===!0){n.activeTexture(t.TEXTURE0+ye);const it=kn.getPrimaries(kn.workingColorSpace),nt=Q.colorSpace===zu?null:kn.getPrimaries(Q.colorSpace),ot=Q.colorSpace===zu||it===nt?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Q.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,Q.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,ot);const xt=Q.isCompressedTexture||Q.image[0].isCompressedTexture,rt=Q.image[0]&&Q.image[0].isDataTexture,be=[];for(let Ke=0;Ke<6;Ke++)!xt&&!rt?be[Ke]=_(Q.image[Ke],!0,i.maxCubemapSize):be[Ke]=rt?Q.image[Ke].image:Q.image[Ke],be[Ke]=ct(Q,be[Ke]);const Je=be[0],Qe=a.convert(Q.format,Q.colorSpace),Oe=a.convert(Q.type),pe=C(Q.internalFormat,Qe,Oe,Q.colorSpace),je=Q.isVideoTexture!==!0,ut=Ue.__version===void 0||we===!0,ge=De.dataReady;let Be=P(Q,Je);B(t.TEXTURE_CUBE_MAP,Q);let Pe;if(xt){je&&ut&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Be,pe,Je.width,Je.height);for(let Ke=0;Ke<6;Ke++){Pe=be[Ke].mipmaps;for(let te=0;te<Pe.length;te++){const Le=Pe[te];Q.format!==Ja?Qe!==null?je?ge&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,te,0,0,Le.width,Le.height,Qe,Le.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,te,pe,Le.width,Le.height,0,Le.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):je?ge&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,te,0,0,Le.width,Le.height,Qe,Oe,Le.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,te,pe,Le.width,Le.height,0,Qe,Oe,Le.data)}}}else{if(Pe=Q.mipmaps,je&&ut){Pe.length>0&&Be++;const Ke=$e(be[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,Be,pe,Ke.width,Ke.height)}for(let Ke=0;Ke<6;Ke++)if(rt){je?ge&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0,0,0,be[Ke].width,be[Ke].height,Qe,Oe,be[Ke].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0,pe,be[Ke].width,be[Ke].height,0,Qe,Oe,be[Ke].data);for(let te=0;te<Pe.length;te++){const dt=Pe[te].image[Ke].image;je?ge&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,te+1,0,0,dt.width,dt.height,Qe,Oe,dt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,te+1,pe,dt.width,dt.height,0,Qe,Oe,dt.data)}}else{je?ge&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0,0,0,Qe,Oe,be[Ke]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0,pe,Qe,Oe,be[Ke]);for(let te=0;te<Pe.length;te++){const Le=Pe[te];je?ge&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,te+1,0,0,Qe,Oe,Le.image[Ke]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,te+1,pe,Qe,Oe,Le.image[Ke])}}}v(Q)&&w(t.TEXTURE_CUBE_MAP),Ue.__version=De.version,Q.onUpdate&&Q.onUpdate(Q)}J.__version=Q.version}function ce(J,Q,ye,we,De,Ue){const it=a.convert(ye.format,ye.colorSpace),nt=a.convert(ye.type),ot=C(ye.internalFormat,it,nt,ye.colorSpace),xt=r.get(Q),rt=r.get(ye);if(rt.__renderTarget=Q,!xt.__hasExternalTextures){const be=Math.max(1,Q.width>>Ue),Je=Math.max(1,Q.height>>Ue);De===t.TEXTURE_3D||De===t.TEXTURE_2D_ARRAY?n.texImage3D(De,Ue,ot,be,Je,Q.depth,0,it,nt,null):n.texImage2D(De,Ue,ot,be,Je,0,it,nt,null)}n.bindFramebuffer(t.FRAMEBUFFER,J),st(Q)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,we,De,rt.__webglTexture,0,ke(Q)):(De===t.TEXTURE_2D||De>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&De<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,we,De,rt.__webglTexture,Ue),n.bindFramebuffer(t.FRAMEBUFFER,null)}function ie(J,Q,ye){if(t.bindRenderbuffer(t.RENDERBUFFER,J),Q.depthBuffer){const we=Q.depthTexture,De=we&&we.isDepthTexture?we.type:null,Ue=N(Q.stencilBuffer,De),it=Q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,nt=ke(Q);st(Q)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,nt,Ue,Q.width,Q.height):ye?t.renderbufferStorageMultisample(t.RENDERBUFFER,nt,Ue,Q.width,Q.height):t.renderbufferStorage(t.RENDERBUFFER,Ue,Q.width,Q.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,it,t.RENDERBUFFER,J)}else{const we=Q.textures;for(let De=0;De<we.length;De++){const Ue=we[De],it=a.convert(Ue.format,Ue.colorSpace),nt=a.convert(Ue.type),ot=C(Ue.internalFormat,it,nt,Ue.colorSpace),xt=ke(Q);ye&&st(Q)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,xt,ot,Q.width,Q.height):st(Q)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,xt,ot,Q.width,Q.height):t.renderbufferStorage(t.RENDERBUFFER,ot,Q.width,Q.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function le(J,Q){if(Q&&Q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,J),!(Q.depthTexture&&Q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const we=r.get(Q.depthTexture);we.__renderTarget=Q,(!we.__webglTexture||Q.depthTexture.image.width!==Q.width||Q.depthTexture.image.height!==Q.height)&&(Q.depthTexture.image.width=Q.width,Q.depthTexture.image.height=Q.height,Q.depthTexture.needsUpdate=!0),X(Q.depthTexture,0);const De=we.__webglTexture,Ue=ke(Q);if(Q.depthTexture.format===ip)st(Q)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,De,0,Ue):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,De,0);else if(Q.depthTexture.format===Mp)st(Q)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,De,0,Ue):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,De,0);else throw new Error("Unknown depthTexture format")}function fe(J){const Q=r.get(J),ye=J.isWebGLCubeRenderTarget===!0;if(Q.__boundDepthTexture!==J.depthTexture){const we=J.depthTexture;if(Q.__depthDisposeCallback&&Q.__depthDisposeCallback(),we){const De=()=>{delete Q.__boundDepthTexture,delete Q.__depthDisposeCallback,we.removeEventListener("dispose",De)};we.addEventListener("dispose",De),Q.__depthDisposeCallback=De}Q.__boundDepthTexture=we}if(J.depthTexture&&!Q.__autoAllocateDepthBuffer){if(ye)throw new Error("target.depthTexture not supported in Cube render targets");le(Q.__webglFramebuffer,J)}else if(ye){Q.__webglDepthbuffer=[];for(let we=0;we<6;we++)if(n.bindFramebuffer(t.FRAMEBUFFER,Q.__webglFramebuffer[we]),Q.__webglDepthbuffer[we]===void 0)Q.__webglDepthbuffer[we]=t.createRenderbuffer(),ie(Q.__webglDepthbuffer[we],J,!1);else{const De=J.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ue=Q.__webglDepthbuffer[we];t.bindRenderbuffer(t.RENDERBUFFER,Ue),t.framebufferRenderbuffer(t.FRAMEBUFFER,De,t.RENDERBUFFER,Ue)}}else if(n.bindFramebuffer(t.FRAMEBUFFER,Q.__webglFramebuffer),Q.__webglDepthbuffer===void 0)Q.__webglDepthbuffer=t.createRenderbuffer(),ie(Q.__webglDepthbuffer,J,!1);else{const we=J.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,De=Q.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,De),t.framebufferRenderbuffer(t.FRAMEBUFFER,we,t.RENDERBUFFER,De)}n.bindFramebuffer(t.FRAMEBUFFER,null)}function Ne(J,Q,ye){const we=r.get(J);Q!==void 0&&ce(we.__webglFramebuffer,J,J.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),ye!==void 0&&fe(J)}function Se(J){const Q=J.texture,ye=r.get(J),we=r.get(Q);J.addEventListener("dispose",k);const De=J.textures,Ue=J.isWebGLCubeRenderTarget===!0,it=De.length>1;if(it||(we.__webglTexture===void 0&&(we.__webglTexture=t.createTexture()),we.__version=Q.version,s.memory.textures++),Ue){ye.__webglFramebuffer=[];for(let nt=0;nt<6;nt++)if(Q.mipmaps&&Q.mipmaps.length>0){ye.__webglFramebuffer[nt]=[];for(let ot=0;ot<Q.mipmaps.length;ot++)ye.__webglFramebuffer[nt][ot]=t.createFramebuffer()}else ye.__webglFramebuffer[nt]=t.createFramebuffer()}else{if(Q.mipmaps&&Q.mipmaps.length>0){ye.__webglFramebuffer=[];for(let nt=0;nt<Q.mipmaps.length;nt++)ye.__webglFramebuffer[nt]=t.createFramebuffer()}else ye.__webglFramebuffer=t.createFramebuffer();if(it)for(let nt=0,ot=De.length;nt<ot;nt++){const xt=r.get(De[nt]);xt.__webglTexture===void 0&&(xt.__webglTexture=t.createTexture(),s.memory.textures++)}if(J.samples>0&&st(J)===!1){ye.__webglMultisampledFramebuffer=t.createFramebuffer(),ye.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,ye.__webglMultisampledFramebuffer);for(let nt=0;nt<De.length;nt++){const ot=De[nt];ye.__webglColorRenderbuffer[nt]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,ye.__webglColorRenderbuffer[nt]);const xt=a.convert(ot.format,ot.colorSpace),rt=a.convert(ot.type),be=C(ot.internalFormat,xt,rt,ot.colorSpace,J.isXRRenderTarget===!0),Je=ke(J);t.renderbufferStorageMultisample(t.RENDERBUFFER,Je,be,J.width,J.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+nt,t.RENDERBUFFER,ye.__webglColorRenderbuffer[nt])}t.bindRenderbuffer(t.RENDERBUFFER,null),J.depthBuffer&&(ye.__webglDepthRenderbuffer=t.createRenderbuffer(),ie(ye.__webglDepthRenderbuffer,J,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Ue){n.bindTexture(t.TEXTURE_CUBE_MAP,we.__webglTexture),B(t.TEXTURE_CUBE_MAP,Q);for(let nt=0;nt<6;nt++)if(Q.mipmaps&&Q.mipmaps.length>0)for(let ot=0;ot<Q.mipmaps.length;ot++)ce(ye.__webglFramebuffer[nt][ot],J,Q,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+nt,ot);else ce(ye.__webglFramebuffer[nt],J,Q,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+nt,0);v(Q)&&w(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(it){for(let nt=0,ot=De.length;nt<ot;nt++){const xt=De[nt],rt=r.get(xt);n.bindTexture(t.TEXTURE_2D,rt.__webglTexture),B(t.TEXTURE_2D,xt),ce(ye.__webglFramebuffer,J,xt,t.COLOR_ATTACHMENT0+nt,t.TEXTURE_2D,0),v(xt)&&w(t.TEXTURE_2D)}n.unbindTexture()}else{let nt=t.TEXTURE_2D;if((J.isWebGL3DRenderTarget||J.isWebGLArrayRenderTarget)&&(nt=J.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(nt,we.__webglTexture),B(nt,Q),Q.mipmaps&&Q.mipmaps.length>0)for(let ot=0;ot<Q.mipmaps.length;ot++)ce(ye.__webglFramebuffer[ot],J,Q,t.COLOR_ATTACHMENT0,nt,ot);else ce(ye.__webglFramebuffer,J,Q,t.COLOR_ATTACHMENT0,nt,0);v(Q)&&w(nt),n.unbindTexture()}J.depthBuffer&&fe(J)}function Z(J){const Q=J.textures;for(let ye=0,we=Q.length;ye<we;ye++){const De=Q[ye];if(v(De)){const Ue=M(J),it=r.get(De).__webglTexture;n.bindTexture(Ue,it),w(Ue),n.unbindTexture()}}}const xe=[],oe=[];function tt(J){if(J.samples>0){if(st(J)===!1){const Q=J.textures,ye=J.width,we=J.height;let De=t.COLOR_BUFFER_BIT;const Ue=J.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,it=r.get(J),nt=Q.length>1;if(nt)for(let ot=0;ot<Q.length;ot++)n.bindFramebuffer(t.FRAMEBUFFER,it.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ot,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,it.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+ot,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,it.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,it.__webglFramebuffer);for(let ot=0;ot<Q.length;ot++){if(J.resolveDepthBuffer&&(J.depthBuffer&&(De|=t.DEPTH_BUFFER_BIT),J.stencilBuffer&&J.resolveStencilBuffer&&(De|=t.STENCIL_BUFFER_BIT)),nt){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,it.__webglColorRenderbuffer[ot]);const xt=r.get(Q[ot]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,xt,0)}t.blitFramebuffer(0,0,ye,we,0,0,ye,we,De,t.NEAREST),l===!0&&(xe.length=0,oe.length=0,xe.push(t.COLOR_ATTACHMENT0+ot),J.depthBuffer&&J.resolveDepthBuffer===!1&&(xe.push(Ue),oe.push(Ue),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,oe)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,xe))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),nt)for(let ot=0;ot<Q.length;ot++){n.bindFramebuffer(t.FRAMEBUFFER,it.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ot,t.RENDERBUFFER,it.__webglColorRenderbuffer[ot]);const xt=r.get(Q[ot]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,it.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+ot,t.TEXTURE_2D,xt,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,it.__webglMultisampledFramebuffer)}else if(J.depthBuffer&&J.resolveDepthBuffer===!1&&l){const Q=J.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Q])}}}function ke(J){return Math.min(i.maxSamples,J.samples)}function st(J){const Q=r.get(J);return J.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Q.__useRenderToTexture!==!1}function Ce(J){const Q=s.render.frame;d.get(J)!==Q&&(d.set(J,Q),J.update())}function ct(J,Q){const ye=J.colorSpace,we=J.format,De=J.type;return J.isCompressedTexture===!0||J.isVideoTexture===!0||ye!==kp&&ye!==zu&&(kn.getTransfer(ye)===er?(we!==Ja||De!==Xl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ye)),Q}function $e(J){return typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement?(u.width=J.naturalWidth||J.width,u.height=J.naturalHeight||J.height):typeof VideoFrame<"u"&&J instanceof VideoFrame?(u.width=J.displayWidth,u.height=J.displayHeight):(u.width=J.width,u.height=J.height),u}this.allocateTextureUnit=q,this.resetTextureUnits=O,this.setTexture2D=X,this.setTexture2DArray=ee,this.setTexture3D=se,this.setTextureCube=W,this.rebindTextures=Ne,this.setupRenderTarget=Se,this.updateRenderTargetMipmap=Z,this.updateMultisampleRenderTarget=tt,this.setupDepthRenderbuffer=fe,this.setupFrameBufferTexture=ce,this.useMultisampledRTT=st}function o9(t,e){function n(r,i=zu){let a;const s=kn.getTransfer(i);if(r===Xl)return t.UNSIGNED_BYTE;if(r===H2)return t.UNSIGNED_SHORT_4_4_4_4;if(r===V2)return t.UNSIGNED_SHORT_5_5_5_1;if(r===OD)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===kD)return t.BYTE;if(r===jD)return t.SHORT;if(r===Bg)return t.UNSIGNED_SHORT;if(r===z2)return t.INT;if(r===cd)return t.UNSIGNED_INT;if(r===Xs)return t.FLOAT;if(r===lv)return t.HALF_FLOAT;if(r===ID)return t.ALPHA;if(r===LD)return t.RGB;if(r===Ja)return t.RGBA;if(r===FD)return t.LUMINANCE;if(r===UD)return t.LUMINANCE_ALPHA;if(r===ip)return t.DEPTH_COMPONENT;if(r===Mp)return t.DEPTH_STENCIL;if(r===W2)return t.RED;if(r===Mx)return t.RED_INTEGER;if(r===BD)return t.RG;if(r===G2)return t.RG_INTEGER;if(r===$2)return t.RGBA_INTEGER;if(r===q0||r===X0||r===K0||r===Z0)if(s===er)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(r===q0)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===X0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===K0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Z0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(r===q0)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===X0)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===K0)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Z0)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===Z1||r===Q1||r===J1||r===eS)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(r===Z1)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===Q1)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===J1)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===eS)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===tS||r===nS||r===rS)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(r===tS||r===nS)return s===er?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(r===rS)return s===er?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===iS||r===aS||r===sS||r===oS||r===lS||r===cS||r===uS||r===dS||r===fS||r===hS||r===pS||r===mS||r===gS||r===vS)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(r===iS)return s===er?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===aS)return s===er?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===sS)return s===er?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===oS)return s===er?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===lS)return s===er?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===cS)return s===er?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===uS)return s===er?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===dS)return s===er?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===fS)return s===er?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===hS)return s===er?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===pS)return s===er?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===mS)return s===er?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===gS)return s===er?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===vS)return s===er?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===Q0||r===yS||r===xS)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(r===Q0)return s===er?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===yS)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===xS)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===zD||r===bS||r===_S||r===wS)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(r===Q0)return a.COMPRESSED_RED_RGTC1_EXT;if(r===bS)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===_S)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===wS)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Ep?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}class l9 extends hi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class fg extends Un{constructor(){super(),this.isGroup=!0,this.type="Group"}}const wNe={type:"move"};class TN{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new fg,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new fg,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new he,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new he),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new fg,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new he,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new he),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,a=null,s=null;const o=this._targetRay,l=this._grip,u=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(const _ of e.hand.values()){const v=n.getJointPose(_,r),w=this._getHandJoint(u,_);v!==null&&(w.matrix.fromArray(v.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=v.radius),w.visible=v!==null}const d=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],p=d.position.distanceTo(f.position),m=.02,y=.005;u.inputState.pinching&&p>m+y?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=m-y&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(a=n.getPose(e.gripSpace,r),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&a!==null&&(i=a),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(wNe)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=a!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new fg;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}const SNe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,ENe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class MNe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new Hr,a=e.properties.get(i);a.__webglTexture=n.texture,(n.depthNear!=r.depthNear||n.depthFar!=r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new rl({vertexShader:SNe,fragmentShader:ENe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new Rr(new Sd(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class CNe extends Kc{constructor(e,n){super();const r=this;let i=null,a=1,s=null,o="local-floor",l=1,u=null,d=null,f=null,p=null,m=null,y=null;const _=new MNe,v=n.getContextAttributes();let w=null,M=null;const C=[],N=[],P=new lt;let R=null;const k=new hi;k.viewport=new Sn;const U=new hi;U.viewport=new Sn;const I=[k,U],L=new l9;let z=null,O=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(re){let de=C[re];return de===void 0&&(de=new TN,C[re]=de),de.getTargetRaySpace()},this.getControllerGrip=function(re){let de=C[re];return de===void 0&&(de=new TN,C[re]=de),de.getGripSpace()},this.getHand=function(re){let de=C[re];return de===void 0&&(de=new TN,C[re]=de),de.getHandSpace()};function q(re){const de=N.indexOf(re.inputSource);if(de===-1)return;const ce=C[de];ce!==void 0&&(ce.update(re.inputSource,re.frame,u||s),ce.dispatchEvent({type:re.type,data:re.inputSource}))}function Y(){i.removeEventListener("select",q),i.removeEventListener("selectstart",q),i.removeEventListener("selectend",q),i.removeEventListener("squeeze",q),i.removeEventListener("squeezestart",q),i.removeEventListener("squeezeend",q),i.removeEventListener("end",Y),i.removeEventListener("inputsourceschange",X);for(let re=0;re<C.length;re++){const de=N[re];de!==null&&(N[re]=null,C[re].disconnect(de))}z=null,O=null,_.reset(),e.setRenderTarget(w),m=null,p=null,f=null,i=null,M=null,ae.stop(),r.isPresenting=!1,e.setPixelRatio(R),e.setSize(P.width,P.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(re){a=re,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(re){o=re,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(re){u=re},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return f},this.getFrame=function(){return y},this.getSession=function(){return i},this.setSession=async function(re){if(i=re,i!==null){if(w=e.getRenderTarget(),i.addEventListener("select",q),i.addEventListener("selectstart",q),i.addEventListener("selectend",q),i.addEventListener("squeeze",q),i.addEventListener("squeezestart",q),i.addEventListener("squeezeend",q),i.addEventListener("end",Y),i.addEventListener("inputsourceschange",X),v.xrCompatible!==!0&&await n.makeXRCompatible(),R=e.getPixelRatio(),e.getSize(P),i.renderState.layers===void 0){const de={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:a};m=new XRWebGLLayer(i,n,de),i.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),M=new Kl(m.framebufferWidth,m.framebufferHeight,{format:Ja,type:Xl,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let de=null,ce=null,ie=null;v.depth&&(ie=v.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,de=v.stencil?Mp:ip,ce=v.stencil?Ep:cd);const le={colorFormat:n.RGBA8,depthFormat:ie,scaleFactor:a};f=new XRWebGLBinding(i,n),p=f.createProjectionLayer(le),i.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),M=new Kl(p.textureWidth,p.textureHeight,{format:Ja,type:Xl,depthTexture:new KD(p.textureWidth,p.textureHeight,ce,void 0,void 0,void 0,void 0,void 0,void 0,de),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}M.isXRRenderTarget=!0,this.setFoveation(l),u=null,s=await i.requestReferenceSpace(o),ae.setContext(i),ae.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return _.getDepthTexture()};function X(re){for(let de=0;de<re.removed.length;de++){const ce=re.removed[de],ie=N.indexOf(ce);ie>=0&&(N[ie]=null,C[ie].disconnect(ce))}for(let de=0;de<re.added.length;de++){const ce=re.added[de];let ie=N.indexOf(ce);if(ie===-1){for(let fe=0;fe<C.length;fe++)if(fe>=N.length){N.push(ce),ie=fe;break}else if(N[fe]===null){N[fe]=ce,ie=fe;break}if(ie===-1)break}const le=C[ie];le&&le.connect(ce)}}const ee=new he,se=new he;function W(re,de,ce){ee.setFromMatrixPosition(de.matrixWorld),se.setFromMatrixPosition(ce.matrixWorld);const ie=ee.distanceTo(se),le=de.projectionMatrix.elements,fe=ce.projectionMatrix.elements,Ne=le[14]/(le[10]-1),Se=le[14]/(le[10]+1),Z=(le[9]+1)/le[5],xe=(le[9]-1)/le[5],oe=(le[8]-1)/le[0],tt=(fe[8]+1)/fe[0],ke=Ne*oe,st=Ne*tt,Ce=ie/(-oe+tt),ct=Ce*-oe;if(de.matrixWorld.decompose(re.position,re.quaternion,re.scale),re.translateX(ct),re.translateZ(Ce),re.matrixWorld.compose(re.position,re.quaternion,re.scale),re.matrixWorldInverse.copy(re.matrixWorld).invert(),le[10]===-1)re.projectionMatrix.copy(de.projectionMatrix),re.projectionMatrixInverse.copy(de.projectionMatrixInverse);else{const $e=Ne+Ce,J=Se+Ce,Q=ke-ct,ye=st+(ie-ct),we=Z*Se/J*$e,De=xe*Se/J*$e;re.projectionMatrix.makePerspective(Q,ye,we,De,$e,J),re.projectionMatrixInverse.copy(re.projectionMatrix).invert()}}function $(re,de){de===null?re.matrixWorld.copy(re.matrix):re.matrixWorld.multiplyMatrices(de.matrixWorld,re.matrix),re.matrixWorldInverse.copy(re.matrixWorld).invert()}this.updateCamera=function(re){if(i===null)return;let de=re.near,ce=re.far;_.texture!==null&&(_.depthNear>0&&(de=_.depthNear),_.depthFar>0&&(ce=_.depthFar)),L.near=U.near=k.near=de,L.far=U.far=k.far=ce,(z!==L.near||O!==L.far)&&(i.updateRenderState({depthNear:L.near,depthFar:L.far}),z=L.near,O=L.far),k.layers.mask=re.layers.mask|2,U.layers.mask=re.layers.mask|4,L.layers.mask=k.layers.mask|U.layers.mask;const ie=re.parent,le=L.cameras;$(L,ie);for(let fe=0;fe<le.length;fe++)$(le[fe],ie);le.length===2?W(L,k,U):L.projectionMatrix.copy(k.projectionMatrix),G(re,L,ie)};function G(re,de,ce){ce===null?re.matrix.copy(de.matrixWorld):(re.matrix.copy(ce.matrixWorld),re.matrix.invert(),re.matrix.multiply(de.matrixWorld)),re.matrix.decompose(re.position,re.quaternion,re.scale),re.updateMatrixWorld(!0),re.projectionMatrix.copy(de.projectionMatrix),re.projectionMatrixInverse.copy(de.projectionMatrixInverse),re.isPerspectiveCamera&&(re.fov=zg*2*Math.atan(1/re.projectionMatrix.elements[5]),re.zoom=1)}this.getCamera=function(){return L},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(re){l=re,p!==null&&(p.fixedFoveation=re),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=re)},this.hasDepthSensing=function(){return _.texture!==null},this.getDepthSensingMesh=function(){return _.getMesh(L)};let j=null;function B(re,de){if(d=de.getViewerPose(u||s),y=de,d!==null){const ce=d.views;m!==null&&(e.setRenderTargetFramebuffer(M,m.framebuffer),e.setRenderTarget(M));let ie=!1;ce.length!==L.cameras.length&&(L.cameras.length=0,ie=!0);for(let fe=0;fe<ce.length;fe++){const Ne=ce[fe];let Se=null;if(m!==null)Se=m.getViewport(Ne);else{const xe=f.getViewSubImage(p,Ne);Se=xe.viewport,fe===0&&(e.setRenderTargetTextures(M,xe.colorTexture,p.ignoreDepthValues?void 0:xe.depthStencilTexture),e.setRenderTarget(M))}let Z=I[fe];Z===void 0&&(Z=new hi,Z.layers.enable(fe),Z.viewport=new Sn,I[fe]=Z),Z.matrix.fromArray(Ne.transform.matrix),Z.matrix.decompose(Z.position,Z.quaternion,Z.scale),Z.projectionMatrix.fromArray(Ne.projectionMatrix),Z.projectionMatrixInverse.copy(Z.projectionMatrix).invert(),Z.viewport.set(Se.x,Se.y,Se.width,Se.height),fe===0&&(L.matrix.copy(Z.matrix),L.matrix.decompose(L.position,L.quaternion,L.scale)),ie===!0&&L.cameras.push(Z)}const le=i.enabledFeatures;if(le&&le.includes("depth-sensing")){const fe=f.getDepthInformation(ce[0]);fe&&fe.isValid&&fe.texture&&_.init(e,fe,i.renderState)}}for(let ce=0;ce<C.length;ce++){const ie=N[ce],le=C[ce];ie!==null&&le!==void 0&&le.update(ie,de,u||s)}j&&j(re,de),de.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:de}),y=null}const ae=new n9;ae.setAnimationLoop(B),this.setAnimationLoop=function(re){j=re},this.dispose=function(){}}}const xh=new Do,NNe=new rn;function ANe(t,e){function n(v,w){v.matrixAutoUpdate===!0&&v.updateMatrix(),w.value.copy(v.matrix)}function r(v,w){w.color.getRGB(v.fogColor.value,J7(t)),w.isFog?(v.fogNear.value=w.near,v.fogFar.value=w.far):w.isFogExp2&&(v.fogDensity.value=w.density)}function i(v,w,M,C,N){w.isMeshBasicMaterial||w.isMeshLambertMaterial?a(v,w):w.isMeshToonMaterial?(a(v,w),f(v,w)):w.isMeshPhongMaterial?(a(v,w),d(v,w)):w.isMeshStandardMaterial?(a(v,w),p(v,w),w.isMeshPhysicalMaterial&&m(v,w,N)):w.isMeshMatcapMaterial?(a(v,w),y(v,w)):w.isMeshDepthMaterial?a(v,w):w.isMeshDistanceMaterial?(a(v,w),_(v,w)):w.isMeshNormalMaterial?a(v,w):w.isLineBasicMaterial?(s(v,w),w.isLineDashedMaterial&&o(v,w)):w.isPointsMaterial?l(v,w,M,C):w.isSpriteMaterial?u(v,w):w.isShadowMaterial?(v.color.value.copy(w.color),v.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function a(v,w){v.opacity.value=w.opacity,w.color&&v.diffuse.value.copy(w.color),w.emissive&&v.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(v.map.value=w.map,n(w.map,v.mapTransform)),w.alphaMap&&(v.alphaMap.value=w.alphaMap,n(w.alphaMap,v.alphaMapTransform)),w.bumpMap&&(v.bumpMap.value=w.bumpMap,n(w.bumpMap,v.bumpMapTransform),v.bumpScale.value=w.bumpScale,w.side===_s&&(v.bumpScale.value*=-1)),w.normalMap&&(v.normalMap.value=w.normalMap,n(w.normalMap,v.normalMapTransform),v.normalScale.value.copy(w.normalScale),w.side===_s&&v.normalScale.value.negate()),w.displacementMap&&(v.displacementMap.value=w.displacementMap,n(w.displacementMap,v.displacementMapTransform),v.displacementScale.value=w.displacementScale,v.displacementBias.value=w.displacementBias),w.emissiveMap&&(v.emissiveMap.value=w.emissiveMap,n(w.emissiveMap,v.emissiveMapTransform)),w.specularMap&&(v.specularMap.value=w.specularMap,n(w.specularMap,v.specularMapTransform)),w.alphaTest>0&&(v.alphaTest.value=w.alphaTest);const M=e.get(w),C=M.envMap,N=M.envMapRotation;C&&(v.envMap.value=C,xh.copy(N),xh.x*=-1,xh.y*=-1,xh.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(xh.y*=-1,xh.z*=-1),v.envMapRotation.value.setFromMatrix4(NNe.makeRotationFromEuler(xh)),v.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=w.reflectivity,v.ior.value=w.ior,v.refractionRatio.value=w.refractionRatio),w.lightMap&&(v.lightMap.value=w.lightMap,v.lightMapIntensity.value=w.lightMapIntensity,n(w.lightMap,v.lightMapTransform)),w.aoMap&&(v.aoMap.value=w.aoMap,v.aoMapIntensity.value=w.aoMapIntensity,n(w.aoMap,v.aoMapTransform))}function s(v,w){v.diffuse.value.copy(w.color),v.opacity.value=w.opacity,w.map&&(v.map.value=w.map,n(w.map,v.mapTransform))}function o(v,w){v.dashSize.value=w.dashSize,v.totalSize.value=w.dashSize+w.gapSize,v.scale.value=w.scale}function l(v,w,M,C){v.diffuse.value.copy(w.color),v.opacity.value=w.opacity,v.size.value=w.size*M,v.scale.value=C*.5,w.map&&(v.map.value=w.map,n(w.map,v.uvTransform)),w.alphaMap&&(v.alphaMap.value=w.alphaMap,n(w.alphaMap,v.alphaMapTransform)),w.alphaTest>0&&(v.alphaTest.value=w.alphaTest)}function u(v,w){v.diffuse.value.copy(w.color),v.opacity.value=w.opacity,v.rotation.value=w.rotation,w.map&&(v.map.value=w.map,n(w.map,v.mapTransform)),w.alphaMap&&(v.alphaMap.value=w.alphaMap,n(w.alphaMap,v.alphaMapTransform)),w.alphaTest>0&&(v.alphaTest.value=w.alphaTest)}function d(v,w){v.specular.value.copy(w.specular),v.shininess.value=Math.max(w.shininess,1e-4)}function f(v,w){w.gradientMap&&(v.gradientMap.value=w.gradientMap)}function p(v,w){v.metalness.value=w.metalness,w.metalnessMap&&(v.metalnessMap.value=w.metalnessMap,n(w.metalnessMap,v.metalnessMapTransform)),v.roughness.value=w.roughness,w.roughnessMap&&(v.roughnessMap.value=w.roughnessMap,n(w.roughnessMap,v.roughnessMapTransform)),w.envMap&&(v.envMapIntensity.value=w.envMapIntensity)}function m(v,w,M){v.ior.value=w.ior,w.sheen>0&&(v.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),v.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(v.sheenColorMap.value=w.sheenColorMap,n(w.sheenColorMap,v.sheenColorMapTransform)),w.sheenRoughnessMap&&(v.sheenRoughnessMap.value=w.sheenRoughnessMap,n(w.sheenRoughnessMap,v.sheenRoughnessMapTransform))),w.clearcoat>0&&(v.clearcoat.value=w.clearcoat,v.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(v.clearcoatMap.value=w.clearcoatMap,n(w.clearcoatMap,v.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,n(w.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(v.clearcoatNormalMap.value=w.clearcoatNormalMap,n(w.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===_s&&v.clearcoatNormalScale.value.negate())),w.dispersion>0&&(v.dispersion.value=w.dispersion),w.iridescence>0&&(v.iridescence.value=w.iridescence,v.iridescenceIOR.value=w.iridescenceIOR,v.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(v.iridescenceMap.value=w.iridescenceMap,n(w.iridescenceMap,v.iridescenceMapTransform)),w.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=w.iridescenceThicknessMap,n(w.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),w.transmission>0&&(v.transmission.value=w.transmission,v.transmissionSamplerMap.value=M.texture,v.transmissionSamplerSize.value.set(M.width,M.height),w.transmissionMap&&(v.transmissionMap.value=w.transmissionMap,n(w.transmissionMap,v.transmissionMapTransform)),v.thickness.value=w.thickness,w.thicknessMap&&(v.thicknessMap.value=w.thicknessMap,n(w.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=w.attenuationDistance,v.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(v.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(v.anisotropyMap.value=w.anisotropyMap,n(w.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=w.specularIntensity,v.specularColor.value.copy(w.specularColor),w.specularColorMap&&(v.specularColorMap.value=w.specularColorMap,n(w.specularColorMap,v.specularColorMapTransform)),w.specularIntensityMap&&(v.specularIntensityMap.value=w.specularIntensityMap,n(w.specularIntensityMap,v.specularIntensityMapTransform))}function y(v,w){w.matcap&&(v.matcap.value=w.matcap)}function _(v,w){const M=e.get(w).light;v.referencePosition.value.setFromMatrixPosition(M.matrixWorld),v.nearDistance.value=M.shadow.camera.near,v.farDistance.value=M.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function TNe(t,e,n,r){let i={},a={},s=[];const o=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(M,C){const N=C.program;r.uniformBlockBinding(M,N)}function u(M,C){let N=i[M.id];N===void 0&&(y(M),N=d(M),i[M.id]=N,M.addEventListener("dispose",v));const P=C.program;r.updateUBOMapping(M,P);const R=e.render.frame;a[M.id]!==R&&(p(M),a[M.id]=R)}function d(M){const C=f();M.__bindingPointIndex=C;const N=t.createBuffer(),P=M.__size,R=M.usage;return t.bindBuffer(t.UNIFORM_BUFFER,N),t.bufferData(t.UNIFORM_BUFFER,P,R),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,C,N),N}function f(){for(let M=0;M<o;M++)if(s.indexOf(M)===-1)return s.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(M){const C=i[M.id],N=M.uniforms,P=M.__cache;t.bindBuffer(t.UNIFORM_BUFFER,C);for(let R=0,k=N.length;R<k;R++){const U=Array.isArray(N[R])?N[R]:[N[R]];for(let I=0,L=U.length;I<L;I++){const z=U[I];if(m(z,R,I,P)===!0){const O=z.__offset,q=Array.isArray(z.value)?z.value:[z.value];let Y=0;for(let X=0;X<q.length;X++){const ee=q[X],se=_(ee);typeof ee=="number"||typeof ee=="boolean"?(z.__data[0]=ee,t.bufferSubData(t.UNIFORM_BUFFER,O+Y,z.__data)):ee.isMatrix3?(z.__data[0]=ee.elements[0],z.__data[1]=ee.elements[1],z.__data[2]=ee.elements[2],z.__data[3]=0,z.__data[4]=ee.elements[3],z.__data[5]=ee.elements[4],z.__data[6]=ee.elements[5],z.__data[7]=0,z.__data[8]=ee.elements[6],z.__data[9]=ee.elements[7],z.__data[10]=ee.elements[8],z.__data[11]=0):(ee.toArray(z.__data,Y),Y+=se.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,O,z.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function m(M,C,N,P){const R=M.value,k=C+"_"+N;if(P[k]===void 0)return typeof R=="number"||typeof R=="boolean"?P[k]=R:P[k]=R.clone(),!0;{const U=P[k];if(typeof R=="number"||typeof R=="boolean"){if(U!==R)return P[k]=R,!0}else if(U.equals(R)===!1)return U.copy(R),!0}return!1}function y(M){const C=M.uniforms;let N=0;const P=16;for(let k=0,U=C.length;k<U;k++){const I=Array.isArray(C[k])?C[k]:[C[k]];for(let L=0,z=I.length;L<z;L++){const O=I[L],q=Array.isArray(O.value)?O.value:[O.value];for(let Y=0,X=q.length;Y<X;Y++){const ee=q[Y],se=_(ee),W=N%P,$=W%se.boundary,G=W+$;N+=$,G!==0&&P-G<se.storage&&(N+=P-G),O.__data=new Float32Array(se.storage/Float32Array.BYTES_PER_ELEMENT),O.__offset=N,N+=se.storage}}}const R=N%P;return R>0&&(N+=P-R),M.__size=N,M.__cache={},this}function _(M){const C={boundary:0,storage:0};return typeof M=="number"||typeof M=="boolean"?(C.boundary=4,C.storage=4):M.isVector2?(C.boundary=8,C.storage=8):M.isVector3||M.isColor?(C.boundary=16,C.storage=12):M.isVector4?(C.boundary=16,C.storage=16):M.isMatrix3?(C.boundary=48,C.storage=48):M.isMatrix4?(C.boundary=64,C.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),C}function v(M){const C=M.target;C.removeEventListener("dispose",v);const N=s.indexOf(C.__bindingPointIndex);s.splice(N,1),t.deleteBuffer(i[C.id]),delete i[C.id],delete a[C.id]}function w(){for(const M in i)t.deleteBuffer(i[M]);s=[],i={},a={}}return{bind:l,update:u,dispose:w}}class c9{constructor(e={}){const{canvas:n=X7(),context:r=null,depth:i=!0,stencil:a=!1,alpha:s=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:p=!1}=e;this.isWebGLRenderer=!0;let m;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");m=r.getContextAttributes().alpha}else m=s;const y=new Uint32Array(4),_=new Int32Array(4);let v=null,w=null;const M=[],C=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Vs,this.toneMapping=zc,this.toneMappingExposure=1;const N=this;let P=!1,R=0,k=0,U=null,I=-1,L=null;const z=new Sn,O=new Sn;let q=null;const Y=new Ct(0);let X=0,ee=n.width,se=n.height,W=1,$=null,G=null;const j=new Sn(0,0,ee,se),B=new Sn(0,0,ee,se);let ae=!1;const re=new Tx;let de=!1,ce=!1;const ie=new rn,le=new rn,fe=new he,Ne=new Sn,Se={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Z=!1;function xe(){return U===null?W:1}let oe=r;function tt(ue,Ae){return n.getContext(ue,Ae)}try{const ue={alpha:!0,depth:i,stencil:a,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:d,failIfMajorPerformanceCaveat:f};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${Sx}`),n.addEventListener("webglcontextlost",Ke,!1),n.addEventListener("webglcontextrestored",te,!1),n.addEventListener("webglcontextcreationerror",Le,!1),oe===null){const Ae="webgl2";if(oe=tt(Ae,ue),oe===null)throw tt(Ae)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ue){throw console.error("THREE.WebGLRenderer: "+ue.message),ue}let ke,st,Ce,ct,$e,J,Q,ye,we,De,Ue,it,nt,ot,xt,rt,be,Je,Qe,Oe,pe,je,ut,ge;function Be(){ke=new OMe(oe),ke.init(),je=new o9(oe,ke),st=new TMe(oe,ke,e,je),Ce=new mNe(oe,ke),st.reverseDepthBuffer&&p&&Ce.buffers.depth.setReversed(!0),ct=new FMe(oe),$e=new nNe,J=new _Ne(oe,ke,Ce,$e,st,je,ct),Q=new RMe(N),ye=new jMe(N),we=new GSe(oe),ut=new NMe(oe,we),De=new IMe(oe,we,ct,ut),Ue=new BMe(oe,De,we,ct),Qe=new UMe(oe,st,J),rt=new PMe($e),it=new tNe(N,Q,ye,ke,st,ut,rt),nt=new ANe(N,$e),ot=new iNe,xt=new uNe(ke),Je=new CMe(N,Q,ye,Ce,Ue,m,l),be=new hNe(N,Ue,st),ge=new TNe(oe,ct,st,Ce),Oe=new AMe(oe,ke,ct),pe=new LMe(oe,ke,ct),ct.programs=it.programs,N.capabilities=st,N.extensions=ke,N.properties=$e,N.renderLists=ot,N.shadowMap=be,N.state=Ce,N.info=ct}Be();const Pe=new CNe(N,oe);this.xr=Pe,this.getContext=function(){return oe},this.getContextAttributes=function(){return oe.getContextAttributes()},this.forceContextLoss=function(){const ue=ke.get("WEBGL_lose_context");ue&&ue.loseContext()},this.forceContextRestore=function(){const ue=ke.get("WEBGL_lose_context");ue&&ue.restoreContext()},this.getPixelRatio=function(){return W},this.setPixelRatio=function(ue){ue!==void 0&&(W=ue,this.setSize(ee,se,!1))},this.getSize=function(ue){return ue.set(ee,se)},this.setSize=function(ue,Ae,We=!0){if(Pe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ee=ue,se=Ae,n.width=Math.floor(ue*W),n.height=Math.floor(Ae*W),We===!0&&(n.style.width=ue+"px",n.style.height=Ae+"px"),this.setViewport(0,0,ue,Ae)},this.getDrawingBufferSize=function(ue){return ue.set(ee*W,se*W).floor()},this.setDrawingBufferSize=function(ue,Ae,We){ee=ue,se=Ae,W=We,n.width=Math.floor(ue*We),n.height=Math.floor(Ae*We),this.setViewport(0,0,ue,Ae)},this.getCurrentViewport=function(ue){return ue.copy(z)},this.getViewport=function(ue){return ue.copy(j)},this.setViewport=function(ue,Ae,We,Ve){ue.isVector4?j.set(ue.x,ue.y,ue.z,ue.w):j.set(ue,Ae,We,Ve),Ce.viewport(z.copy(j).multiplyScalar(W).round())},this.getScissor=function(ue){return ue.copy(B)},this.setScissor=function(ue,Ae,We,Ve){ue.isVector4?B.set(ue.x,ue.y,ue.z,ue.w):B.set(ue,Ae,We,Ve),Ce.scissor(O.copy(B).multiplyScalar(W).round())},this.getScissorTest=function(){return ae},this.setScissorTest=function(ue){Ce.setScissorTest(ae=ue)},this.setOpaqueSort=function(ue){$=ue},this.setTransparentSort=function(ue){G=ue},this.getClearColor=function(ue){return ue.copy(Je.getClearColor())},this.setClearColor=function(){Je.setClearColor.apply(Je,arguments)},this.getClearAlpha=function(){return Je.getClearAlpha()},this.setClearAlpha=function(){Je.setClearAlpha.apply(Je,arguments)},this.clear=function(ue=!0,Ae=!0,We=!0){let Ve=0;if(ue){let Te=!1;if(U!==null){const gt=U.texture.format;Te=gt===$2||gt===G2||gt===Mx}if(Te){const gt=U.texture.type,He=gt===Xl||gt===cd||gt===Bg||gt===Ep||gt===H2||gt===V2,At=Je.getClearColor(),Rt=Je.getClearAlpha(),$t=At.r,Zt=At.g,jt=At.b;He?(y[0]=$t,y[1]=Zt,y[2]=jt,y[3]=Rt,oe.clearBufferuiv(oe.COLOR,0,y)):(_[0]=$t,_[1]=Zt,_[2]=jt,_[3]=Rt,oe.clearBufferiv(oe.COLOR,0,_))}else Ve|=oe.COLOR_BUFFER_BIT}Ae&&(Ve|=oe.DEPTH_BUFFER_BIT),We&&(Ve|=oe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),oe.clear(Ve)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Ke,!1),n.removeEventListener("webglcontextrestored",te,!1),n.removeEventListener("webglcontextcreationerror",Le,!1),ot.dispose(),xt.dispose(),$e.dispose(),Q.dispose(),ye.dispose(),Ue.dispose(),ut.dispose(),ge.dispose(),it.dispose(),Pe.dispose(),Pe.removeEventListener("sessionstart",ar),Pe.removeEventListener("sessionend",Wr),ii.stop()};function Ke(ue){ue.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),P=!0}function te(){console.log("THREE.WebGLRenderer: Context Restored."),P=!1;const ue=ct.autoReset,Ae=be.enabled,We=be.autoUpdate,Ve=be.needsUpdate,Te=be.type;Be(),ct.autoReset=ue,be.enabled=Ae,be.autoUpdate=We,be.needsUpdate=Ve,be.type=Te}function Le(ue){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ue.statusMessage)}function dt(ue){const Ae=ue.target;Ae.removeEventListener("dispose",dt),kt(Ae)}function kt(ue){Mt(ue),$e.remove(ue)}function Mt(ue){const Ae=$e.get(ue).programs;Ae!==void 0&&(Ae.forEach(function(We){it.releaseProgram(We)}),ue.isShaderMaterial&&it.releaseShaderCache(ue))}this.renderBufferDirect=function(ue,Ae,We,Ve,Te,gt){Ae===null&&(Ae=Se);const He=Te.isMesh&&Te.matrixWorld.determinant()<0,At=Ed(ue,Ae,We,Ve,Te);Ce.setMaterial(Ve,He);let Rt=We.index,$t=1;if(Ve.wireframe===!0){if(Rt=De.getWireframeAttribute(We),Rt===void 0)return;$t=2}const Zt=We.drawRange,jt=We.attributes.position;let ln=Zt.start*$t,fn=(Zt.start+Zt.count)*$t;gt!==null&&(ln=Math.max(ln,gt.start*$t),fn=Math.min(fn,(gt.start+gt.count)*$t)),Rt!==null?(ln=Math.max(ln,0),fn=Math.min(fn,Rt.count)):jt!=null&&(ln=Math.max(ln,0),fn=Math.min(fn,jt.count));const Ot=fn-ln;if(Ot<0||Ot===1/0)return;ut.setup(Te,Ve,At,We,Rt);let cn,Yt=Oe;if(Rt!==null&&(cn=we.get(Rt),Yt=pe,Yt.setIndex(cn)),Te.isMesh)Ve.wireframe===!0?(Ce.setLineWidth(Ve.wireframeLinewidth*xe()),Yt.setMode(oe.LINES)):Yt.setMode(oe.TRIANGLES);else if(Te.isLine){let _t=Ve.linewidth;_t===void 0&&(_t=1),Ce.setLineWidth(_t*xe()),Te.isLineSegments?Yt.setMode(oe.LINES):Te.isLineLoop?Yt.setMode(oe.LINE_LOOP):Yt.setMode(oe.LINE_STRIP)}else Te.isPoints?Yt.setMode(oe.POINTS):Te.isSprite&&Yt.setMode(oe.TRIANGLES);if(Te.isBatchedMesh)if(Te._multiDrawInstances!==null)Yt.renderMultiDrawInstances(Te._multiDrawStarts,Te._multiDrawCounts,Te._multiDrawCount,Te._multiDrawInstances);else if(ke.get("WEBGL_multi_draw"))Yt.renderMultiDraw(Te._multiDrawStarts,Te._multiDrawCounts,Te._multiDrawCount);else{const _t=Te._multiDrawStarts,$n=Te._multiDrawCounts,gn=Te._multiDrawCount,Zn=Rt?we.get(Rt).bytesPerElement:1,Yn=$e.get(Ve).currentProgram.getUniforms();for(let Hn=0;Hn<gn;Hn++)Yn.setValue(oe,"_gl_DrawID",Hn),Yt.render(_t[Hn]/Zn,$n[Hn])}else if(Te.isInstancedMesh)Yt.renderInstances(ln,Ot,Te.count);else if(We.isInstancedBufferGeometry){const _t=We._maxInstanceCount!==void 0?We._maxInstanceCount:1/0,$n=Math.min(We.instanceCount,_t);Yt.renderInstances(ln,Ot,$n)}else Yt.render(ln,Ot)};function Pt(ue,Ae,We){ue.transparent===!0&&ue.side===$s&&ue.forceSinglePass===!1?(ue.side=_s,ue.needsUpdate=!0,ja(ue,Ae,We),ue.side=od,ue.needsUpdate=!0,ja(ue,Ae,We),ue.side=$s):ja(ue,Ae,We)}this.compile=function(ue,Ae,We=null){We===null&&(We=ue),w=xt.get(We),w.init(Ae),C.push(w),We.traverseVisible(function(Te){Te.isLight&&Te.layers.test(Ae.layers)&&(w.pushLight(Te),Te.castShadow&&w.pushShadow(Te))}),ue!==We&&ue.traverseVisible(function(Te){Te.isLight&&Te.layers.test(Ae.layers)&&(w.pushLight(Te),Te.castShadow&&w.pushShadow(Te))}),w.setupLights();const Ve=new Set;return ue.traverse(function(Te){if(!(Te.isMesh||Te.isPoints||Te.isLine||Te.isSprite))return;const gt=Te.material;if(gt)if(Array.isArray(gt))for(let He=0;He<gt.length;He++){const At=gt[He];Pt(At,We,Te),Ve.add(At)}else Pt(gt,We,Te),Ve.add(gt)}),C.pop(),w=null,Ve},this.compileAsync=function(ue,Ae,We=null){const Ve=this.compile(ue,Ae,We);return new Promise(Te=>{function gt(){if(Ve.forEach(function(He){$e.get(He).currentProgram.isReady()&&Ve.delete(He)}),Ve.size===0){Te(ue);return}setTimeout(gt,10)}ke.get("KHR_parallel_shader_compile")!==null?gt():setTimeout(gt,10)})};let mn=null;function Mn(ue){mn&&mn(ue)}function ar(){ii.stop()}function Wr(){ii.start()}const ii=new n9;ii.setAnimationLoop(Mn),typeof self<"u"&&ii.setContext(self),this.setAnimationLoop=function(ue){mn=ue,Pe.setAnimationLoop(ue),ue===null?ii.stop():ii.start()},Pe.addEventListener("sessionstart",ar),Pe.addEventListener("sessionend",Wr),this.render=function(ue,Ae){if(Ae!==void 0&&Ae.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(P===!0)return;if(ue.matrixWorldAutoUpdate===!0&&ue.updateMatrixWorld(),Ae.parent===null&&Ae.matrixWorldAutoUpdate===!0&&Ae.updateMatrixWorld(),Pe.enabled===!0&&Pe.isPresenting===!0&&(Pe.cameraAutoUpdate===!0&&Pe.updateCamera(Ae),Ae=Pe.getCamera()),ue.isScene===!0&&ue.onBeforeRender(N,ue,Ae,U),w=xt.get(ue,C.length),w.init(Ae),C.push(w),le.multiplyMatrices(Ae.projectionMatrix,Ae.matrixWorldInverse),re.setFromProjectionMatrix(le),ce=this.localClippingEnabled,de=rt.init(this.clippingPlanes,ce),v=ot.get(ue,M.length),v.init(),M.push(v),Pe.enabled===!0&&Pe.isPresenting===!0){const gt=N.xr.getDepthSensingMesh();gt!==null&&Or(gt,Ae,-1/0,N.sortObjects)}Or(ue,Ae,0,N.sortObjects),v.finish(),N.sortObjects===!0&&v.sort($,G),Z=Pe.enabled===!1||Pe.isPresenting===!1||Pe.hasDepthSensing()===!1,Z&&Je.addToRenderList(v,ue),this.info.render.frame++,de===!0&&rt.beginShadows();const We=w.state.shadowsArray;be.render(We,ue,Ae),de===!0&&rt.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ve=v.opaque,Te=v.transmissive;if(w.setupLights(),Ae.isArrayCamera){const gt=Ae.cameras;if(Te.length>0)for(let He=0,At=gt.length;He<At;He++){const Rt=gt[He];ai(Ve,Te,ue,Rt)}Z&&Je.render(ue);for(let He=0,At=gt.length;He<At;He++){const Rt=gt[He];Qi(v,ue,Rt,Rt.viewport)}}else Te.length>0&&ai(Ve,Te,ue,Ae),Z&&Je.render(ue),Qi(v,ue,Ae);U!==null&&(J.updateMultisampleRenderTarget(U),J.updateRenderTargetMipmap(U)),ue.isScene===!0&&ue.onAfterRender(N,ue,Ae),ut.resetDefaultState(),I=-1,L=null,C.pop(),C.length>0?(w=C[C.length-1],de===!0&&rt.setGlobalState(N.clippingPlanes,w.state.camera)):w=null,M.pop(),M.length>0?v=M[M.length-1]:v=null};function Or(ue,Ae,We,Ve){if(ue.visible===!1)return;if(ue.layers.test(Ae.layers)){if(ue.isGroup)We=ue.renderOrder;else if(ue.isLOD)ue.autoUpdate===!0&&ue.update(Ae);else if(ue.isLight)w.pushLight(ue),ue.castShadow&&w.pushShadow(ue);else if(ue.isSprite){if(!ue.frustumCulled||re.intersectsSprite(ue)){Ve&&Ne.setFromMatrixPosition(ue.matrixWorld).applyMatrix4(le);const He=Ue.update(ue),At=ue.material;At.visible&&v.push(ue,He,At,We,Ne.z,null)}}else if((ue.isMesh||ue.isLine||ue.isPoints)&&(!ue.frustumCulled||re.intersectsObject(ue))){const He=Ue.update(ue),At=ue.material;if(Ve&&(ue.boundingSphere!==void 0?(ue.boundingSphere===null&&ue.computeBoundingSphere(),Ne.copy(ue.boundingSphere.center)):(He.boundingSphere===null&&He.computeBoundingSphere(),Ne.copy(He.boundingSphere.center)),Ne.applyMatrix4(ue.matrixWorld).applyMatrix4(le)),Array.isArray(At)){const Rt=He.groups;for(let $t=0,Zt=Rt.length;$t<Zt;$t++){const jt=Rt[$t],ln=At[jt.materialIndex];ln&&ln.visible&&v.push(ue,He,ln,We,Ne.z,jt)}}else At.visible&&v.push(ue,He,At,We,Ne.z,null)}}const gt=ue.children;for(let He=0,At=gt.length;He<At;He++)Or(gt[He],Ae,We,Ve)}function Qi(ue,Ae,We,Ve){const Te=ue.opaque,gt=ue.transmissive,He=ue.transparent;w.setupLightsView(We),de===!0&&rt.setGlobalState(N.clippingPlanes,We),Ve&&Ce.viewport(z.copy(Ve)),Te.length>0&&yi(Te,Ae,We),gt.length>0&&yi(gt,Ae,We),He.length>0&&yi(He,Ae,We),Ce.buffers.depth.setTest(!0),Ce.buffers.depth.setMask(!0),Ce.buffers.color.setMask(!0),Ce.setPolygonOffset(!1)}function ai(ue,Ae,We,Ve){if((We.isScene===!0?We.overrideMaterial:null)!==null)return;w.state.transmissionRenderTarget[Ve.id]===void 0&&(w.state.transmissionRenderTarget[Ve.id]=new Kl(1,1,{generateMipmaps:!0,type:ke.has("EXT_color_buffer_half_float")||ke.has("EXT_color_buffer_float")?lv:Xl,minFilter:Oc,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:kn.workingColorSpace}));const gt=w.state.transmissionRenderTarget[Ve.id],He=Ve.viewport||z;gt.setSize(He.z,He.w);const At=N.getRenderTarget();N.setRenderTarget(gt),N.getClearColor(Y),X=N.getClearAlpha(),X<1&&N.setClearColor(16777215,.5),N.clear(),Z&&Je.render(We);const Rt=N.toneMapping;N.toneMapping=zc;const $t=Ve.viewport;if(Ve.viewport!==void 0&&(Ve.viewport=void 0),w.setupLightsView(Ve),de===!0&&rt.setGlobalState(N.clippingPlanes,Ve),yi(ue,We,Ve),J.updateMultisampleRenderTarget(gt),J.updateRenderTargetMipmap(gt),ke.has("WEBGL_multisampled_render_to_texture")===!1){let Zt=!1;for(let jt=0,ln=Ae.length;jt<ln;jt++){const fn=Ae[jt],Ot=fn.object,cn=fn.geometry,Yt=fn.material,_t=fn.group;if(Yt.side===$s&&Ot.layers.test(Ve.layers)){const $n=Yt.side;Yt.side=_s,Yt.needsUpdate=!0,Gr(Ot,We,Ve,cn,Yt,_t),Yt.side=$n,Yt.needsUpdate=!0,Zt=!0}}Zt===!0&&(J.updateMultisampleRenderTarget(gt),J.updateRenderTargetMipmap(gt))}N.setRenderTarget(At),N.setClearColor(Y,X),$t!==void 0&&(Ve.viewport=$t),N.toneMapping=Rt}function yi(ue,Ae,We){const Ve=Ae.isScene===!0?Ae.overrideMaterial:null;for(let Te=0,gt=ue.length;Te<gt;Te++){const He=ue[Te],At=He.object,Rt=He.geometry,$t=Ve===null?He.material:Ve,Zt=He.group;At.layers.test(We.layers)&&Gr(At,Ae,We,Rt,$t,Zt)}}function Gr(ue,Ae,We,Ve,Te,gt){ue.onBeforeRender(N,Ae,We,Ve,Te,gt),ue.modelViewMatrix.multiplyMatrices(We.matrixWorldInverse,ue.matrixWorld),ue.normalMatrix.getNormalMatrix(ue.modelViewMatrix),Te.onBeforeRender(N,Ae,We,Ve,ue,gt),Te.transparent===!0&&Te.side===$s&&Te.forceSinglePass===!1?(Te.side=_s,Te.needsUpdate=!0,N.renderBufferDirect(We,Ae,Ve,Te,ue,gt),Te.side=od,Te.needsUpdate=!0,N.renderBufferDirect(We,Ae,Ve,Te,ue,gt),Te.side=$s):N.renderBufferDirect(We,Ae,Ve,Te,ue,gt),ue.onAfterRender(N,Ae,We,Ve,Te,gt)}function ja(ue,Ae,We){Ae.isScene!==!0&&(Ae=Se);const Ve=$e.get(ue),Te=w.state.lights,gt=w.state.shadowsArray,He=Te.state.version,At=it.getParameters(ue,Te.state,gt,Ae,We),Rt=it.getProgramCacheKey(At);let $t=Ve.programs;Ve.environment=ue.isMeshStandardMaterial?Ae.environment:null,Ve.fog=Ae.fog,Ve.envMap=(ue.isMeshStandardMaterial?ye:Q).get(ue.envMap||Ve.environment),Ve.envMapRotation=Ve.environment!==null&&ue.envMap===null?Ae.environmentRotation:ue.envMapRotation,$t===void 0&&(ue.addEventListener("dispose",dt),$t=new Map,Ve.programs=$t);let Zt=$t.get(Rt);if(Zt!==void 0){if(Ve.currentProgram===Zt&&Ve.lightsStateVersion===He)return Oa(ue,At),Zt}else At.uniforms=it.getUniforms(ue),ue.onBeforeCompile(At,N),Zt=it.acquireProgram(At,Rt),$t.set(Rt,Zt),Ve.uniforms=At.uniforms;const jt=Ve.uniforms;return(!ue.isShaderMaterial&&!ue.isRawShaderMaterial||ue.clipping===!0)&&(jt.clippingPlanes=rt.uniform),Oa(ue,At),Ve.needsLights=sl(ue),Ve.lightsStateVersion=He,Ve.needsLights&&(jt.ambientLightColor.value=Te.state.ambient,jt.lightProbe.value=Te.state.probe,jt.directionalLights.value=Te.state.directional,jt.directionalLightShadows.value=Te.state.directionalShadow,jt.spotLights.value=Te.state.spot,jt.spotLightShadows.value=Te.state.spotShadow,jt.rectAreaLights.value=Te.state.rectArea,jt.ltc_1.value=Te.state.rectAreaLTC1,jt.ltc_2.value=Te.state.rectAreaLTC2,jt.pointLights.value=Te.state.point,jt.pointLightShadows.value=Te.state.pointShadow,jt.hemisphereLights.value=Te.state.hemi,jt.directionalShadowMap.value=Te.state.directionalShadowMap,jt.directionalShadowMatrix.value=Te.state.directionalShadowMatrix,jt.spotShadowMap.value=Te.state.spotShadowMap,jt.spotLightMatrix.value=Te.state.spotLightMatrix,jt.spotLightMap.value=Te.state.spotLightMap,jt.pointShadowMap.value=Te.state.pointShadowMap,jt.pointShadowMatrix.value=Te.state.pointShadowMatrix),Ve.currentProgram=Zt,Ve.uniformsList=null,Zt}function Qc(ue){if(ue.uniformsList===null){const Ae=ue.currentProgram.getUniforms();ue.uniformsList=Ew.seqWithValue(Ae.seq,ue.uniforms)}return ue.uniformsList}function Oa(ue,Ae){const We=$e.get(ue);We.outputColorSpace=Ae.outputColorSpace,We.batching=Ae.batching,We.batchingColor=Ae.batchingColor,We.instancing=Ae.instancing,We.instancingColor=Ae.instancingColor,We.instancingMorph=Ae.instancingMorph,We.skinning=Ae.skinning,We.morphTargets=Ae.morphTargets,We.morphNormals=Ae.morphNormals,We.morphColors=Ae.morphColors,We.morphTargetsCount=Ae.morphTargetsCount,We.numClippingPlanes=Ae.numClippingPlanes,We.numIntersection=Ae.numClipIntersection,We.vertexAlphas=Ae.vertexAlphas,We.vertexTangents=Ae.vertexTangents,We.toneMapping=Ae.toneMapping}function Ed(ue,Ae,We,Ve,Te){Ae.isScene!==!0&&(Ae=Se),J.resetTextureUnits();const gt=Ae.fog,He=Ve.isMeshStandardMaterial?Ae.environment:null,At=U===null?N.outputColorSpace:U.isXRRenderTarget===!0?U.texture.colorSpace:kp,Rt=(Ve.isMeshStandardMaterial?ye:Q).get(Ve.envMap||He),$t=Ve.vertexColors===!0&&!!We.attributes.color&&We.attributes.color.itemSize===4,Zt=!!We.attributes.tangent&&(!!Ve.normalMap||Ve.anisotropy>0),jt=!!We.morphAttributes.position,ln=!!We.morphAttributes.normal,fn=!!We.morphAttributes.color;let Ot=zc;Ve.toneMapped&&(U===null||U.isXRRenderTarget===!0)&&(Ot=N.toneMapping);const cn=We.morphAttributes.position||We.morphAttributes.normal||We.morphAttributes.color,Yt=cn!==void 0?cn.length:0,_t=$e.get(Ve),$n=w.state.lights;if(de===!0&&(ce===!0||ue!==L)){const Qn=ue===L&&Ve.id===I;rt.setState(Ve,ue,Qn)}let gn=!1;Ve.version===_t.__version?(_t.needsLights&&_t.lightsStateVersion!==$n.state.version||_t.outputColorSpace!==At||Te.isBatchedMesh&&_t.batching===!1||!Te.isBatchedMesh&&_t.batching===!0||Te.isBatchedMesh&&_t.batchingColor===!0&&Te.colorTexture===null||Te.isBatchedMesh&&_t.batchingColor===!1&&Te.colorTexture!==null||Te.isInstancedMesh&&_t.instancing===!1||!Te.isInstancedMesh&&_t.instancing===!0||Te.isSkinnedMesh&&_t.skinning===!1||!Te.isSkinnedMesh&&_t.skinning===!0||Te.isInstancedMesh&&_t.instancingColor===!0&&Te.instanceColor===null||Te.isInstancedMesh&&_t.instancingColor===!1&&Te.instanceColor!==null||Te.isInstancedMesh&&_t.instancingMorph===!0&&Te.morphTexture===null||Te.isInstancedMesh&&_t.instancingMorph===!1&&Te.morphTexture!==null||_t.envMap!==Rt||Ve.fog===!0&&_t.fog!==gt||_t.numClippingPlanes!==void 0&&(_t.numClippingPlanes!==rt.numPlanes||_t.numIntersection!==rt.numIntersection)||_t.vertexAlphas!==$t||_t.vertexTangents!==Zt||_t.morphTargets!==jt||_t.morphNormals!==ln||_t.morphColors!==fn||_t.toneMapping!==Ot||_t.morphTargetsCount!==Yt)&&(gn=!0):(gn=!0,_t.__version=Ve.version);let Zn=_t.currentProgram;gn===!0&&(Zn=ja(Ve,Ae,Te));let Yn=!1,Hn=!1,ha=!1;const jn=Zn.getUniforms(),si=_t.uniforms;if(Ce.useProgram(Zn.program)&&(Yn=!0,Hn=!0,ha=!0),Ve.id!==I&&(I=Ve.id,Hn=!0),Yn||L!==ue){Ce.buffers.depth.getReversed()?(ie.copy(ue.projectionMatrix),gSe(ie),vSe(ie),jn.setValue(oe,"projectionMatrix",ie)):jn.setValue(oe,"projectionMatrix",ue.projectionMatrix),jn.setValue(oe,"viewMatrix",ue.matrixWorldInverse);const Oi=jn.map.cameraPosition;Oi!==void 0&&Oi.setValue(oe,fe.setFromMatrixPosition(ue.matrixWorld)),st.logarithmicDepthBuffer&&jn.setValue(oe,"logDepthBufFC",2/(Math.log(ue.far+1)/Math.LN2)),(Ve.isMeshPhongMaterial||Ve.isMeshToonMaterial||Ve.isMeshLambertMaterial||Ve.isMeshBasicMaterial||Ve.isMeshStandardMaterial||Ve.isShaderMaterial)&&jn.setValue(oe,"isOrthographic",ue.isOrthographicCamera===!0),L!==ue&&(L=ue,Hn=!0,ha=!0)}if(Te.isSkinnedMesh){jn.setOptional(oe,Te,"bindMatrix"),jn.setOptional(oe,Te,"bindMatrixInverse");const Qn=Te.skeleton;Qn&&(Qn.boneTexture===null&&Qn.computeBoneTexture(),jn.setValue(oe,"boneTexture",Qn.boneTexture,J))}Te.isBatchedMesh&&(jn.setOptional(oe,Te,"batchingTexture"),jn.setValue(oe,"batchingTexture",Te._matricesTexture,J),jn.setOptional(oe,Te,"batchingIdTexture"),jn.setValue(oe,"batchingIdTexture",Te._indirectTexture,J),jn.setOptional(oe,Te,"batchingColorTexture"),Te._colorsTexture!==null&&jn.setValue(oe,"batchingColorTexture",Te._colorsTexture,J));const Ir=We.morphAttributes;if((Ir.position!==void 0||Ir.normal!==void 0||Ir.color!==void 0)&&Qe.update(Te,We,Zn),(Hn||_t.receiveShadow!==Te.receiveShadow)&&(_t.receiveShadow=Te.receiveShadow,jn.setValue(oe,"receiveShadow",Te.receiveShadow)),Ve.isMeshGouraudMaterial&&Ve.envMap!==null&&(si.envMap.value=Rt,si.flipEnvMap.value=Rt.isCubeTexture&&Rt.isRenderTargetTexture===!1?-1:1),Ve.isMeshStandardMaterial&&Ve.envMap===null&&Ae.environment!==null&&(si.envMapIntensity.value=Ae.environmentIntensity),Hn&&(jn.setValue(oe,"toneMappingExposure",N.toneMappingExposure),_t.needsLights&&Jc(si,ha),gt&&Ve.fog===!0&&nt.refreshFogUniforms(si,gt),nt.refreshMaterialUniforms(si,Ve,W,se,w.state.transmissionRenderTarget[ue.id]),Ew.upload(oe,Qc(_t),si,J)),Ve.isShaderMaterial&&Ve.uniformsNeedUpdate===!0&&(Ew.upload(oe,Qc(_t),si,J),Ve.uniformsNeedUpdate=!1),Ve.isSpriteMaterial&&jn.setValue(oe,"center",Te.center),jn.setValue(oe,"modelViewMatrix",Te.modelViewMatrix),jn.setValue(oe,"normalMatrix",Te.normalMatrix),jn.setValue(oe,"modelMatrix",Te.matrixWorld),Ve.isShaderMaterial||Ve.isRawShaderMaterial){const Qn=Ve.uniformsGroups;for(let Oi=0,$r=Qn.length;Oi<$r;Oi++){const eu=Qn[Oi];ge.update(eu,Zn),ge.bind(eu,Zn)}}return Zn}function Jc(ue,Ae){ue.ambientLightColor.needsUpdate=Ae,ue.lightProbe.needsUpdate=Ae,ue.directionalLights.needsUpdate=Ae,ue.directionalLightShadows.needsUpdate=Ae,ue.pointLights.needsUpdate=Ae,ue.pointLightShadows.needsUpdate=Ae,ue.spotLights.needsUpdate=Ae,ue.spotLightShadows.needsUpdate=Ae,ue.rectAreaLights.needsUpdate=Ae,ue.hemisphereLights.needsUpdate=Ae}function sl(ue){return ue.isMeshLambertMaterial||ue.isMeshToonMaterial||ue.isMeshPhongMaterial||ue.isMeshStandardMaterial||ue.isShadowMaterial||ue.isShaderMaterial&&ue.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return U},this.setRenderTargetTextures=function(ue,Ae,We){$e.get(ue.texture).__webglTexture=Ae,$e.get(ue.depthTexture).__webglTexture=We;const Ve=$e.get(ue);Ve.__hasExternalTextures=!0,Ve.__autoAllocateDepthBuffer=We===void 0,Ve.__autoAllocateDepthBuffer||ke.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ve.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(ue,Ae){const We=$e.get(ue);We.__webglFramebuffer=Ae,We.__useDefaultFramebuffer=Ae===void 0},this.setRenderTarget=function(ue,Ae=0,We=0){U=ue,R=Ae,k=We;let Ve=!0,Te=null,gt=!1,He=!1;if(ue){const Rt=$e.get(ue);if(Rt.__useDefaultFramebuffer!==void 0)Ce.bindFramebuffer(oe.FRAMEBUFFER,null),Ve=!1;else if(Rt.__webglFramebuffer===void 0)J.setupRenderTarget(ue);else if(Rt.__hasExternalTextures)J.rebindTextures(ue,$e.get(ue.texture).__webglTexture,$e.get(ue.depthTexture).__webglTexture);else if(ue.depthBuffer){const jt=ue.depthTexture;if(Rt.__boundDepthTexture!==jt){if(jt!==null&&$e.has(jt)&&(ue.width!==jt.image.width||ue.height!==jt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");J.setupDepthRenderbuffer(ue)}}const $t=ue.texture;($t.isData3DTexture||$t.isDataArrayTexture||$t.isCompressedArrayTexture)&&(He=!0);const Zt=$e.get(ue).__webglFramebuffer;ue.isWebGLCubeRenderTarget?(Array.isArray(Zt[Ae])?Te=Zt[Ae][We]:Te=Zt[Ae],gt=!0):ue.samples>0&&J.useMultisampledRTT(ue)===!1?Te=$e.get(ue).__webglMultisampledFramebuffer:Array.isArray(Zt)?Te=Zt[We]:Te=Zt,z.copy(ue.viewport),O.copy(ue.scissor),q=ue.scissorTest}else z.copy(j).multiplyScalar(W).floor(),O.copy(B).multiplyScalar(W).floor(),q=ae;if(Ce.bindFramebuffer(oe.FRAMEBUFFER,Te)&&Ve&&Ce.drawBuffers(ue,Te),Ce.viewport(z),Ce.scissor(O),Ce.setScissorTest(q),gt){const Rt=$e.get(ue.texture);oe.framebufferTexture2D(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Rt.__webglTexture,We)}else if(He){const Rt=$e.get(ue.texture),$t=Ae||0;oe.framebufferTextureLayer(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,Rt.__webglTexture,We||0,$t)}I=-1},this.readRenderTargetPixels=function(ue,Ae,We,Ve,Te,gt,He){if(!(ue&&ue.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let At=$e.get(ue).__webglFramebuffer;if(ue.isWebGLCubeRenderTarget&&He!==void 0&&(At=At[He]),At){Ce.bindFramebuffer(oe.FRAMEBUFFER,At);try{const Rt=ue.texture,$t=Rt.format,Zt=Rt.type;if(!st.textureFormatReadable($t)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!st.textureTypeReadable(Zt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ae>=0&&Ae<=ue.width-Ve&&We>=0&&We<=ue.height-Te&&oe.readPixels(Ae,We,Ve,Te,je.convert($t),je.convert(Zt),gt)}finally{const Rt=U!==null?$e.get(U).__webglFramebuffer:null;Ce.bindFramebuffer(oe.FRAMEBUFFER,Rt)}}},this.readRenderTargetPixelsAsync=async function(ue,Ae,We,Ve,Te,gt,He){if(!(ue&&ue.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let At=$e.get(ue).__webglFramebuffer;if(ue.isWebGLCubeRenderTarget&&He!==void 0&&(At=At[He]),At){const Rt=ue.texture,$t=Rt.format,Zt=Rt.type;if(!st.textureFormatReadable($t))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!st.textureTypeReadable(Zt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Ae>=0&&Ae<=ue.width-Ve&&We>=0&&We<=ue.height-Te){Ce.bindFramebuffer(oe.FRAMEBUFFER,At);const jt=oe.createBuffer();oe.bindBuffer(oe.PIXEL_PACK_BUFFER,jt),oe.bufferData(oe.PIXEL_PACK_BUFFER,gt.byteLength,oe.STREAM_READ),oe.readPixels(Ae,We,Ve,Te,je.convert($t),je.convert(Zt),0);const ln=U!==null?$e.get(U).__webglFramebuffer:null;Ce.bindFramebuffer(oe.FRAMEBUFFER,ln);const fn=oe.fenceSync(oe.SYNC_GPU_COMMANDS_COMPLETE,0);return oe.flush(),await mSe(oe,fn,4),oe.bindBuffer(oe.PIXEL_PACK_BUFFER,jt),oe.getBufferSubData(oe.PIXEL_PACK_BUFFER,0,gt),oe.deleteBuffer(jt),oe.deleteSync(fn),gt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(ue,Ae=null,We=0){ue.isTexture!==!0&&(B0("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Ae=arguments[0]||null,ue=arguments[1]);const Ve=Math.pow(2,-We),Te=Math.floor(ue.image.width*Ve),gt=Math.floor(ue.image.height*Ve),He=Ae!==null?Ae.x:0,At=Ae!==null?Ae.y:0;J.setTexture2D(ue,0),oe.copyTexSubImage2D(oe.TEXTURE_2D,We,0,0,He,At,Te,gt),Ce.unbindTexture()},this.copyTextureToTexture=function(ue,Ae,We=null,Ve=null,Te=0){ue.isTexture!==!0&&(B0("WebGLRenderer: copyTextureToTexture function signature has changed."),Ve=arguments[0]||null,ue=arguments[1],Ae=arguments[2],Te=arguments[3]||0,We=null);let gt,He,At,Rt,$t,Zt,jt,ln,fn;const Ot=ue.isCompressedTexture?ue.mipmaps[Te]:ue.image;We!==null?(gt=We.max.x-We.min.x,He=We.max.y-We.min.y,At=We.isBox3?We.max.z-We.min.z:1,Rt=We.min.x,$t=We.min.y,Zt=We.isBox3?We.min.z:0):(gt=Ot.width,He=Ot.height,At=Ot.depth||1,Rt=0,$t=0,Zt=0),Ve!==null?(jt=Ve.x,ln=Ve.y,fn=Ve.z):(jt=0,ln=0,fn=0);const cn=je.convert(Ae.format),Yt=je.convert(Ae.type);let _t;Ae.isData3DTexture?(J.setTexture3D(Ae,0),_t=oe.TEXTURE_3D):Ae.isDataArrayTexture||Ae.isCompressedArrayTexture?(J.setTexture2DArray(Ae,0),_t=oe.TEXTURE_2D_ARRAY):(J.setTexture2D(Ae,0),_t=oe.TEXTURE_2D),oe.pixelStorei(oe.UNPACK_FLIP_Y_WEBGL,Ae.flipY),oe.pixelStorei(oe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ae.premultiplyAlpha),oe.pixelStorei(oe.UNPACK_ALIGNMENT,Ae.unpackAlignment);const $n=oe.getParameter(oe.UNPACK_ROW_LENGTH),gn=oe.getParameter(oe.UNPACK_IMAGE_HEIGHT),Zn=oe.getParameter(oe.UNPACK_SKIP_PIXELS),Yn=oe.getParameter(oe.UNPACK_SKIP_ROWS),Hn=oe.getParameter(oe.UNPACK_SKIP_IMAGES);oe.pixelStorei(oe.UNPACK_ROW_LENGTH,Ot.width),oe.pixelStorei(oe.UNPACK_IMAGE_HEIGHT,Ot.height),oe.pixelStorei(oe.UNPACK_SKIP_PIXELS,Rt),oe.pixelStorei(oe.UNPACK_SKIP_ROWS,$t),oe.pixelStorei(oe.UNPACK_SKIP_IMAGES,Zt);const ha=ue.isDataArrayTexture||ue.isData3DTexture,jn=Ae.isDataArrayTexture||Ae.isData3DTexture;if(ue.isRenderTargetTexture||ue.isDepthTexture){const si=$e.get(ue),Ir=$e.get(Ae),Qn=$e.get(si.__renderTarget),Oi=$e.get(Ir.__renderTarget);Ce.bindFramebuffer(oe.READ_FRAMEBUFFER,Qn.__webglFramebuffer),Ce.bindFramebuffer(oe.DRAW_FRAMEBUFFER,Oi.__webglFramebuffer);for(let $r=0;$r<At;$r++)ha&&oe.framebufferTextureLayer(oe.READ_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,$e.get(ue).__webglTexture,Te,Zt+$r),ue.isDepthTexture?(jn&&oe.framebufferTextureLayer(oe.DRAW_FRAMEBUFFER,oe.COLOR_ATTACHMENT0,$e.get(Ae).__webglTexture,Te,fn+$r),oe.blitFramebuffer(Rt,$t,gt,He,jt,ln,gt,He,oe.DEPTH_BUFFER_BIT,oe.NEAREST)):jn?oe.copyTexSubImage3D(_t,Te,jt,ln,fn+$r,Rt,$t,gt,He):oe.copyTexSubImage2D(_t,Te,jt,ln,fn+$r,Rt,$t,gt,He);Ce.bindFramebuffer(oe.READ_FRAMEBUFFER,null),Ce.bindFramebuffer(oe.DRAW_FRAMEBUFFER,null)}else jn?ue.isDataTexture||ue.isData3DTexture?oe.texSubImage3D(_t,Te,jt,ln,fn,gt,He,At,cn,Yt,Ot.data):Ae.isCompressedArrayTexture?oe.compressedTexSubImage3D(_t,Te,jt,ln,fn,gt,He,At,cn,Ot.data):oe.texSubImage3D(_t,Te,jt,ln,fn,gt,He,At,cn,Yt,Ot):ue.isDataTexture?oe.texSubImage2D(oe.TEXTURE_2D,Te,jt,ln,gt,He,cn,Yt,Ot.data):ue.isCompressedTexture?oe.compressedTexSubImage2D(oe.TEXTURE_2D,Te,jt,ln,Ot.width,Ot.height,cn,Ot.data):oe.texSubImage2D(oe.TEXTURE_2D,Te,jt,ln,gt,He,cn,Yt,Ot);oe.pixelStorei(oe.UNPACK_ROW_LENGTH,$n),oe.pixelStorei(oe.UNPACK_IMAGE_HEIGHT,gn),oe.pixelStorei(oe.UNPACK_SKIP_PIXELS,Zn),oe.pixelStorei(oe.UNPACK_SKIP_ROWS,Yn),oe.pixelStorei(oe.UNPACK_SKIP_IMAGES,Hn),Te===0&&Ae.generateMipmaps&&oe.generateMipmap(_t),Ce.unbindTexture()},this.copyTextureToTexture3D=function(ue,Ae,We=null,Ve=null,Te=0){return ue.isTexture!==!0&&(B0("WebGLRenderer: copyTextureToTexture3D function signature has changed."),We=arguments[0]||null,Ve=arguments[1]||null,ue=arguments[2],Ae=arguments[3],Te=arguments[4]||0),B0('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(ue,Ae,We,Ve,Te)},this.initRenderTarget=function(ue){$e.get(ue).__webglFramebuffer===void 0&&J.setupRenderTarget(ue)},this.initTexture=function(ue){ue.isCubeTexture?J.setTextureCube(ue,0):ue.isData3DTexture?J.setTexture3D(ue,0):ue.isDataArrayTexture||ue.isCompressedArrayTexture?J.setTexture2DArray(ue,0):J.setTexture2D(ue,0),Ce.unbindTexture()},this.resetState=function(){R=0,k=0,U=null,Ce.reset(),ut.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ic}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorspace=kn._getDrawingBufferColorSpace(e),n.unpackColorSpace=kn._getUnpackColorSpace()}}class Q2{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ct(e),this.density=n}clone(){return new Q2(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class J2{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new Ct(e),this.near=n,this.far=r}clone(){return new J2(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let ZD=class extends Un{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Do,this.environmentIntensity=1,this.environmentRotation=new Do,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}};class eE{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Oy,this.updateRanges=[],this.version=0,this.uuid=To()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,a=this.stride;i<a;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=To()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=To()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ps=new he;class Eo{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)ps.fromBufferAttribute(this,n),ps.applyMatrix4(e),this.setXYZ(n,ps.x,ps.y,ps.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)ps.fromBufferAttribute(this,n),ps.applyNormalMatrix(e),this.setXYZ(n,ps.x,ps.y,ps.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)ps.fromBufferAttribute(this,n),ps.transformDirection(e),this.setXYZ(n,ps.x,ps.y,ps.z);return this}getComponent(e,n){let r=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(r=ys(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=_n(r,this.array)),this.data.array[e*this.data.stride+this.offset+n]=r,this}setX(e,n){return this.normalized&&(n=_n(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=_n(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=_n(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=_n(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=ys(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=ys(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=ys(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=ys(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=_n(n,this.array),r=_n(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=_n(n,this.array),r=_n(r,this.array),i=_n(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(n=_n(n,this.array),r=_n(r,this.array),i=_n(i,this.array),a=_n(a,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[i+a])}return new cr(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Eo(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[i+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class QD extends ts{static get type(){return"SpriteMaterial"}constructor(e){super(),this.isSpriteMaterial=!0,this.color=new Ct(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Ym;const S0=new he,qm=new he,Xm=new he,Km=new lt,E0=new lt,u9=new rn,E_=new he,M0=new he,M_=new he,XF=new lt,PN=new lt,KF=new lt;class d9 extends Un{constructor(e=new QD){if(super(),this.isSprite=!0,this.type="Sprite",Ym===void 0){Ym=new En;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new eE(n,5);Ym.setIndex([0,1,2,0,2,3]),Ym.setAttribute("position",new Eo(r,3,0,!1)),Ym.setAttribute("uv",new Eo(r,2,3,!1))}this.geometry=Ym,this.material=e,this.center=new lt(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),qm.setFromMatrixScale(this.matrixWorld),u9.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Xm.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&qm.multiplyScalar(-Xm.z);const r=this.material.rotation;let i,a;r!==0&&(a=Math.cos(r),i=Math.sin(r));const s=this.center;C_(E_.set(-.5,-.5,0),Xm,s,qm,i,a),C_(M0.set(.5,-.5,0),Xm,s,qm,i,a),C_(M_.set(.5,.5,0),Xm,s,qm,i,a),XF.set(0,0),PN.set(1,0),KF.set(1,1);let o=e.ray.intersectTriangle(E_,M0,M_,!1,S0);if(o===null&&(C_(M0.set(-.5,.5,0),Xm,s,qm,i,a),PN.set(0,1),o=e.ray.intersectTriangle(E_,M_,M0,!1,S0),o===null))return;const l=e.ray.origin.distanceTo(S0);l<e.near||l>e.far||n.push({distance:l,point:S0.clone(),uv:Ys.getInterpolation(S0,E_,M0,M_,XF,PN,KF,new lt),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function C_(t,e,n,r,i,a){Km.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(E0.x=a*Km.x-i*Km.y,E0.y=i*Km.x+a*Km.y):E0.copy(Km),t.copy(e),t.x+=E0.x,t.y+=E0.y,t.applyMatrix4(u9)}const N_=new he,ZF=new he;class f9 extends Un{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const a=n[r];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let a;for(a=0;a<i.length&&!(n<i[a].distance);a++);return i.splice(a,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const n=this.levels;for(let r=0;r<n.length;r++)if(n[r].distance===e){const i=n.splice(r,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let a=n[r].distance;if(n[r].object.visible&&(a-=a*n[r].hysteresis),e<a)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){N_.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(N_);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){N_.setFromMatrixPosition(e.matrixWorld),ZF.setFromMatrixPosition(this.matrixWorld);const r=N_.distanceTo(ZF)/e.zoom;n[0].object.visible=!0;let i,a;for(i=1,a=n.length;i<a;i++){let s=n[i].distance;if(n[i].object.visible&&(s-=s*n[i].hysteresis),r>=s)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<a;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,a=r.length;i<a;i++){const s=r[i];n.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return n}}const QF=new he,JF=new Sn,eU=new Sn,PNe=new he,tU=new rn,A_=new he,RN=new Gi,nU=new rn,DN=new jp;class h9 extends Rr{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=FT,this.bindMatrix=new rn,this.bindMatrixInverse=new rn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ji),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,A_),this.boundingBox.expandByPoint(A_)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Gi),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,A_),this.boundingSphere.expandByPoint(A_)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),RN.copy(this.boundingSphere),RN.applyMatrix4(i),e.ray.intersectsSphere(RN)!==!1&&(nU.copy(i).invert(),DN.copy(e.ray).applyMatrix4(nU),!(this.boundingBox!==null&&DN.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,DN)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Sn,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===FT?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===j7?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;JF.fromBufferAttribute(i.attributes.skinIndex,e),eU.fromBufferAttribute(i.attributes.skinWeight,e),QF.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let a=0;a<4;a++){const s=eU.getComponent(a);if(s!==0){const o=JF.getComponent(a);tU.multiplyMatrices(r.bones[o].matrixWorld,r.boneInverses[o]),n.addScaledVector(PNe.copy(QF).applyMatrix4(tU),s)}}return n.applyMatrix4(this.bindMatrixInverse)}}class JD extends Un{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Hc extends Hr{constructor(e=null,n=1,r=1,i,a,s,o,l,u=Ra,d=Ra,f,p){super(null,s,o,l,u,d,i,a,f,p),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const rU=new rn,RNe=new rn;class tE{constructor(e=[],n=[]){this.uuid=To(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new rn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new rn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const o=e[a]?e[a].matrixWorld:RNe;rU.multiplyMatrices(o,n[a]),rU.toArray(r,a*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new tE(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new Hc(n,e,e,Ja,Xs);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const a=e.bones[r];let s=n[a];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),s=new JD),this.bones.push(s),this.boneInverses.push(new rn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,a=n.length;i<a;i++){const s=n[i];e.bones.push(s.uuid);const o=r[i];e.boneInverses.push(o.toArray())}return e}}class Cp extends cr{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Zm=new rn,iU=new rn,T_=[],aU=new ji,DNe=new rn,C0=new Rr,N0=new Gi;class p9 extends Rr{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Cp(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,DNe)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new ji),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Zm),aU.copy(e.boundingBox).applyMatrix4(Zm),this.boundingBox.union(aU)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Gi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Zm),N0.copy(e.boundingSphere).applyMatrix4(Zm),this.boundingSphere.union(N0)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const r=n.morphTargetInfluences,i=this.morphTexture.source.data.data,a=r.length+1,s=e*a+1;for(let o=0;o<r.length;o++)r[o]=i[s+o]}raycast(e,n){const r=this.matrixWorld,i=this.count;if(C0.geometry=this.geometry,C0.material=this.material,C0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),N0.copy(this.boundingSphere),N0.applyMatrix4(r),e.ray.intersectsSphere(N0)!==!1))for(let a=0;a<i;a++){this.getMatrixAt(a,Zm),iU.multiplyMatrices(r,Zm),C0.matrixWorld=iU,C0.raycast(e,T_);for(let s=0,o=T_.length;s<o;s++){const l=T_[s];l.instanceId=a,l.object=this,n.push(l)}T_.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Cp(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const r=n.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new Hc(new Float32Array(i*this.count),i,this.count,W2,Xs));const a=this.morphTexture.source.data.data;let s=0;for(let u=0;u<r.length;u++)s+=r[u];const o=this.geometry.morphTargetsRelative?1:1-s,l=i*e;a[l]=o,a.set(r,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function kN(t,e){return t-e}function kNe(t,e){return t.z-e.z}function jNe(t,e){return e.z-t.z}class ONe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n,r,i){const a=this.pool,s=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const o=a[this.index];s.push(o),this.index++,o.start=e,o.count=n,o.z=r,o.index=i}reset(){this.list.length=0,this.index=0}}const Us=new rn,INe=new Ct(1,1,1),jN=new Tx,P_=new ji,bh=new Gi,A0=new he,sU=new he,LNe=new he,ON=new ONe,Ga=new Rr,R_=[];function FNe(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let a=0;a<i;a++)for(let s=0;s<r;s++)e.setComponent(a+n,s,t.getComponent(a,s))}else e.array.set(t.array,n*r);e.needsUpdate=!0}function _h(t,e){if(t.constructor!==e.constructor){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++)e[r]=t[r]}else{const n=Math.min(t.length,e.length);e.set(new t.constructor(t.buffer,0,n))}}class m9 extends Rr{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,n,r=n*2,i){super(new En,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=n,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),r=new Hc(n,e,e,Ja,Xs);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Uint32Array(e*e),r=new Hc(n,e,e,Mx,cd);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Float32Array(e*e*4).fill(1),r=new Hc(n,e,e,Ja,Xs);r.colorSpace=kn.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const s=e.getAttribute(a),{array:o,itemSize:l,normalized:u}=s,d=new o.constructor(r*l),f=new cr(d,l,u);n.setAttribute(a,f)}if(e.getIndex()!==null){const a=r>65535?new Uint32Array(i):new Uint16Array(i);n.setIndex(new cr(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),a=n.getAttribute(r);if(i.itemSize!==a.itemSize||i.normalized!==a.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ji);const e=this.boundingBox,n=this._instanceInfo;e.makeEmpty();for(let r=0,i=n.length;r<i;r++){if(n[r].active===!1)continue;const a=n[r].geometryIndex;this.getMatrixAt(r,Us),this.getBoundingBoxAt(a,P_).applyMatrix4(Us),e.union(P_)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Gi);const e=this.boundingSphere,n=this._instanceInfo;e.makeEmpty();for(let r=0,i=n.length;r<i;r++){if(n[r].active===!1)continue;const a=n[r].geometryIndex;this.getMatrixAt(r,Us),this.getBoundingSphereAt(a,bh).applyMatrix4(Us),e.union(bh)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(kN),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=r):(i=this._instanceInfo.length,this._instanceInfo.push(r));const a=this._matricesTexture;Us.identity().toArray(a.image.data,i*16),a.needsUpdate=!0;const s=this._colorsTexture;return s&&(INe.toArray(s.image.data,i*4),s.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,n=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=n===-1?e.getAttribute("position").count:n;const s=e.getIndex();if(s!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=r===-1?s.count:r),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(kN),l=this._availableGeometryIds.shift(),a[l]=i):(l=this._geometryCount,this._geometryCount++,a.push(i)),this.setGeometryAt(l,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,l}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,i=r.getIndex()!==null,a=r.getIndex(),s=n.getIndex(),o=this._geometryInfo[e];if(i&&s.count>o.reservedIndexCount||n.attributes.position.count>o.reservedVertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,u=o.reservedVertexCount;o.vertexCount=n.getAttribute("position").count;for(const d in r.attributes){const f=n.getAttribute(d),p=r.getAttribute(d);FNe(f,p,l);const m=f.itemSize;for(let y=f.count,_=u;y<_;y++){const v=l+y;for(let w=0;w<m;w++)p.setComponent(v,w,0)}p.needsUpdate=!0,p.addUpdateRange(l*m,u*m)}if(i){const d=o.indexStart,f=o.reservedIndexCount;o.indexCount=n.getIndex().count;for(let p=0;p<s.count;p++)a.setX(d+p,l+s.getX(p));for(let p=s.count,m=f;p<m;p++)a.setX(d+p,l);a.needsUpdate=!0,a.addUpdateRange(d,o.reservedIndexCount)}return o.start=i?o.indexStart:o.vertexStart,o.count=i?o.indexCount:o.vertexCount,o.boundingBox=null,n.boundingBox!==null&&(o.boundingBox=n.boundingBox.clone()),o.boundingSphere=null,n.boundingSphere!==null&&(o.boundingSphere=n.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._geometryInfo;if(e>=n.length||n[e].active===!1)return this;const r=this._instanceInfo;for(let i=0,a=r.length;i<a;i++)r[i].geometryIndex===e&&this.deleteInstance(i);return n[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){const n=this._instanceInfo;return e>=n.length||n[e].active===!1?this:(n[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this)}optimize(){let e=0,n=0;const r=this._geometryInfo,i=r.map((s,o)=>o).sort((s,o)=>r[s].vertexStart-r[o].vertexStart),a=this.geometry;for(let s=0,o=r.length;s<o;s++){const l=i[s],u=r[l];if(u.active!==!1){if(a.index!==null){if(u.indexStart!==n){const{indexStart:d,vertexStart:f,reservedIndexCount:p}=u,m=a.index,y=m.array,_=e-f;for(let v=d;v<d+p;v++)y[v]=y[v]+_;m.array.copyWithin(n,d,d+p),m.addUpdateRange(n,p),u.indexStart=n}n+=u.reservedIndexCount}if(u.vertexStart!==e){const{vertexStart:d,reservedVertexCount:f}=u,p=a.attributes;for(const m in p){const y=p[m],{array:_,itemSize:v}=y;_.copyWithin(e*v,d*v,(d+f)*v),y.addUpdateRange(e*v,f*v)}u.vertexStart=e}e+=u.reservedVertexCount,u.start=a.index?u.indexStart:u.vertexStart,this._nextIndexStart=a.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this}getBoundingBoxAt(e,n){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const a=new ji,s=r.index,o=r.attributes.position;for(let l=i.start,u=i.start+i.count;l<u;l++){let d=l;s&&(d=s.getX(d)),a.expandByPoint(A0.fromBufferAttribute(o,d))}i.boundingBox=a}return n.copy(i.boundingBox),n}getBoundingSphereAt(e,n){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const a=new Gi;this.getBoundingBoxAt(e,P_),P_.getCenter(a.center);const s=r.index,o=r.attributes.position;let l=0;for(let u=i.start,d=i.start+i.count;u<d;u++){let f=u;s&&(f=s.getX(f)),A0.fromBufferAttribute(o,f),l=Math.max(l,a.center.distanceToSquared(A0))}a.radius=Math.sqrt(l),i.boundingSphere=a}return n.copy(i.boundingSphere),n}setMatrixAt(e,n){const r=this._instanceInfo,i=this._matricesTexture,a=this._matricesTexture.image.data;return e>=r.length||r[e].active===!1?this:(n.toArray(a,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,n){const r=this._instanceInfo,i=this._matricesTexture.image.data;return e>=r.length||r[e].active===!1?null:n.fromArray(i,e*16)}setColorAt(e,n){this._colorsTexture===null&&this._initColorsTexture();const r=this._colorsTexture,i=this._colorsTexture.image.data,a=this._instanceInfo;return e>=a.length||a[e].active===!1?this:(n.toArray(i,e*4),r.needsUpdate=!0,this)}getColorAt(e,n){const r=this._colorsTexture.image.data,i=this._instanceInfo;return e>=i.length||i[e].active===!1?null:n.fromArray(r,e*4)}setVisibleAt(e,n){const r=this._instanceInfo;return e>=r.length||r[e].active===!1||r[e].visible===n?this:(r[e].visible=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._instanceInfo;return e>=n.length||n[e].active===!1?!1:n[e].visible}setGeometryIdAt(e,n){const r=this._instanceInfo,i=this._geometryInfo;return e>=r.length||r[e].active===!1||n>=i.length||i[n].active===!1?null:(r[e].geometryIndex=n,this)}getGeometryIdAt(e){const n=this._instanceInfo;return e>=n.length||n[e].active===!1?-1:n[e].geometryIndex}getGeometryRangeAt(e,n={}){if(e<0||e>=this._geometryCount)return null;const r=this._geometryInfo[e];return n.vertexStart=r.vertexStart,n.vertexCount=r.vertexCount,n.reservedVertexCount=r.reservedVertexCount,n.indexStart=r.indexStart,n.indexCount=r.indexCount,n.reservedIndexCount=r.reservedIndexCount,n.start=r.start,n.count=r.count,n}setInstanceCount(e){const n=this._availableInstanceIds,r=this._instanceInfo;for(n.sort(kN);n[n.length-1]===r.length;)r.pop(),n.pop();if(e<r.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),a=new Int32Array(e);_h(this._multiDrawCounts,i),_h(this._multiDrawStarts,a),this._multiDrawCounts=i,this._multiDrawStarts=a,this._maxInstanceCount=e;const s=this._indirectTexture,o=this._matricesTexture,l=this._colorsTexture;s.dispose(),this._initIndirectTexture(),_h(s.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),_h(o.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),_h(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,n){const r=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...r.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${n}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(l=>l.indexStart+l.reservedIndexCount))>n)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${n}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=n,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new En,this._initializeGeometry(a));const s=this.geometry;a.index&&_h(a.index.array,s.index.array);for(const o in a.attributes)_h(a.attributes[o].array,s.attributes[o].array)}raycast(e,n){const r=this._instanceInfo,i=this._geometryInfo,a=this.matrixWorld,s=this.geometry;Ga.material=this.material,Ga.geometry.index=s.index,Ga.geometry.attributes=s.attributes,Ga.geometry.boundingBox===null&&(Ga.geometry.boundingBox=new ji),Ga.geometry.boundingSphere===null&&(Ga.geometry.boundingSphere=new Gi);for(let o=0,l=r.length;o<l;o++){if(!r[o].visible||!r[o].active)continue;const u=r[o].geometryIndex,d=i[u];Ga.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(o,Ga.matrixWorld).premultiply(a),this.getBoundingBoxAt(u,Ga.geometry.boundingBox),this.getBoundingSphereAt(u,Ga.geometry.boundingSphere),Ga.raycast(e,R_);for(let f=0,p=R_.length;f<p;f++){const m=R_[f];m.object=this,m.batchId=o,n.push(m)}R_.length=0}Ga.material=null,Ga.geometry.index=null,Ga.geometry.attributes={},Ga.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(n=>({...n,boundingBox:n.boundingBox!==null?n.boundingBox.clone():null,boundingSphere:n.boundingSphere!==null?n.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(n=>({...n})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,n,r,i,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=i.getIndex(),o=s===null?1:s.array.BYTES_PER_ELEMENT,l=this._instanceInfo,u=this._multiDrawStarts,d=this._multiDrawCounts,f=this._geometryInfo,p=this.perObjectFrustumCulled,m=this._indirectTexture,y=m.image.data;p&&(Us.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),jN.setFromProjectionMatrix(Us,e.coordinateSystem));let _=0;if(this.sortObjects){Us.copy(this.matrixWorld).invert(),A0.setFromMatrixPosition(r.matrixWorld).applyMatrix4(Us),sU.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(Us);for(let M=0,C=l.length;M<C;M++)if(l[M].visible&&l[M].active){const N=l[M].geometryIndex;this.getMatrixAt(M,Us),this.getBoundingSphereAt(N,bh).applyMatrix4(Us);let P=!1;if(p&&(P=!jN.intersectsSphere(bh)),!P){const R=f[N],k=LNe.subVectors(bh.center,A0).dot(sU);ON.push(R.start,R.count,k,M)}}const v=ON.list,w=this.customSort;w===null?v.sort(a.transparent?jNe:kNe):w.call(this,v,r);for(let M=0,C=v.length;M<C;M++){const N=v[M];u[_]=N.start*o,d[_]=N.count,y[_]=N.index,_++}ON.reset()}else for(let v=0,w=l.length;v<w;v++)if(l[v].visible&&l[v].active){const M=l[v].geometryIndex;let C=!1;if(p&&(this.getMatrixAt(v,Us),this.getBoundingSphereAt(M,bh).applyMatrix4(Us),C=!jN.intersectsSphere(bh)),!C){const N=f[M];u[_]=N.start*o,d[_]=N.count,y[_]=v,_++}}m.needsUpdate=!0,this._multiDrawCount=_,this._visibilityChanged=!1}onBeforeShadow(e,n,r,i,a,s){this.onBeforeRender(e,null,i,a,s)}}class Ms extends ts{static get type(){return"LineBasicMaterial"}constructor(e){super(),this.isLineBasicMaterial=!0,this.color=new Ct(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const ES=new he,MS=new he,oU=new rn,T0=new jp,D_=new Gi,IN=new he,lU=new he;let Nf=class extends Un{constructor(e=new En,n=new Ms){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,a=n.count;i<a;i++)ES.fromBufferAttribute(n,i-1),MS.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=ES.distanceTo(MS);e.setAttribute("lineDistance",new Bt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,a=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),D_.copy(r.boundingSphere),D_.applyMatrix4(i),D_.radius+=a,e.ray.intersectsSphere(D_)===!1)return;oU.copy(i).invert(),T0.copy(e.ray).applyMatrix4(oU);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=this.isLineSegments?2:1,d=r.index,p=r.attributes.position;if(d!==null){const m=Math.max(0,s.start),y=Math.min(d.count,s.start+s.count);for(let _=m,v=y-1;_<v;_+=u){const w=d.getX(_),M=d.getX(_+1),C=k_(this,e,T0,l,w,M);C&&n.push(C)}if(this.isLineLoop){const _=d.getX(y-1),v=d.getX(m),w=k_(this,e,T0,l,_,v);w&&n.push(w)}}else{const m=Math.max(0,s.start),y=Math.min(p.count,s.start+s.count);for(let _=m,v=y-1;_<v;_+=u){const w=k_(this,e,T0,l,_,_+1);w&&n.push(w)}if(this.isLineLoop){const _=k_(this,e,T0,l,y-1,m);_&&n.push(_)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}};function k_(t,e,n,r,i,a){const s=t.geometry.attributes.position;if(ES.fromBufferAttribute(s,i),MS.fromBufferAttribute(s,a),n.distanceSqToSegment(ES,MS,IN,lU)>r)return;IN.applyMatrix4(t.matrixWorld);const l=e.ray.origin.distanceTo(IN);if(!(l<e.near||l>e.far))return{distance:l,point:lU.clone().applyMatrix4(t.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:t}}const cU=new he,uU=new he;class Zc extends Nf{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,a=n.count;i<a;i+=2)cU.fromBufferAttribute(n,i),uU.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+cU.distanceTo(uU);e.setAttribute("lineDistance",new Bt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class g9 extends Nf{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class ek extends ts{static get type(){return"PointsMaterial"}constructor(e){super(),this.isPointsMaterial=!0,this.color=new Ct(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const dU=new rn,WT=new jp,j_=new Gi,O_=new he;class v9 extends Un{constructor(e=new En,n=new ek){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),j_.copy(r.boundingSphere),j_.applyMatrix4(i),j_.radius+=a,e.ray.intersectsSphere(j_)===!1)return;dU.copy(i).invert(),WT.copy(e.ray).applyMatrix4(dU);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=r.index,f=r.attributes.position;if(u!==null){const p=Math.max(0,s.start),m=Math.min(u.count,s.start+s.count);for(let y=p,_=m;y<_;y++){const v=u.getX(y);O_.fromBufferAttribute(f,v),fU(O_,v,l,i,e,n,this)}}else{const p=Math.max(0,s.start),m=Math.min(f.count,s.start+s.count);for(let y=p,_=m;y<_;y++)O_.fromBufferAttribute(f,y),fU(O_,y,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function fU(t,e,n,r,i,a,s){const o=WT.distanceSqToPoint(t);if(o<n){const l=new he;WT.closestPointToPoint(t,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;a.push({distance:u,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}class UNe extends Hr{constructor(e,n,r,i,a,s,o,l,u){super(e,n,r,i,a,s,o,l,u),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:gi,this.magFilter=a!==void 0?a:gi,this.generateMipmaps=!1;const d=this;function f(){d.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class BNe extends Hr{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=Ra,this.minFilter=Ra,this.generateMipmaps=!1,this.needsUpdate=!0}}class nE extends Hr{constructor(e,n,r,i,a,s,o,l,u,d,f,p){super(null,s,o,l,u,d,i,a,f,p),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class zNe extends nE{constructor(e,n,r,i,a,s){super(e,n,r,a,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Jo,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class HNe extends nE{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,ld),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class VNe extends Hr{constructor(e,n,r,i,a,s,o,l,u){super(e,n,r,i,a,s,o,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class tc{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),a=0;n.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),a+=r.distanceTo(i),n.push(a),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const a=r.length;let s;n?s=n:s=e*r[a-1];let o=0,l=a-1,u;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),u=r[i]-s,u<0)o=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===s)return i/(a-1);const d=r[i],p=r[i+1]-d,m=(s-d)/p;return(i+m)/(a-1)}getTangent(e,n){let i=e-1e-4,a=e+1e-4;i<0&&(i=0),a>1&&(a=1);const s=this.getPoint(i),o=this.getPoint(a),l=n||(s.isVector2?new lt:new he);return l.copy(o).sub(s).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new he,i=[],a=[],s=[],o=new he,l=new rn;for(let m=0;m<=e;m++){const y=m/e;i[m]=this.getTangentAt(y,new he)}a[0]=new he,s[0]=new he;let u=Number.MAX_VALUE;const d=Math.abs(i[0].x),f=Math.abs(i[0].y),p=Math.abs(i[0].z);d<=u&&(u=d,r.set(1,0,0)),f<=u&&(u=f,r.set(0,1,0)),p<=u&&r.set(0,0,1),o.crossVectors(i[0],r).normalize(),a[0].crossVectors(i[0],o),s[0].crossVectors(i[0],a[0]);for(let m=1;m<=e;m++){if(a[m]=a[m-1].clone(),s[m]=s[m-1].clone(),o.crossVectors(i[m-1],i[m]),o.length()>Number.EPSILON){o.normalize();const y=Math.acos(ti(i[m-1].dot(i[m]),-1,1));a[m].applyMatrix4(l.makeRotationAxis(o,y))}s[m].crossVectors(i[m],a[m])}if(n===!0){let m=Math.acos(ti(a[0].dot(a[e]),-1,1));m/=e,i[0].dot(o.crossVectors(a[0],a[e]))>0&&(m=-m);for(let y=1;y<=e;y++)a[y].applyMatrix4(l.makeRotationAxis(i[y],m*y)),s[y].crossVectors(i[y],a[y])}return{tangents:i,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class rE extends tc{constructor(e=0,n=0,r=1,i=1,a=0,s=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=o,this.aRotation=l}getPoint(e,n=new lt){const r=n,i=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=i;for(;a>i;)a-=i;a<Number.EPSILON&&(s?a=0:a=i),this.aClockwise===!0&&!s&&(a===i?a=-i:a=a-i);const o=this.aStartAngle+e*a;let l=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const d=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=l-this.aX,m=u-this.aY;l=p*d-m*f+this.aX,u=p*f+m*d+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class y9 extends rE{constructor(e,n,r,i,a,s){super(e,n,r,r,i,a,s),this.isArcCurve=!0,this.type="ArcCurve"}}function tk(){let t=0,e=0,n=0,r=0;function i(a,s,o,l){t=a,e=o,n=-3*a+3*s-2*o-l,r=2*a-2*s+o+l}return{initCatmullRom:function(a,s,o,l,u){i(s,o,u*(o-a),u*(l-s))},initNonuniformCatmullRom:function(a,s,o,l,u,d,f){let p=(s-a)/u-(o-a)/(u+d)+(o-s)/d,m=(o-s)/d-(l-s)/(d+f)+(l-o)/f;p*=d,m*=d,i(s,o,p,m)},calc:function(a){const s=a*a,o=s*a;return t+e*a+n*s+r*o}}}const I_=new he,LN=new tk,FN=new tk,UN=new tk;class x9 extends tc{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new he){const r=n,i=this.points,a=i.length,s=(a-(this.closed?0:1))*e;let o=Math.floor(s),l=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:l===0&&o===a-1&&(o=a-2,l=1);let u,d;this.closed||o>0?u=i[(o-1)%a]:(I_.subVectors(i[0],i[1]).add(i[0]),u=I_);const f=i[o%a],p=i[(o+1)%a];if(this.closed||o+2<a?d=i[(o+2)%a]:(I_.subVectors(i[a-1],i[a-2]).add(i[a-1]),d=I_),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let y=Math.pow(u.distanceToSquared(f),m),_=Math.pow(f.distanceToSquared(p),m),v=Math.pow(p.distanceToSquared(d),m);_<1e-4&&(_=1),y<1e-4&&(y=_),v<1e-4&&(v=_),LN.initNonuniformCatmullRom(u.x,f.x,p.x,d.x,y,_,v),FN.initNonuniformCatmullRom(u.y,f.y,p.y,d.y,y,_,v),UN.initNonuniformCatmullRom(u.z,f.z,p.z,d.z,y,_,v)}else this.curveType==="catmullrom"&&(LN.initCatmullRom(u.x,f.x,p.x,d.x,this.tension),FN.initCatmullRom(u.y,f.y,p.y,d.y,this.tension),UN.initCatmullRom(u.z,f.z,p.z,d.z,this.tension));return r.set(LN.calc(l),FN.calc(l),UN.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new he().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function hU(t,e,n,r,i){const a=(r-e)*.5,s=(i-n)*.5,o=t*t,l=t*o;return(2*n-2*r+a+s)*l+(-3*n+3*r-2*a-s)*o+a*t+n}function WNe(t,e){const n=1-t;return n*n*e}function GNe(t,e){return 2*(1-t)*t*e}function $Ne(t,e){return t*t*e}function ey(t,e,n,r){return WNe(t,e)+GNe(t,n)+$Ne(t,r)}function YNe(t,e){const n=1-t;return n*n*n*e}function qNe(t,e){const n=1-t;return 3*n*n*t*e}function XNe(t,e){return 3*(1-t)*t*t*e}function KNe(t,e){return t*t*t*e}function ty(t,e,n,r,i){return YNe(t,e)+qNe(t,n)+XNe(t,r)+KNe(t,i)}class nk extends tc{constructor(e=new lt,n=new lt,r=new lt,i=new lt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new lt){const r=n,i=this.v0,a=this.v1,s=this.v2,o=this.v3;return r.set(ty(e,i.x,a.x,s.x,o.x),ty(e,i.y,a.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class b9 extends tc{constructor(e=new he,n=new he,r=new he,i=new he){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new he){const r=n,i=this.v0,a=this.v1,s=this.v2,o=this.v3;return r.set(ty(e,i.x,a.x,s.x,o.x),ty(e,i.y,a.y,s.y,o.y),ty(e,i.z,a.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class rk extends tc{constructor(e=new lt,n=new lt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new lt){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new lt){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class _9 extends tc{constructor(e=new he,n=new he){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new he){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new he){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ik extends tc{constructor(e=new lt,n=new lt,r=new lt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new lt){const r=n,i=this.v0,a=this.v1,s=this.v2;return r.set(ey(e,i.x,a.x,s.x),ey(e,i.y,a.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ak extends tc{constructor(e=new he,n=new he,r=new he){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new he){const r=n,i=this.v0,a=this.v1,s=this.v2;return r.set(ey(e,i.x,a.x,s.x),ey(e,i.y,a.y,s.y),ey(e,i.z,a.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sk extends tc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new lt){const r=n,i=this.points,a=(i.length-1)*e,s=Math.floor(a),o=a-s,l=i[s===0?s:s-1],u=i[s],d=i[s>i.length-2?i.length-1:s+1],f=i[s>i.length-3?i.length-1:s+2];return r.set(hU(o,l.x,u.x,d.x,f.x),hU(o,l.y,u.y,d.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new lt().fromArray(i))}return this}}var CS=Object.freeze({__proto__:null,ArcCurve:y9,CatmullRomCurve3:x9,CubicBezierCurve:nk,CubicBezierCurve3:b9,EllipseCurve:rE,LineCurve:rk,LineCurve3:_9,QuadraticBezierCurve:ik,QuadraticBezierCurve3:ak,SplineCurve:sk});class w9 extends tc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new CS[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let a=0;for(;a<i.length;){if(i[a]>=r){const s=i[a]-r,o=this.curves[a],l=o.getLength(),u=l===0?0:1-s/l;return o.getPointAt(u,n)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,a=this.curves;i<a.length;i++){const s=a[i],o=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(o);for(let u=0;u<l.length;u++){const d=l[u];r&&r.equals(d)||(n.push(d),r=d)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new CS[i.type]().fromJSON(i))}return this}}class Uy extends w9{constructor(e){super(),this.type="Path",this.currentPoint=new lt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new rk(this.currentPoint.clone(),new lt(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const a=new ik(this.currentPoint.clone(),new lt(e,n),new lt(r,i));return this.curves.push(a),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,a,s){const o=new nk(this.currentPoint.clone(),new lt(e,n),new lt(r,i),new lt(a,s));return this.curves.push(o),this.currentPoint.set(a,s),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new sk(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,a,s){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,n+l,r,i,a,s),this}absarc(e,n,r,i,a,s){return this.absellipse(e,n,r,r,i,a,s),this}ellipse(e,n,r,i,a,s,o,l){const u=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+u,n+d,r,i,a,s,o,l),this}absellipse(e,n,r,i,a,s,o,l){const u=new rE(e,n,r,i,a,s,o,l);if(this.curves.length>0){const f=u.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(u);const d=u.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Px extends En{constructor(e=[new lt(0,-.5),new lt(.5,0),new lt(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=ti(i,0,Math.PI*2);const a=[],s=[],o=[],l=[],u=[],d=1/n,f=new he,p=new lt,m=new he,y=new he,_=new he;let v=0,w=0;for(let M=0;M<=e.length-1;M++)switch(M){case 0:v=e[M+1].x-e[M].x,w=e[M+1].y-e[M].y,m.x=w*1,m.y=-v,m.z=w*0,_.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(_.x,_.y,_.z);break;default:v=e[M+1].x-e[M].x,w=e[M+1].y-e[M].y,m.x=w*1,m.y=-v,m.z=w*0,y.copy(m),m.x+=_.x,m.y+=_.y,m.z+=_.z,m.normalize(),l.push(m.x,m.y,m.z),_.copy(y)}for(let M=0;M<=n;M++){const C=r+M*d*i,N=Math.sin(C),P=Math.cos(C);for(let R=0;R<=e.length-1;R++){f.x=e[R].x*N,f.y=e[R].y,f.z=e[R].x*P,s.push(f.x,f.y,f.z),p.x=M/n,p.y=R/(e.length-1),o.push(p.x,p.y);const k=l[3*R+0]*N,U=l[3*R+1],I=l[3*R+0]*P;u.push(k,U,I)}}for(let M=0;M<n;M++)for(let C=0;C<e.length-1;C++){const N=C+M*e.length,P=N,R=N+e.length,k=N+e.length+1,U=N+1;a.push(P,R,U),a.push(k,U,R)}this.setIndex(a),this.setAttribute("position",new Bt(s,3)),this.setAttribute("uv",new Bt(o,2)),this.setAttribute("normal",new Bt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Px(e.points,e.segments,e.phiStart,e.phiLength)}}class iE extends Px{constructor(e=1,n=1,r=4,i=8){const a=new Uy;a.absarc(0,-n/2,e,Math.PI*1.5,0),a.absarc(0,n/2,e,0,Math.PI*.5),super(a.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new iE(e.radius,e.length,e.capSegments,e.radialSegments)}}class aE extends En{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const a=[],s=[],o=[],l=[],u=new he,d=new lt;s.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let f=0,p=3;f<=n;f++,p+=3){const m=r+f/n*i;u.x=e*Math.cos(m),u.y=e*Math.sin(m),s.push(u.x,u.y,u.z),o.push(0,0,1),d.x=(s[p]/e+1)/2,d.y=(s[p+1]/e+1)/2,l.push(d.x,d.y)}for(let f=1;f<=n;f++)a.push(f,f+1,0);this.setIndex(a),this.setAttribute("position",new Bt(s,3)),this.setAttribute("normal",new Bt(o,3)),this.setAttribute("uv",new Bt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new aE(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class uv extends En{constructor(e=1,n=1,r=1,i=32,a=1,s=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:l};const u=this;i=Math.floor(i),a=Math.floor(a);const d=[],f=[],p=[],m=[];let y=0;const _=[],v=r/2;let w=0;M(),s===!1&&(e>0&&C(!0),n>0&&C(!1)),this.setIndex(d),this.setAttribute("position",new Bt(f,3)),this.setAttribute("normal",new Bt(p,3)),this.setAttribute("uv",new Bt(m,2));function M(){const N=new he,P=new he;let R=0;const k=(n-e)/r;for(let U=0;U<=a;U++){const I=[],L=U/a,z=L*(n-e)+e;for(let O=0;O<=i;O++){const q=O/i,Y=q*l+o,X=Math.sin(Y),ee=Math.cos(Y);P.x=z*X,P.y=-L*r+v,P.z=z*ee,f.push(P.x,P.y,P.z),N.set(X,k,ee).normalize(),p.push(N.x,N.y,N.z),m.push(q,1-L),I.push(y++)}_.push(I)}for(let U=0;U<i;U++)for(let I=0;I<a;I++){const L=_[I][U],z=_[I+1][U],O=_[I+1][U+1],q=_[I][U+1];(e>0||I!==0)&&(d.push(L,z,q),R+=3),(n>0||I!==a-1)&&(d.push(z,O,q),R+=3)}u.addGroup(w,R,0),w+=R}function C(N){const P=y,R=new lt,k=new he;let U=0;const I=N===!0?e:n,L=N===!0?1:-1;for(let O=1;O<=i;O++)f.push(0,v*L,0),p.push(0,L,0),m.push(.5,.5),y++;const z=y;for(let O=0;O<=i;O++){const Y=O/i*l+o,X=Math.cos(Y),ee=Math.sin(Y);k.x=I*ee,k.y=v*L,k.z=I*X,f.push(k.x,k.y,k.z),p.push(0,L,0),R.x=X*.5+.5,R.y=ee*.5*L+.5,m.push(R.x,R.y),y++}for(let O=0;O<i;O++){const q=P+O,Y=z+O;N===!0?d.push(Y,Y+1,q):d.push(Y+1,Y,q),U+=3}u.addGroup(w,U,N===!0?1:2),w+=U}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class sE extends uv{constructor(e=1,n=1,r=32,i=1,a=!1,s=0,o=Math.PI*2){super(0,e,n,r,i,a,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:o}}static fromJSON(e){return new sE(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Df extends En{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const a=[],s=[];o(i),u(r),d(),this.setAttribute("position",new Bt(a,3)),this.setAttribute("normal",new Bt(a.slice(),3)),this.setAttribute("uv",new Bt(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(M){const C=new he,N=new he,P=new he;for(let R=0;R<n.length;R+=3)m(n[R+0],C),m(n[R+1],N),m(n[R+2],P),l(C,N,P,M)}function l(M,C,N,P){const R=P+1,k=[];for(let U=0;U<=R;U++){k[U]=[];const I=M.clone().lerp(N,U/R),L=C.clone().lerp(N,U/R),z=R-U;for(let O=0;O<=z;O++)O===0&&U===R?k[U][O]=I:k[U][O]=I.clone().lerp(L,O/z)}for(let U=0;U<R;U++)for(let I=0;I<2*(R-U)-1;I++){const L=Math.floor(I/2);I%2===0?(p(k[U][L+1]),p(k[U+1][L]),p(k[U][L])):(p(k[U][L+1]),p(k[U+1][L+1]),p(k[U+1][L]))}}function u(M){const C=new he;for(let N=0;N<a.length;N+=3)C.x=a[N+0],C.y=a[N+1],C.z=a[N+2],C.normalize().multiplyScalar(M),a[N+0]=C.x,a[N+1]=C.y,a[N+2]=C.z}function d(){const M=new he;for(let C=0;C<a.length;C+=3){M.x=a[C+0],M.y=a[C+1],M.z=a[C+2];const N=v(M)/2/Math.PI+.5,P=w(M)/Math.PI+.5;s.push(N,1-P)}y(),f()}function f(){for(let M=0;M<s.length;M+=6){const C=s[M+0],N=s[M+2],P=s[M+4],R=Math.max(C,N,P),k=Math.min(C,N,P);R>.9&&k<.1&&(C<.2&&(s[M+0]+=1),N<.2&&(s[M+2]+=1),P<.2&&(s[M+4]+=1))}}function p(M){a.push(M.x,M.y,M.z)}function m(M,C){const N=M*3;C.x=e[N+0],C.y=e[N+1],C.z=e[N+2]}function y(){const M=new he,C=new he,N=new he,P=new he,R=new lt,k=new lt,U=new lt;for(let I=0,L=0;I<a.length;I+=9,L+=6){M.set(a[I+0],a[I+1],a[I+2]),C.set(a[I+3],a[I+4],a[I+5]),N.set(a[I+6],a[I+7],a[I+8]),R.set(s[L+0],s[L+1]),k.set(s[L+2],s[L+3]),U.set(s[L+4],s[L+5]),P.copy(M).add(C).add(N).divideScalar(3);const z=v(P);_(R,L+0,M,z),_(k,L+2,C,z),_(U,L+4,N,z)}}function _(M,C,N,P){P<0&&M.x===1&&(s[C]=M.x-1),N.x===0&&N.z===0&&(s[C]=P/2/Math.PI+.5)}function v(M){return Math.atan2(M.z,-M.x)}function w(M){return Math.atan2(-M.y,Math.sqrt(M.x*M.x+M.z*M.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Df(e.vertices,e.indices,e.radius,e.details)}}class oE extends Df{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,s,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new oE(e.radius,e.detail)}}const L_=new he,F_=new he,BN=new he,U_=new Ys;class S9 extends En{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),a=Math.cos(ap*n),s=e.getIndex(),o=e.getAttribute("position"),l=s?s.count:o.count,u=[0,0,0],d=["a","b","c"],f=new Array(3),p={},m=[];for(let y=0;y<l;y+=3){s?(u[0]=s.getX(y),u[1]=s.getX(y+1),u[2]=s.getX(y+2)):(u[0]=y,u[1]=y+1,u[2]=y+2);const{a:_,b:v,c:w}=U_;if(_.fromBufferAttribute(o,u[0]),v.fromBufferAttribute(o,u[1]),w.fromBufferAttribute(o,u[2]),U_.getNormal(BN),f[0]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,f[1]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,f[2]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let M=0;M<3;M++){const C=(M+1)%3,N=f[M],P=f[C],R=U_[d[M]],k=U_[d[C]],U=`${N}_${P}`,I=`${P}_${N}`;I in p&&p[I]?(BN.dot(p[I].normal)<=a&&(m.push(R.x,R.y,R.z),m.push(k.x,k.y,k.z)),p[I]=null):U in p||(p[U]={index0:u[M],index1:u[C],normal:BN.clone()})}}for(const y in p)if(p[y]){const{index0:_,index1:v}=p[y];L_.fromBufferAttribute(o,_),F_.fromBufferAttribute(o,v),m.push(L_.x,L_.y,L_.z),m.push(F_.x,F_.y,F_.z)}this.setAttribute("position",new Bt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class op extends Uy{constructor(e){super(e),this.uuid=To(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new Uy().fromJSON(i))}return this}}const ZNe={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let a=E9(t,0,i,n,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,u,d,f,p,m;if(r&&(a=nAe(t,e,a,n)),t.length>80*n){o=u=t[0],l=d=t[1];for(let y=n;y<i;y+=n)f=t[y],p=t[y+1],f<o&&(o=f),p<l&&(l=p),f>u&&(u=f),p>d&&(d=p);m=Math.max(u-o,d-l),m=m!==0?32767/m:0}return By(a,s,n,o,l,m,0),s}};function E9(t,e,n,r,i){let a,s;if(i===hAe(t,e,n,r)>0)for(a=e;a<n;a+=r)s=pU(a,t[a],t[a+1],s);else for(a=n-r;a>=e;a-=r)s=pU(a,t[a],t[a+1],s);return s&&lE(s,s.next)&&(Hy(s),s=s.next),s}function Np(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(lE(n,n.next)||zr(n.prev,n,n.next)===0)){if(Hy(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function By(t,e,n,r,i,a,s){if(!t)return;!s&&a&&oAe(t,r,i,a);let o=t,l,u;for(;t.prev!==t.next;){if(l=t.prev,u=t.next,a?JNe(t,r,i,a):QNe(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(u.i/n|0),Hy(t),t=u.next,o=u.next;continue}if(t=u,t===o){s?s===1?(t=eAe(Np(t),e,n),By(t,e,n,r,i,a,2)):s===2&&tAe(t,e,n,r,i,a):By(Np(t),e,n,r,i,a,1);break}}}function QNe(t){const e=t.prev,n=t,r=t.next;if(zr(e,n,r)>=0)return!1;const i=e.x,a=n.x,s=r.x,o=e.y,l=n.y,u=r.y,d=i<a?i<s?i:s:a<s?a:s,f=o<l?o<u?o:u:l<u?l:u,p=i>a?i>s?i:s:a>s?a:s,m=o>l?o>u?o:u:l>u?l:u;let y=r.next;for(;y!==e;){if(y.x>=d&&y.x<=p&&y.y>=f&&y.y<=m&&hg(i,o,a,l,s,u,y.x,y.y)&&zr(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function JNe(t,e,n,r){const i=t.prev,a=t,s=t.next;if(zr(i,a,s)>=0)return!1;const o=i.x,l=a.x,u=s.x,d=i.y,f=a.y,p=s.y,m=o<l?o<u?o:u:l<u?l:u,y=d<f?d<p?d:p:f<p?f:p,_=o>l?o>u?o:u:l>u?l:u,v=d>f?d>p?d:p:f>p?f:p,w=GT(m,y,e,n,r),M=GT(_,v,e,n,r);let C=t.prevZ,N=t.nextZ;for(;C&&C.z>=w&&N&&N.z<=M;){if(C.x>=m&&C.x<=_&&C.y>=y&&C.y<=v&&C!==i&&C!==s&&hg(o,d,l,f,u,p,C.x,C.y)&&zr(C.prev,C,C.next)>=0||(C=C.prevZ,N.x>=m&&N.x<=_&&N.y>=y&&N.y<=v&&N!==i&&N!==s&&hg(o,d,l,f,u,p,N.x,N.y)&&zr(N.prev,N,N.next)>=0))return!1;N=N.nextZ}for(;C&&C.z>=w;){if(C.x>=m&&C.x<=_&&C.y>=y&&C.y<=v&&C!==i&&C!==s&&hg(o,d,l,f,u,p,C.x,C.y)&&zr(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;N&&N.z<=M;){if(N.x>=m&&N.x<=_&&N.y>=y&&N.y<=v&&N!==i&&N!==s&&hg(o,d,l,f,u,p,N.x,N.y)&&zr(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function eAe(t,e,n){let r=t;do{const i=r.prev,a=r.next.next;!lE(i,a)&&M9(i,r,r.next,a)&&zy(i,a)&&zy(a,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(a.i/n|0),Hy(r),Hy(r.next),r=t=a),r=r.next}while(r!==t);return Np(r)}function tAe(t,e,n,r,i,a){let s=t;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&uAe(s,o)){let l=C9(s,o);s=Np(s,s.next),l=Np(l,l.next),By(s,e,n,r,i,a,0),By(l,e,n,r,i,a,0);return}o=o.next}s=s.next}while(s!==t)}function nAe(t,e,n,r){const i=[];let a,s,o,l,u;for(a=0,s=e.length;a<s;a++)o=e[a]*r,l=a<s-1?e[a+1]*r:t.length,u=E9(t,o,l,r,!1),u===u.next&&(u.steiner=!0),i.push(cAe(u));for(i.sort(rAe),a=0;a<i.length;a++)n=iAe(i[a],n);return n}function rAe(t,e){return t.x-e.x}function iAe(t,e){const n=aAe(t,e);if(!n)return e;const r=C9(n,t);return Np(r,r.next),Np(n,n.next)}function aAe(t,e){let n=e,r=-1/0,i;const a=t.x,s=t.y;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){const p=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(p<=a&&p>r&&(r=p,i=n.x<n.next.x?n:n.next,p===a))return i}n=n.next}while(n!==e);if(!i)return null;const o=i,l=i.x,u=i.y;let d=1/0,f;n=i;do a>=n.x&&n.x>=l&&a!==n.x&&hg(s<u?a:r,s,l,u,s<u?r:a,s,n.x,n.y)&&(f=Math.abs(s-n.y)/(a-n.x),zy(n,t)&&(f<d||f===d&&(n.x>i.x||n.x===i.x&&sAe(i,n)))&&(i=n,d=f)),n=n.next;while(n!==o);return i}function sAe(t,e){return zr(t.prev,t,e.prev)<0&&zr(e.next,t,t.next)<0}function oAe(t,e,n,r){let i=t;do i.z===0&&(i.z=GT(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,lAe(i)}function lAe(t){let e,n,r,i,a,s,o,l,u=1;do{for(n=t,t=null,a=null,s=0;n;){for(s++,r=n,o=0,e=0;e<u&&(o++,r=r.nextZ,!!r);e++);for(l=u;o>0||l>0&&r;)o!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,o--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;n=r}a.nextZ=null,u*=2}while(s>1);return t}function GT(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function cAe(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function hg(t,e,n,r,i,a,s,o){return(i-s)*(e-o)>=(t-s)*(a-o)&&(t-s)*(r-o)>=(n-s)*(e-o)&&(n-s)*(a-o)>=(i-s)*(r-o)}function uAe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!dAe(t,e)&&(zy(t,e)&&zy(e,t)&&fAe(t,e)&&(zr(t.prev,t,e.prev)||zr(t,e.prev,e))||lE(t,e)&&zr(t.prev,t,t.next)>0&&zr(e.prev,e,e.next)>0)}function zr(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function lE(t,e){return t.x===e.x&&t.y===e.y}function M9(t,e,n,r){const i=z_(zr(t,e,n)),a=z_(zr(t,e,r)),s=z_(zr(n,r,t)),o=z_(zr(n,r,e));return!!(i!==a&&s!==o||i===0&&B_(t,n,e)||a===0&&B_(t,r,e)||s===0&&B_(n,t,r)||o===0&&B_(n,e,r))}function B_(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function z_(t){return t>0?1:t<0?-1:0}function dAe(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&M9(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function zy(t,e){return zr(t.prev,t,t.next)<0?zr(t,e,t.next)>=0&&zr(t,t.prev,e)>=0:zr(t,e,t.prev)<0||zr(t,t.next,e)<0}function fAe(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,a=(t.y+e.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function C9(t,e){const n=new $T(t.i,t.x,t.y),r=new $T(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function pU(t,e,n,r){const i=new $T(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Hy(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function $T(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function hAe(t,e,n,r){let i=0;for(let a=e,s=n-r;a<n;a+=r)i+=(t[s]-t[a])*(t[a+1]+t[s+1]),s=a;return i}class Vc{static area(e){const n=e.length;let r=0;for(let i=n-1,a=0;a<n;i=a++)r+=e[i].x*e[a].y-e[a].x*e[i].y;return r*.5}static isClockWise(e){return Vc.area(e)<0}static triangulateShape(e,n){const r=[],i=[],a=[];mU(e),gU(r,e);let s=e.length;n.forEach(mU);for(let l=0;l<n.length;l++)i.push(s),s+=n[l].length,gU(r,n[l]);const o=ZNe.triangulate(r,i);for(let l=0;l<o.length;l+=3)a.push(o.slice(l,l+3));return a}}function mU(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function gU(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class cE extends En{constructor(e=new op([new lt(.5,.5),new lt(-.5,.5),new lt(-.5,-.5),new lt(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],a=[];for(let o=0,l=e.length;o<l;o++){const u=e[o];s(u)}this.setAttribute("position",new Bt(i,3)),this.setAttribute("uv",new Bt(a,2)),this.computeVertexNormals();function s(o){const l=[],u=n.curveSegments!==void 0?n.curveSegments:12,d=n.steps!==void 0?n.steps:1,f=n.depth!==void 0?n.depth:1;let p=n.bevelEnabled!==void 0?n.bevelEnabled:!0,m=n.bevelThickness!==void 0?n.bevelThickness:.2,y=n.bevelSize!==void 0?n.bevelSize:m-.1,_=n.bevelOffset!==void 0?n.bevelOffset:0,v=n.bevelSegments!==void 0?n.bevelSegments:3;const w=n.extrudePath,M=n.UVGenerator!==void 0?n.UVGenerator:pAe;let C,N=!1,P,R,k,U;w&&(C=w.getSpacedPoints(d),N=!0,p=!1,P=w.computeFrenetFrames(d,!1),R=new he,k=new he,U=new he),p||(v=0,m=0,y=0,_=0);const I=o.extractPoints(u);let L=I.shape;const z=I.holes;if(!Vc.isClockWise(L)){L=L.reverse();for(let Z=0,xe=z.length;Z<xe;Z++){const oe=z[Z];Vc.isClockWise(oe)&&(z[Z]=oe.reverse())}}const q=Vc.triangulateShape(L,z),Y=L;for(let Z=0,xe=z.length;Z<xe;Z++){const oe=z[Z];L=L.concat(oe)}function X(Z,xe,oe){return xe||console.error("THREE.ExtrudeGeometry: vec does not exist"),Z.clone().addScaledVector(xe,oe)}const ee=L.length,se=q.length;function W(Z,xe,oe){let tt,ke,st;const Ce=Z.x-xe.x,ct=Z.y-xe.y,$e=oe.x-Z.x,J=oe.y-Z.y,Q=Ce*Ce+ct*ct,ye=Ce*J-ct*$e;if(Math.abs(ye)>Number.EPSILON){const we=Math.sqrt(Q),De=Math.sqrt($e*$e+J*J),Ue=xe.x-ct/we,it=xe.y+Ce/we,nt=oe.x-J/De,ot=oe.y+$e/De,xt=((nt-Ue)*J-(ot-it)*$e)/(Ce*J-ct*$e);tt=Ue+Ce*xt-Z.x,ke=it+ct*xt-Z.y;const rt=tt*tt+ke*ke;if(rt<=2)return new lt(tt,ke);st=Math.sqrt(rt/2)}else{let we=!1;Ce>Number.EPSILON?$e>Number.EPSILON&&(we=!0):Ce<-Number.EPSILON?$e<-Number.EPSILON&&(we=!0):Math.sign(ct)===Math.sign(J)&&(we=!0),we?(tt=-ct,ke=Ce,st=Math.sqrt(Q)):(tt=Ce,ke=ct,st=Math.sqrt(Q/2))}return new lt(tt/st,ke/st)}const $=[];for(let Z=0,xe=Y.length,oe=xe-1,tt=Z+1;Z<xe;Z++,oe++,tt++)oe===xe&&(oe=0),tt===xe&&(tt=0),$[Z]=W(Y[Z],Y[oe],Y[tt]);const G=[];let j,B=$.concat();for(let Z=0,xe=z.length;Z<xe;Z++){const oe=z[Z];j=[];for(let tt=0,ke=oe.length,st=ke-1,Ce=tt+1;tt<ke;tt++,st++,Ce++)st===ke&&(st=0),Ce===ke&&(Ce=0),j[tt]=W(oe[tt],oe[st],oe[Ce]);G.push(j),B=B.concat(j)}for(let Z=0;Z<v;Z++){const xe=Z/v,oe=m*Math.cos(xe*Math.PI/2),tt=y*Math.sin(xe*Math.PI/2)+_;for(let ke=0,st=Y.length;ke<st;ke++){const Ce=X(Y[ke],$[ke],tt);ie(Ce.x,Ce.y,-oe)}for(let ke=0,st=z.length;ke<st;ke++){const Ce=z[ke];j=G[ke];for(let ct=0,$e=Ce.length;ct<$e;ct++){const J=X(Ce[ct],j[ct],tt);ie(J.x,J.y,-oe)}}}const ae=y+_;for(let Z=0;Z<ee;Z++){const xe=p?X(L[Z],B[Z],ae):L[Z];N?(k.copy(P.normals[0]).multiplyScalar(xe.x),R.copy(P.binormals[0]).multiplyScalar(xe.y),U.copy(C[0]).add(k).add(R),ie(U.x,U.y,U.z)):ie(xe.x,xe.y,0)}for(let Z=1;Z<=d;Z++)for(let xe=0;xe<ee;xe++){const oe=p?X(L[xe],B[xe],ae):L[xe];N?(k.copy(P.normals[Z]).multiplyScalar(oe.x),R.copy(P.binormals[Z]).multiplyScalar(oe.y),U.copy(C[Z]).add(k).add(R),ie(U.x,U.y,U.z)):ie(oe.x,oe.y,f/d*Z)}for(let Z=v-1;Z>=0;Z--){const xe=Z/v,oe=m*Math.cos(xe*Math.PI/2),tt=y*Math.sin(xe*Math.PI/2)+_;for(let ke=0,st=Y.length;ke<st;ke++){const Ce=X(Y[ke],$[ke],tt);ie(Ce.x,Ce.y,f+oe)}for(let ke=0,st=z.length;ke<st;ke++){const Ce=z[ke];j=G[ke];for(let ct=0,$e=Ce.length;ct<$e;ct++){const J=X(Ce[ct],j[ct],tt);N?ie(J.x,J.y+C[d-1].y,C[d-1].x+oe):ie(J.x,J.y,f+oe)}}}re(),de();function re(){const Z=i.length/3;if(p){let xe=0,oe=ee*xe;for(let tt=0;tt<se;tt++){const ke=q[tt];le(ke[2]+oe,ke[1]+oe,ke[0]+oe)}xe=d+v*2,oe=ee*xe;for(let tt=0;tt<se;tt++){const ke=q[tt];le(ke[0]+oe,ke[1]+oe,ke[2]+oe)}}else{for(let xe=0;xe<se;xe++){const oe=q[xe];le(oe[2],oe[1],oe[0])}for(let xe=0;xe<se;xe++){const oe=q[xe];le(oe[0]+ee*d,oe[1]+ee*d,oe[2]+ee*d)}}r.addGroup(Z,i.length/3-Z,0)}function de(){const Z=i.length/3;let xe=0;ce(Y,xe),xe+=Y.length;for(let oe=0,tt=z.length;oe<tt;oe++){const ke=z[oe];ce(ke,xe),xe+=ke.length}r.addGroup(Z,i.length/3-Z,1)}function ce(Z,xe){let oe=Z.length;for(;--oe>=0;){const tt=oe;let ke=oe-1;ke<0&&(ke=Z.length-1);for(let st=0,Ce=d+v*2;st<Ce;st++){const ct=ee*st,$e=ee*(st+1),J=xe+tt+ct,Q=xe+ke+ct,ye=xe+ke+$e,we=xe+tt+$e;fe(J,Q,ye,we)}}}function ie(Z,xe,oe){l.push(Z),l.push(xe),l.push(oe)}function le(Z,xe,oe){Ne(Z),Ne(xe),Ne(oe);const tt=i.length/3,ke=M.generateTopUV(r,i,tt-3,tt-2,tt-1);Se(ke[0]),Se(ke[1]),Se(ke[2])}function fe(Z,xe,oe,tt){Ne(Z),Ne(xe),Ne(tt),Ne(xe),Ne(oe),Ne(tt);const ke=i.length/3,st=M.generateSideWallUV(r,i,ke-6,ke-3,ke-2,ke-1);Se(st[0]),Se(st[1]),Se(st[3]),Se(st[1]),Se(st[2]),Se(st[3])}function Ne(Z){i.push(l[Z*3+0]),i.push(l[Z*3+1]),i.push(l[Z*3+2])}function Se(Z){a.push(Z.x),a.push(Z.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return mAe(n,r,e)}static fromJSON(e,n){const r=[];for(let a=0,s=e.shapes.length;a<s;a++){const o=n[e.shapes[a]];r.push(o)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new CS[i.type]().fromJSON(i)),new cE(r,e.options)}}const pAe={generateTopUV:function(t,e,n,r,i){const a=e[n*3],s=e[n*3+1],o=e[r*3],l=e[r*3+1],u=e[i*3],d=e[i*3+1];return[new lt(a,s),new lt(o,l),new lt(u,d)]},generateSideWallUV:function(t,e,n,r,i,a){const s=e[n*3],o=e[n*3+1],l=e[n*3+2],u=e[r*3],d=e[r*3+1],f=e[r*3+2],p=e[i*3],m=e[i*3+1],y=e[i*3+2],_=e[a*3],v=e[a*3+1],w=e[a*3+2];return Math.abs(o-d)<Math.abs(s-u)?[new lt(s,1-l),new lt(u,1-f),new lt(p,1-y),new lt(_,1-w)]:[new lt(o,1-l),new lt(d,1-f),new lt(m,1-y),new lt(v,1-w)]}};function mAe(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const a=t[r];n.shapes.push(a.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class uE extends Df{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,a,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new uE(e.radius,e.detail)}}class Rx extends Df{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Rx(e.radius,e.detail)}}class dE extends En{constructor(e=.5,n=1,r=32,i=1,a=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:a,thetaLength:s},r=Math.max(3,r),i=Math.max(1,i);const o=[],l=[],u=[],d=[];let f=e;const p=(n-e)/i,m=new he,y=new lt;for(let _=0;_<=i;_++){for(let v=0;v<=r;v++){const w=a+v/r*s;m.x=f*Math.cos(w),m.y=f*Math.sin(w),l.push(m.x,m.y,m.z),u.push(0,0,1),y.x=(m.x/n+1)/2,y.y=(m.y/n+1)/2,d.push(y.x,y.y)}f+=p}for(let _=0;_<i;_++){const v=_*(r+1);for(let w=0;w<r;w++){const M=w+v,C=M,N=M+r+1,P=M+r+2,R=M+1;o.push(C,N,R),o.push(N,P,R)}}this.setIndex(o),this.setAttribute("position",new Bt(l,3)),this.setAttribute("normal",new Bt(u,3)),this.setAttribute("uv",new Bt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dE(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class fE extends En{constructor(e=new op([new lt(0,.5),new lt(-.5,-.5),new lt(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],a=[],s=[];let o=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let d=0;d<e.length;d++)u(e[d]),this.addGroup(o,l,d),o+=l,l=0;this.setIndex(r),this.setAttribute("position",new Bt(i,3)),this.setAttribute("normal",new Bt(a,3)),this.setAttribute("uv",new Bt(s,2));function u(d){const f=i.length/3,p=d.extractPoints(n);let m=p.shape;const y=p.holes;Vc.isClockWise(m)===!1&&(m=m.reverse());for(let v=0,w=y.length;v<w;v++){const M=y[v];Vc.isClockWise(M)===!0&&(y[v]=M.reverse())}const _=Vc.triangulateShape(m,y);for(let v=0,w=y.length;v<w;v++){const M=y[v];m=m.concat(M)}for(let v=0,w=m.length;v<w;v++){const M=m[v];i.push(M.x,M.y,0),a.push(0,0,1),s.push(M.x,M.y)}for(let v=0,w=_.length;v<w;v++){const M=_[v],C=M[0]+f,N=M[1]+f,P=M[2]+f;r.push(C,N,P),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return gAe(n,e)}static fromJSON(e,n){const r=[];for(let i=0,a=e.shapes.length;i<a;i++){const s=n[e.shapes[i]];r.push(s)}return new fE(r,e.curveSegments)}}function gAe(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class Dx extends En{constructor(e=1,n=32,r=16,i=0,a=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:a,thetaStart:s,thetaLength:o},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(s+o,Math.PI);let u=0;const d=[],f=new he,p=new he,m=[],y=[],_=[],v=[];for(let w=0;w<=r;w++){const M=[],C=w/r;let N=0;w===0&&s===0?N=.5/n:w===r&&l===Math.PI&&(N=-.5/n);for(let P=0;P<=n;P++){const R=P/n;f.x=-e*Math.cos(i+R*a)*Math.sin(s+C*o),f.y=e*Math.cos(s+C*o),f.z=e*Math.sin(i+R*a)*Math.sin(s+C*o),y.push(f.x,f.y,f.z),p.copy(f).normalize(),_.push(p.x,p.y,p.z),v.push(R+N,1-C),M.push(u++)}d.push(M)}for(let w=0;w<r;w++)for(let M=0;M<n;M++){const C=d[w][M+1],N=d[w][M],P=d[w+1][M],R=d[w+1][M+1];(w!==0||s>0)&&m.push(C,N,R),(w!==r-1||l<Math.PI)&&m.push(N,P,R)}this.setIndex(m),this.setAttribute("position",new Bt(y,3)),this.setAttribute("normal",new Bt(_,3)),this.setAttribute("uv",new Bt(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dx(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class hE extends Df{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new hE(e.radius,e.detail)}}class pE extends En{constructor(e=1,n=.4,r=12,i=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:a},r=Math.floor(r),i=Math.floor(i);const s=[],o=[],l=[],u=[],d=new he,f=new he,p=new he;for(let m=0;m<=r;m++)for(let y=0;y<=i;y++){const _=y/i*a,v=m/r*Math.PI*2;f.x=(e+n*Math.cos(v))*Math.cos(_),f.y=(e+n*Math.cos(v))*Math.sin(_),f.z=n*Math.sin(v),o.push(f.x,f.y,f.z),d.x=e*Math.cos(_),d.y=e*Math.sin(_),p.subVectors(f,d).normalize(),l.push(p.x,p.y,p.z),u.push(y/i),u.push(m/r)}for(let m=1;m<=r;m++)for(let y=1;y<=i;y++){const _=(i+1)*m+y-1,v=(i+1)*(m-1)+y-1,w=(i+1)*(m-1)+y,M=(i+1)*m+y;s.push(_,v,M),s.push(v,w,M)}this.setIndex(s),this.setAttribute("position",new Bt(o,3)),this.setAttribute("normal",new Bt(l,3)),this.setAttribute("uv",new Bt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pE(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class mE extends En{constructor(e=1,n=.4,r=64,i=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:a,q:s},r=Math.floor(r),i=Math.floor(i);const o=[],l=[],u=[],d=[],f=new he,p=new he,m=new he,y=new he,_=new he,v=new he,w=new he;for(let C=0;C<=r;++C){const N=C/r*a*Math.PI*2;M(N,a,s,e,m),M(N+.01,a,s,e,y),v.subVectors(y,m),w.addVectors(y,m),_.crossVectors(v,w),w.crossVectors(_,v),_.normalize(),w.normalize();for(let P=0;P<=i;++P){const R=P/i*Math.PI*2,k=-n*Math.cos(R),U=n*Math.sin(R);f.x=m.x+(k*w.x+U*_.x),f.y=m.y+(k*w.y+U*_.y),f.z=m.z+(k*w.z+U*_.z),l.push(f.x,f.y,f.z),p.subVectors(f,m).normalize(),u.push(p.x,p.y,p.z),d.push(C/r),d.push(P/i)}}for(let C=1;C<=r;C++)for(let N=1;N<=i;N++){const P=(i+1)*(C-1)+(N-1),R=(i+1)*C+(N-1),k=(i+1)*C+N,U=(i+1)*(C-1)+N;o.push(P,R,U),o.push(R,k,U)}this.setIndex(o),this.setAttribute("position",new Bt(l,3)),this.setAttribute("normal",new Bt(u,3)),this.setAttribute("uv",new Bt(d,2));function M(C,N,P,R,k){const U=Math.cos(C),I=Math.sin(C),L=P/N*C,z=Math.cos(L);k.x=R*(2+z)*.5*U,k.y=R*(2+z)*I*.5,k.z=R*Math.sin(L)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mE(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class gE extends En{constructor(e=new ak(new he(-1,-1,0),new he(-1,1,0),new he(1,1,0)),n=64,r=1,i=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:a};const s=e.computeFrenetFrames(n,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new he,l=new he,u=new lt;let d=new he;const f=[],p=[],m=[],y=[];_(),this.setIndex(y),this.setAttribute("position",new Bt(f,3)),this.setAttribute("normal",new Bt(p,3)),this.setAttribute("uv",new Bt(m,2));function _(){for(let C=0;C<n;C++)v(C);v(a===!1?n:0),M(),w()}function v(C){d=e.getPointAt(C/n,d);const N=s.normals[C],P=s.binormals[C];for(let R=0;R<=i;R++){const k=R/i*Math.PI*2,U=Math.sin(k),I=-Math.cos(k);l.x=I*N.x+U*P.x,l.y=I*N.y+U*P.y,l.z=I*N.z+U*P.z,l.normalize(),p.push(l.x,l.y,l.z),o.x=d.x+r*l.x,o.y=d.y+r*l.y,o.z=d.z+r*l.z,f.push(o.x,o.y,o.z)}}function w(){for(let C=1;C<=n;C++)for(let N=1;N<=i;N++){const P=(i+1)*(C-1)+(N-1),R=(i+1)*C+(N-1),k=(i+1)*C+N,U=(i+1)*(C-1)+N;y.push(P,R,U),y.push(R,k,U)}}function M(){for(let C=0;C<=n;C++)for(let N=0;N<=i;N++)u.x=C/n,u.y=N/i,m.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new gE(new CS[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class ok extends En{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new he,a=new he;if(e.index!==null){const s=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let u=0,d=l.length;u<d;++u){const f=l[u],p=f.start,m=f.count;for(let y=p,_=p+m;y<_;y+=3)for(let v=0;v<3;v++){const w=o.getX(y+v),M=o.getX(y+(v+1)%3);i.fromBufferAttribute(s,w),a.fromBufferAttribute(s,M),vU(i,a,r)===!0&&(n.push(i.x,i.y,i.z),n.push(a.x,a.y,a.z))}}}else{const s=e.attributes.position;for(let o=0,l=s.count/3;o<l;o++)for(let u=0;u<3;u++){const d=3*o+u,f=3*o+(u+1)%3;i.fromBufferAttribute(s,d),a.fromBufferAttribute(s,f),vU(i,a,r)===!0&&(n.push(i.x,i.y,i.z),n.push(a.x,a.y,a.z))}}this.setAttribute("position",new Bt(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function vU(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var yU=Object.freeze({__proto__:null,BoxGeometry:Op,CapsuleGeometry:iE,CircleGeometry:aE,ConeGeometry:sE,CylinderGeometry:uv,DodecahedronGeometry:oE,EdgesGeometry:S9,ExtrudeGeometry:cE,IcosahedronGeometry:uE,LatheGeometry:Px,OctahedronGeometry:Rx,PlaneGeometry:Sd,PolyhedronGeometry:Df,RingGeometry:dE,ShapeGeometry:fE,SphereGeometry:Dx,TetrahedronGeometry:hE,TorusGeometry:pE,TorusKnotGeometry:mE,TubeGeometry:gE,WireframeGeometry:ok});class N9 extends ts{static get type(){return"ShadowMaterial"}constructor(e){super(),this.isShadowMaterial=!0,this.color=new Ct(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class A9 extends rl{static get type(){return"RawShaderMaterial"}constructor(e){super(e),this.isRawShaderMaterial=!0}}class lk extends ts{static get type(){return"MeshStandardMaterial"}constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.color=new Ct(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ct(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rf,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Do,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class T9 extends lk{static get type(){return"MeshPhysicalMaterial"}constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new lt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ti(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ct(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ct(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ct(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class P9 extends ts{static get type(){return"MeshPhongMaterial"}constructor(e){super(),this.isMeshPhongMaterial=!0,this.color=new Ct(16777215),this.specular=new Ct(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ct(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rf,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Do,this.combine=Ex,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class R9 extends ts{static get type(){return"MeshToonMaterial"}constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.color=new Ct(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ct(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rf,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class D9 extends ts{static get type(){return"MeshNormalMaterial"}constructor(e){super(),this.isMeshNormalMaterial=!0,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rf,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class k9 extends ts{static get type(){return"MeshLambertMaterial"}constructor(e){super(),this.isMeshLambertMaterial=!0,this.color=new Ct(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ct(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rf,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Do,this.combine=Ex,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class j9 extends ts{static get type(){return"MeshMatcapMaterial"}constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.color=new Ct(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rf,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class O9 extends Ms{static get type(){return"LineDashedMaterial"}constructor(e){super(),this.isLineDashedMaterial=!0,this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Xh(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function I9(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function L9(t){function e(i,a){return t[i]-t[a]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function YT(t,e,n){const r=t.length,i=new t.constructor(r);for(let a=0,s=0;s!==r;++a){const o=n[a]*e;for(let l=0;l!==e;++l)i[s++]=t[o+l]}return i}function ck(t,e,n,r){let i=1,a=t[0];for(;a!==void 0&&a[r]===void 0;)a=t[i++];if(a===void 0)return;let s=a[r];if(s!==void 0)if(Array.isArray(s))do s=a[r],s!==void 0&&(e.push(a.time),n.push.apply(n,s)),a=t[i++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[r],s!==void 0&&(e.push(a.time),s.toArray(n,n.length)),a=t[i++];while(a!==void 0);else do s=a[r],s!==void 0&&(e.push(a.time),n.push(s)),a=t[i++];while(a!==void 0)}function vAe(t,e,n,r,i=30){const a=t.clone();a.name=e;const s=[];for(let l=0;l<a.tracks.length;++l){const u=a.tracks[l],d=u.getValueSize(),f=[],p=[];for(let m=0;m<u.times.length;++m){const y=u.times[m]*i;if(!(y<n||y>=r)){f.push(u.times[m]);for(let _=0;_<d;++_)p.push(u.values[m*d+_])}}f.length!==0&&(u.times=Xh(f,u.times.constructor),u.values=Xh(p,u.values.constructor),s.push(u))}a.tracks=s;let o=1/0;for(let l=0;l<a.tracks.length;++l)o>a.tracks[l].times[0]&&(o=a.tracks[l].times[0]);for(let l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*o);return a.resetDuration(),a}function yAe(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,a=e/r;for(let s=0;s<i;++s){const o=n.tracks[s],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const u=t.tracks.find(function(w){return w.name===o.name&&w.ValueTypeName===l});if(u===void 0)continue;let d=0;const f=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);let p=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const y=o.times.length-1;let _;if(a<=o.times[0]){const w=d,M=f-d;_=o.values.slice(w,M)}else if(a>=o.times[y]){const w=y*f+d,M=w+f-d;_=o.values.slice(w,M)}else{const w=o.createInterpolant(),M=d,C=f-d;w.evaluate(a),_=w.resultBuffer.slice(M,C)}l==="quaternion"&&new es().fromArray(_).normalize().conjugate().toArray(_);const v=u.times.length;for(let w=0;w<v;++w){const M=w*m+p;if(l==="quaternion")es.multiplyQuaternionsFlat(u.values,M,_,0,u.values,M);else{const C=m-p*2;for(let N=0;N<C;++N)u.values[M+N]-=_[N]}}}return t.blendMode=HD,t}const xAe={convertArray:Xh,isTypedArray:I9,getKeyframeOrder:L9,sortedArray:YT,flattenJSON:ck,subclip:vAe,makeClipAdditive:yAe};class kx{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],a=n[r-1];e:{t:{let s;n:{r:if(!(e<i)){for(let o=r+2;;){if(i===void 0){if(e<a)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===o)break;if(a=i,i=n[++r],e<i)break t}s=n.length;break n}if(!(e>=a)){const o=n[1];e<o&&(r=2,a=o);for(let l=r-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=a,a=n[--r-1],e>=a)break t}s=r,r=0;break n}break e}for(;r<s;){const o=r+s>>>1;e<n[o]?s=o:r=o+1}if(i=n[r],a=n[r-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,a,i)}return this.interpolate_(r,a,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=e*i;for(let s=0;s!==i;++s)n[s]=r[a+s];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class F9 extends kx{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:$h,endingEnd:$h}}intervalChanged_(e,n,r){const i=this.parameterPositions;let a=e-2,s=e+1,o=i[a],l=i[s];if(o===void 0)switch(this.getSettings_().endingStart){case Yh:a=e,o=2*n-r;break;case jy:a=i.length-2,o=n+i[a]-i[a+1];break;default:a=e,o=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Yh:s=e,l=2*r-n;break;case jy:s=1,l=r+i[1]-i[0];break;default:s=e-1,l=n}const u=(r-n)*.5,d=this.valueSize;this._weightPrev=u/(n-o),this._weightNext=u/(l-r),this._offsetPrev=a*d,this._offsetNext=s*d}interpolate_(e,n,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,d=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,m=this._weightNext,y=(r-n)/(i-n),_=y*y,v=_*y,w=-p*v+2*p*_-p*y,M=(1+p)*v+(-1.5-2*p)*_+(-.5+p)*y+1,C=(-1-m)*v+(1.5+m)*_+.5*y,N=m*v-m*_;for(let P=0;P!==o;++P)a[P]=w*s[d+P]+M*s[u+P]+C*s[l+P]+N*s[f+P];return a}}class uk extends kx{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,d=(r-n)/(i-n),f=1-d;for(let p=0;p!==o;++p)a[p]=s[u+p]*f+s[l+p]*d;return a}}class U9 extends kx{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class nc{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Xh(n,this.TimeBufferType),this.values=Xh(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:Xh(e.times,Array),values:Xh(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new U9(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new uk(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new F9(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case ky:n=this.InterpolantFactoryMethodDiscrete;break;case SS:n=this.InterpolantFactoryMethodLinear;break;case Sw:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ky;case this.InterpolantFactoryMethodLinear:return SS;case this.InterpolantFactoryMethodSmooth:return Sw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let a=0,s=i-1;for(;a!==i&&r[a]<e;)++a;for(;s!==-1&&r[s]>n;)--s;if(++s,a!==0||s!==i){a>=s&&(s=Math.max(s,1),a=s-1);const o=this.getValueSize();this.times=r.slice(a,s),this.values=this.values.slice(a*o,s*o)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,a=r.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==a;o++){const l=r[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,s),e=!1;break}s=l}if(i!==void 0&&I9(i))for(let o=0,l=i.length;o!==l;++o){const u=i[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===Sw,a=e.length-1;let s=1;for(let o=1;o<a;++o){let l=!1;const u=e[o],d=e[o+1];if(u!==d&&(o!==1||u!==e[0]))if(i)l=!0;else{const f=o*r,p=f-r,m=f+r;for(let y=0;y!==r;++y){const _=n[f+y];if(_!==n[p+y]||_!==n[m+y]){l=!0;break}}}if(l){if(o!==s){e[s]=e[o];const f=o*r,p=s*r;for(let m=0;m!==r;++m)n[p+m]=n[f+m]}++s}}if(a>0){e[s]=e[a];for(let o=a*r,l=s*r,u=0;u!==r;++u)n[l+u]=n[o+u];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=n.slice(0,s*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}nc.prototype.TimeBufferType=Float32Array;nc.prototype.ValueBufferType=Float32Array;nc.prototype.DefaultInterpolation=SS;class Ip extends nc{constructor(e,n,r){super(e,n,r)}}Ip.prototype.ValueTypeName="bool";Ip.prototype.ValueBufferType=Array;Ip.prototype.DefaultInterpolation=ky;Ip.prototype.InterpolantFactoryMethodLinear=void 0;Ip.prototype.InterpolantFactoryMethodSmooth=void 0;class dk extends nc{}dk.prototype.ValueTypeName="color";class Vy extends nc{}Vy.prototype.ValueTypeName="number";class B9 extends kx{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=(r-n)/(i-n);let u=e*o;for(let d=u+o;u!==d;u+=4)es.slerpFlat(a,0,s,u-o,s,u,l);return a}}class jx extends nc{InterpolantFactoryMethodLinear(e){return new B9(this.times,this.values,this.getValueSize(),e)}}jx.prototype.ValueTypeName="quaternion";jx.prototype.InterpolantFactoryMethodSmooth=void 0;class Lp extends nc{constructor(e,n,r){super(e,n,r)}}Lp.prototype.ValueTypeName="string";Lp.prototype.ValueBufferType=Array;Lp.prototype.DefaultInterpolation=ky;Lp.prototype.InterpolantFactoryMethodLinear=void 0;Lp.prototype.InterpolantFactoryMethodSmooth=void 0;class Wy extends nc{}Wy.prototype.ValueTypeName="vector";class Gy{constructor(e="",n=-1,r=[],i=Y2){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=To(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,o=r.length;s!==o;++s)n.push(_Ae(r[s]).scale(i));const a=new this(e.name,e.duration,n,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,s=r.length;a!==s;++a)n.push(nc.toJSON(r[a]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const a=n.length,s=[];for(let o=0;o<a;o++){let l=[],u=[];l.push((o+a-1)%a,o,(o+1)%a),u.push(0,1,0);const d=L9(l);l=YT(l,1,d),u=YT(u,1,d),!i&&l[0]===0&&(l.push(a),u.push(u[0])),s.push(new Vy(".morphTargetInfluences["+n[o].name+"]",l,u).scale(1/r))}return new this(e,-1,s)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},a=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const u=e[o],d=u.name.match(a);if(d&&d.length>1){const f=d[1];let p=i[f];p||(i[f]=p=[]),p.push(u)}}const s=[];for(const o in i)s.push(this.CreateFromMorphTargetSequence(o,i[o],n,r));return s}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,p,m,y,_){if(m.length!==0){const v=[],w=[];ck(m,v,w,y),v.length!==0&&_.push(new f(p,v,w))}},i=[],a=e.name||"default",s=e.fps||30,o=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let f=0;f<u.length;f++){const p=u[f].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let y;for(y=0;y<p.length;y++)if(p[y].morphTargets)for(let _=0;_<p[y].morphTargets.length;_++)m[p[y].morphTargets[_]]=-1;for(const _ in m){const v=[],w=[];for(let M=0;M!==p[y].morphTargets.length;++M){const C=p[y];v.push(C.time),w.push(C.morphTarget===_?1:0)}i.push(new Vy(".morphTargetInfluence["+_+"]",v,w))}l=m.length*s}else{const m=".bones["+n[f].name+"]";r(Wy,m+".position",p,"pos",i),r(jx,m+".quaternion",p,"rot",i),r(Wy,m+".scale",p,"scl",i)}}return i.length===0?null:new this(a,l,i,o)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const a=this.tracks[r];n=Math.max(n,a.times[a.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function bAe(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Vy;case"vector":case"vector2":case"vector3":case"vector4":return Wy;case"color":return dk;case"quaternion":return jx;case"bool":case"boolean":return Ip;case"string":return Lp}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function _Ae(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=bAe(t.type);if(t.times===void 0){const n=[],r=[];ck(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const $u={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class fk{constructor(e,n,r){const i=this;let a=!1,s=0,o=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(d){o++,a===!1&&i.onStart!==void 0&&i.onStart(d,s,o),a=!0},this.itemEnd=function(d){s++,i.onProgress!==void 0&&i.onProgress(d,s,o),s===o&&(a=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(d){i.onError!==void 0&&i.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,f){return u.push(d,f),this},this.removeHandler=function(d){const f=u.indexOf(d);return f!==-1&&u.splice(f,2),this},this.getHandler=function(d){for(let f=0,p=u.length;f<p;f+=2){const m=u[f],y=u[f+1];if(m.global&&(m.lastIndex=0),m.test(d))return y}return null}}}const z9=new fk;class no{constructor(e){this.manager=e!==void 0?e:z9,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,a){r.load(e,i,n,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}no.DEFAULT_MATERIAL_NAME="__DEFAULT";const Iu={};class wAe extends Error{constructor(e,n){super(e),this.response=n}}class ud extends no{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=$u.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(a),this.manager.itemEnd(e)},0),a;if(Iu[e]!==void 0){Iu[e].push({onLoad:n,onProgress:r,onError:i});return}Iu[e]=[],Iu[e].push({onLoad:n,onProgress:r,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(s).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const d=Iu[e],f=u.body.getReader(),p=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),m=p?parseInt(p):0,y=m!==0;let _=0;const v=new ReadableStream({start(w){M();function M(){f.read().then(({done:C,value:N})=>{if(C)w.close();else{_+=N.byteLength;const P=new ProgressEvent("progress",{lengthComputable:y,loaded:_,total:m});for(let R=0,k=d.length;R<k;R++){const U=d[R];U.onProgress&&U.onProgress(P)}w.enqueue(N),M()}},C=>{w.error(C)})}}});return new Response(v)}else throw new wAe(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(d=>new DOMParser().parseFromString(d,o));case"json":return u.json();default:if(o===void 0)return u.text();{const f=/charset="?([^;"\s]*)"?/i.exec(o),p=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(p);return u.arrayBuffer().then(y=>m.decode(y))}}}).then(u=>{$u.add(e,u);const d=Iu[e];delete Iu[e];for(let f=0,p=d.length;f<p;f++){const m=d[f];m.onLoad&&m.onLoad(u)}}).catch(u=>{const d=Iu[e];if(d===void 0)throw this.manager.itemError(e),u;delete Iu[e];for(let f=0,p=d.length;f<p;f++){const m=d[f];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class SAe extends no{constructor(e){super(e)}load(e,n,r,i){const a=this,s=new ud(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{n(a.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=Gy.parse(e[r]);n.push(i)}return n}}class EAe extends no{constructor(e){super(e)}load(e,n,r,i){const a=this,s=[],o=new nE,l=new ud(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(a.withCredentials);let u=0;function d(f){l.load(e[f],function(p){const m=a.parse(p,!0);s[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(o.minFilter=gi),o.image=s,o.format=m.format,o.needsUpdate=!0,n&&n(o))},r,i)}if(Array.isArray(e))for(let f=0,p=e.length;f<p;++f)d(f);else l.load(e,function(f){const p=a.parse(f,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let y=0;y<m;y++){s[y]={mipmaps:[]};for(let _=0;_<p.mipmapCount;_++)s[y].mipmaps.push(p.mipmaps[y*p.mipmapCount+_]),s[y].format=p.format,s[y].width=p.width,s[y].height=p.height}o.image=s}else o.image.width=p.width,o.image.height=p.height,o.mipmaps=p.mipmaps;p.mipmapCount===1&&(o.minFilter=gi),o.format=p.format,o.needsUpdate=!0,n&&n(o)},r,i);return o}}class $y extends no{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=$u.get(e);if(s!==void 0)return a.manager.itemStart(e),setTimeout(function(){n&&n(s),a.manager.itemEnd(e)},0),s;const o=Ly("img");function l(){d(),$u.add(e,this),n&&n(this),a.manager.itemEnd(e)}function u(f){d(),i&&i(f),a.manager.itemError(e),a.manager.itemEnd(e)}function d(){o.removeEventListener("load",l,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),a.manager.itemStart(e),o.src=e,o}}class MAe extends no{constructor(e){super(e)}load(e,n,r,i){const a=new Ax;a.colorSpace=Vs;const s=new $y(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function l(u){s.load(e[u],function(d){a.images[u]=d,o++,o===6&&(a.needsUpdate=!0,n&&n(a))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return a}}class CAe extends no{constructor(e){super(e)}load(e,n,r,i){const a=this,s=new Hc,o=new ud(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(a.withCredentials),o.load(e,function(l){let u;try{u=a.parse(l)}catch(d){if(i!==void 0)i(d);else{console.error(d);return}}u.image!==void 0?s.image=u.image:u.data!==void 0&&(s.image.width=u.width,s.image.height=u.height,s.image.data=u.data),s.wrapS=u.wrapS!==void 0?u.wrapS:Jo,s.wrapT=u.wrapT!==void 0?u.wrapT:Jo,s.magFilter=u.magFilter!==void 0?u.magFilter:gi,s.minFilter=u.minFilter!==void 0?u.minFilter:gi,s.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(s.colorSpace=u.colorSpace),u.flipY!==void 0&&(s.flipY=u.flipY),u.format!==void 0&&(s.format=u.format),u.type!==void 0&&(s.type=u.type),u.mipmaps!==void 0&&(s.mipmaps=u.mipmaps,s.minFilter=Oc),u.mipmapCount===1&&(s.minFilter=gi),u.generateMipmaps!==void 0&&(s.generateMipmaps=u.generateMipmaps),s.needsUpdate=!0,n&&n(s,u)},r,i),s}}class NAe extends no{constructor(e){super(e)}load(e,n,r,i){const a=new Hr,s=new $y(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){a.image=o,a.needsUpdate=!0,n!==void 0&&n(a)},r,i),a}}class kf extends Un{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Ct(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}class H9 extends kf{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Un.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ct(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const zN=new rn,xU=new he,bU=new he;class hk{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new lt(512,512),this.map=null,this.mapPass=null,this.matrix=new rn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Tx,this._frameExtents=new lt(1,1),this._viewportCount=1,this._viewports=[new Sn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;xU.setFromMatrixPosition(e.matrixWorld),n.position.copy(xU),bU.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(bU),n.updateMatrixWorld(),zN.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(zN),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(zN)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class AAe extends hk{constructor(){super(new hi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=zg*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||n.far;(r!==n.fov||i!==n.aspect||a!==n.far)&&(n.fov=r,n.aspect=i,n.far=a,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class V9 extends kf{constructor(e,n,r=0,i=Math.PI/3,a=0,s=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Un.DEFAULT_UP),this.updateMatrix(),this.target=new Un,this.distance=r,this.angle=i,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new AAe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const _U=new rn,P0=new he,HN=new he;class TAe extends hk{constructor(){super(new hi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new lt(4,2),this._viewportCount=6,this._viewports=[new Sn(2,1,1,1),new Sn(0,1,1,1),new Sn(3,1,1,1),new Sn(1,1,1,1),new Sn(3,0,1,1),new Sn(1,0,1,1)],this._cubeDirections=[new he(1,0,0),new he(-1,0,0),new he(0,0,1),new he(0,0,-1),new he(0,1,0),new he(0,-1,0)],this._cubeUps=[new he(0,1,0),new he(0,1,0),new he(0,1,0),new he(0,1,0),new he(0,0,1),new he(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,a=e.distance||r.far;a!==r.far&&(r.far=a,r.updateProjectionMatrix()),P0.setFromMatrixPosition(e.matrixWorld),r.position.copy(P0),HN.copy(r.position),HN.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(HN),r.updateMatrixWorld(),i.makeTranslation(-P0.x,-P0.y,-P0.z),_U.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_U)}}class W9 extends kf{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new TAe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class PAe extends hk{constructor(){super(new wf(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class G9 extends kf{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Un.DEFAULT_UP),this.updateMatrix(),this.target=new Un,this.shadow=new PAe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class $9 extends kf{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class Y9 extends kf{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class q9{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new he)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,a=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.282095),n.addScaledVector(s[1],.488603*i),n.addScaledVector(s[2],.488603*a),n.addScaledVector(s[3],.488603*r),n.addScaledVector(s[4],1.092548*(r*i)),n.addScaledVector(s[5],1.092548*(i*a)),n.addScaledVector(s[6],.315392*(3*a*a-1)),n.addScaledVector(s[7],1.092548*(r*a)),n.addScaledVector(s[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,a=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.886227),n.addScaledVector(s[1],2*.511664*i),n.addScaledVector(s[2],2*.511664*a),n.addScaledVector(s[3],2*.511664*r),n.addScaledVector(s[4],2*.429043*r*i),n.addScaledVector(s[5],2*.429043*i*a),n.addScaledVector(s[6],.743125*a*a-.247708),n.addScaledVector(s[7],2*.429043*r*a),n.addScaledVector(s[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,a=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*a,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*a,n[6]=.315392*(3*a*a-1),n[7]=1.092548*r*a,n[8]=.546274*(r*r-i*i)}}class X9 extends kf{constructor(e=new q9,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class vE extends no{constructor(e){super(e),this.textures={}}load(e,n,r,i){const a=this,s=new ud(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{n(a.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(a){return n[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),n[a]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Ct().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const s=e.uniforms[a];switch(i.uniforms[a]={},s.type){case"t":i.uniforms[a].value=r(s.value);break;case"c":i.uniforms[a].value=new Ct().setHex(s.value);break;case"v2":i.uniforms[a].value=new lt().fromArray(s.value);break;case"v3":i.uniforms[a].value=new he().fromArray(s.value);break;case"v4":i.uniforms[a].value=new Sn().fromArray(s.value);break;case"m3":i.uniforms[a].value=new pn().fromArray(s.value);break;case"m4":i.uniforms[a].value=new rn().fromArray(s.value);break;default:i.uniforms[a].value=s.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)i.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),i.normalScale=new lt().fromArray(a)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new lt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return vE.createMaterialFromType(e)}static createMaterialFromType(e){const n={ShadowMaterial:N9,SpriteMaterial:QD,RawShaderMaterial:A9,ShaderMaterial:rl,PointsMaterial:ek,MeshPhysicalMaterial:T9,MeshStandardMaterial:lk,MeshPhongMaterial:P9,MeshToonMaterial:R9,MeshNormalMaterial:D9,MeshLambertMaterial:k9,MeshDepthMaterial:K2,MeshDistanceMaterial:Z2,MeshBasicMaterial:wd,MeshMatcapMaterial:j9,LineDashedMaterial:O9,LineBasicMaterial:Ms,Material:ts};return new n[e]}}class qT{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class yE extends En{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class K9 extends no{constructor(e){super(e)}load(e,n,r,i){const a=this,s=new ud(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{n(a.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(m,y){if(n[y]!==void 0)return n[y];const v=m.interleavedBuffers[y],w=a(m,v.buffer),M=ug(v.type,w),C=new eE(M,v.stride);return C.uuid=v.uuid,n[y]=C,C}function a(m,y){if(r[y]!==void 0)return r[y];const v=m.arrayBuffers[y],w=new Uint32Array(v).buffer;return r[y]=w,w}const s=e.isInstancedBufferGeometry?new yE:new En,o=e.data.index;if(o!==void 0){const m=ug(o.type,o.array);s.setIndex(new cr(m,1))}const l=e.data.attributes;for(const m in l){const y=l[m];let _;if(y.isInterleavedBufferAttribute){const v=i(e.data,y.data);_=new Eo(v,y.itemSize,y.offset,y.normalized)}else{const v=ug(y.type,y.array),w=y.isInstancedBufferAttribute?Cp:cr;_=new w(v,y.itemSize,y.normalized)}y.name!==void 0&&(_.name=y.name),y.usage!==void 0&&_.setUsage(y.usage),s.setAttribute(m,_)}const u=e.data.morphAttributes;if(u)for(const m in u){const y=u[m],_=[];for(let v=0,w=y.length;v<w;v++){const M=y[v];let C;if(M.isInterleavedBufferAttribute){const N=i(e.data,M.data);C=new Eo(N,M.itemSize,M.offset,M.normalized)}else{const N=ug(M.type,M.array);C=new cr(N,M.itemSize,M.normalized)}M.name!==void 0&&(C.name=M.name),_.push(C)}s.morphAttributes[m]=_}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,y=f.length;m!==y;++m){const _=f[m];s.addGroup(_.start,_.count,_.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new he;p.center!==void 0&&m.fromArray(p.center),s.boundingSphere=new Gi(m,p.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class RAe extends no{constructor(e){super(e)}load(e,n,r,i){const a=this,s=this.path===""?qT.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new ud(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const d=u.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(u,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?qT.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const a=new ud(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const s=await a.loadAsync(e,n),o=JSON.parse(s),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(o)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,i),s=this.parseImages(e.images,function(){n!==void 0&&n(u)}),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,a,l,o,r),d=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,d),this.bindLightTargets(u),n!==void 0){let f=!1;for(const p in s)if(s[p].data instanceof HTMLImageElement){f=!0;break}f===!1&&n(u)}return u}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,i,o,s,n),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const a=new op().fromJSON(e[r]);n[a.uuid]=a}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(a){a.isBone&&(i[a.uuid]=a)}),e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=new tE().fromJSON(e[a],i);r[o.uuid]=o}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new K9;for(let a=0,s=e.length;a<s;a++){let o;const l=e[a];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(l);break;default:l.type in yU?o=yU[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),r[l.uuid]=o}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const a=new vE;a.setTextures(n);for(let s=0,o=e.length;s<o;s++){const l=e[s];r[l.uuid]===void 0&&(r[l.uuid]=a.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],a=Gy.parse(i);n[a.uuid]=a}return n}parseImages(e,n){const r=this,i={};let a;function s(l){return r.manager.itemStart(l),a.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const u=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return s(d)}else return l.data?{data:ug(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new fk(n);a=new $y(l),a.setCrossOrigin(this.crossOrigin);for(let u=0,d=e.length;u<d;u++){const f=e[u],p=f.url;if(Array.isArray(p)){const m=[];for(let y=0,_=p.length;y<_;y++){const v=p[y],w=o(v);w!==null&&(w instanceof HTMLImageElement?m.push(w):m.push(new Hc(w.data,w.width,w.height)))}i[f.uuid]=new qh(m)}else{const m=o(f.url);i[f.uuid]=new qh(m)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function a(s){if(typeof s=="string"){const o=s,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:n.resourcePath+o;return await i.loadAsync(l)}else return s.data?{data:ug(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){i=new $y(this.manager),i.setCrossOrigin(this.crossOrigin);for(let s=0,o=e.length;s<o;s++){const l=e[s],u=l.url;if(Array.isArray(u)){const d=[];for(let f=0,p=u.length;f<p;f++){const m=u[f],y=await a(m);y!==null&&(y instanceof HTMLImageElement?d.push(y):d.push(new Hc(y.data,y.width,y.height)))}r[l.uuid]=new qh(d)}else{const d=await a(l.url);r[l.uuid]=new qh(d)}}}return r}parseTextures(e,n){function r(a,s){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),s[a])}const i={};if(e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=e[a];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),n[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=n[o.image],u=l.data;let d;Array.isArray(u)?(d=new Ax,u.length===6&&(d.needsUpdate=!0)):(u&&u.data?d=new Hc:d=new Hr,u&&(d.needsUpdate=!0)),d.source=l,d.uuid=o.uuid,o.name!==void 0&&(d.name=o.name),o.mapping!==void 0&&(d.mapping=r(o.mapping,DAe)),o.channel!==void 0&&(d.channel=o.channel),o.offset!==void 0&&d.offset.fromArray(o.offset),o.repeat!==void 0&&d.repeat.fromArray(o.repeat),o.center!==void 0&&d.center.fromArray(o.center),o.rotation!==void 0&&(d.rotation=o.rotation),o.wrap!==void 0&&(d.wrapS=r(o.wrap[0],wU),d.wrapT=r(o.wrap[1],wU)),o.format!==void 0&&(d.format=o.format),o.internalFormat!==void 0&&(d.internalFormat=o.internalFormat),o.type!==void 0&&(d.type=o.type),o.colorSpace!==void 0&&(d.colorSpace=o.colorSpace),o.minFilter!==void 0&&(d.minFilter=r(o.minFilter,SU)),o.magFilter!==void 0&&(d.magFilter=r(o.magFilter,SU)),o.anisotropy!==void 0&&(d.anisotropy=o.anisotropy),o.flipY!==void 0&&(d.flipY=o.flipY),o.generateMipmaps!==void 0&&(d.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(d.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(d.compareFunction=o.compareFunction),o.userData!==void 0&&(d.userData=o.userData),i[o.uuid]=d}return i}parseObject(e,n,r,i,a){let s;function o(p){return n[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),n[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let y=0,_=p.length;y<_;y++){const v=p[y];r[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),m.push(r[v])}return m}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function u(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let d,f;switch(e.type){case"Scene":s=new ZD,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new Ct(e.background):s.background=u(e.background)),e.environment!==void 0&&(s.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new J2(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new Q2(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new hi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new wf(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new $9(e.color,e.intensity);break;case"DirectionalLight":s=new G9(e.color,e.intensity),s.target=e.target||"";break;case"PointLight":s=new W9(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new Y9(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new V9(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),s.target=e.target||"";break;case"HemisphereLight":s=new H9(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new X9().fromJSON(e);break;case"SkinnedMesh":d=o(e.geometry),f=l(e.material),s=new h9(d,f),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":d=o(e.geometry),f=l(e.material),s=new Rr(d,f);break;case"InstancedMesh":d=o(e.geometry),f=l(e.material);const p=e.count,m=e.instanceMatrix,y=e.instanceColor;s=new p9(d,f,p),s.instanceMatrix=new Cp(new Float32Array(m.array),16),y!==void 0&&(s.instanceColor=new Cp(new Float32Array(y.array),y.itemSize));break;case"BatchedMesh":d=o(e.geometry),f=l(e.material),s=new m9(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,f),s.geometry=d,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._visibility=e.visibility,s._active=e.active,s._bounds=e.bounds.map(_=>{const v=new ji;v.min.fromArray(_.boxMin),v.max.fromArray(_.boxMax);const w=new Gi;return w.radius=_.sphereRadius,w.center.fromArray(_.sphereCenter),{boxInitialized:_.boxInitialized,box:v,sphereInitialized:_.sphereInitialized,sphere:w}}),s._maxInstanceCount=e.maxInstanceCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._geometryCount=e.geometryCount,s._matricesTexture=u(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(s._colorsTexture=u(e.colorsTexture.uuid));break;case"LOD":s=new f9;break;case"Line":s=new Nf(o(e.geometry),l(e.material));break;case"LineLoop":s=new g9(o(e.geometry),l(e.material));break;case"LineSegments":s=new Zc(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new v9(o(e.geometry),l(e.material));break;case"Sprite":s=new d9(l(e.material));break;case"Group":s=new fg;break;case"Bone":s=new JD;break;default:s=new Un}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(s.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)s.add(this.parseObject(p[m],n,r,i,a))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const y=p[m];s.animations.push(a[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const y=p[m],_=s.getObjectByProperty("uuid",y.object);_!==void 0&&s.addLevel(_,y.distance,y.hysteresis)}}return s}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(n){if(n.isDirectionalLight||n.isSpotLight){const r=n.target,i=e.getObjectByProperty("uuid",r);i!==void 0?n.target=i:n.target=new Un}})}}const DAe={UVMapping:B2,CubeReflectionMapping:ld,CubeRefractionMapping:Cf,EquirectangularReflectionMapping:Ty,EquirectangularRefractionMapping:Py,CubeUVReflectionMapping:ov},wU={RepeatWrapping:Ry,ClampToEdgeWrapping:Jo,MirroredRepeatWrapping:Dy},SU={NearestFilter:Ra,NearestMipmapNearestFilter:DD,NearestMipmapLinearFilter:cg,LinearFilter:gi,LinearMipmapNearestFilter:Y0,LinearMipmapLinearFilter:Oc};class kAe extends no{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=$u.get(e);if(s!==void 0){if(a.manager.itemStart(e),s.then){s.then(u=>{n&&n(u),a.manager.itemEnd(e)}).catch(u=>{i&&i(u)});return}return setTimeout(function(){n&&n(s),a.manager.itemEnd(e)},0),s}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const l=fetch(e,o).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(u){return $u.add(e,u),n&&n(u),a.manager.itemEnd(e),u}).catch(function(u){i&&i(u),$u.remove(e),a.manager.itemError(e),a.manager.itemEnd(e)});$u.add(e,l),a.manager.itemStart(e)}}let H_;class pk{static getContext(){return H_===void 0&&(H_=new(window.AudioContext||window.webkitAudioContext)),H_}static setContext(e){H_=e}}class jAe extends no{constructor(e){super(e)}load(e,n,r,i){const a=this,s=new ud(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{const u=l.slice(0);pk.getContext().decodeAudioData(u,function(f){n(f)}).catch(o)}catch(u){o(u)}},r,i);function o(l){i?i(l):console.error(l),a.manager.itemError(e)}}}const EU=new rn,MU=new rn,wh=new rn;class OAe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new hi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new hi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,wh.copy(e.projectionMatrix);const i=n.eyeSep/2,a=i*n.near/n.focus,s=n.near*Math.tan(ap*n.fov*.5)/n.zoom;let o,l;MU.elements[12]=-i,EU.elements[12]=i,o=-s*n.aspect+a,l=s*n.aspect+a,wh.elements[0]=2*n.near/(l-o),wh.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(wh),o=-s*n.aspect-a,l=s*n.aspect-a,wh.elements[0]=2*n.near/(l-o),wh.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(wh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(MU),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(EU)}}class mk{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=CU(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=CU();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function CU(){return performance.now()}const Sh=new he,NU=new es,IAe=new he,Eh=new he;class LAe extends Un{constructor(){super(),this.type="AudioListener",this.context=pk.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new mk}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Sh,NU,IAe),Eh.set(0,0,-1).applyQuaternion(NU),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Sh.x,i),n.positionY.linearRampToValueAtTime(Sh.y,i),n.positionZ.linearRampToValueAtTime(Sh.z,i),n.forwardX.linearRampToValueAtTime(Eh.x,i),n.forwardY.linearRampToValueAtTime(Eh.y,i),n.forwardZ.linearRampToValueAtTime(Eh.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(Sh.x,Sh.y,Sh.z),n.setOrientation(Eh.x,Eh.y,Eh.z,r.x,r.y,r.z)}}class Z9 extends Un{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Mh=new he,AU=new es,FAe=new he,Ch=new he;class UAe extends Z9{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Mh,AU,FAe),Ch.set(0,0,1).applyQuaternion(AU);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Mh.x,r),n.positionY.linearRampToValueAtTime(Mh.y,r),n.positionZ.linearRampToValueAtTime(Mh.z,r),n.orientationX.linearRampToValueAtTime(Ch.x,r),n.orientationY.linearRampToValueAtTime(Ch.y,r),n.orientationZ.linearRampToValueAtTime(Ch.z,r)}else n.setPosition(Mh.x,Mh.y,Mh.z),n.setOrientation(Ch.x,Ch.y,Ch.z)}}class BAe{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class Q9{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,a,s;switch(n){case"quaternion":i=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,a=e*i+i;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==i;++o)r[a+o]=r[o];s=n}else{s+=n;const o=n/s;this._mixBufferRegion(r,a,0,o,i)}this.cumulativeWeight=s}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-a,n)}s>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,u=n+n;l!==u;++l)if(r[l]!==r[l+n]){o.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let a=r,s=i;a!==s;++a)n[a]=n[i+a%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,a){if(i>=.5)for(let s=0;s!==a;++s)e[n+s]=e[r+s]}_slerp(e,n,r,i){es.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,a){const s=this._workIndex*a;es.multiplyQuaternionsFlat(e,s,e,n,e,r),es.slerpFlat(e,n,e,n,e,s,i)}_lerp(e,n,r,i,a){const s=1-i;for(let o=0;o!==a;++o){const l=n+o;e[l]=e[l]*s+e[r+o]*i}}_lerpAdditive(e,n,r,i,a){for(let s=0;s!==a;++s){const o=n+s;e[o]=e[o]+e[r+s]*i}}}const gk="\\[\\]\\.:\\/",zAe=new RegExp("["+gk+"]","g"),vk="[^"+gk+"]",HAe="[^"+gk.replace("\\.","")+"]",VAe=/((?:WC+[\/:])*)/.source.replace("WC",vk),WAe=/(WCOD+)?/.source.replace("WCOD",HAe),GAe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",vk),$Ae=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",vk),YAe=new RegExp("^"+VAe+WAe+GAe+$Ae+"$"),qAe=["material","materials","bones","map"];class XAe{constructor(e,n,r){const i=r||Ln.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=r.length;i!==a;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class Ln{constructor(e,n,r){this.path=n,this.parsedPath=r||Ln.parseTrackName(n),this.node=Ln.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new Ln.Composite(e,n,r):new Ln(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(zAe,"")}static parseTrackName(e){const n=YAe.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const a=r.nodeName.substring(i+1);qAe.indexOf(a)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=a)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(a){for(let s=0;s<a.length;s++){const o=a[s];if(o.name===n||o.uuid===n)return o;const l=r(o.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let a=n.propertyIndex;if(e||(e=Ln.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===u){u=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const s=e[i];if(s===void 0){const u=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(a!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ln.Composite=XAe;Ln.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ln.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ln.prototype.GetterByBindingType=[Ln.prototype._getValue_direct,Ln.prototype._getValue_array,Ln.prototype._getValue_arrayElement,Ln.prototype._getValue_toArray];Ln.prototype.SetterByBindingTypeAndVersioning=[[Ln.prototype._setValue_direct,Ln.prototype._setValue_direct_setNeedsUpdate,Ln.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ln.prototype._setValue_array,Ln.prototype._setValue_array_setNeedsUpdate,Ln.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ln.prototype._setValue_arrayElement,Ln.prototype._setValue_arrayElement_setNeedsUpdate,Ln.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ln.prototype._setValue_fromArray,Ln.prototype._setValue_fromArray_setNeedsUpdate,Ln.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class KAe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=To(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,a=this._bindings,s=a.length;let o,l=e.length,u=this.nCachedObjects_;for(let d=0,f=arguments.length;d!==f;++d){const p=arguments[d],m=p.uuid;let y=n[m];if(y===void 0){y=l++,n[m]=y,e.push(p);for(let _=0,v=s;_!==v;++_)a[_].push(new Ln(p,r[_],i[_]))}else if(y<u){o=e[y];const _=--u,v=e[_];n[v.uuid]=y,e[y]=v,n[m]=_,e[_]=p;for(let w=0,M=s;w!==M;++w){const C=a[w],N=C[_];let P=C[y];C[y]=N,P===void 0&&(P=new Ln(p,r[w],i[w])),C[_]=P}}else e[y]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let a=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const l=arguments[s],u=l.uuid,d=n[u];if(d!==void 0&&d>=a){const f=a++,p=e[f];n[p.uuid]=d,e[d]=p,n[u]=f,e[f]=l;for(let m=0,y=i;m!==y;++m){const _=r[m],v=_[f],w=_[d];_[d]=v,_[f]=w}}}this.nCachedObjects_=a}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let a=this.nCachedObjects_,s=e.length;for(let o=0,l=arguments.length;o!==l;++o){const u=arguments[o],d=u.uuid,f=n[d];if(f!==void 0)if(delete n[d],f<a){const p=--a,m=e[p],y=--s,_=e[y];n[m.uuid]=f,e[f]=m,n[_.uuid]=p,e[p]=_,e.pop();for(let v=0,w=i;v!==w;++v){const M=r[v],C=M[p],N=M[y];M[f]=C,M[p]=N,M.pop()}}else{const p=--s,m=e[p];p>0&&(n[m.uuid]=f),e[f]=m,e.pop();for(let y=0,_=i;y!==_;++y){const v=r[y];v[f]=v[p],v.pop()}}}this.nCachedObjects_=a}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const a=this._bindings;if(i!==void 0)return a[i];const s=this._paths,o=this._parsedPaths,l=this._objects,u=l.length,d=this.nCachedObjects_,f=new Array(u);i=a.length,r[e]=i,s.push(e),o.push(n),a.push(f);for(let p=d,m=l.length;p!==m;++p){const y=l[p];f[p]=new Ln(y,e,n)}return f}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length-1,l=s[o],u=e[o];n[u]=r,s[r]=l,s.pop(),a[r]=a[o],a.pop(),i[r]=i[o],i.pop()}}}class J9{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const a=n.tracks,s=a.length,o=new Array(s),l={endingStart:$h,endingEnd:$h};for(let u=0;u!==s;++u){const d=a[u].createInterpolant(null);o[u]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=I7,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,a=e._clip.duration,s=a/i,o=i/a;e.warp(1,s,n),this.warp(o,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,a=i.time,s=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=a,l[1]=a+r,u[0]=e/s,u[1]=n/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const l=(e-a)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const s=this._updateTime(n),o=this._updateWeight(e);if(o>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case HD:for(let d=0,f=l.length;d!==f;++d)l[d].evaluate(s),u[d].accumulateAdditive(o);break;case Y2:default:for(let d=0,f=l.length;d!==f;++d)l[d].evaluate(s),u[d].accumulate(i,o)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,a=this._loopCount;const s=r===L7;if(e===0)return a===-1?i:s&&(a&1)===1?n-i:i;if(r===O7){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=n||i<0){const o=Math.floor(i/n);i-=n*o,a+=Math.abs(o);const l=this.repetitions-a;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(s&&(a&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=Yh,i.endingEnd=Yh):(e?i.endingStart=this.zeroSlopeAtStart?Yh:$h:i.endingStart=jy,n?i.endingEnd=this.zeroSlopeAtEnd?Yh:$h:i.endingEnd=jy)}_scheduleFading(e,n,r){const i=this._mixer,a=i.time;let s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=a,l[0]=n,o[1]=a+e,l[1]=r,this}}const ZAe=new Float32Array(1);class QAe extends Kc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,a=i.length,s=e._propertyBindings,o=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let d=u[l];d===void 0&&(d={},u[l]=d);for(let f=0;f!==a;++f){const p=i[f],m=p.name;let y=d[m];if(y!==void 0)++y.referenceCount,s[f]=y;else{if(y=s[f],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,m));continue}const _=n&&n._propertyBindings[f].binding.parsedPath;y=new Q9(Ln.create(r,m,_),p.ValueTypeName,p.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,m),s[f]=y}o[f].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,a=this._actionsByClip[i];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const a=n[r];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const a=n[r];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,a=this._actionsByClip;let s=a[n];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[n]=s;else{const o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,o=s[a],l=o.knownActions,u=l[l.length-1],d=e._byClipCacheIndex;u._byClipCacheIndex=d,l[d]=u,l.pop(),e._byClipCacheIndex=null;const f=o.actionByRoot,p=(e._localRoot||this._root).uuid;delete f[p],l.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const a=n[r];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,a=n[i];e._cacheIndex=i,n[i]=e,a._cacheIndex=r,n[r]=a}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,a=n[i];e._cacheIndex=i,n[i]=e,a._cacheIndex=r,n[r]=a}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,a=this._bindings;let s=i[n];s===void 0&&(s={},i[n]=s),s[r]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,a=r.path,s=this._bindingsByRootAndName,o=s[i],l=n[n.length-1],u=e._cacheIndex;l._cacheIndex=u,n[u]=l,n.pop(),delete o[a],Object.keys(o).length===0&&delete s[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,a=n[i];e._cacheIndex=i,n[i]=e,a._cacheIndex=r,n[r]=a}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,a=n[i];e._cacheIndex=i,n[i]=e,a._cacheIndex=r,n[r]=a}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new uk(new Float32Array(2),new Float32Array(2),1,ZAe),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,a=n[i];e.__cacheIndex=i,n[i]=e,a.__cacheIndex=r,n[r]=a}clipAction(e,n,r){const i=n||this._root,a=i.uuid;let s=typeof e=="string"?Gy.findByName(i,e):e;const o=s!==null?s.uuid:e,l=this._actionsByClip[o];let u=null;if(r===void 0&&(s!==null?r=s.blendMode:r=Y2),l!==void 0){const f=l.actionByRoot[a];if(f!==void 0&&f.blendMode===r)return f;u=l.knownActions[0],s===null&&(s=u._clip)}if(s===null)return null;const d=new J9(this,s,n,r);return this._bindAction(d,u),this._addInactiveAction(d,o,a),d}existingAction(e,n){const r=n||this._root,i=r.uuid,a=typeof e=="string"?Gy.findByName(r,e):e,s=a?a.uuid:e,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let u=0;u!==r;++u)n[u]._update(i,e,a,s);const o=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)o[u].apply(s);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,a=i[r];if(a!==void 0){const s=a.knownActions;for(let o=0,l=s.length;o!==l;++o){const u=s[o];this._deactivateAction(u);const d=u._cacheIndex,f=n[n.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,f._cacheIndex=d,n[d]=f,n.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const s in r){const o=r[s].actionByRoot,l=o[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,a=i[n];if(a!==void 0)for(const s in a){const o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class yk{constructor(e){this.value=e}clone(){return new yk(this.value.clone===void 0?this.value:this.value.clone())}}let JAe=0;class eTe extends Kc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:JAe++}),this.name="",this.usage=Oy,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++){const a=Array.isArray(n[r])?n[r]:[n[r]];for(let s=0;s<a.length;s++)this.uniforms.push(a[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class NS extends eE{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class tTe{constructor(e,n,r,i,a){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=a,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const TU=new rn;class e${constructor(e,n,r=0,i=1/0){this.ray=new jp(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new sp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return TU.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(TU),this}intersectObject(e,n=!0,r=[]){return XT(e,this,r,n),r.sort(PU),r}intersectObjects(e,n=!0,r=[]){for(let i=0,a=e.length;i<a;i++)XT(e[i],this,r,n);return r.sort(PU),r}}function PU(t,e){return t.distance-e.distance}function XT(t,e,n,r){let i=!0;if(t.layers.test(e.layers)&&t.raycast(e,n)===!1&&(i=!1),i===!0&&r===!0){const a=t.children;for(let s=0,o=a.length;s<o;s++)XT(a[s],e,n,!0)}}class KT{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(ti(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class nTe{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}class xk{constructor(e,n,r,i){xk.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,n,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,n=0){for(let r=0;r<4;r++)this.elements[r]=e[r+n];return this}set(e,n,r,i){const a=this.elements;return a[0]=e,a[2]=n,a[1]=r,a[3]=i,this}}const RU=new lt;class rTe{constructor(e=new lt(1/0,1/0),n=new lt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=RU.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,RU).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const DU=new he,V_=new he;class t${constructor(e=new he,n=new he){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){DU.subVectors(e,this.start),V_.subVectors(this.end,this.start);const r=V_.dot(V_);let a=V_.dot(DU)/r;return n&&(a=ti(a,0,1)),a}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const kU=new he;class iTe extends Un{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new En,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,l=32;s<l;s++,o++){const u=s/l*Math.PI*2,d=o/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(d),Math.sin(d),1)}r.setAttribute("position",new Bt(i,3));const a=new Ms({fog:!1,toneMapped:!1});this.cone=new Zc(r,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),kU.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(kU),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const cf=new he,W_=new rn,VN=new rn;class aTe extends Zc{constructor(e){const n=n$(e),r=new En,i=[],a=[],s=new Ct(0,0,1),o=new Ct(0,1,0);for(let u=0;u<n.length;u++){const d=n[u];d.parent&&d.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),a.push(s.r,s.g,s.b),a.push(o.r,o.g,o.b))}r.setAttribute("position",new Bt(i,3)),r.setAttribute("color",new Bt(a,3));const l=new Ms({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");VN.copy(this.root.matrixWorld).invert();for(let a=0,s=0;a<n.length;a++){const o=n[a];o.parent&&o.parent.isBone&&(W_.multiplyMatrices(VN,o.matrixWorld),cf.setFromMatrixPosition(W_),i.setXYZ(s,cf.x,cf.y,cf.z),W_.multiplyMatrices(VN,o.parent.matrixWorld),cf.setFromMatrixPosition(W_),i.setXYZ(s+1,cf.x,cf.y,cf.z),s+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function n$(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,n$(t.children[n]));return e}class sTe extends Rr{constructor(e,n,r){const i=new Dx(n,4,2),a=new wd({wireframe:!0,fog:!1,toneMapped:!1});super(i,a),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const oTe=new he,jU=new Ct,OU=new Ct;class lTe extends Un{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Rx(n);i.rotateY(Math.PI*.5),this.material=new wd({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=i.getAttribute("position"),s=new Float32Array(a.count*3);i.setAttribute("color",new cr(s,3)),this.add(new Rr(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");jU.copy(this.light.color),OU.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const a=r<i/2?jU:OU;n.setXYZ(r,a.r,a.g,a.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(oTe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class cTe extends Zc{constructor(e=10,n=10,r=4473924,i=8947848){r=new Ct(r),i=new Ct(i);const a=n/2,s=e/n,o=e/2,l=[],u=[];for(let p=0,m=0,y=-o;p<=n;p++,y+=s){l.push(-o,0,y,o,0,y),l.push(y,0,-o,y,0,o);const _=p===a?r:i;_.toArray(u,m),m+=3,_.toArray(u,m),m+=3,_.toArray(u,m),m+=3,_.toArray(u,m),m+=3}const d=new En;d.setAttribute("position",new Bt(l,3)),d.setAttribute("color",new Bt(u,3));const f=new Ms({vertexColors:!0,toneMapped:!1});super(d,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class uTe extends Zc{constructor(e=10,n=16,r=8,i=64,a=4473924,s=8947848){a=new Ct(a),s=new Ct(s);const o=[],l=[];if(n>1)for(let f=0;f<n;f++){const p=f/n*(Math.PI*2),m=Math.sin(p)*e,y=Math.cos(p)*e;o.push(0,0,0),o.push(m,0,y);const _=f&1?a:s;l.push(_.r,_.g,_.b),l.push(_.r,_.g,_.b)}for(let f=0;f<r;f++){const p=f&1?a:s,m=e-e/r*f;for(let y=0;y<i;y++){let _=y/i*(Math.PI*2),v=Math.sin(_)*m,w=Math.cos(_)*m;o.push(v,0,w),l.push(p.r,p.g,p.b),_=(y+1)/i*(Math.PI*2),v=Math.sin(_)*m,w=Math.cos(_)*m,o.push(v,0,w),l.push(p.r,p.g,p.b)}}const u=new En;u.setAttribute("position",new Bt(o,3)),u.setAttribute("color",new Bt(l,3));const d=new Ms({vertexColors:!0,toneMapped:!1});super(u,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const IU=new he,G_=new he,LU=new he;class dTe extends Un{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new En;i.setAttribute("position",new Bt([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const a=new Ms({fog:!1,toneMapped:!1});this.lightPlane=new Nf(i,a),this.add(this.lightPlane),i=new En,i.setAttribute("position",new Bt([0,0,0,0,0,1],3)),this.targetLine=new Nf(i,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),IU.setFromMatrixPosition(this.light.matrixWorld),G_.setFromMatrixPosition(this.light.target.matrixWorld),LU.subVectors(G_,IU),this.lightPlane.lookAt(G_),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(G_),this.targetLine.scale.z=LU.length()}}const $_=new he,Zr=new Nx;class fTe extends Zc{constructor(e){const n=new En,r=new Ms({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],a=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(y,_){l(y),l(_)}function l(y){i.push(0,0,0),a.push(0,0,0),s[y]===void 0&&(s[y]=[]),s[y].push(i.length/3-1)}n.setAttribute("position",new Bt(i,3)),n.setAttribute("color",new Bt(a,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const u=new Ct(16755200),d=new Ct(16711680),f=new Ct(43775),p=new Ct(16777215),m=new Ct(3355443);this.setColors(u,d,f,p,m)}setColors(e,n,r,i,a){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,n.r,n.g,n.b),o.setXYZ(25,n.r,n.g,n.b),o.setXYZ(26,n.r,n.g,n.b),o.setXYZ(27,n.r,n.g,n.b),o.setXYZ(28,n.r,n.g,n.b),o.setXYZ(29,n.r,n.g,n.b),o.setXYZ(30,n.r,n.g,n.b),o.setXYZ(31,n.r,n.g,n.b),o.setXYZ(32,r.r,r.g,r.b),o.setXYZ(33,r.r,r.g,r.b),o.setXYZ(34,r.r,r.g,r.b),o.setXYZ(35,r.r,r.g,r.b),o.setXYZ(36,r.r,r.g,r.b),o.setXYZ(37,r.r,r.g,r.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,a.r,a.g,a.b),o.setXYZ(41,a.r,a.g,a.b),o.setXYZ(42,a.r,a.g,a.b),o.setXYZ(43,a.r,a.g,a.b),o.setXYZ(44,a.r,a.g,a.b),o.setXYZ(45,a.r,a.g,a.b),o.setXYZ(46,a.r,a.g,a.b),o.setXYZ(47,a.r,a.g,a.b),o.setXYZ(48,a.r,a.g,a.b),o.setXYZ(49,a.r,a.g,a.b),o.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;Zr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),di("c",n,e,Zr,0,0,-1),di("t",n,e,Zr,0,0,1),di("n1",n,e,Zr,-r,-i,-1),di("n2",n,e,Zr,r,-i,-1),di("n3",n,e,Zr,-r,i,-1),di("n4",n,e,Zr,r,i,-1),di("f1",n,e,Zr,-r,-i,1),di("f2",n,e,Zr,r,-i,1),di("f3",n,e,Zr,-r,i,1),di("f4",n,e,Zr,r,i,1),di("u1",n,e,Zr,r*.7,i*1.1,-1),di("u2",n,e,Zr,-r*.7,i*1.1,-1),di("u3",n,e,Zr,0,i*2,-1),di("cf1",n,e,Zr,-r,0,1),di("cf2",n,e,Zr,r,0,1),di("cf3",n,e,Zr,0,-i,1),di("cf4",n,e,Zr,0,i,1),di("cn1",n,e,Zr,-r,0,-1),di("cn2",n,e,Zr,r,0,-1),di("cn3",n,e,Zr,0,-i,-1),di("cn4",n,e,Zr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function di(t,e,n,r,i,a,s){$_.set(i,a,s).unproject(r);const o=e[t];if(o!==void 0){const l=n.getAttribute("position");for(let u=0,d=o.length;u<d;u++)l.setXYZ(o[u],$_.x,$_.y,$_.z)}}const Y_=new ji;class hTe extends Zc{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),a=new En;a.setIndex(new cr(r,1)),a.setAttribute("position",new cr(i,3)),super(a,new Ms({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Y_.setFromObject(this.object),Y_.isEmpty())return;const n=Y_.min,r=Y_.max,i=this.geometry.attributes.position,a=i.array;a[0]=r.x,a[1]=r.y,a[2]=r.z,a[3]=n.x,a[4]=r.y,a[5]=r.z,a[6]=n.x,a[7]=n.y,a[8]=r.z,a[9]=r.x,a[10]=n.y,a[11]=r.z,a[12]=r.x,a[13]=r.y,a[14]=n.z,a[15]=n.x,a[16]=r.y,a[17]=n.z,a[18]=n.x,a[19]=n.y,a[20]=n.z,a[21]=r.x,a[22]=n.y,a[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class pTe extends Zc{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new En;a.setIndex(new cr(r,1)),a.setAttribute("position",new Bt(i,3)),super(a,new Ms({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class mTe extends Nf{constructor(e,n=1,r=16776960){const i=r,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new En;s.setAttribute("position",new Bt(a,3)),s.computeBoundingSphere(),super(s,new Ms({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new En;l.setAttribute("position",new Bt(o,3)),l.computeBoundingSphere(),this.add(new Rr(l,new wd({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const FU=new he;let q_,WN;class gTe extends Un{constructor(e=new he(0,0,1),n=new he(0,0,0),r=1,i=16776960,a=r*.2,s=a*.2){super(),this.type="ArrowHelper",q_===void 0&&(q_=new En,q_.setAttribute("position",new Bt([0,0,0,0,1,0],3)),WN=new uv(0,.5,1,5,1),WN.translate(0,-.5,0)),this.position.copy(n),this.line=new Nf(q_,new Ms({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Rr(WN,new wd({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,a,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{FU.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(FU,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class vTe extends Zc{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new En;i.setAttribute("position",new Bt(n,3)),i.setAttribute("color",new Bt(r,3));const a=new Ms({vertexColors:!0,toneMapped:!1});super(i,a),this.type="AxesHelper"}setColors(e,n,r){const i=new Ct,a=this.geometry.attributes.color.array;return i.set(e),i.toArray(a,0),i.toArray(a,3),i.set(n),i.toArray(a,6),i.toArray(a,9),i.set(r),i.toArray(a,12),i.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class yTe{constructor(){this.type="ShapePath",this.color=new Ct,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new Uy,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,a,s){return this.currentPath.bezierCurveTo(e,n,r,i,a,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(w){const M=[];for(let C=0,N=w.length;C<N;C++){const P=w[C],R=new op;R.curves=P.curves,M.push(R)}return M}function r(w,M){const C=M.length;let N=!1;for(let P=C-1,R=0;R<C;P=R++){let k=M[P],U=M[R],I=U.x-k.x,L=U.y-k.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(k=M[R],I=-I,U=M[P],L=-L),w.y<k.y||w.y>U.y)continue;if(w.y===k.y){if(w.x===k.x)return!0}else{const z=L*(w.x-k.x)-I*(w.y-k.y);if(z===0)return!0;if(z<0)continue;N=!N}}else{if(w.y!==k.y)continue;if(U.x<=w.x&&w.x<=k.x||k.x<=w.x&&w.x<=U.x)return!0}}return N}const i=Vc.isClockWise,a=this.subPaths;if(a.length===0)return[];let s,o,l;const u=[];if(a.length===1)return o=a[0],l=new op,l.curves=o.curves,u.push(l),u;let d=!i(a[0].getPoints());d=e?!d:d;const f=[],p=[];let m=[],y=0,_;p[y]=void 0,m[y]=[];for(let w=0,M=a.length;w<M;w++)o=a[w],_=o.getPoints(),s=i(_),s=e?!s:s,s?(!d&&p[y]&&y++,p[y]={s:new op,p:_},p[y].s.curves=o.curves,d&&y++,m[y]=[]):m[y].push({h:o,p:_[0]});if(!p[0])return n(a);if(p.length>1){let w=!1,M=0;for(let C=0,N=p.length;C<N;C++)f[C]=[];for(let C=0,N=p.length;C<N;C++){const P=m[C];for(let R=0;R<P.length;R++){const k=P[R];let U=!0;for(let I=0;I<p.length;I++)r(k.p,p[I].p)&&(C!==I&&M++,U?(U=!1,f[I].push(k)):w=!0);U&&f[C].push(k)}}M>0&&w===!1&&(m=f)}let v;for(let w=0,M=p.length;w<M;w++){l=p[w].s,u.push(l),v=m[w];for(let C=0,N=v.length;C<N;C++)l.holes.push(v[C].h)}return u}}class xTe extends Kc{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class bTe extends Kl{constructor(e=1,n=1,r=1,i={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,n,{...i,count:r}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Sx}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Sx);const _Te=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:RD,AddEquation:pf,AddOperation:N7,AdditiveAnimationBlendMode:HD,AdditiveBlending:OT,AgXToneMapping:D7,AlphaFormat:ID,AlwaysCompare:$7,AlwaysDepth:G1,AlwaysStencilFunc:UT,AmbientLight:$9,AnimationAction:J9,AnimationClip:Gy,AnimationLoader:SAe,AnimationMixer:QAe,AnimationObjectGroup:KAe,AnimationUtils:xAe,ArcCurve:y9,ArrayCamera:l9,ArrowHelper:gTe,AttachedBindMode:FT,Audio:Z9,AudioAnalyser:BAe,AudioContext:pk,AudioListener:LAe,AudioLoader:jAe,AxesHelper:vTe,BackSide:_s,BasicDepthPacking:F7,BasicShadowMap:o7,BatchedMesh:m9,Bone:JD,BooleanKeyframeTrack:Ip,Box2:rTe,Box3:ji,Box3Helper:pTe,BoxGeometry:Op,BoxHelper:hTe,BufferAttribute:cr,BufferGeometry:En,BufferGeometryLoader:K9,ByteType:kD,Cache:$u,Camera:Nx,CameraHelper:fTe,CanvasTexture:VNe,CapsuleGeometry:iE,CatmullRomCurve3:x9,CineonToneMapping:P7,CircleGeometry:aE,ClampToEdgeWrapping:Jo,Clock:mk,Color:Ct,ColorKeyframeTrack:dk,ColorManagement:kn,CompressedArrayTexture:zNe,CompressedCubeTexture:HNe,CompressedTexture:nE,CompressedTextureLoader:EAe,ConeGeometry:sE,ConstantAlphaFactor:E7,ConstantColorFactor:w7,Controls:xTe,CubeCamera:e9,CubeReflectionMapping:ld,CubeRefractionMapping:Cf,CubeTexture:Ax,CubeTextureLoader:MAe,CubeUVReflectionMapping:ov,CubicBezierCurve:nk,CubicBezierCurve3:b9,CubicInterpolant:F9,CullFaceBack:jT,CullFaceFront:s7,CullFaceFrontBack:y1e,CullFaceNone:a7,Curve:tc,CurvePath:w9,CustomBlending:l7,CustomToneMapping:R7,CylinderGeometry:uv,Cylindrical:nTe,Data3DTexture:$D,DataArrayTexture:q2,DataTexture:Hc,DataTextureLoader:CAe,DataUtils:RSe,DecrementStencilOp:D1e,DecrementWrapStencilOp:j1e,DefaultLoadingManager:z9,DepthFormat:ip,DepthStencilFormat:Mp,DepthTexture:KD,DetachedBindMode:j7,DirectionalLight:G9,DirectionalLightHelper:dTe,DiscreteInterpolant:U9,DodecahedronGeometry:oE,DoubleSide:$s,DstAlphaFactor:v7,DstColorFactor:x7,DynamicCopyUsage:X1e,DynamicDrawUsage:V1e,DynamicReadUsage:$1e,EdgesGeometry:S9,EllipseCurve:rE,EqualCompare:H7,EqualDepth:Y1,EqualStencilFunc:F1e,EquirectangularReflectionMapping:Ty,EquirectangularRefractionMapping:Py,Euler:Do,EventDispatcher:Kc,ExtrudeGeometry:cE,FileLoader:ud,Float16BufferAttribute:LSe,Float32BufferAttribute:Bt,FloatType:Xs,Fog:J2,FogExp2:Q2,FramebufferTexture:BNe,FrontSide:od,Frustum:Tx,GLBufferAttribute:tTe,GLSL1:Z1e,GLSL3:BT,GreaterCompare:V7,GreaterDepth:X1,GreaterEqualCompare:G7,GreaterEqualDepth:q1,GreaterEqualStencilFunc:H1e,GreaterStencilFunc:B1e,GridHelper:cTe,Group:fg,HalfFloatType:lv,HemisphereLight:H9,HemisphereLightHelper:lTe,IcosahedronGeometry:uE,ImageBitmapLoader:kAe,ImageLoader:$y,ImageUtils:K7,IncrementStencilOp:R1e,IncrementWrapStencilOp:k1e,InstancedBufferAttribute:Cp,InstancedBufferGeometry:yE,InstancedInterleavedBuffer:NS,InstancedMesh:p9,Int16BufferAttribute:OSe,Int32BufferAttribute:ISe,Int8BufferAttribute:DSe,IntType:z2,InterleavedBuffer:eE,InterleavedBufferAttribute:Eo,Interpolant:kx,InterpolateDiscrete:ky,InterpolateLinear:SS,InterpolateSmooth:Sw,InvertStencilOp:O1e,KeepStencilOp:Oh,KeyframeTrack:nc,LOD:f9,LatheGeometry:Px,Layers:sp,LessCompare:z7,LessDepth:$1,LessEqualCompare:WD,LessEqualDepth:Sp,LessEqualStencilFunc:U1e,LessStencilFunc:L1e,Light:kf,LightProbe:X9,Line:Nf,Line3:t$,LineBasicMaterial:Ms,LineCurve:rk,LineCurve3:_9,LineDashedMaterial:O9,LineLoop:g9,LineSegments:Zc,LinearFilter:gi,LinearInterpolant:uk,LinearMipMapLinearFilter:w1e,LinearMipMapNearestFilter:_1e,LinearMipmapLinearFilter:Oc,LinearMipmapNearestFilter:Y0,LinearSRGBColorSpace:kp,LinearToneMapping:A7,LinearTransfer:Cx,Loader:no,LoaderUtils:qT,LoadingManager:fk,LoopOnce:O7,LoopPingPong:L7,LoopRepeat:I7,LuminanceAlphaFormat:UD,LuminanceFormat:FD,MOUSE:kh,Material:ts,MaterialLoader:vE,MathUtils:Y7,Matrix2:xk,Matrix3:pn,Matrix4:rn,MaxEquation:f7,Mesh:Rr,MeshBasicMaterial:wd,MeshDepthMaterial:K2,MeshDistanceMaterial:Z2,MeshLambertMaterial:k9,MeshMatcapMaterial:j9,MeshNormalMaterial:D9,MeshPhongMaterial:P9,MeshPhysicalMaterial:T9,MeshStandardMaterial:lk,MeshToonMaterial:R9,MinEquation:d7,MirroredRepeatWrapping:Dy,MixOperation:C7,MultiplyBlending:LT,MultiplyOperation:Ex,NearestFilter:Ra,NearestMipMapLinearFilter:b1e,NearestMipMapNearestFilter:x1e,NearestMipmapLinearFilter:cg,NearestMipmapNearestFilter:DD,NeutralToneMapping:k7,NeverCompare:B7,NeverDepth:W1,NeverStencilFunc:I1e,NoBlending:Qu,NoColorSpace:zu,NoToneMapping:zc,NormalAnimationBlendMode:Y2,NormalBlending:rp,NotEqualCompare:W7,NotEqualDepth:K1,NotEqualStencilFunc:z1e,NumberKeyframeTrack:Vy,Object3D:Un,ObjectLoader:RAe,ObjectSpaceNormalMap:U7,OctahedronGeometry:Rx,OneFactor:p7,OneMinusConstantAlphaFactor:M7,OneMinusConstantColorFactor:S7,OneMinusDstAlphaFactor:y7,OneMinusDstColorFactor:b7,OneMinusSrcAlphaFactor:V1,OneMinusSrcColorFactor:g7,OrthographicCamera:wf,PCFShadowMap:U2,PCFSoftShadowMap:$0,PMREMGenerator:zT,Path:Uy,PerspectiveCamera:hi,Plane:Fu,PlaneGeometry:Sd,PlaneHelper:mTe,PointLight:W9,PointLightHelper:sTe,Points:v9,PointsMaterial:ek,PolarGridHelper:uTe,PolyhedronGeometry:Df,PositionalAudio:UAe,PropertyBinding:Ln,PropertyMixer:Q9,QuadraticBezierCurve:ik,QuadraticBezierCurve3:ak,Quaternion:es,QuaternionKeyframeTrack:jx,QuaternionLinearInterpolant:B9,RED_GREEN_RGTC2_Format:_S,RED_RGTC1_Format:zD,REVISION:Sx,RGBADepthPacking:VD,RGBAFormat:Ja,RGBAIntegerFormat:$2,RGBA_ASTC_10x10_Format:mS,RGBA_ASTC_10x5_Format:fS,RGBA_ASTC_10x6_Format:hS,RGBA_ASTC_10x8_Format:pS,RGBA_ASTC_12x10_Format:gS,RGBA_ASTC_12x12_Format:vS,RGBA_ASTC_4x4_Format:iS,RGBA_ASTC_5x4_Format:aS,RGBA_ASTC_5x5_Format:sS,RGBA_ASTC_6x5_Format:oS,RGBA_ASTC_6x6_Format:lS,RGBA_ASTC_8x5_Format:cS,RGBA_ASTC_8x6_Format:uS,RGBA_ASTC_8x8_Format:dS,RGBA_BPTC_Format:Q0,RGBA_ETC2_EAC_Format:rS,RGBA_PVRTC_2BPPV1_Format:eS,RGBA_PVRTC_4BPPV1_Format:J1,RGBA_S3TC_DXT1_Format:X0,RGBA_S3TC_DXT3_Format:K0,RGBA_S3TC_DXT5_Format:Z0,RGBDepthPacking:N1e,RGBFormat:LD,RGBIntegerFormat:S1e,RGB_BPTC_SIGNED_Format:yS,RGB_BPTC_UNSIGNED_Format:xS,RGB_ETC1_Format:tS,RGB_ETC2_Format:nS,RGB_PVRTC_2BPPV1_Format:Q1,RGB_PVRTC_4BPPV1_Format:Z1,RGB_S3TC_DXT1_Format:q0,RGDepthPacking:A1e,RGFormat:BD,RGIntegerFormat:G2,RawShaderMaterial:A9,Ray:jp,Raycaster:e$,RectAreaLight:Y9,RedFormat:W2,RedIntegerFormat:Mx,ReinhardToneMapping:T7,RenderTarget:Z7,RepeatWrapping:Ry,ReplaceStencilOp:P1e,ReverseSubtractEquation:u7,RingGeometry:dE,SIGNED_RED_GREEN_RGTC2_Format:wS,SIGNED_RED_RGTC1_Format:bS,SRGBColorSpace:Vs,SRGBTransfer:er,Scene:ZD,ShaderChunk:bn,ShaderLib:Ul,ShaderMaterial:rl,ShadowMaterial:N9,Shape:op,ShapeGeometry:fE,ShapePath:yTe,ShapeUtils:Vc,ShortType:jD,Skeleton:tE,SkeletonHelper:aTe,SkinnedMesh:h9,Source:qh,Sphere:Gi,SphereGeometry:Dx,Spherical:KT,SphericalHarmonics3:q9,SplineCurve:sk,SpotLight:V9,SpotLightHelper:iTe,Sprite:d9,SpriteMaterial:QD,SrcAlphaFactor:H1,SrcAlphaSaturateFactor:_7,SrcColorFactor:m7,StaticCopyUsage:q1e,StaticDrawUsage:Oy,StaticReadUsage:G1e,StereoCamera:OAe,StreamCopyUsage:K1e,StreamDrawUsage:W1e,StreamReadUsage:Y1e,StringKeyframeTrack:Lp,SubtractEquation:c7,SubtractiveBlending:IT,TOUCH:jh,TangentSpaceNormalMap:Rf,TetrahedronGeometry:hE,Texture:Hr,TextureLoader:NAe,TextureUtils:bNe,TorusGeometry:pE,TorusKnotGeometry:mE,Triangle:Ys,TriangleFanDrawMode:C1e,TriangleStripDrawMode:M1e,TrianglesDrawMode:E1e,TubeGeometry:gE,UVMapping:B2,Uint16BufferAttribute:YD,Uint32BufferAttribute:qD,Uint8BufferAttribute:kSe,Uint8ClampedBufferAttribute:jSe,Uniform:yk,UniformsGroup:eTe,UniformsLib:wt,UniformsUtils:Fy,UnsignedByteType:Xl,UnsignedInt248Type:Ep,UnsignedInt5999Type:OD,UnsignedIntType:cd,UnsignedShort4444Type:H2,UnsignedShort5551Type:V2,UnsignedShortType:Bg,VSMShadowMap:Ll,Vector2:lt,Vector3:he,Vector4:Sn,VectorKeyframeTrack:Wy,VideoTexture:UNe,WebGL3DRenderTarget:_Se,WebGLArrayRenderTarget:bSe,WebGLCoordinateSystem:Ic,WebGLCubeRenderTarget:t9,WebGLMultipleRenderTargets:bTe,WebGLRenderTarget:Kl,WebGLRenderer:c9,WebGLUtils:o9,WebGPUCoordinateSystem:Iy,WireframeGeometry:ok,WrapAroundEnding:jy,ZeroCurvatureEnding:$h,ZeroFactor:h7,ZeroSlopeEnding:Yh,ZeroStencilOp:T1e,createCanvasElement:X7},Symbol.toStringTag,{value:"Module"}));var GN={exports:{}},uf={};var UU;function wTe(){return UU||(UU=1,uf.ConcurrentRoot=1,uf.ContinuousEventPriority=4,uf.DefaultEventPriority=16,uf.DiscreteEventPriority=1,uf.IdleEventPriority=536870912,uf.LegacyRoot=0),uf}var BU;function STe(){return BU||(BU=1,GN.exports=wTe()),GN.exports}var pg=STe();function ETe(t){let e;const n=new Set,r=(u,d)=>{const f=typeof u=="function"?u(e):u;if(f!==e){const p=e;e=d?f:Object.assign({},e,f),n.forEach(m=>m(e,p))}},i=()=>e,a=(u,d=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=d(e);function m(){const y=d(e);if(!f(p,y)){const _=p;u(p=y,_)}}return n.add(m),()=>n.delete(m)},l={setState:r,getState:i,subscribe:(u,d,f)=>d||f?a(u,d,f):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return e=t(r,i,l),l}const MTe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),zU=MTe?E.useEffect:E.useLayoutEffect;function CTe(t){const e=typeof t=="function"?ETe(t):t,n=(r=e.getState,i=Object.is)=>{const[,a]=E.useReducer(v=>v+1,0),s=e.getState(),o=E.useRef(s),l=E.useRef(r),u=E.useRef(i),d=E.useRef(!1),f=E.useRef();f.current===void 0&&(f.current=r(s));let p,m=!1;(o.current!==s||l.current!==r||u.current!==i||d.current)&&(p=r(s),m=!i(f.current,p)),zU(()=>{m&&(f.current=p),o.current=s,l.current=r,u.current=i,d.current=!1});const y=E.useRef(s);zU(()=>{const v=()=>{try{const M=e.getState(),C=l.current(M);u.current(f.current,C)||(o.current=M,f.current=C,a())}catch{d.current=!0,a()}},w=e.subscribe(v);return e.getState()!==y.current&&v(),w},[]);const _=m?p:f.current;return E.useDebugValue(_),_};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}const NTe=t=>typeof t=="object"&&typeof t.then=="function",X_=[];function ATe(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e)return!1;const r=t.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}function TTe(t,e=null,n=!1,r={}){e===null&&(e=[t]);for(const a of X_)if(ATe(e,a.keys,a.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return r.lifespan&&r.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,r.lifespan)),a.response;if(!n)throw a.promise}const i={keys:e,equal:r.equal,remove:()=>{const a=X_.indexOf(i);a!==-1&&X_.splice(a,1)},promise:(NTe(t)?t:t(...e)).then(a=>{i.response=a,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(a=>i.error=a)};if(X_.push(i),!n)throw i.promise}const PTe=(t,e,n)=>TTe(t,e,!1,n);var $N={exports:{}},YN={exports:{}},qN={};var HU;function RTe(){return HU||(HU=1,(function(t){function e(W,$){var G=W.length;W.push($);e:for(;0<G;){var j=G-1>>>1,B=W[j];if(0<i(B,$))W[j]=$,W[G]=B,G=j;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var $=W[0],G=W.pop();if(G!==$){W[0]=G;e:for(var j=0,B=W.length,ae=B>>>1;j<ae;){var re=2*(j+1)-1,de=W[re],ce=re+1,ie=W[ce];if(0>i(de,G))ce<B&&0>i(ie,de)?(W[j]=ie,W[ce]=G,j=ce):(W[j]=de,W[re]=G,j=re);else if(ce<B&&0>i(ie,G))W[j]=ie,W[ce]=G,j=ce;else break e}}return $}function i(W,$){var G=W.sortIndex-$.sortIndex;return G!==0?G:W.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],u=[],d=1,f=null,p=3,m=!1,y=!1,_=!1,v=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(W){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=W)r(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(u)}}function N(W){if(_=!1,C(W),!y)if(n(l)!==null)y=!0,ee(P);else{var $=n(u);$!==null&&se(N,$.startTime-W)}}function P(W,$){y=!1,_&&(_=!1,w(U),U=-1),m=!0;var G=p;try{for(C($),f=n(l);f!==null&&(!(f.expirationTime>$)||W&&!z());){var j=f.callback;if(typeof j=="function"){f.callback=null,p=f.priorityLevel;var B=j(f.expirationTime<=$);$=t.unstable_now(),typeof B=="function"?f.callback=B:f===n(l)&&r(l),C($)}else r(l);f=n(l)}if(f!==null)var ae=!0;else{var re=n(u);re!==null&&se(N,re.startTime-$),ae=!1}return ae}finally{f=null,p=G,m=!1}}var R=!1,k=null,U=-1,I=5,L=-1;function z(){return!(t.unstable_now()-L<I)}function O(){if(k!==null){var W=t.unstable_now();L=W;var $=!0;try{$=k(!0,W)}finally{$?q():(R=!1,k=null)}}else R=!1}var q;if(typeof M=="function")q=function(){M(O)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,X=Y.port2;Y.port1.onmessage=O,q=function(){X.postMessage(null)}}else q=function(){v(O,0)};function ee(W){k=W,R||(R=!0,q())}function se(W,$){U=v(function(){W(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,ee(P))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var G=p;p=$;try{return W()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,$){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var G=p;p=W;try{return $()}finally{p=G}},t.unstable_scheduleCallback=function(W,$,G){var j=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?j+G:j):G=j,W){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=G+B,W={id:d++,callback:$,priorityLevel:W,startTime:G,expirationTime:B,sortIndex:-1},G>j?(W.sortIndex=G,e(u,W),n(l)===null&&W===n(u)&&(_?(w(U),U=-1):_=!0,se(N,G-j))):(W.sortIndex=B,e(l,W),y||m||(y=!0,ee(P))),W},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(W){var $=p;return function(){var G=p;p=$;try{return W.apply(this,arguments)}finally{p=G}}}})(qN)),qN}var VU;function DTe(){return VU||(VU=1,YN.exports=RTe()),YN.exports}var XN,WU;function kTe(){return WU||(WU=1,XN=function(e){var n={},r=Ap(),i=DTe(),a=Object.assign;function s(x){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+x,A=1;A<arguments.length;A++)b+="&args[]="+encodeURIComponent(arguments[A]);return"Minified React error #"+x+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),y=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),N=Symbol.for("react.offscreen"),P=Symbol.iterator;function R(x){return x===null||typeof x!="object"?null:(x=P&&x[P]||x["@@iterator"],typeof x=="function"?x:null)}function k(x){if(x==null)return null;if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x;switch(x){case d:return"Fragment";case u:return"Portal";case p:return"Profiler";case f:return"StrictMode";case v:return"Suspense";case w:return"SuspenseList"}if(typeof x=="object")switch(x.$$typeof){case y:return(x.displayName||"Context")+".Consumer";case m:return(x._context.displayName||"Context")+".Provider";case _:var b=x.render;return x=x.displayName,x||(x=b.displayName||b.name||"",x=x!==""?"ForwardRef("+x+")":"ForwardRef"),x;case M:return b=x.displayName||null,b!==null?b:k(x.type)||"Memo";case C:b=x._payload,x=x._init;try{return k(x(b))}catch{}}return null}function U(x){var b=x.type;switch(x.tag){case 24:return"Cache";case 9:return(b.displayName||"Context")+".Consumer";case 10:return(b._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return x=b.render,x=x.displayName||x.name||"",b.displayName||(x!==""?"ForwardRef("+x+")":"ForwardRef");case 7:return"Fragment";case 5:return b;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return k(b);case 8:return b===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof b=="function")return b.displayName||b.name||null;if(typeof b=="string")return b}return null}function I(x){var b=x,A=x;if(x.alternate)for(;b.return;)b=b.return;else{x=b;do b=x,(b.flags&4098)!==0&&(A=b.return),x=b.return;while(x)}return b.tag===3?A:null}function L(x){if(I(x)!==x)throw Error(s(188))}function z(x){var b=x.alternate;if(!b){if(b=I(x),b===null)throw Error(s(188));return b!==x?null:x}for(var A=x,D=b;;){var H=A.return;if(H===null)break;var K=H.alternate;if(K===null){if(D=H.return,D!==null){A=D;continue}break}if(H.child===K.child){for(K=H.child;K;){if(K===A)return L(H),x;if(K===D)return L(H),b;K=K.sibling}throw Error(s(188))}if(A.return!==D.return)A=H,D=K;else{for(var me=!1,Me=H.child;Me;){if(Me===A){me=!0,A=H,D=K;break}if(Me===D){me=!0,D=H,A=K;break}Me=Me.sibling}if(!me){for(Me=K.child;Me;){if(Me===A){me=!0,A=K,D=H;break}if(Me===D){me=!0,D=K,A=H;break}Me=Me.sibling}if(!me)throw Error(s(189))}}if(A.alternate!==D)throw Error(s(190))}if(A.tag!==3)throw Error(s(188));return A.stateNode.current===A?x:b}function O(x){return x=z(x),x!==null?q(x):null}function q(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){var b=q(x);if(b!==null)return b;x=x.sibling}return null}function Y(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){if(x.tag!==4){var b=Y(x);if(b!==null)return b}x=x.sibling}return null}var X=Array.isArray,ee=e.getPublicInstance,se=e.getRootHostContext,W=e.getChildHostContext,$=e.prepareForCommit,G=e.resetAfterCommit,j=e.createInstance,B=e.appendInitialChild,ae=e.finalizeInitialChildren,re=e.prepareUpdate,de=e.shouldSetTextContent,ce=e.createTextInstance,ie=e.scheduleTimeout,le=e.cancelTimeout,fe=e.noTimeout,Ne=e.isPrimaryRenderer,Se=e.supportsMutation,Z=e.supportsPersistence,xe=e.supportsHydration,oe=e.getInstanceFromNode,tt=e.preparePortalMount,ke=e.getCurrentEventPriority,st=e.detachDeletedInstance,Ce=e.supportsMicrotasks,ct=e.scheduleMicrotask,$e=e.supportsTestSelectors,J=e.findFiberRoot,Q=e.getBoundingRect,ye=e.getTextContent,we=e.isHiddenSubtree,De=e.matchAccessibilityRole,Ue=e.setFocusIfFocusable,it=e.setupIntersectionObserver,nt=e.appendChild,ot=e.appendChildToContainer,xt=e.commitTextUpdate,rt=e.commitMount,be=e.commitUpdate,Je=e.insertBefore,Qe=e.insertInContainerBefore,Oe=e.removeChild,pe=e.removeChildFromContainer,je=e.resetTextContent,ut=e.hideInstance,ge=e.hideTextInstance,Be=e.unhideInstance,Pe=e.unhideTextInstance,Ke=e.clearContainer,te=e.cloneInstance,Le=e.createContainerChildSet,dt=e.appendChildToContainerChildSet,kt=e.finalizeContainerChildren,Mt=e.replaceContainerChildren,Pt=e.cloneHiddenInstance,mn=e.cloneHiddenTextInstance,Mn=e.canHydrateInstance,ar=e.canHydrateTextInstance,Wr=e.canHydrateSuspenseInstance,ii=e.isSuspenseInstancePending,Or=e.isSuspenseInstanceFallback,Qi=e.registerSuspenseInstanceRetry,ai=e.getNextHydratableSibling,yi=e.getFirstHydratableChild,Gr=e.getFirstHydratableChildWithinContainer,ja=e.getFirstHydratableChildWithinSuspenseInstance,Qc=e.hydrateInstance,Oa=e.hydrateTextInstance,Ed=e.hydrateSuspenseInstance,Jc=e.getNextHydratableInstanceAfterSuspenseInstance,sl=e.commitHydratedContainer,ue=e.commitHydratedSuspenseInstance,Ae=e.clearSuspenseBoundary,We=e.clearSuspenseBoundaryFromContainer,Ve=e.shouldDeleteUnhydratedTailInstances,Te=e.didNotMatchHydratedContainerTextInstance,gt=e.didNotMatchHydratedTextInstance,He;function At(x){if(He===void 0)try{throw Error()}catch(A){var b=A.stack.trim().match(/\n( *(at )?)/);He=b&&b[1]||""}return`
`+He+x}var Rt=!1;function $t(x,b){if(!x||Rt)return"";Rt=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error()},Object.defineProperty(b.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(b,[])}catch(vt){var D=vt}Reflect.construct(x,[],b)}else{try{b.call()}catch(vt){D=vt}x.call(b.prototype)}else{try{throw Error()}catch(vt){D=vt}x()}}catch(vt){if(vt&&D&&typeof vt.stack=="string"){for(var H=vt.stack.split(`
`),K=D.stack.split(`
`),me=H.length-1,Me=K.length-1;1<=me&&0<=Me&&H[me]!==K[Me];)Me--;for(;1<=me&&0<=Me;me--,Me--)if(H[me]!==K[Me]){if(me!==1||Me!==1)do if(me--,Me--,0>Me||H[me]!==K[Me]){var at=`
`+H[me].replace(" at new "," at ");return x.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",x.displayName)),at}while(1<=me&&0<=Me);break}}}finally{Rt=!1,Error.prepareStackTrace=A}return(x=x?x.displayName||x.name:"")?At(x):""}var Zt=Object.prototype.hasOwnProperty,jt=[],ln=-1;function fn(x){return{current:x}}function Ot(x){0>ln||(x.current=jt[ln],jt[ln]=null,ln--)}function cn(x,b){ln++,jt[ln]=x.current,x.current=b}var Yt={},_t=fn(Yt),$n=fn(!1),gn=Yt;function Zn(x,b){var A=x.type.contextTypes;if(!A)return Yt;var D=x.stateNode;if(D&&D.__reactInternalMemoizedUnmaskedChildContext===b)return D.__reactInternalMemoizedMaskedChildContext;var H={},K;for(K in A)H[K]=b[K];return D&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=b,x.__reactInternalMemoizedMaskedChildContext=H),H}function Yn(x){return x=x.childContextTypes,x!=null}function Hn(){Ot($n),Ot(_t)}function ha(x,b,A){if(_t.current!==Yt)throw Error(s(168));cn(_t,b),cn($n,A)}function jn(x,b,A){var D=x.stateNode;if(b=b.childContextTypes,typeof D.getChildContext!="function")return A;D=D.getChildContext();for(var H in D)if(!(H in b))throw Error(s(108,U(x)||"Unknown",H));return a({},A,D)}function si(x){return x=(x=x.stateNode)&&x.__reactInternalMemoizedMergedChildContext||Yt,gn=_t.current,cn(_t,x),cn($n,$n.current),!0}function Ir(x,b,A){var D=x.stateNode;if(!D)throw Error(s(169));A?(x=jn(x,b,gn),D.__reactInternalMemoizedMergedChildContext=x,Ot($n),Ot(_t),cn(_t,x)):Ot($n),cn($n,A)}var Qn=Math.clz32?Math.clz32:eu,Oi=Math.log,$r=Math.LN2;function eu(x){return x>>>=0,x===0?32:31-(Oi(x)/$r|0)|0}var ro=64,Cn=4194304;function ko(x){switch(x&-x){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return x&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return x}}function rc(x,b){var A=x.pendingLanes;if(A===0)return 0;var D=0,H=x.suspendedLanes,K=x.pingedLanes,me=A&268435455;if(me!==0){var Me=me&~H;Me!==0?D=ko(Me):(K&=me,K!==0&&(D=ko(K)))}else me=A&~H,me!==0?D=ko(me):K!==0&&(D=ko(K));if(D===0)return 0;if(b!==0&&b!==D&&(b&H)===0&&(H=D&-D,K=b&-b,H>=K||H===16&&(K&4194240)!==0))return b;if((D&4)!==0&&(D|=A&16),b=x.entangledLanes,b!==0)for(x=x.entanglements,b&=D;0<b;)A=31-Qn(b),H=1<<A,D|=x[A],b&=~H;return D}function Md(x,b){switch(x){case 1:case 2:case 4:return b+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cd(x,b){for(var A=x.suspendedLanes,D=x.pingedLanes,H=x.expirationTimes,K=x.pendingLanes;0<K;){var me=31-Qn(K),Me=1<<me,at=H[me];at===-1?((Me&A)===0||(Me&D)!==0)&&(H[me]=Md(Me,b)):at<=b&&(x.expiredLanes|=Me),K&=~Me}}function jo(x){return x=x.pendingLanes&-1073741825,x!==0?x:x&1073741824?1073741824:0}function tu(x){for(var b=[],A=0;31>A;A++)b.push(x);return b}function Cs(x,b,A){x.pendingLanes|=b,b!==536870912&&(x.suspendedLanes=0,x.pingedLanes=0),x=x.eventTimes,b=31-Qn(b),x[b]=A}function io(x,b){var A=x.pendingLanes&~b;x.pendingLanes=b,x.suspendedLanes=0,x.pingedLanes=0,x.expiredLanes&=b,x.mutableReadLanes&=b,x.entangledLanes&=b,b=x.entanglements;var D=x.eventTimes;for(x=x.expirationTimes;0<A;){var H=31-Qn(A),K=1<<H;b[H]=0,D[H]=-1,x[H]=-1,A&=~K}}function Ii(x,b){var A=x.entangledLanes|=b;for(x=x.entanglements;A;){var D=31-Qn(A),H=1<<D;H&b|x[D]&b&&(x[D]|=b),A&=~H}}var sn=0;function Ns(x){return x&=-x,1<x?4<x?(x&268435455)!==0?16:536870912:4:1}var ns=i.unstable_scheduleCallback,Oo=i.unstable_cancelCallback,As=i.unstable_shouldYield,Fp=i.unstable_requestPaint,hr=i.unstable_now,ao=i.unstable_ImmediatePriority,Up=i.unstable_UserBlockingPriority,Ji=i.unstable_NormalPriority,ic=i.unstable_IdlePriority,ac=null,rs=null;function ol(x){if(rs&&typeof rs.onCommitFiberRoot=="function")try{rs.onCommitFiberRoot(ac,x,void 0,(x.current.flags&128)===128)}catch{}}function sc(x,b){return x===b&&(x!==0||1/x===1/b)||x!==x&&b!==b}var xi=typeof Object.is=="function"?Object.is:sc,bi=null,Io=!1,Ts=!1;function nu(x){bi===null?bi=[x]:bi.push(x)}function oc(x){Io=!0,nu(x)}function ea(){if(!Ts&&bi!==null){Ts=!0;var x=0,b=sn;try{var A=bi;for(sn=1;x<A.length;x++){var D=A[x];do D=D(!0);while(D!==null)}bi=null,Io=!1}catch(H){throw bi!==null&&(bi=bi.slice(x+1)),ns(ao,ea),H}finally{sn=b,Ts=!1}}return null}var lc=o.ReactCurrentBatchConfig;function Ia(x,b){if(xi(x,b))return!0;if(typeof x!="object"||x===null||typeof b!="object"||b===null)return!1;var A=Object.keys(x),D=Object.keys(b);if(A.length!==D.length)return!1;for(D=0;D<A.length;D++){var H=A[D];if(!Zt.call(b,H)||!xi(x[H],b[H]))return!1}return!0}function ll(x){switch(x.tag){case 5:return At(x.type);case 16:return At("Lazy");case 13:return At("Suspense");case 19:return At("SuspenseList");case 0:case 2:case 15:return x=$t(x.type,!1),x;case 11:return x=$t(x.type.render,!1),x;case 1:return x=$t(x.type,!0),x;default:return""}}function _i(x,b){if(x&&x.defaultProps){b=a({},b),x=x.defaultProps;for(var A in x)b[A]===void 0&&(b[A]=x[A]);return b}return b}var oi=fn(null),cl=null,La=null,ul=null;function wi(){ul=La=cl=null}function dl(x,b,A){Ne?(cn(oi,b._currentValue),b._currentValue=A):(cn(oi,b._currentValue2),b._currentValue2=A)}function Yr(x){var b=oi.current;Ot(oi),Ne?x._currentValue=b:x._currentValue2=b}function li(x,b,A){for(;x!==null;){var D=x.alternate;if((x.childLanes&b)!==b?(x.childLanes|=b,D!==null&&(D.childLanes|=b)):D!==null&&(D.childLanes&b)!==b&&(D.childLanes|=b),x===A)break;x=x.return}}function Lr(x,b){cl=x,ul=La=null,x=x.dependencies,x!==null&&x.firstContext!==null&&((x.lanes&b)!==0&&(Ci=!0),x.firstContext=null)}function yr(x){var b=Ne?x._currentValue:x._currentValue2;if(ul!==x)if(x={context:x,memoizedValue:b,next:null},La===null){if(cl===null)throw Error(s(308));La=x,cl.dependencies={lanes:0,firstContext:x}}else La=La.next=x;return b}var pa=null,Ps=!1;function Nd(x){x.updateQueue={baseState:x.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fv(x,b){x=x.updateQueue,b.updateQueue===x&&(b.updateQueue={baseState:x.baseState,firstBaseUpdate:x.firstBaseUpdate,lastBaseUpdate:x.lastBaseUpdate,shared:x.shared,effects:x.effects})}function fl(x,b){return{eventTime:x,lane:b,tag:0,payload:null,callback:null,next:null}}function cc(x,b){var A=x.updateQueue;A!==null&&(A=A.shared,Ur!==null&&(x.mode&1)!==0&&(vn&2)===0?(x=A.interleaved,x===null?(b.next=b,pa===null?pa=[A]:pa.push(A)):(b.next=x.next,x.next=b),A.interleaved=b):(x=A.pending,x===null?b.next=b:(b.next=x.next,x.next=b),A.pending=b))}function Bp(x,b,A){if(b=b.updateQueue,b!==null&&(b=b.shared,(A&4194240)!==0)){var D=b.lanes;D&=x.pendingLanes,A|=D,b.lanes=A,Ii(x,A)}}function zp(x,b){var A=x.updateQueue,D=x.alternate;if(D!==null&&(D=D.updateQueue,A===D)){var H=null,K=null;if(A=A.firstBaseUpdate,A!==null){do{var me={eventTime:A.eventTime,lane:A.lane,tag:A.tag,payload:A.payload,callback:A.callback,next:null};K===null?H=K=me:K=K.next=me,A=A.next}while(A!==null);K===null?H=K=b:K=K.next=b}else H=K=b;A={baseState:D.baseState,firstBaseUpdate:H,lastBaseUpdate:K,shared:D.shared,effects:D.effects},x.updateQueue=A;return}x=A.lastBaseUpdate,x===null?A.firstBaseUpdate=b:x.next=b,A.lastBaseUpdate=b}function Hp(x,b,A,D){var H=x.updateQueue;Ps=!1;var K=H.firstBaseUpdate,me=H.lastBaseUpdate,Me=H.shared.pending;if(Me!==null){H.shared.pending=null;var at=Me,vt=at.next;at.next=null,me===null?K=vt:me.next=vt,me=at;var Dt=x.alternate;Dt!==null&&(Dt=Dt.updateQueue,Me=Dt.lastBaseUpdate,Me!==me&&(Me===null?Dt.firstBaseUpdate=vt:Me.next=vt,Dt.lastBaseUpdate=at))}if(K!==null){var un=H.baseState;me=0,Dt=vt=at=null,Me=K;do{var Xt=Me.lane,xn=Me.eventTime;if((D&Xt)===Xt){Dt!==null&&(Dt=Dt.next={eventTime:xn,lane:0,tag:Me.tag,payload:Me.payload,callback:Me.callback,next:null});e:{var Nt=x,Hi=Me;switch(Xt=b,xn=A,Hi.tag){case 1:if(Nt=Hi.payload,typeof Nt=="function"){un=Nt.call(xn,un,Xt);break e}un=Nt;break e;case 3:Nt.flags=Nt.flags&-65537|128;case 0:if(Nt=Hi.payload,Xt=typeof Nt=="function"?Nt.call(xn,un,Xt):Nt,Xt==null)break e;un=a({},un,Xt);break e;case 2:Ps=!0}}Me.callback!==null&&Me.lane!==0&&(x.flags|=64,Xt=H.effects,Xt===null?H.effects=[Me]:Xt.push(Me))}else xn={eventTime:xn,lane:Xt,tag:Me.tag,payload:Me.payload,callback:Me.callback,next:null},Dt===null?(vt=Dt=xn,at=un):Dt=Dt.next=xn,me|=Xt;if(Me=Me.next,Me===null){if(Me=H.shared.pending,Me===null)break;Xt=Me,Me=Xt.next,Xt.next=null,H.lastBaseUpdate=Xt,H.shared.pending=null}}while(!0);if(Dt===null&&(at=un),H.baseState=at,H.firstBaseUpdate=vt,H.lastBaseUpdate=Dt,b=H.shared.interleaved,b!==null){H=b;do me|=H.lane,H=H.next;while(H!==b)}else K===null&&(H.shared.lanes=0);Bo|=me,x.lanes=me,x.memoizedState=un}}function Lx(x,b,A){if(x=b.effects,b.effects=null,x!==null)for(b=0;b<x.length;b++){var D=x[b],H=D.callback;if(H!==null){if(D.callback=null,D=A,typeof H!="function")throw Error(s(191,H));H.call(D)}}}var Fx=new r.Component().refs;function hv(x,b,A,D){b=x.memoizedState,A=A(D,b),A=A==null?b:a({},b,A),x.memoizedState=A,x.lanes===0&&(x.updateQueue.baseState=A)}var Vp={isMounted:function(x){return(x=x._reactInternals)?I(x)===x:!1},enqueueSetState:function(x,b,A){x=x._reactInternals;var D=On(),H=ho(x),K=fl(D,H);K.payload=b,A!=null&&(K.callback=A),cc(x,K),b=ra(x,H,D),b!==null&&Bp(b,x,H)},enqueueReplaceState:function(x,b,A){x=x._reactInternals;var D=On(),H=ho(x),K=fl(D,H);K.tag=1,K.payload=b,A!=null&&(K.callback=A),cc(x,K),b=ra(x,H,D),b!==null&&Bp(b,x,H)},enqueueForceUpdate:function(x,b){x=x._reactInternals;var A=On(),D=ho(x),H=fl(A,D);H.tag=2,b!=null&&(H.callback=b),cc(x,H),b=ra(x,D,A),b!==null&&Bp(b,x,D)}};function pv(x,b,A,D,H,K,me){return x=x.stateNode,typeof x.shouldComponentUpdate=="function"?x.shouldComponentUpdate(D,K,me):b.prototype&&b.prototype.isPureReactComponent?!Ia(A,D)||!Ia(H,K):!0}function Ux(x,b,A){var D=!1,H=Yt,K=b.contextType;return typeof K=="object"&&K!==null?K=yr(K):(H=Yn(b)?gn:_t.current,D=b.contextTypes,K=(D=D!=null)?Zn(x,H):Yt),b=new b(A,K),x.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Vp,x.stateNode=b,b._reactInternals=x,D&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=H,x.__reactInternalMemoizedMaskedChildContext=K),b}function Bx(x,b,A,D){x=b.state,typeof b.componentWillReceiveProps=="function"&&b.componentWillReceiveProps(A,D),typeof b.UNSAFE_componentWillReceiveProps=="function"&&b.UNSAFE_componentWillReceiveProps(A,D),b.state!==x&&Vp.enqueueReplaceState(b,b.state,null)}function mv(x,b,A,D){var H=x.stateNode;H.props=A,H.state=x.memoizedState,H.refs=Fx,Nd(x);var K=b.contextType;typeof K=="object"&&K!==null?H.context=yr(K):(K=Yn(b)?gn:_t.current,H.context=Zn(x,K)),H.state=x.memoizedState,K=b.getDerivedStateFromProps,typeof K=="function"&&(hv(x,b,K,A),H.state=x.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(b=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),b!==H.state&&Vp.enqueueReplaceState(H,H.state,null),Hp(x,A,H,D),H.state=x.memoizedState),typeof H.componentDidMount=="function"&&(x.flags|=4194308)}var Ad=[],uc=0,Wp=null,Gp=0,Rs=[],is=0,ru=null,hl=1,pl="";function iu(x,b){Ad[uc++]=Gp,Ad[uc++]=Wp,Wp=x,Gp=b}function zx(x,b,A){Rs[is++]=hl,Rs[is++]=pl,Rs[is++]=ru,ru=x;var D=hl;x=pl;var H=32-Qn(D)-1;D&=~(1<<H),A+=1;var K=32-Qn(b)+H;if(30<K){var me=H-H%5;K=(D&(1<<me)-1).toString(32),D>>=me,H-=me,hl=1<<32-Qn(b)+H|A<<H|D,pl=K+x}else hl=1<<K|A<<H|D,pl=x}function gv(x){x.return!==null&&(iu(x,1),zx(x,1,0))}function vv(x){for(;x===Wp;)Wp=Ad[--uc],Ad[uc]=null,Gp=Ad[--uc],Ad[uc]=null;for(;x===ru;)ru=Rs[--is],Rs[is]=null,pl=Rs[--is],Rs[is]=null,hl=Rs[--is],Rs[is]=null}var ma=null,Li=null,pr=!1,Td=!1,Ds=null;function yv(x,b){var A=ds(5,null,null,0);A.elementType="DELETED",A.stateNode=b,A.return=x,b=x.deletions,b===null?(x.deletions=[A],x.flags|=16):b.push(A)}function xv(x,b){switch(x.tag){case 5:return b=Mn(b,x.type,x.pendingProps),b!==null?(x.stateNode=b,ma=x,Li=yi(b),!0):!1;case 6:return b=ar(b,x.pendingProps),b!==null?(x.stateNode=b,ma=x,Li=null,!0):!1;case 13:if(b=Wr(b),b!==null){var A=ru!==null?{id:hl,overflow:pl}:null;return x.memoizedState={dehydrated:b,treeContext:A,retryLane:1073741824},A=ds(18,null,null,0),A.stateNode=b,A.return=x,x.child=A,ma=x,Li=null,!0}return!1;default:return!1}}function $p(x){return(x.mode&1)!==0&&(x.flags&128)===0}function dc(x){if(pr){var b=Li;if(b){var A=b;if(!xv(x,b)){if($p(x))throw Error(s(418));b=ai(A);var D=ma;b&&xv(x,b)?yv(D,A):(x.flags=x.flags&-4097|2,pr=!1,ma=x)}}else{if($p(x))throw Error(s(418));x.flags=x.flags&-4097|2,pr=!1,ma=x}}}function Hx(x){for(x=x.return;x!==null&&x.tag!==5&&x.tag!==3&&x.tag!==13;)x=x.return;ma=x}function jf(x){if(!xe||x!==ma)return!1;if(!pr)return Hx(x),pr=!0,!1;if(x.tag!==3&&(x.tag!==5||Ve(x.type)&&!de(x.type,x.memoizedProps))){var b=Li;if(b){if($p(x)){for(x=Li;x;)x=ai(x);throw Error(s(418))}for(;b;)yv(x,b),b=ai(b)}}if(Hx(x),x.tag===13){if(!xe)throw Error(s(316));if(x=x.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(s(317));Li=Jc(x)}else Li=ma?ai(x.stateNode):null;return!0}function Pd(){xe&&(Li=ma=null,Td=pr=!1)}function Yp(x){Ds===null?Ds=[x]:Ds.push(x)}function Rd(x,b,A){if(x=A.ref,x!==null&&typeof x!="function"&&typeof x!="object"){if(A._owner){if(A=A._owner,A){if(A.tag!==1)throw Error(s(309));var D=A.stateNode}if(!D)throw Error(s(147,x));var H=D,K=""+x;return b!==null&&b.ref!==null&&typeof b.ref=="function"&&b.ref._stringRef===K?b.ref:(b=function(me){var Me=H.refs;Me===Fx&&(Me=H.refs={}),me===null?delete Me[K]:Me[K]=me},b._stringRef=K,b)}if(typeof x!="string")throw Error(s(284));if(!A._owner)throw Error(s(290,x))}return x}function fc(x,b){throw x=Object.prototype.toString.call(b),Error(s(31,x==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":x))}function Dd(x){var b=x._init;return b(x._payload)}function Vx(x){function b(ze,Re){if(x){var et=ze.deletions;et===null?(ze.deletions=[Re],ze.flags|=16):et.push(Re)}}function A(ze,Re){if(!x)return null;for(;Re!==null;)b(ze,Re),Re=Re.sibling;return null}function D(ze,Re){for(ze=new Map;Re!==null;)Re.key!==null?ze.set(Re.key,Re):ze.set(Re.index,Re),Re=Re.sibling;return ze}function H(ze,Re){return ze=Al(ze,Re),ze.index=0,ze.sibling=null,ze}function K(ze,Re,et){return ze.index=et,x?(et=ze.alternate,et!==null?(et=et.index,et<Re?(ze.flags|=2,Re):et):(ze.flags|=2,Re)):(ze.flags|=1048576,Re)}function me(ze){return x&&ze.alternate===null&&(ze.flags|=2),ze}function Me(ze,Re,et,Et){return Re===null||Re.tag!==6?(Re=bm(et,ze.mode,Et),Re.return=ze,Re):(Re=H(Re,et),Re.return=ze,Re)}function at(ze,Re,et,Et){var Ht=et.type;return Ht===d?Dt(ze,Re,et.props.children,Et,et.key):Re!==null&&(Re.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===C&&Dd(Ht)===Re.type)?(Et=H(Re,et.props),Et.ref=Rd(ze,Re,et),Et.return=ze,Et):(Et=xm(et.type,et.key,et.props,null,ze.mode,Et),Et.ref=Rd(ze,Re,et),Et.return=ze,Et)}function vt(ze,Re,et,Et){return Re===null||Re.tag!==4||Re.stateNode.containerInfo!==et.containerInfo||Re.stateNode.implementation!==et.implementation?(Re=_m(et,ze.mode,Et),Re.return=ze,Re):(Re=H(Re,et.children||[]),Re.return=ze,Re)}function Dt(ze,Re,et,Et,Ht){return Re===null||Re.tag!==7?(Re=Cu(et,ze.mode,Et,Ht),Re.return=ze,Re):(Re=H(Re,et),Re.return=ze,Re)}function un(ze,Re,et){if(typeof Re=="string"&&Re!==""||typeof Re=="number")return Re=bm(""+Re,ze.mode,et),Re.return=ze,Re;if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case l:return et=xm(Re.type,Re.key,Re.props,null,ze.mode,et),et.ref=Rd(ze,null,Re),et.return=ze,et;case u:return Re=_m(Re,ze.mode,et),Re.return=ze,Re;case C:var Et=Re._init;return un(ze,Et(Re._payload),et)}if(X(Re)||R(Re))return Re=Cu(Re,ze.mode,et,null),Re.return=ze,Re;fc(ze,Re)}return null}function Xt(ze,Re,et,Et){var Ht=Re!==null?Re.key:null;if(typeof et=="string"&&et!==""||typeof et=="number")return Ht!==null?null:Me(ze,Re,""+et,Et);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case l:return et.key===Ht?at(ze,Re,et,Et):null;case u:return et.key===Ht?vt(ze,Re,et,Et):null;case C:return Ht=et._init,Xt(ze,Re,Ht(et._payload),Et)}if(X(et)||R(et))return Ht!==null?null:Dt(ze,Re,et,Et,null);fc(ze,et)}return null}function xn(ze,Re,et,Et,Ht){if(typeof Et=="string"&&Et!==""||typeof Et=="number")return ze=ze.get(et)||null,Me(Re,ze,""+Et,Ht);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case l:return ze=ze.get(Et.key===null?et:Et.key)||null,at(Re,ze,Et,Ht);case u:return ze=ze.get(Et.key===null?et:Et.key)||null,vt(Re,ze,Et,Ht);case C:var hn=Et._init;return xn(ze,Re,et,hn(Et._payload),Ht)}if(X(Et)||R(Et))return ze=ze.get(et)||null,Dt(Re,ze,Et,Ht,null);fc(Re,Et)}return null}function Nt(ze,Re,et,Et){for(var Ht=null,hn=null,dn=Re,Dn=Re=0,Xr=null;dn!==null&&Dn<et.length;Dn++){dn.index>Dn?(Xr=dn,dn=null):Xr=dn.sibling;var Pn=Xt(ze,dn,et[Dn],Et);if(Pn===null){dn===null&&(dn=Xr);break}x&&dn&&Pn.alternate===null&&b(ze,dn),Re=K(Pn,Re,Dn),hn===null?Ht=Pn:hn.sibling=Pn,hn=Pn,dn=Xr}if(Dn===et.length)return A(ze,dn),pr&&iu(ze,Dn),Ht;if(dn===null){for(;Dn<et.length;Dn++)dn=un(ze,et[Dn],Et),dn!==null&&(Re=K(dn,Re,Dn),hn===null?Ht=dn:hn.sibling=dn,hn=dn);return pr&&iu(ze,Dn),Ht}for(dn=D(ze,dn);Dn<et.length;Dn++)Xr=xn(dn,ze,Dn,et[Dn],Et),Xr!==null&&(x&&Xr.alternate!==null&&dn.delete(Xr.key===null?Dn:Xr.key),Re=K(Xr,Re,Dn),hn===null?Ht=Xr:hn.sibling=Xr,hn=Xr);return x&&dn.forEach(function(Tl){return b(ze,Tl)}),pr&&iu(ze,Dn),Ht}function Hi(ze,Re,et,Et){var Ht=R(et);if(typeof Ht!="function")throw Error(s(150));if(et=Ht.call(et),et==null)throw Error(s(151));for(var hn=Ht=null,dn=Re,Dn=Re=0,Xr=null,Pn=et.next();dn!==null&&!Pn.done;Dn++,Pn=et.next()){dn.index>Dn?(Xr=dn,dn=null):Xr=dn.sibling;var Tl=Xt(ze,dn,Pn.value,Et);if(Tl===null){dn===null&&(dn=Xr);break}x&&dn&&Tl.alternate===null&&b(ze,dn),Re=K(Tl,Re,Dn),hn===null?Ht=Tl:hn.sibling=Tl,hn=Tl,dn=Xr}if(Pn.done)return A(ze,dn),pr&&iu(ze,Dn),Ht;if(dn===null){for(;!Pn.done;Dn++,Pn=et.next())Pn=un(ze,Pn.value,Et),Pn!==null&&(Re=K(Pn,Re,Dn),hn===null?Ht=Pn:hn.sibling=Pn,hn=Pn);return pr&&iu(ze,Dn),Ht}for(dn=D(ze,dn);!Pn.done;Dn++,Pn=et.next())Pn=xn(dn,ze,Dn,Pn.value,Et),Pn!==null&&(x&&Pn.alternate!==null&&dn.delete(Pn.key===null?Dn:Pn.key),Re=K(Pn,Re,Dn),hn===null?Ht=Pn:hn.sibling=Pn,hn=Pn);return x&&dn.forEach(function(Kv){return b(ze,Kv)}),pr&&iu(ze,Dn),Ht}function fs(ze,Re,et,Et){if(typeof et=="object"&&et!==null&&et.type===d&&et.key===null&&(et=et.props.children),typeof et=="object"&&et!==null){switch(et.$$typeof){case l:e:{for(var Ht=et.key,hn=Re;hn!==null;){if(hn.key===Ht){if(Ht=et.type,Ht===d){if(hn.tag===7){A(ze,hn.sibling),Re=H(hn,et.props.children),Re.return=ze,ze=Re;break e}}else if(hn.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===C&&Dd(Ht)===hn.type){A(ze,hn.sibling),Re=H(hn,et.props),Re.ref=Rd(ze,hn,et),Re.return=ze,ze=Re;break e}A(ze,hn);break}else b(ze,hn);hn=hn.sibling}et.type===d?(Re=Cu(et.props.children,ze.mode,Et,et.key),Re.return=ze,ze=Re):(Et=xm(et.type,et.key,et.props,null,ze.mode,Et),Et.ref=Rd(ze,Re,et),Et.return=ze,ze=Et)}return me(ze);case u:e:{for(hn=et.key;Re!==null;){if(Re.key===hn)if(Re.tag===4&&Re.stateNode.containerInfo===et.containerInfo&&Re.stateNode.implementation===et.implementation){A(ze,Re.sibling),Re=H(Re,et.children||[]),Re.return=ze,ze=Re;break e}else{A(ze,Re);break}else b(ze,Re);Re=Re.sibling}Re=_m(et,ze.mode,Et),Re.return=ze,ze=Re}return me(ze);case C:return hn=et._init,fs(ze,Re,hn(et._payload),Et)}if(X(et))return Nt(ze,Re,et,Et);if(R(et))return Hi(ze,Re,et,Et);fc(ze,et)}return typeof et=="string"&&et!==""||typeof et=="number"?(et=""+et,Re!==null&&Re.tag===6?(A(ze,Re.sibling),Re=H(Re,et),Re.return=ze,ze=Re):(A(ze,Re),Re=bm(et,ze.mode,Et),Re.return=ze,ze=Re),me(ze)):A(ze,Re)}return fs}var ml=Vx(!0),Wx=Vx(!1),kd={},Fa=fn(kd),au=fn(kd),su=fn(kd);function so(x){if(x===kd)throw Error(s(174));return x}function qp(x,b){cn(su,b),cn(au,x),cn(Fa,kd),x=se(b),Ot(Fa),cn(Fa,x)}function jd(){Ot(Fa),Ot(au),Ot(su)}function Gx(x){var b=so(su.current),A=so(Fa.current);b=W(A,x.type,b),A!==b&&(cn(au,x),cn(Fa,b))}function bv(x){au.current===x&&(Ot(Fa),Ot(au))}var xr=fn(0);function Xp(x){for(var b=x;b!==null;){if(b.tag===13){var A=b.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||ii(A)||Or(A)))return b}else if(b.tag===19&&b.memoizedProps.revealOrder!==void 0){if((b.flags&128)!==0)return b}else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===x)break;for(;b.sibling===null;){if(b.return===null||b.return===x)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}return null}var as=[];function ou(){for(var x=0;x<as.length;x++){var b=as[x];Ne?b._workInProgressVersionPrimary=null:b._workInProgressVersionSecondary=null}as.length=0}var Of=o.ReactCurrentDispatcher,ss=o.ReactCurrentBatchConfig,lu=0,br=null,Si=null,Ei=null,Kp=!1,Lo=!1,cu=0,If=0;function Mi(){throw Error(s(321))}function Zp(x,b){if(b===null)return!1;for(var A=0;A<b.length&&A<x.length;A++)if(!xi(x[A],b[A]))return!1;return!0}function Od(x,b,A,D,H,K){if(lu=K,br=b,b.memoizedState=null,b.updateQueue=null,b.lanes=0,Of.current=x===null||x.memoizedState===null?Cv:Nv,x=A(D,H),Lo){K=0;do{if(Lo=!1,cu=0,25<=K)throw Error(s(301));K+=1,Ei=Si=null,b.updateQueue=null,Of.current=Av,x=A(D,H)}while(Lo)}if(Of.current=Ud,b=Si!==null&&Si.next!==null,lu=0,Ei=Si=br=null,Kp=!1,b)throw Error(s(300));return x}function hc(){var x=cu!==0;return cu=0,x}function oo(){var x={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ei===null?br.memoizedState=Ei=x:Ei=Ei.next=x,Ei}function lo(){if(Si===null){var x=br.alternate;x=x!==null?x.memoizedState:null}else x=Si.next;var b=Ei===null?br.memoizedState:Ei.next;if(b!==null)Ei=b,Si=x;else{if(x===null)throw Error(s(310));Si=x,x={memoizedState:Si.memoizedState,baseState:Si.baseState,baseQueue:Si.baseQueue,queue:Si.queue,next:null},Ei===null?br.memoizedState=Ei=x:Ei=Ei.next=x}return Ei}function Fo(x,b){return typeof b=="function"?b(x):b}function Lf(x){var b=lo(),A=b.queue;if(A===null)throw Error(s(311));A.lastRenderedReducer=x;var D=Si,H=D.baseQueue,K=A.pending;if(K!==null){if(H!==null){var me=H.next;H.next=K.next,K.next=me}D.baseQueue=H=K,A.pending=null}if(H!==null){K=H.next,D=D.baseState;var Me=me=null,at=null,vt=K;do{var Dt=vt.lane;if((lu&Dt)===Dt)at!==null&&(at=at.next={lane:0,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null}),D=vt.hasEagerState?vt.eagerState:x(D,vt.action);else{var un={lane:Dt,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null};at===null?(Me=at=un,me=D):at=at.next=un,br.lanes|=Dt,Bo|=Dt}vt=vt.next}while(vt!==null&&vt!==K);at===null?me=D:at.next=Me,xi(D,b.memoizedState)||(Ci=!0),b.memoizedState=D,b.baseState=me,b.baseQueue=at,A.lastRenderedState=D}if(x=A.interleaved,x!==null){H=x;do K=H.lane,br.lanes|=K,Bo|=K,H=H.next;while(H!==x)}else H===null&&(A.lanes=0);return[b.memoizedState,A.dispatch]}function Ff(x){var b=lo(),A=b.queue;if(A===null)throw Error(s(311));A.lastRenderedReducer=x;var D=A.dispatch,H=A.pending,K=b.memoizedState;if(H!==null){A.pending=null;var me=H=H.next;do K=x(K,me.action),me=me.next;while(me!==H);xi(K,b.memoizedState)||(Ci=!0),b.memoizedState=K,b.baseQueue===null&&(b.baseState=K),A.lastRenderedState=K}return[K,D]}function _v(){}function wv(x,b){var A=br,D=lo(),H=b(),K=!xi(D.memoizedState,H);if(K&&(D.memoizedState=H,Ci=!0),D=D.queue,Id(gl.bind(null,A,D,x),[x]),D.getSnapshot!==b||K||Ei!==null&&Ei.memoizedState.tag&1){if(A.flags|=2048,Bf(9,Ev.bind(null,A,D,H,b),void 0,null),Ur===null)throw Error(s(349));(lu&30)!==0||Sv(A,b,H)}return H}function Sv(x,b,A){x.flags|=16384,x={getSnapshot:b,value:A},b=br.updateQueue,b===null?(b={lastEffect:null,stores:null},br.updateQueue=b,b.stores=[x]):(A=b.stores,A===null?b.stores=[x]:A.push(x))}function Ev(x,b,A,D){b.value=A,b.getSnapshot=D,Qp(b)&&ra(x,1,-1)}function gl(x,b,A){return A(function(){Qp(b)&&ra(x,1,-1)})}function Qp(x){var b=x.getSnapshot;x=x.value;try{var A=b();return!xi(x,A)}catch{return!0}}function Uf(x){var b=oo();return typeof x=="function"&&(x=x()),b.memoizedState=b.baseState=x,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:x},b.queue=x,x=x.dispatch=bE.bind(null,br,x),[b.memoizedState,x]}function Bf(x,b,A,D){return x={tag:x,create:b,destroy:A,deps:D,next:null},b=br.updateQueue,b===null?(b={lastEffect:null,stores:null},br.updateQueue=b,b.lastEffect=x.next=x):(A=b.lastEffect,A===null?b.lastEffect=x.next=x:(D=A.next,A.next=x,x.next=D,b.lastEffect=x)),x}function $x(){return lo().memoizedState}function pc(x,b,A,D){var H=oo();br.flags|=x,H.memoizedState=Bf(1|b,A,void 0,D===void 0?null:D)}function Jp(x,b,A,D){var H=lo();D=D===void 0?null:D;var K=void 0;if(Si!==null){var me=Si.memoizedState;if(K=me.destroy,D!==null&&Zp(D,me.deps)){H.memoizedState=Bf(b,A,K,D);return}}br.flags|=x,H.memoizedState=Bf(1|b,A,K,D)}function em(x,b){return pc(8390656,8,x,b)}function Id(x,b){return Jp(2048,8,x,b)}function sr(x,b){return Jp(4,2,x,b)}function tm(x,b){return Jp(4,4,x,b)}function zf(x,b){if(typeof b=="function")return x=x(),b(x),function(){b(null)};if(b!=null)return x=x(),b.current=x,function(){b.current=null}}function Ld(x,b,A){return A=A!=null?A.concat([x]):null,Jp(4,4,zf.bind(null,b,x),A)}function nm(){}function rm(x,b){var A=lo();b=b===void 0?null:b;var D=A.memoizedState;return D!==null&&b!==null&&Zp(b,D[1])?D[0]:(A.memoizedState=[x,b],x)}function Fd(x,b){var A=lo();b=b===void 0?null:b;var D=A.memoizedState;return D!==null&&b!==null&&Zp(b,D[1])?D[0]:(x=x(),A.memoizedState=[x,b],x)}function im(x,b){var A=sn;sn=A!==0&&4>A?A:4,x(!0);var D=ss.transition;ss.transition={};try{x(!1),b()}finally{sn=A,ss.transition=D}}function uu(){return lo().memoizedState}function Yx(x,b,A){var D=ho(x);A={lane:D,action:A,hasEagerState:!1,eagerState:null,next:null},qx(x)?Mv(b,A):(Hf(x,b,A),A=On(),x=ra(x,D,A),x!==null&&Vf(x,b,D))}function bE(x,b,A){var D=ho(x),H={lane:D,action:A,hasEagerState:!1,eagerState:null,next:null};if(qx(x))Mv(b,H);else{Hf(x,b,H);var K=x.alternate;if(x.lanes===0&&(K===null||K.lanes===0)&&(K=b.lastRenderedReducer,K!==null))try{var me=b.lastRenderedState,Me=K(me,A);if(H.hasEagerState=!0,H.eagerState=Me,xi(Me,me))return}catch{}finally{}A=On(),x=ra(x,D,A),x!==null&&Vf(x,b,D)}}function qx(x){var b=x.alternate;return x===br||b!==null&&b===br}function Mv(x,b){Lo=Kp=!0;var A=x.pending;A===null?b.next=b:(b.next=A.next,A.next=b),x.pending=b}function Hf(x,b,A){Ur!==null&&(x.mode&1)!==0&&(vn&2)===0?(x=b.interleaved,x===null?(A.next=A,pa===null?pa=[b]:pa.push(b)):(A.next=x.next,x.next=A),b.interleaved=A):(x=b.pending,x===null?A.next=A:(A.next=x.next,x.next=A),b.pending=A)}function Vf(x,b,A){if((A&4194240)!==0){var D=b.lanes;D&=x.pendingLanes,A|=D,b.lanes=A,Ii(x,A)}}var Ud={readContext:yr,useCallback:Mi,useContext:Mi,useEffect:Mi,useImperativeHandle:Mi,useInsertionEffect:Mi,useLayoutEffect:Mi,useMemo:Mi,useReducer:Mi,useRef:Mi,useState:Mi,useDebugValue:Mi,useDeferredValue:Mi,useTransition:Mi,useMutableSource:Mi,useSyncExternalStore:Mi,useId:Mi,unstable_isNewReconciler:!1},Cv={readContext:yr,useCallback:function(x,b){return oo().memoizedState=[x,b===void 0?null:b],x},useContext:yr,useEffect:em,useImperativeHandle:function(x,b,A){return A=A!=null?A.concat([x]):null,pc(4194308,4,zf.bind(null,b,x),A)},useLayoutEffect:function(x,b){return pc(4194308,4,x,b)},useInsertionEffect:function(x,b){return pc(4,2,x,b)},useMemo:function(x,b){var A=oo();return b=b===void 0?null:b,x=x(),A.memoizedState=[x,b],x},useReducer:function(x,b,A){var D=oo();return b=A!==void 0?A(b):b,D.memoizedState=D.baseState=b,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:x,lastRenderedState:b},D.queue=x,x=x.dispatch=Yx.bind(null,br,x),[D.memoizedState,x]},useRef:function(x){var b=oo();return x={current:x},b.memoizedState=x},useState:Uf,useDebugValue:nm,useDeferredValue:function(x){var b=Uf(x),A=b[0],D=b[1];return em(function(){var H=ss.transition;ss.transition={};try{D(x)}finally{ss.transition=H}},[x]),A},useTransition:function(){var x=Uf(!1),b=x[0];return x=im.bind(null,x[1]),oo().memoizedState=x,[b,x]},useMutableSource:function(){},useSyncExternalStore:function(x,b,A){var D=br,H=oo();if(pr){if(A===void 0)throw Error(s(407));A=A()}else{if(A=b(),Ur===null)throw Error(s(349));(lu&30)!==0||Sv(D,b,A)}H.memoizedState=A;var K={value:A,getSnapshot:b};return H.queue=K,em(gl.bind(null,D,K,x),[x]),D.flags|=2048,Bf(9,Ev.bind(null,D,K,A,b),void 0,null),A},useId:function(){var x=oo(),b=Ur.identifierPrefix;if(pr){var A=pl,D=hl;A=(D&~(1<<32-Qn(D)-1)).toString(32)+A,b=":"+b+"R"+A,A=cu++,0<A&&(b+="H"+A.toString(32)),b+=":"}else A=If++,b=":"+b+"r"+A.toString(32)+":";return x.memoizedState=b},unstable_isNewReconciler:!1},Nv={readContext:yr,useCallback:rm,useContext:yr,useEffect:Id,useImperativeHandle:Ld,useInsertionEffect:sr,useLayoutEffect:tm,useMemo:Fd,useReducer:Lf,useRef:$x,useState:function(){return Lf(Fo)},useDebugValue:nm,useDeferredValue:function(x){var b=Lf(Fo),A=b[0],D=b[1];return Id(function(){var H=ss.transition;ss.transition={};try{D(x)}finally{ss.transition=H}},[x]),A},useTransition:function(){var x=Lf(Fo)[0],b=lo().memoizedState;return[x,b]},useMutableSource:_v,useSyncExternalStore:wv,useId:uu,unstable_isNewReconciler:!1},Av={readContext:yr,useCallback:rm,useContext:yr,useEffect:Id,useImperativeHandle:Ld,useInsertionEffect:sr,useLayoutEffect:tm,useMemo:Fd,useReducer:Ff,useRef:$x,useState:function(){return Ff(Fo)},useDebugValue:nm,useDeferredValue:function(x){var b=Ff(Fo),A=b[0],D=b[1];return Id(function(){var H=ss.transition;ss.transition={};try{D(x)}finally{ss.transition=H}},[x]),A},useTransition:function(){var x=Ff(Fo)[0],b=lo().memoizedState;return[x,b]},useMutableSource:_v,useSyncExternalStore:wv,useId:uu,unstable_isNewReconciler:!1};function Tv(x,b){try{var A="",D=b;do A+=ll(D),D=D.return;while(D);var H=A}catch(K){H=`
Error generating stack: `+K.message+`
`+K.stack}return{value:x,source:b,stack:H}}function am(x,b){try{console.error(b.value)}catch(A){setTimeout(function(){throw A})}}var _E=typeof WeakMap=="function"?WeakMap:Map;function Xx(x,b,A){A=fl(-1,A),A.tag=3,A.payload={element:null};var D=b.value;return A.callback=function(){Gd||(Gd=!0,dr=D),am(x,b)},A}function sm(x,b,A){A=fl(-1,A),A.tag=3;var D=x.type.getDerivedStateFromError;if(typeof D=="function"){var H=b.value;A.payload=function(){return D(H)},A.callback=function(){am(x,b)}}var K=x.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(A.callback=function(){am(x,b),typeof D!="function"&&(fo===null?fo=new Set([this]):fo.add(this));var me=b.stack;this.componentDidCatch(b.value,{componentStack:me!==null?me:""})}),A}function vl(x,b,A){var D=x.pingCache;if(D===null){D=x.pingCache=new _E;var H=new Set;D.set(b,H)}else H=D.get(b),H===void 0&&(H=new Set,D.set(b,H));H.has(A)||(H.add(A),x=Yv.bind(null,x,b,A),b.then(x,x))}function Pv(x){do{var b;if((b=x.tag===13)&&(b=x.memoizedState,b=b!==null?b.dehydrated!==null:!0),b)return x;x=x.return}while(x!==null);return null}function du(x,b,A,D,H){return(x.mode&1)===0?(x===b?x.flags|=65536:(x.flags|=128,A.flags|=131072,A.flags&=-52805,A.tag===1&&(A.alternate===null?A.tag=17:(b=fl(-1,1),b.tag=2,cc(A,b))),A.lanes|=1),x):(x.flags|=65536,x.lanes=H,x)}function ci(x){x.flags|=4}function Bd(x,b){if(x!==null&&x.child===b.child)return!0;if((b.flags&16)!==0)return!1;for(x=b.child;x!==null;){if((x.flags&12854)!==0||(x.subtreeFlags&12854)!==0)return!1;x=x.sibling}return!0}var os,fu,om,lm;if(Se)os=function(x,b){for(var A=b.child;A!==null;){if(A.tag===5||A.tag===6)B(x,A.stateNode);else if(A.tag!==4&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===b)break;for(;A.sibling===null;){if(A.return===null||A.return===b)return;A=A.return}A.sibling.return=A.return,A=A.sibling}},fu=function(){},om=function(x,b,A,D,H){if(x=x.memoizedProps,x!==D){var K=b.stateNode,me=so(Fa.current);A=re(K,A,x,D,H,me),(b.updateQueue=A)&&ci(b)}},lm=function(x,b,A,D){A!==D&&ci(b)};else if(Z){os=function(x,b,A,D){for(var H=b.child;H!==null;){if(H.tag===5){var K=H.stateNode;A&&D&&(K=Pt(K,H.type,H.memoizedProps,H)),B(x,K)}else if(H.tag===6)K=H.stateNode,A&&D&&(K=mn(K,H.memoizedProps,H)),B(x,K);else if(H.tag!==4){if(H.tag===22&&H.memoizedState!==null)K=H.child,K!==null&&(K.return=H),os(x,H,!0,!0);else if(H.child!==null){H.child.return=H,H=H.child;continue}}if(H===b)break;for(;H.sibling===null;){if(H.return===null||H.return===b)return;H=H.return}H.sibling.return=H.return,H=H.sibling}};var mc=function(x,b,A,D){for(var H=b.child;H!==null;){if(H.tag===5){var K=H.stateNode;A&&D&&(K=Pt(K,H.type,H.memoizedProps,H)),dt(x,K)}else if(H.tag===6)K=H.stateNode,A&&D&&(K=mn(K,H.memoizedProps,H)),dt(x,K);else if(H.tag!==4){if(H.tag===22&&H.memoizedState!==null)K=H.child,K!==null&&(K.return=H),mc(x,H,!0,!0);else if(H.child!==null){H.child.return=H,H=H.child;continue}}if(H===b)break;for(;H.sibling===null;){if(H.return===null||H.return===b)return;H=H.return}H.sibling.return=H.return,H=H.sibling}};fu=function(x,b){var A=b.stateNode;if(!Bd(x,b)){x=A.containerInfo;var D=Le(x);mc(D,b,!1,!1),A.pendingChildren=D,ci(b),kt(x,D)}},om=function(x,b,A,D,H){var K=x.stateNode,me=x.memoizedProps;if((x=Bd(x,b))&&me===D)b.stateNode=K;else{var Me=b.stateNode,at=so(Fa.current),vt=null;me!==D&&(vt=re(Me,A,me,D,H,at)),x&&vt===null?b.stateNode=K:(K=te(K,vt,A,me,D,b,x,Me),ae(K,A,D,H,at)&&ci(b),b.stateNode=K,x?ci(b):os(K,b,!1,!1))}},lm=function(x,b,A,D){A!==D?(x=so(su.current),A=so(Fa.current),b.stateNode=ce(D,x,A,b),ci(b)):b.stateNode=x.stateNode}}else fu=function(){},om=function(){},lm=function(){};function yl(x,b){if(!pr)switch(x.tailMode){case"hidden":b=x.tail;for(var A=null;b!==null;)b.alternate!==null&&(A=b),b=b.sibling;A===null?x.tail=null:A.sibling=null;break;case"collapsed":A=x.tail;for(var D=null;A!==null;)A.alternate!==null&&(D=A),A=A.sibling;D===null?b||x.tail===null?x.tail=null:x.tail.sibling=null:D.sibling=null}}function Fr(x){var b=x.alternate!==null&&x.alternate.child===x.child,A=0,D=0;if(b)for(var H=x.child;H!==null;)A|=H.lanes|H.childLanes,D|=H.subtreeFlags&14680064,D|=H.flags&14680064,H.return=x,H=H.sibling;else for(H=x.child;H!==null;)A|=H.lanes|H.childLanes,D|=H.subtreeFlags,D|=H.flags,H.return=x,H=H.sibling;return x.subtreeFlags|=D,x.childLanes=A,b}function cm(x,b,A){var D=b.pendingProps;switch(vv(b),b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fr(b),null;case 1:return Yn(b.type)&&Hn(),Fr(b),null;case 3:return D=b.stateNode,jd(),Ot($n),Ot(_t),ou(),D.pendingContext&&(D.context=D.pendingContext,D.pendingContext=null),(x===null||x.child===null)&&(jf(b)?ci(b):x===null||x.memoizedState.isDehydrated&&(b.flags&256)===0||(b.flags|=1024,Ds!==null&&(nh(Ds),Ds=null))),fu(x,b),Fr(b),null;case 5:bv(b),A=so(su.current);var H=b.type;if(x!==null&&b.stateNode!=null)om(x,b,H,D,A),x.ref!==b.ref&&(b.flags|=512,b.flags|=2097152);else{if(!D){if(b.stateNode===null)throw Error(s(166));return Fr(b),null}if(x=so(Fa.current),jf(b)){if(!xe)throw Error(s(175));x=Qc(b.stateNode,b.type,b.memoizedProps,A,x,b,!Td),b.updateQueue=x,x!==null&&ci(b)}else{var K=j(H,D,A,x,b);os(K,b,!1,!1),b.stateNode=K,ae(K,H,D,A,x)&&ci(b)}b.ref!==null&&(b.flags|=512,b.flags|=2097152)}return Fr(b),null;case 6:if(x&&b.stateNode!=null)lm(x,b,x.memoizedProps,D);else{if(typeof D!="string"&&b.stateNode===null)throw Error(s(166));if(x=so(su.current),A=so(Fa.current),jf(b)){if(!xe)throw Error(s(176));if(x=b.stateNode,D=b.memoizedProps,(A=Oa(x,D,b,!Td))&&(H=ma,H!==null))switch(K=(H.mode&1)!==0,H.tag){case 3:Te(H.stateNode.containerInfo,x,D,K);break;case 5:gt(H.type,H.memoizedProps,H.stateNode,x,D,K)}A&&ci(b)}else b.stateNode=ce(D,x,A,b)}return Fr(b),null;case 13:if(Ot(xr),D=b.memoizedState,pr&&Li!==null&&(b.mode&1)!==0&&(b.flags&128)===0){for(x=Li;x;)x=ai(x);return Pd(),b.flags|=98560,b}if(D!==null&&D.dehydrated!==null){if(D=jf(b),x===null){if(!D)throw Error(s(318));if(!xe)throw Error(s(344));if(x=b.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(s(317));Ed(x,b)}else Pd(),(b.flags&128)===0&&(b.memoizedState=null),b.flags|=4;return Fr(b),null}return Ds!==null&&(nh(Ds),Ds=null),(b.flags&128)!==0?(b.lanes=A,b):(D=D!==null,A=!1,x===null?jf(b):A=x.memoizedState!==null,D&&!A&&(b.child.flags|=8192,(b.mode&1)!==0&&(x===null||(xr.current&1)!==0?Cr===0&&(Cr=3):gm())),b.updateQueue!==null&&(b.flags|=4),Fr(b),null);case 4:return jd(),fu(x,b),x===null&&tt(b.stateNode.containerInfo),Fr(b),null;case 10:return Yr(b.type._context),Fr(b),null;case 17:return Yn(b.type)&&Hn(),Fr(b),null;case 19:if(Ot(xr),H=b.memoizedState,H===null)return Fr(b),null;if(D=(b.flags&128)!==0,K=H.rendering,K===null)if(D)yl(H,!1);else{if(Cr!==0||x!==null&&(x.flags&128)!==0)for(x=b.child;x!==null;){if(K=Xp(x),K!==null){for(b.flags|=128,yl(H,!1),x=K.updateQueue,x!==null&&(b.updateQueue=x,b.flags|=4),b.subtreeFlags=0,x=A,D=b.child;D!==null;)A=D,H=x,A.flags&=14680066,K=A.alternate,K===null?(A.childLanes=0,A.lanes=H,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=K.childLanes,A.lanes=K.lanes,A.child=K.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=K.memoizedProps,A.memoizedState=K.memoizedState,A.updateQueue=K.updateQueue,A.type=K.type,H=K.dependencies,A.dependencies=H===null?null:{lanes:H.lanes,firstContext:H.firstContext}),D=D.sibling;return cn(xr,xr.current&1|2),b.child}x=x.sibling}H.tail!==null&&hr()>yc&&(b.flags|=128,D=!0,yl(H,!1),b.lanes=4194304)}else{if(!D)if(x=Xp(K),x!==null){if(b.flags|=128,D=!0,x=x.updateQueue,x!==null&&(b.updateQueue=x,b.flags|=4),yl(H,!0),H.tail===null&&H.tailMode==="hidden"&&!K.alternate&&!pr)return Fr(b),null}else 2*hr()-H.renderingStartTime>yc&&A!==1073741824&&(b.flags|=128,D=!0,yl(H,!1),b.lanes=4194304);H.isBackwards?(K.sibling=b.child,b.child=K):(x=H.last,x!==null?x.sibling=K:b.child=K,H.last=K)}return H.tail!==null?(b=H.tail,H.rendering=b,H.tail=b.sibling,H.renderingStartTime=hr(),b.sibling=null,x=xr.current,cn(xr,D?x&1|2:x&1),b):(Fr(b),null);case 22:case 23:return rh(),D=b.memoizedState!==null,x!==null&&x.memoizedState!==null!==D&&(b.flags|=8192),D&&(b.mode&1)!==0?(na&1073741824)!==0&&(Fr(b),Se&&b.subtreeFlags&6&&(b.flags|=8192)):Fr(b),null;case 24:return null;case 25:return null}throw Error(s(156,b.tag))}var Rv=o.ReactCurrentOwner,Ci=!1;function Mr(x,b,A,D){b.child=x===null?Wx(b,null,A,D):ml(b,x.child,A,D)}function or(x,b,A,D,H){A=A.render;var K=b.ref;return Lr(b,H),D=Od(x,b,A,D,K,H),A=hc(),x!==null&&!Ci?(b.updateQueue=x.updateQueue,b.flags&=-2053,x.lanes&=~H,Ua(x,b,H)):(pr&&A&&gv(b),b.flags|=1,Mr(x,b,D,H),b.child)}function Jn(x,b,A,D,H){if(x===null){var K=A.type;return typeof K=="function"&&!ym(K)&&K.defaultProps===void 0&&A.compare===null&&A.defaultProps===void 0?(b.tag=15,b.type=K,xl(x,b,K,D,H)):(x=xm(A.type,null,D,b,b.mode,H),x.ref=b.ref,x.return=b,b.child=x)}if(K=x.child,(x.lanes&H)===0){var me=K.memoizedProps;if(A=A.compare,A=A!==null?A:Ia,A(me,D)&&x.ref===b.ref)return Ua(x,b,H)}return b.flags|=1,x=Al(K,D),x.ref=b.ref,x.return=b,b.child=x}function xl(x,b,A,D,H){if(x!==null&&Ia(x.memoizedProps,D)&&x.ref===b.ref)if(Ci=!1,(x.lanes&H)!==0)(x.flags&131072)!==0&&(Ci=!0);else return b.lanes=x.lanes,Ua(x,b,H);return bl(x,b,A,D,H)}function Fi(x,b,A){var D=b.pendingProps,H=D.children,K=x!==null?x.memoizedState:null;if(D.mode==="hidden")if((b.mode&1)===0)b.memoizedState={baseLanes:0,cachePool:null},cn(_u,na),na|=A;else if((A&1073741824)!==0)b.memoizedState={baseLanes:0,cachePool:null},D=K!==null?K.baseLanes:A,cn(_u,na),na|=D;else return x=K!==null?K.baseLanes|A:A,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:x,cachePool:null},b.updateQueue=null,cn(_u,na),na|=x,null;else K!==null?(D=K.baseLanes|A,b.memoizedState=null):D=A,cn(_u,na),na|=D;return Mr(x,b,H,A),b.child}function ga(x,b){var A=b.ref;(x===null&&A!==null||x!==null&&x.ref!==A)&&(b.flags|=512,b.flags|=2097152)}function bl(x,b,A,D,H){var K=Yn(A)?gn:_t.current;return K=Zn(b,K),Lr(b,H),A=Od(x,b,A,D,K,H),D=hc(),x!==null&&!Ci?(b.updateQueue=x.updateQueue,b.flags&=-2053,x.lanes&=~H,Ua(x,b,H)):(pr&&D&&gv(b),b.flags|=1,Mr(x,b,A,H),b.child)}function hu(x,b,A,D,H){if(Yn(A)){var K=!0;si(b)}else K=!1;if(Lr(b,H),b.stateNode===null)x!==null&&(x.alternate=null,b.alternate=null,b.flags|=2),Ux(b,A,D),mv(b,A,D,H),D=!0;else if(x===null){var me=b.stateNode,Me=b.memoizedProps;me.props=Me;var at=me.context,vt=A.contextType;typeof vt=="object"&&vt!==null?vt=yr(vt):(vt=Yn(A)?gn:_t.current,vt=Zn(b,vt));var Dt=A.getDerivedStateFromProps,un=typeof Dt=="function"||typeof me.getSnapshotBeforeUpdate=="function";un||typeof me.UNSAFE_componentWillReceiveProps!="function"&&typeof me.componentWillReceiveProps!="function"||(Me!==D||at!==vt)&&Bx(b,me,D,vt),Ps=!1;var Xt=b.memoizedState;me.state=Xt,Hp(b,D,me,H),at=b.memoizedState,Me!==D||Xt!==at||$n.current||Ps?(typeof Dt=="function"&&(hv(b,A,Dt,D),at=b.memoizedState),(Me=Ps||pv(b,A,Me,D,Xt,at,vt))?(un||typeof me.UNSAFE_componentWillMount!="function"&&typeof me.componentWillMount!="function"||(typeof me.componentWillMount=="function"&&me.componentWillMount(),typeof me.UNSAFE_componentWillMount=="function"&&me.UNSAFE_componentWillMount()),typeof me.componentDidMount=="function"&&(b.flags|=4194308)):(typeof me.componentDidMount=="function"&&(b.flags|=4194308),b.memoizedProps=D,b.memoizedState=at),me.props=D,me.state=at,me.context=vt,D=Me):(typeof me.componentDidMount=="function"&&(b.flags|=4194308),D=!1)}else{me=b.stateNode,fv(x,b),Me=b.memoizedProps,vt=b.type===b.elementType?Me:_i(b.type,Me),me.props=vt,un=b.pendingProps,Xt=me.context,at=A.contextType,typeof at=="object"&&at!==null?at=yr(at):(at=Yn(A)?gn:_t.current,at=Zn(b,at));var xn=A.getDerivedStateFromProps;(Dt=typeof xn=="function"||typeof me.getSnapshotBeforeUpdate=="function")||typeof me.UNSAFE_componentWillReceiveProps!="function"&&typeof me.componentWillReceiveProps!="function"||(Me!==un||Xt!==at)&&Bx(b,me,D,at),Ps=!1,Xt=b.memoizedState,me.state=Xt,Hp(b,D,me,H);var Nt=b.memoizedState;Me!==un||Xt!==Nt||$n.current||Ps?(typeof xn=="function"&&(hv(b,A,xn,D),Nt=b.memoizedState),(vt=Ps||pv(b,A,vt,D,Xt,Nt,at)||!1)?(Dt||typeof me.UNSAFE_componentWillUpdate!="function"&&typeof me.componentWillUpdate!="function"||(typeof me.componentWillUpdate=="function"&&me.componentWillUpdate(D,Nt,at),typeof me.UNSAFE_componentWillUpdate=="function"&&me.UNSAFE_componentWillUpdate(D,Nt,at)),typeof me.componentDidUpdate=="function"&&(b.flags|=4),typeof me.getSnapshotBeforeUpdate=="function"&&(b.flags|=1024)):(typeof me.componentDidUpdate!="function"||Me===x.memoizedProps&&Xt===x.memoizedState||(b.flags|=4),typeof me.getSnapshotBeforeUpdate!="function"||Me===x.memoizedProps&&Xt===x.memoizedState||(b.flags|=1024),b.memoizedProps=D,b.memoizedState=Nt),me.props=D,me.state=Nt,me.context=at,D=vt):(typeof me.componentDidUpdate!="function"||Me===x.memoizedProps&&Xt===x.memoizedState||(b.flags|=4),typeof me.getSnapshotBeforeUpdate!="function"||Me===x.memoizedProps&&Xt===x.memoizedState||(b.flags|=1024),D=!1)}return ta(x,b,A,D,K,H)}function ta(x,b,A,D,H,K){ga(x,b);var me=(b.flags&128)!==0;if(!D&&!me)return H&&Ir(b,A,!1),Ua(x,b,K);D=b.stateNode,Rv.current=b;var Me=me&&typeof A.getDerivedStateFromError!="function"?null:D.render();return b.flags|=1,x!==null&&me?(b.child=ml(b,x.child,null,K),b.child=ml(b,null,Me,K)):Mr(x,b,Me,K),b.memoizedState=D.state,H&&Ir(b,A,!0),b.child}function Wf(x){var b=x.stateNode;b.pendingContext?ha(x,b.pendingContext,b.pendingContext!==b.context):b.context&&ha(x,b.context,!1),qp(x,b.containerInfo)}function Dv(x,b,A,D,H){return Pd(),Yp(H),b.flags|=256,Mr(x,b,A,D),b.child}var Gf={dehydrated:null,treeContext:null,retryLane:0};function pu(x){return{baseLanes:x,cachePool:null}}function kv(x,b,A){var D=b.pendingProps,H=xr.current,K=!1,me=(b.flags&128)!==0,Me;if((Me=me)||(Me=x!==null&&x.memoizedState===null?!1:(H&2)!==0),Me?(K=!0,b.flags&=-129):(x===null||x.memoizedState!==null)&&(H|=1),cn(xr,H&1),x===null)return dc(b),x=b.memoizedState,x!==null&&(x=x.dehydrated,x!==null)?((b.mode&1)===0?b.lanes=1:Or(x)?b.lanes=8:b.lanes=1073741824,null):(H=D.children,x=D.fallback,K?(D=b.mode,K=b.child,H={mode:"hidden",children:H},(D&1)===0&&K!==null?(K.childLanes=0,K.pendingProps=H):K=sh(H,D,0,null),x=Cu(x,D,A,null),K.return=b,x.return=b,K.sibling=x,b.child=K,b.child.memoizedState=pu(A),b.memoizedState=Gf,x):co(b,H));if(H=x.memoizedState,H!==null){if(Me=H.dehydrated,Me!==null){if(me)return b.flags&256?(b.flags&=-257,Yf(x,b,A,Error(s(422)))):b.memoizedState!==null?(b.child=x.child,b.flags|=128,null):(K=D.fallback,H=b.mode,D=sh({mode:"visible",children:D.children},H,0,null),K=Cu(K,H,A,null),K.flags|=2,D.return=b,K.return=b,D.sibling=K,b.child=D,(b.mode&1)!==0&&ml(b,x.child,null,A),b.child.memoizedState=pu(A),b.memoizedState=Gf,K);if((b.mode&1)===0)b=Yf(x,b,A,null);else if(Or(Me))b=Yf(x,b,A,Error(s(419)));else if(D=(A&x.childLanes)!==0,Ci||D){if(D=Ur,D!==null){switch(A&-A){case 4:K=2;break;case 16:K=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:K=32;break;case 536870912:K=268435456;break;default:K=0}D=(K&(D.suspendedLanes|A))!==0?0:K,D!==0&&D!==H.retryLane&&(H.retryLane=D,ra(x,D,-1))}gm(),b=Yf(x,b,A,Error(s(421)))}else ii(Me)?(b.flags|=128,b.child=x.child,b=eb.bind(null,x),Qi(Me,b),b=null):(A=H.treeContext,xe&&(Li=ja(Me),ma=b,pr=!0,Ds=null,Td=!1,A!==null&&(Rs[is++]=hl,Rs[is++]=pl,Rs[is++]=ru,hl=A.id,pl=A.overflow,ru=b)),b=co(b,b.pendingProps.children),b.flags|=4096);return b}return K?(D=um(x,b,D.children,D.fallback,A),K=b.child,H=x.child.memoizedState,K.memoizedState=H===null?pu(A):{baseLanes:H.baseLanes|A,cachePool:null},K.childLanes=x.childLanes&~A,b.memoizedState=Gf,D):(A=$f(x,b,D.children,A),b.memoizedState=null,A)}return K?(D=um(x,b,D.children,D.fallback,A),K=b.child,H=x.child.memoizedState,K.memoizedState=H===null?pu(A):{baseLanes:H.baseLanes|A,cachePool:null},K.childLanes=x.childLanes&~A,b.memoizedState=Gf,D):(A=$f(x,b,D.children,A),b.memoizedState=null,A)}function co(x,b){return b=sh({mode:"visible",children:b},x.mode,0,null),b.return=x,x.child=b}function $f(x,b,A,D){var H=x.child;return x=H.sibling,A=Al(H,{mode:"visible",children:A}),(b.mode&1)===0&&(A.lanes=D),A.return=b,A.sibling=null,x!==null&&(D=b.deletions,D===null?(b.deletions=[x],b.flags|=16):D.push(x)),b.child=A}function um(x,b,A,D,H){var K=b.mode;x=x.child;var me=x.sibling,Me={mode:"hidden",children:A};return(K&1)===0&&b.child!==x?(A=b.child,A.childLanes=0,A.pendingProps=Me,b.deletions=null):(A=Al(x,Me),A.subtreeFlags=x.subtreeFlags&14680064),me!==null?D=Al(me,D):(D=Cu(D,K,H,null),D.flags|=2),D.return=b,A.return=b,A.sibling=D,b.child=A,D}function Yf(x,b,A,D){return D!==null&&Yp(D),ml(b,x.child,null,A),x=co(b,b.pendingProps.children),x.flags|=2,b.memoizedState=null,x}function Kx(x,b,A){x.lanes|=b;var D=x.alternate;D!==null&&(D.lanes|=b),li(x.return,b,A)}function Uo(x,b,A,D,H){var K=x.memoizedState;K===null?x.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:D,tail:A,tailMode:H}:(K.isBackwards=b,K.rendering=null,K.renderingStartTime=0,K.last=D,K.tail=A,K.tailMode=H)}function mu(x,b,A){var D=b.pendingProps,H=D.revealOrder,K=D.tail;if(Mr(x,b,D.children,A),D=xr.current,(D&2)!==0)D=D&1|2,b.flags|=128;else{if(x!==null&&(x.flags&128)!==0)e:for(x=b.child;x!==null;){if(x.tag===13)x.memoizedState!==null&&Kx(x,A,b);else if(x.tag===19)Kx(x,A,b);else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===b)break e;for(;x.sibling===null;){if(x.return===null||x.return===b)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}D&=1}if(cn(xr,D),(b.mode&1)===0)b.memoizedState=null;else switch(H){case"forwards":for(A=b.child,H=null;A!==null;)x=A.alternate,x!==null&&Xp(x)===null&&(H=A),A=A.sibling;A=H,A===null?(H=b.child,b.child=null):(H=A.sibling,A.sibling=null),Uo(b,!1,H,A,K);break;case"backwards":for(A=null,H=b.child,b.child=null;H!==null;){if(x=H.alternate,x!==null&&Xp(x)===null){b.child=H;break}x=H.sibling,H.sibling=A,A=H,H=x}Uo(b,!0,A,null,K);break;case"together":Uo(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}function Ua(x,b,A){if(x!==null&&(b.dependencies=x.dependencies),Bo|=b.lanes,(A&b.childLanes)===0)return null;if(x!==null&&b.child!==x.child)throw Error(s(153));if(b.child!==null){for(x=b.child,A=Al(x,x.pendingProps),b.child=A,A.return=b;x.sibling!==null;)x=x.sibling,A=A.sibling=Al(x,x.pendingProps),A.return=b;A.sibling=null}return b.child}function dm(x,b,A){switch(b.tag){case 3:Wf(b),Pd();break;case 5:Gx(b);break;case 1:Yn(b.type)&&si(b);break;case 4:qp(b,b.stateNode.containerInfo);break;case 10:dl(b,b.type._context,b.memoizedProps.value);break;case 13:var D=b.memoizedState;if(D!==null)return D.dehydrated!==null?(cn(xr,xr.current&1),b.flags|=128,null):(A&b.child.childLanes)!==0?kv(x,b,A):(cn(xr,xr.current&1),x=Ua(x,b,A),x!==null?x.sibling:null);cn(xr,xr.current&1);break;case 19:if(D=(A&b.childLanes)!==0,(x.flags&128)!==0){if(D)return mu(x,b,A);b.flags|=128}var H=b.memoizedState;if(H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),cn(xr,xr.current),D)break;return null;case 22:case 23:return b.lanes=0,Fi(x,b,A)}return Ua(x,b,A)}function fm(x,b){switch(vv(b),b.tag){case 1:return Yn(b.type)&&Hn(),x=b.flags,x&65536?(b.flags=x&-65537|128,b):null;case 3:return jd(),Ot($n),Ot(_t),ou(),x=b.flags,(x&65536)!==0&&(x&128)===0?(b.flags=x&-65537|128,b):null;case 5:return bv(b),null;case 13:if(Ot(xr),x=b.memoizedState,x!==null&&x.dehydrated!==null){if(b.alternate===null)throw Error(s(340));Pd()}return x=b.flags,x&65536?(b.flags=x&-65537|128,b):null;case 19:return Ot(xr),null;case 4:return jd(),null;case 10:return Yr(b.type._context),null;case 22:case 23:return rh(),null;case 24:return null;default:return null}}var va=!1,Ni=!1,gu=typeof WeakSet=="function"?WeakSet:Set,bt=null;function ks(x,b){var A=x.ref;if(A!==null)if(typeof A=="function")try{A(null)}catch(D){xa(x,b,D)}else A.current=null}function _l(x,b,A){try{A()}catch(D){xa(x,b,D)}}var jv=!1;function Ov(x,b){for($(x.containerInfo),bt=b;bt!==null;)if(x=bt,b=x.child,(x.subtreeFlags&1028)!==0&&b!==null)b.return=x,bt=b;else for(;bt!==null;){x=bt;try{var A=x.alternate;if((x.flags&1024)!==0)switch(x.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var D=A.memoizedProps,H=A.memoizedState,K=x.stateNode,me=K.getSnapshotBeforeUpdate(x.elementType===x.type?D:_i(x.type,D),H);K.__reactInternalSnapshotBeforeUpdate=me}break;case 3:Se&&Ke(x.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Me){xa(x,x.return,Me)}if(b=x.sibling,b!==null){b.return=x.return,bt=b;break}bt=x.return}return A=jv,jv=!1,A}function wl(x,b,A){var D=b.updateQueue;if(D=D!==null?D.lastEffect:null,D!==null){var H=D=D.next;do{if((H.tag&x)===x){var K=H.destroy;H.destroy=void 0,K!==void 0&&_l(b,A,K)}H=H.next}while(H!==D)}}function Ui(x,b){if(b=b.updateQueue,b=b!==null?b.lastEffect:null,b!==null){var A=b=b.next;do{if((A.tag&x)===x){var D=A.create;A.destroy=D()}A=A.next}while(A!==b)}}function ya(x){var b=x.ref;if(b!==null){var A=x.stateNode;switch(x.tag){case 5:x=ee(A);break;default:x=A}typeof b=="function"?b(x):b.current=x}}function ur(x,b,A){if(rs&&typeof rs.onCommitFiberUnmount=="function")try{rs.onCommitFiberUnmount(ac,b)}catch{}switch(b.tag){case 0:case 11:case 14:case 15:if(x=b.updateQueue,x!==null&&(x=x.lastEffect,x!==null)){var D=x=x.next;do{var H=D,K=H.destroy;H=H.tag,K!==void 0&&((H&2)!==0||(H&4)!==0)&&_l(b,A,K),D=D.next}while(D!==x)}break;case 1:if(ks(b,A),x=b.stateNode,typeof x.componentWillUnmount=="function")try{x.props=b.memoizedProps,x.state=b.memoizedState,x.componentWillUnmount()}catch(me){xa(b,A,me)}break;case 5:ks(b,A);break;case 4:Se?Fv(x,b,A):Z&&Z&&(b=b.stateNode.containerInfo,A=Le(b),Mt(b,A))}}function js(x,b,A){for(var D=b;;)if(ur(x,D,A),D.child===null||Se&&D.tag===4){if(D===b)break;for(;D.sibling===null;){if(D.return===null||D.return===b)return;D=D.return}D.sibling.return=D.return,D=D.sibling}else D.child.return=D,D=D.child}function Iv(x){var b=x.alternate;b!==null&&(x.alternate=null,Iv(b)),x.child=null,x.deletions=null,x.sibling=null,x.tag===5&&(b=x.stateNode,b!==null&&st(b)),x.stateNode=null,x.return=null,x.dependencies=null,x.memoizedProps=null,x.memoizedState=null,x.pendingProps=null,x.stateNode=null,x.updateQueue=null}function Lv(x){return x.tag===5||x.tag===3||x.tag===4}function hm(x){e:for(;;){for(;x.sibling===null;){if(x.return===null||Lv(x.return))return null;x=x.return}for(x.sibling.return=x.return,x=x.sibling;x.tag!==5&&x.tag!==6&&x.tag!==18;){if(x.flags&2||x.child===null||x.tag===4)continue e;x.child.return=x,x=x.child}if(!(x.flags&2))return x.stateNode}}function pm(x){if(Se){e:{for(var b=x.return;b!==null;){if(Lv(b))break e;b=b.return}throw Error(s(160))}var A=b;switch(A.tag){case 5:b=A.stateNode,A.flags&32&&(je(b),A.flags&=-33),A=hm(x),zd(x,A,b);break;case 3:case 4:b=A.stateNode.containerInfo,A=hm(x),mm(x,A,b);break;default:throw Error(s(161))}}}function mm(x,b,A){var D=x.tag;if(D===5||D===6)x=x.stateNode,b?Qe(A,x,b):ot(A,x);else if(D!==4&&(x=x.child,x!==null))for(mm(x,b,A),x=x.sibling;x!==null;)mm(x,b,A),x=x.sibling}function zd(x,b,A){var D=x.tag;if(D===5||D===6)x=x.stateNode,b?Je(A,x,b):nt(A,x);else if(D!==4&&(x=x.child,x!==null))for(zd(x,b,A),x=x.sibling;x!==null;)zd(x,b,A),x=x.sibling}function Fv(x,b,A){for(var D=b,H=!1,K,me;;){if(!H){H=D.return;e:for(;;){if(H===null)throw Error(s(160));switch(K=H.stateNode,H.tag){case 5:me=!1;break e;case 3:K=K.containerInfo,me=!0;break e;case 4:K=K.containerInfo,me=!0;break e}H=H.return}H=!0}if(D.tag===5||D.tag===6)js(x,D,A),me?pe(K,D.stateNode):Oe(K,D.stateNode);else if(D.tag===18)me?We(K,D.stateNode):Ae(K,D.stateNode);else if(D.tag===4){if(D.child!==null){K=D.stateNode.containerInfo,me=!0,D.child.return=D,D=D.child;continue}}else if(ur(x,D,A),D.child!==null){D.child.return=D,D=D.child;continue}if(D===b)break;for(;D.sibling===null;){if(D.return===null||D.return===b)return;D=D.return,D.tag===4&&(H=!1)}D.sibling.return=D.return,D=D.sibling}}function gc(x,b){if(Se){switch(b.tag){case 0:case 11:case 14:case 15:wl(3,b,b.return),Ui(3,b),wl(5,b,b.return);return;case 1:return;case 5:var A=b.stateNode;if(A!=null){var D=b.memoizedProps;x=x!==null?x.memoizedProps:D;var H=b.type,K=b.updateQueue;b.updateQueue=null,K!==null&&be(A,K,H,x,D,b)}return;case 6:if(b.stateNode===null)throw Error(s(162));A=b.memoizedProps,xt(b.stateNode,x!==null?x.memoizedProps:A,A);return;case 3:xe&&x!==null&&x.memoizedState.isDehydrated&&sl(b.stateNode.containerInfo);return;case 12:return;case 13:Hd(b);return;case 19:Hd(b);return;case 17:return}throw Error(s(163))}switch(b.tag){case 0:case 11:case 14:case 15:wl(3,b,b.return),Ui(3,b),wl(5,b,b.return);return;case 12:return;case 13:Hd(b);return;case 19:Hd(b);return;case 3:xe&&x!==null&&x.memoizedState.isDehydrated&&sl(b.stateNode.containerInfo);break;case 22:case 23:return}e:if(Z){switch(b.tag){case 1:case 5:case 6:break e;case 3:case 4:b=b.stateNode,Mt(b.containerInfo,b.pendingChildren);break e}throw Error(s(163))}}function Hd(x){var b=x.updateQueue;if(b!==null){x.updateQueue=null;var A=x.stateNode;A===null&&(A=x.stateNode=new gu),b.forEach(function(D){var H=tb.bind(null,x,D);A.has(D)||(A.add(D),D.then(H,H))})}}function wE(x,b){for(bt=b;bt!==null;){b=bt;var A=b.deletions;if(A!==null)for(var D=0;D<A.length;D++){var H=A[D];try{var K=x;Se?Fv(K,H,b):js(K,H,b);var me=H.alternate;me!==null&&(me.return=null),H.return=null}catch(Ht){xa(H,b,Ht)}}if(A=b.child,(b.subtreeFlags&12854)!==0&&A!==null)A.return=b,bt=A;else for(;bt!==null;){b=bt;try{var Me=b.flags;if(Me&32&&Se&&je(b.stateNode),Me&512){var at=b.alternate;if(at!==null){var vt=at.ref;vt!==null&&(typeof vt=="function"?vt(null):vt.current=null)}}if(Me&8192)switch(b.tag){case 13:if(b.memoizedState!==null){var Dt=b.alternate;(Dt===null||Dt.memoizedState===null)&&(eh=hr())}break;case 22:var un=b.memoizedState!==null,Xt=b.alternate,xn=Xt!==null&&Xt.memoizedState!==null;if(A=b,Se){e:if(D=A,H=un,K=null,Se)for(var Nt=D;;){if(Nt.tag===5){if(K===null){K=Nt;var Hi=Nt.stateNode;H?ut(Hi):Be(Nt.stateNode,Nt.memoizedProps)}}else if(Nt.tag===6){if(K===null){var fs=Nt.stateNode;H?ge(fs):Pe(fs,Nt.memoizedProps)}}else if((Nt.tag!==22&&Nt.tag!==23||Nt.memoizedState===null||Nt===D)&&Nt.child!==null){Nt.child.return=Nt,Nt=Nt.child;continue}if(Nt===D)break;for(;Nt.sibling===null;){if(Nt.return===null||Nt.return===D)break e;K===Nt&&(K=null),Nt=Nt.return}K===Nt&&(K=null),Nt.sibling.return=Nt.return,Nt=Nt.sibling}}if(un&&!xn&&(A.mode&1)!==0){bt=A;for(var ze=A.child;ze!==null;){for(A=bt=ze;bt!==null;){D=bt;var Re=D.child;switch(D.tag){case 0:case 11:case 14:case 15:wl(4,D,D.return);break;case 1:ks(D,D.return);var et=D.stateNode;if(typeof et.componentWillUnmount=="function"){var Et=D.return;try{et.props=D.memoizedProps,et.state=D.memoizedState,et.componentWillUnmount()}catch(Ht){xa(D,Et,Ht)}}break;case 5:ks(D,D.return);break;case 22:if(D.memoizedState!==null){Bv(A);continue}}Re!==null?(Re.return=D,bt=Re):Bv(A)}ze=ze.sibling}}}switch(Me&4102){case 2:pm(b),b.flags&=-3;break;case 6:pm(b),b.flags&=-3,gc(b.alternate,b);break;case 4096:b.flags&=-4097;break;case 4100:b.flags&=-4097,gc(b.alternate,b);break;case 4:gc(b.alternate,b)}}catch(Ht){xa(b,b.return,Ht)}if(A=b.sibling,A!==null){A.return=b.return,bt=A;break}bt=b.return}}}function qf(x,b,A){bt=x,Xf(x)}function Xf(x,b,A){for(var D=(x.mode&1)!==0;bt!==null;){var H=bt,K=H.child;if(H.tag===22&&D){var me=H.memoizedState!==null||va;if(!me){var Me=H.alternate,at=Me!==null&&Me.memoizedState!==null||Ni;Me=va;var vt=Ni;if(va=me,(Ni=at)&&!vt)for(bt=H;bt!==null;)me=bt,at=me.child,me.tag===22&&me.memoizedState!==null?vu(H):at!==null?(at.return=me,bt=at):vu(H);for(;K!==null;)bt=K,Xf(K),K=K.sibling;bt=H,va=Me,Ni=vt}Uv(x)}else(H.subtreeFlags&8772)!==0&&K!==null?(K.return=H,bt=K):Uv(x)}}function Uv(x){for(;bt!==null;){var b=bt;if((b.flags&8772)!==0){var A=b.alternate;try{if((b.flags&8772)!==0)switch(b.tag){case 0:case 11:case 15:Ni||Ui(5,b);break;case 1:var D=b.stateNode;if(b.flags&4&&!Ni)if(A===null)D.componentDidMount();else{var H=b.elementType===b.type?A.memoizedProps:_i(b.type,A.memoizedProps);D.componentDidUpdate(H,A.memoizedState,D.__reactInternalSnapshotBeforeUpdate)}var K=b.updateQueue;K!==null&&Lx(b,K,D);break;case 3:var me=b.updateQueue;if(me!==null){if(A=null,b.child!==null)switch(b.child.tag){case 5:A=ee(b.child.stateNode);break;case 1:A=b.child.stateNode}Lx(b,me,A)}break;case 5:var Me=b.stateNode;A===null&&b.flags&4&&rt(Me,b.type,b.memoizedProps,b);break;case 6:break;case 4:break;case 12:break;case 13:if(xe&&b.memoizedState===null){var at=b.alternate;if(at!==null){var vt=at.memoizedState;if(vt!==null){var Dt=vt.dehydrated;Dt!==null&&ue(Dt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(s(163))}Ni||b.flags&512&&ya(b)}catch(un){xa(b,b.return,un)}}if(b===x){bt=null;break}if(A=b.sibling,A!==null){A.return=b.return,bt=A;break}bt=b.return}}function Bv(x){for(;bt!==null;){var b=bt;if(b===x){bt=null;break}var A=b.sibling;if(A!==null){A.return=b.return,bt=A;break}bt=b.return}}function vu(x){for(;bt!==null;){var b=bt;try{switch(b.tag){case 0:case 11:case 15:var A=b.return;try{Ui(4,b)}catch(at){xa(b,A,at)}break;case 1:var D=b.stateNode;if(typeof D.componentDidMount=="function"){var H=b.return;try{D.componentDidMount()}catch(at){xa(b,H,at)}}var K=b.return;try{ya(b)}catch(at){xa(b,K,at)}break;case 5:var me=b.return;try{ya(b)}catch(at){xa(b,me,at)}}}catch(at){xa(b,b.return,at)}if(b===x){bt=null;break}var Me=b.sibling;if(Me!==null){Me.return=b.return,bt=Me;break}bt=b.return}}var Kf=0,yu=1,xu=2,Sl=3,Vd=4;if(typeof Symbol=="function"&&Symbol.for){var bu=Symbol.for;Kf=bu("selector.component"),yu=bu("selector.has_pseudo_class"),xu=bu("selector.role"),Sl=bu("selector.test_id"),Vd=bu("selector.text")}function Zf(x){var b=oe(x);if(b!=null){if(typeof b.memoizedProps["data-testname"]!="string")throw Error(s(364));return b}if(x=J(x),x===null)throw Error(s(362));return x.stateNode.current}function Qf(x,b){switch(b.$$typeof){case Kf:if(x.type===b.value)return!0;break;case yu:e:{b=b.value,x=[x,0];for(var A=0;A<x.length;){var D=x[A++],H=x[A++],K=b[H];if(D.tag!==5||!we(D)){for(;K!=null&&Qf(D,K);)H++,K=b[H];if(H===b.length){b=!0;break e}else for(D=D.child;D!==null;)x.push(D,H),D=D.sibling}}b=!1}return b;case xu:if(x.tag===5&&De(x.stateNode,b.value))return!0;break;case Vd:if((x.tag===5||x.tag===6)&&(x=ye(x),x!==null&&0<=x.indexOf(b.value)))return!0;break;case Sl:if(x.tag===5&&(x=x.memoizedProps["data-testname"],typeof x=="string"&&x.toLowerCase()===b.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function vc(x){switch(x.$$typeof){case Kf:return"<"+(k(x.value)||"Unknown")+">";case yu:return":has("+(vc(x)||"")+")";case xu:return'[role="'+x.value+'"]';case Vd:return'"'+x.value+'"';case Sl:return'[data-testname="'+x.value+'"]';default:throw Error(s(365))}}function ls(x,b){var A=[];x=[x,0];for(var D=0;D<x.length;){var H=x[D++],K=x[D++],me=b[K];if(H.tag!==5||!we(H)){for(;me!=null&&Qf(H,me);)K++,me=b[K];if(K===b.length)A.push(H);else for(H=H.child;H!==null;)x.push(H,K),H=H.sibling}}return A}function El(x,b){if(!$e)throw Error(s(363));x=Zf(x),x=ls(x,b),b=[],x=Array.from(x);for(var A=0;A<x.length;){var D=x[A++];if(D.tag===5)we(D)||b.push(D.stateNode);else for(D=D.child;D!==null;)x.push(D),D=D.sibling}return b}var zv=Math.ceil,Jf=o.ReactCurrentDispatcher,uo=o.ReactCurrentOwner,qn=o.ReactCurrentBatchConfig,vn=0,Ur=null,Xn=null,mr=0,na=0,_u=fn(0),Cr=0,Wd=null,Bo=0,cs=0,wu=0,Ml=null,qr=null,eh=0,yc=1/0;function Su(){yc=hr()+500}var Gd=!1,dr=null,fo=null,$d=!1,zo=null,Eu=0,Mu=0,Cl=null,lr=-1,Nr=0;function On(){return(vn&6)!==0?hr():lr!==-1?lr:lr=hr()}function ho(x){return(x.mode&1)===0?1:(vn&2)!==0&&mr!==0?mr&-mr:lc.transition!==null?(Nr===0&&(x=ro,ro<<=1,(ro&4194240)===0&&(ro=64),Nr=x),Nr):(x=sn,x!==0?x:ke())}function ra(x,b,A){if(50<Mu)throw Mu=0,Cl=null,Error(s(185));var D=xc(x,b);return D===null?null:(Cs(D,b,A),((vn&2)===0||D!==Ur)&&(D===Ur&&((vn&2)===0&&(cs|=b),Cr===4&&zi(D,mr)),Ba(D,A),b===1&&vn===0&&(x.mode&1)===0&&(Su(),Io&&ea())),D)}function xc(x,b){x.lanes|=b;var A=x.alternate;for(A!==null&&(A.lanes|=b),A=x,x=x.return;x!==null;)x.childLanes|=b,A=x.alternate,A!==null&&(A.childLanes|=b),A=x,x=x.return;return A.tag===3?A.stateNode:null}function Ba(x,b){var A=x.callbackNode;Cd(x,b);var D=rc(x,x===Ur?mr:0);if(D===0)A!==null&&Oo(A),x.callbackNode=null,x.callbackPriority=0;else if(b=D&-D,x.callbackPriority!==b){if(A!=null&&Oo(A),b===1)x.tag===0?oc(us.bind(null,x)):nu(us.bind(null,x)),Ce?ct(function(){vn===0&&ea()}):ns(ao,ea),A=null;else{switch(Ns(D)){case 1:A=ao;break;case 4:A=Up;break;case 16:A=Ji;break;case 536870912:A=ic;break;default:A=Ji}A=vm(A,Bi.bind(null,x))}x.callbackPriority=b,x.callbackNode=A}}function Bi(x,b){if(lr=-1,Nr=0,(vn&6)!==0)throw Error(s(327));var A=x.callbackNode;if(Ho()&&x.callbackNode!==A)return null;var D=rc(x,x===Ur?mr:0);if(D===0)return null;if((D&30)!==0||(D&x.expiredLanes)!==0||b)b=ih(x,D);else{b=D;var H=vn;vn|=2;var K=Wv();(Ur!==x||mr!==b)&&(Su(),Nl(x,b));do try{Qx();break}catch(Me){Vv(x,Me)}while(!0);wi(),Jf.current=K,vn=H,Xn!==null?b=0:(Ur=null,mr=0,b=Cr)}if(b!==0){if(b===2&&(H=jo(x),H!==0&&(D=H,b=th(x,H))),b===1)throw A=Wd,Nl(x,0),zi(x,D),Ba(x,hr()),A;if(b===6)zi(x,D);else{if(H=x.current.alternate,(D&30)===0&&!Hv(H)&&(b=ih(x,D),b===2&&(K=jo(x),K!==0&&(D=K,b=th(x,K))),b===1))throw A=Wd,Nl(x,0),zi(x,D),Ba(x,hr()),A;switch(x.finishedWork=H,x.finishedLanes=D,b){case 0:case 1:throw Error(s(345));case 2:po(x,qr);break;case 3:if(zi(x,D),(D&130023424)===D&&(b=eh+500-hr(),10<b)){if(rc(x,0)!==0)break;if(H=x.suspendedLanes,(H&D)!==D){On(),x.pingedLanes|=x.suspendedLanes&H;break}x.timeoutHandle=ie(po.bind(null,x,qr),b);break}po(x,qr);break;case 4:if(zi(x,D),(D&4194240)===D)break;for(b=x.eventTimes,H=-1;0<D;){var me=31-Qn(D);K=1<<me,me=b[me],me>H&&(H=me),D&=~K}if(D=H,D=hr()-D,D=(120>D?120:480>D?480:1080>D?1080:1920>D?1920:3e3>D?3e3:4320>D?4320:1960*zv(D/1960))-D,10<D){x.timeoutHandle=ie(po.bind(null,x,qr),D);break}po(x,qr);break;case 5:po(x,qr);break;default:throw Error(s(329))}}}return Ba(x,hr()),x.callbackNode===A?Bi.bind(null,x):null}function th(x,b){var A=Ml;return x.current.memoizedState.isDehydrated&&(Nl(x,b).flags|=256),x=ih(x,b),x!==2&&(b=qr,qr=A,b!==null&&nh(b)),x}function nh(x){qr===null?qr=x:qr.push.apply(qr,x)}function Hv(x){for(var b=x;;){if(b.flags&16384){var A=b.updateQueue;if(A!==null&&(A=A.stores,A!==null))for(var D=0;D<A.length;D++){var H=A[D],K=H.getSnapshot;H=H.value;try{if(!xi(K(),H))return!1}catch{return!1}}}if(A=b.child,b.subtreeFlags&16384&&A!==null)A.return=b,b=A;else{if(b===x)break;for(;b.sibling===null;){if(b.return===null||b.return===x)return!0;b=b.return}b.sibling.return=b.return,b=b.sibling}}return!0}function zi(x,b){for(b&=~wu,b&=~cs,x.suspendedLanes|=b,x.pingedLanes&=~b,x=x.expirationTimes;0<b;){var A=31-Qn(b),D=1<<A;x[A]=-1,b&=~D}}function us(x){if((vn&6)!==0)throw Error(s(327));Ho();var b=rc(x,0);if((b&1)===0)return Ba(x,hr()),null;var A=ih(x,b);if(x.tag!==0&&A===2){var D=jo(x);D!==0&&(b=D,A=th(x,D))}if(A===1)throw A=Wd,Nl(x,0),zi(x,b),Ba(x,hr()),A;if(A===6)throw Error(s(345));return x.finishedWork=x.current.alternate,x.finishedLanes=b,po(x,qr),Ba(x,hr()),null}function Yd(x){zo!==null&&zo.tag===0&&(vn&6)===0&&Ho();var b=vn;vn|=1;var A=qn.transition,D=sn;try{if(qn.transition=null,sn=1,x)return x()}finally{sn=D,qn.transition=A,vn=b,(vn&6)===0&&ea()}}function rh(){na=_u.current,Ot(_u)}function Nl(x,b){x.finishedWork=null,x.finishedLanes=0;var A=x.timeoutHandle;if(A!==fe&&(x.timeoutHandle=fe,le(A)),Xn!==null)for(A=Xn.return;A!==null;){var D=A;switch(vv(D),D.tag){case 1:D=D.type.childContextTypes,D!=null&&Hn();break;case 3:jd(),Ot($n),Ot(_t),ou();break;case 5:bv(D);break;case 4:jd();break;case 13:Ot(xr);break;case 19:Ot(xr);break;case 10:Yr(D.type._context);break;case 22:case 23:rh()}A=A.return}if(Ur=x,Xn=x=Al(x.current,null),mr=na=b,Cr=0,Wd=null,wu=cs=Bo=0,qr=Ml=null,pa!==null){for(b=0;b<pa.length;b++)if(A=pa[b],D=A.interleaved,D!==null){A.interleaved=null;var H=D.next,K=A.pending;if(K!==null){var me=K.next;K.next=H,D.next=me}A.pending=D}pa=null}return x}function Vv(x,b){do{var A=Xn;try{if(wi(),Of.current=Ud,Kp){for(var D=br.memoizedState;D!==null;){var H=D.queue;H!==null&&(H.pending=null),D=D.next}Kp=!1}if(lu=0,Ei=Si=br=null,Lo=!1,cu=0,uo.current=null,A===null||A.return===null){Cr=1,Wd=b,Xn=null;break}e:{var K=x,me=A.return,Me=A,at=b;if(b=mr,Me.flags|=32768,at!==null&&typeof at=="object"&&typeof at.then=="function"){var vt=at,Dt=Me,un=Dt.tag;if((Dt.mode&1)===0&&(un===0||un===11||un===15)){var Xt=Dt.alternate;Xt?(Dt.updateQueue=Xt.updateQueue,Dt.memoizedState=Xt.memoizedState,Dt.lanes=Xt.lanes):(Dt.updateQueue=null,Dt.memoizedState=null)}var xn=Pv(me);if(xn!==null){xn.flags&=-257,du(xn,me,Me,K,b),xn.mode&1&&vl(K,vt,b),b=xn,at=vt;var Nt=b.updateQueue;if(Nt===null){var Hi=new Set;Hi.add(at),b.updateQueue=Hi}else Nt.add(at);break e}else{if((b&1)===0){vl(K,vt,b),gm();break e}at=Error(s(426))}}else if(pr&&Me.mode&1){var fs=Pv(me);if(fs!==null){(fs.flags&65536)===0&&(fs.flags|=256),du(fs,me,Me,K,b),Yp(at);break e}}K=at,Cr!==4&&(Cr=2),Ml===null?Ml=[K]:Ml.push(K),at=Tv(at,Me),Me=me;do{switch(Me.tag){case 3:Me.flags|=65536,b&=-b,Me.lanes|=b;var ze=Xx(Me,at,b);zp(Me,ze);break e;case 1:K=at;var Re=Me.type,et=Me.stateNode;if((Me.flags&128)===0&&(typeof Re.getDerivedStateFromError=="function"||et!==null&&typeof et.componentDidCatch=="function"&&(fo===null||!fo.has(et)))){Me.flags|=65536,b&=-b,Me.lanes|=b;var Et=sm(Me,K,b);zp(Me,Et);break e}}Me=Me.return}while(Me!==null)}$v(A)}catch(Ht){b=Ht,Xn===A&&A!==null&&(Xn=A=A.return);continue}break}while(!0)}function Wv(){var x=Jf.current;return Jf.current=Ud,x===null?Ud:x}function gm(){(Cr===0||Cr===3||Cr===2)&&(Cr=4),Ur===null||(Bo&268435455)===0&&(cs&268435455)===0||zi(Ur,mr)}function ih(x,b){var A=vn;vn|=2;var D=Wv();Ur===x&&mr===b||Nl(x,b);do try{Zx();break}catch(H){Vv(x,H)}while(!0);if(wi(),vn=A,Jf.current=D,Xn!==null)throw Error(s(261));return Ur=null,mr=0,Cr}function Zx(){for(;Xn!==null;)Gv(Xn)}function Qx(){for(;Xn!==null&&!As();)Gv(Xn)}function Gv(x){var b=Xv(x.alternate,x,na);x.memoizedProps=x.pendingProps,b===null?$v(x):Xn=b,uo.current=null}function $v(x){var b=x;do{var A=b.alternate;if(x=b.return,(b.flags&32768)===0){if(A=cm(A,b,na),A!==null){Xn=A;return}}else{if(A=fm(A,b),A!==null){A.flags&=32767,Xn=A;return}if(x!==null)x.flags|=32768,x.subtreeFlags=0,x.deletions=null;else{Cr=6,Xn=null;return}}if(b=b.sibling,b!==null){Xn=b;return}Xn=b=x}while(b!==null);Cr===0&&(Cr=5)}function po(x,b){var A=sn,D=qn.transition;try{qn.transition=null,sn=1,Jx(x,b,A)}finally{qn.transition=D,sn=A}return null}function Jx(x,b,A){do Ho();while(zo!==null);if((vn&6)!==0)throw Error(s(327));var D=x.finishedWork,H=x.finishedLanes;if(D===null)return null;if(x.finishedWork=null,x.finishedLanes=0,D===x.current)throw Error(s(177));x.callbackNode=null,x.callbackPriority=0;var K=D.lanes|D.childLanes;if(io(x,K),x===Ur&&(Xn=Ur=null,mr=0),(D.subtreeFlags&2064)===0&&(D.flags&2064)===0||$d||($d=!0,vm(Ji,function(){return Ho(),null})),K=(D.flags&15990)!==0,(D.subtreeFlags&15990)!==0||K){K=qn.transition,qn.transition=null;var me=sn;sn=1;var Me=vn;vn|=4,uo.current=null,Ov(x,D),wE(x,D),G(x.containerInfo),x.current=D,qf(D),Fp(),vn=Me,sn=me,qn.transition=K}else x.current=D;if($d&&($d=!1,zo=x,Eu=H),K=x.pendingLanes,K===0&&(fo=null),ol(D.stateNode),Ba(x,hr()),b!==null)for(A=x.onRecoverableError,D=0;D<b.length;D++)A(b[D]);if(Gd)throw Gd=!1,x=dr,dr=null,x;return(Eu&1)!==0&&x.tag!==0&&Ho(),K=x.pendingLanes,(K&1)!==0?x===Cl?Mu++:(Mu=0,Cl=x):Mu=0,ea(),null}function Ho(){if(zo!==null){var x=Ns(Eu),b=qn.transition,A=sn;try{if(qn.transition=null,sn=16>x?16:x,zo===null)var D=!1;else{if(x=zo,zo=null,Eu=0,(vn&6)!==0)throw Error(s(331));var H=vn;for(vn|=4,bt=x.current;bt!==null;){var K=bt,me=K.child;if((bt.flags&16)!==0){var Me=K.deletions;if(Me!==null){for(var at=0;at<Me.length;at++){var vt=Me[at];for(bt=vt;bt!==null;){var Dt=bt;switch(Dt.tag){case 0:case 11:case 15:wl(8,Dt,K)}var un=Dt.child;if(un!==null)un.return=Dt,bt=un;else for(;bt!==null;){Dt=bt;var Xt=Dt.sibling,xn=Dt.return;if(Iv(Dt),Dt===vt){bt=null;break}if(Xt!==null){Xt.return=xn,bt=Xt;break}bt=xn}}}var Nt=K.alternate;if(Nt!==null){var Hi=Nt.child;if(Hi!==null){Nt.child=null;do{var fs=Hi.sibling;Hi.sibling=null,Hi=fs}while(Hi!==null)}}bt=K}}if((K.subtreeFlags&2064)!==0&&me!==null)me.return=K,bt=me;else e:for(;bt!==null;){if(K=bt,(K.flags&2048)!==0)switch(K.tag){case 0:case 11:case 15:wl(9,K,K.return)}var ze=K.sibling;if(ze!==null){ze.return=K.return,bt=ze;break e}bt=K.return}}var Re=x.current;for(bt=Re;bt!==null;){me=bt;var et=me.child;if((me.subtreeFlags&2064)!==0&&et!==null)et.return=me,bt=et;else e:for(me=Re;bt!==null;){if(Me=bt,(Me.flags&2048)!==0)try{switch(Me.tag){case 0:case 11:case 15:Ui(9,Me)}}catch(Ht){xa(Me,Me.return,Ht)}if(Me===me){bt=null;break e}var Et=Me.sibling;if(Et!==null){Et.return=Me.return,bt=Et;break e}bt=Me.return}}if(vn=H,ea(),rs&&typeof rs.onPostCommitFiberRoot=="function")try{rs.onPostCommitFiberRoot(ac,x)}catch{}D=!0}return D}finally{sn=A,qn.transition=b}}return!1}function ah(x,b,A){b=Tv(A,b),b=Xx(x,b,1),cc(x,b),b=On(),x=xc(x,1),x!==null&&(Cs(x,1,b),Ba(x,b))}function xa(x,b,A){if(x.tag===3)ah(x,x,A);else for(;b!==null;){if(b.tag===3){ah(b,x,A);break}else if(b.tag===1){var D=b.stateNode;if(typeof b.type.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&(fo===null||!fo.has(D))){x=Tv(A,x),x=sm(b,x,1),cc(b,x),x=On(),b=xc(b,1),b!==null&&(Cs(b,1,x),Ba(b,x));break}}b=b.return}}function Yv(x,b,A){var D=x.pingCache;D!==null&&D.delete(b),b=On(),x.pingedLanes|=x.suspendedLanes&A,Ur===x&&(mr&A)===A&&(Cr===4||Cr===3&&(mr&130023424)===mr&&500>hr()-eh?Nl(x,0):wu|=A),Ba(x,b)}function qv(x,b){b===0&&((x.mode&1)===0?b=1:(b=Cn,Cn<<=1,(Cn&130023424)===0&&(Cn=4194304)));var A=On();x=xc(x,b),x!==null&&(Cs(x,b,A),Ba(x,A))}function eb(x){var b=x.memoizedState,A=0;b!==null&&(A=b.retryLane),qv(x,A)}function tb(x,b){var A=0;switch(x.tag){case 13:var D=x.stateNode,H=x.memoizedState;H!==null&&(A=H.retryLane);break;case 19:D=x.stateNode;break;default:throw Error(s(314))}D!==null&&D.delete(b),qv(x,A)}var Xv;Xv=function(x,b,A){if(x!==null)if(x.memoizedProps!==b.pendingProps||$n.current)Ci=!0;else{if((x.lanes&A)===0&&(b.flags&128)===0)return Ci=!1,dm(x,b,A);Ci=(x.flags&131072)!==0}else Ci=!1,pr&&(b.flags&1048576)!==0&&zx(b,Gp,b.index);switch(b.lanes=0,b.tag){case 2:var D=b.type;x!==null&&(x.alternate=null,b.alternate=null,b.flags|=2),x=b.pendingProps;var H=Zn(b,_t.current);Lr(b,A),H=Od(null,b,D,x,H,A);var K=hc();return b.flags|=1,typeof H=="object"&&H!==null&&typeof H.render=="function"&&H.$$typeof===void 0?(b.tag=1,b.memoizedState=null,b.updateQueue=null,Yn(D)?(K=!0,si(b)):K=!1,b.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,Nd(b),H.updater=Vp,b.stateNode=H,H._reactInternals=b,mv(b,D,x,A),b=ta(null,b,D,!0,K,A)):(b.tag=0,pr&&K&&gv(b),Mr(null,b,H,A),b=b.child),b;case 16:D=b.elementType;e:{switch(x!==null&&(x.alternate=null,b.alternate=null,b.flags|=2),x=b.pendingProps,H=D._init,D=H(D._payload),b.type=D,H=b.tag=SE(D),x=_i(D,x),H){case 0:b=bl(null,b,D,x,A);break e;case 1:b=hu(null,b,D,x,A);break e;case 11:b=or(null,b,D,x,A);break e;case 14:b=Jn(null,b,D,_i(D.type,x),A);break e}throw Error(s(306,D,""))}return b;case 0:return D=b.type,H=b.pendingProps,H=b.elementType===D?H:_i(D,H),bl(x,b,D,H,A);case 1:return D=b.type,H=b.pendingProps,H=b.elementType===D?H:_i(D,H),hu(x,b,D,H,A);case 3:e:{if(Wf(b),x===null)throw Error(s(387));D=b.pendingProps,K=b.memoizedState,H=K.element,fv(x,b),Hp(b,D,null,A);var me=b.memoizedState;if(D=me.element,xe&&K.isDehydrated)if(K={element:D,isDehydrated:!1,cache:me.cache,transitions:me.transitions},b.updateQueue.baseState=K,b.memoizedState=K,b.flags&256){H=Error(s(423)),b=Dv(x,b,D,A,H);break e}else if(D!==H){H=Error(s(424)),b=Dv(x,b,D,A,H);break e}else for(xe&&(Li=Gr(b.stateNode.containerInfo),ma=b,pr=!0,Ds=null,Td=!1),A=Wx(b,null,D,A),b.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling;else{if(Pd(),D===H){b=Ua(x,b,A);break e}Mr(x,b,D,A)}b=b.child}return b;case 5:return Gx(b),x===null&&dc(b),D=b.type,H=b.pendingProps,K=x!==null?x.memoizedProps:null,me=H.children,de(D,H)?me=null:K!==null&&de(D,K)&&(b.flags|=32),ga(x,b),Mr(x,b,me,A),b.child;case 6:return x===null&&dc(b),null;case 13:return kv(x,b,A);case 4:return qp(b,b.stateNode.containerInfo),D=b.pendingProps,x===null?b.child=ml(b,null,D,A):Mr(x,b,D,A),b.child;case 11:return D=b.type,H=b.pendingProps,H=b.elementType===D?H:_i(D,H),or(x,b,D,H,A);case 7:return Mr(x,b,b.pendingProps,A),b.child;case 8:return Mr(x,b,b.pendingProps.children,A),b.child;case 12:return Mr(x,b,b.pendingProps.children,A),b.child;case 10:e:{if(D=b.type._context,H=b.pendingProps,K=b.memoizedProps,me=H.value,dl(b,D,me),K!==null)if(xi(K.value,me)){if(K.children===H.children&&!$n.current){b=Ua(x,b,A);break e}}else for(K=b.child,K!==null&&(K.return=b);K!==null;){var Me=K.dependencies;if(Me!==null){me=K.child;for(var at=Me.firstContext;at!==null;){if(at.context===D){if(K.tag===1){at=fl(-1,A&-A),at.tag=2;var vt=K.updateQueue;if(vt!==null){vt=vt.shared;var Dt=vt.pending;Dt===null?at.next=at:(at.next=Dt.next,Dt.next=at),vt.pending=at}}K.lanes|=A,at=K.alternate,at!==null&&(at.lanes|=A),li(K.return,A,b),Me.lanes|=A;break}at=at.next}}else if(K.tag===10)me=K.type===b.type?null:K.child;else if(K.tag===18){if(me=K.return,me===null)throw Error(s(341));me.lanes|=A,Me=me.alternate,Me!==null&&(Me.lanes|=A),li(me,A,b),me=K.sibling}else me=K.child;if(me!==null)me.return=K;else for(me=K;me!==null;){if(me===b){me=null;break}if(K=me.sibling,K!==null){K.return=me.return,me=K;break}me=me.return}K=me}Mr(x,b,H.children,A),b=b.child}return b;case 9:return H=b.type,D=b.pendingProps.children,Lr(b,A),H=yr(H),D=D(H),b.flags|=1,Mr(x,b,D,A),b.child;case 14:return D=b.type,H=_i(D,b.pendingProps),H=_i(D.type,H),Jn(x,b,D,H,A);case 15:return xl(x,b,b.type,b.pendingProps,A);case 17:return D=b.type,H=b.pendingProps,H=b.elementType===D?H:_i(D,H),x!==null&&(x.alternate=null,b.alternate=null,b.flags|=2),b.tag=1,Yn(D)?(x=!0,si(b)):x=!1,Lr(b,A),Ux(b,D,H),mv(b,D,H,A),ta(null,b,D,!0,x,A);case 19:return mu(x,b,A);case 22:return Fi(x,b,A)}throw Error(s(156,b.tag))};function vm(x,b){return ns(x,b)}function nb(x,b,A,D){this.tag=x,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=b,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=D,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ds(x,b,A,D){return new nb(x,b,A,D)}function ym(x){return x=x.prototype,!(!x||!x.isReactComponent)}function SE(x){if(typeof x=="function")return ym(x)?1:0;if(x!=null){if(x=x.$$typeof,x===_)return 11;if(x===M)return 14}return 2}function Al(x,b){var A=x.alternate;return A===null?(A=ds(x.tag,b,x.key,x.mode),A.elementType=x.elementType,A.type=x.type,A.stateNode=x.stateNode,A.alternate=x,x.alternate=A):(A.pendingProps=b,A.type=x.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=x.flags&14680064,A.childLanes=x.childLanes,A.lanes=x.lanes,A.child=x.child,A.memoizedProps=x.memoizedProps,A.memoizedState=x.memoizedState,A.updateQueue=x.updateQueue,b=x.dependencies,A.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext},A.sibling=x.sibling,A.index=x.index,A.ref=x.ref,A}function xm(x,b,A,D,H,K){var me=2;if(D=x,typeof x=="function")ym(x)&&(me=1);else if(typeof x=="string")me=5;else e:switch(x){case d:return Cu(A.children,H,K,b);case f:me=8,H|=8;break;case p:return x=ds(12,A,b,H|2),x.elementType=p,x.lanes=K,x;case v:return x=ds(13,A,b,H),x.elementType=v,x.lanes=K,x;case w:return x=ds(19,A,b,H),x.elementType=w,x.lanes=K,x;case N:return sh(A,H,K,b);default:if(typeof x=="object"&&x!==null)switch(x.$$typeof){case m:me=10;break e;case y:me=9;break e;case _:me=11;break e;case M:me=14;break e;case C:me=16,D=null;break e}throw Error(s(130,x==null?x:typeof x,""))}return b=ds(me,A,b,H),b.elementType=x,b.type=D,b.lanes=K,b}function Cu(x,b,A,D){return x=ds(7,x,D,b),x.lanes=A,x}function sh(x,b,A,D){return x=ds(22,x,D,b),x.elementType=N,x.lanes=A,x.stateNode={},x}function bm(x,b,A){return x=ds(6,x,null,b),x.lanes=A,x}function _m(x,b,A){return b=ds(4,x.children!==null?x.children:[],x.key,b),b.lanes=A,b.stateNode={containerInfo:x.containerInfo,pendingChildren:null,implementation:x.implementation},b}function wm(x,b,A,D,H){this.tag=b,this.containerInfo=x,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=fe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tu(0),this.expirationTimes=tu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tu(0),this.identifierPrefix=D,this.onRecoverableError=H,xe&&(this.mutableSourceEagerHydrationData=null)}function rb(x,b,A,D,H,K,me,Me,at){return x=new wm(x,b,A,Me,at),b===1?(b=1,K===!0&&(b|=8)):b=0,K=ds(3,null,null,b),x.current=K,K.stateNode=x,K.memoizedState={element:D,isDehydrated:A,cache:null,transitions:null},Nd(K),x}function ib(x){if(!x)return Yt;x=x._reactInternals;e:{if(I(x)!==x||x.tag!==1)throw Error(s(170));var b=x;do{switch(b.tag){case 3:b=b.stateNode.context;break e;case 1:if(Yn(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break e}}b=b.return}while(b!==null);throw Error(s(171))}if(x.tag===1){var A=x.type;if(Yn(A))return jn(x,A,b)}return b}function ab(x){var b=x._reactInternals;if(b===void 0)throw typeof x.render=="function"?Error(s(188)):(x=Object.keys(x).join(","),Error(s(268,x)));return x=O(b),x===null?null:x.stateNode}function Os(x,b){if(x=x.memoizedState,x!==null&&x.dehydrated!==null){var A=x.retryLane;x.retryLane=A!==0&&A<b?A:b}}function oh(x,b){Os(x,b),(x=x.alternate)&&Os(x,b)}function Sm(x){return x=O(x),x===null?null:x.stateNode}function sb(){return null}return n.attemptContinuousHydration=function(x){if(x.tag===13){var b=On();ra(x,134217728,b),oh(x,134217728)}},n.attemptHydrationAtCurrentPriority=function(x){if(x.tag===13){var b=On(),A=ho(x);ra(x,A,b),oh(x,A)}},n.attemptSynchronousHydration=function(x){switch(x.tag){case 3:var b=x.stateNode;if(b.current.memoizedState.isDehydrated){var A=ko(b.pendingLanes);A!==0&&(Ii(b,A|1),Ba(b,hr()),(vn&6)===0&&(Su(),ea()))}break;case 13:var D=On();Yd(function(){return ra(x,1,D)}),oh(x,1)}},n.batchedUpdates=function(x,b){var A=vn;vn|=1;try{return x(b)}finally{vn=A,vn===0&&(Su(),Io&&ea())}},n.createComponentSelector=function(x){return{$$typeof:Kf,value:x}},n.createContainer=function(x,b,A,D,H,K,me){return rb(x,b,!1,null,A,D,H,K,me)},n.createHasPseudoClassSelector=function(x){return{$$typeof:yu,value:x}},n.createHydrationContainer=function(x,b,A,D,H,K,me,Me,at){return x=rb(A,D,!0,x,H,K,me,Me,at),x.context=ib(null),A=x.current,D=On(),H=ho(A),K=fl(D,H),K.callback=b??null,cc(A,K),x.current.lanes=H,Cs(x,H,D),Ba(x,D),x},n.createPortal=function(x,b,A){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:D==null?null:""+D,children:x,containerInfo:b,implementation:A}},n.createRoleSelector=function(x){return{$$typeof:xu,value:x}},n.createTestNameSelector=function(x){return{$$typeof:Sl,value:x}},n.createTextSelector=function(x){return{$$typeof:Vd,value:x}},n.deferredUpdates=function(x){var b=sn,A=qn.transition;try{return qn.transition=null,sn=16,x()}finally{sn=b,qn.transition=A}},n.discreteUpdates=function(x,b,A,D,H){var K=sn,me=qn.transition;try{return qn.transition=null,sn=1,x(b,A,D,H)}finally{sn=K,qn.transition=me,vn===0&&Su()}},n.findAllNodes=El,n.findBoundingRects=function(x,b){if(!$e)throw Error(s(363));b=El(x,b),x=[];for(var A=0;A<b.length;A++)x.push(Q(b[A]));for(b=x.length-1;0<b;b--){A=x[b];for(var D=A.x,H=D+A.width,K=A.y,me=K+A.height,Me=b-1;0<=Me;Me--)if(b!==Me){var at=x[Me],vt=at.x,Dt=vt+at.width,un=at.y,Xt=un+at.height;if(D>=vt&&K>=un&&H<=Dt&&me<=Xt){x.splice(b,1);break}else if(D!==vt||A.width!==at.width||Xt<K||un>me){if(!(K!==un||A.height!==at.height||Dt<D||vt>H)){vt>D&&(at.width+=vt-D,at.x=D),Dt<H&&(at.width=H-vt),x.splice(b,1);break}}else{un>K&&(at.height+=un-K,at.y=K),Xt<me&&(at.height=me-un),x.splice(b,1);break}}}return x},n.findHostInstance=ab,n.findHostInstanceWithNoPortals=function(x){return x=z(x),x=x!==null?Y(x):null,x===null?null:x.stateNode},n.findHostInstanceWithWarning=function(x){return ab(x)},n.flushControlled=function(x){var b=vn;vn|=1;var A=qn.transition,D=sn;try{qn.transition=null,sn=1,x()}finally{sn=D,qn.transition=A,vn=b,vn===0&&(Su(),ea())}},n.flushPassiveEffects=Ho,n.flushSync=Yd,n.focusWithin=function(x,b){if(!$e)throw Error(s(363));for(x=Zf(x),b=ls(x,b),b=Array.from(b),x=0;x<b.length;){var A=b[x++];if(!we(A)){if(A.tag===5&&Ue(A.stateNode))return!0;for(A=A.child;A!==null;)b.push(A),A=A.sibling}}return!1},n.getCurrentUpdatePriority=function(){return sn},n.getFindAllNodesFailureDescription=function(x,b){if(!$e)throw Error(s(363));var A=0,D=[];x=[Zf(x),0];for(var H=0;H<x.length;){var K=x[H++],me=x[H++],Me=b[me];if((K.tag!==5||!we(K))&&(Qf(K,Me)&&(D.push(vc(Me)),me++,me>A&&(A=me)),me<b.length))for(K=K.child;K!==null;)x.push(K,me),K=K.sibling}if(A<b.length){for(x=[];A<b.length;A++)x.push(vc(b[A]));return`findAllNodes was able to match part of the selector:
  `+(D.join(" > ")+`

No matching component was found for:
  `)+x.join(" > ")}return null},n.getPublicRootInstance=function(x){if(x=x.current,!x.child)return null;switch(x.child.tag){case 5:return ee(x.child.stateNode);default:return x.child.stateNode}},n.injectIntoDevTools=function(x){if(x={bundleType:x.bundleType,version:x.version,rendererPackageName:x.rendererPackageName,rendererConfig:x.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:Sm,findFiberByHostInstance:x.findFiberByHostInstance||sb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")x=!1;else{var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)x=!0;else{try{ac=b.inject(x),rs=b}catch{}x=!!b.checkDCE}}return x},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(x,b,A,D){if(!$e)throw Error(s(363));x=El(x,b);var H=it(x,A,D).disconnect;return{disconnect:function(){H()}}},n.registerMutableSourceForHydration=function(x,b){var A=b._getVersion;A=A(b._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[b,A]:x.mutableSourceEagerHydrationData.push(b,A)},n.runWithPriority=function(x,b){var A=sn;try{return sn=x,b()}finally{sn=A}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(x,b,A,D){var H=b.current,K=On(),me=ho(H);return A=ib(A),b.context===null?b.context=A:b.pendingContext=A,b=fl(K,me),b.payload={element:x},D=D===void 0?null:D,D!==null&&(b.callback=D),cc(H,b),x=ra(H,me,K),x!==null&&Bp(x,H,me),me},n}),XN}var GU;function jTe(){return GU||(GU=1,$N.exports=kTe()),$N.exports}var OTe=jTe();const ITe=Zl(OTe);var KN={exports:{}},ZN={};var $U;function LTe(){return $U||($U=1,(function(t){function e(W,$){var G=W.length;W.push($);e:for(;0<G;){var j=G-1>>>1,B=W[j];if(0<i(B,$))W[j]=$,W[G]=B,G=j;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var $=W[0],G=W.pop();if(G!==$){W[0]=G;e:for(var j=0,B=W.length,ae=B>>>1;j<ae;){var re=2*(j+1)-1,de=W[re],ce=re+1,ie=W[ce];if(0>i(de,G))ce<B&&0>i(ie,de)?(W[j]=ie,W[ce]=G,j=ce):(W[j]=de,W[re]=G,j=re);else if(ce<B&&0>i(ie,G))W[j]=ie,W[ce]=G,j=ce;else break e}}return $}function i(W,$){var G=W.sortIndex-$.sortIndex;return G!==0?G:W.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],u=[],d=1,f=null,p=3,m=!1,y=!1,_=!1,v=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(W){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=W)r(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(u)}}function N(W){if(_=!1,C(W),!y)if(n(l)!==null)y=!0,ee(P);else{var $=n(u);$!==null&&se(N,$.startTime-W)}}function P(W,$){y=!1,_&&(_=!1,w(U),U=-1),m=!0;var G=p;try{for(C($),f=n(l);f!==null&&(!(f.expirationTime>$)||W&&!z());){var j=f.callback;if(typeof j=="function"){f.callback=null,p=f.priorityLevel;var B=j(f.expirationTime<=$);$=t.unstable_now(),typeof B=="function"?f.callback=B:f===n(l)&&r(l),C($)}else r(l);f=n(l)}if(f!==null)var ae=!0;else{var re=n(u);re!==null&&se(N,re.startTime-$),ae=!1}return ae}finally{f=null,p=G,m=!1}}var R=!1,k=null,U=-1,I=5,L=-1;function z(){return!(t.unstable_now()-L<I)}function O(){if(k!==null){var W=t.unstable_now();L=W;var $=!0;try{$=k(!0,W)}finally{$?q():(R=!1,k=null)}}else R=!1}var q;if(typeof M=="function")q=function(){M(O)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,X=Y.port2;Y.port1.onmessage=O,q=function(){X.postMessage(null)}}else q=function(){v(O,0)};function ee(W){k=W,R||(R=!0,q())}function se(W,$){U=v(function(){W(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,ee(P))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var G=p;p=$;try{return W()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,$){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var G=p;p=W;try{return $()}finally{p=G}},t.unstable_scheduleCallback=function(W,$,G){var j=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?j+G:j):G=j,W){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=G+B,W={id:d++,callback:$,priorityLevel:W,startTime:G,expirationTime:B,sortIndex:-1},G>j?(W.sortIndex=G,e(u,W),n(l)===null&&W===n(u)&&(_?(w(U),U=-1):_=!0,se(N,G-j))):(W.sortIndex=B,e(l,W),y||m||(y=!0,ee(P))),W},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(W){var $=p;return function(){var G=p;p=$;try{return W.apply(this,arguments)}finally{p=G}}}})(ZN)),ZN}var YU;function FTe(){return YU||(YU=1,KN.exports=LTe()),KN.exports}var qU=FTe();const bk={},UTe=t=>void Object.assign(bk,t);function BTe(t,e){function n(d,{args:f=[],attach:p,...m},y){let _=`${d[0].toUpperCase()}${d.slice(1)}`,v;if(d==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const w=m.object;v=ig(w,{type:d,root:y,attach:p,primitive:!0})}else{const w=bk[_];if(!w)throw new Error(`R3F: ${_} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");v=ig(new w(...f),{type:d,root:y,attach:p,memoizedProps:{args:f}})}return v.__r3f.attach===void 0&&(v.isBufferGeometry?v.__r3f.attach="geometry":v.isMaterial&&(v.__r3f.attach="material")),_!=="inject"&&eA(v,m),v}function r(d,f){let p=!1;if(f){var m,y;(m=f.__r3f)!=null&&m.attach?JN(d,f,f.__r3f.attach):f.isObject3D&&d.isObject3D&&(d.add(f),p=!0),p||(y=d.__r3f)==null||y.objects.push(f),f.__r3f||ig(f,{}),f.__r3f.parent=d,QT(f),ag(f)}}function i(d,f,p){let m=!1;if(f){var y,_;if((y=f.__r3f)!=null&&y.attach)JN(d,f,f.__r3f.attach);else if(f.isObject3D&&d.isObject3D){f.parent=d,f.dispatchEvent({type:"added"}),d.dispatchEvent({type:"childadded",child:f});const v=d.children.filter(M=>M!==f),w=v.indexOf(p);d.children=[...v.slice(0,w),f,...v.slice(w)],m=!0}m||(_=d.__r3f)==null||_.objects.push(f),f.__r3f||ig(f,{}),f.__r3f.parent=d,QT(f),ag(f)}}function a(d,f,p=!1){d&&[...d].forEach(m=>s(f,m,p))}function s(d,f,p){if(f){var m,y,_;if(f.__r3f&&(f.__r3f.parent=null),(m=d.__r3f)!=null&&m.objects&&(d.__r3f.objects=d.__r3f.objects.filter(N=>N!==f)),(y=f.__r3f)!=null&&y.attach)JU(d,f,f.__r3f.attach);else if(f.isObject3D&&d.isObject3D){var v;d.remove(f),(v=f.__r3f)!=null&&v.root&&YTe(Mw(f),f)}const M=(_=f.__r3f)==null?void 0:_.primitive,C=!M&&(p===void 0?f.dispose!==null:p);if(!M){var w;a((w=f.__r3f)==null?void 0:w.objects,f,C),a(f.children,f,C)}if(delete f.__r3f,C&&f.dispose&&f.type!=="Scene"){const N=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?qU.unstable_scheduleCallback(qU.unstable_IdlePriority,N):N()}ag(d)}}function o(d,f,p,m){var y;const _=(y=d.__r3f)==null?void 0:y.parent;if(!_)return;const v=n(f,p,d.__r3f.root);if(d.children){for(const w of d.children)w.__r3f&&r(v,w);d.children=d.children.filter(w=>!w.__r3f)}d.__r3f.objects.forEach(w=>r(v,w)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||s(_,d),v.parent&&(v.__r3f.autoRemovedBeforeAppend=!0),r(_,v),v.raycast&&v.__r3f.eventCount&&Mw(v).getState().internal.interaction.push(v),[m,m.alternate].forEach(w=>{w!==null&&(w.stateNode=v,w.ref&&(typeof w.ref=="function"?w.ref(v):w.ref.current=v))})}const l=()=>{};return{reconciler:ITe({createInstance:n,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,f)=>{if(!f)return;const p=d.getState().scene;p.__r3f&&(p.__r3f.root=d,r(p,f))},removeChildFromContainer:(d,f)=>{f&&s(d.getState().scene,f)},insertInContainerBefore:(d,f,p)=>{if(!f||!p)return;const m=d.getState().scene;m.__r3f&&i(m,f,p)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var f;return!!((f=d?.__r3f)!=null?f:{}).handlers},prepareUpdate(d,f,p,m){var y;if(((y=d?.__r3f)!=null?y:{}).primitive&&m.object&&m.object!==d)return[!0];{const{args:v=[],children:w,...M}=m,{args:C=[],children:N,...P}=p;if(!Array.isArray(v))throw new Error("R3F: the args prop must be an array!");if(v.some((k,U)=>k!==C[U]))return[!0];const R=c$(d,M,P,!0);return R.changes.length?[!1,R]:null}},commitUpdate(d,[f,p],m,y,_,v){f?o(d,m,_,v):eA(d,p)},commitMount(d,f,p,m){var y;const _=(y=d.__r3f)!=null?y:{};d.raycast&&_.handlers&&_.eventCount&&Mw(d).getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>ig(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var f;const{attach:p,parent:m}=(f=d.__r3f)!=null?f:{};p&&m&&JU(m,d,p),d.isObject3D&&(d.visible=!1),ag(d)},unhideInstance(d,f){var p;const{attach:m,parent:y}=(p=d.__r3f)!=null?p:{};m&&y&&JN(y,d,m),(d.isObject3D&&f.visible==null||f.visible)&&(d.visible=!0),ag(d)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():pg.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&_r.fun(performance.now)?performance.now:_r.fun(Date.now)?Date.now:()=>0,scheduleTimeout:_r.fun(setTimeout)?setTimeout:void 0,cancelTimeout:_r.fun(clearTimeout)?clearTimeout:void 0}),applyProps:eA}}var XU,KU;const QN=t=>"colorSpace"in t||"outputColorSpace"in t,r$=()=>{var t;return(t=bk.ColorManagement)!=null?t:null},i$=t=>t&&t.isOrthographicCamera,zTe=t=>t&&t.hasOwnProperty("current"),Ox=typeof window<"u"&&((XU=window.document)!=null&&XU.createElement||((KU=window.navigator)==null?void 0:KU.product)==="ReactNative")?E.useLayoutEffect:E.useEffect;function a$(t){const e=E.useRef(t);return Ox(()=>void(e.current=t),[t]),e}function HTe({set:t}){return Ox(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class s$ extends E.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}s$.getDerivedStateFromError=()=>({error:!0});const o$="__default",ZU=new Map,VTe=t=>t&&!!t.memoized&&!!t.changes;function l$(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const R0=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()};function Mw(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const _r={obj:t=>t===Object(t)&&!_r.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(_r.str(t)||_r.num(t)||_r.boo(t))return t===e;const a=_r.obj(t);if(a&&r==="reference")return t===e;const s=_r.arr(t);if(s&&n==="reference")return t===e;if((s||a)&&t===e)return!0;let o;for(o in t)if(!(o in e))return!1;if(a&&n==="shallow"&&r==="shallow"){for(o in i?e:t)if(!_r.equ(t[o],e[o],{strict:i,objects:"reference"}))return!1}else for(o in i?e:t)if(t[o]!==e[o])return!1;if(_r.und(o)){if(s&&t.length===0&&e.length===0||a&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function WTe(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function ig(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function ZT(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((a,s)=>a[s],t),{target:n,key:i}}else return{target:n,key:e}}const QU=/-\d+$/;function JN(t,e,n){if(_r.str(n)){if(QU.test(n)){const a=n.replace(QU,""),{target:s,key:o}=ZT(t,a);Array.isArray(s[o])||(s[o]=[])}const{target:r,key:i}=ZT(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function JU(t,e,n){var r,i;if(_r.str(n)){const{target:a,key:s}=ZT(t,n),o=e.__r3f.previousAttach;o===void 0?delete a[s]:a[s]=o}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function c$(t,{children:e,key:n,ref:r,...i},{children:a,key:s,ref:o,...l}={},u=!1){const d=t.__r3f,f=Object.entries(i),p=[];if(u){const y=Object.keys(l);for(let _=0;_<y.length;_++)i.hasOwnProperty(y[_])||f.unshift([y[_],o$+"remove"])}f.forEach(([y,_])=>{var v;if((v=t.__r3f)!=null&&v.primitive&&y==="object"||_r.equ(_,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return p.push([y,_,!0,[]]);let w=[];y.includes("-")&&(w=y.split("-")),p.push([y,_,!1,w]);for(const M in i){const C=i[M];M.startsWith(`${y}-`)&&p.push([M,C,!1,M.split("-")])}});const m={...i};return d!=null&&d.memoizedProps&&d!=null&&d.memoizedProps.args&&(m.args=d.memoizedProps.args),d!=null&&d.memoizedProps&&d!=null&&d.memoizedProps.attach&&(m.attach=d.memoizedProps.attach),{memoized:m,changes:p}}function eA(t,e){var n;const r=t.__r3f,i=r?.root,a=i==null||i.getState==null?void 0:i.getState(),{memoized:s,changes:o}=VTe(e)?e:c$(t,e),l=r?.eventCount;t.__r3f&&(t.__r3f.memoizedProps=s);for(let p=0;p<o.length;p++){let[m,y,_,v]=o[p];if(QN(t)){const N="srgb",P="srgb-linear";m==="encoding"?(m="colorSpace",y=y===3001?N:P):m==="outputEncoding"&&(m="outputColorSpace",y=y===3001?N:P)}let w=t,M=w[m];if(v.length&&(M=v.reduce((C,N)=>C[N],t),!(M&&M.set))){const[C,...N]=v.reverse();w=N.reverse().reduce((P,R)=>P[R],t),m=C}if(y===o$+"remove")if(w.constructor){let C=ZU.get(w.constructor);C||(C=new w.constructor,ZU.set(w.constructor,C)),y=C[m]}else y=0;if(_&&r)y?r.handlers[m]=y:delete r.handlers[m],r.eventCount=Object.keys(r.handlers).length;else if(M&&M.set&&(M.copy||M instanceof sp)){if(Array.isArray(y))M.fromArray?M.fromArray(y):M.set(...y);else if(M.copy&&y&&y.constructor&&M.constructor===y.constructor)M.copy(y);else if(y!==void 0){var u;const C=(u=M)==null?void 0:u.isColor;!C&&M.setScalar?M.setScalar(y):M instanceof sp&&y instanceof sp?M.mask=y.mask:M.set(y),!r$()&&a&&!a.linear&&C&&M.convertSRGBToLinear()}}else{var d;if(w[m]=y,(d=w[m])!=null&&d.isTexture&&w[m].format===Ja&&w[m].type===Xl&&a){const C=w[m];QN(C)&&QN(a.gl)?C.colorSpace=a.gl.outputColorSpace:C.encoding=a.gl.outputEncoding}}ag(t)}if(r&&r.parent&&t.raycast&&l!==r.eventCount){const p=Mw(t).getState().internal,m=p.interaction.indexOf(t);m>-1&&p.interaction.splice(m,1),r.eventCount&&p.interaction.push(t)}return!(o.length===1&&o[0][0]==="onUpdate")&&o.length&&(n=t.__r3f)!=null&&n.parent&&QT(t),t}function ag(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function QT(t){t.onUpdate==null||t.onUpdate(t)}function GTe(t,e){t.manual||(i$(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function K_(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function $Te(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return pg.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return pg.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return pg.ContinuousEventPriority;default:return pg.DefaultEventPriority}}function u$(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function YTe(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{u$(n.capturedMap,e,r,i)})}function qTe(t){function e(l){const{internal:u}=t.getState(),d=l.offsetX-u.initialClick[0],f=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(d*d+f*f))}function n(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(d=>{var f;return(f=u.__r3f)==null?void 0:f.handlers["onPointer"+d]}))}function r(l,u){const d=t.getState(),f=new Set,p=[],m=u?u(d.internal.interaction):d.internal.interaction;for(let w=0;w<m.length;w++){const M=R0(m[w]);M&&(M.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(l,d);function y(w){const M=R0(w);if(!M||!M.events.enabled||M.raycaster.camera===null)return[];if(M.raycaster.camera===void 0){var C;M.events.compute==null||M.events.compute(l,M,(C=M.previousRoot)==null?void 0:C.getState()),M.raycaster.camera===void 0&&(M.raycaster.camera=null)}return M.raycaster.camera?M.raycaster.intersectObject(w,!0):[]}let _=m.flatMap(y).sort((w,M)=>{const C=R0(w.object),N=R0(M.object);return!C||!N?w.distance-M.distance:N.events.priority-C.events.priority||w.distance-M.distance}).filter(w=>{const M=K_(w);return f.has(M)?!1:(f.add(M),!0)});d.events.filter&&(_=d.events.filter(_,d));for(const w of _){let M=w.object;for(;M;){var v;(v=M.__r3f)!=null&&v.eventCount&&p.push({...w,eventObject:M}),M=M.parent}}if("pointerId"in l&&d.internal.capturedMap.has(l.pointerId))for(let w of d.internal.capturedMap.get(l.pointerId).values())f.has(K_(w.intersection))||p.push(w.intersection);return p}function i(l,u,d,f){const p=t.getState();if(l.length){const m={stopped:!1};for(const y of l){const _=R0(y.object)||p,{raycaster:v,pointer:w,camera:M,internal:C}=_,N=new he(w.x,w.y,0).unproject(M),P=L=>{var z,O;return(z=(O=C.capturedMap.get(L))==null?void 0:O.has(y.eventObject))!=null?z:!1},R=L=>{const z={intersection:y,target:u.target};C.capturedMap.has(L)?C.capturedMap.get(L).set(y.eventObject,z):C.capturedMap.set(L,new Map([[y.eventObject,z]])),u.target.setPointerCapture(L)},k=L=>{const z=C.capturedMap.get(L);z&&u$(C.capturedMap,y.eventObject,z,L)};let U={};for(let L in u){let z=u[L];typeof z!="function"&&(U[L]=z)}let I={...y,...U,pointer:w,intersections:l,stopped:m.stopped,delta:d,unprojectedPoint:N,ray:v.ray,camera:M,stopPropagation(){const L="pointerId"in u&&C.capturedMap.get(u.pointerId);if((!L||L.has(y.eventObject))&&(I.stopped=m.stopped=!0,C.hovered.size&&Array.from(C.hovered.values()).find(z=>z.eventObject===y.eventObject))){const z=l.slice(0,l.indexOf(y));a([...z,y])}},target:{hasPointerCapture:P,setPointerCapture:R,releasePointerCapture:k},currentTarget:{hasPointerCapture:P,setPointerCapture:R,releasePointerCapture:k},nativeEvent:u};if(f(I),m.stopped===!0)break}}return l}function a(l){const{internal:u}=t.getState();for(const d of u.hovered.values())if(!l.length||!l.find(f=>f.object===d.object&&f.index===d.index&&f.instanceId===d.instanceId)){const p=d.eventObject.__r3f,m=p?.handlers;if(u.hovered.delete(K_(d)),p!=null&&p.eventCount){const y={...d,intersections:l};m.onPointerOut==null||m.onPointerOut(y),m.onPointerLeave==null||m.onPointerLeave(y)}}}function s(l,u){for(let d=0;d<u.length;d++){const f=u[d].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return u=>{const{internal:d}=t.getState();"pointerId"in u&&d.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(u.pointerId)&&(d.capturedMap.delete(u.pointerId),a([]))})}}return function(d){const{onPointerMissed:f,internal:p}=t.getState();p.lastEvent.current=d;const m=l==="onPointerMove",y=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",v=r(d,m?n:void 0),w=y?e(d):0;l==="onPointerDown"&&(p.initialClick=[d.offsetX,d.offsetY],p.initialHits=v.map(C=>C.eventObject)),y&&!v.length&&w<=2&&(s(d,p.interaction),f&&f(d)),m&&a(v);function M(C){const N=C.eventObject,P=N.__r3f,R=P?.handlers;if(P!=null&&P.eventCount)if(m){if(R.onPointerOver||R.onPointerEnter||R.onPointerOut||R.onPointerLeave){const k=K_(C),U=p.hovered.get(k);U?U.stopped&&C.stopPropagation():(p.hovered.set(k,C),R.onPointerOver==null||R.onPointerOver(C),R.onPointerEnter==null||R.onPointerEnter(C))}R.onPointerMove==null||R.onPointerMove(C)}else{const k=R[l];k?(!y||p.initialHits.includes(N))&&(s(d,p.interaction.filter(U=>!p.initialHits.includes(U))),k(C)):y&&p.initialHits.includes(N)&&s(d,p.interaction.filter(U=>!p.initialHits.includes(U)))}}i(v,d,w,M)}}return{handlePointer:o}}const d$=t=>!!(t!=null&&t.render),f$=E.createContext(null),XTe=(t,e)=>{const n=CTe((o,l)=>{const u=new he,d=new he,f=new he;function p(w=l().camera,M=d,C=l().size){const{width:N,height:P,top:R,left:k}=C,U=N/P;M.isVector3?f.copy(M):f.set(...M);const I=w.getWorldPosition(u).distanceTo(f);if(i$(w))return{width:N/w.zoom,height:P/w.zoom,top:R,left:k,factor:1,distance:I,aspect:U};{const L=w.fov*Math.PI/180,z=2*Math.tan(L/2)*I,O=z*(N/P);return{width:O,height:z,top:R,left:k,factor:N/O,distance:I,aspect:U}}}let m;const y=w=>o(M=>({performance:{...M.performance,current:w}})),_=new lt;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(w=1)=>t(l(),w),advance:(w,M)=>e(w,M,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new mk,pointer:_,mouse:_,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const w=l();m&&clearTimeout(m),w.performance.current!==w.performance.min&&y(w.performance.min),m=setTimeout(()=>y(l().performance.max),w.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:w=>o(M=>({...M,events:{...M.events,...w}})),setSize:(w,M,C,N,P)=>{const R=l().camera,k={width:w,height:M,top:N||0,left:P||0,updateStyle:C};o(U=>({size:k,viewport:{...U.viewport,...p(R,d,k)}}))},setDpr:w=>o(M=>{const C=l$(w);return{viewport:{...M.viewport,dpr:C,initialDpr:M.viewport.initialDpr||C}}}),setFrameloop:(w="always")=>{const M=l().clock;M.stop(),M.elapsedTime=0,w!=="never"&&(M.start(),M.elapsedTime=0),o(()=>({frameloop:w}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:E.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(w,M,C)=>{const N=l().internal;return N.priority=N.priority+(M>0?1:0),N.subscribers.push({ref:w,priority:M,store:C}),N.subscribers=N.subscribers.sort((P,R)=>P.priority-R.priority),()=>{const P=l().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(M>0?1:0),P.subscribers=P.subscribers.filter(R=>R.ref!==w))}}}}}),r=n.getState();let i=r.size,a=r.viewport.dpr,s=r.camera;return n.subscribe(()=>{const{camera:o,size:l,viewport:u,gl:d,set:f}=n.getState();if(l.width!==i.width||l.height!==i.height||u.dpr!==a){var p;i=l,a=u.dpr,GTe(o,l),d.setPixelRatio(u.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(l.width,l.height,m)}o!==s&&(s=o,f(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(o)}})))}),n.subscribe(o=>t(o)),n};let Z_,KTe=new Set,ZTe=new Set,QTe=new Set;function tA(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function D0(t,e){switch(t){case"before":return tA(KTe,e);case"after":return tA(ZTe,e);case"tail":return tA(QTe,e)}}let nA,rA;function iA(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),nA=e.internal.subscribers,Z_=0;Z_<nA.length;Z_++)rA=nA[Z_],rA.ref.current(rA.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function JTe(t){let e=!1,n=!1,r,i,a;function s(u){i=requestAnimationFrame(s),e=!0,r=0,D0("before",u),n=!0;for(const f of t.values()){var d;a=f.store.getState(),a.internal.active&&(a.frameloop==="always"||a.internal.frames>0)&&!((d=a.gl.xr)!=null&&d.isPresenting)&&(r+=iA(u,a))}if(n=!1,D0("after",u),r===0)return D0("tail",u),e=!1,cancelAnimationFrame(i)}function o(u,d=1){var f;if(!u)return t.forEach(p=>o(p.store.getState(),d));(f=u.gl.xr)!=null&&f.isPresenting||!u.internal.active||u.frameloop==="never"||(d>1?u.internal.frames=Math.min(60,u.internal.frames+d):n?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(s)))}function l(u,d=!0,f,p){if(d&&D0("before",u),f)iA(u,f,p);else for(const m of t.values())iA(u,m.store.getState());d&&D0("after",u)}return{loop:s,invalidate:o,advance:l}}function h$(){const t=E.useContext(f$);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Fl(t=n=>n,e){return h$()(t,e)}function Ix(t,e=0){const n=h$(),r=n.getState().internal.subscribe,i=a$(t);return Ox(()=>r(i,e,n),[e,r,n]),null}const Vg=new Map,{invalidate:eB,advance:tB}=JTe(Vg),{reconciler:AS,applyProps:Qm}=BTe(Vg,$Te),Jm={objects:"shallow",strict:!1},ePe=(t,e)=>{const n=typeof t=="function"?t(e):t;return d$(n)?n:new c9({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function tPe(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:a,left:s,updateStyle:o=n}=e;return{width:r,height:i,top:a,left:s,updateStyle:o}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:r,height:i,top:a,left:s}=t.parentElement.getBoundingClientRect();return{width:r,height:i,top:a,left:s,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function nPe(t){const e=Vg.get(t),n=e?.fiber,r=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,a=r||XTe(eB,tB),s=n||AS.createContainer(a,pg.ConcurrentRoot,null,!1,null,"",i,null);e||Vg.set(t,{fiber:s,store:a});let o,l=!1,u;return{configure(d={}){let{gl:f,size:p,scene:m,events:y,onCreated:_,shadows:v=!1,linear:w=!1,flat:M=!1,legacy:C=!1,orthographic:N=!1,frameloop:P="always",dpr:R=[1,2],performance:k,raycaster:U,camera:I,onPointerMissed:L}=d,z=a.getState(),O=z.gl;z.gl||z.set({gl:O=ePe(f,t)});let q=z.raycaster;q||z.set({raycaster:q=new e$});const{params:Y,...X}=U||{};if(_r.equ(X,q,Jm)||Qm(q,{...X}),_r.equ(Y,q.params,Jm)||Qm(q,{params:{...q.params,...Y}}),!z.camera||z.camera===u&&!_r.equ(u,I,Jm)){u=I;const G=I instanceof Nx,j=G?I:N?new wf(0,0,0,0,.1,1e3):new hi(75,0,.1,1e3);G||(j.position.z=5,I&&(Qm(j,I),("aspect"in I||"left"in I||"right"in I||"bottom"in I||"top"in I)&&(j.manual=!0,j.updateProjectionMatrix())),!z.camera&&!(I!=null&&I.rotation)&&j.lookAt(0,0,0)),z.set({camera:j}),q.camera=j}if(!z.scene){let G;m!=null&&m.isScene?G=m:(G=new ZD,m&&Qm(G,m)),z.set({scene:ig(G)})}if(!z.xr){var ee;const G=(ae,re)=>{const de=a.getState();de.frameloop!=="never"&&tB(ae,!0,de,re)},j=()=>{const ae=a.getState();ae.gl.xr.enabled=ae.gl.xr.isPresenting,ae.gl.xr.setAnimationLoop(ae.gl.xr.isPresenting?G:null),ae.gl.xr.isPresenting||eB(ae)},B={connect(){const ae=a.getState().gl;ae.xr.addEventListener("sessionstart",j),ae.xr.addEventListener("sessionend",j)},disconnect(){const ae=a.getState().gl;ae.xr.removeEventListener("sessionstart",j),ae.xr.removeEventListener("sessionend",j)}};typeof((ee=O.xr)==null?void 0:ee.addEventListener)=="function"&&B.connect(),z.set({xr:B})}if(O.shadowMap){const G=O.shadowMap.enabled,j=O.shadowMap.type;if(O.shadowMap.enabled=!!v,_r.boo(v))O.shadowMap.type=$0;else if(_r.str(v)){var se;const B={basic:o7,percentage:U2,soft:$0,variance:Ll};O.shadowMap.type=(se=B[v])!=null?se:$0}else _r.obj(v)&&Object.assign(O.shadowMap,v);(G!==O.shadowMap.enabled||j!==O.shadowMap.type)&&(O.shadowMap.needsUpdate=!0)}const W=r$();W&&("enabled"in W?W.enabled=!C:"legacyMode"in W&&(W.legacyMode=C)),l||Qm(O,{outputEncoding:w?3e3:3001,toneMapping:M?zc:RD}),z.legacy!==C&&z.set(()=>({legacy:C})),z.linear!==w&&z.set(()=>({linear:w})),z.flat!==M&&z.set(()=>({flat:M})),f&&!_r.fun(f)&&!d$(f)&&!_r.equ(f,O,Jm)&&Qm(O,f),y&&!z.events.handlers&&z.set({events:y(a)});const $=tPe(t,p);return _r.equ($,z.size,Jm)||z.setSize($.width,$.height,$.updateStyle,$.top,$.left),R&&z.viewport.dpr!==l$(R)&&z.setDpr(R),z.frameloop!==P&&z.setFrameloop(P),z.onPointerMissed||z.set({onPointerMissed:L}),k&&!_r.equ(k,z.performance,Jm)&&z.set(G=>({performance:{...G.performance,...k}})),o=_,l=!0,this},render(d){return l||this.configure(),AS.updateContainer(c.jsx(rPe,{store:a,children:d,onCreated:o,rootElement:t}),s,null,()=>{}),a},unmount(){p$(t)}}}function rPe({store:t,children:e,onCreated:n,rootElement:r}){return Ox(()=>{const i=t.getState();i.set(a=>({internal:{...a.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),c.jsx(f$.Provider,{value:t,children:e})}function p$(t,e){const n=Vg.get(t),r=n?.fiber;if(r){const i=n?.store.getState();i&&(i.internal.active=!1),AS.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var a,s,o,l;i.events.disconnect==null||i.events.disconnect(),(a=i.gl)==null||(s=a.renderLists)==null||s.dispose==null||s.dispose(),(o=i.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),WTe(i),Vg.delete(t)}catch{}},500)})}}AS.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:E.version});const aA={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function iPe(t){const{handlePointer:e}=qTe(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(aA).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:a}=t.getState();a.disconnect==null||a.disconnect(),i(s=>({events:{...s.events,connected:n}})),Object.entries((r=a.handlers)!=null?r:[]).forEach(([s,o])=>{const[l,u]=aA[s];n.addEventListener(l,o,{passive:u})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([a,s])=>{if(r&&r.connected instanceof HTMLElement){const[o]=aA[a];r.connected.removeEventListener(o,s)}}),n(a=>({events:{...a.events,connected:void 0}}))}}}}function nB(t,e){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>t(...r),e)}}function aPe({debounce:t,scroll:e,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=E.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=E.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),l=t?typeof t=="number"?t:t.scroll:null,u=t?typeof t=="number"?t:t.resize:null,d=E.useRef(!1);E.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[f,p,m]=E.useMemo(()=>{const w=()=>{if(!o.current.element)return;const{left:M,top:C,width:N,height:P,bottom:R,right:k,x:U,y:I}=o.current.element.getBoundingClientRect(),L={left:M,top:C,width:N,height:P,bottom:R,right:k,x:U,y:I};o.current.element instanceof HTMLElement&&r&&(L.height=o.current.element.offsetHeight,L.width=o.current.element.offsetWidth),Object.freeze(L),d.current&&!cPe(o.current.lastBounds,L)&&s(o.current.lastBounds=L)};return[w,u?nB(w,u):w,l?nB(w,l):w]},[s,r,l,u]);function y(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(w=>w.removeEventListener("scroll",m,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function _(){o.current.element&&(o.current.resizeObserver=new i(m),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(w=>w.addEventListener("scroll",m,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const v=w=>{!w||w===o.current.element||(y(),o.current.element=w,o.current.scrollContainers=m$(w),_())};return oPe(m,!!e),sPe(p),E.useEffect(()=>{y(),_()},[e,m,p]),E.useEffect(()=>y,[]),[v,a,f]}function sPe(t){E.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function oPe(t,e){E.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function m$(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(a=>a==="auto"||a==="scroll")&&e.push(t),[...e,...m$(t.parentElement)]}const lPe=["x","y","top","bottom","left","right","width","height"],cPe=(t,e)=>lPe.every(n=>t[n]===e[n]);var uPe=Object.defineProperty,dPe=Object.defineProperties,fPe=Object.getOwnPropertyDescriptors,rB=Object.getOwnPropertySymbols,hPe=Object.prototype.hasOwnProperty,pPe=Object.prototype.propertyIsEnumerable,iB=(t,e,n)=>e in t?uPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,aB=(t,e)=>{for(var n in e||(e={}))hPe.call(e,n)&&iB(t,n,e[n]);if(rB)for(var n of rB(e))pPe.call(e,n)&&iB(t,n,e[n]);return t},mPe=(t,e)=>dPe(t,fPe(e)),sB,oB;typeof window<"u"&&((sB=window.document)!=null&&sB.createElement||((oB=window.navigator)==null?void 0:oB.product)==="ReactNative")?E.useLayoutEffect:E.useEffect;function g$(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=t.child;for(;r;){const i=g$(r,e,n);if(i)return i;r=r.sibling}}function v$(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const lB=console.error;console.error=function(){const t=[...arguments].join("");if(t?.startsWith("Warning:")&&t.includes("useContext")){console.error=lB;return}return lB.apply(this,arguments)};const _k=v$(E.createContext(null));class y$ extends E.Component{render(){return E.createElement(_k.Provider,{value:this._reactInternals},this.props.children)}}function gPe(){const t=E.useContext(_k);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=E.useId();return E.useMemo(()=>{for(const r of[t,t?.alternate]){if(!r)continue;const i=g$(r,!1,a=>{let s=a.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[t,e])}function vPe(){const t=gPe(),[e]=E.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==_k&&!e.has(i)&&e.set(i,E.useContext(v$(i)))}n=n.return}return e}function yPe(){const t=vPe();return E.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>E.createElement(e,null,E.createElement(n.Provider,mPe(aB({},r),{value:t.get(n)}))),e=>E.createElement(y$,aB({},e))),[t])}const xPe=E.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:a,events:s=iPe,eventSource:o,eventPrefix:l,shadows:u,linear:d,flat:f,legacy:p,orthographic:m,frameloop:y,dpr:_,performance:v,raycaster:w,camera:M,scene:C,onPointerMissed:N,onCreated:P,...R},k){E.useMemo(()=>UTe(_Te),[]);const U=yPe(),[I,L]=aPe({scroll:!0,debounce:{scroll:50,resize:0},...r}),z=E.useRef(null),O=E.useRef(null);E.useImperativeHandle(k,()=>z.current);const q=a$(N),[Y,X]=E.useState(!1),[ee,se]=E.useState(!1);if(Y)throw Y;if(ee)throw ee;const W=E.useRef(null);Ox(()=>{const G=z.current;L.width>0&&L.height>0&&G&&(W.current||(W.current=nPe(G)),W.current.configure({gl:a,events:s,shadows:u,linear:d,flat:f,legacy:p,orthographic:m,frameloop:y,dpr:_,performance:v,raycaster:w,camera:M,scene:C,size:L,onPointerMissed:(...j)=>q.current==null?void 0:q.current(...j),onCreated:j=>{j.events.connect==null||j.events.connect(o?zTe(o)?o.current:o:O.current),l&&j.setEvents({compute:(B,ae)=>{const re=B[l+"X"],de=B[l+"Y"];ae.pointer.set(re/ae.size.width*2-1,-(de/ae.size.height)*2+1),ae.raycaster.setFromCamera(ae.pointer,ae.camera)}}),P?.(j)}}),W.current.render(c.jsx(U,{children:c.jsx(s$,{set:se,children:c.jsx(E.Suspense,{fallback:c.jsx(HTe,{set:X}),children:e??null})})})))}),E.useEffect(()=>{const G=z.current;if(G)return()=>p$(G)},[]);const $=o?"none":"auto";return c.jsx("div",{ref:O,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:$,...i},...R,children:c.jsx("div",{ref:I,style:{width:"100%",height:"100%"},children:c.jsx("canvas",{ref:z,style:{display:"block"},children:n})})})}),bPe=E.forwardRef(function(e,n){return c.jsx(y$,{children:c.jsx(xPe,{...e,ref:n})})}),x$=parseInt(Sx.replace(/\D+/g,"")),b$=x$>=125?"uv1":"uv2";var _Pe=Object.defineProperty,wPe=(t,e,n)=>e in t?_Pe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,SPe=(t,e,n)=>(wPe(t,e+"",n),n);class EPe{constructor(){SPe(this,"_listeners")}addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const a=i.indexOf(n);a!==-1&&i.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let a=0,s=i.length;a<s;a++)i[a].call(this,e);e.target=null}}}var MPe=Object.defineProperty,CPe=(t,e,n)=>e in t?MPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,en=(t,e,n)=>(CPe(t,typeof e!="symbol"?e+"":e,n),n);const Q_=new jp,cB=new Fu,NPe=Math.cos(70*(Math.PI/180)),uB=(t,e)=>(t%e+e)%e;let APe=class extends EPe{constructor(e,n){super(),en(this,"object"),en(this,"domElement"),en(this,"enabled",!0),en(this,"target",new he),en(this,"minDistance",0),en(this,"maxDistance",1/0),en(this,"minZoom",0),en(this,"maxZoom",1/0),en(this,"minPolarAngle",0),en(this,"maxPolarAngle",Math.PI),en(this,"minAzimuthAngle",-1/0),en(this,"maxAzimuthAngle",1/0),en(this,"enableDamping",!1),en(this,"dampingFactor",.05),en(this,"enableZoom",!0),en(this,"zoomSpeed",1),en(this,"enableRotate",!0),en(this,"rotateSpeed",1),en(this,"enablePan",!0),en(this,"panSpeed",1),en(this,"screenSpacePanning",!0),en(this,"keyPanSpeed",7),en(this,"zoomToCursor",!1),en(this,"autoRotate",!1),en(this,"autoRotateSpeed",2),en(this,"reverseOrbit",!1),en(this,"reverseHorizontalOrbit",!1),en(this,"reverseVerticalOrbit",!1),en(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),en(this,"mouseButtons",{LEFT:kh.ROTATE,MIDDLE:kh.DOLLY,RIGHT:kh.PAN}),en(this,"touches",{ONE:jh.ROTATE,TWO:jh.DOLLY_PAN}),en(this,"target0"),en(this,"position0"),en(this,"zoom0"),en(this,"_domElementKeyEvents",null),en(this,"getPolarAngle"),en(this,"getAzimuthalAngle"),en(this,"setPolarAngle"),en(this,"setAzimuthalAngle"),en(this,"getDistance"),en(this,"getZoomScale"),en(this,"listenToKeyEvents"),en(this,"stopListenToKeyEvents"),en(this,"saveState"),en(this,"reset"),en(this,"update"),en(this,"connect"),en(this,"dispose"),en(this,"dollyIn"),en(this,"dollyOut"),en(this,"getScale"),en(this,"setScale"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=pe=>{let je=uB(pe,2*Math.PI),ut=d.phi;ut<0&&(ut+=2*Math.PI),je<0&&(je+=2*Math.PI);let ge=Math.abs(je-ut);2*Math.PI-ge<ge&&(je<ut?je+=2*Math.PI:ut+=2*Math.PI),f.phi=je-ut,r.update()},this.setAzimuthalAngle=pe=>{let je=uB(pe,2*Math.PI),ut=d.theta;ut<0&&(ut+=2*Math.PI),je<0&&(je+=2*Math.PI);let ge=Math.abs(je-ut);2*Math.PI-ge<ge&&(je<ut?je+=2*Math.PI:ut+=2*Math.PI),f.theta=je-ut,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=pe=>{pe.addEventListener("keydown",nt),this._domElementKeyEvents=pe},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",nt),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=o.NONE},this.update=(()=>{const pe=new he,je=new he(0,1,0),ut=new es().setFromUnitVectors(e.up,je),ge=ut.clone().invert(),Be=new he,Pe=new es,Ke=2*Math.PI;return function(){const Le=r.object.position;ut.setFromUnitVectors(e.up,je),ge.copy(ut).invert(),pe.copy(Le).sub(r.target),pe.applyQuaternion(ut),d.setFromVector3(pe),r.autoRotate&&l===o.NONE&&Y(O()),r.enableDamping?(d.theta+=f.theta*r.dampingFactor,d.phi+=f.phi*r.dampingFactor):(d.theta+=f.theta,d.phi+=f.phi);let dt=r.minAzimuthAngle,kt=r.maxAzimuthAngle;isFinite(dt)&&isFinite(kt)&&(dt<-Math.PI?dt+=Ke:dt>Math.PI&&(dt-=Ke),kt<-Math.PI?kt+=Ke:kt>Math.PI&&(kt-=Ke),dt<=kt?d.theta=Math.max(dt,Math.min(kt,d.theta)):d.theta=d.theta>(dt+kt)/2?Math.max(dt,d.theta):Math.min(kt,d.theta)),d.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,d.phi)),d.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),r.zoomToCursor&&I||r.object.isOrthographicCamera?d.radius=ae(d.radius):d.radius=ae(d.radius*p),pe.setFromSpherical(d),pe.applyQuaternion(ge),Le.copy(r.target).add(pe),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(f.theta*=1-r.dampingFactor,f.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(f.set(0,0,0),m.set(0,0,0));let Mt=!1;if(r.zoomToCursor&&I){let Pt=null;if(r.object instanceof hi&&r.object.isPerspectiveCamera){const mn=pe.length();Pt=ae(mn*p);const Mn=mn-Pt;r.object.position.addScaledVector(k,Mn),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const mn=new he(U.x,U.y,0);mn.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix(),Mt=!0;const Mn=new he(U.x,U.y,0);Mn.unproject(r.object),r.object.position.sub(Mn).add(mn),r.object.updateMatrixWorld(),Pt=pe.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Pt!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Pt).add(r.object.position):(Q_.origin.copy(r.object.position),Q_.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(Q_.direction))<NPe?e.lookAt(r.target):(cB.setFromNormalAndCoplanarPoint(r.object.up,r.target),Q_.intersectPlane(cB,r.target))))}else r.object instanceof wf&&r.object.isOrthographicCamera&&(Mt=p!==1,Mt&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix()));return p=1,I=!1,Mt||Be.distanceToSquared(r.object.position)>u||8*(1-Pe.dot(r.object.quaternion))>u?(r.dispatchEvent(i),Be.copy(r.object.position),Pe.copy(r.object.quaternion),Mt=!1,!0):!1}})(),this.connect=pe=>{r.domElement=pe,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",rt),r.domElement.addEventListener("pointerdown",Q),r.domElement.addEventListener("pointercancel",we),r.domElement.addEventListener("wheel",it)},this.dispose=()=>{var pe,je,ut,ge,Be,Pe;r.domElement&&(r.domElement.style.touchAction="auto"),(pe=r.domElement)==null||pe.removeEventListener("contextmenu",rt),(je=r.domElement)==null||je.removeEventListener("pointerdown",Q),(ut=r.domElement)==null||ut.removeEventListener("pointercancel",we),(ge=r.domElement)==null||ge.removeEventListener("wheel",it),(Be=r.domElement)==null||Be.ownerDocument.removeEventListener("pointermove",ye),(Pe=r.domElement)==null||Pe.ownerDocument.removeEventListener("pointerup",we),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",nt)};const r=this,i={type:"change"},a={type:"start"},s={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=o.NONE;const u=1e-6,d=new KT,f=new KT;let p=1;const m=new he,y=new lt,_=new lt,v=new lt,w=new lt,M=new lt,C=new lt,N=new lt,P=new lt,R=new lt,k=new he,U=new lt;let I=!1;const L=[],z={};function O(){return 2*Math.PI/60/60*r.autoRotateSpeed}function q(){return Math.pow(.95,r.zoomSpeed)}function Y(pe){r.reverseOrbit||r.reverseHorizontalOrbit?f.theta+=pe:f.theta-=pe}function X(pe){r.reverseOrbit||r.reverseVerticalOrbit?f.phi+=pe:f.phi-=pe}const ee=(()=>{const pe=new he;return function(ut,ge){pe.setFromMatrixColumn(ge,0),pe.multiplyScalar(-ut),m.add(pe)}})(),se=(()=>{const pe=new he;return function(ut,ge){r.screenSpacePanning===!0?pe.setFromMatrixColumn(ge,1):(pe.setFromMatrixColumn(ge,0),pe.crossVectors(r.object.up,pe)),pe.multiplyScalar(ut),m.add(pe)}})(),W=(()=>{const pe=new he;return function(ut,ge){const Be=r.domElement;if(Be&&r.object instanceof hi&&r.object.isPerspectiveCamera){const Pe=r.object.position;pe.copy(Pe).sub(r.target);let Ke=pe.length();Ke*=Math.tan(r.object.fov/2*Math.PI/180),ee(2*ut*Ke/Be.clientHeight,r.object.matrix),se(2*ge*Ke/Be.clientHeight,r.object.matrix)}else Be&&r.object instanceof wf&&r.object.isOrthographicCamera?(ee(ut*(r.object.right-r.object.left)/r.object.zoom/Be.clientWidth,r.object.matrix),se(ge*(r.object.top-r.object.bottom)/r.object.zoom/Be.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function $(pe){r.object instanceof hi&&r.object.isPerspectiveCamera||r.object instanceof wf&&r.object.isOrthographicCamera?p=pe:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function G(pe){$(p/pe)}function j(pe){$(p*pe)}function B(pe){if(!r.zoomToCursor||!r.domElement)return;I=!0;const je=r.domElement.getBoundingClientRect(),ut=pe.clientX-je.left,ge=pe.clientY-je.top,Be=je.width,Pe=je.height;U.x=ut/Be*2-1,U.y=-(ge/Pe)*2+1,k.set(U.x,U.y,1).unproject(r.object).sub(r.object.position).normalize()}function ae(pe){return Math.max(r.minDistance,Math.min(r.maxDistance,pe))}function re(pe){y.set(pe.clientX,pe.clientY)}function de(pe){B(pe),N.set(pe.clientX,pe.clientY)}function ce(pe){w.set(pe.clientX,pe.clientY)}function ie(pe){_.set(pe.clientX,pe.clientY),v.subVectors(_,y).multiplyScalar(r.rotateSpeed);const je=r.domElement;je&&(Y(2*Math.PI*v.x/je.clientHeight),X(2*Math.PI*v.y/je.clientHeight)),y.copy(_),r.update()}function le(pe){P.set(pe.clientX,pe.clientY),R.subVectors(P,N),R.y>0?G(q()):R.y<0&&j(q()),N.copy(P),r.update()}function fe(pe){M.set(pe.clientX,pe.clientY),C.subVectors(M,w).multiplyScalar(r.panSpeed),W(C.x,C.y),w.copy(M),r.update()}function Ne(pe){B(pe),pe.deltaY<0?j(q()):pe.deltaY>0&&G(q()),r.update()}function Se(pe){let je=!1;switch(pe.code){case r.keys.UP:W(0,r.keyPanSpeed),je=!0;break;case r.keys.BOTTOM:W(0,-r.keyPanSpeed),je=!0;break;case r.keys.LEFT:W(r.keyPanSpeed,0),je=!0;break;case r.keys.RIGHT:W(-r.keyPanSpeed,0),je=!0;break}je&&(pe.preventDefault(),r.update())}function Z(){if(L.length==1)y.set(L[0].pageX,L[0].pageY);else{const pe=.5*(L[0].pageX+L[1].pageX),je=.5*(L[0].pageY+L[1].pageY);y.set(pe,je)}}function xe(){if(L.length==1)w.set(L[0].pageX,L[0].pageY);else{const pe=.5*(L[0].pageX+L[1].pageX),je=.5*(L[0].pageY+L[1].pageY);w.set(pe,je)}}function oe(){const pe=L[0].pageX-L[1].pageX,je=L[0].pageY-L[1].pageY,ut=Math.sqrt(pe*pe+je*je);N.set(0,ut)}function tt(){r.enableZoom&&oe(),r.enablePan&&xe()}function ke(){r.enableZoom&&oe(),r.enableRotate&&Z()}function st(pe){if(L.length==1)_.set(pe.pageX,pe.pageY);else{const ut=Oe(pe),ge=.5*(pe.pageX+ut.x),Be=.5*(pe.pageY+ut.y);_.set(ge,Be)}v.subVectors(_,y).multiplyScalar(r.rotateSpeed);const je=r.domElement;je&&(Y(2*Math.PI*v.x/je.clientHeight),X(2*Math.PI*v.y/je.clientHeight)),y.copy(_)}function Ce(pe){if(L.length==1)M.set(pe.pageX,pe.pageY);else{const je=Oe(pe),ut=.5*(pe.pageX+je.x),ge=.5*(pe.pageY+je.y);M.set(ut,ge)}C.subVectors(M,w).multiplyScalar(r.panSpeed),W(C.x,C.y),w.copy(M)}function ct(pe){const je=Oe(pe),ut=pe.pageX-je.x,ge=pe.pageY-je.y,Be=Math.sqrt(ut*ut+ge*ge);P.set(0,Be),R.set(0,Math.pow(P.y/N.y,r.zoomSpeed)),G(R.y),N.copy(P)}function $e(pe){r.enableZoom&&ct(pe),r.enablePan&&Ce(pe)}function J(pe){r.enableZoom&&ct(pe),r.enableRotate&&st(pe)}function Q(pe){var je,ut;r.enabled!==!1&&(L.length===0&&((je=r.domElement)==null||je.ownerDocument.addEventListener("pointermove",ye),(ut=r.domElement)==null||ut.ownerDocument.addEventListener("pointerup",we)),be(pe),pe.pointerType==="touch"?ot(pe):De(pe))}function ye(pe){r.enabled!==!1&&(pe.pointerType==="touch"?xt(pe):Ue(pe))}function we(pe){var je,ut,ge;Je(pe),L.length===0&&((je=r.domElement)==null||je.releasePointerCapture(pe.pointerId),(ut=r.domElement)==null||ut.ownerDocument.removeEventListener("pointermove",ye),(ge=r.domElement)==null||ge.ownerDocument.removeEventListener("pointerup",we)),r.dispatchEvent(s),l=o.NONE}function De(pe){let je;switch(pe.button){case 0:je=r.mouseButtons.LEFT;break;case 1:je=r.mouseButtons.MIDDLE;break;case 2:je=r.mouseButtons.RIGHT;break;default:je=-1}switch(je){case kh.DOLLY:if(r.enableZoom===!1)return;de(pe),l=o.DOLLY;break;case kh.ROTATE:if(pe.ctrlKey||pe.metaKey||pe.shiftKey){if(r.enablePan===!1)return;ce(pe),l=o.PAN}else{if(r.enableRotate===!1)return;re(pe),l=o.ROTATE}break;case kh.PAN:if(pe.ctrlKey||pe.metaKey||pe.shiftKey){if(r.enableRotate===!1)return;re(pe),l=o.ROTATE}else{if(r.enablePan===!1)return;ce(pe),l=o.PAN}break;default:l=o.NONE}l!==o.NONE&&r.dispatchEvent(a)}function Ue(pe){if(r.enabled!==!1)switch(l){case o.ROTATE:if(r.enableRotate===!1)return;ie(pe);break;case o.DOLLY:if(r.enableZoom===!1)return;le(pe);break;case o.PAN:if(r.enablePan===!1)return;fe(pe);break}}function it(pe){r.enabled===!1||r.enableZoom===!1||l!==o.NONE&&l!==o.ROTATE||(pe.preventDefault(),r.dispatchEvent(a),Ne(pe),r.dispatchEvent(s))}function nt(pe){r.enabled===!1||r.enablePan===!1||Se(pe)}function ot(pe){switch(Qe(pe),L.length){case 1:switch(r.touches.ONE){case jh.ROTATE:if(r.enableRotate===!1)return;Z(),l=o.TOUCH_ROTATE;break;case jh.PAN:if(r.enablePan===!1)return;xe(),l=o.TOUCH_PAN;break;default:l=o.NONE}break;case 2:switch(r.touches.TWO){case jh.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;tt(),l=o.TOUCH_DOLLY_PAN;break;case jh.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ke(),l=o.TOUCH_DOLLY_ROTATE;break;default:l=o.NONE}break;default:l=o.NONE}l!==o.NONE&&r.dispatchEvent(a)}function xt(pe){switch(Qe(pe),l){case o.TOUCH_ROTATE:if(r.enableRotate===!1)return;st(pe),r.update();break;case o.TOUCH_PAN:if(r.enablePan===!1)return;Ce(pe),r.update();break;case o.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;$e(pe),r.update();break;case o.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;J(pe),r.update();break;default:l=o.NONE}}function rt(pe){r.enabled!==!1&&pe.preventDefault()}function be(pe){L.push(pe)}function Je(pe){delete z[pe.pointerId];for(let je=0;je<L.length;je++)if(L[je].pointerId==pe.pointerId){L.splice(je,1);return}}function Qe(pe){let je=z[pe.pointerId];je===void 0&&(je=new lt,z[pe.pointerId]=je),je.set(pe.pageX,pe.pageY)}function Oe(pe){const je=pe.pointerId===L[0].pointerId?L[1]:L[0];return z[je.pointerId]}this.dollyIn=(pe=q())=>{j(pe),r.update()},this.dollyOut=(pe=q())=>{G(pe),r.update()},this.getScale=()=>p,this.setScale=pe=>{$(pe),r.update()},this.getZoomScale=()=>q(),n!==void 0&&this.connect(n),this.update()}};const dB=new ji,J_=new he;class wk extends yE{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],n=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],r=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(r),this.setAttribute("position",new Bt(e,3)),this.setAttribute("uv",new Bt(n,2))}applyMatrix4(e){const n=this.attributes.instanceStart,r=this.attributes.instanceEnd;return n!==void 0&&(n.applyMatrix4(e),r.applyMatrix4(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const r=new NS(n,6,1);return this.setAttribute("instanceStart",new Eo(r,3,0)),this.setAttribute("instanceEnd",new Eo(r,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e,n=3){let r;e instanceof Float32Array?r=e:Array.isArray(e)&&(r=new Float32Array(e));const i=new NS(r,n*2,1);return this.setAttribute("instanceColorStart",new Eo(i,n,0)),this.setAttribute("instanceColorEnd",new Eo(i,n,n)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new ok(e.geometry)),this}fromLineSegments(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ji);const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;e!==void 0&&n!==void 0&&(this.boundingBox.setFromBufferAttribute(e),dB.setFromBufferAttribute(n),this.boundingBox.union(dB))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Gi),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;if(e!==void 0&&n!==void 0){const r=this.boundingSphere.center;this.boundingBox.getCenter(r);let i=0;for(let a=0,s=e.count;a<s;a++)J_.fromBufferAttribute(e,a),i=Math.max(i,r.distanceToSquared(J_)),J_.fromBufferAttribute(n,a),i=Math.max(i,r.distanceToSquared(J_));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class _$ extends wk{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const n=e.length-3,r=new Float32Array(2*n);for(let i=0;i<n;i+=3)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];return super.setPositions(r),this}setColors(e,n=3){const r=e.length-n,i=new Float32Array(2*r);if(n===3)for(let a=0;a<r;a+=n)i[2*a]=e[a],i[2*a+1]=e[a+1],i[2*a+2]=e[a+2],i[2*a+3]=e[a+3],i[2*a+4]=e[a+4],i[2*a+5]=e[a+5];else for(let a=0;a<r;a+=n)i[2*a]=e[a],i[2*a+1]=e[a+1],i[2*a+2]=e[a+2],i[2*a+3]=e[a+3],i[2*a+4]=e[a+4],i[2*a+5]=e[a+5],i[2*a+6]=e[a+6],i[2*a+7]=e[a+7];return super.setColors(i,n),this}fromLine(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}}class Sk extends rl{constructor(e){super({type:"LineMaterial",uniforms:Fy.clone(Fy.merge([wt.common,wt.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new lt(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${x$>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(n){this.uniforms.diffuse.value=n}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(n){n===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(n){this.uniforms.linewidth.value=n}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(n){!!n!="USE_DASH"in this.defines&&(this.needsUpdate=!0),n===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(n){this.uniforms.dashScale.value=n}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(n){this.uniforms.dashSize.value=n}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(n){this.uniforms.dashOffset.value=n}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(n){this.uniforms.gapSize.value=n}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(n){this.uniforms.opacity.value=n}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(n){this.uniforms.resolution.value.copy(n)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(n){!!n!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),n===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const sA=new Sn,fB=new he,hB=new he,wa=new Sn,Sa=new Sn,Sc=new Sn,oA=new he,lA=new rn,Ca=new t$,pB=new he,ew=new ji,tw=new Gi,Ec=new Sn;let Rc,lp;function mB(t,e,n){return Ec.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),Ec.multiplyScalar(1/Ec.w),Ec.x=lp/n.width,Ec.y=lp/n.height,Ec.applyMatrix4(t.projectionMatrixInverse),Ec.multiplyScalar(1/Ec.w),Math.abs(Math.max(Ec.x,Ec.y))}function TPe(t,e){const n=t.matrixWorld,r=t.geometry,i=r.attributes.instanceStart,a=r.attributes.instanceEnd,s=Math.min(r.instanceCount,i.count);for(let o=0,l=s;o<l;o++){Ca.start.fromBufferAttribute(i,o),Ca.end.fromBufferAttribute(a,o),Ca.applyMatrix4(n);const u=new he,d=new he;Rc.distanceSqToSegment(Ca.start,Ca.end,d,u),d.distanceTo(u)<lp*.5&&e.push({point:d,pointOnLine:u,distance:Rc.origin.distanceTo(d),object:t,face:null,faceIndex:o,uv:null,[b$]:null})}}function PPe(t,e,n){const r=e.projectionMatrix,a=t.material.resolution,s=t.matrixWorld,o=t.geometry,l=o.attributes.instanceStart,u=o.attributes.instanceEnd,d=Math.min(o.instanceCount,l.count),f=-e.near;Rc.at(1,Sc),Sc.w=1,Sc.applyMatrix4(e.matrixWorldInverse),Sc.applyMatrix4(r),Sc.multiplyScalar(1/Sc.w),Sc.x*=a.x/2,Sc.y*=a.y/2,Sc.z=0,oA.copy(Sc),lA.multiplyMatrices(e.matrixWorldInverse,s);for(let p=0,m=d;p<m;p++){if(wa.fromBufferAttribute(l,p),Sa.fromBufferAttribute(u,p),wa.w=1,Sa.w=1,wa.applyMatrix4(lA),Sa.applyMatrix4(lA),wa.z>f&&Sa.z>f)continue;if(wa.z>f){const C=wa.z-Sa.z,N=(wa.z-f)/C;wa.lerp(Sa,N)}else if(Sa.z>f){const C=Sa.z-wa.z,N=(Sa.z-f)/C;Sa.lerp(wa,N)}wa.applyMatrix4(r),Sa.applyMatrix4(r),wa.multiplyScalar(1/wa.w),Sa.multiplyScalar(1/Sa.w),wa.x*=a.x/2,wa.y*=a.y/2,Sa.x*=a.x/2,Sa.y*=a.y/2,Ca.start.copy(wa),Ca.start.z=0,Ca.end.copy(Sa),Ca.end.z=0;const _=Ca.closestPointToPointParameter(oA,!0);Ca.at(_,pB);const v=Y7.lerp(wa.z,Sa.z,_),w=v>=-1&&v<=1,M=oA.distanceTo(pB)<lp*.5;if(w&&M){Ca.start.fromBufferAttribute(l,p),Ca.end.fromBufferAttribute(u,p),Ca.start.applyMatrix4(s),Ca.end.applyMatrix4(s);const C=new he,N=new he;Rc.distanceSqToSegment(Ca.start,Ca.end,N,C),n.push({point:N,pointOnLine:C,distance:Rc.origin.distanceTo(N),object:t,face:null,faceIndex:p,uv:null,[b$]:null})}}}class w$ extends Rr{constructor(e=new wk,n=new Sk({color:Math.random()*16777215})){super(e,n),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,n=e.attributes.instanceStart,r=e.attributes.instanceEnd,i=new Float32Array(2*n.count);for(let s=0,o=0,l=n.count;s<l;s++,o+=2)fB.fromBufferAttribute(n,s),hB.fromBufferAttribute(r,s),i[o]=o===0?0:i[o-1],i[o+1]=i[o]+fB.distanceTo(hB);const a=new NS(i,2,1);return e.setAttribute("instanceDistanceStart",new Eo(a,1,0)),e.setAttribute("instanceDistanceEnd",new Eo(a,1,1)),this}raycast(e,n){const r=this.material.worldUnits,i=e.camera;i===null&&!r&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const a=e.params.Line2!==void 0&&e.params.Line2.threshold||0;Rc=e.ray;const s=this.matrixWorld,o=this.geometry,l=this.material;lp=l.linewidth+a,o.boundingSphere===null&&o.computeBoundingSphere(),tw.copy(o.boundingSphere).applyMatrix4(s);let u;if(r)u=lp*.5;else{const f=Math.max(i.near,tw.distanceToPoint(Rc.origin));u=mB(i,f,l.resolution)}if(tw.radius+=u,Rc.intersectsSphere(tw)===!1)return;o.boundingBox===null&&o.computeBoundingBox(),ew.copy(o.boundingBox).applyMatrix4(s);let d;if(r)d=lp*.5;else{const f=Math.max(i.near,ew.distanceToPoint(Rc.origin));d=mB(i,f,l.resolution)}ew.expandByScalar(d),Rc.intersectsBox(ew)!==!1&&(r?TPe(this,n):PPe(this,i,n))}onBeforeRender(e){const n=this.material.uniforms;n&&n.resolution&&(e.getViewport(sA),this.material.uniforms.resolution.value.set(sA.z,sA.w))}}class RPe extends w${constructor(e=new _$,n=new Sk({color:Math.random()*16777215})){super(e,n),this.isLine2=!0,this.type="Line2"}}const DPe=E.forwardRef(function({points:e,color:n=16777215,vertexColors:r,linewidth:i,lineWidth:a,segments:s,dashed:o,...l},u){var d,f;const p=Fl(w=>w.size),m=E.useMemo(()=>s?new w$:new RPe,[s]),[y]=E.useState(()=>new Sk),_=(r==null||(d=r[0])==null?void 0:d.length)===4?4:3,v=E.useMemo(()=>{const w=s?new wk:new _$,M=e.map(C=>{const N=Array.isArray(C);return C instanceof he||C instanceof Sn?[C.x,C.y,C.z]:C instanceof lt?[C.x,C.y,0]:N&&C.length===3?[C[0],C[1],C[2]]:N&&C.length===2?[C[0],C[1],0]:C});if(w.setPositions(M.flat()),r){n=16777215;const C=r.map(N=>N instanceof Ct?N.toArray():N);w.setColors(C.flat(),_)}return w},[e,s,r,_]);return E.useLayoutEffect(()=>{m.computeLineDistances()},[e,m]),E.useLayoutEffect(()=>{o?y.defines.USE_DASH="":delete y.defines.USE_DASH,y.needsUpdate=!0},[o,y]),E.useEffect(()=>()=>{v.dispose(),y.dispose()},[v]),E.createElement("primitive",Kt({object:m,ref:u},l),E.createElement("primitive",{object:v,attach:"geometry"}),E.createElement("primitive",Kt({object:y,attach:"material",color:n,vertexColors:!!r,resolution:[p.width,p.height],linewidth:(f=i??a)!==null&&f!==void 0?f:1,dashed:o,transparent:_===4},l)))});function kPe(){var t=Object.create(null);function e(i,a){var s=i.id,o=i.name,l=i.dependencies;l===void 0&&(l=[]);var u=i.init;u===void 0&&(u=function(){});var d=i.getTransferables;if(d===void 0&&(d=null),!t[s])try{l=l.map(function(p){return p&&p.isWorkerModule&&(e(p,function(m){if(m instanceof Error)throw m}),p=t[p.id].value),p}),u=r("<"+o+">.init",u),d&&(d=r("<"+o+">.getTransferables",d));var f=null;typeof u=="function"?f=u.apply(void 0,l):console.error("worker module init function failed to rehydrate"),t[s]={id:s,value:f,getTransferables:d},a(f)}catch(p){p&&p.noLog||console.error(p),a(p)}}function n(i,a){var s,o=i.id,l=i.args;(!t[o]||typeof t[o].value!="function")&&a(new Error("Worker module "+o+": not found or its 'init' did not return a function"));try{var u=(s=t[o]).value.apply(s,l);u&&typeof u.then=="function"?u.then(d,function(f){return a(f instanceof Error?f:new Error(""+f))}):d(u)}catch(f){a(f)}function d(f){try{var p=t[o].getTransferables&&t[o].getTransferables(f);(!p||!Array.isArray(p)||!p.length)&&(p=void 0),a(f,p)}catch(m){console.error(m),a(m)}}}function r(i,a){var s=void 0;self.troikaDefine=function(l){return s=l};var o=URL.createObjectURL(new Blob(["/** "+i.replace(/\*/g,"")+` **/

troikaDefine(
`+a+`
)`],{type:"application/javascript"}));try{importScripts(o)}catch(l){console.error(l)}return URL.revokeObjectURL(o),delete self.troikaDefine,s}self.addEventListener("message",function(i){var a=i.data,s=a.messageId,o=a.action,l=a.data;try{o==="registerModule"&&e(l,function(u){u instanceof Error?postMessage({messageId:s,success:!1,error:u.message}):postMessage({messageId:s,success:!0,result:{isCallable:typeof u=="function"}})}),o==="callModule"&&n(l,function(u,d){u instanceof Error?postMessage({messageId:s,success:!1,error:u.message}):postMessage({messageId:s,success:!0,result:u},d||void 0)})}catch(u){postMessage({messageId:s,success:!1,error:u.stack})}})}function jPe(t){var e=function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return e._getInitResult().then(function(i){if(typeof i=="function")return i.apply(void 0,n);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var n=t.dependencies,r=t.init;n=Array.isArray(n)?n.map(function(a){return a&&(a=a.onMainThread||a,a._getInitResult&&(a=a._getInitResult())),a}):[];var i=Promise.all(n).then(function(a){return r.apply(null,a)});return e._getInitResult=function(){return i},i},e}var S$=function(){var t=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),t=!0}catch(n){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+n.message+"]")}return S$=function(){return t},t},OPe=0,IPe=0,cA=!1,ny=Object.create(null),ry=Object.create(null),JT=Object.create(null);function dv(t){if((!t||typeof t.init!="function")&&!cA)throw new Error("requires `options.init` function");var e=t.dependencies,n=t.init,r=t.getTransferables,i=t.workerId,a=jPe(t);i==null&&(i="#default");var s="workerModule"+ ++OPe,o=t.name||s,l=null;e=e&&e.map(function(d){return typeof d=="function"&&!d.workerModuleData&&(cA=!0,d=dv({workerId:i,name:"<"+o+"> function dependency: "+d.name,init:`function(){return (
`+Cw(d)+`
)}`}),cA=!1),d&&d.workerModuleData&&(d=d.workerModuleData),d});function u(){for(var d=[],f=arguments.length;f--;)d[f]=arguments[f];if(!S$())return a.apply(void 0,d);if(!l){l=gB(i,"registerModule",u.workerModuleData);var p=function(){l=null,ry[i].delete(p)};(ry[i]||(ry[i]=new Set)).add(p)}return l.then(function(m){var y=m.isCallable;if(y)return gB(i,"callModule",{id:s,args:d});throw new Error("Worker module function was called but `init` did not return a callable function")})}return u.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:Cw(n),getTransferables:r&&Cw(r)},u.onMainThread=a,u}function LPe(t){ry[t]&&ry[t].forEach(function(e){e()}),ny[t]&&(ny[t].terminate(),delete ny[t])}function Cw(t){var e=t.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function FPe(t){var e=ny[t];if(!e){var n=Cw(kPe);e=ny[t]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+t.replace(/\*/g,"")+` **/

;(`+n+")()"],{type:"application/javascript"}))),e.onmessage=function(r){var i=r.data,a=i.messageId,s=JT[a];if(!s)throw new Error("WorkerModule response with empty or unknown messageId");delete JT[a],s(i)}}return e}function gB(t,e,n){return new Promise(function(r,i){var a=++IPe;JT[a]=function(s){s.success?r(s.result):i(new Error("Error in worker "+e+" call: "+s.error))},FPe(t).postMessage({messageId:a,action:e,data:n})})}function E$(){var t=(function(e){function n($,G,j,B,ae,re,de,ce){var ie=1-de;ce.x=ie*ie*$+2*ie*de*j+de*de*ae,ce.y=ie*ie*G+2*ie*de*B+de*de*re}function r($,G,j,B,ae,re,de,ce,ie,le){var fe=1-ie;le.x=fe*fe*fe*$+3*fe*fe*ie*j+3*fe*ie*ie*ae+ie*ie*ie*de,le.y=fe*fe*fe*G+3*fe*fe*ie*B+3*fe*ie*ie*re+ie*ie*ie*ce}function i($,G){for(var j=/([MLQCZ])([^MLQCZ]*)/g,B,ae,re,de,ce;B=j.exec($);){var ie=B[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(le){return parseFloat(le)});switch(B[1]){case"M":de=ae=ie[0],ce=re=ie[1];break;case"L":(ie[0]!==de||ie[1]!==ce)&&G("L",de,ce,de=ie[0],ce=ie[1]);break;case"Q":{G("Q",de,ce,de=ie[2],ce=ie[3],ie[0],ie[1]);break}case"C":{G("C",de,ce,de=ie[4],ce=ie[5],ie[0],ie[1],ie[2],ie[3]);break}case"Z":(de!==ae||ce!==re)&&G("L",de,ce,ae,re);break}}}function a($,G,j){j===void 0&&(j=16);var B={x:0,y:0};i($,function(ae,re,de,ce,ie,le,fe,Ne,Se){switch(ae){case"L":G(re,de,ce,ie);break;case"Q":{for(var Z=re,xe=de,oe=1;oe<j;oe++)n(re,de,le,fe,ce,ie,oe/(j-1),B),G(Z,xe,B.x,B.y),Z=B.x,xe=B.y;break}case"C":{for(var tt=re,ke=de,st=1;st<j;st++)r(re,de,le,fe,Ne,Se,ce,ie,st/(j-1),B),G(tt,ke,B.x,B.y),tt=B.x,ke=B.y;break}}})}var s="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",o="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,u={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function d($,G){var j=$.getContext?$.getContext("webgl",u):$,B=l.get(j);if(!B){let tt=function(J){var Q=re[J];if(!Q&&(Q=re[J]=j.getExtension(J),!Q))throw new Error(J+" not supported");return Q},ke=function(J,Q){var ye=j.createShader(Q);return j.shaderSource(ye,J),j.compileShader(ye),ye},st=function(J,Q,ye,we){if(!de[J]){var De={},Ue={},it=j.createProgram();j.attachShader(it,ke(Q,j.VERTEX_SHADER)),j.attachShader(it,ke(ye,j.FRAGMENT_SHADER)),j.linkProgram(it),de[J]={program:it,transaction:function(ot){j.useProgram(it),ot({setUniform:function(rt,be){for(var Je=[],Qe=arguments.length-2;Qe-- >0;)Je[Qe]=arguments[Qe+2];var Oe=Ue[be]||(Ue[be]=j.getUniformLocation(it,be));j["uniform"+rt].apply(j,[Oe].concat(Je))},setAttribute:function(rt,be,Je,Qe,Oe){var pe=De[rt];pe||(pe=De[rt]={buf:j.createBuffer(),loc:j.getAttribLocation(it,rt),data:null}),j.bindBuffer(j.ARRAY_BUFFER,pe.buf),j.vertexAttribPointer(pe.loc,be,j.FLOAT,!1,0,0),j.enableVertexAttribArray(pe.loc),ae?j.vertexAttribDivisor(pe.loc,Qe):tt("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(pe.loc,Qe),Oe!==pe.data&&(j.bufferData(j.ARRAY_BUFFER,Oe,Je),pe.data=Oe)}})}}}de[J].transaction(we)},Ce=function(J,Q){ie++;try{j.activeTexture(j.TEXTURE0+ie);var ye=ce[J];ye||(ye=ce[J]=j.createTexture(),j.bindTexture(j.TEXTURE_2D,ye),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,j.NEAREST),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,j.NEAREST)),j.bindTexture(j.TEXTURE_2D,ye),Q(ye,ie)}finally{ie--}},ct=function(J,Q,ye){var we=j.createFramebuffer();le.push(we),j.bindFramebuffer(j.FRAMEBUFFER,we),j.activeTexture(j.TEXTURE0+Q),j.bindTexture(j.TEXTURE_2D,J),j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,J,0);try{ye(we)}finally{j.deleteFramebuffer(we),j.bindFramebuffer(j.FRAMEBUFFER,le[--le.length-1]||null)}},$e=function(){re={},de={},ce={},ie=-1,le.length=0};var fe=tt,Ne=ke,Se=st,Z=Ce,xe=ct,oe=$e,ae=typeof WebGL2RenderingContext<"u"&&j instanceof WebGL2RenderingContext,re={},de={},ce={},ie=-1,le=[];j.canvas.addEventListener("webglcontextlost",function(J){$e(),J.preventDefault()},!1),l.set(j,B={gl:j,isWebGL2:ae,getExtension:tt,withProgram:st,withTexture:Ce,withTextureFramebuffer:ct,handleContextLoss:$e})}G(B)}function f($,G,j,B,ae,re,de,ce){de===void 0&&(de=15),ce===void 0&&(ce=null),d($,function(ie){var le=ie.gl,fe=ie.withProgram,Ne=ie.withTexture;Ne("copy",function(Se,Z){le.texImage2D(le.TEXTURE_2D,0,le.RGBA,ae,re,0,le.RGBA,le.UNSIGNED_BYTE,G),fe("copy",s,o,function(xe){var oe=xe.setUniform,tt=xe.setAttribute;tt("aUV",2,le.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),oe("1i","image",Z),le.bindFramebuffer(le.FRAMEBUFFER,ce||null),le.disable(le.BLEND),le.colorMask(de&8,de&4,de&2,de&1),le.viewport(j,B,ae,re),le.scissor(j,B,ae,re),le.drawArrays(le.TRIANGLES,0,3)})})})}function p($,G,j){var B=$.width,ae=$.height;d($,function(re){var de=re.gl,ce=new Uint8Array(B*ae*4);de.readPixels(0,0,B,ae,de.RGBA,de.UNSIGNED_BYTE,ce),$.width=G,$.height=j,f(de,ce,0,0,B,ae)})}var m=Object.freeze({__proto__:null,withWebGLContext:d,renderImageData:f,resizeWebGLCanvasWithoutClearing:p});function y($,G,j,B,ae,re){re===void 0&&(re=1);var de=new Uint8Array($*G),ce=B[2]-B[0],ie=B[3]-B[1],le=[];a(j,function(tt,ke,st,Ce){le.push({x1:tt,y1:ke,x2:st,y2:Ce,minX:Math.min(tt,st),minY:Math.min(ke,Ce),maxX:Math.max(tt,st),maxY:Math.max(ke,Ce)})}),le.sort(function(tt,ke){return tt.maxX-ke.maxX});for(var fe=0;fe<$;fe++)for(var Ne=0;Ne<G;Ne++){var Se=xe(B[0]+ce*(fe+.5)/$,B[1]+ie*(Ne+.5)/G),Z=Math.pow(1-Math.abs(Se)/ae,re)/2;Se<0&&(Z=1-Z),Z=Math.max(0,Math.min(255,Math.round(Z*255))),de[Ne*$+fe]=Z}return de;function xe(tt,ke){for(var st=1/0,Ce=1/0,ct=le.length;ct--;){var $e=le[ct];if($e.maxX+Ce<=tt)break;if(tt+Ce>$e.minX&&ke-Ce<$e.maxY&&ke+Ce>$e.minY){var J=w(tt,ke,$e.x1,$e.y1,$e.x2,$e.y2);J<st&&(st=J,Ce=Math.sqrt(st))}}return oe(tt,ke)&&(Ce=-Ce),Ce}function oe(tt,ke){for(var st=0,Ce=le.length;Ce--;){var ct=le[Ce];if(ct.maxX<=tt)break;var $e=ct.y1>ke!=ct.y2>ke&&tt<(ct.x2-ct.x1)*(ke-ct.y1)/(ct.y2-ct.y1)+ct.x1;$e&&(st+=ct.y1<ct.y2?1:-1)}return st!==0}}function _($,G,j,B,ae,re,de,ce,ie,le){re===void 0&&(re=1),ce===void 0&&(ce=0),ie===void 0&&(ie=0),le===void 0&&(le=0),v($,G,j,B,ae,re,de,null,ce,ie,le)}function v($,G,j,B,ae,re,de,ce,ie,le,fe){re===void 0&&(re=1),ie===void 0&&(ie=0),le===void 0&&(le=0),fe===void 0&&(fe=0);for(var Ne=y($,G,j,B,ae,re),Se=new Uint8Array(Ne.length*4),Z=0;Z<Ne.length;Z++)Se[Z*4+fe]=Ne[Z];f(de,Se,ie,le,$,G,1<<3-fe,ce)}function w($,G,j,B,ae,re){var de=ae-j,ce=re-B,ie=de*de+ce*ce,le=ie?Math.max(0,Math.min(1,(($-j)*de+(G-B)*ce)/ie)):0,fe=$-(j+le*de),Ne=G-(B+le*ce);return fe*fe+Ne*Ne}var M=Object.freeze({__proto__:null,generate:y,generateIntoCanvas:_,generateIntoFramebuffer:v}),C="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",N="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",P="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",R=new Float32Array([0,0,2,0,0,2]),k=null,U=!1,I={},L=new WeakMap;function z($){if(!U&&!X($))throw new Error("WebGL generation not supported")}function O($,G,j,B,ae,re,de){if(re===void 0&&(re=1),de===void 0&&(de=null),!de&&(de=k,!de)){var ce=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!ce)throw new Error("OffscreenCanvas or DOM canvas not supported");de=k=ce.getContext("webgl",{depth:!1})}z(de);var ie=new Uint8Array($*G*4);d(de,function(Se){var Z=Se.gl,xe=Se.withTexture,oe=Se.withTextureFramebuffer;xe("readable",function(tt,ke){Z.texImage2D(Z.TEXTURE_2D,0,Z.RGBA,$,G,0,Z.RGBA,Z.UNSIGNED_BYTE,null),oe(tt,ke,function(st){Y($,G,j,B,ae,re,Z,st,0,0,0),Z.readPixels(0,0,$,G,Z.RGBA,Z.UNSIGNED_BYTE,ie)})})});for(var le=new Uint8Array($*G),fe=0,Ne=0;fe<ie.length;fe+=4)le[Ne++]=ie[fe];return le}function q($,G,j,B,ae,re,de,ce,ie,le){re===void 0&&(re=1),ce===void 0&&(ce=0),ie===void 0&&(ie=0),le===void 0&&(le=0),Y($,G,j,B,ae,re,de,null,ce,ie,le)}function Y($,G,j,B,ae,re,de,ce,ie,le,fe){re===void 0&&(re=1),ie===void 0&&(ie=0),le===void 0&&(le=0),fe===void 0&&(fe=0),z(de);var Ne=[];a(j,function(Se,Z,xe,oe){Ne.push(Se,Z,xe,oe)}),Ne=new Float32Array(Ne),d(de,function(Se){var Z=Se.gl,xe=Se.isWebGL2,oe=Se.getExtension,tt=Se.withProgram,ke=Se.withTexture,st=Se.withTextureFramebuffer,Ce=Se.handleContextLoss;if(ke("rawDistances",function(ct,$e){($!==ct._lastWidth||G!==ct._lastHeight)&&Z.texImage2D(Z.TEXTURE_2D,0,Z.RGBA,ct._lastWidth=$,ct._lastHeight=G,0,Z.RGBA,Z.UNSIGNED_BYTE,null),tt("main",C,N,function(J){var Q=J.setAttribute,ye=J.setUniform,we=!xe&&oe("ANGLE_instanced_arrays"),De=!xe&&oe("EXT_blend_minmax");Q("aUV",2,Z.STATIC_DRAW,0,R),Q("aLineSegment",4,Z.DYNAMIC_DRAW,1,Ne),ye.apply(void 0,["4f","uGlyphBounds"].concat(B)),ye("1f","uMaxDistance",ae),ye("1f","uExponent",re),st(ct,$e,function(Ue){Z.enable(Z.BLEND),Z.colorMask(!0,!0,!0,!0),Z.viewport(0,0,$,G),Z.scissor(0,0,$,G),Z.blendFunc(Z.ONE,Z.ONE),Z.blendEquationSeparate(Z.FUNC_ADD,xe?Z.MAX:De.MAX_EXT),Z.clear(Z.COLOR_BUFFER_BIT),xe?Z.drawArraysInstanced(Z.TRIANGLES,0,3,Ne.length/4):we.drawArraysInstancedANGLE(Z.TRIANGLES,0,3,Ne.length/4)})}),tt("post",s,P,function(J){J.setAttribute("aUV",2,Z.STATIC_DRAW,0,R),J.setUniform("1i","tex",$e),Z.bindFramebuffer(Z.FRAMEBUFFER,ce),Z.disable(Z.BLEND),Z.colorMask(fe===0,fe===1,fe===2,fe===3),Z.viewport(ie,le,$,G),Z.scissor(ie,le,$,G),Z.drawArrays(Z.TRIANGLES,0,3)})}),Z.isContextLost())throw Ce(),new Error("webgl context lost")})}function X($){var G=!$||$===k?I:$.canvas||$,j=L.get(G);if(j===void 0){U=!0;var B=null;try{var ae=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],re=O(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,$);j=re&&ae.length===re.length&&re.every(function(de,ce){return de===ae[ce]}),j||(B="bad trial run results",console.info(ae,re))}catch(de){j=!1,B=de.message}B&&console.warn("WebGL SDF generation not supported:",B),U=!1,L.set(G,j)}return j}var ee=Object.freeze({__proto__:null,generate:O,generateIntoCanvas:q,generateIntoFramebuffer:Y,isSupported:X});function se($,G,j,B,ae,re){ae===void 0&&(ae=Math.max(B[2]-B[0],B[3]-B[1])/2),re===void 0&&(re=1);try{return O.apply(ee,arguments)}catch(de){return console.info("WebGL SDF generation failed, falling back to JS",de),y.apply(M,arguments)}}function W($,G,j,B,ae,re,de,ce,ie,le){ae===void 0&&(ae=Math.max(B[2]-B[0],B[3]-B[1])/2),re===void 0&&(re=1),ce===void 0&&(ce=0),ie===void 0&&(ie=0),le===void 0&&(le=0);try{return q.apply(ee,arguments)}catch(fe){return console.info("WebGL SDF generation failed, falling back to JS",fe),_.apply(M,arguments)}}return e.forEachPathCommand=i,e.generate=se,e.generateIntoCanvas=W,e.javascript=M,e.pathToLineSegments=a,e.webgl=ee,e.webglUtils=m,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return t}function UPe(){var t=(function(e){var n={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},i={};r.L=1,i[1]="L",Object.keys(n).forEach(function(Ce,ct){r[Ce]=1<<ct+1,i[r[Ce]]=Ce}),Object.freeze(r);var a=r.LRI|r.RLI|r.FSI,s=r.L|r.R|r.AL,o=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,l=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,u=r.S|r.WS|r.B|a|r.PDI|l,d=null;function f(){if(!d){d=new Map;var Ce=function($e){if(n.hasOwnProperty($e)){var J=0;n[$e].split(",").forEach(function(Q){var ye=Q.split("+"),we=ye[0],De=ye[1];we=parseInt(we,36),De=De?parseInt(De,36):0,d.set(J+=we,r[$e]);for(var Ue=0;Ue<De;Ue++)d.set(++J,r[$e])})}};for(var ct in n)Ce(ct)}}function p(Ce){return f(),d.get(Ce.codePointAt(0))||r.L}function m(Ce){return i[p(Ce)]}var y={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function _(Ce,ct){var $e=36,J=0,Q=new Map,ye=ct&&new Map,we;return Ce.split(",").forEach(function De(Ue){if(Ue.indexOf("+")!==-1)for(var it=+Ue;it--;)De(we);else{we=Ue;var nt=Ue.split(">"),ot=nt[0],xt=nt[1];ot=String.fromCodePoint(J+=parseInt(ot,$e)),xt=String.fromCodePoint(J+=parseInt(xt,$e)),Q.set(ot,xt),ct&&ye.set(xt,ot)}}),{map:Q,reverseMap:ye}}var v,w,M;function C(){if(!v){var Ce=_(y.pairs,!0),ct=Ce.map,$e=Ce.reverseMap;v=ct,w=$e,M=_(y.canonical,!1).map}}function N(Ce){return C(),v.get(Ce)||null}function P(Ce){return C(),w.get(Ce)||null}function R(Ce){return C(),M.get(Ce)||null}var k=r.L,U=r.R,I=r.EN,L=r.ES,z=r.ET,O=r.AN,q=r.CS,Y=r.B,X=r.S,ee=r.ON,se=r.BN,W=r.NSM,$=r.AL,G=r.LRO,j=r.RLO,B=r.LRE,ae=r.RLE,re=r.PDF,de=r.LRI,ce=r.RLI,ie=r.FSI,le=r.PDI;function fe(Ce,ct){for(var $e=125,J=new Uint32Array(Ce.length),Q=0;Q<Ce.length;Q++)J[Q]=p(Ce[Q]);var ye=new Map;function we(Yr,li){var Lr=J[Yr];J[Yr]=li,ye.set(Lr,ye.get(Lr)-1),Lr&o&&ye.set(o,ye.get(o)-1),ye.set(li,(ye.get(li)||0)+1),li&o&&ye.set(o,(ye.get(o)||0)+1)}for(var De=new Uint8Array(Ce.length),Ue=new Map,it=[],nt=null,ot=0;ot<Ce.length;ot++)nt||it.push(nt={start:ot,end:Ce.length-1,level:ct==="rtl"?1:ct==="ltr"?0:wi(ot,!1)}),J[ot]&Y&&(nt.end=ot,nt=null);for(var xt=ae|B|j|G|a|le|re|Y,rt=function(Yr){return Yr+(Yr&1?1:2)},be=function(Yr){return Yr+(Yr&1?2:1)},Je=0;Je<it.length;Je++){nt=it[Je];var Qe=[{_level:nt.level,_override:0,_isolate:0}],Oe=void 0,pe=0,je=0,ut=0;ye.clear();for(var ge=nt.start;ge<=nt.end;ge++){var Be=J[ge];if(Oe=Qe[Qe.length-1],ye.set(Be,(ye.get(Be)||0)+1),Be&o&&ye.set(o,(ye.get(o)||0)+1),Be&xt)if(Be&(ae|B)){De[ge]=Oe._level;var Pe=(Be===ae?be:rt)(Oe._level);Pe<=$e&&!pe&&!je?Qe.push({_level:Pe,_override:0,_isolate:0}):pe||je++}else if(Be&(j|G)){De[ge]=Oe._level;var Ke=(Be===j?be:rt)(Oe._level);Ke<=$e&&!pe&&!je?Qe.push({_level:Ke,_override:Be&j?U:k,_isolate:0}):pe||je++}else if(Be&a){Be&ie&&(Be=wi(ge+1,!0)===1?ce:de),De[ge]=Oe._level,Oe._override&&we(ge,Oe._override);var te=(Be===ce?be:rt)(Oe._level);te<=$e&&pe===0&&je===0?(ut++,Qe.push({_level:te,_override:0,_isolate:1,_isolInitIndex:ge})):pe++}else if(Be&le){if(pe>0)pe--;else if(ut>0){for(je=0;!Qe[Qe.length-1]._isolate;)Qe.pop();var Le=Qe[Qe.length-1]._isolInitIndex;Le!=null&&(Ue.set(Le,ge),Ue.set(ge,Le)),Qe.pop(),ut--}Oe=Qe[Qe.length-1],De[ge]=Oe._level,Oe._override&&we(ge,Oe._override)}else Be&re?(pe===0&&(je>0?je--:!Oe._isolate&&Qe.length>1&&(Qe.pop(),Oe=Qe[Qe.length-1])),De[ge]=Oe._level):Be&Y&&(De[ge]=nt.level);else De[ge]=Oe._level,Oe._override&&Be!==se&&we(ge,Oe._override)}for(var dt=[],kt=null,Mt=nt.start;Mt<=nt.end;Mt++){var Pt=J[Mt];if(!(Pt&l)){var mn=De[Mt],Mn=Pt&a,ar=Pt===le;kt&&mn===kt._level?(kt._end=Mt,kt._endsWithIsolInit=Mn):dt.push(kt={_start:Mt,_end:Mt,_level:mn,_startsWithPDI:ar,_endsWithIsolInit:Mn})}}for(var Wr=[],ii=0;ii<dt.length;ii++){var Or=dt[ii];if(!Or._startsWithPDI||Or._startsWithPDI&&!Ue.has(Or._start)){for(var Qi=[kt=Or],ai=void 0;kt&&kt._endsWithIsolInit&&(ai=Ue.get(kt._end))!=null;)for(var yi=ii+1;yi<dt.length;yi++)if(dt[yi]._start===ai){Qi.push(kt=dt[yi]);break}for(var Gr=[],ja=0;ja<Qi.length;ja++)for(var Qc=Qi[ja],Oa=Qc._start;Oa<=Qc._end;Oa++)Gr.push(Oa);for(var Ed=De[Gr[0]],Jc=nt.level,sl=Gr[0]-1;sl>=0;sl--)if(!(J[sl]&l)){Jc=De[sl];break}var ue=Gr[Gr.length-1],Ae=De[ue],We=nt.level;if(!(J[ue]&a)){for(var Ve=ue+1;Ve<=nt.end;Ve++)if(!(J[Ve]&l)){We=De[Ve];break}}Wr.push({_seqIndices:Gr,_sosType:Math.max(Jc,Ed)%2?U:k,_eosType:Math.max(We,Ae)%2?U:k})}}for(var Te=0;Te<Wr.length;Te++){var gt=Wr[Te],He=gt._seqIndices,At=gt._sosType,Rt=gt._eosType,$t=De[He[0]]&1?U:k;if(ye.get(W))for(var Zt=0;Zt<He.length;Zt++){var jt=He[Zt];if(J[jt]&W){for(var ln=At,fn=Zt-1;fn>=0;fn--)if(!(J[He[fn]]&l)){ln=J[He[fn]];break}we(jt,ln&(a|le)?ee:ln)}}if(ye.get(I))for(var Ot=0;Ot<He.length;Ot++){var cn=He[Ot];if(J[cn]&I)for(var Yt=Ot-1;Yt>=-1;Yt--){var _t=Yt===-1?At:J[He[Yt]];if(_t&s){_t===$&&we(cn,O);break}}}if(ye.get($))for(var $n=0;$n<He.length;$n++){var gn=He[$n];J[gn]&$&&we(gn,U)}if(ye.get(L)||ye.get(q))for(var Zn=1;Zn<He.length-1;Zn++){var Yn=He[Zn];if(J[Yn]&(L|q)){for(var Hn=0,ha=0,jn=Zn-1;jn>=0&&(Hn=J[He[jn]],!!(Hn&l));jn--);for(var si=Zn+1;si<He.length&&(ha=J[He[si]],!!(ha&l));si++);Hn===ha&&(J[Yn]===L?Hn===I:Hn&(I|O))&&we(Yn,Hn)}}if(ye.get(I))for(var Ir=0;Ir<He.length;Ir++){var Qn=He[Ir];if(J[Qn]&I){for(var Oi=Ir-1;Oi>=0&&J[He[Oi]]&(z|l);Oi--)we(He[Oi],I);for(Ir++;Ir<He.length&&J[He[Ir]]&(z|l|I);Ir++)J[He[Ir]]!==I&&we(He[Ir],I)}}if(ye.get(z)||ye.get(L)||ye.get(q))for(var $r=0;$r<He.length;$r++){var eu=He[$r];if(J[eu]&(z|L|q)){we(eu,ee);for(var ro=$r-1;ro>=0&&J[He[ro]]&l;ro--)we(He[ro],ee);for(var Cn=$r+1;Cn<He.length&&J[He[Cn]]&l;Cn++)we(He[Cn],ee)}}if(ye.get(I))for(var ko=0,rc=At;ko<He.length;ko++){var Md=He[ko],Cd=J[Md];Cd&I?rc===k&&we(Md,k):Cd&s&&(rc=Cd)}if(ye.get(o)){var jo=U|I|O,tu=jo|k,Cs=[];{for(var io=[],Ii=0;Ii<He.length;Ii++)if(J[He[Ii]]&o){var sn=Ce[He[Ii]],Ns=void 0;if(N(sn)!==null)if(io.length<63)io.push({char:sn,seqIndex:Ii});else break;else if((Ns=P(sn))!==null)for(var ns=io.length-1;ns>=0;ns--){var Oo=io[ns].char;if(Oo===Ns||Oo===P(R(sn))||N(R(Oo))===sn){Cs.push([io[ns].seqIndex,Ii]),io.length=ns;break}}}Cs.sort(function(Yr,li){return Yr[0]-li[0]})}for(var As=0;As<Cs.length;As++){for(var Fp=Cs[As],hr=Fp[0],ao=Fp[1],Up=!1,Ji=0,ic=hr+1;ic<ao;ic++){var ac=He[ic];if(J[ac]&tu){Up=!0;var rs=J[ac]&jo?U:k;if(rs===$t){Ji=rs;break}}}if(Up&&!Ji){Ji=At;for(var ol=hr-1;ol>=0;ol--){var sc=He[ol];if(J[sc]&tu){var xi=J[sc]&jo?U:k;xi!==$t?Ji=xi:Ji=$t;break}}}if(Ji){if(J[He[hr]]=J[He[ao]]=Ji,Ji!==$t){for(var bi=hr+1;bi<He.length;bi++)if(!(J[He[bi]]&l)){p(Ce[He[bi]])&W&&(J[He[bi]]=Ji);break}}if(Ji!==$t){for(var Io=ao+1;Io<He.length;Io++)if(!(J[He[Io]]&l)){p(Ce[He[Io]])&W&&(J[He[Io]]=Ji);break}}}}for(var Ts=0;Ts<He.length;Ts++)if(J[He[Ts]]&o){for(var nu=Ts,oc=Ts,ea=At,lc=Ts-1;lc>=0;lc--)if(J[He[lc]]&l)nu=lc;else{ea=J[He[lc]]&jo?U:k;break}for(var Ia=Rt,ll=Ts+1;ll<He.length;ll++)if(J[He[ll]]&(o|l))oc=ll;else{Ia=J[He[ll]]&jo?U:k;break}for(var _i=nu;_i<=oc;_i++)J[He[_i]]=ea===Ia?ea:$t;Ts=oc}}}for(var oi=nt.start;oi<=nt.end;oi++){var cl=De[oi],La=J[oi];if(cl&1?La&(k|I|O)&&De[oi]++:La&U?De[oi]++:La&(O|I)&&(De[oi]+=2),La&l&&(De[oi]=oi===0?nt.level:De[oi-1]),oi===nt.end||p(Ce[oi])&(X|Y))for(var ul=oi;ul>=0&&p(Ce[ul])&u;ul--)De[ul]=nt.level}}return{levels:De,paragraphs:it};function wi(Yr,li){for(var Lr=Yr;Lr<Ce.length;Lr++){var yr=J[Lr];if(yr&(U|$))return 1;if(yr&(Y|k)||li&&yr===le)return 0;if(yr&a){var pa=dl(Lr);Lr=pa===-1?Ce.length:pa}}return 0}function dl(Yr){for(var li=1,Lr=Yr+1;Lr<Ce.length;Lr++){var yr=J[Lr];if(yr&Y)break;if(yr&le){if(--li===0)return Lr}else yr&a&&li++}return-1}}var Ne="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Se;function Z(){if(!Se){var Ce=_(Ne,!0),ct=Ce.map,$e=Ce.reverseMap;$e.forEach(function(J,Q){ct.set(Q,J)}),Se=ct}}function xe(Ce){return Z(),Se.get(Ce)||null}function oe(Ce,ct,$e,J){var Q=Ce.length;$e=Math.max(0,$e==null?0:+$e),J=Math.min(Q-1,J==null?Q-1:+J);for(var ye=new Map,we=$e;we<=J;we++)if(ct[we]&1){var De=xe(Ce[we]);De!==null&&ye.set(we,De)}return ye}function tt(Ce,ct,$e,J){var Q=Ce.length;$e=Math.max(0,$e==null?0:+$e),J=Math.min(Q-1,J==null?Q-1:+J);var ye=[];return ct.paragraphs.forEach(function(we){var De=Math.max($e,we.start),Ue=Math.min(J,we.end);if(De<Ue){for(var it=ct.levels.slice(De,Ue+1),nt=Ue;nt>=De&&p(Ce[nt])&u;nt--)it[nt]=we.level;for(var ot=we.level,xt=1/0,rt=0;rt<it.length;rt++){var be=it[rt];be>ot&&(ot=be),be<xt&&(xt=be|1)}for(var Je=ot;Je>=xt;Je--)for(var Qe=0;Qe<it.length;Qe++)if(it[Qe]>=Je){for(var Oe=Qe;Qe+1<it.length&&it[Qe+1]>=Je;)Qe++;Qe>Oe&&ye.push([Oe+De,Qe+De])}}}),ye}function ke(Ce,ct,$e,J){var Q=st(Ce,ct,$e,J),ye=[].concat(Ce);return Q.forEach(function(we,De){ye[De]=(ct.levels[we]&1?xe(Ce[we]):null)||Ce[we]}),ye.join("")}function st(Ce,ct,$e,J){for(var Q=tt(Ce,ct,$e,J),ye=[],we=0;we<Ce.length;we++)ye[we]=we;return Q.forEach(function(De){for(var Ue=De[0],it=De[1],nt=ye.slice(Ue,it+1),ot=nt.length;ot--;)ye[it-ot]=nt[ot]}),ye}return e.closingToOpeningBracket=P,e.getBidiCharType=p,e.getBidiCharTypeName=m,e.getCanonicalBracket=R,e.getEmbeddingLevels=fe,e.getMirroredCharacter=xe,e.getMirroredCharactersMap=oe,e.getReorderSegments=tt,e.getReorderedIndices=st,e.getReorderedString=ke,e.openingToClosingBracket=N,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return t}const M$=/\bvoid\s+main\s*\(\s*\)\s*{/g;function eP(t){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function n(r,i){let a=bn[i];return a?eP(a):r}return t.replace(e,n)}const Ea=[];for(let t=0;t<256;t++)Ea[t]=(t<16?"0":"")+t.toString(16);function BPe(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Ea[t&255]+Ea[t>>8&255]+Ea[t>>16&255]+Ea[t>>24&255]+"-"+Ea[e&255]+Ea[e>>8&255]+"-"+Ea[e>>16&15|64]+Ea[e>>24&255]+"-"+Ea[n&63|128]+Ea[n>>8&255]+"-"+Ea[n>>16&255]+Ea[n>>24&255]+Ea[r&255]+Ea[r>>8&255]+Ea[r>>16&255]+Ea[r>>24&255]).toUpperCase()}const Nh=Object.assign||function(){let t=arguments[0];for(let e=1,n=arguments.length;e<n;e++){let r=arguments[e];if(r)for(let i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},zPe=Date.now(),vB=new WeakMap,yB=new Map;let HPe=1e10;function tP(t,e){const n=$Pe(e);let r=vB.get(t);if(r||vB.set(t,r=Object.create(null)),r[n])return new r[n];const i=`_onBeforeCompile${n}`,a=function(u,d){t.onBeforeCompile.call(this,u,d);const f=this.customProgramCacheKey()+"|"+u.vertexShader+"|"+u.fragmentShader;let p=yB[f];if(!p){const m=VPe(this,u,e,n);p=yB[f]=m}u.vertexShader=p.vertexShader,u.fragmentShader=p.fragmentShader,Nh(u.uniforms,this.uniforms),e.timeUniform&&(u.uniforms[e.timeUniform]={get value(){return Date.now()-zPe}}),this[i]&&this[i](u)},s=function(){return o(e.chained?t:t.clone())},o=function(u){const d=Object.create(u,l);return Object.defineProperty(d,"baseMaterial",{value:t}),Object.defineProperty(d,"id",{value:HPe++}),d.uuid=BPe(),d.uniforms=Nh({},u.uniforms,e.uniforms),d.defines=Nh({},u.defines,e.defines),d.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",d.extensions=Nh({},u.extensions,e.extensions),d._listeners=void 0,d},l={constructor:{value:s},isDerivedMaterial:{value:!0},type:{get:()=>t.type,set:u=>{t.type=u}},isDerivedFrom:{writable:!0,configurable:!0,value:function(u){const d=this.baseMaterial;return u===d||d.isDerivedMaterial&&d.isDerivedFrom(u)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get(){return a},set(u){this[i]=u}},copy:{writable:!0,configurable:!0,value:function(u){return t.copy.call(this,u),!t.isShaderMaterial&&!t.isDerivedMaterial&&(Nh(this.extensions,u.extensions),Nh(this.defines,u.defines),Nh(this.uniforms,Fy.clone(u.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const u=new t.constructor;return o(u).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let u=this._depthMaterial;return u||(u=this._depthMaterial=tP(t.isDerivedMaterial?t.getDepthMaterial():new K2({depthPacking:VD}),e),u.defines.IS_DEPTH_MATERIAL="",u.uniforms=this.uniforms),u}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let u=this._distanceMaterial;return u||(u=this._distanceMaterial=tP(t.isDerivedMaterial?t.getDistanceMaterial():new Z2,e),u.defines.IS_DISTANCE_MATERIAL="",u.uniforms=this.uniforms),u}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:u,_distanceMaterial:d}=this;u&&u.dispose(),d&&d.dispose(),t.dispose.call(this)}}};return r[n]=s,new s}function VPe(t,{vertexShader:e,fragmentShader:n},r,i){let{vertexDefs:a,vertexMainIntro:s,vertexMainOutro:o,vertexTransform:l,fragmentDefs:u,fragmentMainIntro:d,fragmentMainOutro:f,fragmentColorTransform:p,customRewriter:m,timeUniform:y}=r;if(a=a||"",s=s||"",o=o||"",u=u||"",d=d||"",f=f||"",(l||m)&&(e=eP(e)),(p||m)&&(n=n.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),n=eP(n)),m){let _=m({vertexShader:e,fragmentShader:n});e=_.vertexShader,n=_.fragmentShader}if(p){let _=[];n=n.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,v=>(_.push(v),"")),f=`${p}
${_.join(`
`)}
${f}`}if(y){const _=`
uniform float ${y};
`;a=_+a,u=_+u}return l&&(e=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${e}
`,a=`${a}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,s=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${s}
`,e=e.replace(/\b(position|normal|uv)\b/g,(_,v,w,M)=>/\battribute\s+vec[23]\s+$/.test(M.substr(0,w))?v:`troika_${v}_${i}`),t.map&&t.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${i}`))),e=xB(e,i,a,s,o),n=xB(n,i,u,d,f),{vertexShader:e,fragmentShader:n}}function xB(t,e,n,r,i){return(r||i||n)&&(t=t.replace(M$,`
${n}
void troikaOrigMain${e}() {`),t+=`
void main() {
  ${r}
  troikaOrigMain${e}();
  ${i}
}`),t}function WPe(t,e){return t==="uniforms"?void 0:typeof e=="function"?e.toString():e}let GPe=0;const bB=new Map;function $Pe(t){const e=JSON.stringify(t,WPe);let n=bB.get(e);return n==null&&bB.set(e,n=++GPe),n}function YPe(){return typeof window>"u"&&(self.window=self),(function(t){var e={parse:function(i){var a=e._bin,s=new Uint8Array(i);if(a.readASCII(s,0,4)=="ttcf"){var o=4;a.readUshort(s,o),o+=2,a.readUshort(s,o),o+=2;var l=a.readUint(s,o);o+=4;for(var u=[],d=0;d<l;d++){var f=a.readUint(s,o);o+=4,u.push(e._readFont(s,f))}return u}return[e._readFont(s,0)]},_readFont:function(i,a){var s=e._bin,o=a;s.readFixed(i,a),a+=4;var l=s.readUshort(i,a);a+=2,s.readUshort(i,a),a+=2,s.readUshort(i,a),a+=2,s.readUshort(i,a),a+=2;for(var u=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],d={_data:i,_offset:o},f={},p=0;p<l;p++){var m=s.readASCII(i,a,4);a+=4,s.readUint(i,a),a+=4;var y=s.readUint(i,a);a+=4;var _=s.readUint(i,a);a+=4,f[m]={offset:y,length:_}}for(p=0;p<u.length;p++){var v=u[p];f[v]&&(d[v.trim()]=e[v.trim()].parse(i,f[v].offset,f[v].length,d))}return d},_tabOffset:function(i,a,s){for(var o=e._bin,l=o.readUshort(i,s+4),u=s+12,d=0;d<l;d++){var f=o.readASCII(i,u,4);u+=4,o.readUint(i,u),u+=4;var p=o.readUint(i,u);if(u+=4,o.readUint(i,u),u+=4,f==a)return p}return 0}};e._bin={readFixed:function(i,a){return(i[a]<<8|i[a+1])+(i[a+2]<<8|i[a+3])/65540},readF2dot14:function(i,a){return e._bin.readShort(i,a)/16384},readInt:function(i,a){return e._bin._view(i).getInt32(a)},readInt8:function(i,a){return e._bin._view(i).getInt8(a)},readShort:function(i,a){return e._bin._view(i).getInt16(a)},readUshort:function(i,a){return e._bin._view(i).getUint16(a)},readUshorts:function(i,a,s){for(var o=[],l=0;l<s;l++)o.push(e._bin.readUshort(i,a+2*l));return o},readUint:function(i,a){return e._bin._view(i).getUint32(a)},readUint64:function(i,a){return 4294967296*e._bin.readUint(i,a)+e._bin.readUint(i,a+4)},readASCII:function(i,a,s){for(var o="",l=0;l<s;l++)o+=String.fromCharCode(i[a+l]);return o},readUnicode:function(i,a,s){for(var o="",l=0;l<s;l++){var u=i[a++]<<8|i[a++];o+=String.fromCharCode(u)}return o},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(i,a,s){var o=e._bin._tdec;return o&&a==0&&s==i.length?o.decode(i):e._bin.readASCII(i,a,s)},readBytes:function(i,a,s){for(var o=[],l=0;l<s;l++)o.push(i[a+l]);return o},readASCIIArray:function(i,a,s){for(var o=[],l=0;l<s;l++)o.push(String.fromCharCode(i[a+l]));return o},_view:function(i){return i._dataView||(i._dataView=i.buffer?new DataView(i.buffer,i.byteOffset,i.byteLength):new DataView(new Uint8Array(i).buffer))}},e._lctf={},e._lctf.parse=function(i,a,s,o,l){var u=e._bin,d={},f=a;u.readFixed(i,a),a+=4;var p=u.readUshort(i,a);a+=2;var m=u.readUshort(i,a);a+=2;var y=u.readUshort(i,a);return a+=2,d.scriptList=e._lctf.readScriptList(i,f+p),d.featureList=e._lctf.readFeatureList(i,f+m),d.lookupList=e._lctf.readLookupList(i,f+y,l),d},e._lctf.readLookupList=function(i,a,s){var o=e._bin,l=a,u=[],d=o.readUshort(i,a);a+=2;for(var f=0;f<d;f++){var p=o.readUshort(i,a);a+=2;var m=e._lctf.readLookupTable(i,l+p,s);u.push(m)}return u},e._lctf.readLookupTable=function(i,a,s){var o=e._bin,l=a,u={tabs:[]};u.ltype=o.readUshort(i,a),a+=2,u.flag=o.readUshort(i,a),a+=2;var d=o.readUshort(i,a);a+=2;for(var f=u.ltype,p=0;p<d;p++){var m=o.readUshort(i,a);a+=2;var y=s(i,f,l+m,u);u.tabs.push(y)}return u},e._lctf.numOfOnes=function(i){for(var a=0,s=0;s<32;s++)(i>>>s&1)!=0&&a++;return a},e._lctf.readClassDef=function(i,a){var s=e._bin,o=[],l=s.readUshort(i,a);if(a+=2,l==1){var u=s.readUshort(i,a);a+=2;var d=s.readUshort(i,a);a+=2;for(var f=0;f<d;f++)o.push(u+f),o.push(u+f),o.push(s.readUshort(i,a)),a+=2}if(l==2){var p=s.readUshort(i,a);for(a+=2,f=0;f<p;f++)o.push(s.readUshort(i,a)),a+=2,o.push(s.readUshort(i,a)),a+=2,o.push(s.readUshort(i,a)),a+=2}return o},e._lctf.getInterval=function(i,a){for(var s=0;s<i.length;s+=3){var o=i[s],l=i[s+1];if(i[s+2],o<=a&&a<=l)return s}return-1},e._lctf.readCoverage=function(i,a){var s=e._bin,o={};o.fmt=s.readUshort(i,a),a+=2;var l=s.readUshort(i,a);return a+=2,o.fmt==1&&(o.tab=s.readUshorts(i,a,l)),o.fmt==2&&(o.tab=s.readUshorts(i,a,3*l)),o},e._lctf.coverageIndex=function(i,a){var s=i.tab;if(i.fmt==1)return s.indexOf(a);if(i.fmt==2){var o=e._lctf.getInterval(s,a);if(o!=-1)return s[o+2]+(a-s[o])}return-1},e._lctf.readFeatureList=function(i,a){var s=e._bin,o=a,l=[],u=s.readUshort(i,a);a+=2;for(var d=0;d<u;d++){var f=s.readASCII(i,a,4);a+=4;var p=s.readUshort(i,a);a+=2;var m=e._lctf.readFeatureTable(i,o+p);m.tag=f.trim(),l.push(m)}return l},e._lctf.readFeatureTable=function(i,a){var s=e._bin,o=a,l={},u=s.readUshort(i,a);a+=2,u>0&&(l.featureParams=o+u);var d=s.readUshort(i,a);a+=2,l.tab=[];for(var f=0;f<d;f++)l.tab.push(s.readUshort(i,a+2*f));return l},e._lctf.readScriptList=function(i,a){var s=e._bin,o=a,l={},u=s.readUshort(i,a);a+=2;for(var d=0;d<u;d++){var f=s.readASCII(i,a,4);a+=4;var p=s.readUshort(i,a);a+=2,l[f.trim()]=e._lctf.readScriptTable(i,o+p)}return l},e._lctf.readScriptTable=function(i,a){var s=e._bin,o=a,l={},u=s.readUshort(i,a);a+=2,u>0&&(l.default=e._lctf.readLangSysTable(i,o+u));var d=s.readUshort(i,a);a+=2;for(var f=0;f<d;f++){var p=s.readASCII(i,a,4);a+=4;var m=s.readUshort(i,a);a+=2,l[p.trim()]=e._lctf.readLangSysTable(i,o+m)}return l},e._lctf.readLangSysTable=function(i,a){var s=e._bin,o={};s.readUshort(i,a),a+=2,o.reqFeature=s.readUshort(i,a),a+=2;var l=s.readUshort(i,a);return a+=2,o.features=s.readUshorts(i,a,l),o},e.CFF={},e.CFF.parse=function(i,a,s){var o=e._bin;(i=new Uint8Array(i.buffer,a,s))[a=0],i[++a],i[++a],i[++a],a++;var l=[];a=e.CFF.readIndex(i,a,l);for(var u=[],d=0;d<l.length-1;d++)u.push(o.readASCII(i,a+l[d],l[d+1]-l[d]));a+=l[l.length-1];var f=[];a=e.CFF.readIndex(i,a,f);var p=[];for(d=0;d<f.length-1;d++)p.push(e.CFF.readDict(i,a+f[d],a+f[d+1]));a+=f[f.length-1];var m=p[0],y=[];a=e.CFF.readIndex(i,a,y);var _=[];for(d=0;d<y.length-1;d++)_.push(o.readASCII(i,a+y[d],y[d+1]-y[d]));if(a+=y[y.length-1],e.CFF.readSubrs(i,a,m),m.CharStrings){a=m.CharStrings,y=[],a=e.CFF.readIndex(i,a,y);var v=[];for(d=0;d<y.length-1;d++)v.push(o.readBytes(i,a+y[d],y[d+1]-y[d]));m.CharStrings=v}if(m.ROS){a=m.FDArray;var w=[];for(a=e.CFF.readIndex(i,a,w),m.FDArray=[],d=0;d<w.length-1;d++){var M=e.CFF.readDict(i,a+w[d],a+w[d+1]);e.CFF._readFDict(i,M,_),m.FDArray.push(M)}a+=w[w.length-1],a=m.FDSelect,m.FDSelect=[];var C=i[a];if(a++,C!=3)throw C;var N=o.readUshort(i,a);for(a+=2,d=0;d<N+1;d++)m.FDSelect.push(o.readUshort(i,a),i[a+2]),a+=3}return m.Encoding&&(m.Encoding=e.CFF.readEncoding(i,m.Encoding,m.CharStrings.length)),m.charset&&(m.charset=e.CFF.readCharset(i,m.charset,m.CharStrings.length)),e.CFF._readFDict(i,m,_),m},e.CFF._readFDict=function(i,a,s){var o;for(var l in a.Private&&(o=a.Private[1],a.Private=e.CFF.readDict(i,o,o+a.Private[0]),a.Private.Subrs&&e.CFF.readSubrs(i,o+a.Private.Subrs,a.Private)),a)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(a[l]=s[a[l]-426+35])},e.CFF.readSubrs=function(i,a,s){var o=e._bin,l=[];a=e.CFF.readIndex(i,a,l);var u,d=l.length;u=d<1240?107:d<33900?1131:32768,s.Bias=u,s.Subrs=[];for(var f=0;f<l.length-1;f++)s.Subrs.push(o.readBytes(i,a+l[f],l[f+1]-l[f]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(i,a){for(var s=0;s<i.charset.length;s++)if(i.charset[s]==a)return s;return-1},e.CFF.glyphBySE=function(i,a){return a<0||a>255?-1:e.CFF.glyphByUnicode(i,e.CFF.tableSE[a])},e.CFF.readEncoding=function(i,a,s){e._bin;var o=[".notdef"],l=i[a];if(a++,l!=0)throw"error: unknown encoding format: "+l;var u=i[a];a++;for(var d=0;d<u;d++)o.push(i[a+d]);return o},e.CFF.readCharset=function(i,a,s){var o=e._bin,l=[".notdef"],u=i[a];if(a++,u==0)for(var d=0;d<s;d++){var f=o.readUshort(i,a);a+=2,l.push(f)}else{if(u!=1&&u!=2)throw"error: format: "+u;for(;l.length<s;){f=o.readUshort(i,a),a+=2;var p=0;for(u==1?(p=i[a],a++):(p=o.readUshort(i,a),a+=2),d=0;d<=p;d++)l.push(f),f++}}return l},e.CFF.readIndex=function(i,a,s){var o=e._bin,l=o.readUshort(i,a)+1,u=i[a+=2];if(a++,u==1)for(var d=0;d<l;d++)s.push(i[a+d]);else if(u==2)for(d=0;d<l;d++)s.push(o.readUshort(i,a+2*d));else if(u==3)for(d=0;d<l;d++)s.push(16777215&o.readUint(i,a+3*d-1));else if(l!=1)throw"unsupported offset size: "+u+", count: "+l;return(a+=l*u)-1},e.CFF.getCharString=function(i,a,s){var o=e._bin,l=i[a],u=i[a+1];i[a+2],i[a+3],i[a+4];var d=1,f=null,p=null;l<=20&&(f=l,d=1),l==12&&(f=100*l+u,d=2),21<=l&&l<=27&&(f=l,d=1),l==28&&(p=o.readShort(i,a+1),d=3),29<=l&&l<=31&&(f=l,d=1),32<=l&&l<=246&&(p=l-139,d=1),247<=l&&l<=250&&(p=256*(l-247)+u+108,d=2),251<=l&&l<=254&&(p=256*-(l-251)-u-108,d=2),l==255&&(p=o.readInt(i,a+1)/65535,d=5),s.val=p??"o"+f,s.size=d},e.CFF.readCharString=function(i,a,s){for(var o=a+s,l=e._bin,u=[];a<o;){var d=i[a],f=i[a+1];i[a+2],i[a+3],i[a+4];var p=1,m=null,y=null;d<=20&&(m=d,p=1),d==12&&(m=100*d+f,p=2),d!=19&&d!=20||(m=d,p=2),21<=d&&d<=27&&(m=d,p=1),d==28&&(y=l.readShort(i,a+1),p=3),29<=d&&d<=31&&(m=d,p=1),32<=d&&d<=246&&(y=d-139,p=1),247<=d&&d<=250&&(y=256*(d-247)+f+108,p=2),251<=d&&d<=254&&(y=256*-(d-251)-f-108,p=2),d==255&&(y=l.readInt(i,a+1)/65535,p=5),u.push(y??"o"+m),a+=p}return u},e.CFF.readDict=function(i,a,s){for(var o=e._bin,l={},u=[];a<s;){var d=i[a],f=i[a+1];i[a+2],i[a+3],i[a+4];var p=1,m=null,y=null;if(d==28&&(y=o.readShort(i,a+1),p=3),d==29&&(y=o.readInt(i,a+1),p=5),32<=d&&d<=246&&(y=d-139,p=1),247<=d&&d<=250&&(y=256*(d-247)+f+108,p=2),251<=d&&d<=254&&(y=256*-(d-251)-f-108,p=2),d==255)throw y=o.readInt(i,a+1)/65535,p=5,"unknown number";if(d==30){var _=[];for(p=1;;){var v=i[a+p];p++;var w=v>>4,M=15&v;if(w!=15&&_.push(w),M!=15&&_.push(M),M==15)break}for(var C="",N=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],P=0;P<_.length;P++)C+=N[_[P]];y=parseFloat(C)}d<=21&&(m=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][d],p=1,d==12&&(m=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],p=2)),m!=null?(l[m]=u.length==1?u[0]:u,u=[]):u.push(y),a+=p}return l},e.cmap={},e.cmap.parse=function(i,a,s){i=new Uint8Array(i.buffer,a,s),a=0;var o=e._bin,l={};o.readUshort(i,a),a+=2;var u=o.readUshort(i,a);a+=2;var d=[];l.tables=[];for(var f=0;f<u;f++){var p=o.readUshort(i,a);a+=2;var m=o.readUshort(i,a);a+=2;var y=o.readUint(i,a);a+=4;var _="p"+p+"e"+m,v=d.indexOf(y);if(v==-1){var w;v=l.tables.length,d.push(y);var M=o.readUshort(i,y);M==0?w=e.cmap.parse0(i,y):M==4?w=e.cmap.parse4(i,y):M==6?w=e.cmap.parse6(i,y):M==12?w=e.cmap.parse12(i,y):console.debug("unknown format: "+M,p,m,y),l.tables.push(w)}if(l[_]!=null)throw"multiple tables for one platform+encoding";l[_]=v}return l},e.cmap.parse0=function(i,a){var s=e._bin,o={};o.format=s.readUshort(i,a),a+=2;var l=s.readUshort(i,a);a+=2,s.readUshort(i,a),a+=2,o.map=[];for(var u=0;u<l-6;u++)o.map.push(i[a+u]);return o},e.cmap.parse4=function(i,a){var s=e._bin,o=a,l={};l.format=s.readUshort(i,a),a+=2;var u=s.readUshort(i,a);a+=2,s.readUshort(i,a),a+=2;var d=s.readUshort(i,a);a+=2;var f=d/2;l.searchRange=s.readUshort(i,a),a+=2,l.entrySelector=s.readUshort(i,a),a+=2,l.rangeShift=s.readUshort(i,a),a+=2,l.endCount=s.readUshorts(i,a,f),a+=2*f,a+=2,l.startCount=s.readUshorts(i,a,f),a+=2*f,l.idDelta=[];for(var p=0;p<f;p++)l.idDelta.push(s.readShort(i,a)),a+=2;for(l.idRangeOffset=s.readUshorts(i,a,f),a+=2*f,l.glyphIdArray=[];a<o+u;)l.glyphIdArray.push(s.readUshort(i,a)),a+=2;return l},e.cmap.parse6=function(i,a){var s=e._bin,o={};o.format=s.readUshort(i,a),a+=2,s.readUshort(i,a),a+=2,s.readUshort(i,a),a+=2,o.firstCode=s.readUshort(i,a),a+=2;var l=s.readUshort(i,a);a+=2,o.glyphIdArray=[];for(var u=0;u<l;u++)o.glyphIdArray.push(s.readUshort(i,a)),a+=2;return o},e.cmap.parse12=function(i,a){var s=e._bin,o={};o.format=s.readUshort(i,a),a+=2,a+=2,s.readUint(i,a),a+=4,s.readUint(i,a),a+=4;var l=s.readUint(i,a);a+=4,o.groups=[];for(var u=0;u<l;u++){var d=a+12*u,f=s.readUint(i,d+0),p=s.readUint(i,d+4),m=s.readUint(i,d+8);o.groups.push([f,p,m])}return o},e.glyf={},e.glyf.parse=function(i,a,s,o){for(var l=[],u=0;u<o.maxp.numGlyphs;u++)l.push(null);return l},e.glyf._parseGlyf=function(i,a){var s=e._bin,o=i._data,l=e._tabOffset(o,"glyf",i._offset)+i.loca[a];if(i.loca[a]==i.loca[a+1])return null;var u={};if(u.noc=s.readShort(o,l),l+=2,u.xMin=s.readShort(o,l),l+=2,u.yMin=s.readShort(o,l),l+=2,u.xMax=s.readShort(o,l),l+=2,u.yMax=s.readShort(o,l),l+=2,u.xMin>=u.xMax||u.yMin>=u.yMax)return null;if(u.noc>0){u.endPts=[];for(var d=0;d<u.noc;d++)u.endPts.push(s.readUshort(o,l)),l+=2;var f=s.readUshort(o,l);if(l+=2,o.length-l<f)return null;u.instructions=s.readBytes(o,l,f),l+=f;var p=u.endPts[u.noc-1]+1;for(u.flags=[],d=0;d<p;d++){var m=o[l];if(l++,u.flags.push(m),(8&m)!=0){var y=o[l];l++;for(var _=0;_<y;_++)u.flags.push(m),d++}}for(u.xs=[],d=0;d<p;d++){var v=(2&u.flags[d])!=0,w=(16&u.flags[d])!=0;v?(u.xs.push(w?o[l]:-o[l]),l++):w?u.xs.push(0):(u.xs.push(s.readShort(o,l)),l+=2)}for(u.ys=[],d=0;d<p;d++)v=(4&u.flags[d])!=0,w=(32&u.flags[d])!=0,v?(u.ys.push(w?o[l]:-o[l]),l++):w?u.ys.push(0):(u.ys.push(s.readShort(o,l)),l+=2);var M=0,C=0;for(d=0;d<p;d++)M+=u.xs[d],C+=u.ys[d],u.xs[d]=M,u.ys[d]=C}else{var N;u.parts=[];do{N=s.readUshort(o,l),l+=2;var P={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(u.parts.push(P),P.glyphIndex=s.readUshort(o,l),l+=2,1&N){var R=s.readShort(o,l);l+=2;var k=s.readShort(o,l);l+=2}else R=s.readInt8(o,l),l++,k=s.readInt8(o,l),l++;2&N?(P.m.tx=R,P.m.ty=k):(P.p1=R,P.p2=k),8&N?(P.m.a=P.m.d=s.readF2dot14(o,l),l+=2):64&N?(P.m.a=s.readF2dot14(o,l),l+=2,P.m.d=s.readF2dot14(o,l),l+=2):128&N&&(P.m.a=s.readF2dot14(o,l),l+=2,P.m.b=s.readF2dot14(o,l),l+=2,P.m.c=s.readF2dot14(o,l),l+=2,P.m.d=s.readF2dot14(o,l),l+=2)}while(32&N);if(256&N){var U=s.readUshort(o,l);for(l+=2,u.instr=[],d=0;d<U;d++)u.instr.push(o[l]),l++}}return u},e.GDEF={},e.GDEF.parse=function(i,a,s,o){var l=a;a+=4;var u=e._bin.readUshort(i,a);return{glyphClassDef:u===0?null:e._lctf.readClassDef(i,l+u)}},e.GPOS={},e.GPOS.parse=function(i,a,s,o){return e._lctf.parse(i,a,s,o,e.GPOS.subt)},e.GPOS.subt=function(i,a,s,o){var l=e._bin,u=s,d={};if(d.fmt=l.readUshort(i,s),s+=2,a==1||a==2||a==3||a==7||a==8&&d.fmt<=2){var f=l.readUshort(i,s);s+=2,d.coverage=e._lctf.readCoverage(i,f+u)}if(a==1&&d.fmt==1){var p=l.readUshort(i,s);s+=2,p!=0&&(d.pos=e.GPOS.readValueRecord(i,s,p))}else if(a==2&&d.fmt>=1&&d.fmt<=2){p=l.readUshort(i,s),s+=2;var m=l.readUshort(i,s);s+=2;var y=e._lctf.numOfOnes(p),_=e._lctf.numOfOnes(m);if(d.fmt==1){d.pairsets=[];var v=l.readUshort(i,s);s+=2;for(var w=0;w<v;w++){var M=u+l.readUshort(i,s);s+=2;var C=l.readUshort(i,M);M+=2;for(var N=[],P=0;P<C;P++){var R=l.readUshort(i,M);M+=2,p!=0&&(O=e.GPOS.readValueRecord(i,M,p),M+=2*y),m!=0&&(q=e.GPOS.readValueRecord(i,M,m),M+=2*_),N.push({gid2:R,val1:O,val2:q})}d.pairsets.push(N)}}if(d.fmt==2){var k=l.readUshort(i,s);s+=2;var U=l.readUshort(i,s);s+=2;var I=l.readUshort(i,s);s+=2;var L=l.readUshort(i,s);for(s+=2,d.classDef1=e._lctf.readClassDef(i,u+k),d.classDef2=e._lctf.readClassDef(i,u+U),d.matrix=[],w=0;w<I;w++){var z=[];for(P=0;P<L;P++){var O=null,q=null;p!=0&&(O=e.GPOS.readValueRecord(i,s,p),s+=2*y),m!=0&&(q=e.GPOS.readValueRecord(i,s,m),s+=2*_),z.push({val1:O,val2:q})}d.matrix.push(z)}}}else if(a==4&&d.fmt==1)d.markCoverage=e._lctf.readCoverage(i,l.readUshort(i,s)+u),d.baseCoverage=e._lctf.readCoverage(i,l.readUshort(i,s+2)+u),d.markClassCount=l.readUshort(i,s+4),d.markArray=e.GPOS.readMarkArray(i,l.readUshort(i,s+6)+u),d.baseArray=e.GPOS.readBaseArray(i,l.readUshort(i,s+8)+u,d.markClassCount);else if(a==6&&d.fmt==1)d.mark1Coverage=e._lctf.readCoverage(i,l.readUshort(i,s)+u),d.mark2Coverage=e._lctf.readCoverage(i,l.readUshort(i,s+2)+u),d.markClassCount=l.readUshort(i,s+4),d.mark1Array=e.GPOS.readMarkArray(i,l.readUshort(i,s+6)+u),d.mark2Array=e.GPOS.readBaseArray(i,l.readUshort(i,s+8)+u,d.markClassCount);else{if(a==9&&d.fmt==1){var Y=l.readUshort(i,s);s+=2;var X=l.readUint(i,s);if(s+=4,o.ltype==9)o.ltype=Y;else if(o.ltype!=Y)throw"invalid extension substitution";return e.GPOS.subt(i,o.ltype,u+X)}console.debug("unsupported GPOS table LookupType",a,"format",d.fmt)}return d},e.GPOS.readValueRecord=function(i,a,s){var o=e._bin,l=[];return l.push(1&s?o.readShort(i,a):0),a+=1&s?2:0,l.push(2&s?o.readShort(i,a):0),a+=2&s?2:0,l.push(4&s?o.readShort(i,a):0),a+=4&s?2:0,l.push(8&s?o.readShort(i,a):0),a+=8&s?2:0,l},e.GPOS.readBaseArray=function(i,a,s){var o=e._bin,l=[],u=a,d=o.readUshort(i,a);a+=2;for(var f=0;f<d;f++){for(var p=[],m=0;m<s;m++)p.push(e.GPOS.readAnchorRecord(i,u+o.readUshort(i,a))),a+=2;l.push(p)}return l},e.GPOS.readMarkArray=function(i,a){var s=e._bin,o=[],l=a,u=s.readUshort(i,a);a+=2;for(var d=0;d<u;d++){var f=e.GPOS.readAnchorRecord(i,s.readUshort(i,a+2)+l);f.markClass=s.readUshort(i,a),o.push(f),a+=4}return o},e.GPOS.readAnchorRecord=function(i,a){var s=e._bin,o={};return o.fmt=s.readUshort(i,a),o.x=s.readShort(i,a+2),o.y=s.readShort(i,a+4),o},e.GSUB={},e.GSUB.parse=function(i,a,s,o){return e._lctf.parse(i,a,s,o,e.GSUB.subt)},e.GSUB.subt=function(i,a,s,o){var l=e._bin,u=s,d={};if(d.fmt=l.readUshort(i,s),s+=2,a!=1&&a!=2&&a!=4&&a!=5&&a!=6)return null;if(a==1||a==2||a==4||a==5&&d.fmt<=2||a==6&&d.fmt<=2){var f=l.readUshort(i,s);s+=2,d.coverage=e._lctf.readCoverage(i,u+f)}if(a==1&&d.fmt>=1&&d.fmt<=2){if(d.fmt==1)d.delta=l.readShort(i,s),s+=2;else if(d.fmt==2){var p=l.readUshort(i,s);s+=2,d.newg=l.readUshorts(i,s,p),s+=2*d.newg.length}}else if(a==2&&d.fmt==1){p=l.readUshort(i,s),s+=2,d.seqs=[];for(var m=0;m<p;m++){var y=l.readUshort(i,s)+u;s+=2;var _=l.readUshort(i,y);d.seqs.push(l.readUshorts(i,y+2,_))}}else if(a==4)for(d.vals=[],p=l.readUshort(i,s),s+=2,m=0;m<p;m++){var v=l.readUshort(i,s);s+=2,d.vals.push(e.GSUB.readLigatureSet(i,u+v))}else if(a==5&&d.fmt==2){if(d.fmt==2){var w=l.readUshort(i,s);s+=2,d.cDef=e._lctf.readClassDef(i,u+w),d.scset=[];var M=l.readUshort(i,s);for(s+=2,m=0;m<M;m++){var C=l.readUshort(i,s);s+=2,d.scset.push(C==0?null:e.GSUB.readSubClassSet(i,u+C))}}}else if(a==6&&d.fmt==3){if(d.fmt==3){for(m=0;m<3;m++){p=l.readUshort(i,s),s+=2;for(var N=[],P=0;P<p;P++)N.push(e._lctf.readCoverage(i,u+l.readUshort(i,s+2*P)));s+=2*p,m==0&&(d.backCvg=N),m==1&&(d.inptCvg=N),m==2&&(d.ahedCvg=N)}p=l.readUshort(i,s),s+=2,d.lookupRec=e.GSUB.readSubstLookupRecords(i,s,p)}}else{if(a==7&&d.fmt==1){var R=l.readUshort(i,s);s+=2;var k=l.readUint(i,s);if(s+=4,o.ltype==9)o.ltype=R;else if(o.ltype!=R)throw"invalid extension substitution";return e.GSUB.subt(i,o.ltype,u+k)}console.debug("unsupported GSUB table LookupType",a,"format",d.fmt)}return d},e.GSUB.readSubClassSet=function(i,a){var s=e._bin.readUshort,o=a,l=[],u=s(i,a);a+=2;for(var d=0;d<u;d++){var f=s(i,a);a+=2,l.push(e.GSUB.readSubClassRule(i,o+f))}return l},e.GSUB.readSubClassRule=function(i,a){var s=e._bin.readUshort,o={},l=s(i,a),u=s(i,a+=2);a+=2,o.input=[];for(var d=0;d<l-1;d++)o.input.push(s(i,a)),a+=2;return o.substLookupRecords=e.GSUB.readSubstLookupRecords(i,a,u),o},e.GSUB.readSubstLookupRecords=function(i,a,s){for(var o=e._bin.readUshort,l=[],u=0;u<s;u++)l.push(o(i,a),o(i,a+2)),a+=4;return l},e.GSUB.readChainSubClassSet=function(i,a){var s=e._bin,o=a,l=[],u=s.readUshort(i,a);a+=2;for(var d=0;d<u;d++){var f=s.readUshort(i,a);a+=2,l.push(e.GSUB.readChainSubClassRule(i,o+f))}return l},e.GSUB.readChainSubClassRule=function(i,a){for(var s=e._bin,o={},l=["backtrack","input","lookahead"],u=0;u<l.length;u++){var d=s.readUshort(i,a);a+=2,u==1&&d--,o[l[u]]=s.readUshorts(i,a,d),a+=2*o[l[u]].length}return d=s.readUshort(i,a),a+=2,o.subst=s.readUshorts(i,a,2*d),a+=2*o.subst.length,o},e.GSUB.readLigatureSet=function(i,a){var s=e._bin,o=a,l=[],u=s.readUshort(i,a);a+=2;for(var d=0;d<u;d++){var f=s.readUshort(i,a);a+=2,l.push(e.GSUB.readLigature(i,o+f))}return l},e.GSUB.readLigature=function(i,a){var s=e._bin,o={chain:[]};o.nglyph=s.readUshort(i,a),a+=2;var l=s.readUshort(i,a);a+=2;for(var u=0;u<l-1;u++)o.chain.push(s.readUshort(i,a)),a+=2;return o},e.head={},e.head.parse=function(i,a,s){var o=e._bin,l={};return o.readFixed(i,a),a+=4,l.fontRevision=o.readFixed(i,a),a+=4,o.readUint(i,a),a+=4,o.readUint(i,a),a+=4,l.flags=o.readUshort(i,a),a+=2,l.unitsPerEm=o.readUshort(i,a),a+=2,l.created=o.readUint64(i,a),a+=8,l.modified=o.readUint64(i,a),a+=8,l.xMin=o.readShort(i,a),a+=2,l.yMin=o.readShort(i,a),a+=2,l.xMax=o.readShort(i,a),a+=2,l.yMax=o.readShort(i,a),a+=2,l.macStyle=o.readUshort(i,a),a+=2,l.lowestRecPPEM=o.readUshort(i,a),a+=2,l.fontDirectionHint=o.readShort(i,a),a+=2,l.indexToLocFormat=o.readShort(i,a),a+=2,l.glyphDataFormat=o.readShort(i,a),a+=2,l},e.hhea={},e.hhea.parse=function(i,a,s){var o=e._bin,l={};return o.readFixed(i,a),a+=4,l.ascender=o.readShort(i,a),a+=2,l.descender=o.readShort(i,a),a+=2,l.lineGap=o.readShort(i,a),a+=2,l.advanceWidthMax=o.readUshort(i,a),a+=2,l.minLeftSideBearing=o.readShort(i,a),a+=2,l.minRightSideBearing=o.readShort(i,a),a+=2,l.xMaxExtent=o.readShort(i,a),a+=2,l.caretSlopeRise=o.readShort(i,a),a+=2,l.caretSlopeRun=o.readShort(i,a),a+=2,l.caretOffset=o.readShort(i,a),a+=2,a+=8,l.metricDataFormat=o.readShort(i,a),a+=2,l.numberOfHMetrics=o.readUshort(i,a),a+=2,l},e.hmtx={},e.hmtx.parse=function(i,a,s,o){for(var l=e._bin,u={aWidth:[],lsBearing:[]},d=0,f=0,p=0;p<o.maxp.numGlyphs;p++)p<o.hhea.numberOfHMetrics&&(d=l.readUshort(i,a),a+=2,f=l.readShort(i,a),a+=2),u.aWidth.push(d),u.lsBearing.push(f);return u},e.kern={},e.kern.parse=function(i,a,s,o){var l=e._bin,u=l.readUshort(i,a);if(a+=2,u==1)return e.kern.parseV1(i,a-2,s,o);var d=l.readUshort(i,a);a+=2;for(var f={glyph1:[],rval:[]},p=0;p<d;p++){a+=2,s=l.readUshort(i,a),a+=2;var m=l.readUshort(i,a);a+=2;var y=m>>>8;if((y&=15)!=0)throw"unknown kern table format: "+y;a=e.kern.readFormat0(i,a,f)}return f},e.kern.parseV1=function(i,a,s,o){var l=e._bin;l.readFixed(i,a),a+=4;var u=l.readUint(i,a);a+=4;for(var d={glyph1:[],rval:[]},f=0;f<u;f++){l.readUint(i,a),a+=4;var p=l.readUshort(i,a);a+=2,l.readUshort(i,a),a+=2;var m=p>>>8;if((m&=15)!=0)throw"unknown kern table format: "+m;a=e.kern.readFormat0(i,a,d)}return d},e.kern.readFormat0=function(i,a,s){var o=e._bin,l=-1,u=o.readUshort(i,a);a+=2,o.readUshort(i,a),a+=2,o.readUshort(i,a),a+=2,o.readUshort(i,a),a+=2;for(var d=0;d<u;d++){var f=o.readUshort(i,a);a+=2;var p=o.readUshort(i,a);a+=2;var m=o.readShort(i,a);a+=2,f!=l&&(s.glyph1.push(f),s.rval.push({glyph2:[],vals:[]}));var y=s.rval[s.rval.length-1];y.glyph2.push(p),y.vals.push(m),l=f}return a},e.loca={},e.loca.parse=function(i,a,s,o){var l=e._bin,u=[],d=o.head.indexToLocFormat,f=o.maxp.numGlyphs+1;if(d==0)for(var p=0;p<f;p++)u.push(l.readUshort(i,a+(p<<1))<<1);if(d==1)for(p=0;p<f;p++)u.push(l.readUint(i,a+(p<<2)));return u},e.maxp={},e.maxp.parse=function(i,a,s){var o=e._bin,l={},u=o.readUint(i,a);return a+=4,l.numGlyphs=o.readUshort(i,a),a+=2,u==65536&&(l.maxPoints=o.readUshort(i,a),a+=2,l.maxContours=o.readUshort(i,a),a+=2,l.maxCompositePoints=o.readUshort(i,a),a+=2,l.maxCompositeContours=o.readUshort(i,a),a+=2,l.maxZones=o.readUshort(i,a),a+=2,l.maxTwilightPoints=o.readUshort(i,a),a+=2,l.maxStorage=o.readUshort(i,a),a+=2,l.maxFunctionDefs=o.readUshort(i,a),a+=2,l.maxInstructionDefs=o.readUshort(i,a),a+=2,l.maxStackElements=o.readUshort(i,a),a+=2,l.maxSizeOfInstructions=o.readUshort(i,a),a+=2,l.maxComponentElements=o.readUshort(i,a),a+=2,l.maxComponentDepth=o.readUshort(i,a),a+=2),l},e.name={},e.name.parse=function(i,a,s){var o=e._bin,l={};o.readUshort(i,a),a+=2;var u=o.readUshort(i,a);a+=2,o.readUshort(i,a);for(var d,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],p=a+=2,m=0;m<u;m++){var y=o.readUshort(i,a);a+=2;var _=o.readUshort(i,a);a+=2;var v=o.readUshort(i,a);a+=2;var w=o.readUshort(i,a);a+=2;var M=o.readUshort(i,a);a+=2;var C=o.readUshort(i,a);a+=2;var N,P=f[w],R=p+12*u+C;if(y==0)N=o.readUnicode(i,R,M/2);else if(y==3&&_==0)N=o.readUnicode(i,R,M/2);else if(_==0)N=o.readASCII(i,R,M);else if(_==1)N=o.readUnicode(i,R,M/2);else if(_==3)N=o.readUnicode(i,R,M/2);else{if(y!=1)throw"unknown encoding "+_+", platformID: "+y;N=o.readASCII(i,R,M),console.debug("reading unknown MAC encoding "+_+" as ASCII")}var k="p"+y+","+v.toString(16);l[k]==null&&(l[k]={}),l[k][P!==void 0?P:w]=N,l[k]._lang=v}for(var U in l)if(l[U].postScriptName!=null&&l[U]._lang==1033)return l[U];for(var U in l)if(l[U].postScriptName!=null&&l[U]._lang==0)return l[U];for(var U in l)if(l[U].postScriptName!=null&&l[U]._lang==3084)return l[U];for(var U in l)if(l[U].postScriptName!=null)return l[U];for(var U in l){d=U;break}return console.debug("returning name table with languageID "+l[d]._lang),l[d]},e["OS/2"]={},e["OS/2"].parse=function(i,a,s){var o=e._bin.readUshort(i,a);a+=2;var l={};if(o==0)e["OS/2"].version0(i,a,l);else if(o==1)e["OS/2"].version1(i,a,l);else if(o==2||o==3||o==4)e["OS/2"].version2(i,a,l);else{if(o!=5)throw"unknown OS/2 table version: "+o;e["OS/2"].version5(i,a,l)}return l},e["OS/2"].version0=function(i,a,s){var o=e._bin;return s.xAvgCharWidth=o.readShort(i,a),a+=2,s.usWeightClass=o.readUshort(i,a),a+=2,s.usWidthClass=o.readUshort(i,a),a+=2,s.fsType=o.readUshort(i,a),a+=2,s.ySubscriptXSize=o.readShort(i,a),a+=2,s.ySubscriptYSize=o.readShort(i,a),a+=2,s.ySubscriptXOffset=o.readShort(i,a),a+=2,s.ySubscriptYOffset=o.readShort(i,a),a+=2,s.ySuperscriptXSize=o.readShort(i,a),a+=2,s.ySuperscriptYSize=o.readShort(i,a),a+=2,s.ySuperscriptXOffset=o.readShort(i,a),a+=2,s.ySuperscriptYOffset=o.readShort(i,a),a+=2,s.yStrikeoutSize=o.readShort(i,a),a+=2,s.yStrikeoutPosition=o.readShort(i,a),a+=2,s.sFamilyClass=o.readShort(i,a),a+=2,s.panose=o.readBytes(i,a,10),a+=10,s.ulUnicodeRange1=o.readUint(i,a),a+=4,s.ulUnicodeRange2=o.readUint(i,a),a+=4,s.ulUnicodeRange3=o.readUint(i,a),a+=4,s.ulUnicodeRange4=o.readUint(i,a),a+=4,s.achVendID=[o.readInt8(i,a),o.readInt8(i,a+1),o.readInt8(i,a+2),o.readInt8(i,a+3)],a+=4,s.fsSelection=o.readUshort(i,a),a+=2,s.usFirstCharIndex=o.readUshort(i,a),a+=2,s.usLastCharIndex=o.readUshort(i,a),a+=2,s.sTypoAscender=o.readShort(i,a),a+=2,s.sTypoDescender=o.readShort(i,a),a+=2,s.sTypoLineGap=o.readShort(i,a),a+=2,s.usWinAscent=o.readUshort(i,a),a+=2,s.usWinDescent=o.readUshort(i,a),a+=2},e["OS/2"].version1=function(i,a,s){var o=e._bin;return a=e["OS/2"].version0(i,a,s),s.ulCodePageRange1=o.readUint(i,a),a+=4,s.ulCodePageRange2=o.readUint(i,a),a+=4},e["OS/2"].version2=function(i,a,s){var o=e._bin;return a=e["OS/2"].version1(i,a,s),s.sxHeight=o.readShort(i,a),a+=2,s.sCapHeight=o.readShort(i,a),a+=2,s.usDefault=o.readUshort(i,a),a+=2,s.usBreak=o.readUshort(i,a),a+=2,s.usMaxContext=o.readUshort(i,a),a+=2},e["OS/2"].version5=function(i,a,s){var o=e._bin;return a=e["OS/2"].version2(i,a,s),s.usLowerOpticalPointSize=o.readUshort(i,a),a+=2,s.usUpperOpticalPointSize=o.readUshort(i,a),a+=2},e.post={},e.post.parse=function(i,a,s){var o=e._bin,l={};return l.version=o.readFixed(i,a),a+=4,l.italicAngle=o.readFixed(i,a),a+=4,l.underlinePosition=o.readShort(i,a),a+=2,l.underlineThickness=o.readShort(i,a),a+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(i,a){var s=i.cmap,o=-1;if(s.p0e4!=null?o=s.p0e4:s.p3e1!=null?o=s.p3e1:s.p1e0!=null?o=s.p1e0:s.p0e3!=null&&(o=s.p0e3),o==-1)throw"no familiar platform and encoding!";var l=s.tables[o];if(l.format==0)return a>=l.map.length?0:l.map[a];if(l.format==4){for(var u=-1,d=0;d<l.endCount.length;d++)if(a<=l.endCount[d]){u=d;break}return u==-1||l.startCount[u]>a?0:65535&(l.idRangeOffset[u]!=0?l.glyphIdArray[a-l.startCount[u]+(l.idRangeOffset[u]>>1)-(l.idRangeOffset.length-u)]:a+l.idDelta[u])}if(l.format==12){if(a>l.groups[l.groups.length-1][1])return 0;for(d=0;d<l.groups.length;d++){var f=l.groups[d];if(f[0]<=a&&a<=f[1])return f[2]+(a-f[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(i,a){var s={cmds:[],crds:[]};if(i.SVG&&i.SVG.entries[a]){var o=i.SVG.entries[a];return o==null?s:(typeof o=="string"&&(o=e.SVG.toPath(o),i.SVG.entries[a]=o),o)}if(i.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i.CFF.Private?i.CFF.Private.defaultWidthX:0,open:!1},u=i.CFF,d=i.CFF.Private;if(u.ROS){for(var f=0;u.FDSelect[f+2]<=a;)f+=2;d=u.FDArray[u.FDSelect[f+1]].Private}e.U._drawCFF(i.CFF.CharStrings[a],l,u,d,s)}else i.glyf&&e.U._drawGlyf(a,i,s);return s},e.U._drawGlyf=function(i,a,s){var o=a.glyf[i];o==null&&(o=a.glyf[i]=e.glyf._parseGlyf(a,i)),o!=null&&(o.noc>-1?e.U._simpleGlyph(o,s):e.U._compoGlyph(o,a,s))},e.U._simpleGlyph=function(i,a){for(var s=0;s<i.noc;s++){for(var o=s==0?0:i.endPts[s-1]+1,l=i.endPts[s],u=o;u<=l;u++){var d=u==o?l:u-1,f=u==l?o:u+1,p=1&i.flags[u],m=1&i.flags[d],y=1&i.flags[f],_=i.xs[u],v=i.ys[u];if(u==o)if(p){if(!m){e.U.P.moveTo(a,_,v);continue}e.U.P.moveTo(a,i.xs[d],i.ys[d])}else m?e.U.P.moveTo(a,i.xs[d],i.ys[d]):e.U.P.moveTo(a,(i.xs[d]+_)/2,(i.ys[d]+v)/2);p?m&&e.U.P.lineTo(a,_,v):y?e.U.P.qcurveTo(a,_,v,i.xs[f],i.ys[f]):e.U.P.qcurveTo(a,_,v,(_+i.xs[f])/2,(v+i.ys[f])/2)}e.U.P.closePath(a)}},e.U._compoGlyph=function(i,a,s){for(var o=0;o<i.parts.length;o++){var l={cmds:[],crds:[]},u=i.parts[o];e.U._drawGlyf(u.glyphIndex,a,l);for(var d=u.m,f=0;f<l.crds.length;f+=2){var p=l.crds[f],m=l.crds[f+1];s.crds.push(p*d.a+m*d.b+d.tx),s.crds.push(p*d.c+m*d.d+d.ty)}for(f=0;f<l.cmds.length;f++)s.cmds.push(l.cmds[f])}},e.U._getGlyphClass=function(i,a){var s=e._lctf.getInterval(a,i);return s==-1?0:a[s+2]},e.U._applySubs=function(i,a,s,o){for(var l=i.length-a-1,u=0;u<s.tabs.length;u++)if(s.tabs[u]!=null){var d,f=s.tabs[u];if(!f.coverage||(d=e._lctf.coverageIndex(f.coverage,i[a]))!=-1){if(s.ltype==1)i[a],f.fmt==1?i[a]=i[a]+f.delta:i[a]=f.newg[d];else if(s.ltype==4)for(var p=f.vals[d],m=0;m<p.length;m++){var y=p[m],_=y.chain.length;if(!(_>l)){for(var v=!0,w=0,M=0;M<_;M++){for(;i[a+w+(1+M)]==-1;)w++;y.chain[M]!=i[a+w+(1+M)]&&(v=!1)}if(v){for(i[a]=y.nglyph,M=0;M<_+w;M++)i[a+M+1]=-1;break}}}else if(s.ltype==5&&f.fmt==2)for(var C=e._lctf.getInterval(f.cDef,i[a]),N=f.cDef[C+2],P=f.scset[N],R=0;R<P.length;R++){var k=P[R],U=k.input;if(!(U.length>l)){for(v=!0,M=0;M<U.length;M++){var I=e._lctf.getInterval(f.cDef,i[a+1+M]);if(C==-1&&f.cDef[I+2]!=U[M]){v=!1;break}}if(v){var L=k.substLookupRecords;for(m=0;m<L.length;m+=2)L[m],L[m+1]}}}else if(s.ltype==6&&f.fmt==3){if(!e.U._glsCovered(i,f.backCvg,a-f.backCvg.length)||!e.U._glsCovered(i,f.inptCvg,a)||!e.U._glsCovered(i,f.ahedCvg,a+f.inptCvg.length))continue;var z=f.lookupRec;for(R=0;R<z.length;R+=2){C=z[R];var O=o[z[R+1]];e.U._applySubs(i,a+C,O,o)}}}}},e.U._glsCovered=function(i,a,s){for(var o=0;o<a.length;o++)if(e._lctf.coverageIndex(a[o],i[s+o])==-1)return!1;return!0},e.U.glyphsToPath=function(i,a,s){for(var o={cmds:[],crds:[]},l=0,u=0;u<a.length;u++){var d=a[u];if(d!=-1){for(var f=u<a.length-1&&a[u+1]!=-1?a[u+1]:0,p=e.U.glyphToPath(i,d),m=0;m<p.crds.length;m+=2)o.crds.push(p.crds[m]+l),o.crds.push(p.crds[m+1]);for(s&&o.cmds.push(s),m=0;m<p.cmds.length;m++)o.cmds.push(p.cmds[m]);s&&o.cmds.push("X"),l+=i.hmtx.aWidth[d],u<a.length-1&&(l+=e.U.getPairAdjustment(i,d,f))}}return o},e.U.P={},e.U.P.moveTo=function(i,a,s){i.cmds.push("M"),i.crds.push(a,s)},e.U.P.lineTo=function(i,a,s){i.cmds.push("L"),i.crds.push(a,s)},e.U.P.curveTo=function(i,a,s,o,l,u,d){i.cmds.push("C"),i.crds.push(a,s,o,l,u,d)},e.U.P.qcurveTo=function(i,a,s,o,l){i.cmds.push("Q"),i.crds.push(a,s,o,l)},e.U.P.closePath=function(i){i.cmds.push("Z")},e.U._drawCFF=function(i,a,s,o,l){for(var u=a.stack,d=a.nStems,f=a.haveWidth,p=a.width,m=a.open,y=0,_=a.x,v=a.y,w=0,M=0,C=0,N=0,P=0,R=0,k=0,U=0,I=0,L=0,z={val:0,size:0};y<i.length;){e.CFF.getCharString(i,y,z);var O=z.val;if(y+=z.size,O=="o1"||O=="o18")u.length%2!=0&&!f&&(p=u.shift()+o.nominalWidthX),d+=u.length>>1,u.length=0,f=!0;else if(O=="o3"||O=="o23")u.length%2!=0&&!f&&(p=u.shift()+o.nominalWidthX),d+=u.length>>1,u.length=0,f=!0;else if(O=="o4")u.length>1&&!f&&(p=u.shift()+o.nominalWidthX,f=!0),m&&e.U.P.closePath(l),v+=u.pop(),e.U.P.moveTo(l,_,v),m=!0;else if(O=="o5")for(;u.length>0;)_+=u.shift(),v+=u.shift(),e.U.P.lineTo(l,_,v);else if(O=="o6"||O=="o7")for(var q=u.length,Y=O=="o6",X=0;X<q;X++){var ee=u.shift();Y?_+=ee:v+=ee,Y=!Y,e.U.P.lineTo(l,_,v)}else if(O=="o8"||O=="o24"){q=u.length;for(var se=0;se+6<=q;)w=_+u.shift(),M=v+u.shift(),C=w+u.shift(),N=M+u.shift(),_=C+u.shift(),v=N+u.shift(),e.U.P.curveTo(l,w,M,C,N,_,v),se+=6;O=="o24"&&(_+=u.shift(),v+=u.shift(),e.U.P.lineTo(l,_,v))}else{if(O=="o11")break;if(O=="o1234"||O=="o1235"||O=="o1236"||O=="o1237")O=="o1234"&&(M=v,C=(w=_+u.shift())+u.shift(),L=N=M+u.shift(),R=N,U=v,_=(k=(P=(I=C+u.shift())+u.shift())+u.shift())+u.shift(),e.U.P.curveTo(l,w,M,C,N,I,L),e.U.P.curveTo(l,P,R,k,U,_,v)),O=="o1235"&&(w=_+u.shift(),M=v+u.shift(),C=w+u.shift(),N=M+u.shift(),I=C+u.shift(),L=N+u.shift(),P=I+u.shift(),R=L+u.shift(),k=P+u.shift(),U=R+u.shift(),_=k+u.shift(),v=U+u.shift(),u.shift(),e.U.P.curveTo(l,w,M,C,N,I,L),e.U.P.curveTo(l,P,R,k,U,_,v)),O=="o1236"&&(w=_+u.shift(),M=v+u.shift(),C=w+u.shift(),L=N=M+u.shift(),R=N,k=(P=(I=C+u.shift())+u.shift())+u.shift(),U=R+u.shift(),_=k+u.shift(),e.U.P.curveTo(l,w,M,C,N,I,L),e.U.P.curveTo(l,P,R,k,U,_,v)),O=="o1237"&&(w=_+u.shift(),M=v+u.shift(),C=w+u.shift(),N=M+u.shift(),I=C+u.shift(),L=N+u.shift(),P=I+u.shift(),R=L+u.shift(),k=P+u.shift(),U=R+u.shift(),Math.abs(k-_)>Math.abs(U-v)?_=k+u.shift():v=U+u.shift(),e.U.P.curveTo(l,w,M,C,N,I,L),e.U.P.curveTo(l,P,R,k,U,_,v));else if(O=="o14"){if(u.length>0&&!f&&(p=u.shift()+s.nominalWidthX,f=!0),u.length==4){var W=u.shift(),$=u.shift(),G=u.shift(),j=u.shift(),B=e.CFF.glyphBySE(s,G),ae=e.CFF.glyphBySE(s,j);e.U._drawCFF(s.CharStrings[B],a,s,o,l),a.x=W,a.y=$,e.U._drawCFF(s.CharStrings[ae],a,s,o,l)}m&&(e.U.P.closePath(l),m=!1)}else if(O=="o19"||O=="o20")u.length%2!=0&&!f&&(p=u.shift()+o.nominalWidthX),d+=u.length>>1,u.length=0,f=!0,y+=d+7>>3;else if(O=="o21")u.length>2&&!f&&(p=u.shift()+o.nominalWidthX,f=!0),v+=u.pop(),_+=u.pop(),m&&e.U.P.closePath(l),e.U.P.moveTo(l,_,v),m=!0;else if(O=="o22")u.length>1&&!f&&(p=u.shift()+o.nominalWidthX,f=!0),_+=u.pop(),m&&e.U.P.closePath(l),e.U.P.moveTo(l,_,v),m=!0;else if(O=="o25"){for(;u.length>6;)_+=u.shift(),v+=u.shift(),e.U.P.lineTo(l,_,v);w=_+u.shift(),M=v+u.shift(),C=w+u.shift(),N=M+u.shift(),_=C+u.shift(),v=N+u.shift(),e.U.P.curveTo(l,w,M,C,N,_,v)}else if(O=="o26")for(u.length%2&&(_+=u.shift());u.length>0;)w=_,M=v+u.shift(),_=C=w+u.shift(),v=(N=M+u.shift())+u.shift(),e.U.P.curveTo(l,w,M,C,N,_,v);else if(O=="o27")for(u.length%2&&(v+=u.shift());u.length>0;)M=v,C=(w=_+u.shift())+u.shift(),N=M+u.shift(),_=C+u.shift(),v=N,e.U.P.curveTo(l,w,M,C,N,_,v);else if(O=="o10"||O=="o29"){var re=O=="o10"?o:s;if(u.length==0)console.debug("error: empty stack");else{var de=u.pop(),ce=re.Subrs[de+re.Bias];a.x=_,a.y=v,a.nStems=d,a.haveWidth=f,a.width=p,a.open=m,e.U._drawCFF(ce,a,s,o,l),_=a.x,v=a.y,d=a.nStems,f=a.haveWidth,p=a.width,m=a.open}}else if(O=="o30"||O=="o31"){var ie=u.length,le=(se=0,O=="o31");for(se+=ie-(q=-3&ie);se<q;)le?(M=v,C=(w=_+u.shift())+u.shift(),v=(N=M+u.shift())+u.shift(),q-se==5?(_=C+u.shift(),se++):_=C,le=!1):(w=_,M=v+u.shift(),C=w+u.shift(),N=M+u.shift(),_=C+u.shift(),q-se==5?(v=N+u.shift(),se++):v=N,le=!0),e.U.P.curveTo(l,w,M,C,N,_,v),se+=4}else{if((O+"").charAt(0)=="o")throw console.debug("Unknown operation: "+O,i),O;u.push(O)}}}a.x=_,a.y=v,a.nStems=d,a.haveWidth=f,a.width=p,a.open=m};var n=e,r={Typr:n};return t.Typr=n,t.default=r,Object.defineProperty(t,"__esModule",{value:!0}),t})({}).Typr}function qPe(){return(function(t){var e=Uint8Array,n=Uint16Array,r=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=function(O,q){for(var Y=new n(31),X=0;X<31;++X)Y[X]=q+=1<<O[X-1];var ee=new r(Y[30]);for(X=1;X<30;++X)for(var se=Y[X];se<Y[X+1];++se)ee[se]=se-Y[X]<<5|X;return[Y,ee]},l=o(i,2),u=l[0],d=l[1];u[28]=258,d[258]=28;for(var f=o(a,0)[0],p=new n(32768),m=0;m<32768;++m){var y=(43690&m)>>>1|(21845&m)<<1;y=(61680&(y=(52428&y)>>>2|(13107&y)<<2))>>>4|(3855&y)<<4,p[m]=((65280&y)>>>8|(255&y)<<8)>>>1}var _=function(O,q,Y){for(var X=O.length,ee=0,se=new n(q);ee<X;++ee)++se[O[ee]-1];var W,$=new n(q);for(ee=0;ee<q;++ee)$[ee]=$[ee-1]+se[ee-1]<<1;{W=new n(1<<q);var G=15-q;for(ee=0;ee<X;++ee)if(O[ee])for(var j=ee<<4|O[ee],B=q-O[ee],ae=$[O[ee]-1]++<<B,re=ae|(1<<B)-1;ae<=re;++ae)W[p[ae]>>>G]=j}return W},v=new e(288);for(m=0;m<144;++m)v[m]=8;for(m=144;m<256;++m)v[m]=9;for(m=256;m<280;++m)v[m]=7;for(m=280;m<288;++m)v[m]=8;var w=new e(32);for(m=0;m<32;++m)w[m]=5;var M=_(v,9),C=_(w,5),N=function(O){for(var q=O[0],Y=1;Y<O.length;++Y)O[Y]>q&&(q=O[Y]);return q},P=function(O,q,Y){var X=q/8|0;return(O[X]|O[X+1]<<8)>>(7&q)&Y},R=function(O,q){var Y=q/8|0;return(O[Y]|O[Y+1]<<8|O[Y+2]<<16)>>(7&q)},k=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],U=function(O,q,Y){var X=new Error(q||k[O]);if(X.code=O,Error.captureStackTrace&&Error.captureStackTrace(X,U),!Y)throw X;return X},I=function(O,q,Y){var X=O.length;if(!X||Y&&!Y.l&&X<5)return q||new e(0);var ee=!q||Y,se=!Y||Y.i;Y||(Y={}),q||(q=new e(3*X));var W,$=function(Oe){var pe=q.length;if(Oe>pe){var je=new e(Math.max(2*pe,Oe));je.set(q),q=je}},G=Y.f||0,j=Y.p||0,B=Y.b||0,ae=Y.l,re=Y.d,de=Y.m,ce=Y.n,ie=8*X;do{if(!ae){Y.f=G=P(O,j,1);var le=P(O,j+1,3);if(j+=3,!le){var fe=O[($e=((W=j)/8|0)+(7&W&&1)+4)-4]|O[$e-3]<<8,Ne=$e+fe;if(Ne>X){se&&U(0);break}ee&&$(B+fe),q.set(O.subarray($e,Ne),B),Y.b=B+=fe,Y.p=j=8*Ne;continue}if(le==1)ae=M,re=C,de=9,ce=5;else if(le==2){var Se=P(O,j,31)+257,Z=P(O,j+10,15)+4,xe=Se+P(O,j+5,31)+1;j+=14;for(var oe=new e(xe),tt=new e(19),ke=0;ke<Z;++ke)tt[s[ke]]=P(O,j+3*ke,7);j+=3*Z;var st=N(tt),Ce=(1<<st)-1,ct=_(tt,st);for(ke=0;ke<xe;){var $e,J=ct[P(O,j,Ce)];if(j+=15&J,($e=J>>>4)<16)oe[ke++]=$e;else{var Q=0,ye=0;for($e==16?(ye=3+P(O,j,3),j+=2,Q=oe[ke-1]):$e==17?(ye=3+P(O,j,7),j+=3):$e==18&&(ye=11+P(O,j,127),j+=7);ye--;)oe[ke++]=Q}}var we=oe.subarray(0,Se),De=oe.subarray(Se);de=N(we),ce=N(De),ae=_(we,de),re=_(De,ce)}else U(1);if(j>ie){se&&U(0);break}}ee&&$(B+131072);for(var Ue=(1<<de)-1,it=(1<<ce)-1,nt=j;;nt=j){var ot=(Q=ae[R(O,j)&Ue])>>>4;if((j+=15&Q)>ie){se&&U(0);break}if(Q||U(2),ot<256)q[B++]=ot;else{if(ot==256){nt=j,ae=null;break}var xt=ot-254;if(ot>264){var rt=i[ke=ot-257];xt=P(O,j,(1<<rt)-1)+u[ke],j+=rt}var be=re[R(O,j)&it],Je=be>>>4;if(be||U(3),j+=15&be,De=f[Je],Je>3&&(rt=a[Je],De+=R(O,j)&(1<<rt)-1,j+=rt),j>ie){se&&U(0);break}ee&&$(B+131072);for(var Qe=B+xt;B<Qe;B+=4)q[B]=q[B-De],q[B+1]=q[B+1-De],q[B+2]=q[B+2-De],q[B+3]=q[B+3-De];B=Qe}}Y.l=ae,Y.p=nt,Y.b=B,ae&&(G=1,Y.m=de,Y.d=re,Y.n=ce)}while(!G);return B==q.length?q:(function(Oe,pe,je){(je==null||je>Oe.length)&&(je=Oe.length);var ut=new(Oe instanceof n?n:Oe instanceof r?r:e)(je-pe);return ut.set(Oe.subarray(pe,je)),ut})(q,0,B)},L=new e(0),z=typeof TextDecoder<"u"&&new TextDecoder;try{z.decode(L,{stream:!0})}catch{}return t.convert_streams=function(O){var q=new DataView(O),Y=0;function X(){var Se=q.getUint16(Y);return Y+=2,Se}function ee(){var Se=q.getUint32(Y);return Y+=4,Se}function se(Se){fe.setUint16(Ne,Se),Ne+=2}function W(Se){fe.setUint32(Ne,Se),Ne+=4}for(var $={signature:ee(),flavor:ee(),length:ee(),numTables:X(),reserved:X(),totalSfntSize:ee(),majorVersion:X(),minorVersion:X(),metaOffset:ee(),metaLength:ee(),metaOrigLength:ee(),privOffset:ee(),privLength:ee()},G=0;Math.pow(2,G)<=$.numTables;)G++;G--;for(var j=16*Math.pow(2,G),B=16*$.numTables-j,ae=12,re=[],de=0;de<$.numTables;de++)re.push({tag:ee(),offset:ee(),compLength:ee(),origLength:ee(),origChecksum:ee()}),ae+=16;var ce,ie=new Uint8Array(12+16*re.length+re.reduce((function(Se,Z){return Se+Z.origLength+4}),0)),le=ie.buffer,fe=new DataView(le),Ne=0;return W($.flavor),se($.numTables),se(j),se(G),se(B),re.forEach((function(Se){W(Se.tag),W(Se.origChecksum),W(ae),W(Se.origLength),Se.outOffset=ae,(ae+=Se.origLength)%4!=0&&(ae+=4-ae%4)})),re.forEach((function(Se){var Z,xe=O.slice(Se.offset,Se.offset+Se.compLength);if(Se.compLength!=Se.origLength){var oe=new Uint8Array(Se.origLength);Z=new Uint8Array(xe,2),I(Z,oe)}else oe=new Uint8Array(xe);ie.set(oe,Se.outOffset);var tt=0;(ae=Se.outOffset+Se.origLength)%4!=0&&(tt=4-ae%4),ie.set(new Uint8Array(tt).buffer,Se.outOffset+Se.origLength),ce=ae+tt})),le.slice(0,ce)},Object.defineProperty(t,"__esModule",{value:!0}),t})({}).convert_streams}function XPe(t,e){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,a=2,s=4,o=8,l=16,u=32;let d;function f(k){if(!d){const U={R:a,L:i,D:s,C:l,U:u,T:o};d=new Map;for(let I in r){let L=0;r[I].split(",").forEach(z=>{let[O,q]=z.split("+");O=parseInt(O,36),q=q?parseInt(q,36):0,d.set(L+=O,U[I]);for(let Y=q;Y--;)d.set(++L,U[I])})}}return d.get(k)||u}const p=1,m=2,y=3,_=4,v=[null,"isol","init","fina","medi"];function w(k){const U=new Uint8Array(k.length);let I=u,L=p,z=-1;for(let O=0;O<k.length;O++){const q=k.codePointAt(O);let Y=f(q)|0,X=p;Y&o||(I&(i|s|l)?Y&(a|s|l)?(X=y,(L===p||L===y)&&U[z]++):Y&(i|u)&&(L===m||L===_)&&U[z]--:I&(a|u)&&(L===m||L===_)&&U[z]--,L=U[O]=X,I=Y,z=O,q>65535&&O++)}return U}function M(k,U){const I=[];for(let z=0;z<U.length;z++){const O=U.codePointAt(z);O>65535&&z++,I.push(t.U.codeToGlyph(k,O))}const L=k.GSUB;if(L){const{lookupList:z,featureList:O}=L;let q;const Y=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,X=[];O.forEach(ee=>{if(Y.test(ee.tag))for(let se=0;se<ee.tab.length;se++){if(X[ee.tab[se]])continue;X[ee.tab[se]]=!0;const W=z[ee.tab[se]],$=/^(isol|init|fina|medi)$/.test(ee.tag);$&&!q&&(q=w(U));for(let G=0;G<I.length;G++)(!q||!$||v[q[G]]===ee.tag)&&t.U._applySubs(I,G,W,z)}})}return I}function C(k,U){const I=new Int16Array(U.length*3);let L=0;for(;L<U.length;L++){const Y=U[L];if(Y===-1)continue;I[L*3+2]=k.hmtx.aWidth[Y];const X=k.GPOS;if(X){const ee=X.lookupList;for(let se=0;se<ee.length;se++){const W=ee[se];for(let $=0;$<W.tabs.length;$++){const G=W.tabs[$];if(W.ltype===1){if(t._lctf.coverageIndex(G.coverage,Y)!==-1&&G.pos){q(G.pos,L);break}}else if(W.ltype===2){let j=null,B=z();if(B!==-1){const ae=t._lctf.coverageIndex(G.coverage,U[B]);if(ae!==-1){if(G.fmt===1){const re=G.pairsets[ae];for(let de=0;de<re.length;de++)re[de].gid2===Y&&(j=re[de])}else if(G.fmt===2){const re=t.U._getGlyphClass(U[B],G.classDef1),de=t.U._getGlyphClass(Y,G.classDef2);j=G.matrix[re][de]}if(j){j.val1&&q(j.val1,B),j.val2&&q(j.val2,L);break}}}}else if(W.ltype===4){const j=t._lctf.coverageIndex(G.markCoverage,Y);if(j!==-1){const B=z(O),ae=B===-1?-1:t._lctf.coverageIndex(G.baseCoverage,U[B]);if(ae!==-1){const re=G.markArray[j],de=G.baseArray[ae][re.markClass];I[L*3]=de.x-re.x+I[B*3]-I[B*3+2],I[L*3+1]=de.y-re.y+I[B*3+1];break}}}else if(W.ltype===6){const j=t._lctf.coverageIndex(G.mark1Coverage,Y);if(j!==-1){const B=z();if(B!==-1){const ae=U[B];if(N(k,ae)===3){const re=t._lctf.coverageIndex(G.mark2Coverage,ae);if(re!==-1){const de=G.mark1Array[j],ce=G.mark2Array[re][de.markClass];I[L*3]=ce.x-de.x+I[B*3]-I[B*3+2],I[L*3+1]=ce.y-de.y+I[B*3+1];break}}}}}}}}else if(k.kern&&!k.cff){const ee=z();if(ee!==-1){const se=k.kern.glyph1.indexOf(U[ee]);if(se!==-1){const W=k.kern.rval[se].glyph2.indexOf(Y);W!==-1&&(I[ee*3+2]+=k.kern.rval[se].vals[W])}}}}return I;function z(Y){for(let X=L-1;X>=0;X--)if(U[X]!==-1&&(!Y||Y(U[X])))return X;return-1}function O(Y){return N(k,Y)===1}function q(Y,X){for(let ee=0;ee<3;ee++)I[X*3+ee]+=Y[ee]||0}}function N(k,U){const I=k.GDEF&&k.GDEF.glyphClassDef;return I?t.U._getGlyphClass(U,I):0}function P(...k){for(let U=0;U<k.length;U++)if(typeof k[U]=="number")return k[U]}function R(k){const U=Object.create(null),I=k["OS/2"],L=k.hhea,z=k.head.unitsPerEm,O=P(I&&I.sTypoAscender,L&&L.ascender,z),q={unitsPerEm:z,ascender:O,descender:P(I&&I.sTypoDescender,L&&L.descender,0),capHeight:P(I&&I.sCapHeight,O),xHeight:P(I&&I.sxHeight,O),lineGap:P(I&&I.sTypoLineGap,L&&L.lineGap),supportsCodePoint(Y){return t.U.codeToGlyph(k,Y)>0},forEachGlyph(Y,X,ee,se){let W=0;const $=1/q.unitsPerEm*X,G=M(k,Y);let j=0;const B=C(k,G);return G.forEach((ae,re)=>{if(ae!==-1){let de=U[ae];if(!de){const{cmds:ce,crds:ie}=t.U.glyphToPath(k,ae);let le="",fe=0;for(let oe=0,tt=ce.length;oe<tt;oe++){const ke=n[ce[oe]];le+=ce[oe];for(let st=1;st<=ke;st++)le+=(st>1?",":"")+ie[fe++]}let Ne,Se,Z,xe;if(ie.length){Ne=Se=1/0,Z=xe=-1/0;for(let oe=0,tt=ie.length;oe<tt;oe+=2){let ke=ie[oe],st=ie[oe+1];ke<Ne&&(Ne=ke),st<Se&&(Se=st),ke>Z&&(Z=ke),st>xe&&(xe=st)}}else Ne=Z=Se=xe=0;de=U[ae]={index:ae,advanceWidth:k.hmtx.aWidth[ae],xMin:Ne,yMin:Se,xMax:Z,yMax:xe,path:le}}se.call(null,de,W+B[re*3]*$,B[re*3+1]*$,j),W+=B[re*3+2]*$,ee&&(W+=ee*X)}j+=Y.codePointAt(j)>65535?2:1}),W}};return q}return function(U){const I=new Uint8Array(U,0,4),L=t._bin.readASCII(I,0,4);if(L==="wOFF")U=e(U);else if(L==="wOF2")throw new Error("woff2 fonts not supported");return R(t.parse(U)[0])}}const KPe=dv({name:"Typr Font Parser",dependencies:[YPe,qPe,XPe],init(t,e,n){const r=t(),i=e();return n(r,i)}});function ZPe(){return(function(t){var e=function(){this.buckets=new Map};e.prototype.add=function(C){var N=C>>5;this.buckets.set(N,(this.buckets.get(N)||0)|1<<(31&C))},e.prototype.has=function(C){var N=this.buckets.get(C>>5);return N!==void 0&&(N&1<<(31&C))!=0},e.prototype.serialize=function(){var C=[];return this.buckets.forEach((function(N,P){C.push((+P).toString(36)+":"+N.toString(36))})),C.join(",")},e.prototype.deserialize=function(C){var N=this;this.buckets.clear(),C.split(",").forEach((function(P){var R=P.split(":");N.buckets.set(parseInt(R[0],36),parseInt(R[1],36))}))};var n=Math.pow(2,8),r=n-1,i=~r;function a(C){var N=(function(R){return R&i})(C).toString(16),P=(function(R){return(R&i)+n-1})(C).toString(16);return"codepoint-index/plane"+(C>>16)+"/"+N+"-"+P+".json"}function s(C,N){var P=C&r,R=N.codePointAt(P/6|0);return((R=(R||48)-48)&1<<P%6)!=0}function o(C,N){var P;(P=C,P.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map((function(R){return R.split("-").map((function(k){return parseInt(k.trim(),16)}))}))).forEach((function(R){var k=R[0],U=R[1];U===void 0&&(U=k),N(k,U)}))}function l(C,N){o(C,(function(P,R){for(var k=P;k<=R;k++)N(k)}))}var u={},d={},f=new WeakMap,p="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function m(C){var N=f.get(C);return N||(N=new e,l(C.ranges,(function(P){return N.add(P)})),f.set(C,N)),N}var y,_=new Map;function v(C,N,P){return C[N]?N:C[P]?P:(function(R){for(var k in R)return k})(C)}function w(C,N){var P=N;if(!C.includes(P)){P=1/0;for(var R=0;R<C.length;R++)Math.abs(C[R]-N)<Math.abs(P-N)&&(P=C[R])}return P}function M(C){return y||(y=new Set,l("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",(function(N){y.add(N)}))),y.has(C)}return t.CodePointSet=e,t.clearCache=function(){u={},d={}},t.getFontsForString=function(C,N){N===void 0&&(N={});var P,R=N.lang;R===void 0&&(R=new RegExp("\\p{Script=Hangul}","u").test(P=C)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(P)?"ja":"en");var k=N.category;k===void 0&&(k="sans-serif");var U=N.style;U===void 0&&(U="normal");var I=N.weight;I===void 0&&(I=400);var L=(N.dataUrl||p).replace(/\/$/g,""),z=new Map,O=new Uint8Array(C.length),q={},Y={},X=new Array(C.length),ee=new Map,se=!1;function W(j){var B=_.get(j);return B||(B=fetch(L+"/"+j).then((function(ae){if(!ae.ok)throw new Error(ae.statusText);return ae.json().then((function(re){if(!Array.isArray(re)||re[0]!==1)throw new Error("Incorrect schema version; need 1, got "+re[0]);return re[1]}))})).catch((function(ae){if(L!==p)return se||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+L+'", trying default CDN. '+ae.message),se=!0),L=p,_.delete(j),W(j);throw ae})),_.set(j,B)),B}for(var $=function(j){var B=C.codePointAt(j),ae=a(B);X[j]=ae,u[ae]||ee.has(ae)||ee.set(ae,W(ae).then((function(re){u[ae]=re}))),B>65535&&(j++,G=j)},G=0;G<C.length;G++)$(G);return Promise.all(ee.values()).then((function(){ee.clear();for(var j=function(ae){var re=C.codePointAt(ae),de=null,ce=u[X[ae]],ie=void 0;for(var le in ce){var fe=Y[le];if(fe===void 0&&(fe=Y[le]=new RegExp(le).test(R||"en")),fe){for(var Ne in ie=le,ce[le])if(s(re,ce[le][Ne])){de=Ne;break}break}}if(!de){e:for(var Se in ce)if(Se!==ie){for(var Z in ce[Se])if(s(re,ce[Se][Z])){de=Z;break e}}}de||(console.debug("No font coverage for U+"+re.toString(16)),de="latin"),X[ae]=de,d[de]||ee.has(de)||ee.set(de,W("font-meta/"+de+".json").then((function(xe){d[de]=xe}))),re>65535&&(ae++,B=ae)},B=0;B<C.length;B++)j(B);return Promise.all(ee.values())})).then((function(){for(var j,B=null,ae=0;ae<C.length;ae++){var re=C.codePointAt(ae);if(B&&(M(re)||m(B).has(re)))O[ae]=O[ae-1];else{B=d[X[ae]];var de=q[B.id];if(!de){var ce=B.typeforms,ie=v(ce,k,"sans-serif"),le=v(ce[ie],U,"normal"),fe=w((j=ce[ie])===null||j===void 0?void 0:j[le],I);de=q[B.id]=L+"/font-files/"+B.id+"/"+ie+"."+le+"."+fe+".woff"}var Ne=z.get(de);Ne==null&&(Ne=z.size,z.set(de,Ne)),O[ae]=Ne}re>65535&&(ae++,O[ae]=O[ae-1])}return{fontUrls:Array.from(z.keys()),chars:O}}))},Object.defineProperty(t,"__esModule",{value:!0}),t})({})}function QPe(t,e){const n=Object.create(null),r=Object.create(null);function i(s,o){const l=u=>{console.error(`Failure loading font ${s}`,u)};try{const u=new XMLHttpRequest;u.open("get",s,!0),u.responseType="arraybuffer",u.onload=function(){if(u.status>=400)l(new Error(u.statusText));else if(u.status>0)try{const d=t(u.response);d.src=s,o(d)}catch(d){l(d)}},u.onerror=l,u.send()}catch(u){l(u)}}function a(s,o){let l=n[s];l?o(l):r[s]?r[s].push(o):(r[s]=[o],i(s,u=>{u.src=s,n[s]=u,r[s].forEach(d=>d(u)),delete r[s]}))}return function(s,o,{lang:l,fonts:u=[],style:d="normal",weight:f="normal",unicodeFontsURL:p}={}){const m=new Uint8Array(s.length),y=[];s.length||M();const _=new Map,v=[];if(d!=="italic"&&(d="normal"),typeof f!="number"&&(f=f==="bold"?700:400),u&&!Array.isArray(u)&&(u=[u]),u=u.slice().filter(N=>!N.lang||N.lang.test(l)).reverse(),u.length){let k=0;(function U(I=0){for(let L=I,z=s.length;L<z;L++){const O=s.codePointAt(L);if(k===1&&y[m[L-1]].supportsCodePoint(O)||L>0&&/\s/.test(s[L]))m[L]=m[L-1],k===2&&(v[v.length-1][1]=L);else for(let q=m[L],Y=u.length;q<=Y;q++)if(q===Y){const X=k===2?v[v.length-1]:v[v.length]=[L,L];X[1]=L,k=2}else{m[L]=q;const{src:X,unicodeRange:ee}=u[q];if(!ee||C(O,ee)){const se=n[X];if(!se){a(X,()=>{U(L)});return}if(se.supportsCodePoint(O)){let W=_.get(se);typeof W!="number"&&(W=y.length,y.push(se),_.set(se,W)),m[L]=W,k=1;break}}}O>65535&&L+1<z&&(m[L+1]=m[L],L++,k===2&&(v[v.length-1][1]=L))}w()})()}else v.push([0,s.length-1]),w();function w(){if(v.length){const N=v.map(P=>s.substring(P[0],P[1]+1)).join(`
`);e.getFontsForString(N,{lang:l||void 0,style:d,weight:f,dataUrl:p}).then(({fontUrls:P,chars:R})=>{const k=y.length;let U=0;v.forEach(L=>{for(let z=0,O=L[1]-L[0];z<=O;z++)m[L[0]+z]=R[U++]+k;U++});let I=0;P.forEach((L,z)=>{a(L,O=>{y[z+k]=O,++I===P.length&&M()})})})}else M()}function M(){o({chars:m,fonts:y})}function C(N,P){for(let R=0;R<P.length;R++){const[k,U=k]=P[R];if(k<=N&&N<=U)return!0}return!1}}}const JPe=dv({name:"FontResolver",dependencies:[QPe,KPe,ZPe],init(t,e,n){return t(e,n())}});function eRe(t,e){const r=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,i="[^\\S\\u00A0]",a=new RegExp(`${i}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function s({text:y,lang:_,fonts:v,style:w,weight:M,preResolvedFonts:C,unicodeFontsURL:N},P){const R=({chars:k,fonts:U})=>{let I,L;const z=[];for(let O=0;O<k.length;O++)k[O]!==L?(L=k[O],z.push(I={start:O,end:O,fontObj:U[k[O]]})):I.end=O;P(z)};C?R(C):t(y,R,{lang:_,fonts:v,style:w,weight:M,unicodeFontsURL:N})}function o({text:y="",font:_,lang:v,sdfGlyphSize:w=64,fontSize:M=400,fontWeight:C=1,fontStyle:N="normal",letterSpacing:P=0,lineHeight:R="normal",maxWidth:k=1/0,direction:U,textAlign:I="left",textIndent:L=0,whiteSpace:z="normal",overflowWrap:O="normal",anchorX:q=0,anchorY:Y=0,metricsOnly:X=!1,unicodeFontsURL:ee,preResolvedFonts:se=null,includeCaretPositions:W=!1,chunkedBoundsSize:$=8192,colorRanges:G=null},j){const B=f(),ae={fontLoad:0,typesetting:0};y.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),y=y.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),M=+M,P=+P,k=+k,R=R||"normal",L=+L,s({text:y,lang:v,style:N,weight:C,fonts:typeof _=="string"?[{src:_}]:_,unicodeFontsURL:ee,preResolvedFonts:se},re=>{ae.fontLoad=f()-B;const de=isFinite(k);let ce=null,ie=null,le=null,fe=null,Ne=null,Se=null,Z=null,xe=null,oe=0,tt=0,ke=z!=="nowrap";const st=new Map,Ce=f();let ct=L,$e=0,J=new p;const Q=[J];re.forEach(it=>{const{fontObj:nt}=it,{ascender:ot,descender:xt,unitsPerEm:rt,lineGap:be,capHeight:Je,xHeight:Qe}=nt;let Oe=st.get(nt);if(!Oe){const Be=M/rt,Pe=R==="normal"?(ot-xt+be)*Be:R*M,Ke=(Pe-(ot-xt)*Be)/2,te=Math.min(Pe,(ot-xt)*Be),Le=(ot+xt)/2*Be+te/2;Oe={index:st.size,src:nt.src,fontObj:nt,fontSizeMult:Be,unitsPerEm:rt,ascender:ot*Be,descender:xt*Be,capHeight:Je*Be,xHeight:Qe*Be,lineHeight:Pe,baseline:-Ke-ot*Be,caretTop:Le,caretBottom:Le-te},st.set(nt,Oe)}const{fontSizeMult:pe}=Oe,je=y.slice(it.start,it.end+1);let ut,ge;nt.forEachGlyph(je,M,P,(Be,Pe,Ke,te)=>{Pe+=$e,te+=it.start,ut=Pe,ge=Be;const Le=y.charAt(te),dt=Be.advanceWidth*pe,kt=J.count;let Mt;if("isEmpty"in Be||(Be.isWhitespace=!!Le&&new RegExp(i).test(Le),Be.canBreakAfter=!!Le&&a.test(Le),Be.isEmpty=Be.xMin===Be.xMax||Be.yMin===Be.yMax||r.test(Le)),!Be.isWhitespace&&!Be.isEmpty&&tt++,ke&&de&&!Be.isWhitespace&&Pe+dt+ct>k&&kt){if(J.glyphAt(kt-1).glyphObj.canBreakAfter)Mt=new p,ct=-Pe;else for(let mn=kt;mn--;)if(mn===0&&O==="break-word"){Mt=new p,ct=-Pe;break}else if(J.glyphAt(mn).glyphObj.canBreakAfter){Mt=J.splitAt(mn+1);const Mn=Mt.glyphAt(0).x;ct-=Mn;for(let ar=Mt.count;ar--;)Mt.glyphAt(ar).x-=Mn;break}Mt&&(J.isSoftWrapped=!0,J=Mt,Q.push(J),oe=k)}let Pt=J.glyphAt(J.count);Pt.glyphObj=Be,Pt.x=Pe+ct,Pt.y=Ke,Pt.width=dt,Pt.charIndex=te,Pt.fontData=Oe,Le===`
`&&(J=new p,Q.push(J),ct=-(Pe+dt+P*M)+L)}),$e=ut+ge.advanceWidth*pe+P*M});let ye=0;Q.forEach(it=>{let nt=!0;for(let ot=it.count;ot--;){const xt=it.glyphAt(ot);nt&&!xt.glyphObj.isWhitespace&&(it.width=xt.x+xt.width,it.width>oe&&(oe=it.width),nt=!1);let{lineHeight:rt,capHeight:be,xHeight:Je,baseline:Qe}=xt.fontData;rt>it.lineHeight&&(it.lineHeight=rt);const Oe=Qe-it.baseline;Oe<0&&(it.baseline+=Oe,it.cap+=Oe,it.ex+=Oe),it.cap=Math.max(it.cap,it.baseline+be),it.ex=Math.max(it.ex,it.baseline+Je)}it.baseline-=ye,it.cap-=ye,it.ex-=ye,ye+=it.lineHeight});let we=0,De=0;if(q&&(typeof q=="number"?we=-q:typeof q=="string"&&(we=-oe*(q==="left"?0:q==="center"?.5:q==="right"?1:u(q)))),Y&&(typeof Y=="number"?De=-Y:typeof Y=="string"&&(De=Y==="top"?0:Y==="top-baseline"?-Q[0].baseline:Y==="top-cap"?-Q[0].cap:Y==="top-ex"?-Q[0].ex:Y==="middle"?ye/2:Y==="bottom"?ye:Y==="bottom-baseline"?-Q[Q.length-1].baseline:u(Y)*ye)),!X){const it=e.getEmbeddingLevels(y,U);ce=new Uint16Array(tt),ie=new Uint8Array(tt),le=new Float32Array(tt*2),fe={},Z=[1/0,1/0,-1/0,-1/0],xe=[],W&&(Se=new Float32Array(y.length*4)),G&&(Ne=new Uint8Array(tt*3));let nt=0,ot=-1,xt=-1,rt,be;if(Q.forEach((Je,Qe)=>{let{count:Oe,width:pe}=Je;if(Oe>0){let je=0;for(let te=Oe;te--&&Je.glyphAt(te).glyphObj.isWhitespace;)je++;let ut=0,ge=0;if(I==="center")ut=(oe-pe)/2;else if(I==="right")ut=oe-pe;else if(I==="justify"&&Je.isSoftWrapped){let te=0;for(let Le=Oe-je;Le--;)Je.glyphAt(Le).glyphObj.isWhitespace&&te++;ge=(oe-pe)/te}if(ge||ut){let te=0;for(let Le=0;Le<Oe;Le++){let dt=Je.glyphAt(Le);const kt=dt.glyphObj;dt.x+=ut+te,ge!==0&&kt.isWhitespace&&Le<Oe-je&&(te+=ge,dt.width+=ge)}}const Be=e.getReorderSegments(y,it,Je.glyphAt(0).charIndex,Je.glyphAt(Je.count-1).charIndex);for(let te=0;te<Be.length;te++){const[Le,dt]=Be[te];let kt=1/0,Mt=-1/0;for(let Pt=0;Pt<Oe;Pt++)if(Je.glyphAt(Pt).charIndex>=Le){let mn=Pt,Mn=Pt;for(;Mn<Oe;Mn++){let ar=Je.glyphAt(Mn);if(ar.charIndex>dt)break;Mn<Oe-je&&(kt=Math.min(kt,ar.x),Mt=Math.max(Mt,ar.x+ar.width))}for(let ar=mn;ar<Mn;ar++){const Wr=Je.glyphAt(ar);Wr.x=Mt-(Wr.x+Wr.width-kt)}break}}let Pe;const Ke=te=>Pe=te;for(let te=0;te<Oe;te++){const Le=Je.glyphAt(te);Pe=Le.glyphObj;const dt=Pe.index,kt=it.levels[Le.charIndex]&1;if(kt){const Mt=e.getMirroredCharacter(y[Le.charIndex]);Mt&&Le.fontData.fontObj.forEachGlyph(Mt,0,0,Ke)}if(W){const{charIndex:Mt,fontData:Pt}=Le,mn=Le.x+we,Mn=Le.x+Le.width+we;Se[Mt*4]=kt?Mn:mn,Se[Mt*4+1]=kt?mn:Mn,Se[Mt*4+2]=Je.baseline+Pt.caretBottom+De,Se[Mt*4+3]=Je.baseline+Pt.caretTop+De;const ar=Mt-ot;ar>1&&d(Se,ot,ar),ot=Mt}if(G){const{charIndex:Mt}=Le;for(;Mt>xt;)xt++,G.hasOwnProperty(xt)&&(be=G[xt])}if(!Pe.isWhitespace&&!Pe.isEmpty){const Mt=nt++,{fontSizeMult:Pt,src:mn,index:Mn}=Le.fontData,ar=fe[mn]||(fe[mn]={});ar[dt]||(ar[dt]={path:Pe.path,pathBounds:[Pe.xMin,Pe.yMin,Pe.xMax,Pe.yMax]});const Wr=Le.x+we,ii=Le.y+Je.baseline+De;le[Mt*2]=Wr,le[Mt*2+1]=ii;const Or=Wr+Pe.xMin*Pt,Qi=ii+Pe.yMin*Pt,ai=Wr+Pe.xMax*Pt,yi=ii+Pe.yMax*Pt;Or<Z[0]&&(Z[0]=Or),Qi<Z[1]&&(Z[1]=Qi),ai>Z[2]&&(Z[2]=ai),yi>Z[3]&&(Z[3]=yi),Mt%$===0&&(rt={start:Mt,end:Mt,rect:[1/0,1/0,-1/0,-1/0]},xe.push(rt)),rt.end++;const Gr=rt.rect;if(Or<Gr[0]&&(Gr[0]=Or),Qi<Gr[1]&&(Gr[1]=Qi),ai>Gr[2]&&(Gr[2]=ai),yi>Gr[3]&&(Gr[3]=yi),ce[Mt]=dt,ie[Mt]=Mn,G){const ja=Mt*3;Ne[ja]=be>>16&255,Ne[ja+1]=be>>8&255,Ne[ja+2]=be&255}}}}}),Se){const Je=y.length-ot;Je>1&&d(Se,ot,Je)}}const Ue=[];st.forEach(({index:it,src:nt,unitsPerEm:ot,ascender:xt,descender:rt,lineHeight:be,capHeight:Je,xHeight:Qe})=>{Ue[it]={src:nt,unitsPerEm:ot,ascender:xt,descender:rt,lineHeight:be,capHeight:Je,xHeight:Qe}}),ae.typesetting=f()-Ce,j({glyphIds:ce,glyphFontIndices:ie,glyphPositions:le,glyphData:fe,fontData:Ue,caretPositions:Se,glyphColors:Ne,chunkedBounds:xe,fontSize:M,topBaseline:De+Q[0].baseline,blockBounds:[we,De-ye,we+oe,De],visibleBounds:Z,timings:ae})})}function l(y,_){o({...y,metricsOnly:!0},v=>{const[w,M,C,N]=v.blockBounds;_({width:C-w,height:N-M})})}function u(y){let _=y.match(/^([\d.]+)%$/),v=_?parseFloat(_[1]):NaN;return isNaN(v)?0:v/100}function d(y,_,v){const w=y[_*4],M=y[_*4+1],C=y[_*4+2],N=y[_*4+3],P=(M-w)/v;for(let R=0;R<v;R++){const k=(_+R)*4;y[k]=w+P*R,y[k+1]=w+P*(R+1),y[k+2]=C,y[k+3]=N}}function f(){return(self.performance||Date).now()}function p(){this.data=[]}const m=["glyphObj","x","y","width","charIndex","fontData"];return p.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/m.length)},glyphAt(y){let _=p.flyweight;return _.data=this.data,_.index=y,_},splitAt(y){let _=new p;return _.data=this.data.splice(y*m.length),_}},p.flyweight=m.reduce((y,_,v,w)=>(Object.defineProperty(y,_,{get(){return this.data[this.index*m.length+v]},set(M){this.data[this.index*m.length+v]=M}}),y),{data:null,index:0}),{typeset:o,measure:l}}const cp=()=>(self.performance||Date).now(),xE=E$();let _B;function tRe(t,e,n,r,i,a,s,o,l,u,d=!0){return d?rRe(t,e,n,r,i,a,s,o,l,u).then(null,f=>(_B||(console.warn("WebGL SDF generation failed, falling back to JS",f),_B=!0),SB(t,e,n,r,i,a,s,o,l,u))):SB(t,e,n,r,i,a,s,o,l,u)}const Nw=[],nRe=5;let nP=0;function C$(){const t=cp();for(;Nw.length&&cp()-t<nRe;)Nw.shift()();nP=Nw.length?setTimeout(C$,0):0}const rRe=(...t)=>new Promise((e,n)=>{Nw.push(()=>{const r=cp();try{xE.webgl.generateIntoCanvas(...t),e({timing:cp()-r})}catch(i){n(i)}}),nP||(nP=setTimeout(C$,0))}),iRe=4,aRe=2e3,wB={};let sRe=0;function SB(t,e,n,r,i,a,s,o,l,u){const d="TroikaTextSDFGenerator_JS_"+sRe++%iRe;let f=wB[d];return f||(f=wB[d]={workerModule:dv({name:d,workerId:d,dependencies:[E$,cp],init(p,m){const y=p().javascript.generate;return function(..._){const v=m();return{textureData:y(..._),timing:m()-v}}},getTransferables(p){return[p.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(t,e,n,r,i,a).then(({textureData:p,timing:m})=>{const y=cp(),_=new Uint8Array(p.length*4);for(let v=0;v<p.length;v++)_[v*4+u]=p[v];return xE.webglUtils.renderImageData(s,_,o,l,t,e,1<<3-u),m+=cp()-y,--f.requests===0&&(f.idleTimer=setTimeout(()=>{LPe(d)},aRe)),{timing:m}})}function oRe(t){t._warm||(xE.webgl.isSupported(t),t._warm=!0)}const lRe=xE.webglUtils.resizeWebGLCanvasWithoutClearing,V0={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},cRe=new Ct;function eg(){return(self.performance||Date).now()}const EB=Object.create(null);function N$(t,e){t=fRe({},t);const n=eg(),r=[];if(t.font&&r.push({label:"user",src:hRe(t.font)}),t.font=r,t.text=""+t.text,t.sdfGlyphSize=t.sdfGlyphSize||V0.sdfGlyphSize,t.unicodeFontsURL=t.unicodeFontsURL||V0.unicodeFontsURL,t.colorRanges!=null){let p={};for(let m in t.colorRanges)if(t.colorRanges.hasOwnProperty(m)){let y=t.colorRanges[m];typeof y!="number"&&(y=cRe.set(y).getHex()),p[m]=y}t.colorRanges=p}Object.freeze(t);const{textureWidth:i,sdfExponent:a}=V0,{sdfGlyphSize:s}=t,o=i/s*4;let l=EB[s];if(!l){const p=document.createElement("canvas");p.width=i,p.height=s*256/o,l=EB[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:p,sdfTexture:new Hr(p,void 0,void 0,void 0,gi,gi),contextLost:!1,glyphsByFont:new Map},l.sdfTexture.generateMipmaps=!1,uRe(l)}const{sdfTexture:u,sdfCanvas:d}=l;P$(t).then(p=>{const{glyphIds:m,glyphFontIndices:y,fontData:_,glyphPositions:v,fontSize:w,timings:M}=p,C=[],N=new Float32Array(m.length*4);let P=0,R=0;const k=eg(),U=_.map(q=>{let Y=l.glyphsByFont.get(q.src);return Y||l.glyphsByFont.set(q.src,Y=new Map),Y});m.forEach((q,Y)=>{const X=y[Y],{src:ee,unitsPerEm:se}=_[X];let W=U[X].get(q);if(!W){const{path:ae,pathBounds:re}=p.glyphData[ee][q],de=Math.max(re[2]-re[0],re[3]-re[1])/s*(V0.sdfMargin*s+.5),ce=l.glyphCount++,ie=[re[0]-de,re[1]-de,re[2]+de,re[3]+de];U[X].set(q,W={path:ae,atlasIndex:ce,sdfViewBox:ie}),C.push(W)}const{sdfViewBox:$}=W,G=v[R++],j=v[R++],B=w/se;N[P++]=G+$[0]*B,N[P++]=j+$[1]*B,N[P++]=G+$[2]*B,N[P++]=j+$[3]*B,m[Y]=W.atlasIndex}),M.quads=(M.quads||0)+(eg()-k);const I=eg();M.sdf={};const L=d.height,z=Math.ceil(l.glyphCount/o),O=Math.pow(2,Math.ceil(Math.log2(z*s)));O>L&&(console.info(`Increasing SDF texture size ${L}->${O}`),lRe(d,i,O),u.dispose()),Promise.all(C.map(q=>A$(q,l,t.gpuAccelerateSDF).then(({timing:Y})=>{M.sdf[q.atlasIndex]=Y}))).then(()=>{C.length&&!l.contextLost&&(T$(l),u.needsUpdate=!0),M.sdfTotal=eg()-I,M.total=eg()-n,e(Object.freeze({parameters:t,sdfTexture:u,sdfGlyphSize:s,sdfExponent:a,glyphBounds:N,glyphAtlasIndices:m,glyphColors:p.glyphColors,caretPositions:p.caretPositions,chunkedBounds:p.chunkedBounds,ascender:p.ascender,descender:p.descender,lineHeight:p.lineHeight,capHeight:p.capHeight,xHeight:p.xHeight,topBaseline:p.topBaseline,blockBounds:p.blockBounds,visibleBounds:p.visibleBounds,timings:p.timings}))})}),Promise.resolve().then(()=>{l.contextLost||oRe(d)})}function A$({path:t,atlasIndex:e,sdfViewBox:n},{sdfGlyphSize:r,sdfCanvas:i,contextLost:a},s){if(a)return Promise.resolve({timing:-1});const{textureWidth:o,sdfExponent:l}=V0,u=Math.max(n[2]-n[0],n[3]-n[1]),d=Math.floor(e/4),f=d%(o/r)*r,p=Math.floor(d/(o/r))*r,m=e%4;return tRe(r,r,t,n,u,l,i,f,p,m,s)}function uRe(t){const e=t.sdfCanvas;e.addEventListener("webglcontextlost",n=>{console.log("Context Lost",n),n.preventDefault(),t.contextLost=!0}),e.addEventListener("webglcontextrestored",n=>{console.log("Context Restored",n),t.contextLost=!1;const r=[];t.glyphsByFont.forEach(i=>{i.forEach(a=>{r.push(A$(a,t,!0))})}),Promise.all(r).then(()=>{T$(t),t.sdfTexture.needsUpdate=!0})})}function dRe({font:t,characters:e,sdfGlyphSize:n},r){let i=Array.isArray(e)?e.join(`
`):""+e;N$({font:t,sdfGlyphSize:n,text:i},r)}function fRe(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}let nw;function hRe(t){return nw||(nw=typeof document>"u"?{}:document.createElement("a")),nw.href=t,nw.href}function T$(t){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:n}=t,{width:r,height:i}=e,a=t.sdfCanvas.getContext("webgl");let s=n.image.data;(!s||s.length!==r*i*4)&&(s=new Uint8Array(r*i*4),n.image={width:r,height:i,data:s},n.flipY=!1,n.isDataTexture=!0),a.readPixels(0,0,r,i,a.RGBA,a.UNSIGNED_BYTE,s)}}const pRe=dv({name:"Typesetter",dependencies:[eRe,JPe,UPe],init(t,e,n){return t(e,n())}}),P$=dv({name:"Typesetter",dependencies:[pRe],init(t){return function(e){return new Promise(n=>{t.typeset(e,n)})}},getTransferables(t){const e=[];for(let n in t)t[n]&&t[n].buffer&&e.push(t[n].buffer);return e}});P$.onMainThread;const MB={};function mRe(t){let e=MB[t];return e||(e=MB[t]=new Sd(1,1,t,t).translate(.5,.5,0)),e}const gRe="aTroikaGlyphBounds",CB="aTroikaGlyphIndex",vRe="aTroikaGlyphColor";class yRe extends yE{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Gi,this.boundingBox=new ji}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let n=mRe(e);["position","normal","uv"].forEach(r=>{this.attributes[r]=n.attributes[r].clone()}),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,n,r,i,a){this.updateAttributeData(gRe,e,4),this.updateAttributeData(CB,n,1),this.updateAttributeData(vRe,a,3),this._blockBounds=r,this._chunkedBounds=i,this.instanceCount=n.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:n,boundingBox:r}=this;if(n){const{PI:i,floor:a,min:s,max:o,sin:l,cos:u}=Math,d=i/2,f=i*2,p=Math.abs(n),m=e[0]/p,y=e[2]/p,_=a((m+d)/f)!==a((y+d)/f)?-p:s(l(m)*p,l(y)*p),v=a((m-d)/f)!==a((y-d)/f)?p:o(l(m)*p,l(y)*p),w=a((m+i)/f)!==a((y+i)/f)?p*2:o(p-u(m)*p,p-u(y)*p);r.min.set(_,e[1],n<0?-w:0),r.max.set(v,e[3],n<0?0:w)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let n=this.getAttribute(CB).count,r=this._chunkedBounds;if(r)for(let i=r.length;i--;){n=r[i].end;let a=r[i].rect;if(a[1]<e.w&&a[3]>e.y&&a[0]<e.z&&a[2]>e.x)break}this.instanceCount=n}updateAttributeData(e,n,r){const i=this.getAttribute(e);n?i&&i.array.length===n.length?(i.array.set(n),i.needsUpdate=!0):(this.setAttribute(e,new Cp(n,r)),delete this._maxInstanceCount,this.dispose()):i&&this.deleteAttribute(e)}}const xRe=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,bRe=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,_Re=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,wRe=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function SRe(t){const e=tP(t,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new lt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Sn(0,0,0,0)},uTroikaClipRect:{value:new Sn(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new lt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Ct},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new pn},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:xRe,vertexTransform:bRe,fragmentDefs:_Re,fragmentColorTransform:wRe,customRewriter({vertexShader:n,fragmentShader:r}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(r)&&(r=r.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(n)||(n=n.replace(M$,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:n,fragmentShader:r}}});return e.transparent=!0,e.forceSinglePass=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const Ek=new wd({color:16777215,side:$s,transparent:!0}),NB=8421504,AB=new rn,rw=new he,uA=new he,k0=[],ERe=new he,dA="+x+y";function TB(t){return Array.isArray(t)?t[0]:t}let R$=()=>{const t=new Rr(new Sd(1,1),Ek);return R$=()=>t,t},D$=()=>{const t=new Rr(new Sd(1,1,32,1),Ek);return D$=()=>t,t};const MRe={type:"syncstart"},CRe={type:"synccomplete"},k$=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],NRe=k$.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let j$=class extends Rr{constructor(){const e=new yRe;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=NB,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=dA,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(MRe),N$({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},n=>{this._isSyncing=!1,this._textRenderInfo=n,this.geometry.updateGlyphs(n.glyphBounds,n.glyphAtlasIndices,n.blockBounds,n.chunkedBounds,n.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(i=>i&&i())})),this.dispatchEvent(CRe),e&&e()})))}onBeforeRender(e,n,r,i,a,s){this.sync(),a.isTroikaTextMaterial&&this._prepareForRender(a)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return SRe(e)}get material(){let e=this._derivedMaterial;const n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=Ek.clone());if((!e||!e.isDerivedFrom(n))&&(e=this._derivedMaterial=this.createDerivedMaterial(n),n.addEventListener("dispose",function r(){n.removeEventListener("dispose",r),e.dispose()})),this.hasOutline()){let r=e._outlineMtl;return r||(r=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),r.isTextOutlineMaterial=!0,r.depthWrite=!1,r.map=null,e.addEventListener("dispose",function i(){e.removeEventListener("dispose",i),r.dispose()})),[r,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return TB(this.material).getDepthMaterial()}set customDepthMaterial(e){}get customDistanceMaterial(){return TB(this.material).getDistanceMaterial()}set customDistanceMaterial(e){}_prepareForRender(e){const n=e.isTextOutlineMaterial,r=e.uniforms,i=this.textRenderInfo;if(i){const{sdfTexture:o,blockBounds:l}=i;r.uTroikaSDFTexture.value=o,r.uTroikaSDFTextureSize.value.set(o.image.width,o.image.height),r.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,r.uTroikaSDFExponent.value=i.sdfExponent,r.uTroikaTotalBounds.value.fromArray(l),r.uTroikaUseGlyphColors.value=!n&&!!i.glyphColors;let u=0,d=0,f=0,p,m,y,_=0,v=0;if(n){let{outlineWidth:M,outlineOffsetX:C,outlineOffsetY:N,outlineBlur:P,outlineOpacity:R}=this;u=this._parsePercent(M)||0,d=Math.max(0,this._parsePercent(P)||0),p=R,_=this._parsePercent(C)||0,v=this._parsePercent(N)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(y=this.strokeColor,r.uTroikaStrokeColor.value.set(y??NB),m=this.strokeOpacity,m==null&&(m=1)),p=this.fillOpacity;r.uTroikaEdgeOffset.value=u,r.uTroikaPositionOffset.value.set(_,v),r.uTroikaBlurRadius.value=d,r.uTroikaStrokeWidth.value=f,r.uTroikaStrokeOpacity.value=m,r.uTroikaFillOpacity.value=p??1,r.uTroikaCurveRadius.value=this.curveRadius||0;let w=this.clipRect;if(w&&Array.isArray(w)&&w.length===4)r.uTroikaClipRect.value.fromArray(w);else{const M=(this.fontSize||.1)*100;r.uTroikaClipRect.value.set(l[0]-M,l[1]-M,l[2]+M,l[3]+M)}this.geometry.applyClipRect(r.uTroikaClipRect.value)}r.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const a=n?this.outlineColor||0:this.color;if(a==null)delete e.color;else{const o=e.hasOwnProperty("color")?e.color:e.color=new Ct;(a!==o._input||typeof a=="object")&&o.set(o._input=a)}let s=this.orientation||dA;if(s!==e._orientation){let o=r.uTroikaOrient.value;s=s.replace(/[^-+xyz]/g,"");let l=s!==dA&&s.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,u,d,f,p]=l;rw.set(0,0,0)[d]=u==="-"?1:-1,uA.set(0,0,0)[p]=f==="-"?-1:1,AB.lookAt(ERe,rw.cross(uA),uA),o.setFromMatrix4(AB)}else o.identity();e._orientation=s}}_parsePercent(e){if(typeof e=="string"){let n=e.match(/^(-?[\d.]+)%$/),r=n?parseFloat(n[1]):NaN;e=(isNaN(r)?0:r/100)*this.fontSize}return e}localPositionToTextCoords(e,n=new lt){n.copy(e);const r=this.curveRadius;return r&&(n.x=Math.atan2(e.x,Math.abs(r)-Math.abs(e.z))*Math.abs(r)),n}worldPositionToTextCoords(e,n=new lt){return rw.copy(e),this.localPositionToTextCoords(this.worldToLocal(rw),n)}raycast(e,n){const{textRenderInfo:r,curveRadius:i}=this;if(r){const a=r.blockBounds,s=i?D$():R$(),o=s.geometry,{position:l,uv:u}=o.attributes;for(let d=0;d<u.count;d++){let f=a[0]+u.getX(d)*(a[2]-a[0]);const p=a[1]+u.getY(d)*(a[3]-a[1]);let m=0;i&&(m=i-Math.cos(f/i)*i,f=Math.sin(f/i)*i),l.setXYZ(d,f,p,m)}o.boundingSphere=this.geometry.boundingSphere,o.boundingBox=this.geometry.boundingBox,s.matrixWorld=this.matrixWorld,s.material.side=this.material.side,k0.length=0,s.raycast(e,k0);for(let d=0;d<k0.length;d++)k0[d].object=this,n.push(k0[d])}}copy(e){const n=this.geometry;return super.copy(e),this.geometry=n,NRe.forEach(r=>{this[r]=e[r]}),this}clone(){return new this.constructor().copy(this)}};k$.forEach(t=>{const e="_private_"+t;Object.defineProperty(j$.prototype,t,{get(){return this[e]},set(n){n!==this[e]&&(this[e]=n,this._needsSync=!0)}})});new ji;new Ct;const ARe=E.forwardRef(({sdfGlyphSize:t=64,anchorX:e="center",anchorY:n="middle",font:r,fontSize:i=1,children:a,characters:s,onSync:o,...l},u)=>{const d=Fl(({invalidate:y})=>y),[f]=E.useState(()=>new j$),[p,m]=E.useMemo(()=>{const y=[];let _="";return E.Children.forEach(a,v=>{typeof v=="string"||typeof v=="number"?_+=v:y.push(v)}),[y,_]},[a]);return PTe(()=>new Promise(y=>dRe({font:r,characters:s},y)),["troika-text",r,s]),E.useLayoutEffect(()=>void f.sync(()=>{d(),o&&o(f)})),E.useEffect(()=>()=>f.dispose(),[f]),E.createElement("primitive",Kt({object:f,ref:u,font:r,text:m,anchorX:e,anchorY:n,fontSize:i,sdfGlyphSize:t},l),p)}),TRe=E.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:r,enableDamping:i=!0,keyEvents:a=!1,onChange:s,onStart:o,onEnd:l,...u},d)=>{const f=Fl(R=>R.invalidate),p=Fl(R=>R.camera),m=Fl(R=>R.gl),y=Fl(R=>R.events),_=Fl(R=>R.setEvents),v=Fl(R=>R.set),w=Fl(R=>R.get),M=Fl(R=>R.performance),C=e||p,N=r||y.connected||m.domElement,P=E.useMemo(()=>new APe(C),[C]);return Ix(()=>{P.enabled&&P.update()},-1),E.useEffect(()=>(a&&P.connect(a===!0?N:a),P.connect(N),()=>void P.dispose()),[a,N,n,P,f]),E.useEffect(()=>{const R=I=>{f(),n&&M.regress(),s&&s(I)},k=I=>{o&&o(I)},U=I=>{l&&l(I)};return P.addEventListener("change",R),P.addEventListener("start",k),P.addEventListener("end",U),()=>{P.removeEventListener("start",k),P.removeEventListener("end",U),P.removeEventListener("change",R)}},[s,o,l,P,f,_]),E.useEffect(()=>{if(t){const R=w().controls;return v({controls:P}),()=>v({controls:R})}},[t,P]),E.createElement("primitive",Kt({ref:d,object:P,enableDamping:i},u))}),vs=.02,Ks={background:"#050508",grid:"#1a0a0a",gridLines:"#3d1515",accent:"#ef4444",contested:"#ff0000",hqGlow:"#fbbf24",defaultRegion:"#666666"};function PRe({size:t=200}){return E.useRef(),c.jsxs("group",{children:[c.jsx("gridHelper",{args:[t,40,Ks.gridLines,Ks.grid],rotation:[0,0,0],position:[0,-50,0]}),c.jsx("gridHelper",{args:[t,80,Ks.grid,"transparent"],rotation:[0,0,0],position:[0,-50,0]})]})}function RRe({position:t,color:e,size:n=.5}){const r=E.useRef();return Ix(i=>{const a=i.clock.elapsedTime,s=1+Math.sin(a*3)*.3;r.current&&(r.current.scale.set(s,s,s),r.current.material.opacity=.3+Math.sin(a*3)*.2)}),c.jsxs("mesh",{ref:r,position:t,children:[c.jsx("ringGeometry",{args:[n+.2,n+.4,32]}),c.jsx("meshBasicMaterial",{color:Ks.contested,transparent:!0,opacity:.5,side:$s})]})}function DRe({position:t,color:e,name:n}){const r=E.useRef(),i=E.useRef();return Ix(a=>{const s=a.clock.elapsedTime;i.current&&(i.current.scale.set(1+Math.sin(s*2)*.15,1+Math.sin(s*2)*.15,1+Math.sin(s*2)*.15),i.current.material.opacity=.4+Math.sin(s*2)*.2)}),c.jsxs("group",{position:t,children:[c.jsxs("mesh",{ref:i,children:[c.jsx("sphereGeometry",{args:[.8,16,16]}),c.jsx("meshBasicMaterial",{color:Ks.hqGlow,transparent:!0,opacity:.4})]}),c.jsxs("mesh",{ref:r,children:[c.jsx("sphereGeometry",{args:[.5,16,16]}),c.jsx("meshBasicMaterial",{color:e||Ks.hqGlow})]}),c.jsxs("mesh",{position:[0,3,0],children:[c.jsx("cylinderGeometry",{args:[.05,.05,6,8]}),c.jsx("meshBasicMaterial",{color:Ks.hqGlow,transparent:!0,opacity:.3})]}),c.jsx(ARe,{position:[0,1.5,0],fontSize:.4,color:Ks.hqGlow,anchorX:"center",anchorY:"middle",outlineWidth:.02,outlineColor:"#000000",children:"HQ"})]})}function kRe({region:t,isSelected:e,onSelect:n,onHover:r,onDoubleClick:i}){const a=E.useRef(),[s,o]=E.useState(!1),l=E.useMemo(()=>t.controlling_civ?.color||t.ownership?.owner?.color||Ks.defaultRegion,[t]),u=E.useMemo(()=>.25+Math.min((t.system_count||1)*.02,.25),[t]);Ix(f=>{if(a.current){a.current.position.y=Math.sin(f.clock.elapsedTime+t.region_x)*.05;const p=s||e?1.5:1;a.current.scale.lerp(new he(p,p,p),.1)}});const d=E.useMemo(()=>[(t.region_x-2048)*vs,(t.region_y-128)*vs*2,(t.region_z-2048)*vs],[t]);return c.jsxs("group",{position:d,children:[t.contested&&c.jsx(RRe,{position:[0,0,0],color:l,size:u}),c.jsxs("mesh",{ref:a,onClick:f=>{f.stopPropagation(),n(t)},onDoubleClick:f=>{f.stopPropagation(),i&&i(t)},onPointerOver:f=>{f.stopPropagation(),o(!0),r(t),document.body.style.cursor="pointer"},onPointerOut:f=>{o(!1),r(null),document.body.style.cursor="auto"},children:[c.jsx("sphereGeometry",{args:[u,16,16]}),c.jsx("meshBasicMaterial",{color:l,transparent:!0,opacity:s||e?1:.85})]}),t.ownership&&t.ownership.percentage>50&&c.jsxs("mesh",{rotation:[Math.PI/2,0,0],children:[c.jsx("ringGeometry",{args:[u+.1,u+.15,32]}),c.jsx("meshBasicMaterial",{color:"#22d3d1",transparent:!0,opacity:.6,side:$s})]}),e&&c.jsxs("mesh",{rotation:[Math.PI/2,0,0],children:[c.jsx("ringGeometry",{args:[u+.2,u+.25,32]}),c.jsx("meshBasicMaterial",{color:"#ffffff",transparent:!0,opacity:.8,side:$s})]})]})}function jRe({regions:t,enrolledCivs:e}){const n=E.useMemo(()=>{const r=[];return e.forEach(i=>{const a=t.filter(s=>s.controlling_civ?.partner_id===i.partner_id||s.ownership?.owner?.partner_id===i.partner_id);for(let s=0;s<a.length;s++)for(let o=s+1;o<a.length;o++){const l=a[s],u=a[o],d=l.region_x-u.region_x,f=l.region_y-u.region_y,p=l.region_z-u.region_z;Math.sqrt(d*d+f*f+p*p)<500&&r.push({start:[(l.region_x-2048)*vs,(l.region_y-128)*vs*2,(l.region_z-2048)*vs],end:[(u.region_x-2048)*vs,(u.region_y-128)*vs*2,(u.region_z-2048)*vs],color:i.color||Ks.defaultRegion})}}),r},[t,e]);return c.jsx("group",{children:n.map((r,i)=>c.jsx(DPe,{points:[r.start,r.end],color:r.color,lineWidth:1,transparent:!0,opacity:.2,dashed:!0,dashSize:2,gapSize:1},i))})}function ORe({regions:t,homeRegions:e,enrolledCivs:n,selectedRegion:r,onSelectRegion:i,onHoverRegion:a,focusTarget:s,onFocusComplete:o,onRegionDrillDown:l}){const{camera:u}=Fl(),d=E.useRef();return E.useEffect(()=>{u.position.set(20,30,40),u.lookAt(0,0,0)},[u]),Ix(()=>{if(s&&d.current){const f=new he((s.region_x-2048)*vs,(s.region_y-128)*vs*2,(s.region_z-2048)*vs);d.current.target.lerp(f,.08);const p=new he(2,2,3),m=f.clone().add(p);u.position.lerp(m,.05),u.position.distanceTo(m)<.1&&o()}}),c.jsxs(c.Fragment,{children:[c.jsx("ambientLight",{intensity:.5}),c.jsx(PRe,{size:100}),c.jsxs("mesh",{position:[0,0,0],children:[c.jsx("sphereGeometry",{args:[.2,16,16]}),c.jsx("meshBasicMaterial",{color:Ks.accent,transparent:!0,opacity:.8})]}),c.jsx(jRe,{regions:t,enrolledCivs:n}),e.map((f,p)=>c.jsx(DRe,{position:[(f.region_x-2048)*vs,(f.region_y-128)*vs*2,(f.region_z-2048)*vs],color:f.civ?.color,name:f.civ?.display_name},`hq-${p}`)),t.map((f,p)=>c.jsx(kRe,{region:f,isSelected:r?.region_x===f.region_x&&r?.region_y===f.region_y&&r?.region_z===f.region_z,onSelect:i,onHover:a,onDoubleClick:l},`region-${f.region_x}-${f.region_y}-${f.region_z}`)),c.jsx(TRe,{ref:d,enablePan:!0,enableZoom:!0,enableRotate:!0,minDistance:1,maxDistance:150,maxPolarAngle:Math.PI*.85,zoomSpeed:1.2})]})}function IRe({className:t="",onSystemSelect:e}){const[n,r]=E.useState(null),[i,a]=E.useState(!0),[s,o]=E.useState(null),[l,u]=E.useState(null),[d,f]=E.useState(null),[p,m]=E.useState(null),[y,_]=E.useState(null),[v,w]=E.useState([]),[M,C]=E.useState(!1);E.useEffect(()=>{const I=async()=>{try{o(null);const z=await qe.get("/api/warroom/map-data");console.log("War Map 3D data:",z.data),r(z.data)}catch(z){console.error("Failed to fetch map data:",z),o(z.response?.data?.detail||"Failed to load map data")}finally{a(!1)}};I();const L=setInterval(I,3e4);return()=>clearInterval(L)},[]);const N=E.useCallback(async I=>{_(I),m(I),C(!0);try{const L=await qe.get("/api/systems",{params:{region_x:I.region_x,region_y:I.region_y,region_z:I.region_z,limit:100}});w(L.data.systems||L.data||[])}catch(L){console.error("Failed to fetch region systems:",L),w([])}finally{C(!1)}},[]),P=E.useCallback(()=>{_(null),w([])},[]),{regions:R,homeRegions:k,enrolledCivs:U}=E.useMemo(()=>{if(!n)return{regions:[],homeRegions:[],enrolledCivs:[]};const I={},L=n.regions||[],z=n.home_regions||[],O=n.enrolled_civs||[];return L.forEach(q=>{if(q.region_x!=null&&q.region_y!=null&&q.region_z!=null){const Y=`${q.region_x}:${q.region_y}:${q.region_z}`;I[Y]=q}}),z.forEach(q=>{if(q.region_x!=null&&q.region_y!=null&&q.region_z!=null){const Y=`${q.region_x}:${q.region_y}:${q.region_z}`;I[Y]?I[Y].is_home_region=!0:I[Y]={region_x:q.region_x,region_y:q.region_y,region_z:q.region_z,region_name:q.region_name,galaxy:q.galaxy,controlling_civ:q.civ,system_count:0,contested:!1,is_home_region:!0}}}),{regions:Object.values(I),homeRegions:z.filter(q=>q.region_x!=null),enrolledCivs:O}},[n]);return i?c.jsx("div",{className:`h-full flex items-center justify-center bg-[#050508] ${t}`,children:c.jsx("div",{className:"text-red-400 animate-pulse text-lg",children:"Initializing War Map..."})}):s?c.jsx("div",{className:`h-full flex items-center justify-center bg-[#050508] ${t}`,children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-4xl mb-4 opacity-50",children:""}),c.jsx("p",{className:"text-red-400 font-medium",children:"Map System Offline"}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:s})]})}):!n||!U.length?c.jsx("div",{className:`h-full flex items-center justify-center bg-[#050508] ${t}`,children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-4xl mb-4 opacity-50",children:""}),c.jsx("p",{className:"text-gray-500",children:"No enrolled civilizations."}),c.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Enroll civs in Admin to activate the war map."})]})}):c.jsxs("div",{className:`h-full relative bg-[#050508] ${t}`,children:[c.jsxs(bPe,{camera:{fov:60,near:.1,far:1e3},gl:{antialias:!0,alpha:!1},style:{background:Ks.background},children:[c.jsx("color",{attach:"background",args:[Ks.background]}),c.jsx("fog",{attach:"fog",args:[Ks.background,100,400]}),c.jsx(ORe,{regions:R,homeRegions:k,enrolledCivs:U,selectedRegion:l,onSelectRegion:u,onHoverRegion:f,focusTarget:p,onFocusComplete:()=>m(null),onRegionDrillDown:N})]}),c.jsxs("div",{className:"absolute top-3 left-3 text-xs text-gray-400 bg-black/50 px-3 py-2 rounded",children:[c.jsx("span",{className:"text-white font-bold",children:U.length})," Civilizations ",c.jsx("span",{className:"text-white font-bold ml-1",children:R.length})," Regions",n.active_conflict_count>0&&c.jsxs("span",{className:"text-red-400 animate-pulse ml-2",children:[" ",c.jsx("span",{className:"font-bold",children:n.active_conflict_count})," Active Conflict",n.active_conflict_count!==1?"s":""]})]}),c.jsxs("div",{className:"absolute bottom-3 left-3 text-xs text-gray-500 bg-black/50 px-3 py-2 rounded",children:[c.jsx("span",{className:"text-gray-400",children:"Controls:"})," Drag to rotate  Scroll to zoom  Right-drag to pan  Double-click to drill down"]}),c.jsxs("div",{className:"absolute top-3 right-3 bg-black/70 border border-red-500/30 rounded p-3 text-xs",children:[c.jsx("div",{className:"text-red-400 font-bold mb-2 text-sm",children:"LEGEND"}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-400 shadow-lg shadow-yellow-400/50"}),c.jsx("span",{className:"text-gray-300",children:"HQ (Headquarters)"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full bg-cyan-400 ring-1 ring-cyan-400"}),c.jsx("span",{className:"text-gray-300",children:"Owned (>50%)"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-400"}),c.jsx("span",{className:"text-gray-300",children:"Claimed"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 animate-pulse"}),c.jsx("span",{className:"text-gray-300",children:"Contested"})]})]}),c.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-700",children:[c.jsx("div",{className:"text-gray-400 mb-1",children:"Civilizations:"}),U.map(I=>c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:I.color||"#666"}}),c.jsx("span",{className:"text-gray-300 truncate max-w-[120px]",children:I.display_name})]},I.partner_id))]})]}),l&&!y&&c.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/90 border border-red-500/30 rounded p-4 max-w-xs",children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:l.controlling_civ?.color||l.ownership?.owner?.color||"#666"}}),c.jsx("span",{className:"font-bold text-white",children:l.region_name||`Region (${l.region_x}, ${l.region_y}, ${l.region_z})`})]}),c.jsx("button",{onClick:()=>u(null),className:"text-gray-400 hover:text-white",children:""})]}),c.jsxs("div",{className:"space-y-1 text-sm",children:[l.is_home_region&&c.jsx("div",{className:"inline-block bg-yellow-500/20 text-yellow-400 text-xs px-2 py-0.5 rounded mb-1",children:"HEADQUARTERS"}),l.contested&&c.jsx("div",{className:"inline-block bg-red-500/20 text-red-400 text-xs px-2 py-0.5 rounded mb-1 ml-1 animate-pulse",children:"CONTESTED"}),l.ownership?c.jsxs("p",{className:"text-gray-400",children:["Owned by: ",c.jsx("span",{style:{color:l.ownership.owner?.color},className:"font-medium",children:l.ownership.owner?.display_name}),c.jsxs("span",{className:"text-gray-500",children:[" (",l.ownership.percentage,"%)"]})]}):l.controlling_civ?c.jsxs("p",{className:"text-gray-400",children:["Controlled by: ",c.jsx("span",{style:{color:l.controlling_civ.color},className:"font-medium",children:l.controlling_civ.display_name})]}):null,l.system_count>0&&c.jsxs("p",{className:"text-gray-500",children:[l.system_count," system",l.system_count!==1?"s":""]}),c.jsxs("p",{className:"text-gray-600 text-xs mt-2",children:["Coords: (",l.region_x,", ",l.region_y,", ",l.region_z,")",l.galaxy&&`  ${l.galaxy}`]}),c.jsx("button",{onClick:()=>N(l),className:"mt-3 w-full px-3 py-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/50 rounded text-red-400 text-sm font-medium transition-colors",children:"View Systems "})]})]}),y&&c.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/95 border border-red-500/30 rounded p-4 w-80 max-h-[400px] flex flex-col",children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:y.controlling_civ?.color||y.ownership?.owner?.color||"#666"}}),c.jsx("span",{className:"font-bold text-white text-sm",children:y.region_name||"Region"})]}),c.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:["(",y.region_x,", ",y.region_y,", ",y.region_z,")"]})]}),c.jsx("button",{onClick:P,className:"text-gray-400 hover:text-white text-lg",children:""})]}),c.jsx("div",{className:"text-red-400 text-xs font-bold mb-2 uppercase tracking-wider",children:"Systems in Region"}),c.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:M?c.jsx("div",{className:"text-gray-500 text-center py-4 animate-pulse",children:"Loading systems..."}):v.length===0?c.jsx("div",{className:"text-gray-500 text-center py-4",children:"No systems found in this region"}):c.jsx("div",{className:"space-y-2",children:v.map((I,L)=>c.jsxs("button",{onClick:()=>e?.(I),className:"w-full text-left p-2 bg-gray-900/50 hover:bg-red-500/20 border border-gray-700/50 hover:border-red-500/50 rounded transition-colors group",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-white text-sm font-medium truncate group-hover:text-red-300",children:I.system_name||I.name||"Unknown System"}),I.discord_tag&&c.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded ml-2 flex-shrink-0",style:{backgroundColor:`${U.find(z=>z.discord_tag===I.discord_tag)?.color||"#666"}30`,color:U.find(z=>z.discord_tag===I.discord_tag)?.color||"#666"},children:I.discord_tag})]}),I.glyph_code&&c.jsx("p",{className:"text-gray-500 text-xs mt-0.5 font-mono",children:I.glyph_code})]},I.id||L))})}),v.length>0&&c.jsxs("div",{className:"text-gray-500 text-xs mt-2 pt-2 border-t border-gray-700",children:[v.length," system",v.length!==1?"s":"","  Click to select for war declaration"]})]}),d&&!l&&c.jsxs("div",{className:"absolute bottom-16 left-1/2 -translate-x-1/2 bg-black/90 border border-gray-700 rounded px-3 py-2 text-sm pointer-events-none",children:[c.jsx("span",{className:"text-white",children:d.region_name||`Region (${d.region_x}, ${d.region_y}, ${d.region_z})`}),(d.controlling_civ||d.ownership?.owner)&&c.jsx("span",{className:"ml-2",style:{color:d.controlling_civ?.color||d.ownership?.owner?.color},children:d.controlling_civ?.display_name||d.ownership?.owner?.display_name})]})]})}function Zo({children:t,className:e="",title:n,danger:r=!1}){return c.jsxs("div",{className:`
      rounded-lg border backdrop-blur-sm flex flex-col
      ${r?"bg-red-950/40 border-red-500/30":"bg-gray-900/80 border-red-500/20"}
      ${e}
    `,children:[n&&c.jsx("div",{className:"px-4 py-2 border-b border-red-500/20 flex-shrink-0",children:c.jsx("h3",{className:"text-sm font-bold text-red-400 uppercase tracking-wider",children:n})}),c.jsx("div",{className:"p-4 flex-1 min-h-0",children:t})]})}function LRe({conflict:t}){const e={pending:"bg-yellow-500",acknowledged:"bg-orange-500",active:"bg-red-500 animate-pulse",resolved:"bg-gray-500"};return c.jsxs("div",{className:"bg-gray-800/50 rounded border border-red-500/20 p-3 mb-2",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${e[t.status]} text-white`,children:t.status.toUpperCase()}),c.jsx("span",{className:"text-xs text-gray-400",children:new Date(t.declared_at).toLocaleDateString()})]}),c.jsxs("div",{className:"text-sm mb-1",children:[c.jsx("span",{style:{color:t.attacker_color},className:"font-bold",children:t.attacker_name}),c.jsx("span",{className:"text-gray-500 mx-2",children:"vs"}),c.jsx("span",{style:{color:t.defender_color},className:"font-bold",children:t.defender_name})]}),c.jsxs("div",{className:"text-xs text-gray-400",children:["Target: ",c.jsx("span",{className:"text-white",children:t.target_system_name})]})]})}function FRe({news:t}){return t.length?c.jsx("div",{className:"bg-gray-900/90 border-t border-red-500/30 py-2 overflow-hidden",children:c.jsx("div",{className:"flex animate-marquee whitespace-nowrap",children:t.concat(t).map((e,n)=>c.jsxs("span",{className:"mx-8 text-sm",children:[c.jsx("span",{className:"text-red-400 font-bold mr-2",children:"BREAKING:"}),c.jsx("span",{className:"text-gray-300",children:e.headline})]},n))})}):null}function URe({debrief:t,onUpdate:e,canEdit:n}){const[r,i]=E.useState(!1),[a,s]=E.useState([]);E.useEffect(()=>{s(t.objectives||[])},[t]);const o=async()=>{await e(a),i(!1)};return c.jsx(Zo,{title:"Current Mission Debrief",danger:!0,children:r?c.jsxs("div",{className:"space-y-2",children:[c.jsx("textarea",{className:"w-full bg-gray-800 border border-red-500/30 rounded p-2 text-sm text-gray-200",rows:4,value:a.join(`
`),onChange:l=>s(l.target.value.split(`
`).filter(Boolean)),placeholder:"Enter objectives, one per line..."}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:o,className:"px-3 py-1 bg-red-600 hover:bg-red-500 rounded text-sm font-bold",children:"Save"}),c.jsx("button",{onClick:()=>i(!1),className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-sm",children:"Cancel"})]})]}):c.jsxs("div",{children:[a.length>0?c.jsx("ul",{className:"space-y-1",children:a.map((l,u)=>c.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[c.jsxs("span",{className:"text-red-400 font-bold",children:[u+1,"."]}),c.jsx("span",{className:"text-gray-200",children:l})]},u))}):c.jsx("p",{className:"text-gray-500 text-sm italic",children:"No current objectives set."}),n&&c.jsx("button",{onClick:()=>i(!0),className:"mt-3 text-xs text-red-400 hover:text-red-300",children:"Edit Objectives"}),t.updated_at&&c.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:["Last updated: ",new Date(t.updated_at).toLocaleString()," by ",t.updated_by]})]})})}function BRe({leaderboard:t}){return c.jsx(Zo,{title:"Civilization Rankings",children:t.length===0?c.jsx("p",{className:"text-gray-500 text-sm",children:"No enrolled civilizations yet."}):c.jsx("div",{className:"space-y-2",children:t.map((e,n)=>c.jsxs("div",{className:"flex items-center justify-between bg-gray-800/50 rounded p-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-lg font-bold text-gray-500",children:["#",n+1]}),c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),c.jsx("span",{className:"font-medium text-gray-200",children:e.display_name})]}),c.jsxs("div",{className:"flex gap-4 text-xs",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-gray-400",children:"Controlled"}),c.jsx("div",{className:"font-bold text-green-400",children:e.systems_controlled})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-gray-400",children:"Conquered"}),c.jsx("div",{className:"font-bold text-red-400",children:e.systems_conquered})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-gray-400",children:"Win Rate"}),c.jsxs("div",{className:"font-bold text-yellow-400",children:[e.win_rate,"%"]})]})]})]},e.partner_id))})})}function zRe({stats:t}){const e={longest_defense:{label:"Longest Defense",icon:""},fastest_invasion:{label:"Fastest Invasion",icon:""},largest_battle:{label:"Largest Battle",icon:""},most_conquered:{label:"Most Conquests",icon:""}};return c.jsx(Zo,{title:"War Records",children:c.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(e).map(([n,{label:r,icon:i}])=>{const a=t[n];return c.jsxs("div",{className:"bg-gray-800/50 rounded p-2 text-center",children:[c.jsx("div",{className:"text-lg mb-1",children:i}),c.jsx("div",{className:"text-xs text-gray-400",children:r}),a?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"font-bold text-white",children:[a.value," ",a.unit]}),c.jsx("div",{className:"text-xs text-red-400",children:a.holder||"N/A"})]}):c.jsx("div",{className:"text-xs text-gray-500 italic",children:"No record yet"})]},n)})})})}function HRe({open:t,onClose:e,onSuccess:n,claims:r,isSuperAdmin:i,enrolledCivs:a,myPartnerId:s}){const[o,l]=E.useState(null),[u,d]=E.useState(""),[f,p]=E.useState(!1),[m,y]=E.useState(null);if(!t)return null;const _=i?parseInt(u):s,w=r.filter(C=>C.claimant_partner_id!==_).reduce((C,N)=>{const P=N.claimant_display_name;return C[P]||(C[P]={color:N.claimant_color,claims:[]}),C[P].claims.push(N),C},{}),M=async()=>{if(!o){y("Please select a target system");return}if(i&&!u){y("Please select an attacking civilization");return}p(!0),y(null);try{const C={target_system_id:o.system_id};i&&(C.attacker_partner_id=parseInt(u)),await qe.post("/api/warroom/conflicts",C),n(),e(),l(null),d("")}catch(C){y(C.response?.data?.detail||"Failed to declare attack")}finally{p(!1)}};return c.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-gray-900 border border-red-500/30 rounded-lg p-6 w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsx("h2",{className:"text-xl font-bold text-red-500 mb-4",children:"DECLARE WAR"}),m&&c.jsx("p",{className:"text-red-400 text-sm mb-4",children:m}),i&&c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Attacking Civilization"}),c.jsxs("select",{value:u,onChange:C=>{d(C.target.value),l(null)},className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-sm",children:[c.jsx("option",{value:"",children:"-- Select attacking civilization --"}),a.map(C=>c.jsx("option",{value:C.partner_id,children:C.display_name},C.partner_id))]})]}),o&&c.jsx("div",{className:"mb-4 bg-red-950/50 border border-red-500/50 rounded p-3",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-red-400 uppercase font-bold",children:"Target Selected"}),c.jsx("div",{className:"font-bold text-white",children:o.system_name||o.system_id}),c.jsxs("div",{className:"text-xs text-gray-400",children:["Region (",o.region_x,", ",o.region_y,", ",o.region_z,")"," ",""," ",o.galaxy]}),c.jsxs("div",{className:"text-xs mt-1",children:["Controlled by: ",c.jsx("span",{style:{color:o.claimant_color},children:o.claimant_display_name})]})]}),c.jsx("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-white text-sm",children:"Change"})]})}),!o&&c.jsxs("div",{className:"mb-4 flex-1 overflow-hidden",children:[c.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Select Target System"}),i&&!u?c.jsx("p",{className:"text-gray-500 text-sm text-center py-8",children:"Select an attacking civilization first"}):Object.keys(w).length===0?c.jsx("p",{className:"text-gray-500 text-sm text-center py-8",children:"No enemy territories to attack"}):c.jsx("div",{className:"max-h-64 overflow-y-auto space-y-3 pr-2",children:Object.entries(w).map(([C,{color:N,claims:P}])=>c.jsxs("div",{className:"bg-gray-800/50 rounded border border-gray-700",children:[c.jsxs("div",{className:"px-3 py-2 border-b border-gray-700 flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:N}}),c.jsx("span",{className:"text-sm font-medium",style:{color:N},children:C}),c.jsxs("span",{className:"text-xs text-gray-500",children:["(",P.length," systems)"]})]}),c.jsx("div",{className:"p-2 space-y-1",children:P.map(R=>c.jsxs("button",{onClick:()=>l(R),className:"w-full text-left px-3 py-2 rounded hover:bg-red-900/30 border border-transparent hover:border-red-500/50 transition-colors",children:[c.jsx("div",{className:"font-medium text-white text-sm",children:R.system_name||R.system_id}),c.jsxs("div",{className:"text-xs text-gray-400",children:["Region (",R.region_x,", ",R.region_y,", ",R.region_z,")  ",R.galaxy]})]},R.id))})]},C))})]}),c.jsxs("div",{className:"flex gap-3 pt-2 border-t border-gray-700",children:[c.jsx("button",{onClick:M,disabled:f||!o,className:"flex-1 py-2 bg-red-600 hover:bg-red-500 disabled:bg-gray-600 disabled:cursor-not-allowed rounded font-bold",children:f?"Declaring...":"DECLARE ATTACK"}),c.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded",children:"Cancel"})]})]})})}function VRe({open:t,onClose:e,onSuccess:n,isSuperAdmin:r,enrolledCivs:i}){const[a,s]=E.useState(""),[o,l]=E.useState([]),[u,d]=E.useState(null),[f,p]=E.useState(""),[m,y]=E.useState(""),[_,v]=E.useState(!1),[w,M]=E.useState(!1),[C,N]=E.useState(null),P=E.useRef(null);if(E.useEffect(()=>{if(t){if(a.length<2){l([]);return}return P.current&&clearTimeout(P.current),P.current=setTimeout(async()=>{M(!0);try{const I=await qe.get(`/api/systems/search?q=${encodeURIComponent(a)}&limit=20`);l(I.data.results||[])}catch(I){console.error("Search failed:",I),l([])}finally{M(!1)}},300),()=>{P.current&&clearTimeout(P.current)}}},[a,t]),!t)return null;const R=async()=>{if(!u){N("Please select a system to claim");return}if(r&&!f){N("Please select a civilization");return}v(!0),N(null);try{const I={system_id:u.id,notes:m};r&&(I.partner_id=parseInt(f)),await qe.post("/api/warroom/claims",I),n(),e(),s(""),d(null),p(""),y(""),l([])}catch(I){N(I.response?.data?.detail||"Failed to claim territory")}finally{v(!1)}},k=I=>{d(I),s(""),l([])},U=()=>{d(null)};return c.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-gray-900 border border-green-500/30 rounded-lg p-6 w-full max-w-lg",children:[c.jsx("h2",{className:"text-xl font-bold text-green-500 mb-4",children:"CLAIM TERRITORY"}),C&&c.jsx("p",{className:"text-red-400 text-sm mb-4",children:C}),r&&c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Claiming Civilization"}),c.jsxs("select",{value:f,onChange:I=>p(I.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-sm",children:[c.jsx("option",{value:"",children:"-- Select civilization --"}),i.map(I=>c.jsx("option",{value:I.partner_id,children:I.display_name},I.partner_id))]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Search System"}),u?c.jsx("div",{className:"bg-gray-800 border border-green-500/50 rounded p-3",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-green-400",children:u.name}),c.jsxs("div",{className:"text-xs text-gray-400",children:[u.region_name||`Region (${u.region_x}, ${u.region_y}, ${u.region_z})`," ",""," ",u.galaxy,u.discord_tag&&c.jsxs("span",{className:"ml-1 text-cyan-400",children:["(",u.discord_tag,")"]})]}),u.glyph_code&&c.jsx("div",{className:"text-xs text-gray-500 font-mono mt-1",children:u.glyph_code})]}),c.jsx("button",{onClick:U,className:"text-red-400 hover:text-red-300 text-sm",children:"Change"})]})}):c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:a,onChange:I=>s(I.target.value),placeholder:"Type system name, glyph code, or region...",className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-sm"}),w&&c.jsx("div",{className:"absolute right-3 top-2 text-gray-400 text-sm",children:"Searching..."}),o.length>0&&c.jsx("div",{className:"absolute z-10 w-full mt-1 bg-gray-800 border border-gray-600 rounded shadow-lg max-h-60 overflow-y-auto",children:o.map(I=>c.jsxs("button",{onClick:()=>k(I),className:"w-full text-left px-3 py-2 hover:bg-gray-700 border-b border-gray-700 last:border-b-0",children:[c.jsx("div",{className:"font-medium text-white",children:I.name}),c.jsxs("div",{className:"text-xs text-gray-400",children:[I.region_name||`(${I.region_x}, ${I.region_y}, ${I.region_z})`," ",""," ",I.galaxy,I.discord_tag&&c.jsxs("span",{className:"ml-1 text-cyan-400",children:["(",I.discord_tag,")"]})]})]},I.id))}),a.length>=2&&!w&&o.length===0&&c.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-gray-800 border border-gray-600 rounded p-3 text-center text-gray-400 text-sm",children:['No systems found matching "',a,'"']})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Search for cataloged systems by name, glyph code, or region"})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Notes (optional)"}),c.jsx("textarea",{value:m,onChange:I=>y(I.target.value),placeholder:"Strategic importance, resources, etc.",className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-sm",rows:2})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:R,disabled:_,className:"flex-1 py-2 bg-green-600 hover:bg-green-500 disabled:bg-gray-600 rounded font-bold",children:_?"Claiming...":"CLAIM TERRITORY"}),c.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded",children:"Cancel"})]})]})})}function PB({maxItems:t=15}){const[e,n]=E.useState([]),[r,i]=E.useState(!0);E.useEffect(()=>{const o=async()=>{try{const u=await qe.get(`/api/warroom/activity-feed?limit=${t}`);n(u.data)}catch(u){console.error("Failed to fetch activity feed:",u)}finally{i(!1)}};o();const l=setInterval(o,15e3);return()=>clearInterval(l)},[t]);const a=o=>({war_declared:"",conflict_acknowledged:"",conflict_resolved:"",conflict_cancelled:"",battle_skirmish:"",battle_capture:"",battle_defense:"",battle_retreat:"",battle_reinforcement:"",ally_joined:"",resolution_proposed:"",resolution_agreed:"",territory_claimed:"",news_published:""})[o]||"",s=o=>o.includes("battle")?"border-orange-500/30 bg-orange-950/20":o.includes("resolved")||o.includes("agreed")?"border-green-500/30 bg-green-950/20":o.includes("declared")||o.includes("war")?"border-red-500/30 bg-red-950/20":o.includes("cancelled")?"border-gray-500/30 bg-gray-950/20":"border-yellow-500/30 bg-yellow-950/20";return r?c.jsx(Zo,{title:"Live Activity Feed",children:c.jsx("div",{className:"text-center py-8 text-gray-400 animate-pulse",children:"Loading activity..."})}):c.jsx(Zo,{title:"Live Activity Feed",children:e.length===0?c.jsx("div",{className:"text-center py-8 text-gray-500",children:"No recent activity"}):c.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2",children:e.map(o=>c.jsx("div",{className:`p-3 rounded border ${s(o.event_type)}`,children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-lg",children:a(o.event_type)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-medium text-white text-sm",children:o.headline}),o.details&&c.jsx("div",{className:"text-xs text-gray-400 mt-1",children:o.details}),c.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500",children:[c.jsx("span",{children:new Date(o.created_at).toLocaleString()}),o.system_name&&c.jsxs("span",{className:"text-cyan-400",children:["@ ",o.system_name]})]})]})]})},o.id))})})}function WRe({count:t,onRead:e}){const[n,r]=E.useState(!1),[i,a]=E.useState([]),[s,o]=E.useState(!1),l=async()=>{o(!0);try{const d=await qe.get("/api/warroom/notifications?limit=20");a(d.data)}catch(d){console.error("Failed to fetch notifications:",d)}finally{o(!1)}},u=async()=>{try{await qe.put("/api/warroom/notifications/read-all"),a(d=>d.map(f=>({...f,read_at:new Date().toISOString()}))),e?.()}catch(d){console.error("Failed to mark notifications read:",d)}};return E.useEffect(()=>{n&&l()},[n]),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>r(!n),className:"flex items-center gap-1 px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-sm",children:[c.jsx("span",{children:""}),t>0&&c.jsx("span",{className:"bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:t>9?"9+":t})]}),n&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>r(!1)}),c.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-gray-900 border border-red-500/30 rounded-lg shadow-xl z-50",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-700",children:[c.jsx("span",{className:"font-bold text-red-400",children:"War Alerts"}),i.length>0&&c.jsx("button",{onClick:u,className:"text-xs text-gray-400 hover:text-white",children:"Mark all read"})]}),c.jsx("div",{className:"max-h-80 overflow-y-auto",children:s?c.jsx("div",{className:"p-4 text-center text-gray-400",children:"Loading..."}):i.length===0?c.jsx("div",{className:"p-4 text-center text-gray-500",children:"No notifications"}):i.map(d=>c.jsxs("div",{className:`p-3 border-b border-gray-800 ${d.read_at?"":"bg-red-950/20"}`,children:[c.jsx("div",{className:"font-medium text-sm text-white",children:d.title}),c.jsx("div",{className:"text-xs text-gray-400 mt-1",children:d.message}),c.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(d.created_at).toLocaleString()})]},d.id))})]})]})]})}function GRe({partnerId:t,isSuperAdmin:e,onReleaseClaim:n,discordTag:r}){const[i,a]=E.useState([]),[s,o]=E.useState({systems:[],regions:{},total_systems:0}),[l,u]=E.useState(!0),[d,f]=E.useState("territory");E.useEffect(()=>{(t||e)&&(async()=>{try{const[y,_]=await Promise.all([qe.get("/api/warroom/claims"),r?qe.get(`/api/warroom/territory/by-tag?discord_tag=${encodeURIComponent(r)}`):Promise.resolve({data:{systems:[],regions:{}}})]),v=e?y.data:y.data.filter(w=>w.claimant_partner_id===t);a(v),o(_.data)}catch(y){console.error("Failed to fetch territory:",y)}finally{u(!1)}})()},[t,e,r]);const p=async m=>{if(confirm("Release this territorial claim?"))try{await qe.delete(`/api/warroom/claims/${m}`),a(y=>y.filter(_=>_.id!==m)),n?.()}catch(y){console.error("Failed to release claim:",y)}};return l?c.jsx(Zo,{title:"My Territory",children:c.jsx("div",{className:"text-center py-4 text-gray-400",children:"Loading..."})}):c.jsxs(Zo,{title:e?"All Territory":"My Territory",children:[c.jsxs("div",{className:"flex gap-1 mb-3 bg-gray-800/50 rounded p-1",children:[c.jsxs("button",{onClick:()=>f("territory"),className:`flex-1 px-2 py-1 text-xs font-medium rounded ${d==="territory"?"bg-green-600 text-white":"text-gray-400 hover:text-white"}`,children:["Systems (",s.total_systems||0,")"]}),c.jsxs("button",{onClick:()=>f("claims"),className:`flex-1 px-2 py-1 text-xs font-medium rounded ${d==="claims"?"bg-cyan-600 text-white":"text-gray-400 hover:text-white"}`,children:["War Claims (",i.length,")"]})]}),d==="territory"?s.total_systems===0?c.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"No systems uploaded with your tag"}):c.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:Object.entries(s.regions||{}).map(([m,y])=>c.jsxs("div",{className:"bg-gray-800/50 rounded p-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"font-medium text-green-400 text-sm",children:y.region_name||`Region (${y.region_x}, ${y.region_y}, ${y.region_z})`}),c.jsxs("span",{className:"text-xs text-gray-400",children:[y.system_count," systems"]})]}),c.jsx("div",{className:"text-xs text-gray-500",children:y.galaxy})]},m))}):i.length===0?c.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"No war territory claims"}):c.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:i.map(m=>c.jsxs("div",{className:"flex items-center justify-between bg-gray-800/50 rounded p-2",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-white text-sm",children:m.system_name||m.system_id}),c.jsxs("div",{className:"text-xs text-gray-400",children:[m.galaxy,"  (",m.region_x,", ",m.region_y,", ",m.region_z,")"]}),e&&c.jsx("div",{className:"text-xs mt-1",style:{color:m.claimant_color},children:m.claimant_display_name})]}),c.jsx("button",{onClick:()=>p(m.id),className:"text-xs text-red-400 hover:text-red-300 px-2 py-1",children:"Release"})]},m.id))})]})}function $Re({open:t,onClose:e,conflictId:n,onSuccess:r,isAttacker:i,myPartnerId:a}){const[s,o]=E.useState(null),[l,u]=E.useState([]),[d,f]=E.useState(!0),[p,m]=E.useState(!1),[y,_]=E.useState(null),[v,w]=E.useState([]),[M,C]=E.useState(""),[N,P]=E.useState(""),[R,k]=E.useState([]),[U,I]=E.useState(!1),[L,z]=E.useState(!1);E.useEffect(()=>{!t||!n||O()},[t,n]);const O=async()=>{f(!0);try{const[B,ae]=await Promise.all([qe.get(`/api/warroom/conflicts/${n}/negotiation-status`),qe.get(`/api/warroom/conflicts/${n}/peace-proposals`)]);o(B.data),u(ae.data)}catch(B){console.error("Failed to fetch negotiation data:",B),_("Failed to load negotiation data")}finally{f(!1)}};E.useEffect(()=>{if(N.length<2){k([]);return}const B=setTimeout(async()=>{I(!0);try{const ae=await qe.get(`/api/warroom/territory/search?q=${encodeURIComponent(N)}&limit=20`);k(ae.data.filter(re=>re.is_partner_owned))}catch(ae){console.error("Search failed:",ae)}finally{I(!1)}},300);return()=>clearTimeout(B)},[N]);const q=B=>{v.find(ae=>ae.id===B.id)||w([...v,{...B,direction:"give"}]),P(""),k([])},Y=B=>{w(v.filter(ae=>ae.id!==B))},X=B=>{w(v.map(ae=>ae.id===B?{...ae,direction:ae.direction==="give"?"receive":"give"}:ae))},ee=async(B=!1)=>{if(v.length===0){_("Please select at least one system to include in the proposal");return}m(!0),_(null);try{await qe.post(`/api/warroom/conflicts/${n}/propose-peace`,{items:v.map(ae=>({type:"system",direction:ae.direction,system_id:ae.id,system_name:ae.name,from_partner_id:ae.direction==="give"?a:null,to_partner_id:ae.direction==="receive"?a:null})),message:M,is_counter:B}),w([]),C(""),z(!1),O(),r?.()}catch(ae){_(ae.response?.data?.detail||"Failed to submit proposal")}finally{m(!1)}},se=async B=>{if(confirm("Accept this peace treaty? This will end the war and transfer territory as specified.")){m(!0);try{await qe.put(`/api/warroom/peace-proposals/${B}/accept`),r?.(),e()}catch(ae){_(ae.response?.data?.detail||"Failed to accept proposal")}finally{m(!1)}}},W=async(B,ae=!1)=>{if(confirm(ae?"Walk away from negotiations? The war will continue.":"Reject this proposal? You may still send a counter-offer.")){m(!0);try{await qe.put(`/api/warroom/peace-proposals/${B}/reject`,{walk_away:ae}),O(),r?.()}catch(de){_(de.response?.data?.detail||"Failed to reject proposal")}finally{m(!1)}}};if(!t)return null;const $=l.find(B=>B.status==="pending"),G=$?.recipient_partner_id===a,j=i?s?.attacker_counters_remaining:s?.defender_counters_remaining;return c.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-gray-900 border border-amber-500/30 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-amber-500/20",children:[c.jsx("h2",{className:"text-xl font-bold text-amber-500",children:"PEACE NEGOTIATIONS"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white",children:""})]}),d?c.jsx("div",{className:"p-8 text-center text-gray-400",children:"Loading negotiation status..."}):c.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[y&&c.jsx("p",{className:"text-red-400 text-sm mb-4 p-2 bg-red-950/30 rounded",children:y}),c.jsxs("div",{className:"bg-gray-800/50 rounded p-4 mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-sm font-bold text-amber-400",children:"STATUS"}),c.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${s?.negotiation_status==="pending"?"bg-amber-500":s?.negotiation_status==="failed"?"bg-red-500":s?.negotiation_status==="accepted"?"bg-green-500":"bg-gray-500"} text-white`,children:s?.negotiation_status?.toUpperCase()||"NONE"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"Your counter-offers remaining: "}),c.jsx("span",{className:`font-bold ${j>0?"text-green-400":"text-red-400"}`,children:j??2})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400",children:"War status: "}),c.jsx("span",{className:"font-bold text-white",children:s?.conflict_status?.toUpperCase()})]})]})]}),$&&G&&c.jsxs("div",{className:"bg-amber-950/30 border border-amber-500/30 rounded p-4 mb-4",children:[c.jsx("h3",{className:"text-sm font-bold text-amber-400 mb-3",children:"INCOMING PROPOSAL"}),c.jsxs("div",{className:"text-sm text-gray-300 mb-2",children:["From: ",c.jsx("span",{style:{color:$.proposer_color},className:"font-bold",children:$.proposer_name})]}),$.message&&c.jsxs("div",{className:"text-sm text-gray-400 italic mb-3",children:['"',$.message,'"']}),c.jsxs("div",{className:"space-y-2 mb-4",children:[c.jsx("div",{className:"text-xs text-gray-500 uppercase",children:"Terms:"}),$.items.map((B,ae)=>c.jsxs("div",{className:"flex items-center gap-2 text-sm bg-gray-800/50 rounded p-2",children:[c.jsx("span",{className:B.direction==="give"?"text-red-400":"text-green-400",children:B.direction==="give"?" GIVE":" RECEIVE"}),c.jsx("span",{className:"text-white",children:B.system_name||`Region (${B.region_x}, ${B.region_y}, ${B.region_z})`})]},ae))]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>se($.id),disabled:p,className:"flex-1 py-2 bg-green-600 hover:bg-green-500 disabled:bg-gray-600 rounded font-bold text-sm",children:"Accept Treaty"}),c.jsx("button",{onClick:()=>W($.id,!1),disabled:p,className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 disabled:bg-gray-600 rounded font-bold text-sm",children:"Counter"}),c.jsx("button",{onClick:()=>W($.id,!0),disabled:p,className:"px-4 py-2 bg-red-600 hover:bg-red-500 disabled:bg-gray-600 rounded font-bold text-sm",children:"Walk Away"})]})]}),$&&!G&&c.jsxs("div",{className:"bg-gray-800/50 border border-gray-500/30 rounded p-4 mb-4 text-center",children:[c.jsx("div",{className:"text-amber-400 text-lg mb-2",children:"Awaiting Response..."}),c.jsxs("div",{className:"text-sm text-gray-400",children:["Your proposal was sent to ",c.jsx("span",{className:"font-bold text-white",children:$.recipient_name})]})]}),(!$||G&&j>0)&&c.jsx(c.Fragment,{children:L?c.jsxs("div",{className:"bg-gray-800/50 rounded p-4 mb-4",children:[c.jsx("h3",{className:"text-sm font-bold text-amber-400 mb-3",children:$?"COUNTER-OFFER":"PEACE PROPOSAL"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Search Systems to Include"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:N,onChange:B=>P(B.target.value),placeholder:"Search by system name...",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-sm"}),U&&c.jsx("span",{className:"absolute right-3 top-2 text-gray-400 text-sm",children:"..."}),R.length>0&&c.jsx("div",{className:"absolute z-10 w-full mt-1 bg-gray-800 border border-gray-600 rounded shadow-lg max-h-48 overflow-y-auto",children:R.map(B=>c.jsxs("button",{onClick:()=>q(B),className:"w-full text-left px-3 py-2 hover:bg-gray-700 text-sm",children:[c.jsx("span",{className:"font-medium text-white",children:B.name}),c.jsxs("span",{className:"text-gray-400 ml-2",children:["(",B.owner_name,")"]})]},B.id))})]})]}),v.length>0&&c.jsxs("div",{className:"mb-4",children:[c.jsxs("label",{className:"block text-sm text-gray-400 mb-2",children:["Terms (",v.length," systems)"]}),c.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:v.map(B=>c.jsxs("div",{className:"flex items-center gap-2 bg-gray-700/50 rounded p-2",children:[c.jsx("button",{onClick:()=>X(B.id),className:`px-2 py-1 rounded text-xs font-bold ${B.direction==="give"?"bg-red-500/20 text-red-400":"bg-green-500/20 text-green-400"}`,children:B.direction==="give"?" GIVE":" RECEIVE"}),c.jsx("span",{className:"flex-1 text-sm text-white",children:B.name}),c.jsx("button",{onClick:()=>Y(B.id),className:"text-red-400 hover:text-red-300 text-sm",children:""})]},B.id))})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Message (optional)"}),c.jsx("textarea",{value:M,onChange:B=>C(B.target.value),placeholder:"Diplomatic message...",className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-sm",rows:2})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>ee(!!$),disabled:p||v.length===0,className:"flex-1 py-2 bg-amber-600 hover:bg-amber-500 disabled:bg-gray-600 rounded font-bold",children:p?"Sending...":$?"Send Counter-Offer":"Send Proposal"}),c.jsx("button",{onClick:()=>{z(!1),w([]),C("")},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded",children:"Cancel"})]})]}):c.jsx("button",{onClick:()=>z(!0),className:"w-full py-3 bg-amber-600 hover:bg-amber-500 rounded font-bold text-lg mb-4",children:$?"Send Counter-Offer":"Propose Peace Terms"})}),l.length>0&&c.jsxs("div",{className:"mt-4",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-400 mb-2",children:"NEGOTIATION HISTORY"}),c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:l.map(B=>c.jsxs("div",{className:`p-3 rounded border text-sm ${B.status==="accepted"?"bg-green-950/30 border-green-500/30":B.status==="rejected"?"bg-red-950/30 border-red-500/30":B.status==="pending"?"bg-amber-950/30 border-amber-500/30":"bg-gray-800/50 border-gray-500/30"}`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("span",{style:{color:B.proposer_color},className:"font-bold",children:B.proposer_name}),c.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${B.status==="accepted"?"bg-green-500":B.status==="rejected"?"bg-red-500":B.status==="pending"?"bg-amber-500":"bg-gray-500"} text-white`,children:B.status.toUpperCase()})]}),c.jsxs("div",{className:"text-xs text-gray-400",children:[B.proposal_type==="counter"&&`Counter #${B.counter_number}  `,new Date(B.proposed_at).toLocaleString()]}),B.items.length>0&&c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[B.items.length," system(s) in terms"]})]},B.id))})]})]})]})})}function YRe({open:t,onClose:e,conflictId:n,onUpdate:r,myPartnerId:i}){const[a,s]=E.useState(null),[o,l]=E.useState([]),[u,d]=E.useState([]),[f,p]=E.useState(!0),[m,y]=E.useState("skirmish"),[_,v]=E.useState(""),[w,M]=E.useState(!1),[C,N]=E.useState(!1);E.useEffect(()=>{if(!t||!n)return;(async()=>{p(!0);try{const[k,U,I]=await Promise.all([qe.get("/api/warroom/conflicts/active"),qe.get(`/api/warroom/conflicts/${n}/events`),qe.get(`/api/warroom/conflicts/${n}/parties`)]),L=k.data.find(z=>z.id===n);s(L),l(U.data),d(I.data)}catch(k){console.error("Failed to fetch conflict details:",k)}finally{p(!1)}})()},[t,n]);const P=async()=>{if(_.trim()){M(!0);try{await qe.post(`/api/warroom/conflicts/${n}/events`,{event_type:m,details:_});const R=await qe.get(`/api/warroom/conflicts/${n}/events`);l(R.data),v(""),r?.()}catch(R){console.error("Failed to add event:",R)}finally{M(!1)}}};return t?c.jsxs("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:[c.jsxs("div",{className:"bg-gray-900 border border-red-500/30 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-red-500/20",children:[c.jsx("h2",{className:"text-xl font-bold text-red-500",children:"CONFLICT DETAILS"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white",children:""})]}),f?c.jsx("div",{className:"p-8 text-center text-gray-400",children:"Loading conflict details..."}):a?c.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[c.jsxs("div",{className:"bg-gray-800/50 rounded p-4 mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${a.status==="active"?"bg-red-500 animate-pulse":a.status==="pending"?"bg-yellow-500":"bg-gray-500"} text-white`,children:a.status.toUpperCase()}),c.jsxs("span",{className:"text-xs text-gray-400",children:["ID: ",a.id]})]}),c.jsxs("div",{className:"text-lg font-bold text-white mb-2",children:["Battle for ",a.target_system_name]}),c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{style:{color:a.attacker_color},className:"font-bold",children:a.attacker_name}),c.jsx("span",{className:"text-red-400",children:""}),c.jsx("span",{style:{color:a.defender_color},className:"font-bold",children:a.defender_name})]}),c.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["Declared: ",new Date(a.declared_at).toLocaleString()]})]}),u.length>2&&c.jsxs("div",{className:"bg-gray-800/50 rounded p-4 mb-4",children:[c.jsx("h3",{className:"text-sm font-bold text-yellow-400 mb-2",children:"ALLIED PARTIES"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Attackers"}),u.filter(R=>R.side==="attacker").map(R=>c.jsxs("div",{className:"text-sm flex items-center gap-1",children:[c.jsx("span",{style:{color:R.color},children:R.display_name}),R.is_primary===1&&c.jsx("span",{className:"text-xs text-yellow-400",children:"(Lead)"})]},R.partner_id))]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Defenders"}),u.filter(R=>R.side==="defender").map(R=>c.jsxs("div",{className:"text-sm flex items-center gap-1",children:[c.jsx("span",{style:{color:R.color},children:R.display_name}),R.is_primary===1&&c.jsx("span",{className:"text-xs text-yellow-400",children:"(Lead)"})]},R.partner_id))]})]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("h3",{className:"text-sm font-bold text-red-400 mb-2",children:"BATTLE TIMELINE"}),c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:o.map((R,k)=>c.jsxs("div",{className:"flex gap-3 bg-gray-800/30 rounded p-2",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:`w-3 h-3 rounded-full ${R.event_type==="declared"?"bg-red-500":R.event_type==="acknowledged"?"bg-yellow-500":R.event_type==="resolved"?"bg-green-500":"bg-gray-500"}`}),k<o.length-1&&c.jsx("div",{className:"w-0.5 flex-1 bg-gray-700 mt-1"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-300 uppercase",children:R.event_type}),c.jsx("span",{className:"text-xs text-gray-500",children:new Date(R.created_at).toLocaleString()})]}),c.jsx("div",{className:"text-sm text-gray-400",children:R.details}),R.actor_username&&c.jsxs("div",{className:"text-xs text-cyan-400",children:["by ",R.actor_username]})]})]},R.id))})]}),a.status!=="resolved"&&c.jsxs("div",{className:"bg-gray-800/50 rounded p-4",children:[c.jsx("h3",{className:"text-sm font-bold text-yellow-400 mb-2",children:"ADD BATTLE EVENT"}),c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsxs("select",{value:m,onChange:R=>y(R.target.value),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm",children:[c.jsx("option",{value:"skirmish",children:"Skirmish"}),c.jsx("option",{value:"capture",children:"Capture"}),c.jsx("option",{value:"defense",children:"Defense"}),c.jsx("option",{value:"retreat",children:"Retreat"}),c.jsx("option",{value:"reinforcement",children:"Reinforcement"}),c.jsx("option",{value:"note",children:"Note"})]}),c.jsx("input",{type:"text",value:_,onChange:R=>v(R.target.value),placeholder:"Event details...",className:"flex-1 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm"}),c.jsx("button",{onClick:P,disabled:w||!_.trim(),className:"px-3 py-1 bg-red-600 hover:bg-red-500 disabled:bg-gray-600 rounded text-sm font-bold",children:"Add"})]})]}),a.status==="active"&&i&&c.jsx("div",{className:"mt-4",children:c.jsx("button",{onClick:()=>N(!0),className:"w-full py-3 bg-amber-600 hover:bg-amber-500 rounded font-bold text-lg",children:"Propose Peace Treaty"})})]}):c.jsx("div",{className:"p-8 text-center text-gray-400",children:"Conflict not found"})]}),c.jsx($Re,{open:C,onClose:()=>N(!1),conflictId:n,onSuccess:()=>{r?.(),N(!1)},isAttacker:a?.attacker_partner_id===i,myPartnerId:i})]}):null}function qRe({isCorrespondent:t,isSuperAdmin:e,onCreateNews:n}){const[r,i]=E.useState([]),[a,s]=E.useState(!0),[o,l]=E.useState(null);E.useEffect(()=>{(async()=>{try{const f=await qe.get("/api/warroom/news?limit=50");i(f.data)}catch(f){console.error("Failed to fetch news:",f)}finally{s(!1)}})()},[]);const u=d=>({breaking:"",report:"",analysis:"",editorial:"",announcement:""})[d]||"";return a?c.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading news..."}):c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"space-y-3",children:r.length===0?c.jsx("div",{className:"text-center py-8 text-gray-500",children:"No news articles yet"}):r.map(d=>c.jsx("div",{onClick:()=>l(d),className:"bg-gray-800/50 border border-yellow-500/20 rounded p-4 cursor-pointer hover:border-yellow-500/50 transition-colors",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("span",{className:"text-2xl",children:u(d.article_type)}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.is_pinned===1&&c.jsx("span",{className:"text-xs bg-yellow-500/20 text-yellow-400 px-1.5 py-0.5 rounded",children:"PINNED"}),c.jsx("span",{className:"text-xs text-gray-500 uppercase",children:d.article_type||"news"})]}),c.jsx("h3",{className:"font-bold text-white",children:d.headline}),c.jsx("p",{className:"text-sm text-gray-400 mt-1 line-clamp-2",children:d.body}),c.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[c.jsxs("span",{children:["By ",d.author_name||"Unknown"]}),d.reporting_org_name&&c.jsx("span",{className:"text-cyan-400",children:d.reporting_org_name}),c.jsx("span",{children:new Date(d.created_at).toLocaleDateString()}),d.view_count>0&&c.jsxs("span",{children:[" ",d.view_count]})]})]})]})},d.id))}),o&&c.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-gray-900 border border-yellow-500/30 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-yellow-500/20",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-2xl",children:u(o.article_type)}),c.jsx("span",{className:"text-xs text-gray-400 uppercase",children:o.article_type||"news"})]}),c.jsx("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-white",children:""})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:o.headline}),c.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-400 mb-6",children:[c.jsxs("span",{children:["By ",o.author_name||"Unknown"]}),o.reporting_org_name&&c.jsxs("span",{className:"text-cyan-400",children:[" ",o.reporting_org_name]}),c.jsxs("span",{children:[" ",new Date(o.created_at).toLocaleString()]})]}),c.jsx("div",{className:"prose prose-invert max-w-none",children:c.jsx("p",{className:"text-gray-300 whitespace-pre-wrap",children:o.body})})]})]})})]})}function XRe({open:t,onClose:e,onSuccess:n}){const[r,i]=E.useState(""),[a,s]=E.useState(""),[o,l]=E.useState("breaking"),[u,d]=E.useState(!1),[f,p]=E.useState(null);if(!t)return null;const m=async()=>{if(!r||!a){p("Headline and body are required");return}d(!0),p(null);try{await qe.post("/api/warroom/news",{headline:r,body:a,article_type:o}),n(),e(),i(""),s(""),l("breaking")}catch(y){p(y.response?.data?.detail||"Failed to create news")}finally{d(!1)}};return c.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-gray-900 border border-yellow-500/30 rounded-lg p-6 w-full max-w-lg",children:[c.jsx("h2",{className:"text-xl font-bold text-yellow-500 mb-4",children:"CREATE WAR NEWS"}),f&&c.jsx("p",{className:"text-red-400 text-sm mb-4",children:f}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Article Type"}),c.jsxs("select",{value:o,onChange:y=>l(y.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-sm",children:[c.jsx("option",{value:"breaking",children:" Breaking News"}),c.jsx("option",{value:"report",children:" Battle Report"}),c.jsx("option",{value:"analysis",children:" Analysis"}),c.jsx("option",{value:"editorial",children:" Editorial"}),c.jsx("option",{value:"announcement",children:" Announcement"})]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Headline"}),c.jsx("input",{type:"text",value:r,onChange:y=>i(y.target.value),placeholder:"Breaking news headline...",className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-sm"})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Article Body"}),c.jsx("textarea",{value:a,onChange:y=>s(y.target.value),placeholder:"Full article content...",className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-sm",rows:8})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:m,disabled:u,className:"flex-1 py-2 bg-yellow-600 hover:bg-yellow-500 disabled:bg-gray-600 rounded font-bold text-black",children:u?"Publishing...":"PUBLISH NEWS"}),c.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded",children:"Cancel"})]})]})})}function KRe(){const t=E.useContext(kr),[e,n]=E.useState(!0),[r,i]=E.useState(null),[a,s]=E.useState([]),[o,l]=E.useState({objectives:[]}),[u,d]=E.useState({}),[f,p]=E.useState([]),[m,y]=E.useState([]),[_,v]=E.useState(0),[w,M]=E.useState(null),[C,N]=E.useState([]),[P,R]=E.useState("command"),[k,U]=E.useState(!1),[I,L]=E.useState(!1),[z,O]=E.useState(!1),[q,Y]=E.useState(null),X=async()=>{try{const[se,W,$,G,j,B,ae,re]=await Promise.all([qe.get("/api/warroom/enrollment/status"),qe.get("/api/warroom/conflicts/active"),qe.get("/api/warroom/debrief"),qe.get("/api/warroom/statistics"),qe.get("/api/warroom/statistics/leaderboard"),qe.get("/api/warroom/news/ticker"),qe.get("/api/warroom/notifications/count"),qe.get("/api/warroom/claims")]);i(se.data),s(W.data),l($.data),d(G.data),p(j.data),y(B.data),v(ae.data.count),N(re.data)}catch(se){console.error("Failed to fetch War Room data:",se),M(se.response?.data?.detail||"Failed to load War Room data")}finally{n(!1)}};E.useEffect(()=>{X();const se=setInterval(X,3e4);return()=>clearInterval(se)},[]);const ee=async se=>{await qe.put("/api/warroom/debrief",{objectives:se}),l(W=>({...W,objectives:se}))};return e?c.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#0a0c10"},children:c.jsx("div",{className:"text-red-400 text-xl animate-pulse",children:"Loading War Room..."})}):w?c.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#0a0c10"},children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-red-500 text-xl mb-4",children:"Access Denied"}),c.jsx("p",{className:"text-gray-400",children:w}),c.jsx(yn,{to:"/",className:"text-red-400 hover:underline mt-4 inline-block",children:"Return to Dashboard"})]})}):c.jsxs("div",{className:"min-h-screen -m-6 -mb-6",style:{backgroundColor:"#0a0c10"},children:[c.jsx("style",{children:`
        @keyframes marquee {
          0% { transform: translateX(0); }
          100% { transform: translateX(-50%); }
        }
        .animate-marquee {
          animation: marquee 30s linear infinite;
        }
        .war-grid {
          background-image:
            linear-gradient(rgba(239, 68, 68, 0.05) 1px, transparent 1px),
            linear-gradient(90deg, rgba(239, 68, 68, 0.05) 1px, transparent 1px);
          background-size: 50px 50px;
        }
      `}),c.jsx("div",{className:"border-b border-red-500/30 bg-gray-900/90 px-6 py-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("h1",{className:"text-2xl font-bold text-red-500 tracking-wider",children:"WAR ROOM"}),t.isCorrespondent&&c.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-yellow-500/20 border border-yellow-500/30 rounded",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500 animate-pulse"}),c.jsx("span",{className:"text-xs text-yellow-400 font-medium",children:"WAR CORRESPONDENT"})]}),r?.enrolled&&!t.isCorrespondent&&c.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-green-500/20 border border-green-500/30 rounded",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),c.jsx("span",{className:"text-xs text-green-400 font-medium",children:r.display_name||"ENROLLED"})]}),c.jsxs("div",{className:"flex items-center gap-1 bg-gray-800/50 rounded p-1 ml-4",children:[c.jsx("button",{onClick:()=>R("command"),className:`px-3 py-1 text-sm font-medium rounded transition-colors ${P==="command"?"bg-red-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:"Command Center"}),c.jsx("button",{onClick:()=>R("news"),className:`px-3 py-1 text-sm font-medium rounded transition-colors ${P==="news"?"bg-yellow-600 text-black":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:"News Room"})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[r?.enrolled&&!r?.is_super_admin&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>L(!0),className:"px-3 py-1 bg-green-600 hover:bg-green-500 rounded text-sm font-bold",children:"Claim Territory"}),c.jsx("button",{onClick:()=>U(!0),className:"px-3 py-1 bg-red-600 hover:bg-red-500 rounded text-sm font-bold",children:"Declare War"})]}),t.isCorrespondent&&c.jsx("button",{onClick:()=>O(!0),className:"px-3 py-1 bg-yellow-600 hover:bg-yellow-500 rounded text-sm font-bold text-black",children:"+ News"}),t.isSuperAdmin&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>O(!0),className:"px-3 py-1 bg-yellow-600 hover:bg-yellow-500 rounded text-sm font-bold text-black",children:"+ News"}),c.jsx("button",{onClick:()=>L(!0),className:"px-3 py-1 bg-green-600 hover:bg-green-500 rounded text-sm font-bold",children:"Claim"}),c.jsx("button",{onClick:()=>U(!0),className:"px-3 py-1 bg-red-600 hover:bg-red-500 rounded text-sm font-bold",children:"War"})]}),c.jsx(WRe,{count:_,onRead:()=>v(0)}),t.isSuperAdmin&&c.jsx(yn,{to:"/war-room/admin",className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-sm ml-2",children:"Admin"})]})]})}),P==="command"?c.jsx("div",{className:"p-6 war-grid",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2",children:[c.jsx(Zo,{title:"Galactic War Map",className:"h-[550px]",children:c.jsx(IRe,{className:"h-full rounded"})}),c.jsx("div",{className:"mt-6",children:c.jsx(Zo,{title:`Active Conflicts (${a.length})`,children:a.length===0?c.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No active conflicts. The galaxy is at peace... for now."}):c.jsx("div",{className:"max-h-64 overflow-y-auto pr-2",children:a.map(se=>c.jsx("div",{onClick:()=>Y(se.id),className:"cursor-pointer hover:ring-1 hover:ring-red-500/50 rounded transition-all",children:c.jsx(LRe,{conflict:se})},se.id))})})})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsx(URe,{debrief:o,onUpdate:ee,canEdit:t.isSuperAdmin}),c.jsx(PB,{maxItems:10}),(r?.enrolled||t.isSuperAdmin)&&c.jsx(GRe,{partnerId:r?.partner_id,isSuperAdmin:t.isSuperAdmin,onReleaseClaim:X,discordTag:r?.discord_tag}),c.jsx(zRe,{stats:u}),c.jsx(BRe,{leaderboard:f})]})]})}):c.jsx("div",{className:"p-6 war-grid",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[c.jsx("div",{className:"lg:col-span-3",children:c.jsx(Zo,{title:"War News & Reports",className:"min-h-[600px]",children:c.jsx(qRe,{isCorrespondent:t.isCorrespondent,isSuperAdmin:t.isSuperAdmin,onCreateNews:()=>O(!0)})})}),c.jsxs("div",{className:"space-y-6",children:[(t.isCorrespondent||t.isSuperAdmin)&&c.jsx(Zo,{title:"Reporter Actions",children:c.jsx("div",{className:"space-y-2",children:c.jsx("button",{onClick:()=>O(!0),className:"w-full py-2 bg-yellow-600 hover:bg-yellow-500 rounded font-bold text-black text-sm",children:"Write Article"})})}),c.jsx(PB,{maxItems:8}),c.jsx(Zo,{title:"Active Conflicts",children:a.length===0?c.jsx("p",{className:"text-gray-500 text-sm",children:"No active conflicts"}):c.jsx("div",{className:"space-y-2",children:a.slice(0,5).map(se=>c.jsxs("div",{onClick:()=>{Y(se.id),R("command")},className:"cursor-pointer p-2 bg-gray-800/50 rounded hover:bg-gray-800 text-sm",children:[c.jsx("div",{className:"font-medium text-white",children:se.target_system_name}),c.jsxs("div",{className:"text-xs text-gray-400",children:[c.jsx("span",{style:{color:se.attacker_color},children:se.attacker_name})," vs ",c.jsx("span",{style:{color:se.defender_color},children:se.defender_name})]})]},se.id))})})]})]})}),c.jsx(FRe,{news:m}),c.jsx(HRe,{open:k,onClose:()=>U(!1),onSuccess:X,claims:C,isSuperAdmin:t.isSuperAdmin,enrolledCivs:f,myPartnerId:r?.partner_id}),c.jsx(VRe,{open:I,onClose:()=>L(!1),onSuccess:X,isSuperAdmin:t.isSuperAdmin,enrolledCivs:f}),c.jsx(XRe,{open:z,onClose:()=>O(!1),onSuccess:X}),c.jsx(YRe,{open:!!q,onClose:()=>Y(null),conflictId:q,onUpdate:X,myPartnerId:r?.partner_id})]})}function ZRe(){const t=E.useContext(kr),e=Es(),[n,r]=E.useState(!0),[i,a]=E.useState([]),[s,o]=E.useState([]),[l,u]=E.useState([]),[d,f]=E.useState(""),[p,m]=E.useState({username:"",password:"",display_name:""}),[y,_]=E.useState(null),[v,w]=E.useState(null),[M,C]=E.useState({region_x:"",region_y:"",region_z:"",region_name:"",galaxy:"Euclid"}),[N,P]=E.useState(""),[R,k]=E.useState([]),[U,I]=E.useState(!1);E.useEffect(()=>{!t.loading&&!t.isSuperAdmin&&e("/war-room")},[t.loading,t.isSuperAdmin,e]);const L=async()=>{try{const[G,j,B]=await Promise.all([qe.get("/api/warroom/enrollment"),qe.get("/api/partners"),qe.get("/api/warroom/correspondents")]);a(G.data),o(j.data.partners||[]),u(B.data)}catch(G){console.error("Failed to fetch admin data:",G)}finally{r(!1)}};E.useEffect(()=>{L()},[]);const z=async()=>{if(d)try{await qe.post("/api/warroom/enrollment",{partner_id:parseInt(d)}),_({type:"success",text:"Partner enrolled successfully!"}),f(""),L()}catch(G){_({type:"error",text:G.response?.data?.detail||"Failed to enroll partner"})}},O=async G=>{if(confirm("Are you sure you want to unenroll this civilization from the War Room?"))try{await qe.delete(`/api/warroom/enrollment/${G}`),_({type:"success",text:"Partner unenrolled successfully"}),L()}catch(j){_({type:"error",text:j.response?.data?.detail||"Failed to unenroll partner"})}},q=async()=>{if(!p.username||!p.password){_({type:"error",text:"Username and password required"});return}try{await qe.post("/api/warroom/correspondents",p),_({type:"success",text:"Correspondent created successfully!"}),m({username:"",password:"",display_name:""}),L()}catch(G){_({type:"error",text:G.response?.data?.detail||"Failed to create correspondent"})}},Y=async()=>{try{await qe.post("/api/warroom/statistics/recalculate"),_({type:"success",text:"Statistics recalculated!"})}catch{_({type:"error",text:"Failed to recalculate statistics"})}},X=G=>{w(G),C({region_x:G.home_region_x??"",region_y:G.home_region_y??"",region_z:G.home_region_z??"",region_name:G.home_region_name??"",galaxy:G.home_galaxy??"Euclid"}),P(""),k([])};E.useEffect(()=>{if(!v||N.length<2){k([]);return}const G=setTimeout(async()=>{I(!0);try{const j=await qe.get(`/api/warroom/territory/search?q=${encodeURIComponent(N)}&discord_tag=${encodeURIComponent(v.discord_tag)}&limit=20`);k(j.data)}catch(j){console.error("Region search failed:",j)}finally{I(!1)}},300);return()=>clearTimeout(G)},[N,v]);const ee=G=>{C({region_x:G.region_x??"",region_y:G.region_y??"",region_z:G.region_z??"",region_name:G.region_name||"",galaxy:G.galaxy||"Euclid"}),P(""),k([])},se=async()=>{if(v)try{await qe.put(`/api/warroom/enrollment/${v.partner_id}/home-region`,{region_x:M.region_x?parseInt(M.region_x):null,region_y:M.region_y?parseInt(M.region_y):null,region_z:M.region_z?parseInt(M.region_z):null,region_name:M.region_name||null,galaxy:M.galaxy}),_({type:"success",text:"Home region updated!"}),w(null),L()}catch(G){_({type:"error",text:G.response?.data?.detail||"Failed to update home region"})}},W=i.map(G=>G.partner_id),$=s.filter(G=>!W.includes(G.id));return n?c.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#0a0c10"},children:c.jsx("div",{className:"text-red-400 text-xl animate-pulse",children:"Loading..."})}):c.jsxs("div",{className:"min-h-screen -m-6",style:{backgroundColor:"#0a0c10",color:"#e5e7eb"},children:[c.jsx("div",{className:"border-b border-red-500/30 bg-gray-900/90 px-6 py-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h1",{className:"text-2xl font-bold text-red-500 tracking-wider",children:"WAR ROOM ADMIN"}),c.jsx("button",{onClick:()=>e("/war-room"),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm",children:"Back to War Room"})]})}),y&&c.jsxs("div",{className:`mx-6 mt-4 p-3 rounded ${y.type==="success"?"bg-green-500/20 border border-green-500/30 text-green-400":"bg-red-500/20 border border-red-500/30 text-red-400"}`,children:[y.text,c.jsx("button",{onClick:()=>_(null),className:"ml-4 text-xs opacity-60 hover:opacity-100",children:"Dismiss"})]}),c.jsxs("div",{className:"p-6 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-gray-900/80 border border-red-500/20 rounded-lg",children:[c.jsx("div",{className:"px-4 py-3 border-b border-red-500/20",children:c.jsxs("h2",{className:"text-lg font-bold text-red-400",children:["Enrolled Civilizations (",i.length,")"]})}),c.jsxs("div",{className:"p-4",children:[i.length===0?c.jsx("p",{className:"text-gray-500 text-sm",children:"No civilizations enrolled yet."}):c.jsx("div",{className:"space-y-2",children:i.map(G=>c.jsxs("div",{className:"bg-gray-800/50 rounded p-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:G.region_color}}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:G.display_name}),c.jsx("div",{className:"text-xs text-gray-500",children:G.discord_tag})]})]}),c.jsx("button",{onClick:()=>O(G.partner_id),className:"px-2 py-1 bg-red-600 hover:bg-red-500 rounded text-xs",children:"Unenroll"})]}),c.jsx("div",{className:"mt-2 pt-2 border-t border-gray-700",children:G.home_region_x!==null?c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"text-xs text-gray-400",children:["Home: ",c.jsx("span",{className:"text-white",children:G.home_region_name||`(${G.home_region_x}, ${G.home_region_y}, ${G.home_region_z})`}),c.jsxs("span",{className:"ml-1 text-gray-500",children:["- ",G.home_galaxy]})]}),c.jsx("button",{onClick:()=>X(G),className:"text-xs text-cyan-400 hover:text-cyan-300",children:"Edit"})]}):c.jsx("button",{onClick:()=>X(G),className:"text-xs text-cyan-400 hover:text-cyan-300",children:"+ Set Home Region"})})]},G.partner_id))}),c.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[c.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Enroll New Civilization"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("select",{value:d,onChange:G=>f(G.target.value),className:"flex-1 bg-gray-800 border border-gray-600 rounded px-3 py-2 text-sm",children:[c.jsx("option",{value:"",children:"Select a partner..."}),$.map(G=>c.jsxs("option",{value:G.id,children:[G.display_name," (",G.discord_tag,")"]},G.id))]}),c.jsx("button",{onClick:z,disabled:!d,className:"px-4 py-2 bg-green-600 hover:bg-green-500 disabled:bg-gray-600 disabled:cursor-not-allowed rounded text-sm font-bold",children:"Enroll"})]})]})]})]}),c.jsxs("div",{className:"bg-gray-900/80 border border-red-500/20 rounded-lg",children:[c.jsx("div",{className:"px-4 py-3 border-b border-red-500/20",children:c.jsxs("h2",{className:"text-lg font-bold text-red-400",children:["War Correspondents (",l.length,")"]})}),c.jsxs("div",{className:"p-4",children:[l.length>0&&c.jsx("div",{className:"space-y-2 mb-4",children:l.map(G=>c.jsxs("div",{className:"flex items-center justify-between bg-gray-800/50 rounded p-3",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:G.display_name||G.username}),c.jsxs("div",{className:"text-xs text-gray-500",children:["@",G.username]})]}),c.jsx("span",{className:`px-2 py-1 rounded text-xs ${G.is_active?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:G.is_active?"Active":"Inactive"})]},G.id))}),c.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-700",children:[c.jsx("label",{className:"block text-sm text-gray-400",children:"Create New Correspondent"}),c.jsx("input",{type:"text",placeholder:"Username",value:p.username,onChange:G=>m(j=>({...j,username:G.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-sm"}),c.jsx("input",{type:"password",placeholder:"Password",value:p.password,onChange:G=>m(j=>({...j,password:G.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-sm"}),c.jsx("input",{type:"text",placeholder:"Display Name (optional)",value:p.display_name,onChange:G=>m(j=>({...j,display_name:G.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-sm"}),c.jsx("button",{onClick:q,className:"w-full py-2 bg-red-600 hover:bg-red-500 rounded text-sm font-bold",children:"Create Correspondent"})]})]})]}),c.jsxs("div",{className:"bg-gray-900/80 border border-red-500/20 rounded-lg lg:col-span-2",children:[c.jsx("div",{className:"px-4 py-3 border-b border-red-500/20",children:c.jsx("h2",{className:"text-lg font-bold text-red-400",children:"Admin Actions"})}),c.jsxs("div",{className:"p-4 flex flex-wrap gap-4",children:[c.jsx("button",{onClick:Y,className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 rounded text-sm font-bold",children:"Recalculate Statistics"}),c.jsx("button",{onClick:()=>e("/war-room"),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm",children:"View War Room"})]})]})]}),v&&c.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-gray-900 border border-cyan-500/30 rounded-lg p-6 w-full max-w-md",children:[c.jsxs("h2",{className:"text-xl font-bold text-cyan-400 mb-4",children:["Set Home Region: ",v.display_name]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Search Your Systems"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:N,onChange:G=>P(G.target.value),placeholder:`Search systems with ${v.discord_tag} tag...`,className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-sm"}),U&&c.jsx("span",{className:"absolute right-3 top-2 text-gray-400 text-sm",children:"..."}),R.length>0&&c.jsx("div",{className:"absolute z-10 w-full mt-1 bg-gray-800 border border-gray-600 rounded shadow-lg max-h-48 overflow-y-auto",children:R.map(G=>c.jsxs("button",{onClick:()=>ee(G),className:"w-full text-left px-3 py-2 hover:bg-gray-700 text-sm border-b border-gray-700 last:border-b-0",children:[c.jsx("div",{className:"font-medium text-white",children:G.name}),c.jsxs("div",{className:"text-xs text-gray-400",children:[G.region_name||`(${G.region_x}, ${G.region_y}, ${G.region_z})`," - ",G.galaxy]})]},G.id))})]}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Search for a system in ",v.discord_tag,"'s territory"]})]}),M.region_x!==""&&c.jsxs("div",{className:"bg-gray-800/50 border border-cyan-500/30 rounded p-3",children:[c.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Selected Region:"}),c.jsx("div",{className:"text-white font-medium",children:M.region_name||"Unnamed Region"}),c.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Coordinates: (",M.region_x,", ",M.region_y,", ",M.region_z,")  ",M.galaxy]})]}),!M.region_x&&M.region_x!==0&&c.jsx("div",{className:"text-sm text-yellow-400 text-center py-2",children:"Search and select a system to set as home region"}),c.jsx("p",{className:"text-xs text-gray-500",children:"The home region (HQ) will be displayed on the war map and is protected from peace treaty demands."}),c.jsxs("div",{className:"flex gap-3 pt-2",children:[c.jsx("button",{onClick:se,disabled:M.region_x===""&&M.region_x!==0,className:"flex-1 py-2 bg-cyan-600 hover:bg-cyan-500 rounded font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Home Region"}),c.jsx("button",{onClick:()=>w(null),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded",children:"Cancel"})]})]})]})})]})}function QRe({open:t,onClose:e}){const[n,r]=E.useState(""),[i,a]=E.useState(""),[s,o]=E.useState(""),[l,u]=E.useState(!1),[d,f]=E.useState("admin"),p=E.useContext(kr);if(!t)return null;async function m(_){_?.preventDefault(),o(""),u(!0);try{if(d==="correspondent"){const v=await qe.post("/api/warroom/correspondents/login",{username:n,password:i});await p.refreshAuth(),r(""),a(""),e()}else await p.login(n,i),r(""),a(""),e()}catch(v){const w=v.response?.data?.detail||v.message||"Login failed";o(w)}finally{u(!1)}}function y(_){_.key==="Enter"&&m()}return c.jsx(Tr,{title:"Login",onClose:e,children:c.jsx("form",{onSubmit:m,children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsx("button",{type:"button",onClick:()=>f("admin"),className:`flex-1 py-2 rounded text-sm font-medium transition-colors ${d==="admin"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Admin / Partner"}),c.jsx("button",{type:"button",onClick:()=>f("correspondent"),className:`flex-1 py-2 rounded text-sm font-medium transition-colors ${d==="correspondent"?"bg-red-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"War Correspondent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Username"}),c.jsx("input",{value:n,onChange:_=>r(_.target.value),onKeyDown:y,type:"text",className:"w-full p-2 border rounded bg-gray-700 text-white placeholder-gray-400",placeholder:"Enter username",autoFocus:!0,disabled:l})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password"}),c.jsx("input",{value:i,onChange:_=>a(_.target.value),onKeyDown:y,type:"password",className:"w-full p-2 border rounded bg-gray-700 text-white placeholder-gray-400",placeholder:"Enter password",disabled:l})]}),c.jsxs("div",{className:"flex gap-2 pt-2",children:[c.jsx("button",{type:"submit",className:"btn flex-1",disabled:l||!n.trim()||!i,children:l?"Logging in...":"Login"}),c.jsx("button",{type:"button",className:"btn",onClick:e,disabled:l,children:"Cancel"})]}),s&&c.jsx("div",{className:"text-red-500 mt-2 text-sm",children:s})]})})})}function JRe(){const t=E.useContext(kr),[e,n]=E.useState(!1),[r,i]=E.useState(!1),[a,s]=E.useState(0),o=E.useRef(null),{isDisconnected:l,registerConnection:u,unregisterConnection:d}=hP(),{isAdmin:f,isSuperAdmin:p,isPartner:m,isSubAdmin:y,isCorrespondent:_,user:v,canAccess:w}=t;E.useEffect(()=>{if(!f){s(0);return}if(l)return;const C=async()=>{try{const P=await qe.get("/api/pending_systems/count");s(P.data.count||0)}catch{}},N=()=>{o.current=setInterval(C,6e4)};return C(),N(),u("navbar-pending-polling",{cleanup:()=>{o.current&&(clearInterval(o.current),o.current=null)},restore:()=>{C(),N()}}),()=>{d("navbar-pending-polling"),o.current&&clearInterval(o.current)}},[f,l,u,d]);const M=()=>i(!1);return c.jsxs("header",{className:"p-4 shadow",style:{background:"linear-gradient(90deg, var(--app-card), rgba(255,255,255,0.02))"},children:[c.jsxs("div",{className:"container mx-auto",role:"navigation","aria-label":"Main navigation",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{style:{background:"linear-gradient(135deg, var(--app-primary), var(--app-accent-2))"},className:"p-2 rounded-lg",children:c.jsx(jK,{className:"w-7 h-7 text-white"})}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xl font-semibold",style:{color:"var(--app-text)"},children:"Haven Control Room"}),c.jsx("div",{className:"text-sm muted",style:{color:"var(--app-accent-3)"},children:f?c.jsxs("span",{children:[v?.displayName||v?.username,m&&v?.discordTag&&c.jsxs("span",{className:"ml-1 text-cyan-400",children:["(",v.discordTag,")"]}),p&&c.jsx("span",{className:"ml-1 text-yellow-400",children:"(Super Admin)"}),y&&c.jsx("span",{className:"ml-1 text-amber-400",children:"(Sub-Admin)"}),_&&c.jsx("span",{className:"ml-1 text-red-400",children:"(War Correspondent)"})]}):"Web"})]})]}),c.jsxs("nav",{className:"hidden lg:flex space-x-2","aria-label":"Primary",children:[c.jsx(yn,{className:"px-3 py-1 hover:underline",to:"/",children:"Dashboard"}),c.jsx(yn,{className:"px-3 py-1 hover:underline",to:"/systems",children:"Systems"}),c.jsx("a",{className:"px-3 py-1 hover:underline",href:"/map/latest",children:"Map"}),c.jsx(yn,{className:"px-3 py-1 hover:underline",to:"/create",children:"Create"}),w(yo.SETTINGS)&&c.jsx(yn,{className:"px-3 py-1 hover:underline",to:"/settings",children:"Settings"}),c.jsx(yn,{className:"px-3 py-1 hover:underline",to:"/discoveries",children:"Discoveries"}),c.jsx(yn,{className:"px-3 py-1 hover:underline",to:"/db_stats",children:"DB Stats"}),w(yo.APPROVALS)&&c.jsxs(yn,{className:"px-3 py-1 hover:underline relative",to:"/pending-approvals",children:["Approvals",a>0&&c.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:a>9?"9+":a})]}),p&&c.jsx(yn,{className:"px-3 py-1 hover:underline",to:"/api-keys",children:"API Keys"}),p&&c.jsx(yn,{className:"px-3 py-1 hover:underline",to:"/admin/partners",children:"Partners"}),p&&c.jsx(yn,{className:"px-3 py-1 hover:underline",to:"/admin/audit",children:"Audit Log"}),f&&!_&&c.jsx(yn,{className:"px-3 py-1 hover:underline",to:"/analytics",children:"Analytics"}),f&&!_&&c.jsx(yn,{className:"px-3 py-1 hover:underline",to:"/events",children:"Events"}),(w(yo.WAR_ROOM)||_)&&c.jsx(yn,{className:"px-3 py-1 hover:underline text-red-400 font-bold",to:"/war-room",children:"War Room"}),(p||m)&&c.jsx(yn,{className:"px-3 py-1 hover:underline",to:"/admin/sub-admins",children:"Sub-Admins"}),w(yo.CSV_IMPORT)&&c.jsx(yn,{className:"px-3 py-1 hover:underline",to:"/csv-import",children:"CSV Import"}),f&&!_&&c.jsx(yn,{className:"px-3 py-1 hover:underline",to:"/data-restrictions",children:"Restrictions"}),f?c.jsx("button",{className:"px-3 py-1 bg-red-500 text-white rounded",onClick:()=>t.logout(),children:"Logout"}):c.jsx("button",{className:"px-3 py-1 bg-blue-500 text-white rounded",onClick:()=>n(!0),children:"Login"})]}),c.jsx("button",{className:"lg:hidden p-2 text-white",onClick:()=>i(!r),"aria-label":"Toggle menu",children:r?c.jsx(FK,{className:"w-6 h-6"}):c.jsx(DK,{className:"w-6 h-6"})})]}),r&&c.jsxs("nav",{className:"lg:hidden mt-4 flex flex-col space-y-2 pb-4","aria-label":"Mobile",children:[c.jsx(yn,{className:"px-3 py-2 hover:bg-gray-700 rounded",to:"/",onClick:M,children:"Dashboard"}),c.jsx(yn,{className:"px-3 py-2 hover:bg-gray-700 rounded",to:"/systems",onClick:M,children:"Systems"}),c.jsx("a",{className:"px-3 py-2 hover:bg-gray-700 rounded",href:"/map/latest",onClick:M,children:"Map"}),c.jsx(yn,{className:"px-3 py-2 hover:bg-gray-700 rounded",to:"/create",onClick:M,children:"Create"}),w(yo.SETTINGS)&&c.jsx(yn,{className:"px-3 py-2 hover:bg-gray-700 rounded",to:"/settings",onClick:M,children:"Settings"}),c.jsx(yn,{className:"px-3 py-2 hover:bg-gray-700 rounded",to:"/discoveries",onClick:M,children:"Discoveries"}),c.jsx(yn,{className:"px-3 py-2 hover:bg-gray-700 rounded",to:"/db_stats",onClick:M,children:"DB Stats"}),w(yo.APPROVALS)&&c.jsxs(yn,{className:"px-3 py-2 hover:bg-gray-700 rounded flex justify-between items-center",to:"/pending-approvals",onClick:M,children:[c.jsx("span",{children:"Approvals"}),a>0&&c.jsx("span",{className:"bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:a>9?"9+":a})]}),p&&c.jsx(yn,{className:"px-3 py-2 hover:bg-gray-700 rounded",to:"/api-keys",onClick:M,children:"API Keys"}),p&&c.jsx(yn,{className:"px-3 py-2 hover:bg-gray-700 rounded",to:"/admin/partners",onClick:M,children:"Partners"}),p&&c.jsx(yn,{className:"px-3 py-2 hover:bg-gray-700 rounded",to:"/admin/audit",onClick:M,children:"Audit Log"}),f&&!_&&c.jsx(yn,{className:"px-3 py-2 hover:bg-gray-700 rounded",to:"/analytics",onClick:M,children:"Analytics"}),f&&!_&&c.jsx(yn,{className:"px-3 py-2 hover:bg-gray-700 rounded",to:"/events",onClick:M,children:"Events"}),(w(yo.WAR_ROOM)||_)&&c.jsx(yn,{className:"px-3 py-2 hover:bg-gray-700 rounded text-red-400 font-bold",to:"/war-room",onClick:M,children:"War Room"}),(p||m)&&c.jsx(yn,{className:"px-3 py-2 hover:bg-gray-700 rounded",to:"/admin/sub-admins",onClick:M,children:"Sub-Admins"}),w(yo.CSV_IMPORT)&&c.jsx(yn,{className:"px-3 py-2 hover:bg-gray-700 rounded",to:"/csv-import",onClick:M,children:"CSV Import"}),f&&!_&&c.jsx(yn,{className:"px-3 py-2 hover:bg-gray-700 rounded",to:"/data-restrictions",onClick:M,children:"Data Restrictions"}),c.jsxs("div",{className:"pt-2 border-t border-gray-700",children:[f&&c.jsxs("div",{className:"px-3 py-2 text-sm text-gray-400 mb-2",children:["Logged in as: ",v?.displayName||v?.username,m&&v?.discordTag&&c.jsxs("span",{className:"text-cyan-400",children:[" (",v.discordTag,")"]}),y&&c.jsx("span",{className:"text-amber-400",children:" (Sub-Admin)"}),_&&c.jsx("span",{className:"text-yellow-400",children:" (War Correspondent)"})]}),f?c.jsx("button",{className:"w-full px-3 py-2 bg-red-500 text-white rounded",onClick:()=>{t.logout(),M()},children:"Logout"}):c.jsx("button",{className:"w-full px-3 py-2 bg-blue-500 text-white rounded",onClick:()=>{n(!0),M()},children:"Login"})]})]})]}),c.jsx(QRe,{open:e,onClose:()=>n(!1)})]})}function eDe(){const{isDisconnected:t,reconnect:e}=hP();return t?c.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"p-8 rounded-xl shadow-2xl max-w-md w-full text-center",style:{backgroundColor:"var(--app-card)"},children:[c.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{background:"rgba(240, 173, 78, 0.2)"},children:c.jsx("span",{className:"text-3xl",children:""})}),c.jsx("h2",{className:"text-xl font-semibold mb-2",style:{color:"var(--app-text)"},children:"Session Paused"}),c.jsx("p",{className:"mb-6",style:{color:"var(--muted)"},children:"Your session was paused due to inactivity to save resources. Click below to resume all live connections."}),c.jsx("button",{onClick:e,className:"w-full py-3 px-6 rounded-lg font-semibold text-white transition-all duration-300 hover:scale-105",style:{background:"linear-gradient(135deg, var(--app-primary) 0%, #00a89a 100%)",boxShadow:"0 4px 20px rgba(0, 194, 179, 0.4)"},children:"Reconnect"})]})}):null}function iw({children:t}){const e=E.useContext(kr);return e.loading?c.jsx("div",{className:"flex items-center justify-center min-h-64",children:c.jsx("div",{className:"text-lg text-gray-400",children:"Loading..."})}):e.isAdmin?t:c.jsx(sy,{to:"/",replace:!0})}function j0({children:t}){const e=E.useContext(kr);return e.loading?c.jsx("div",{className:"flex items-center justify-center min-h-64",children:c.jsx("div",{className:"text-lg text-gray-400",children:"Loading..."})}):e.isSuperAdmin?t:c.jsx(sy,{to:"/",replace:!0})}function fA({feature:t,children:e}){const n=E.useContext(kr);return n.loading?c.jsx("div",{className:"flex items-center justify-center min-h-64",children:c.jsx("div",{className:"text-lg text-gray-400",children:"Loading..."})}):n.isAdmin?n.canAccess(t)?e:c.jsx(sy,{to:"/",replace:!0}):c.jsx(sy,{to:"/",replace:!0})}function tDe({children:t}){const e=E.useContext(kr);return e.loading?c.jsx("div",{className:"flex items-center justify-center min-h-64",children:c.jsx("div",{className:"text-lg text-gray-400",children:"Loading..."})}):e.user?.type==="correspondent"||e.isSuperAdmin||e.isAdmin&&e.canAccess(yo.WAR_ROOM)?t:c.jsx(sy,{to:"/",replace:!0})}function nDe(){return E.useEffect(()=>{fetch("/api/settings").then(t=>t.json()).then(t=>{if(!t)return;const e=t.theme||{};e.bg&&document.documentElement.style.setProperty("--app-bg",e.bg),e.text&&document.documentElement.style.setProperty("--app-text",e.text),e.card&&document.documentElement.style.setProperty("--app-card",e.card),e.primary&&document.documentElement.style.setProperty("--app-primary",e.primary)}).catch(()=>{})},[]),c.jsx(TK,{children:c.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"var(--app-bg, #f8fafc)",color:"var(--app-text, #111827)"},children:[c.jsx(JRe,{}),c.jsx("main",{className:"container mx-auto p-6",children:c.jsxs(OX,{children:[c.jsx(Qr,{path:"/",element:c.jsx(CK,{})}),c.jsx(Qr,{path:"/systems",element:c.jsx(zK,{})}),c.jsx(Qr,{path:"/systems/:id",element:c.jsx(GK,{})}),c.jsx(Qr,{path:"/regions/:rx/:ry/:rz",element:c.jsx(tZ,{})}),c.jsx(Qr,{path:"/create",element:c.jsx(AO,{})}),c.jsx(Qr,{path:"/wizard",element:c.jsx(AO,{})}),c.jsx(Qr,{path:"/discoveries",element:c.jsx(Kte,{})}),c.jsx(Qr,{path:"/db_stats",element:c.jsx(Jte,{})}),c.jsx(Qr,{path:"/api-keys",element:c.jsx(j0,{children:c.jsx(tne,{})})}),c.jsx(Qr,{path:"/admin/partners",element:c.jsx(j0,{children:c.jsx(nne,{})})}),c.jsx(Qr,{path:"/admin/partners/:partnerId/sub-admins",element:c.jsx(j0,{children:c.jsx(DO,{})})}),c.jsx(Qr,{path:"/admin/audit",element:c.jsx(j0,{children:c.jsx(Wae,{})})}),c.jsx(Qr,{path:"/analytics",element:c.jsx(iw,{children:c.jsx(p1e,{})})}),c.jsx(Qr,{path:"/events",element:c.jsx(iw,{children:c.jsx(m1e,{})})}),c.jsx(Qr,{path:"/admin/sub-admins",element:c.jsx(iw,{children:c.jsx(DO,{})})}),c.jsx(Qr,{path:"/settings",element:c.jsx(fA,{feature:yo.SETTINGS,children:c.jsx($te,{})})}),c.jsx(Qr,{path:"/pending-approvals",element:c.jsx(fA,{feature:yo.APPROVALS,children:c.jsx(ene,{})})}),c.jsx(Qr,{path:"/csv-import",element:c.jsx(fA,{feature:yo.CSV_IMPORT,children:c.jsx(g1e,{})})}),c.jsx(Qr,{path:"/data-restrictions",element:c.jsx(iw,{children:c.jsx(v1e,{})})}),c.jsx(Qr,{path:"/war-room",element:c.jsx(tDe,{children:c.jsx(KRe,{})})}),c.jsx(Qr,{path:"/war-room/admin",element:c.jsx(j0,{children:c.jsx(ZRe,{})})})]})}),c.jsx(eDe,{})]})})}const rDe=E.createContext(null);function tg(t,e){try{document.documentElement.style.setProperty(t,e)}catch{}}function iDe({children:t}){return E.useEffect(()=>{fetch("/api/settings").then(e=>e.json()).then(e=>{const n=e&&e.theme||e||{},r=n.colors||n||{},i=r.bg_dark||r.bg||n.bg||n.background,a=r.bg_card||r.card||n.card,s=r.accent_cyan||r.accent||n.primary||n.accent_cyan,o=r.text_primary||r.text||n.text,l=r.glow||n.glow;i&&tg("--app-bg",i),o&&tg("--app-text",o),a&&tg("--app-card",a),s&&tg("--app-primary",s),l&&tg("--app-glow",l);const u=r&&Object.keys(r).length?r:n;Object.entries(u).forEach(([d,f])=>{if(!f)return;const p=`--app-${d.replace(/_/g,"-")}`;tg(p,f)})}).catch(()=>{})},[]),c.jsx(rDe.Provider,{value:null,children:t})}Hq.createRoot(document.getElementById("root")).render(c.jsx(Ze.StrictMode,{children:c.jsx(VX,{basename:"/haven-ui",children:c.jsx(iDe,{children:c.jsx(KX,{timeout:36e5,children:c.jsx(nDe,{})})})})}));qe.defaults.withCredentials=!0;
