import{j as e}from"./vendor-three-pXgRM845.js";import{b as N,d as w}from"./vendor-react-DGfbrl1l.js";const _={1:{bg:"rgba(255, 215, 0, 0.15)",border:"rgba(255, 215, 0, 0.3)",text:"#FFD700"},2:{bg:"rgba(192, 192, 192, 0.15)",border:"rgba(192, 192, 192, 0.3)",text:"#C0C0C0"},3:{bg:"rgba(205, 127, 50, 0.15)",border:"rgba(205, 127, 50, 0.3)",text:"#CD7F32"}},g={Haven:"bg-cyan-500",IEA:"bg-green-500","B.E.S":"bg-orange-500",ARCH:"bg-purple-500",TBH:"bg-yellow-500",EVRN:"bg-pink-500",Personal:"bg-gray-500"},u=["bg-indigo-500","bg-violet-500","bg-rose-500","bg-emerald-500","bg-amber-500","bg-sky-500"],m=new Map;function b(s){if(g[s])return g[s];if(m.has(s))return m.get(s);let r=0;for(let d=0;d<(s||"").length;d++)r=s.charCodeAt(d)+((r<<5)-r);const o=u[Math.abs(r)%u.length];return m.set(s,o),o}function R({data:s,showCommunity:r=!0,showRank:o=!0,loading:d=!1}){const[j,f]=N.useState({}),y=t=>{f(c=>({...c,[t]:!c[t]}))};if(d)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"var(--app-primary)"}})});if(!s||s.length===0)return e.jsx("div",{className:"text-center py-12",style:{color:"var(--app-text)",opacity:.5},children:"No submission data found"});const v=(o?1:0)+1+(r?1:0)+4;return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[o&&e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium uppercase tracking-wider",style:{color:"var(--app-accent-3)"},children:"Rank"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium uppercase tracking-wider",style:{color:"var(--app-accent-3)"},children:"Submitter"}),r&&e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium uppercase tracking-wider",style:{color:"var(--app-accent-3)"},children:"Source"}),e.jsx("th",{className:"text-right py-3 px-4 text-xs font-medium uppercase tracking-wider",style:{color:"var(--app-accent-3)"},children:"Total"}),e.jsx("th",{className:"text-right py-3 px-4 text-xs font-medium uppercase tracking-wider",style:{color:"var(--app-accent-3)"},children:"Approved"}),e.jsx("th",{className:"text-right py-3 px-4 text-xs font-medium uppercase tracking-wider",style:{color:"var(--app-accent-3)"},children:"Rejected"}),e.jsx("th",{className:"text-right py-3 px-4 text-xs font-medium uppercase tracking-wider",style:{color:"var(--app-accent-3)"},children:"Rate"})]})}),e.jsx("tbody",{children:s.map((t,c)=>{const h=t.rank||c+1,l=_[h]||null,i=t.tag_breakdown&&t.tag_breakdown.length>1,x=j[c];return e.jsxs(w.Fragment,{children:[e.jsxs("tr",{className:`transition-colors hover:bg-white/5 ${i?"cursor-pointer":""}`,style:{borderBottom:x?"none":"1px solid rgba(255,255,255,0.05)",...l&&{background:l.bg}},onClick:i?()=>y(c):void 0,children:[o&&e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm",style:{background:l?l.bg:"rgba(255,255,255,0.05)",border:l?`2px solid ${l.border}`:"1px solid rgba(255,255,255,0.1)",color:l?l.text:"var(--app-text)"},children:h})}),e.jsxs("td",{className:"py-3 px-4",children:[e.jsx("div",{className:"font-medium",style:{color:"var(--app-text)"},children:t.username||"Unknown"}),t.last_submission&&e.jsxs("div",{className:"text-xs mt-0.5",style:{color:"var(--app-text)",opacity:.5},children:["Last: ",new Date(t.last_submission).toLocaleDateString()]})]}),r&&e.jsx("td",{className:"py-3 px-4",children:t.discord_tags||t.discord_tag?e.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[(t.discord_tags||t.discord_tag||"").split(",").filter(Boolean).map((a,p)=>e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium text-white ${b(a.trim())}`,children:a.trim()},p)),i&&e.jsx("span",{className:"ml-1 text-xs",style:{color:"var(--app-primary)"},children:x?"▲":"▼"})]}):e.jsx("span",{className:"text-xs",style:{color:"var(--app-text)",opacity:.5},children:"-"})}),e.jsx("td",{className:"py-3 px-4 text-right font-semibold",style:{color:"var(--app-text)"},children:t.total_submissions}),e.jsx("td",{className:"py-3 px-4 text-right font-medium",style:{color:"#22c55e"},children:t.approved||0}),e.jsx("td",{className:"py-3 px-4 text-right font-medium",style:{color:"#ef4444"},children:t.rejected||0}),e.jsx("td",{className:"py-3 px-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("div",{className:"h-2 rounded-full overflow-hidden",style:{width:"60px",background:"rgba(255,255,255,0.1)"},children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${t.approval_rate}%`,background:t.approval_rate>=80?"#22c55e":t.approval_rate>=50?"#f59e0b":"#ef4444"}})}),e.jsxs("span",{className:"text-sm font-medium",style:{color:t.approval_rate>=80?"#22c55e":t.approval_rate>=50?"#f59e0b":"#ef4444"},children:[t.approval_rate,"%"]})]})})]}),i&&x&&e.jsx("tr",{children:e.jsx("td",{colSpan:v,style:{padding:0},children:e.jsx("div",{className:"mx-4 mb-3 rounded-lg overflow-hidden",style:{background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255,255,255,0.1)"},children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"rgba(255,255,255,0.03)"},children:[e.jsx("th",{className:"text-left py-2 px-4 text-xs font-medium",style:{color:"var(--app-accent-3)"},children:"Community"}),e.jsx("th",{className:"text-right py-2 px-4 text-xs font-medium",style:{color:"var(--app-accent-3)"},children:"Total"}),e.jsx("th",{className:"text-right py-2 px-4 text-xs font-medium",style:{color:"var(--app-accent-3)"},children:"Approved"}),e.jsx("th",{className:"text-right py-2 px-4 text-xs font-medium",style:{color:"var(--app-accent-3)"},children:"Rejected"}),e.jsx("th",{className:"text-right py-2 px-4 text-xs font-medium",style:{color:"var(--app-accent-3)"},children:"Rate"})]})}),e.jsx("tbody",{children:t.tag_breakdown.map((a,p)=>{const n=a.total>0?Math.round(a.approved/a.total*100):0;return e.jsxs("tr",{style:{borderTop:p>0?"1px solid rgba(255,255,255,0.05)":"none"},children:[e.jsx("td",{className:"py-2 px-4",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium text-white ${b(a.discord_tag)}`,children:a.discord_tag||"-"})}),e.jsx("td",{className:"py-2 px-4 text-right text-sm",style:{color:"var(--app-text)"},children:a.total}),e.jsx("td",{className:"py-2 px-4 text-right text-sm",style:{color:"#22c55e"},children:a.approved||0}),e.jsx("td",{className:"py-2 px-4 text-right text-sm",style:{color:"#ef4444"},children:a.rejected||0}),e.jsxs("td",{className:"py-2 px-4 text-right text-sm",style:{color:n>=80?"#22c55e":n>=50?"#f59e0b":"#ef4444"},children:[n,"%"]})]},p)})})]})})})})]},`${t.username}-${c}`)})})]})})}export{R as L};
