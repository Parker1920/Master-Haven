import{j as t}from"./vendor-three-B8lJlG1P.js";import{b as i}from"./vendor-react-D7IcbEIw.js";import{A as v}from"./index-DfzvULyl.js";import"./vendor-ui-B9ygI19o.js";function x(e){return b[e]?b[e]:e.replace(/_/g," ").replace(/\b\w/g,l=>l.toUpperCase())}function p(e){return e.toLocaleString()}const b={total_regions:"Named Regions",populated_regions:"Populated Regions",regions:"Named Regions"};function N(e,l){return l==="super_admin"?{"Core Data":["total_systems","total_planets","total_moons","populated_regions","total_regions","total_space_stations","total_planet_pois","total_discoveries","unique_galaxies"],Administration:["partner_accounts","sub_admin_accounts","api_keys","active_communities"],"Pending Approvals":["pending_systems","pending_region_names","pending_edit_requests"],"Audit & Activity":["approval_audit_entries","activity_log_entries","data_restrictions"]}:null}function D(){const e=i.useContext(v),{isSuperAdmin:l,isPartner:S,isSubAdmin:A,user:w}=e||{},[n,m]=i.useState(null),[r,h]=i.useState(null),[a,y]=i.useState(null),[_,f]=i.useState(!0);if(i.useEffect(()=>{fetch("/api/db_stats",{credentials:"include"}).then(s=>s.json()).then(s=>{m(s.stats||null),h(s.discord_tag||null),y(s.user_type||"public")}).catch(()=>m(null)).finally(()=>f(!1))},[]),_)return t.jsx("div",{className:"flex items-center justify-center min-h-64",children:t.jsx("div",{className:"text-lg text-gray-400",children:"Loading statistics..."})});const u=N(n,a),c=a==="partner"||a==="sub_admin",j=()=>a==="super_admin"?"Admin Dashboard":c&&r?`${r} Statistics`:"Database Statistics";return t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-2 text-cyan-400",children:j()}),c&&r&&t.jsx("div",{className:"mb-4 p-3 bg-cyan-900/30 border border-cyan-700 rounded",children:t.jsxs("p",{className:"text-cyan-300 text-sm",children:["Showing statistics for your community: ",t.jsx("strong",{className:"text-cyan-400",children:r})]})}),a==="public"&&t.jsx("div",{className:"mb-4 p-3 bg-gray-800/50 border border-gray-600 rounded",children:t.jsx("p",{className:"text-gray-400 text-sm",children:"Showing global database statistics. Log in to see community-specific stats."})}),n?t.jsx(t.Fragment,{children:a==="super_admin"&&u?t.jsx("div",{className:"space-y-6",children:Object.entries(u).map(([s,d])=>{const g=d.filter(o=>n[o]!==void 0);return g.length===0?null:t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-3 border-b border-gray-700 pb-2",children:s}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:g.map(o=>t.jsxs("div",{className:"p-4 bg-gray-800 rounded border border-gray-700 hover:border-cyan-600 transition-colors",children:[t.jsx("div",{className:"text-2xl font-bold text-white",children:p(n[o])}),t.jsx("div",{className:"text-sm text-gray-400",children:x(o)})]},o))})]},s)})}):t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Object.entries(n).map(([s,d])=>t.jsxs("div",{className:"p-4 bg-gray-800 rounded border border-gray-700 hover:border-cyan-600 transition-colors",children:[t.jsx("div",{className:"text-2xl font-bold text-white",children:p(d)}),t.jsx("div",{className:"text-sm text-gray-400",children:x(s)})]},s))})}):t.jsx("div",{className:"text-gray-400",children:"No statistics available."}),c&&r&&t.jsxs("div",{className:"mt-6 p-4 bg-gray-800/50 border border-gray-700 rounded",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"About Your Statistics"}),t.jsxs("ul",{className:"text-sm text-gray-400 space-y-1 list-disc list-inside",children:[t.jsxs("li",{children:["These statistics only include systems tagged with ",r]}),t.jsx("li",{children:"Planets, moons, and POIs are counted from your community's systems"}),t.jsx("li",{children:"Create more systems or request the admin to tag existing systems with your community tag"})]})]})]})}export{D as default};
