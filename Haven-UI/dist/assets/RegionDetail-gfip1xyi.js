import{j as e}from"./vendor-three-B8lJlG1P.js";import{f as Ue,u as Oe,b as n}from"./vendor-react-D7IcbEIw.js";import{a as I}from"./vendor-ui-B9ygI19o.js";import{C as B}from"./Card-C4YgI0Ez.js";import{B as x}from"./Button-CI6OWZ-Z.js";import{A as We,F as Se,M as Ne}from"./index-CIVSKp76.js";import{F as He,a as Ye,b as qe,D as Ze}from"./DiscordTagBadge-Dk1S4C0Q.js";import{F as Qe}from"./XMarkIcon-COi7J9yy.js";import{F as Je}from"./FunnelIcon-Do0aaPDo.js";import"./usePersonalColor--X9CeE-n.js";const Xe=["Lush","Toxic","Scorched","Radioactive","Frozen","Barren","Dead","Exotic","Marsh","Volcanic","Waterworld","Gas Giant","Infested","Mega Exotic","Chromatic Red","Chromatic Green","Chromatic Blue"],ae={Lush:"Lush",Paradise:"Lush",Temperate:"Lush",Tropical:"Lush",Verdant:"Lush",Viridescent:"Lush",Humid:"Lush",Overgrown:"Lush",Flourishing:"Lush",Grassy:"Lush",Bountiful:"Lush",Rainy:"Lush",Frozen:"Frozen",Icy:"Frozen",Arctic:"Frozen",Glacial:"Frozen",Icebound:"Frozen",Frostbound:"Frozen",Freezing:"Frozen","Sub-Zero":"Frozen","Sub-zero":"Frozen",Hiemal:"Frozen",Hyperborean:"Frozen",Toxic:"Toxic",Poisonous:"Toxic",Noxious:"Toxic",Corrosive:"Toxic",Acidic:"Toxic",Caustic:"Toxic",Acrid:"Toxic",Blighted:"Toxic",Miasmatic:"Toxic",Rotting:"Toxic",Scorched:"Scorched",Hot:"Scorched",Fiery:"Scorched",Boiling:"Scorched",Torrid:"Scorched",Incandescent:"Scorched",Scalding:"Scorched",Charred:"Scorched",Arid:"Scorched","High Temperature":"Scorched",Radioactive:"Radioactive",Irradiated:"Radioactive",Nuclear:"Radioactive",Isotopic:"Radioactive",Contaminated:"Radioactive","Decaying Nuclear":"Radioactive","Gamma Intensive":"Radioactive","Gamma-Intensive":"Radioactive","High Radio Source":"Radioactive",Supercritical:"Radioactive","High Energy":"Radioactive",Barren:"Barren",Desert:"Barren",Rocky:"Barren",Bleak:"Barren",Parched:"Barren",Dusty:"Barren",Desolate:"Barren","Wind-Swept":"Barren","Wind-swept":"Barren",Abandoned:"Barren",Dead:"Dead",Empty:"Dead",Lifeless:"Dead",Forsaken:"Dead","Life-Incompatible":"Dead","Low Atmosphere":"Dead",Airless:"Dead","Terraforming Catastrophe":"Dead",Marsh:"Marsh",Marshy:"Marsh",Swamp:"Marsh",Boggy:"Marsh",Foggy:"Marsh",Misty:"Marsh",Hazy:"Marsh",Murky:"Marsh",Damp:"Marsh",Quagmire:"Marsh",Reeking:"Marsh",Vapour:"Marsh",Cloudy:"Marsh","Endless Morass":"Marsh",Volcanic:"Volcanic",Lava:"Volcanic",Magma:"Volcanic",Erupting:"Volcanic",Molten:"Volcanic",Ashen:"Volcanic","Ash-shrouded":"Volcanic","Ash-Shrouded":"Volcanic",Tectonic:"Volcanic",Basalt:"Volcanic","Flame-Ruptured":"Volcanic",Unstable:"Volcanic",Violent:"Volcanic","Imminent Core Detonation":"Volcanic","Obsidian Bead":"Volcanic",Exotic:"Exotic",Weird:"Exotic",Fissured:"Exotic","Of Light":"Exotic",Breached:"Exotic",Rattling:"Exotic",Spined:"Exotic",Skeletal:"Exotic",Bubbling:"Exotic",Frothing:"Exotic",Foaming:"Exotic",Contoured:"Exotic",Cabled:"Exotic",Webbed:"Exotic",Mechanical:"Exotic",Metallic:"Exotic",Metallurgic:"Exotic",Hexagonal:"Exotic",Plated:"Exotic",Scaly:"Exotic",Fungal:"Exotic",Sporal:"Exotic",Capped:"Exotic",Finned:"Exotic",Bladed:"Exotic","Shell-Strewn":"Exotic",Ossified:"Exotic",Petrified:"Exotic",Calcified:"Exotic",Columned:"Exotic",Sharded:"Exotic",Pillared:"Exotic",Shattered:"Exotic",Fractured:"Exotic",Fragmented:"Exotic","Planetary Anomaly":"Exotic",Malfunctioning:"Exotic","[REDACTED]":"Exotic",Glassy:"Exotic",Thirsty:"Exotic",Doomed:"Exotic",Erased:"Exotic",Temporary:"Exotic",Corrupted:"Exotic",Crimson:"Chromatic Red","Lost Red":"Chromatic Red","Vermillion Globe":"Chromatic Red",Scarlet:"Chromatic Red",Blood:"Chromatic Red","Wine Dark":"Chromatic Red","Lost Green":"Chromatic Green","Vile Anomaly":"Chromatic Green","Toxic Anomaly":"Chromatic Green","Doomed Jade":"Chromatic Green","Haunted Emeril":"Chromatic Green","Deathly Green Anomaly":"Chromatic Green","Lost Blue":"Chromatic Blue","Harsh Blue Globe":"Chromatic Blue","Frozen Anomaly":"Chromatic Blue",Azure:"Chromatic Blue",Cerulean:"Chromatic Blue",Ultramarine:"Chromatic Blue","Chromatic Fog":"Mega Exotic","Stellar Corruption":"Mega Exotic","Stellar Corruption Detected":"Mega Exotic",Infested:"Infested","The Nest":"Infested","Xeno-Colony":"Infested","Worm-Ridden":"Infested","Worm-ridden":"Infested","Infested Paradise":"Infested","Boiling Doom":"Infested","Fiery Dreadworld":"Infested","Icy Abhorrence":"Infested","Frozen Hell":"Infested","Caustic Nightmare":"Infested","Toxic Horror":"Infested","Radioactive Abomination":"Infested",Mutated:"Infested","Mutating Relic":"Infested",Terrorsphere:"Infested","Infected Dustbowl":"Infested",Tainted:"Infested",Waterworld:"Waterworld",Drowning:"Waterworld",Endless:"Waterworld","Gas Giant":"Gas Giant",Ruined:"Dead","Ruined Dustbowl":"Barren","Bleached Ruin":"Dead","Scorched Relic":"Scorched","Overgrown Relic":"Lush","Abandoned Crucible":"Scorched","Abandoned Paradise":"Lush","Claimed By Decay":"Dead","Lost To Fire":"Scorched"},we={Lush:"bg-green-500",Frozen:"bg-cyan-400",Toxic:"bg-lime-500",Scorched:"bg-orange-500",Radioactive:"bg-yellow-400",Barren:"bg-amber-600",Dead:"bg-gray-500",Marsh:"bg-teal-500",Volcanic:"bg-red-600",Exotic:"bg-purple-500","Mega Exotic":"bg-pink-500","Chromatic Red":"bg-red-500","Chromatic Green":"bg-emerald-500","Chromatic Blue":"bg-blue-500",Infested:"bg-rose-700",Waterworld:"bg-sky-500","Gas Giant":"bg-indigo-400",Unknown:"bg-gray-600"};function Ke(a){if(!a)return"Unknown";if(ae[a])return ae[a];const i=a.trim();for(const[o,m]of Object.entries(ae))if(o.toLowerCase()===i.toLowerCase())return m;return Xe.includes(i)?i:(i.startsWith("Unknown"),"Unknown")}function es(a){return we[a]||we.Unknown}function ss(a){const i={};for(const[o,m]of Object.entries(a)){const c=Ke(o);i[c]=(i[c]||0)+m}return i}function as(a,i){const[o,m]=n.useState(a);return n.useEffect(()=>{const c=setTimeout(()=>m(a),i);return()=>clearTimeout(c)},[a,i]),o}function ts(a){if(!a)return null;if(a.startsWith("http"))return a;const o=a.replace(/\\/g,"/").split("/"),m=o[o.length-1];return`/haven-ui-photos/${encodeURIComponent(m)}`}function rs(a){if(!a)return null;const o={Yellow:"bg-yellow-500 text-black",Red:"bg-red-500 text-white",Green:"bg-green-500 text-white",Blue:"bg-blue-500 text-white",Purple:"bg-purple-500 text-white"}[a]||"bg-gray-500 text-white";return e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${o}`,children:a})}function ns({system:a,isSelected:i,onSelect:o,showCheckbox:m,onClick:c}){const u=ts(a.photo||a.planets?.[0]?.photo);return e.jsxs("div",{className:`relative rounded-lg border transition-all cursor-pointer hover:shadow-lg ${i?"border-indigo-500 bg-indigo-900/30 ring-2 ring-indigo-400":"border-gray-700 bg-gray-800/50 hover:bg-gray-700/50 hover:border-gray-600"}`,onClick:c,children:[m&&e.jsx("div",{className:"absolute top-2 left-2 z-10",onClick:q=>q.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:i,onChange:o,className:"w-5 h-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),e.jsx("div",{className:"h-32 bg-gray-900 rounded-t-lg overflow-hidden",children:u?e.jsx("img",{src:u,alt:a.name,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600",children:e.jsx(Se,{className:"w-12 h-12"})})}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-semibold text-lg truncate mb-2",title:a.name,children:a.name}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[rs(a.star_type),e.jsx("span",{className:"text-xs bg-blue-600/50 text-blue-200 px-1.5 py-0.5 rounded",children:a.galaxy||"Euclid"}),e.jsx(Ze,{tag:a.discord_tag})]}),e.jsxs("div",{className:"text-sm text-gray-400 flex items-center gap-3",children:[e.jsxs("span",{children:[a.planets?.length||a.planet_count||0," planets"]}),a.glyph_code&&e.jsxs("span",{className:"font-mono text-purple-400 text-xs truncate",title:a.glyph_code,children:[a.glyph_code.substring(0,8),"..."]})]})]})]})}function ps(){const{rx:a,ry:i,rz:o}=Ue(),m=Oe(),c=n.useContext(We),[u,q]=n.useState(null),[j,te]=n.useState([]),[Ce,re]=n.useState(!0),[ne,le]=n.useState(null),[g,E]=n.useState(1),[D,ie]=n.useState(0),_=100,[Z,Ee]=n.useState([]),[oe,De]=n.useState(""),R=as(oe,300),[v,Q]=n.useState("all"),[N,J]=n.useState("all"),[y,X]=n.useState("all"),[L,ce]=n.useState("name"),[G,de]=n.useState("asc"),[F,ke]=n.useState(!1),[w,xe]=n.useState(!1),[M,V]=n.useState(new Set),[K,Be]=n.useState(!1),[Re,z]=n.useState(!1),[T,ee]=n.useState(""),[p,A]=n.useState(null),[U,me]=n.useState(""),[se,ue]=n.useState(!1),[S,$]=n.useState(""),[Fe,k]=n.useState(!1),[Me,O]=n.useState(!1);n.useEffect(()=>{E(1),ge()},[a,i,o]),n.useEffect(()=>{he()},[a,i,o,g]),n.useEffect(()=>{I.get("/api/discord_tags").then(s=>{Ee(s.data.tags||[])}).catch(()=>{})},[]);async function ge(){re(!0),le(null);try{const s=await I.get(`/api/regions/${a}/${i}/${o}`);q(s.data)}catch(s){le(s.response?.data?.detail||"Failed to load region data")}finally{re(!1)}}async function he(){try{const s=await I.get(`/api/regions/${a}/${i}/${o}/systems?include_planets=true&limit=${_}&page=${g}`);te(s.data.systems||[]),ie(s.data.total||0)}catch(s){console.error("Failed to load systems:",s),te([]),ie(0)}}async function Te(){await Promise.all([ge(),he()])}const C=n.useMemo(()=>{let s=0,t=0,r=0;const l=new Set,d={},h={},b={};j.forEach(P=>{l.add(P.galaxy||"Euclid");const be=P.star_type||"Unknown";b[be]=(b[be]||0)+1;const fe=P.economy_type||"Unknown";h[fe]=(h[fe]||0)+1,r+=P.discoveries?.length||0;const ye=P.planets||[];s+=ye.length,ye.forEach(je=>{t+=je.moons?.length||0;const ve=je.biome||"Unknown";d[ve]=(d[ve]||0)+1})});const ze=ss(d);return{systemCount:j.length,planetCount:s,moonCount:t,discoveryCount:r,galaxies:Array.from(l),biomeDistribution:ze,rawBiomeDistribution:d,economyDistribution:h,starTypeDistribution:b}},[j]),W=n.useMemo(()=>{const s=new Set,t=new Set;return j.forEach(r=>{r.galaxy&&s.add(r.galaxy),r.star_type&&t.add(r.star_type)}),{galaxies:Array.from(s).sort(),starTypes:Array.from(t).sort()}},[j]),H=n.useMemo(()=>{let s=0;return v!=="all"&&s++,N!=="all"&&s++,y!=="all"&&s++,s},[v,N,y]),f=Math.ceil(D/_),Ae=D===0?0:(g-1)*_+1,$e=Math.min(g*_,D),Y=n.useMemo(()=>{let s=[...j];if(R.trim()){const t=R.toLowerCase();s=s.filter(r=>r.name?.toLowerCase().includes(t)||r.glyph_code?.toLowerCase().includes(t)||r.description?.toLowerCase().includes(t))}return v!=="all"&&(s=s.filter(t=>t.galaxy===v)),N!=="all"&&(s=s.filter(t=>t.star_type===N)),y!=="all"&&(y==="untagged"?s=s.filter(t=>!t.discord_tag):s=s.filter(t=>t.discord_tag===y)),s.sort((t,r)=>{let l=0;switch(L){case"name":l=(t.name||"").localeCompare(r.name||"");break;case"date":l=new Date(t.created_at||0)-new Date(r.created_at||0);break;case"planets":l=(t.planets?.length||0)-(r.planets?.length||0);break;default:l=0}return G==="asc"?l:-l}),s},[j,R,v,N,y,L,G]);function Pe(s){V(t=>{const r=new Set(t);return r.has(s)?r.delete(s):r.add(s),r})}function Ie(){V(new Set(Y.map(s=>s.id)))}function _e(){V(new Set)}function Le(){xe(!1),V(new Set)}async function Ge(s){if(s.preventDefault(),!T.trim())return;const t=c?.isAdmin&&!c?.isSuperAdmin,r=t?c?.user?.username:U.trim();if(!c?.isSuperAdmin){if(!p){alert("Please select a Discord Community or Personal");return}if(p==="personal"&&!S.trim()){alert("Discord username is required for personal submissions."),k(!0);return}if(p!=="personal"&&!t&&!U.trim()){alert("Please enter your Discord Username");return}}ue(!0);try{if(c?.isSuperAdmin)await I.put(`/api/regions/${a}/${i}/${o}`,{custom_name:T.trim()});else{let l=r;p==="personal"&&(l=S.trim()),await I.post(`/api/regions/${a}/${i}/${o}/submit`,{proposed_name:T.trim(),discord_tag:p,personal_discord_username:l})}z(!1),ee(""),A(null),me(""),$(""),Te(),alert(c?.isSuperAdmin?"Region name updated!":"Name submitted for approval!")}catch(l){alert("Failed: "+(l.response?.data?.detail||l.message))}finally{ue(!1)}}function pe({title:s,data:t,colorFn:r}){const l=Object.entries(t).sort((h,b)=>b[1]-h[1]),d=l.reduce((h,[,b])=>h+b,0);return d===0?null:e.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-300",children:s}),e.jsxs("div",{className:"space-y-1",children:[l.slice(0,5).map(([h,b])=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-0.5",children:[e.jsx("span",{className:"text-gray-400",children:h}),e.jsx("span",{className:"text-gray-500",children:b})]}),e.jsx("div",{className:"h-1.5 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${r?r(h):"bg-cyan-500"}`,style:{width:`${b/d*100}%`}})})]})},h)),l.length>5&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["+",l.length-5," more"]})]})]})}function Ve({data:s}){const t=Object.entries(s).sort((l,d)=>d[1]-l[1]),r=t.reduce((l,[,d])=>l+d,0);return r===0?null:e.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-300",children:"Biomes"}),e.jsx("div",{className:"max-h-64 overflow-y-auto pr-1 space-y-1 scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800",children:t.map(([l,d])=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-0.5",children:[e.jsx("span",{className:"text-gray-400",children:l}),e.jsx("span",{className:"text-gray-500",children:d})]}),e.jsx("div",{className:"h-1.5 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${es(l)}`,style:{width:`${d/r*100}%`}})})]})},l))}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2 pt-2 border-t border-gray-700",children:[t.length," biome categories | ",r," total planets"]})]})}return Ce?e.jsx("div",{className:"p-6",children:e.jsx(B,{children:e.jsx("div",{className:"text-center py-8",children:"Loading region..."})})}):ne?e.jsx("div",{className:"p-6",children:e.jsxs(B,{children:[e.jsx("div",{className:"text-center py-8 text-red-500",children:ne}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(x,{onClick:()=>m("/systems"),children:"Back to Systems"})})]})}):(u?.custom_name||`${a}${i}${o}`,e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx(B,{className:"mb-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-1",children:u?.custom_name?e.jsx("span",{className:"text-purple-400",children:u.custom_name}):e.jsxs("span",{className:"text-gray-300",children:["Region (",a,", ",i,", ",o,")"]})}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Coordinates: [",a,", ",i,", ",o,"]",u?.pending_name&&e.jsxs("span",{className:"ml-3 text-yellow-400",children:['Pending name: "',u.pending_name.proposed_name,'"']})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("a",{href:`/map/region?rx=${a}&ry=${i}&rz=${o}`,target:"_blank",rel:"noopener noreferrer",children:e.jsxs(x,{className:"bg-cyan-600 hover:bg-cyan-700",children:[e.jsx(Se,{className:"w-4 h-4 mr-1 inline"}),"3D Map"]})}),e.jsxs(x,{className:"bg-purple-600 hover:bg-purple-700",onClick:()=>{ee(u?.custom_name||""),c?.isAdmin&&!c?.isSuperAdmin&&c?.user?.discord_tag?A(c.user.discord_tag):A(null),$(""),z(!0)},children:[e.jsx(He,{className:"w-4 h-4 mr-1 inline"}),u?.custom_name?"Edit Name":"Set Name"]}),e.jsx(x,{className:"bg-gray-600 hover:bg-gray-700",onClick:()=>m("/systems"),children:"Back"})]})]})}),e.jsxs(B,{className:"mb-4",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:D}),e.jsx("div",{className:"text-xs text-gray-400",children:"Systems"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:C.planetCount}),e.jsx("div",{className:"text-xs text-gray-400",children:"Planets"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:C.moonCount}),e.jsx("div",{className:"text-xs text-gray-400",children:"Moons"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:C.discoveryCount}),e.jsx("div",{className:"text-xs text-gray-400",children:"Discoveries"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-blue-400",children:C.galaxies.join(", ")}),e.jsx("div",{className:"text-xs text-gray-400",children:"Galaxies"})]})]}),e.jsx("button",{className:"w-full mt-3 py-2 text-sm text-gray-400 hover:text-white flex items-center justify-center gap-1",onClick:()=>Be(!K),children:K?e.jsxs(e.Fragment,{children:["Hide Breakdown ",e.jsx(Ye,{className:"w-4 h-4"})]}):e.jsxs(e.Fragment,{children:["Show Breakdown ",e.jsx(qe,{className:"w-4 h-4"})]})}),K&&e.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(Ve,{data:C.biomeDistribution}),e.jsx(pe,{title:"Star Types",data:C.starTypeDistribution,colorFn:s=>({Yellow:"bg-yellow-500",Red:"bg-red-500",Green:"bg-green-500",Blue:"bg-blue-500",Purple:"bg-purple-500"})[s]||"bg-gray-500"}),e.jsx(pe,{title:"Economy Types",data:C.economyDistribution,colorFn:()=>"bg-emerald-500"})]})]}),e.jsxs(B,{className:"mb-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search systems...",value:oe,onChange:s=>De(s.target.value),className:"w-full px-3 py-2 rounded bg-gray-800 border border-gray-700 focus:border-cyan-500 focus:outline-none"})}),e.jsxs("button",{className:`lg:hidden px-3 py-2 rounded border transition-colors flex items-center gap-1.5 ${F||H>0?"bg-cyan-600 border-cyan-500 text-white":"bg-gray-700 border-gray-600 text-gray-300"}`,onClick:()=>ke(!F),children:[F?e.jsx(Qe,{className:"w-5 h-5"}):e.jsx(Je,{className:"w-5 h-5"}),H>0&&!F&&e.jsx("span",{className:"bg-white text-cyan-600 text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:H})]}),e.jsxs("div",{className:"hidden lg:flex flex-wrap gap-2",children:[e.jsxs("select",{value:v,onChange:s=>Q(s.target.value),className:"px-3 py-2 rounded bg-gray-800 border border-gray-700 text-sm",children:[e.jsx("option",{value:"all",children:"All Galaxies"}),W.galaxies.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{value:N,onChange:s=>J(s.target.value),className:"px-3 py-2 rounded bg-gray-800 border border-gray-700 text-sm",children:[e.jsx("option",{value:"all",children:"All Stars"}),W.starTypes.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{value:y,onChange:s=>X(s.target.value),className:"px-3 py-2 rounded bg-gray-800 border border-gray-700 text-sm",children:[e.jsx("option",{value:"all",children:"All Tags"}),e.jsx("option",{value:"untagged",children:"Untagged"}),Z.map(s=>e.jsx("option",{value:s.tag,children:s.name},s.tag))]}),e.jsxs("select",{value:`${L}-${G}`,onChange:s=>{const[t,r]=s.target.value.split("-");ce(t),de(r)},className:"px-3 py-2 rounded bg-gray-800 border border-gray-700 text-sm",children:[e.jsx("option",{value:"name-asc",children:"Name A-Z"}),e.jsx("option",{value:"name-desc",children:"Name Z-A"}),e.jsx("option",{value:"date-desc",children:"Newest First"}),e.jsx("option",{value:"date-asc",children:"Oldest First"}),e.jsx("option",{value:"planets-desc",children:"Most Planets"}),e.jsx("option",{value:"planets-asc",children:"Fewest Planets"})]})]})]}),F&&e.jsxs("div",{className:"lg:hidden bg-gray-800/50 rounded-lg p-4 space-y-4 border border-gray-700",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Sort By"}),e.jsxs("select",{value:`${L}-${G}`,onChange:s=>{const[t,r]=s.target.value.split("-");ce(t),de(r)},className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-sm",children:[e.jsx("option",{value:"name-asc",children:"Name A-Z"}),e.jsx("option",{value:"name-desc",children:"Name Z-A"}),e.jsx("option",{value:"date-desc",children:"Newest First"}),e.jsx("option",{value:"date-asc",children:"Oldest First"}),e.jsx("option",{value:"planets-desc",children:"Most Planets"}),e.jsx("option",{value:"planets-asc",children:"Fewest Planets"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Galaxy"}),e.jsxs("select",{value:v,onChange:s=>Q(s.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-sm",children:[e.jsx("option",{value:"all",children:"All Galaxies"}),W.galaxies.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Star Type"}),e.jsxs("select",{value:N,onChange:s=>J(s.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-sm",children:[e.jsx("option",{value:"all",children:"All Stars"}),W.starTypes.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Community Tag"}),e.jsxs("select",{value:y,onChange:s=>X(s.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-sm",children:[e.jsx("option",{value:"all",children:"All Tags"}),e.jsx("option",{value:"untagged",children:"Untagged"}),Z.map(s=>e.jsx("option",{value:s.tag,children:s.name},s.tag))]})]}),H>0&&e.jsx("button",{onClick:()=>{Q("all"),J("all"),X("all")},className:"w-full py-2 text-sm text-cyan-400 hover:text-cyan-300 border border-gray-600 rounded",children:"Clear All Filters"})]})]}),c?.isAdmin&&e.jsxs("div",{className:"mt-3 flex items-center justify-between border-t border-gray-700 pt-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{className:w?"bg-amber-600 hover:bg-amber-700":"bg-indigo-600 hover:bg-indigo-700",onClick:()=>w?Le():xe(!0),children:w?"Exit Bulk Mode":"Bulk Mode"}),w&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-sm text-gray-400",children:[M.size," selected"]}),e.jsx("button",{onClick:Ie,className:"text-sm text-indigo-400 hover:text-indigo-300 underline",children:"Select All"}),M.size>0&&e.jsx("button",{onClick:_e,className:"text-sm text-gray-400 hover:text-white underline",children:"Clear"})]})]}),w&&M.size>0&&e.jsx("div",{className:"flex gap-2",children:e.jsxs(x,{className:"bg-red-600 hover:bg-red-700 text-sm",children:["Delete (",M.size,")"]})})]})]}),e.jsxs("div",{className:"mb-3 text-sm text-gray-400 flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("span",{children:["Showing ",Ae,"-",$e," of ",D," systems",R&&` (${Y.length} matching "${R}")`]}),f>1&&e.jsxs("span",{className:"text-cyan-400",children:["Page ",g," of ",f]})]}),Y.length===0?e.jsx(B,{children:e.jsx("div",{className:"text-center py-8 text-gray-400",children:D===0?"No systems in this region":"No systems match your filters"})}):e.jsx("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5",children:Y.map(s=>e.jsx(ns,{system:s,isSelected:M.has(s.id),onSelect:()=>Pe(s.id),showCheckbox:w,onClick:()=>{w||m(`/systems/${encodeURIComponent(s.id)}`)}},s.id))}),f>1&&e.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-center gap-2",children:[e.jsx(x,{variant:"ghost",className:"px-3 py-2",onClick:()=>E(1),disabled:g===1,children:"« First"}),e.jsx(x,{variant:"ghost",className:"px-3 py-2",onClick:()=>E(s=>Math.max(1,s-1)),disabled:g===1,children:"‹ Prev"}),e.jsx("div",{className:"flex items-center gap-1",children:(()=>{const s=[];let r=Math.max(1,g-Math.floor(2.5)),l=Math.min(f,r+5-1);l-r+1<5&&(r=Math.max(1,l-5+1)),r>1&&s.push(e.jsx("span",{className:"px-2 text-gray-500",children:"..."},"start-ellipsis"));for(let d=r;d<=l;d++)s.push(e.jsx("button",{onClick:()=>E(d),className:`px-3 py-1 rounded transition-colors ${d===g?"bg-cyan-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:d},d));return l<f&&s.push(e.jsx("span",{className:"px-2 text-gray-500",children:"..."},"end-ellipsis")),s})()}),e.jsx(x,{variant:"ghost",className:"px-3 py-2",onClick:()=>E(s=>Math.min(f,s+1)),disabled:g===f,children:"Next ›"}),e.jsx(x,{variant:"ghost",className:"px-3 py-2",onClick:()=>E(f),disabled:g===f,children:"Last »"})]}),Re&&e.jsx(Ne,{title:u?.custom_name?"Edit Region Name":"Set Region Name",onClose:()=>z(!1),children:e.jsxs("form",{onSubmit:Ge,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Region Name"}),e.jsx("input",{type:"text",value:T,onChange:s=>ee(s.target.value),placeholder:"Enter region name...",className:"w-full px-3 py-2 rounded border border-gray-600 bg-gray-800 focus:border-purple-500 focus:outline-none",autoFocus:!0}),!c?.isSuperAdmin&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Your submission will be reviewed before approval."})]}),!c?.isSuperAdmin&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["Discord Community ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{className:`w-full px-3 py-2 rounded border bg-gray-800 focus:outline-none ${p?"border-gray-600 focus:border-purple-500":"border-red-500"}`,value:p||"",onChange:s=>{const t=s.target.value;t==="personal"?(k(!0),O(!0)):(A(t||null),p==="personal"&&$(""))},required:!0,children:[e.jsx("option",{value:"",children:"-- Select Community (Required) --"}),Z.filter(s=>s.tag!=="Personal").map(s=>e.jsxs("option",{value:s.tag,children:[s.name," (",s.tag,")"]},s.tag)),e.jsx("option",{value:"personal",children:"Personal (No Community Affiliation)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select which Discord community will review this region name, or "Personal" if not affiliated.'}),p==="personal"&&S&&e.jsxs("div",{className:"mt-2 p-2 bg-fuchsia-900/30 border border-fuchsia-500 rounded flex justify-between items-center",children:[e.jsxs("span",{className:"text-fuchsia-300",children:["Discord Username: ",e.jsx("strong",{children:S})]}),e.jsx("button",{type:"button",className:"text-fuchsia-400 hover:text-fuchsia-200 text-sm underline",onClick:()=>k(!0),children:"Edit"})]})]}),p!=="personal"&&(c?.isAdmin?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Submitting As"}),e.jsx("div",{className:"w-full px-3 py-2 rounded border border-gray-600 bg-gray-700 text-gray-300",children:c?.user?.username||"Unknown"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Your logged-in username will be used for tracking"})]}):e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["Your Discord Username ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",value:U,onChange:s=>me(s.target.value),placeholder:"e.g., YourName#1234",className:`w-full px-3 py-2 rounded border bg-gray-800 focus:outline-none ${U.trim()?"border-gray-600 focus:border-purple-500":"border-red-500"}`,required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"So we can contact you if needed"})]}))]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{type:"submit",className:"bg-purple-600 hover:bg-purple-700",disabled:se||!T.trim(),children:se?"Submitting...":c?.isSuperAdmin?"Save":"Submit for Approval"}),e.jsx(x,{type:"button",className:"bg-gray-600 hover:bg-gray-700",onClick:()=>z(!1),disabled:se,children:"Cancel"})]})]})}),Fe&&e.jsx(Ne,{title:"Personal Discord Username",onClose:()=>{k(!1),Me&&!S.trim()&&O(!1)},children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-400",children:'Since you selected "Personal" (no community affiliation), please provide your Discord username so we can contact you about this region name submission.'}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["Your Discord Username ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",value:S,onChange:s=>$(s.target.value),placeholder:"e.g., YourName#1234",className:"w-full px-3 py-2 rounded border border-gray-600 bg-gray-800 focus:border-fuchsia-500 focus:outline-none",autoFocus:!0})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{className:"bg-fuchsia-600 hover:bg-fuchsia-700",onClick:()=>{if(!S.trim()){alert("Discord username is required");return}A("personal"),O(!1),k(!1)},children:"Confirm"}),e.jsx(x,{className:"bg-gray-600 hover:bg-gray-700",onClick:()=>{k(!1),$(""),O(!1)},children:"Cancel"})]})]})})]}))}export{ps as default};
