import{j as e}from"./vendor-three-B8lJlG1P.js";import{f as Ie,u as Le,b as n}from"./vendor-react-D7IcbEIw.js";import{a as M}from"./vendor-ui-B9ygI19o.js";import{C as E}from"./Card-C4YgI0Ez.js";import{B as m}from"./Button-CI6OWZ-Z.js";import{A as _e,F as fe,M as Ge}from"./index-DfzvULyl.js";import{F as Ve,a as ze,b as Pe,D as Ue}from"./DiscordTagBadge-Dk1S4C0Q.js";import{F as Oe}from"./XMarkIcon-COi7J9yy.js";import{F as We}from"./FunnelIcon-Do0aaPDo.js";import"./usePersonalColor--X9CeE-n.js";const He=["Lush","Toxic","Scorched","Radioactive","Frozen","Barren","Dead","Exotic","Marsh","Volcanic","Waterworld","Gas Giant","Infested","Mega Exotic","Chromatic Red","Chromatic Green","Chromatic Blue"],J={Lush:"Lush",Paradise:"Lush",Temperate:"Lush",Tropical:"Lush",Verdant:"Lush",Viridescent:"Lush",Humid:"Lush",Overgrown:"Lush",Flourishing:"Lush",Grassy:"Lush",Bountiful:"Lush",Rainy:"Lush",Frozen:"Frozen",Icy:"Frozen",Arctic:"Frozen",Glacial:"Frozen",Icebound:"Frozen",Frostbound:"Frozen",Freezing:"Frozen","Sub-Zero":"Frozen","Sub-zero":"Frozen",Hiemal:"Frozen",Hyperborean:"Frozen",Toxic:"Toxic",Poisonous:"Toxic",Noxious:"Toxic",Corrosive:"Toxic",Acidic:"Toxic",Caustic:"Toxic",Acrid:"Toxic",Blighted:"Toxic",Miasmatic:"Toxic",Rotting:"Toxic",Scorched:"Scorched",Hot:"Scorched",Fiery:"Scorched",Boiling:"Scorched",Torrid:"Scorched",Incandescent:"Scorched",Scalding:"Scorched",Charred:"Scorched",Arid:"Scorched","High Temperature":"Scorched",Radioactive:"Radioactive",Irradiated:"Radioactive",Nuclear:"Radioactive",Isotopic:"Radioactive",Contaminated:"Radioactive","Decaying Nuclear":"Radioactive","Gamma Intensive":"Radioactive","Gamma-Intensive":"Radioactive","High Radio Source":"Radioactive",Supercritical:"Radioactive","High Energy":"Radioactive",Barren:"Barren",Desert:"Barren",Rocky:"Barren",Bleak:"Barren",Parched:"Barren",Dusty:"Barren",Desolate:"Barren","Wind-Swept":"Barren","Wind-swept":"Barren",Abandoned:"Barren",Dead:"Dead",Empty:"Dead",Lifeless:"Dead",Forsaken:"Dead","Life-Incompatible":"Dead","Low Atmosphere":"Dead",Airless:"Dead","Terraforming Catastrophe":"Dead",Marsh:"Marsh",Marshy:"Marsh",Swamp:"Marsh",Boggy:"Marsh",Foggy:"Marsh",Misty:"Marsh",Hazy:"Marsh",Murky:"Marsh",Damp:"Marsh",Quagmire:"Marsh",Reeking:"Marsh",Vapour:"Marsh",Cloudy:"Marsh","Endless Morass":"Marsh",Volcanic:"Volcanic",Lava:"Volcanic",Magma:"Volcanic",Erupting:"Volcanic",Molten:"Volcanic",Ashen:"Volcanic","Ash-shrouded":"Volcanic","Ash-Shrouded":"Volcanic",Tectonic:"Volcanic",Basalt:"Volcanic","Flame-Ruptured":"Volcanic",Unstable:"Volcanic",Violent:"Volcanic","Imminent Core Detonation":"Volcanic","Obsidian Bead":"Volcanic",Exotic:"Exotic",Weird:"Exotic",Fissured:"Exotic","Of Light":"Exotic",Breached:"Exotic",Rattling:"Exotic",Spined:"Exotic",Skeletal:"Exotic",Bubbling:"Exotic",Frothing:"Exotic",Foaming:"Exotic",Contoured:"Exotic",Cabled:"Exotic",Webbed:"Exotic",Mechanical:"Exotic",Metallic:"Exotic",Metallurgic:"Exotic",Hexagonal:"Exotic",Plated:"Exotic",Scaly:"Exotic",Fungal:"Exotic",Sporal:"Exotic",Capped:"Exotic",Finned:"Exotic",Bladed:"Exotic","Shell-Strewn":"Exotic",Ossified:"Exotic",Petrified:"Exotic",Calcified:"Exotic",Columned:"Exotic",Sharded:"Exotic",Pillared:"Exotic",Shattered:"Exotic",Fractured:"Exotic",Fragmented:"Exotic","Planetary Anomaly":"Exotic",Malfunctioning:"Exotic","[REDACTED]":"Exotic",Glassy:"Exotic",Thirsty:"Exotic",Doomed:"Exotic",Erased:"Exotic",Temporary:"Exotic",Corrupted:"Exotic",Crimson:"Chromatic Red","Lost Red":"Chromatic Red","Vermillion Globe":"Chromatic Red",Scarlet:"Chromatic Red",Blood:"Chromatic Red","Wine Dark":"Chromatic Red","Lost Green":"Chromatic Green","Vile Anomaly":"Chromatic Green","Toxic Anomaly":"Chromatic Green","Doomed Jade":"Chromatic Green","Haunted Emeril":"Chromatic Green","Deathly Green Anomaly":"Chromatic Green","Lost Blue":"Chromatic Blue","Harsh Blue Globe":"Chromatic Blue","Frozen Anomaly":"Chromatic Blue",Azure:"Chromatic Blue",Cerulean:"Chromatic Blue",Ultramarine:"Chromatic Blue","Chromatic Fog":"Mega Exotic","Stellar Corruption":"Mega Exotic","Stellar Corruption Detected":"Mega Exotic",Infested:"Infested","The Nest":"Infested","Xeno-Colony":"Infested","Worm-Ridden":"Infested","Worm-ridden":"Infested","Infested Paradise":"Infested","Boiling Doom":"Infested","Fiery Dreadworld":"Infested","Icy Abhorrence":"Infested","Frozen Hell":"Infested","Caustic Nightmare":"Infested","Toxic Horror":"Infested","Radioactive Abomination":"Infested",Mutated:"Infested","Mutating Relic":"Infested",Terrorsphere:"Infested","Infected Dustbowl":"Infested",Tainted:"Infested",Waterworld:"Waterworld",Drowning:"Waterworld",Endless:"Waterworld","Gas Giant":"Gas Giant",Ruined:"Dead","Ruined Dustbowl":"Barren","Bleached Ruin":"Dead","Scorched Relic":"Scorched","Overgrown Relic":"Lush","Abandoned Crucible":"Scorched","Abandoned Paradise":"Lush","Claimed By Decay":"Dead","Lost To Fire":"Scorched"},ye={Lush:"bg-green-500",Frozen:"bg-cyan-400",Toxic:"bg-lime-500",Scorched:"bg-orange-500",Radioactive:"bg-yellow-400",Barren:"bg-amber-600",Dead:"bg-gray-500",Marsh:"bg-teal-500",Volcanic:"bg-red-600",Exotic:"bg-purple-500","Mega Exotic":"bg-pink-500","Chromatic Red":"bg-red-500","Chromatic Green":"bg-emerald-500","Chromatic Blue":"bg-blue-500",Infested:"bg-rose-700",Waterworld:"bg-sky-500","Gas Giant":"bg-indigo-400",Unknown:"bg-gray-600"};function Ye(a){if(!a)return"Unknown";if(J[a])return J[a];const i=a.trim();for(const[o,x]of Object.entries(J))if(o.toLowerCase()===i.toLowerCase())return x;return He.includes(i)?i:(i.startsWith("Unknown"),"Unknown")}function Ze(a){return ye[a]||ye.Unknown}function qe(a){const i={};for(const[o,x]of Object.entries(a)){const d=Ye(o);i[d]=(i[d]||0)+x}return i}function Qe(a,i){const[o,x]=n.useState(a);return n.useEffect(()=>{const d=setTimeout(()=>x(a),i);return()=>clearTimeout(d)},[a,i]),o}function Je(a){if(!a)return null;if(a.startsWith("http"))return a;const o=a.replace(/\\/g,"/").split("/"),x=o[o.length-1];return`/haven-ui-photos/${encodeURIComponent(x)}`}function Xe(a){if(!a)return null;const o={Yellow:"bg-yellow-500 text-black",Red:"bg-red-500 text-white",Green:"bg-green-500 text-white",Blue:"bg-blue-500 text-white",Purple:"bg-purple-500 text-white"}[a]||"bg-gray-500 text-white";return e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${o}`,children:a})}function Ke({system:a,isSelected:i,onSelect:o,showCheckbox:x,onClick:d}){const u=Je(a.photo||a.planets?.[0]?.photo);return e.jsxs("div",{className:`relative rounded-lg border transition-all cursor-pointer hover:shadow-lg ${i?"border-indigo-500 bg-indigo-900/30 ring-2 ring-indigo-400":"border-gray-700 bg-gray-800/50 hover:bg-gray-700/50 hover:border-gray-600"}`,onClick:d,children:[x&&e.jsx("div",{className:"absolute top-2 left-2 z-10",onClick:U=>U.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:i,onChange:o,className:"w-5 h-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),e.jsx("div",{className:"h-32 bg-gray-900 rounded-t-lg overflow-hidden",children:u?e.jsx("img",{src:u,alt:a.name,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-600",children:e.jsx(fe,{className:"w-12 h-12"})})}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-semibold text-lg truncate mb-2",title:a.name,children:a.name}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[Xe(a.star_type),e.jsx("span",{className:"text-xs bg-blue-600/50 text-blue-200 px-1.5 py-0.5 rounded",children:a.galaxy||"Euclid"}),e.jsx(Ue,{tag:a.discord_tag})]}),e.jsxs("div",{className:"text-sm text-gray-400 flex items-center gap-3",children:[e.jsxs("span",{children:[a.planets?.length||a.planet_count||0," planets"]}),a.glyph_code&&e.jsxs("span",{className:"font-mono text-purple-400 text-xs truncate",title:a.glyph_code,children:[a.glyph_code.substring(0,8),"..."]})]})]})]})}function dt(){const{rx:a,ry:i,rz:o}=Ie(),x=Le(),d=n.useContext(_e),[u,U]=n.useState(null),[f,X]=n.useState([]),[je,K]=n.useState(!0),[ee,te]=n.useState(null),[g,S]=n.useState(1),[C,ae]=n.useState(0),T=100,[O,ve]=n.useState([]),[se,Ne]=n.useState(""),B=Qe(se,300),[j,W]=n.useState("all"),[v,H]=n.useState("all"),[y,Y]=n.useState("all"),[A,re]=n.useState("name"),[$,ne]=n.useState("asc"),[D,we]=n.useState(!1),[N,le]=n.useState(!1),[R,I]=n.useState(new Set),[Z,Se]=n.useState(!1),[Ce,L]=n.useState(!1),[F,q]=n.useState(""),[_,ie]=n.useState(null),[G,oe]=n.useState(""),[Q,ce]=n.useState(!1);n.useEffect(()=>{S(1),de()},[a,i,o]),n.useEffect(()=>{xe()},[a,i,o,g]),n.useEffect(()=>{M.get("/api/discord_tags").then(t=>{ve(t.data.tags||[])}).catch(()=>{})},[]);async function de(){K(!0),te(null);try{const t=await M.get(`/api/regions/${a}/${i}/${o}`);U(t.data)}catch(t){te(t.response?.data?.detail||"Failed to load region data")}finally{K(!1)}}async function xe(){try{const t=await M.get(`/api/regions/${a}/${i}/${o}/systems?include_planets=true&limit=${T}&page=${g}`);X(t.data.systems||[]),ae(t.data.total||0)}catch(t){console.error("Failed to load systems:",t),X([]),ae(0)}}async function Ee(){await Promise.all([de(),xe()])}const w=n.useMemo(()=>{let t=0,r=0,s=0;const l=new Set,c={},h={},p={};f.forEach(k=>{l.add(k.galaxy||"Euclid");const ue=k.star_type||"Unknown";p[ue]=(p[ue]||0)+1;const ge=k.economy_type||"Unknown";h[ge]=(h[ge]||0)+1,s+=k.discoveries?.length||0;const he=k.planets||[];t+=he.length,he.forEach(pe=>{r+=pe.moons?.length||0;const be=pe.biome||"Unknown";c[be]=(c[be]||0)+1})});const $e=qe(c);return{systemCount:f.length,planetCount:t,moonCount:r,discoveryCount:s,galaxies:Array.from(l),biomeDistribution:$e,rawBiomeDistribution:c,economyDistribution:h,starTypeDistribution:p}},[f]),V=n.useMemo(()=>{const t=new Set,r=new Set;return f.forEach(s=>{s.galaxy&&t.add(s.galaxy),s.star_type&&r.add(s.star_type)}),{galaxies:Array.from(t).sort(),starTypes:Array.from(r).sort()}},[f]),z=n.useMemo(()=>{let t=0;return j!=="all"&&t++,v!=="all"&&t++,y!=="all"&&t++,t},[j,v,y]),b=Math.ceil(C/T),Be=C===0?0:(g-1)*T+1,De=Math.min(g*T,C),P=n.useMemo(()=>{let t=[...f];if(B.trim()){const r=B.toLowerCase();t=t.filter(s=>s.name?.toLowerCase().includes(r)||s.glyph_code?.toLowerCase().includes(r)||s.description?.toLowerCase().includes(r))}return j!=="all"&&(t=t.filter(r=>r.galaxy===j)),v!=="all"&&(t=t.filter(r=>r.star_type===v)),y!=="all"&&(y==="untagged"?t=t.filter(r=>!r.discord_tag):t=t.filter(r=>r.discord_tag===y)),t.sort((r,s)=>{let l=0;switch(A){case"name":l=(r.name||"").localeCompare(s.name||"");break;case"date":l=new Date(r.created_at||0)-new Date(s.created_at||0);break;case"planets":l=(r.planets?.length||0)-(s.planets?.length||0);break;default:l=0}return $==="asc"?l:-l}),t},[f,B,j,v,y,A,$]);function Re(t){I(r=>{const s=new Set(r);return s.has(t)?s.delete(t):s.add(t),s})}function Fe(){I(new Set(P.map(t=>t.id)))}function ke(){I(new Set)}function Me(){le(!1),I(new Set)}async function Te(t){if(t.preventDefault(),!F.trim())return;const r=d?.isAdmin&&!d?.isSuperAdmin,s=r?d?.user?.username:G.trim();if(!d?.isSuperAdmin){if(!_){alert("Please select a Discord Community");return}if(!r&&!G.trim()){alert("Please enter your Discord Username");return}}ce(!0);try{d?.isSuperAdmin?await M.put(`/api/regions/${a}/${i}/${o}`,{custom_name:F.trim()}):await M.post(`/api/regions/${a}/${i}/${o}/submit`,{proposed_name:F.trim(),discord_tag:_,personal_discord_username:s}),L(!1),q(""),ie(null),oe(""),Ee(),alert(d?.isSuperAdmin?"Region name updated!":"Name submitted for approval!")}catch(l){alert("Failed: "+(l.response?.data?.detail||l.message))}finally{ce(!1)}}function me({title:t,data:r,colorFn:s}){const l=Object.entries(r).sort((h,p)=>p[1]-h[1]),c=l.reduce((h,[,p])=>h+p,0);return c===0?null:e.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-300",children:t}),e.jsxs("div",{className:"space-y-1",children:[l.slice(0,5).map(([h,p])=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-0.5",children:[e.jsx("span",{className:"text-gray-400",children:h}),e.jsx("span",{className:"text-gray-500",children:p})]}),e.jsx("div",{className:"h-1.5 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${s?s(h):"bg-cyan-500"}`,style:{width:`${p/c*100}%`}})})]})},h)),l.length>5&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["+",l.length-5," more"]})]})]})}function Ae({data:t}){const r=Object.entries(t).sort((l,c)=>c[1]-l[1]),s=r.reduce((l,[,c])=>l+c,0);return s===0?null:e.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-300",children:"Biomes"}),e.jsx("div",{className:"max-h-64 overflow-y-auto pr-1 space-y-1 scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800",children:r.map(([l,c])=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-0.5",children:[e.jsx("span",{className:"text-gray-400",children:l}),e.jsx("span",{className:"text-gray-500",children:c})]}),e.jsx("div",{className:"h-1.5 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${Ze(l)}`,style:{width:`${c/s*100}%`}})})]})},l))}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2 pt-2 border-t border-gray-700",children:[r.length," biome categories | ",s," total planets"]})]})}return je?e.jsx("div",{className:"p-6",children:e.jsx(E,{children:e.jsx("div",{className:"text-center py-8",children:"Loading region..."})})}):ee?e.jsx("div",{className:"p-6",children:e.jsxs(E,{children:[e.jsx("div",{className:"text-center py-8 text-red-500",children:ee}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(m,{onClick:()=>x("/systems"),children:"Back to Systems"})})]})}):(u?.custom_name||`${a}${i}${o}`,e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx(E,{className:"mb-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-1",children:u?.custom_name?e.jsx("span",{className:"text-purple-400",children:u.custom_name}):e.jsxs("span",{className:"text-gray-300",children:["Region (",a,", ",i,", ",o,")"]})}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Coordinates: [",a,", ",i,", ",o,"]",u?.pending_name&&e.jsxs("span",{className:"ml-3 text-yellow-400",children:['Pending name: "',u.pending_name.proposed_name,'"']})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("a",{href:`/map/region?rx=${a}&ry=${i}&rz=${o}`,target:"_blank",rel:"noopener noreferrer",children:e.jsxs(m,{className:"bg-cyan-600 hover:bg-cyan-700",children:[e.jsx(fe,{className:"w-4 h-4 mr-1 inline"}),"3D Map"]})}),e.jsxs(m,{className:"bg-purple-600 hover:bg-purple-700",onClick:()=>{q(u?.custom_name||""),L(!0)},children:[e.jsx(Ve,{className:"w-4 h-4 mr-1 inline"}),u?.custom_name?"Edit Name":"Set Name"]}),e.jsx(m,{className:"bg-gray-600 hover:bg-gray-700",onClick:()=>x("/systems"),children:"Back"})]})]})}),e.jsxs(E,{className:"mb-4",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:C}),e.jsx("div",{className:"text-xs text-gray-400",children:"Systems"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:w.planetCount}),e.jsx("div",{className:"text-xs text-gray-400",children:"Planets"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:w.moonCount}),e.jsx("div",{className:"text-xs text-gray-400",children:"Moons"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:w.discoveryCount}),e.jsx("div",{className:"text-xs text-gray-400",children:"Discoveries"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-800 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-blue-400",children:w.galaxies.join(", ")}),e.jsx("div",{className:"text-xs text-gray-400",children:"Galaxies"})]})]}),e.jsx("button",{className:"w-full mt-3 py-2 text-sm text-gray-400 hover:text-white flex items-center justify-center gap-1",onClick:()=>Se(!Z),children:Z?e.jsxs(e.Fragment,{children:["Hide Breakdown ",e.jsx(ze,{className:"w-4 h-4"})]}):e.jsxs(e.Fragment,{children:["Show Breakdown ",e.jsx(Pe,{className:"w-4 h-4"})]})}),Z&&e.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(Ae,{data:w.biomeDistribution}),e.jsx(me,{title:"Star Types",data:w.starTypeDistribution,colorFn:t=>({Yellow:"bg-yellow-500",Red:"bg-red-500",Green:"bg-green-500",Blue:"bg-blue-500",Purple:"bg-purple-500"})[t]||"bg-gray-500"}),e.jsx(me,{title:"Economy Types",data:w.economyDistribution,colorFn:()=>"bg-emerald-500"})]})]}),e.jsxs(E,{className:"mb-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search systems...",value:se,onChange:t=>Ne(t.target.value),className:"w-full px-3 py-2 rounded bg-gray-800 border border-gray-700 focus:border-cyan-500 focus:outline-none"})}),e.jsxs("button",{className:`lg:hidden px-3 py-2 rounded border transition-colors flex items-center gap-1.5 ${D||z>0?"bg-cyan-600 border-cyan-500 text-white":"bg-gray-700 border-gray-600 text-gray-300"}`,onClick:()=>we(!D),children:[D?e.jsx(Oe,{className:"w-5 h-5"}):e.jsx(We,{className:"w-5 h-5"}),z>0&&!D&&e.jsx("span",{className:"bg-white text-cyan-600 text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:z})]}),e.jsxs("div",{className:"hidden lg:flex flex-wrap gap-2",children:[e.jsxs("select",{value:j,onChange:t=>W(t.target.value),className:"px-3 py-2 rounded bg-gray-800 border border-gray-700 text-sm",children:[e.jsx("option",{value:"all",children:"All Galaxies"}),V.galaxies.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:v,onChange:t=>H(t.target.value),className:"px-3 py-2 rounded bg-gray-800 border border-gray-700 text-sm",children:[e.jsx("option",{value:"all",children:"All Stars"}),V.starTypes.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:y,onChange:t=>Y(t.target.value),className:"px-3 py-2 rounded bg-gray-800 border border-gray-700 text-sm",children:[e.jsx("option",{value:"all",children:"All Tags"}),e.jsx("option",{value:"untagged",children:"Untagged"}),O.map(t=>e.jsx("option",{value:t.tag,children:t.name},t.tag))]}),e.jsxs("select",{value:`${A}-${$}`,onChange:t=>{const[r,s]=t.target.value.split("-");re(r),ne(s)},className:"px-3 py-2 rounded bg-gray-800 border border-gray-700 text-sm",children:[e.jsx("option",{value:"name-asc",children:"Name A-Z"}),e.jsx("option",{value:"name-desc",children:"Name Z-A"}),e.jsx("option",{value:"date-desc",children:"Newest First"}),e.jsx("option",{value:"date-asc",children:"Oldest First"}),e.jsx("option",{value:"planets-desc",children:"Most Planets"}),e.jsx("option",{value:"planets-asc",children:"Fewest Planets"})]})]})]}),D&&e.jsxs("div",{className:"lg:hidden bg-gray-800/50 rounded-lg p-4 space-y-4 border border-gray-700",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Sort By"}),e.jsxs("select",{value:`${A}-${$}`,onChange:t=>{const[r,s]=t.target.value.split("-");re(r),ne(s)},className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-sm",children:[e.jsx("option",{value:"name-asc",children:"Name A-Z"}),e.jsx("option",{value:"name-desc",children:"Name Z-A"}),e.jsx("option",{value:"date-desc",children:"Newest First"}),e.jsx("option",{value:"date-asc",children:"Oldest First"}),e.jsx("option",{value:"planets-desc",children:"Most Planets"}),e.jsx("option",{value:"planets-asc",children:"Fewest Planets"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Galaxy"}),e.jsxs("select",{value:j,onChange:t=>W(t.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-sm",children:[e.jsx("option",{value:"all",children:"All Galaxies"}),V.galaxies.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Star Type"}),e.jsxs("select",{value:v,onChange:t=>H(t.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-sm",children:[e.jsx("option",{value:"all",children:"All Stars"}),V.starTypes.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Community Tag"}),e.jsxs("select",{value:y,onChange:t=>Y(t.target.value),className:"w-full px-3 py-2 rounded bg-gray-700 border border-gray-600 text-sm",children:[e.jsx("option",{value:"all",children:"All Tags"}),e.jsx("option",{value:"untagged",children:"Untagged"}),O.map(t=>e.jsx("option",{value:t.tag,children:t.name},t.tag))]})]}),z>0&&e.jsx("button",{onClick:()=>{W("all"),H("all"),Y("all")},className:"w-full py-2 text-sm text-cyan-400 hover:text-cyan-300 border border-gray-600 rounded",children:"Clear All Filters"})]})]}),d?.isAdmin&&e.jsxs("div",{className:"mt-3 flex items-center justify-between border-t border-gray-700 pt-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m,{className:N?"bg-amber-600 hover:bg-amber-700":"bg-indigo-600 hover:bg-indigo-700",onClick:()=>N?Me():le(!0),children:N?"Exit Bulk Mode":"Bulk Mode"}),N&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-sm text-gray-400",children:[R.size," selected"]}),e.jsx("button",{onClick:Fe,className:"text-sm text-indigo-400 hover:text-indigo-300 underline",children:"Select All"}),R.size>0&&e.jsx("button",{onClick:ke,className:"text-sm text-gray-400 hover:text-white underline",children:"Clear"})]})]}),N&&R.size>0&&e.jsx("div",{className:"flex gap-2",children:e.jsxs(m,{className:"bg-red-600 hover:bg-red-700 text-sm",children:["Delete (",R.size,")"]})})]})]}),e.jsxs("div",{className:"mb-3 text-sm text-gray-400 flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("span",{children:["Showing ",Be,"-",De," of ",C," systems",B&&` (${P.length} matching "${B}")`]}),b>1&&e.jsxs("span",{className:"text-cyan-400",children:["Page ",g," of ",b]})]}),P.length===0?e.jsx(E,{children:e.jsx("div",{className:"text-center py-8 text-gray-400",children:C===0?"No systems in this region":"No systems match your filters"})}):e.jsx("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5",children:P.map(t=>e.jsx(Ke,{system:t,isSelected:R.has(t.id),onSelect:()=>Re(t.id),showCheckbox:N,onClick:()=>{N||x(`/systems/${encodeURIComponent(t.id)}`)}},t.id))}),b>1&&e.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-center gap-2",children:[e.jsx(m,{variant:"ghost",className:"px-3 py-2",onClick:()=>S(1),disabled:g===1,children:"« First"}),e.jsx(m,{variant:"ghost",className:"px-3 py-2",onClick:()=>S(t=>Math.max(1,t-1)),disabled:g===1,children:"‹ Prev"}),e.jsx("div",{className:"flex items-center gap-1",children:(()=>{const t=[];let s=Math.max(1,g-Math.floor(2.5)),l=Math.min(b,s+5-1);l-s+1<5&&(s=Math.max(1,l-5+1)),s>1&&t.push(e.jsx("span",{className:"px-2 text-gray-500",children:"..."},"start-ellipsis"));for(let c=s;c<=l;c++)t.push(e.jsx("button",{onClick:()=>S(c),className:`px-3 py-1 rounded transition-colors ${c===g?"bg-cyan-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:c},c));return l<b&&t.push(e.jsx("span",{className:"px-2 text-gray-500",children:"..."},"end-ellipsis")),t})()}),e.jsx(m,{variant:"ghost",className:"px-3 py-2",onClick:()=>S(t=>Math.min(b,t+1)),disabled:g===b,children:"Next ›"}),e.jsx(m,{variant:"ghost",className:"px-3 py-2",onClick:()=>S(b),disabled:g===b,children:"Last »"})]}),Ce&&e.jsx(Ge,{title:u?.custom_name?"Edit Region Name":"Set Region Name",onClose:()=>L(!1),children:e.jsxs("form",{onSubmit:Te,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Region Name"}),e.jsx("input",{type:"text",value:F,onChange:t=>q(t.target.value),placeholder:"Enter region name...",className:"w-full px-3 py-2 rounded border border-gray-600 bg-gray-800 focus:border-purple-500 focus:outline-none",autoFocus:!0}),!d?.isSuperAdmin&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Your submission will be reviewed before approval."})]}),!d?.isSuperAdmin&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["Discord Community ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{className:`w-full px-3 py-2 rounded border bg-gray-800 focus:outline-none ${_?"border-gray-600 focus:border-purple-500":"border-red-500"}`,value:_||"",onChange:t=>ie(t.target.value||null),required:!0,children:[e.jsx("option",{value:"",children:"-- Select Community (Required) --"}),O.map(t=>e.jsxs("option",{value:t.tag,children:[t.name," (",t.tag,")"]},t.tag))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Which Discord community will review this region name?"})]}),d?.isAdmin?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Submitting As"}),e.jsx("div",{className:"w-full px-3 py-2 rounded border border-gray-600 bg-gray-700 text-gray-300",children:d?.user?.username||"Unknown"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Your logged-in username will be used for tracking"})]}):e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["Your Discord Username ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",value:G,onChange:t=>oe(t.target.value),placeholder:"e.g., YourName#1234",className:`w-full px-3 py-2 rounded border bg-gray-800 focus:outline-none ${G.trim()?"border-gray-600 focus:border-purple-500":"border-red-500"}`,required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"So we can contact you if needed"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{type:"submit",className:"bg-purple-600 hover:bg-purple-700",disabled:Q||!F.trim(),children:Q?"Submitting...":d?.isSuperAdmin?"Save":"Submit for Approval"}),e.jsx(m,{type:"button",className:"bg-gray-600 hover:bg-gray-700",onClick:()=>L(!1),disabled:Q,children:"Cancel"})]})]})})]}))}export{dt as default};
