import{j as e}from"./vendor-three-B8lJlG1P.js";import{L as y,b as i}from"./vendor-react-D7IcbEIw.js";import{B as k}from"./Button-CI6OWZ-Z.js";import{D as R,a as E,b as _}from"./DiscoveryDetailModal-BzBnl58n.js";import{a as C}from"./index-DfzvULyl.js";import"./FormField-Bz54WX62.js";import"./XMarkIcon-COi7J9yy.js";import"./vendor-ui-B9ygI19o.js";const p={fauna:"from-green-600 to-green-800",flora:"from-emerald-600 to-emerald-800",mineral:"from-purple-600 to-purple-800",ancient:"from-yellow-600 to-amber-800",history:"from-amber-600 to-orange-800",bones:"from-stone-500 to-stone-700",alien:"from-cyan-600 to-cyan-800",starship:"from-blue-600 to-blue-800",multitool:"from-orange-600 to-orange-800",lore:"from-indigo-600 to-indigo-800",base:"from-teal-600 to-teal-800",other:"from-gray-600 to-gray-800"},g={fauna:"hover:shadow-green-500/30",flora:"hover:shadow-emerald-500/30",mineral:"hover:shadow-purple-500/30",ancient:"hover:shadow-yellow-500/30",history:"hover:shadow-amber-500/30",bones:"hover:shadow-stone-400/30",alien:"hover:shadow-cyan-500/30",starship:"hover:shadow-blue-500/30",multitool:"hover:shadow-orange-500/30",lore:"hover:shadow-indigo-500/30",base:"hover:shadow-teal-500/30",other:"hover:shadow-gray-500/30"};function T({slug:t,emoji:l,label:c,count:n=0,className:d=""}){const m=p[t]||p.other,h=g[t]||g.other;return e.jsx(y,{to:`/discoveries/${t}`,className:`
        block rounded-xl overflow-hidden
        bg-gradient-to-br ${m}
        transform transition-all duration-300
        hover:scale-105 hover:shadow-xl ${h}
        cursor-pointer
        ${d}
      `,children:e.jsxs("div",{className:"p-6 flex flex-col items-center justify-center min-h-[140px]",children:[e.jsx("div",{className:"text-5xl mb-2 drop-shadow-lg",children:l}),e.jsx("div",{className:"text-white font-semibold text-lg",children:c}),e.jsxs("div",{className:"mt-2 px-3 py-1 rounded-full bg-black/30 text-white/90 text-sm font-medium",children:[n.toLocaleString()," ",n===1?"discovery":"discoveries"]})]})})}const L=["fauna","flora","mineral","ancient","history","bones","alien","starship","multitool","lore","base","other"];function I(){const[t,l]=i.useState(null),[c,n]=i.useState([]),[d,m]=i.useState(!0),[h,f]=i.useState(!1),[x,u]=i.useState(null),[v,b]=i.useState("");i.useEffect(()=>{async function s(){try{const[o,r]=await Promise.all([fetch("/api/discoveries/stats"),fetch("/api/discoveries/recent?limit=6")]);if(o.ok){const a=await o.json();l(a)}if(r.ok){const a=await r.json();n(a.discoveries||[])}}catch(o){console.error("Error fetching discovery data:",o)}finally{m(!1)}}s()},[]);function j(s){s.preventDefault(),v.trim()&&(window.location.href=`/discoveries/other?q=${encodeURIComponent(v.trim())}`)}function w(s,o){n(r=>r.map(a=>a.id===s?{...a,is_featured:o}:a)),x?.id===s&&u(r=>({...r,is_featured:o}))}function S(){f(!1),fetch("/api/discoveries/stats").then(s=>s.json()).then(s=>l(s)).catch(()=>{}),fetch("/api/discoveries/recent?limit=6").then(s=>s.json()).then(s=>n(s.discoveries||[])).catch(()=>{})}if(d)return e.jsx("div",{className:"flex items-center justify-center min-h-64",children:e.jsx("div",{className:"text-lg text-gray-400",children:"Loading discoveries..."})});const N=t?.type_info||{},D=t?.by_type||{};return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Discoveries"}),t&&e.jsxs("p",{className:"mt-1 text-gray-400",children:[t.total.toLocaleString()," discoveries across 12 types",t.this_week>0&&e.jsxs("span",{className:"ml-2 text-cyan-400",children:["(+",t.this_week," this week)"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("form",{onSubmit:j,className:"hidden sm:flex items-center",children:e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:v,onChange:s=>b(s.target.value),placeholder:"Search all...",className:"pl-10 pr-4 py-2 rounded-lg bg-gray-800 border border-gray-700 text-white placeholder-gray-500 focus:border-cyan-500 focus:outline-none w-48"})]})}),e.jsx(k,{onClick:()=>f(!0),children:"Submit Discovery"})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 mb-10",children:L.map(s=>{const o=N[s]||{emoji:"?",label:s},r=D[s]||0;return e.jsx(T,{slug:s,emoji:o.emoji,label:o.label,count:r},s)})}),c.length>0&&e.jsxs("div",{className:"mt-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Recent Discoveries"}),e.jsx(y,{to:"/discoveries/other",className:"text-cyan-400 hover:text-cyan-300 text-sm",children:"View all"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(s=>e.jsx(R,{discovery:s,onClick:()=>u(s)},s.id))})]}),e.jsx(E,{isOpen:h,onClose:()=>f(!1),onSuccess:S}),e.jsx(_,{discovery:x,isOpen:!!x,onClose:()=>u(null),onFeatureToggle:w})]})}export{I as default};
