import{j as e}from"./vendor-three-pXgRM845.js";import{b as s,L as ee,u as xe,e as ue,d as ge}from"./vendor-react-DGfbrl1l.js";import{a as A}from"./vendor-ui-B9ygI19o.js";import{C as L}from"./Card-ByQtE_JY.js";import{B as Y}from"./Button-POFR3cy9.js";import{F as J,a as K,b as pe,c as he}from"./FormField-gbuH2irL.js";import{F as X,A as oe,M as fe,a as be}from"./index-DgLtObAt.js";import{F as we,D as je}from"./DiscordTagBadge-D77r93vV.js";import{u as ve}from"./usePersonalColor-DIYl9Z9e.js";import{F as Ne}from"./XMarkIcon-ghU6kRhd.js";import{F as Ge}from"./FunnelIcon-DeSn05Zy.js";function Se({title:i,titleId:o,...c},l){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":o},c),i?s.createElement("title",{id:o},i):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const W=s.forwardRef(Se);function ke({title:i,titleId:o,...c},l){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":o},c),i?s.createElement("title",{id:o},i):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const ie=s.forwardRef(ke);function _e({title:i,titleId:o,...c},l){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":o},c),i?s.createElement("title",{id:o},i):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const ae=s.forwardRef(_e);function $e({title:i,titleId:o,...c},l){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":o},c),i?s.createElement("title",{id:o},i):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const se=s.forwardRef($e);function Ce({title:i,titleId:o,...c},l){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":o},c),i?s.createElement("title",{id:o},i):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m0-10.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.25-8.25-3.286Zm0 13.036h.008v.008H12v-.008Z"}))}const Re=s.forwardRef(Ce);function Ee({title:i,titleId:o,...c},l){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":o},c),i?s.createElement("title",{id:o},i):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const Fe=s.forwardRef(Ee);function Le({onSelect:i,selectedReality:o}){const[c,l]=s.useState([]),[g,h]=s.useState(!0),[u,m]=s.useState(null);s.useEffect(()=>{b()},[]);async function b(){h(!0),m(null);try{const d=await A.get("/api/realities/summary");l(d.data.realities||[])}catch(d){console.error("Failed to load realities:",d),m("Failed to load reality data"),l([{reality:"Normal",galaxy_count:0,system_count:0},{reality:"Permadeath",galaxy_count:0,system_count:0}])}finally{h(!1)}}const C={Normal:X,Permadeath:Re},N={Normal:{bg:"bg-cyan-600",hoverBg:"hover:bg-cyan-500",border:"border-cyan-500",text:"text-cyan-400",ring:"ring-cyan-500"},Permadeath:{bg:"bg-red-600",hoverBg:"hover:bg-red-500",border:"border-red-500",text:"text-red-400",ring:"ring-red-500"}};if(g)return e.jsx(L,{children:e.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading realities..."})});const _=["Normal","Permadeath"].map(d=>c.find(r=>r.reality===d)||{reality:d,galaxy_count:0,system_count:0});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Select Reality"}),u&&e.jsx("span",{className:"text-sm text-red-400",children:u})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:_.map(d=>{const p=C[d.reality]||X,r=N[d.reality]||N.Normal,y=o===d.reality;return e.jsxs("button",{onClick:()=>i(d.reality),className:`
                relative p-6 rounded-lg border-2 transition-all duration-200
                text-left group
                ${y?`${r.bg} ${r.border} text-white ring-2 ${r.ring} ring-offset-2 ring-offset-gray-900`:`bg-gray-800 border-gray-700 ${r.hoverBg.replace("hover:","")} hover:border-gray-600`}
              `,children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`
                  p-3 rounded-lg transition-colors
                  ${y?"bg-white/20":"bg-gray-700 group-hover:bg-gray-600"}
                `,children:e.jsx(p,{className:`w-8 h-8 ${y?"text-white":r.text}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`text-xl font-bold ${y?"text-white":"text-gray-100"}`,children:d.reality}),e.jsx("p",{className:`text-sm mt-1 ${y?"text-white/80":"text-gray-400"}`,children:d.reality==="Normal"?"Standard survival mode":"One life, permanent death"})]})]}),e.jsxs("div",{className:`
                mt-4 pt-4 border-t flex justify-between
                ${y?"border-white/20":"border-gray-700"}
              `,children:[e.jsxs("div",{children:[e.jsx("div",{className:`text-2xl font-bold ${y?"text-white":r.text}`,children:d.system_count.toLocaleString()}),e.jsx("div",{className:`text-xs ${y?"text-white/70":"text-gray-500"}`,children:"Systems"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-2xl font-bold ${y?"text-white":r.text}`,children:d.galaxy_count}),e.jsx("div",{className:`text-xs ${y?"text-white/70":"text-gray-500"}`,children:"Galaxies"})]})]}),y&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("span",{className:"bg-white text-gray-900 text-xs font-bold px-2 py-1 rounded",children:"Selected"})})]},d.reality)})})]})}const Q={Euclid:{num:1,type:"norm",desc:"The starting galaxy - most explored"},"Hilbert Dimension":{num:2,type:"norm",desc:"Second galaxy reached via center"},Calypso:{num:3,type:"harsh",desc:"Raging Galaxy - high conflict"},"Hesperius Dimension":{num:4,type:"norm",desc:"Fourth galaxy"},Hyades:{num:5,type:"norm",desc:"Fifth galaxy"},Ickjamatew:{num:6,type:"norm",desc:"Sixth galaxy"},Budullangr:{num:7,type:"lush",desc:"Ancestral Galaxy - more lush planets"},Kikolgallr:{num:8,type:"norm",desc:"Eighth galaxy"},Eltiensleen:{num:9,type:"norm",desc:"Ninth galaxy"},Eissentam:{num:10,type:"lush",desc:"Tranquil Galaxy - paradise planets"},Elkupalos:{num:11,type:"norm",desc:"Eleventh galaxy"},Aptarkaba:{num:12,type:"norm",desc:"Twelfth galaxy"},Ontiniangp:{num:13,type:"norm",desc:"Thirteenth galaxy"},Odiwagiri:{num:14,type:"norm",desc:"Fourteenth galaxy"},Ogtialabi:{num:15,type:"norm",desc:"Fifteenth galaxy"},Muhacksonto:{num:16,type:"norm",desc:"Sixteenth galaxy"},Hitonskyer:{num:17,type:"norm",desc:"Seventeenth galaxy"},Rerasmutul:{num:18,type:"norm",desc:"Eighteenth galaxy"},Isdoraijung:{num:19,type:"lush",desc:"Halcyon Galaxy - more lush planets"},Doctinawyra:{num:20,type:"norm",desc:"Twentieth galaxy"},Loychazinq:{num:21,type:"norm",desc:"Twenty-first galaxy"},Zukasizawa:{num:22,type:"norm",desc:"Twenty-second galaxy"},Ekwathore:{num:23,type:"norm",desc:"Twenty-third galaxy"},Yeberhahne:{num:24,type:"norm",desc:"Twenty-fourth galaxy"},Twerbetek:{num:25,type:"norm",desc:"Twenty-fifth galaxy"},Sivarates:{num:26,type:"norm",desc:"Twenty-sixth galaxy"},Eajerandal:{num:27,type:"norm",desc:"Twenty-seventh galaxy"},Aldukesci:{num:28,type:"norm",desc:"Twenty-eighth galaxy"},Wotyarogii:{num:29,type:"norm",desc:"Twenty-ninth galaxy"},Sudzerbal:{num:30,type:"norm",desc:"Thirtieth galaxy"},Maupenzhay:{num:31,type:"norm",desc:"Thirty-first galaxy"},Sugueziume:{num:32,type:"norm",desc:"Thirty-second galaxy"},Brogoweldian:{num:33,type:"norm",desc:"Thirty-third galaxy"},Ehbogdenbu:{num:34,type:"norm",desc:"Thirty-fourth galaxy"},Ijsenufryos:{num:35,type:"norm",desc:"Thirty-fifth galaxy"},Nipikulha:{num:36,type:"norm",desc:"Thirty-sixth galaxy"},Autsurabin:{num:37,type:"norm",desc:"Thirty-seventh galaxy"},Lusontrygiamh:{num:38,type:"norm",desc:"Thirty-eighth galaxy"},Rewmanawa:{num:39,type:"norm",desc:"Thirty-ninth galaxy"},Ethiophodhe:{num:40,type:"norm",desc:"Fortieth galaxy"},Urastrykle:{num:41,type:"norm",desc:"Forty-first galaxy"},Xobeurindj:{num:42,type:"norm",desc:"Forty-second galaxy"},Oniijialdu:{num:43,type:"norm",desc:"Forty-third galaxy"},Wucetosucc:{num:44,type:"norm",desc:"Forty-fourth galaxy"},Ebyeloof:{num:45,type:"norm",desc:"Forty-fifth galaxy"},Odyavanta:{num:46,type:"norm",desc:"Forty-sixth galaxy"},Milekistri:{num:47,type:"norm",desc:"Forty-seventh galaxy"},Waferganh:{num:48,type:"norm",desc:"Forty-eighth galaxy"},Agnusopwit:{num:49,type:"norm",desc:"Forty-ninth galaxy"},Teyaypilny:{num:50,type:"norm",desc:"Fiftieth galaxy"},Zalienkosm:{num:51,type:"norm",desc:"Fifty-first galaxy"},Ladgudiraf:{num:52,type:"norm",desc:"Fifty-second galaxy"},Mushonponte:{num:53,type:"norm",desc:"Fifty-third galaxy"},Amsentisz:{num:54,type:"norm",desc:"Fifty-fourth galaxy"},Fladiselm:{num:55,type:"norm",desc:"Fifty-fifth galaxy"},Laanawemb:{num:56,type:"norm",desc:"Fifty-sixth galaxy"},Ilkerloor:{num:57,type:"norm",desc:"Fifty-seventh galaxy"},Davanossi:{num:58,type:"norm",desc:"Fifty-eighth galaxy"},Ploehrliou:{num:59,type:"norm",desc:"Fifty-ninth galaxy"},Corpinyaya:{num:60,type:"norm",desc:"Sixtieth galaxy"},Leckandmeram:{num:61,type:"norm",desc:"Sixty-first galaxy"},Quulngais:{num:62,type:"norm",desc:"Sixty-second galaxy"},Nokokipsechl:{num:63,type:"norm",desc:"Sixty-third galaxy"},Rinblodesa:{num:64,type:"norm",desc:"Sixty-fourth galaxy"},Loydporpen:{num:65,type:"norm",desc:"Sixty-fifth galaxy"},Ibtrevskip:{num:66,type:"norm",desc:"Sixty-sixth galaxy"},Elkowaldb:{num:67,type:"norm",desc:"Sixty-seventh galaxy"},Heholhofsko:{num:68,type:"norm",desc:"Sixty-eighth galaxy"},Yebrilowisod:{num:69,type:"norm",desc:"Sixty-ninth galaxy"},Husalvangewi:{num:70,type:"norm",desc:"Seventieth galaxy"},"Ovna'uesed":{num:71,type:"norm",desc:"Seventy-first galaxy"},Bahibusey:{num:72,type:"norm",desc:"Seventy-second galaxy"},Nuybeliaure:{num:73,type:"norm",desc:"Seventy-third galaxy"},Doshawchuc:{num:74,type:"norm",desc:"Seventy-fourth galaxy"},Ruckinarkh:{num:75,type:"norm",desc:"Seventy-fifth galaxy"},Thorettac:{num:76,type:"norm",desc:"Seventy-sixth galaxy"},Nuponoparau:{num:77,type:"norm",desc:"Seventy-seventh galaxy"},Moglaschil:{num:78,type:"norm",desc:"Seventy-eighth galaxy"},Uiweupose:{num:79,type:"norm",desc:"Seventy-ninth galaxy"},Nasmilete:{num:80,type:"norm",desc:"Eightieth galaxy"},Ekdaluskin:{num:81,type:"norm",desc:"Eighty-first galaxy"},Hakapanasy:{num:82,type:"norm",desc:"Eighty-second galaxy"},Dimonimba:{num:83,type:"norm",desc:"Eighty-third galaxy"},Cajaccari:{num:84,type:"norm",desc:"Eighty-fourth galaxy"},Olonerovo:{num:85,type:"norm",desc:"Eighty-fifth galaxy"},Umlanswick:{num:86,type:"norm",desc:"Eighty-sixth galaxy"},Henayliszm:{num:87,type:"norm",desc:"Eighty-seventh galaxy"},Utzenmate:{num:88,type:"norm",desc:"Eighty-eighth galaxy"},Umirpaiya:{num:89,type:"norm",desc:"Eighty-ninth galaxy"},Paholiang:{num:90,type:"norm",desc:"Ninetieth galaxy"},Iaereznika:{num:91,type:"norm",desc:"Ninety-first galaxy"},Yudukagath:{num:92,type:"norm",desc:"Ninety-second galaxy"},Boealalosnj:{num:93,type:"norm",desc:"Ninety-third galaxy"},Yaevarcko:{num:94,type:"norm",desc:"Ninety-fourth galaxy"},Coellosipp:{num:95,type:"norm",desc:"Ninety-fifth galaxy"},Wayndohalou:{num:96,type:"norm",desc:"Ninety-sixth galaxy"},Smoduraykl:{num:97,type:"norm",desc:"Ninety-seventh galaxy"},Apmaneessu:{num:98,type:"norm",desc:"Ninety-eighth galaxy"},Hicanpaav:{num:99,type:"norm",desc:"Ninety-ninth galaxy"},Akvasanta:{num:100,type:"norm",desc:"One hundredth galaxy"},Tuychelisaor:{num:101,type:"norm",desc:"Galaxy #101"},Rivskimbe:{num:102,type:"norm",desc:"Galaxy #102"},Daksanquix:{num:103,type:"norm",desc:"Galaxy #103"},Kissonlin:{num:104,type:"norm",desc:"Galaxy #104"},Aediabiel:{num:105,type:"norm",desc:"Galaxy #105"},Ulosaginyik:{num:106,type:"norm",desc:"Galaxy #106"},Roclaytonycar:{num:107,type:"norm",desc:"Galaxy #107"},Kichiaroa:{num:108,type:"norm",desc:"Galaxy #108"},Irceauffey:{num:109,type:"norm",desc:"Galaxy #109"},Nudquathsenfe:{num:110,type:"norm",desc:"Galaxy #110"},Getaizakaal:{num:111,type:"norm",desc:"Galaxy #111"},Hansolmien:{num:112,type:"norm",desc:"Galaxy #112"},Bloytisagra:{num:113,type:"norm",desc:"Galaxy #113"},Ladsenlay:{num:114,type:"norm",desc:"Galaxy #114"},Luyugoslasr:{num:115,type:"norm",desc:"Galaxy #115"},Ubredhatk:{num:116,type:"norm",desc:"Galaxy #116"},Cidoniana:{num:117,type:"norm",desc:"Galaxy #117"},Jasinessa:{num:118,type:"norm",desc:"Galaxy #118"},Torweierf:{num:119,type:"norm",desc:"Galaxy #119"},Saffneckm:{num:120,type:"norm",desc:"Galaxy #120"},Thnistner:{num:121,type:"norm",desc:"Galaxy #121"},Dotusingg:{num:122,type:"norm",desc:"Galaxy #122"},Luleukous:{num:123,type:"norm",desc:"Galaxy #123"},Jelmandan:{num:124,type:"norm",desc:"Galaxy #124"},Otimanaso:{num:125,type:"norm",desc:"Galaxy #125"},Enjaxusanto:{num:126,type:"norm",desc:"Galaxy #126"},Sezviktorew:{num:127,type:"norm",desc:"Galaxy #127"},Zikehpm:{num:128,type:"norm",desc:"Galaxy #128"},Bephembah:{num:129,type:"norm",desc:"Galaxy #129"},Broomerrai:{num:130,type:"norm",desc:"Galaxy #130"},Meximicka:{num:131,type:"norm",desc:"Galaxy #131"},Venessika:{num:132,type:"norm",desc:"Galaxy #132"},Gaiteseling:{num:133,type:"norm",desc:"Galaxy #133"},Zosakasiro:{num:134,type:"norm",desc:"Galaxy #134"},Drajayanes:{num:135,type:"norm",desc:"Galaxy #135"},Ooibekuar:{num:136,type:"norm",desc:"Galaxy #136"},Urckiansi:{num:137,type:"norm",desc:"Galaxy #137"},Dozivadido:{num:138,type:"norm",desc:"Galaxy #138"},Emiekereks:{num:139,type:"norm",desc:"Galaxy #139"},Meykinunukur:{num:140,type:"norm",desc:"Galaxy #140"},Kimycuristh:{num:141,type:"norm",desc:"Galaxy #141"},Roansfien:{num:142,type:"norm",desc:"Galaxy #142"},Isgarmeso:{num:143,type:"norm",desc:"Galaxy #143"},Daitibeli:{num:144,type:"norm",desc:"Galaxy #144"},Gucuttarik:{num:145,type:"norm",desc:"Galaxy #145"},Enlaythie:{num:146,type:"norm",desc:"Galaxy #146"},Drewweste:{num:147,type:"norm",desc:"Galaxy #147"},Akbulkabi:{num:148,type:"norm",desc:"Galaxy #148"},Homskiw:{num:149,type:"norm",desc:"Galaxy #149"},Zavainlani:{num:150,type:"norm",desc:"Galaxy #150"},Jewijkmas:{num:151,type:"norm",desc:"Galaxy #151"},Itlhotagra:{num:152,type:"norm",desc:"Galaxy #152"},Podalicess:{num:153,type:"norm",desc:"Galaxy #153"},Hiviusauer:{num:154,type:"norm",desc:"Galaxy #154"},Halsebenk:{num:155,type:"norm",desc:"Galaxy #155"},Puikitoac:{num:156,type:"norm",desc:"Galaxy #156"},Gaybakuaria:{num:157,type:"norm",desc:"Galaxy #157"},Grbodubhe:{num:158,type:"norm",desc:"Galaxy #158"},Rycempler:{num:159,type:"norm",desc:"Galaxy #159"},Indjalala:{num:160,type:"norm",desc:"Galaxy #160"},Fontenikk:{num:161,type:"norm",desc:"Galaxy #161"},Pasycihelwhee:{num:162,type:"norm",desc:"Galaxy #162"},Ikbaksmit:{num:163,type:"norm",desc:"Galaxy #163"},Telicianses:{num:164,type:"norm",desc:"Galaxy #164"},Oyleyzhan:{num:165,type:"norm",desc:"Galaxy #165"},Uagerosat:{num:166,type:"norm",desc:"Galaxy #166"},Impoxectin:{num:167,type:"norm",desc:"Galaxy #167"},Twoodmand:{num:168,type:"norm",desc:"Galaxy #168"},Hilfsesorbs:{num:169,type:"norm",desc:"Galaxy #169"},Ezdaranit:{num:170,type:"norm",desc:"Galaxy #170"},Wiensanshe:{num:171,type:"norm",desc:"Galaxy #171"},Ewheelonc:{num:172,type:"norm",desc:"Galaxy #172"},Litzmantufa:{num:173,type:"norm",desc:"Galaxy #173"},Emarmatosi:{num:174,type:"norm",desc:"Galaxy #174"},Mufimbomacvi:{num:175,type:"norm",desc:"Galaxy #175"},Wongquarum:{num:176,type:"norm",desc:"Galaxy #176"},Hapirajua:{num:177,type:"norm",desc:"Galaxy #177"},Igbinduina:{num:178,type:"norm",desc:"Galaxy #178"},Wepaitvas:{num:179,type:"norm",desc:"Galaxy #179"},Sthatigudi:{num:180,type:"norm",desc:"Galaxy #180"},Yekathsebehn:{num:181,type:"norm",desc:"Galaxy #181"},Ebedeagurst:{num:182,type:"norm",desc:"Galaxy #182"},Nolisonia:{num:183,type:"norm",desc:"Galaxy #183"},Ulexovitab:{num:184,type:"norm",desc:"Galaxy #184"},Iodhinxois:{num:185,type:"norm",desc:"Galaxy #185"},Irroswitzs:{num:186,type:"norm",desc:"Galaxy #186"},Bifredait:{num:187,type:"norm",desc:"Galaxy #187"},Beiraghedwe:{num:188,type:"norm",desc:"Galaxy #188"},Yeonatlak:{num:189,type:"norm",desc:"Galaxy #189"},Cugnatachh:{num:190,type:"norm",desc:"Galaxy #190"},Nozoryenki:{num:191,type:"norm",desc:"Galaxy #191"},Ebralduri:{num:192,type:"norm",desc:"Galaxy #192"},Evcickcandj:{num:193,type:"norm",desc:"Galaxy #193"},Ziybosswin:{num:194,type:"norm",desc:"Galaxy #194"},Heperclait:{num:195,type:"norm",desc:"Galaxy #195"},Sugiuniam:{num:196,type:"norm",desc:"Galaxy #196"},Aaseertush:{num:197,type:"norm",desc:"Galaxy #197"},Uglyestemaa:{num:198,type:"norm",desc:"Galaxy #198"},Horeroedsh:{num:199,type:"norm",desc:"Galaxy #199"},Drundemiso:{num:200,type:"norm",desc:"Galaxy #200"},Ityanianat:{num:201,type:"norm",desc:"Galaxy #201"},Purneyrine:{num:202,type:"norm",desc:"Galaxy #202"},Dokiessmat:{num:203,type:"norm",desc:"Galaxy #203"},Nupiacheh:{num:204,type:"norm",desc:"Galaxy #204"},Dihewsonj:{num:205,type:"norm",desc:"Galaxy #205"},Rudrailhik:{num:206,type:"norm",desc:"Galaxy #206"},Tweretnort:{num:207,type:"norm",desc:"Galaxy #207"},Snatreetze:{num:208,type:"norm",desc:"Galaxy #208"},Iwundaracos:{num:209,type:"norm",desc:"Galaxy #209"},Digarlewena:{num:210,type:"norm",desc:"Galaxy #210"},Erquagsta:{num:211,type:"norm",desc:"Galaxy #211"},Logovoloin:{num:212,type:"norm",desc:"Galaxy #212"},Boyaghosganh:{num:213,type:"norm",desc:"Galaxy #213"},Kuolungau:{num:214,type:"norm",desc:"Galaxy #214"},Pehneldept:{num:215,type:"norm",desc:"Galaxy #215"},Yevettiiqidcon:{num:216,type:"norm",desc:"Galaxy #216"},Sahliacabru:{num:217,type:"norm",desc:"Galaxy #217"},Noggalterpor:{num:218,type:"norm",desc:"Galaxy #218"},Chmageaki:{num:219,type:"norm",desc:"Galaxy #219"},Veticueca:{num:220,type:"norm",desc:"Galaxy #220"},Vittesbursul:{num:221,type:"norm",desc:"Galaxy #221"},Nootanore:{num:222,type:"norm",desc:"Galaxy #222"},Innebdjerah:{num:223,type:"norm",desc:"Galaxy #223"},Kisvarcini:{num:224,type:"norm",desc:"Galaxy #224"},Cuzcogipper:{num:225,type:"norm",desc:"Galaxy #225"},Pamanhermonsu:{num:226,type:"norm",desc:"Galaxy #226"},Brotoghek:{num:227,type:"norm",desc:"Galaxy #227"},Mibittara:{num:228,type:"norm",desc:"Galaxy #228"},Huruahili:{num:229,type:"norm",desc:"Galaxy #229"},Raldwicarn:{num:230,type:"norm",desc:"Galaxy #230"},Ezdartlic:{num:231,type:"norm",desc:"Galaxy #231"},Badesclema:{num:232,type:"norm",desc:"Galaxy #232"},Isenkeyan:{num:233,type:"norm",desc:"Galaxy #233"},Iadoitesu:{num:234,type:"norm",desc:"Galaxy #234"},Yagrovoisi:{num:235,type:"norm",desc:"Galaxy #235"},Ewcomechio:{num:236,type:"norm",desc:"Galaxy #236"},Inunnunnoda:{num:237,type:"norm",desc:"Galaxy #237"},Dischiutun:{num:238,type:"norm",desc:"Galaxy #238"},Yuwarugha:{num:239,type:"norm",desc:"Galaxy #239"},Ialmendra:{num:240,type:"norm",desc:"Galaxy #240"},Reponudrle:{num:241,type:"norm",desc:"Galaxy #241"},Rinjanagrbo:{num:242,type:"norm",desc:"Galaxy #242"},Zeziceloh:{num:243,type:"norm",desc:"Galaxy #243"},Oeileutasc:{num:244,type:"norm",desc:"Galaxy #244"},Zicniijinis:{num:245,type:"norm",desc:"Galaxy #245"},Dugnowarilda:{num:246,type:"norm",desc:"Galaxy #246"},Neuxoisan:{num:247,type:"norm",desc:"Galaxy #247"},Ilmenhorn:{num:248,type:"norm",desc:"Galaxy #248"},Rukwatsuku:{num:249,type:"norm",desc:"Galaxy #249"},Nepitzaspru:{num:250,type:"norm",desc:"Galaxy #250"},Chcehoemig:{num:251,type:"norm",desc:"Galaxy #251"},Haffneyrin:{num:252,type:"norm",desc:"Galaxy #252"},Uliciawai:{num:253,type:"norm",desc:"Galaxy #253"},Tuhgrespod:{num:254,type:"norm",desc:"Galaxy #254"},Iousongola:{num:255,type:"norm",desc:"Galaxy #255"},Odyalutai:{num:256,type:"norm",desc:"Galaxy #256 - Final galaxy"}},re={lush:{label:"Lush",color:"from-emerald-600 to-green-700",border:"border-emerald-500",badge:"bg-emerald-500 text-white",icon:"ðŸŒ¿"},harsh:{label:"Harsh",color:"from-red-600 to-orange-700",border:"border-red-500",badge:"bg-red-500 text-white",icon:"âš”ï¸"},norm:{label:"Normal",color:"from-cyan-600 to-blue-700",border:"border-cyan-500",badge:"bg-cyan-500 text-white",icon:"ðŸŒŒ"},empty:{label:"Empty",color:"from-gray-600 to-gray-700",border:"border-gray-500",badge:"bg-gray-500 text-white",icon:"ðŸŒ‘"}};function ze({reality:i,onSelect:o,selectedGalaxy:c}){const[l,g]=s.useState([]),[h,u]=s.useState(!0),[m,b]=s.useState(null);s.useEffect(()=>{i&&C()},[i]);async function C(){u(!0),b(null);try{const r=await A.get(`/api/galaxies/summary?reality=${encodeURIComponent(i)}`);g(r.data.galaxies||[])}catch(r){console.error("Failed to load galaxies:",r),b("Failed to load galaxy data"),g([])}finally{u(!1)}}const N=s.useMemo(()=>[...l].sort((r,y)=>{const E=Q[r.galaxy]?.num||999,G=Q[y.galaxy]?.num||999;return E-G}),[l]);function _(r){return Q[r]||{num:"?",type:"norm",desc:"Uncharted galaxy"}}if(h)return e.jsx(L,{children:e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(W,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading galaxies for ",i,"..."]})});if(m)return e.jsx(L,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-red-400 mb-4",children:m}),e.jsx("button",{onClick:C,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-white",children:"Retry"})]})});if(l.length===0)return e.jsx(L,{children:e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(Fe,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsxs("p",{children:["No galaxies found in ",i," mode."]}),e.jsx("p",{className:"text-sm mt-2",children:"Systems need to be added to see galaxies here."})]})});const d=N.reduce((r,y)=>r+y.system_count,0),p=N.reduce((r,y)=>r+y.region_count,0);return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between flex-wrap gap-2",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(X,{className:"w-6 h-6 text-cyan-400"}),"Galaxies in ",i]}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[N.length," galaxies with data â€¢ ",d.toLocaleString()," systems â€¢ ",p.toLocaleString()," regions"]})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:N.map(r=>{const y=_(r.galaxy),E=re[y.type]||re.norm,G=c===r.galaxy;return e.jsxs("button",{onClick:()=>o(r.galaxy),className:`
                relative overflow-hidden rounded-xl transition-all duration-300
                text-left group
                ${G?"ring-2 ring-cyan-400 ring-offset-2 ring-offset-gray-900 scale-[1.02]":"hover:scale-[1.02] hover:shadow-lg hover:shadow-cyan-500/10"}
              `,children:[e.jsx("div",{className:`
                absolute inset-0 bg-gradient-to-br opacity-90
                ${G?"from-cyan-600 to-blue-700":`${E.color}`}
              `}),e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"16px 16px"}}),e.jsxs("div",{className:"relative p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`
                      w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold
                      ${G?"bg-white/30 text-white":"bg-black/30 text-white"}
                    `,children:y.num}),e.jsx("span",{className:`
                      text-xs px-2 py-0.5 rounded-full font-medium
                      ${G?"bg-white/20 text-white":E.badge}
                    `,children:E.label})]}),G&&e.jsx("span",{className:"bg-white text-cyan-600 text-xs font-bold px-2 py-1 rounded-full shadow",children:"Selected"})]}),e.jsx("h3",{className:"font-bold text-lg text-white truncate mb-1",children:r.galaxy}),e.jsx("p",{className:"text-xs text-white/70 mb-4 line-clamp-2 min-h-[2rem]",children:y.desc}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-white/20",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-white",children:r.system_count.toLocaleString()}),e.jsx("div",{className:"text-xs text-white/60 uppercase tracking-wide",children:"Systems"})]}),e.jsx("div",{className:"w-px h-8 bg-white/20"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-white",children:r.region_count}),e.jsx("div",{className:"text-xs text-white/60 uppercase tracking-wide",children:"Regions"})]})]})]}),e.jsx("div",{className:`
                absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300
                bg-gradient-to-t from-cyan-500/20 to-transparent pointer-events-none
              `})]},r.galaxy)})})]})}function Ae({reality:i,galaxy:o,onSelect:c,selectedRegion:l,discordTag:g="all",onViewAllSystems:h}){const u=s.useContext(oe),[m,b]=s.useState([]),[C,N]=s.useState(!0),[_,d]=s.useState(null),[p,r]=s.useState(0),[y,E]=s.useState(0),G=50,[S,U]=s.useState([]),[T,R]=s.useState(!1),[k,H]=s.useState(null),[F,z]=s.useState(""),[v,M]=s.useState(null),[P,j]=s.useState(""),[n,a]=s.useState(!1);s.useEffect(()=>{i&&o&&f()},[i,o,p,g]),s.useEffect(()=>{A.get("/api/discord_tags").then(t=>{U(t.data.tags||[])}).catch(()=>{})},[]);async function f(){N(!0),d(null);try{const t=new URLSearchParams({reality:i,galaxy:o,include_systems:"false",page:p.toString(),limit:G.toString()});g&&g!=="all"&&t.append("discord_tag",g);const x=await A.get(`/api/regions/grouped?${t.toString()}`);b(x.data.regions||[]),E(x.data.total_regions||0)}catch(t){console.error("Failed to load regions:",t),d("Failed to load region data"),b([])}finally{N(!1)}}function D(t,x){t.stopPropagation(),H(x),z(x.display_name||x.custom_name||""),M(null),j(""),R(!0)}async function V(t){if(t.preventDefault(),!F.trim()||!k)return;const x=u?.isAdmin&&!u?.isSuperAdmin,$=x?u?.user?.username:P.trim();if(!u?.isSuperAdmin){if(!v){alert("Please select a Discord Community");return}if(!x&&!P.trim()){alert("Please enter your Discord Username");return}}const{region_x:I,region_y:O,region_z:B}=k;a(!0);try{u?.isSuperAdmin?await A.put(`/api/regions/${I}/${O}/${B}`,{custom_name:F.trim()}):await A.post(`/api/regions/${I}/${O}/${B}/submit`,{proposed_name:F.trim(),discord_tag:v,personal_discord_username:$}),R(!1),H(null),z(""),M(null),j(""),f(),alert(u?.isSuperAdmin?"Region name updated!":"Name submitted for approval!")}catch(ne){alert("Failed: "+(ne.response?.data?.detail||ne.message))}finally{a(!1)}}const w=Math.ceil(y/G),Z=p>0,q=p<w-1,te=s.useMemo(()=>{const t=[],x=p+1;if(w<=7)for(let $=1;$<=w;$++)t.push($);else{t.push(1),x>3&&t.push("...");const $=Math.max(2,x-1),I=Math.min(w-1,x+1),O=new Set(t);for(let B=$;B<=I;B++)O.has(B)||(t.push(B),O.add(B));x<w-2&&t.push("..."),O.has(w)||t.push(w)}return t},[p,w]),ce=g&&!["all","untagged","personal"].includes(g);function de(t){return`${t.region_x}-${t.region_y}-${t.region_z}`}function me(t){return l?l.region_x===t.region_x&&l.region_y===t.region_y&&l.region_z===t.region_z:!1}if(C&&m.length===0)return e.jsx(L,{children:e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(W,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading regions in ",o,"..."]})});if(_)return e.jsx(L,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-red-400 mb-4",children:_}),e.jsx("button",{onClick:f,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-white",children:"Retry"})]})});if(m.length===0)return e.jsx(L,{children:e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(J,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsxs("p",{children:["No regions found in ",o,"."]}),e.jsx("p",{className:"text-sm mt-2",children:"Systems need to be added to see regions here."})]})});const ye=m.reduce((t,x)=>t+(x.system_count||0),0);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(J,{className:"w-6 h-6 text-purple-400"}),"Regions in ",o]}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[y," regions total â€¢ Showing ",m.length," (",ye.toLocaleString()," systems)"]})]}),w>1&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>r(t=>Math.max(0,t-1)),disabled:!Z,className:`p-2 rounded ${Z?"bg-gray-700 hover:bg-gray-600":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,children:e.jsx(ie,{className:"w-5 h-5"})}),te.map((t,x)=>t==="..."?e.jsx("span",{className:"px-2 text-gray-500",children:"..."},`ellipsis-${x}`):e.jsx("button",{onClick:()=>r(t-1),className:`px-3 py-1 rounded text-sm ${p+1===t?"bg-purple-600 text-white font-medium":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:t},t)),e.jsx("button",{onClick:()=>r(t=>Math.min(w-1,t+1)),disabled:!q,className:`p-2 rounded ${q?"bg-gray-700 hover:bg-gray-600":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,children:e.jsx(ae,{className:"w-5 h-5"})})]})]}),C&&e.jsxs("div",{className:"text-center py-2 text-cyan-400 text-sm",children:[e.jsx(W,{className:"w-4 h-4 animate-spin inline mr-2"}),"Updating..."]}),ce&&h&&e.jsx("div",{className:"mb-4",children:e.jsxs("button",{onClick:h,className:"w-full p-4 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 rounded-xl text-white font-semibold transition-all flex items-center justify-center gap-2 shadow-lg hover:shadow-cyan-500/25",children:[e.jsx(K,{className:"w-5 h-5"}),"View All ",g," Systems (",y>0?"across all regions":"none found",")"]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:m.map(t=>{const x=me(t),$=t.display_name&&t.display_name!==`Region (${t.region_x}, ${t.region_y}, ${t.region_z})`;return e.jsxs("div",{className:`
                relative overflow-hidden rounded-xl transition-all duration-300
                group
                ${x?"ring-2 ring-purple-400 ring-offset-2 ring-offset-gray-900 scale-[1.02]":"hover:scale-[1.02] hover:shadow-lg hover:shadow-purple-500/10"}
              `,children:[e.jsx("div",{className:`
                absolute inset-0 bg-gradient-to-br
                ${x?"from-purple-600 to-indigo-700":$?"from-purple-700/80 to-indigo-800/80":"from-gray-700 to-gray-800"}
              `}),e.jsx("div",{className:"absolute inset-0 opacity-5",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"12px 12px"}}),e.jsxs("button",{onClick:()=>c(t),className:"relative p-4 w-full text-left",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("div",{className:`
                    p-2 rounded-lg
                    ${x?"bg-white/20":$?"bg-purple-500/30":"bg-gray-600/50"}
                  `,children:$?e.jsx(K,{className:"w-5 h-5 text-yellow-400 fill-yellow-400"}):e.jsx(J,{className:`w-5 h-5 ${x?"text-white":"text-purple-400"}`})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("a",{href:`/map/region?rx=${t.region_x}&ry=${t.region_y}&rz=${t.region_z}`,target:"_blank",rel:"noopener noreferrer",onClick:I=>I.stopPropagation(),className:`
                        px-2 py-1 rounded-lg text-xs font-medium transition-colors
                        ${x?"bg-white/20 hover:bg-white/30 text-white":"bg-cyan-600/80 hover:bg-cyan-500 text-white"}
                      `,title:"View in 3D Map",children:"View"}),e.jsx("button",{onClick:I=>D(I,t),className:`
                        p-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity
                        ${x?"bg-white/20 hover:bg-white/30":"bg-gray-600/50 hover:bg-gray-500/50"}
                      `,title:$?"Edit name":"Set name",children:e.jsx(we,{className:"w-4 h-4 text-white"})})]})]}),e.jsx("h3",{className:"font-bold text-white truncate mb-1",children:$?e.jsx("span",{className:"text-purple-200",children:t.display_name}):e.jsx("span",{className:"text-gray-300",children:"Unnamed Region"})}),e.jsxs("p",{className:"text-xs font-mono text-white/50 mb-3",children:["(",t.region_x,", ",t.region_y,", ",t.region_z,")"]}),e.jsxs("div",{className:`
                  flex items-center justify-between pt-3 border-t
                  ${x?"border-white/20":"border-white/10"}
                `,children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl font-bold text-white",children:t.system_count}),e.jsx("span",{className:"text-xs ml-1.5 text-white/60",children:t.system_count===1?"system":"systems"})]}),$&&e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-purple-500/30 text-purple-200",children:"Named"})]}),x&&e.jsx("div",{className:"absolute -top-1 -right-1",children:e.jsx("span",{className:"bg-white text-purple-600 text-xs font-bold px-2 py-1 rounded-full shadow",children:"Selected"})})]}),e.jsx("div",{className:`
                absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300
                bg-gradient-to-t from-purple-500/20 to-transparent pointer-events-none
              `})]},de(t))})}),w>1&&e.jsxs("div",{className:"flex justify-center items-center gap-1 pt-4 flex-wrap",children:[e.jsx("button",{onClick:()=>r(t=>Math.max(0,t-1)),disabled:!Z,className:`px-3 py-2 rounded ${Z?"bg-gray-700 hover:bg-gray-600":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,children:"Previous"}),te.map((t,x)=>t==="..."?e.jsx("span",{className:"px-2 text-gray-500",children:"..."},`ellipsis-bottom-${x}`):e.jsx("button",{onClick:()=>r(t-1),className:`px-3 py-2 rounded text-sm ${p+1===t?"bg-purple-600 text-white font-medium":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:t},`bottom-${t}`)),e.jsx("button",{onClick:()=>r(t=>Math.min(w-1,t+1)),disabled:!q,className:`px-3 py-2 rounded ${q?"bg-gray-700 hover:bg-gray-600":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,children:"Next"})]}),T&&k&&e.jsx(fe,{title:k.display_name?"Edit Region Name":"Set Region Name",onClose:()=>R(!1),children:e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 text-center",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Coordinates"}),e.jsxs("p",{className:"font-mono text-purple-400",children:["(",k.region_x,", ",k.region_y,", ",k.region_z,")"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Region Name"}),e.jsx("input",{type:"text",value:F,onChange:t=>z(t.target.value),placeholder:"Enter region name...",className:"w-full px-3 py-2 rounded border border-gray-600 bg-gray-800 focus:border-purple-500 focus:outline-none",autoFocus:!0,maxLength:50}),!u?.isSuperAdmin&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Your submission will be reviewed before approval."})]}),!u?.isSuperAdmin&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["Discord Community ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{className:`w-full px-3 py-2 rounded border bg-gray-800 focus:outline-none ${v?"border-gray-600 focus:border-purple-500":"border-red-500/50"}`,value:v||"",onChange:t=>M(t.target.value||null),required:!0,children:[e.jsx("option",{value:"",children:"-- Select Community (Required) --"}),S.map(t=>e.jsxs("option",{value:t.tag,children:[t.name," (",t.tag,")"]},t.tag))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Which Discord community will review this region name?"})]}),u?.isAdmin?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Submitting As"}),e.jsx("div",{className:"w-full px-3 py-2 rounded border border-gray-600 bg-gray-700 text-gray-300",children:u?.user?.username||"Unknown"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Your logged-in username will be used for tracking"})]}):e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold mb-2",children:["Your Discord Username ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",value:P,onChange:t=>j(t.target.value),placeholder:"e.g., YourName#1234",className:`w-full px-3 py-2 rounded border bg-gray-800 focus:outline-none ${P.trim()?"border-gray-600 focus:border-purple-500":"border-red-500/50"}`,required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"So we can contact you if needed"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(Y,{type:"submit",className:"flex-1 bg-purple-600 hover:bg-purple-700",disabled:n||!F.trim(),children:n?"Submitting...":u?.isSuperAdmin?"Save":"Submit for Approval"}),e.jsx(Y,{type:"button",className:"bg-gray-600 hover:bg-gray-700",onClick:()=>R(!1),disabled:n,children:"Cancel"})]})]})})]})}function le({reality:i,galaxy:o,region:c,discordTag:l="all",globalMode:g=!1,globalModeTitle:h=null}){const[u,m]=s.useState([]),[b,C]=s.useState(!0),[N,_]=s.useState(null),[d,p]=s.useState(1),[r,y]=s.useState({total:0,pages:0}),E=50,{personalColor:G}=ve();s.useEffect(()=>{(g||i&&o&&c)&&S()},[i,o,c,d,l,g]);async function S(){C(!0),_(null);try{const n=new URLSearchParams({page:d.toString(),limit:E.toString(),include_planets:"false"});!g&&c?(n.append("reality",i),n.append("galaxy",o),n.append("region_x",c.region_x.toString()),n.append("region_y",c.region_y.toString()),n.append("region_z",c.region_z.toString())):g&&(i&&n.append("reality",i),o&&n.append("galaxy",o)),l&&l!=="all"&&n.append("discord_tag",l);const a=await A.get(`/api/systems?${n.toString()}`);m(a.data.systems||[]),y(a.data.pagination||{total:0,pages:0})}catch(n){console.error("Failed to load systems:",n),_("Failed to load system data"),m([])}finally{C(!1)}}const U={Yellow:"text-yellow-400",Red:"text-red-400",Green:"text-green-400",Blue:"text-blue-400",Purple:"text-purple-400"};function T(n){if(!n)return"text-gray-300";switch(n[0]?.toUpperCase()){case"O":case"B":return"text-blue-300";case"F":case"G":return"text-yellow-300";case"K":case"M":return"text-red-400";case"E":return"text-green-400";case"X":case"Y":return"text-purple-400";default:return"text-gray-300"}}const R={Trading:"bg-emerald-600",Mining:"bg-amber-600",Technology:"bg-blue-600",Manufacturing:"bg-orange-600",Scientific:"bg-purple-600","Power Generation":"bg-yellow-600"},k=s.useMemo(()=>({Haven:"bg-cyan-500 text-white",IEA:"bg-green-500 text-white","B.E.S":"bg-orange-500 text-white",ARCH:"bg-purple-500 text-white",TBH:"bg-yellow-500 text-black",EVRN:"bg-pink-500 text-white"}),[]),H=s.useCallback(n=>{if(!n)return null;if(n==="personal")return e.jsx("span",{className:"text-xs text-white px-1.5 py-0.5 rounded",style:{backgroundColor:G},children:"Personal"});const a=k[n]||"bg-indigo-500 text-white";return e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${a}`,children:n})},[k,G]),F=d>1,z=d<r.pages,v=r.pages||0,M=s.useMemo(()=>{const n=[],a=d;if(v<=7)for(let f=1;f<=v;f++)n.push(f);else{n.push(1),a>3&&n.push("...");const f=Math.max(2,a-1),D=Math.min(v-1,a+1),V=new Set(n);for(let w=f;w<=D;w++)V.has(w)||(n.push(w),V.add(w));a<v-2&&n.push("..."),V.has(v)||n.push(v)}return n},[d,v]);if(b&&u.length===0)return e.jsx(L,{children:e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(W,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading systems..."]})});if(N)return e.jsx(L,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-red-400 mb-4",children:N}),e.jsx("button",{onClick:S,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-white",children:"Retry"})]})});if(u.length===0)return e.jsx(L,{children:e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(K,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No systems found in this region."})]})});const P=c?.display_name||c?.custom_name||(c?`Region (${c.region_x}, ${c.region_y}, ${c.region_z})`:""),j=g?h||`All ${l} Systems`:`Systems in ${P}`;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:j}),e.jsxs("p",{className:"text-sm text-gray-400",children:[r.total," systems total â€¢ Page ",d," of ",r.pages||1]})]}),!g&&c&&e.jsxs("a",{href:`/map/region?rx=${c.region_x}&ry=${c.region_y}&rz=${c.region_z}`,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-cyan-600 hover:bg-cyan-500 rounded-lg text-white text-sm font-medium transition-colors flex items-center gap-1.5",title:"View region in 3D map",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"3D Map"})]})]}),v>1&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>p(n=>Math.max(1,n-1)),disabled:!F,className:`p-2 rounded ${F?"bg-gray-700 hover:bg-gray-600":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,children:e.jsx(ie,{className:"w-5 h-5"})}),M.map((n,a)=>n==="..."?e.jsx("span",{className:"px-2 text-gray-500",children:"..."},`ellipsis-${a}`):e.jsx("button",{onClick:()=>p(n),className:`px-3 py-1 rounded text-sm ${d===n?"bg-cyan-600 text-white font-medium":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:n},n)),e.jsx("button",{onClick:()=>p(n=>Math.min(r.pages,n+1)),disabled:!z,className:`p-2 rounded ${z?"bg-gray-700 hover:bg-gray-600":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,children:e.jsx(ae,{className:"w-5 h-5"})})]})]}),b&&e.jsxs("div",{className:"text-center py-2 text-cyan-400 text-sm",children:[e.jsx(W,{className:"w-4 h-4 animate-spin inline mr-2"}),"Updating..."]}),e.jsx("div",{className:"space-y-2",children:u.map(n=>{const a=U[n.star_type]||"text-gray-400",f=R[n.economy_type]||"bg-gray-600";return e.jsx(ee,{to:`/systems/${n.id}`,className:"block p-4 bg-gray-800 border border-gray-700 rounded-lg hover:border-cyan-500 hover:bg-gray-750 transition-all group",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"shrink-0 mt-1",children:n.star_type?e.jsx(pe,{className:`w-6 h-6 ${a}`}):e.jsx(K,{className:"w-6 h-6 text-gray-500"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold text-white group-hover:text-cyan-400 transition-colors truncate",children:n.name||"Unnamed System"}),H(n.discord_tag)]}),n.glyph_code&&e.jsx("p",{className:"text-xs font-mono text-gray-500 mt-0.5",children:n.glyph_code}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[n.star_type&&e.jsx("span",{className:`text-xs px-2 py-0.5 rounded bg-gray-700 ${a}`,children:n.star_type}),n.economy_type&&e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${f} text-white`,children:n.economy_type}),n.conflict_level&&e.jsxs("span",{className:`text-xs px-2 py-0.5 rounded ${n.conflict_level==="High"?"bg-red-600":n.conflict_level==="Medium"?"bg-yellow-600":"bg-green-600"} text-white`,children:[n.conflict_level," Conflict"]}),n.dominant_lifeform&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-gray-700 text-gray-300",children:n.dominant_lifeform}),n.stellar_classification&&e.jsx("span",{className:`text-xs px-2 py-0.5 rounded bg-gray-700 font-mono ${T(n.stellar_classification)}`,children:n.stellar_classification})]})]})]}),e.jsx("a",{href:`/map/system/${n.id}`,target:"_blank",rel:"noopener noreferrer",onClick:D=>D.stopPropagation(),className:"shrink-0 px-3 py-2 rounded bg-cyan-600 hover:bg-cyan-500 transition-colors text-white text-xs font-medium",title:"View system in 3D",children:"View"})]})},n.id)})}),v>1&&e.jsxs("div",{className:"flex justify-center items-center gap-1 pt-4 flex-wrap",children:[e.jsx("button",{onClick:()=>p(n=>Math.max(1,n-1)),disabled:!F,className:`px-3 py-2 rounded ${F?"bg-gray-700 hover:bg-gray-600":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,children:"Previous"}),M.map((n,a)=>n==="..."?e.jsx("span",{className:"px-2 text-gray-500",children:"..."},`ellipsis-bottom-${a}`):e.jsx("button",{onClick:()=>p(n),className:`px-3 py-2 rounded text-sm ${d===n?"bg-cyan-600 text-white font-medium":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:n},`bottom-${n}`)),e.jsx("button",{onClick:()=>p(n=>Math.min(r.pages,n+1)),disabled:!z,className:`px-3 py-2 rounded ${z?"bg-gray-700 hover:bg-gray-600":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,children:"Next"})]})]})}function Te(i,o){const[c,l]=s.useState(i);return s.useEffect(()=>{const g=setTimeout(()=>{l(i)},o);return()=>{clearTimeout(g)}},[i,o]),c}function Ze(){const i=xe();s.useContext(oe);const[o,c]=ue(),[l,g]=s.useState(o.get("reality")||null),[h,u]=s.useState(o.get("galaxy")||null),[m,b]=s.useState(()=>{const a=o.get("rx"),f=o.get("ry"),D=o.get("rz");return a&&f&&D?{region_x:parseInt(a),region_y:parseInt(f),region_z:parseInt(D),display_name:o.get("rname")||null}:null}),[C,N]=s.useState(""),_=Te(C,300),[d,p]=s.useState([]),[r,y]=s.useState(!1),[E,G]=s.useState([]),[S,U]=s.useState("all"),[T,R]=s.useState(!1),[k,H]=s.useState(!1);s.useEffect(()=>{A.get("/api/discord_tags").then(a=>{G(a.data.tags||[])}).catch(()=>{})},[]),s.useEffect(()=>{if(!_.trim()){p([]);return}y(!0),A.get(`/api/systems/search?q=${encodeURIComponent(_)}&limit=20`).then(a=>p(a.data.results||[])).catch(()=>p([])).finally(()=>y(!1))},[_]),s.useEffect(()=>{const a=new URLSearchParams;l&&a.set("reality",l),h&&a.set("galaxy",h),m&&(a.set("rx",m.region_x.toString()),a.set("ry",m.region_y.toString()),a.set("rz",m.region_z.toString()),m.display_name&&a.set("rname",m.display_name)),c(a,{replace:!0})},[l,h,m]);function F(a){g(a),u(null),b(null)}function z(a){u(a),b(null)}function v(a){b(a),R(!1)}function M(){R(!0),b(null)}function P(a){a==="root"?(g(null),u(null),b(null),R(!1)):a==="reality"?(u(null),b(null),R(!1)):a==="galaxy"?(b(null),R(!1)):a==="viewAll"&&R(!1)}const j=s.useMemo(()=>T?"viewAllSystems":m?"systems":h?"regions":l?"galaxies":"realities",[l,h,m,T]),n=s.useMemo(()=>{const a=[{label:"Systems",level:"root",active:j==="realities"}];if(l&&a.push({label:l,level:"reality",active:j==="galaxies"}),h&&a.push({label:h,level:"galaxy",active:j==="regions"}),T)a.push({label:`All ${S} Systems`,level:"viewAll",active:j==="viewAllSystems"});else if(m){const f=m.display_name||m.custom_name||`(${m.region_x}, ${m.region_y}, ${m.region_z})`;a.push({label:f,level:"region",active:j==="systems"})}return a},[l,h,m,j,T,S]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(he,{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{"aria-label":"Search systems",className:"w-full pl-10 pr-3 py-2 rounded bg-gray-800 border border-gray-700 focus:border-cyan-500 focus:outline-none",value:C,onChange:a=>N(a.target.value),placeholder:"Search all systems..."}),r&&e.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-cyan-400 text-sm",children:"..."})]})}),e.jsx("button",{className:`lg:hidden px-3 py-2 rounded border transition-colors flex items-center gap-1.5 ${k||S!=="all"?"bg-cyan-600 border-cyan-500 text-white":"bg-gray-700 border-gray-600 text-gray-300"}`,onClick:()=>H(!k),children:k?e.jsx(Ne,{className:"w-5 h-5"}):e.jsx(Ge,{className:"w-5 h-5"})}),e.jsxs("div",{className:"hidden lg:flex gap-2",children:[e.jsxs("select",{className:"px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",value:S,onChange:a=>U(a.target.value),children:[e.jsx("option",{value:"all",children:"All Communities"}),e.jsx("option",{value:"untagged",children:"Untagged Only"}),e.jsx("option",{value:"personal",children:"Personal Only"}),E.map(a=>e.jsx("option",{value:a.tag,children:a.name},a.tag))]}),e.jsx(ee,{to:"/wizard",children:e.jsx(Y,{variant:"neutral",children:"New System"})})]})]}),k&&e.jsxs("div",{className:"lg:hidden bg-gray-800/50 rounded-lg p-4 space-y-4 border border-gray-700",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Community Filter"}),e.jsxs("select",{className:"w-full px-3 py-2 rounded bg-gray-700 text-white border border-gray-600",value:S,onChange:a=>U(a.target.value),children:[e.jsx("option",{value:"all",children:"All Communities"}),e.jsx("option",{value:"untagged",children:"Untagged Only"}),e.jsx("option",{value:"personal",children:"Personal Only"}),E.map(a=>e.jsx("option",{value:a.tag,children:a.name},a.tag))]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-700",children:[e.jsx(Y,{onClick:()=>U("all"),variant:"ghost",className:"flex-1",children:"Clear Filter"}),e.jsx(ee,{to:"/wizard",className:"flex-1",children:e.jsx(Y,{variant:"neutral",className:"w-full",children:"New System"})})]})]}),e.jsx("nav",{className:"flex items-center gap-1 text-sm flex-wrap",children:n.map((a,f)=>e.jsxs(ge.Fragment,{children:[f>0&&e.jsx(ae,{className:"w-4 h-4 text-gray-500 shrink-0"}),a.active?e.jsxs("span",{className:"px-2 py-1 rounded bg-cyan-600 text-white font-medium",children:[f===0&&e.jsx(se,{className:"w-4 h-4 inline mr-1"}),a.label]}):e.jsxs("button",{onClick:()=>P(a.level),className:"px-2 py-1 rounded hover:bg-gray-700 text-gray-400 hover:text-white transition-colors",children:[f===0&&e.jsx(se,{className:"w-4 h-4 inline mr-1"}),a.label]})]},a.level))})]}),_.trim()&&(d.length>0||r)&&e.jsxs(L,{className:"border-cyan-500/50",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 text-cyan-400",children:["Search Results ",d.length>0&&`(${d.length})`]}),r?e.jsx("div",{className:"text-gray-400 py-4 text-center",children:"Searching..."}):e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:d.map(a=>e.jsxs("div",{className:"p-3 bg-gray-800 rounded hover:bg-gray-700 cursor-pointer flex items-center justify-between transition-colors",onClick:()=>i(`/systems/${encodeURIComponent(a.id)}`),children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[a.name,e.jsx(je,{tag:a.discord_tag}),a.star_type&&e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${a.star_type==="Yellow"?"bg-yellow-500 text-black":a.star_type==="Red"?"bg-red-500 text-white":a.star_type==="Blue"?"bg-blue-500 text-white":a.star_type==="Green"?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:a.star_type})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[a.region_name?e.jsx("span",{className:"text-purple-400",children:a.region_name}):e.jsxs("span",{children:["Region (",a.region_x,", ",a.region_y,", ",a.region_z,")"]}),e.jsxs("span",{className:"ml-2",children:["â€¢ ",a.galaxy||"Euclid"]}),e.jsxs("span",{className:"ml-2",children:["â€¢ ",a.reality||"Normal"]}),a.glyph_code&&e.jsxs("span",{className:"ml-2 font-mono text-purple-400",children:["(",a.glyph_code,")"]})]})]}),e.jsx(Y,{variant:"ghost",className:"text-sm shrink-0",children:"View â†’"})]},a.id))})]}),e.jsxs("div",{className:"min-h-[400px]",children:[j==="realities"&&e.jsx(Le,{onSelect:F,selectedReality:l}),j==="galaxies"&&e.jsx(ze,{reality:l,onSelect:z,selectedGalaxy:h}),j==="regions"&&e.jsx(Ae,{reality:l,galaxy:h,onSelect:v,selectedRegion:m,discordTag:S,onViewAllSystems:M}),j==="systems"&&e.jsx(le,{reality:l,galaxy:h,region:m,discordTag:S}),j==="viewAllSystems"&&e.jsx(le,{reality:l,galaxy:h,discordTag:S,globalMode:!0,globalModeTitle:`All ${S} Systems in ${h}`})]})]})}export{Ze as default};
